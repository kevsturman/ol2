{
  "version": 3,
  "sources": ["OpenLayers/Request.js", "OpenLayers/Format/JSON.js", "OpenLayers/BaseTypes/Class.js", "OpenLayers/Util.js", "OpenLayers/Util/vendorPrefix.js", "OpenLayers/Animation.js", "OpenLayers/BaseTypes.js", "OpenLayers/BaseTypes/Bounds.js", "OpenLayers/BaseTypes/Date.js", "OpenLayers/BaseTypes/Element.js", "OpenLayers/BaseTypes/LonLat.js", "OpenLayers/BaseTypes/Pixel.js", "OpenLayers/BaseTypes/Size.js", "OpenLayers/Console.js", "OpenLayers/Tween.js", "OpenLayers/Kinetic.js", "OpenLayers/Events.js", "OpenLayers/Events/buttonclick.js", "OpenLayers/Events/featureclick.js", "<stdin>", "OpenLayers/Request/XMLHttpRequest.js", "OpenLayers/Projection.js", "OpenLayers/Map.js", "OpenLayers/Layer.js", "OpenLayers/Icon.js", "OpenLayers/Marker.js", "OpenLayers/Marker/Box.js", "OpenLayers/Popup.js", "OpenLayers/Tile.js", "OpenLayers/Tile/Image.js", "OpenLayers/Tile/Image/IFrame.js", "OpenLayers/Tile/UTFGrid.js", "OpenLayers/Layer/Image.js", "OpenLayers/Layer/SphericalMercator.js", "OpenLayers/Layer/EventPane.js", "OpenLayers/Layer/FixedZoomLevels.js", "OpenLayers/Layer/Google.js", "OpenLayers/Layer/Google/v3.js", "OpenLayers/Layer/HTTPRequest.js", "OpenLayers/Layer/Grid.js", "OpenLayers/Layer/MapGuide.js", "OpenLayers/Layer/MapServer.js", "OpenLayers/Layer/KaMap.js", "OpenLayers/Layer/KaMapCache.js", "OpenLayers/Layer/Markers.js", "OpenLayers/Layer/Text.js", "OpenLayers/Layer/WorldWind.js", "OpenLayers/Layer/ArcGIS93Rest.js", "OpenLayers/Layer/WMS.js", "OpenLayers/Layer/WMTS.js", "OpenLayers/Layer/ArcIMS.js", "OpenLayers/Layer/GeoRSS.js", "OpenLayers/Layer/Boxes.js", "OpenLayers/Layer/XYZ.js", "OpenLayers/Layer/UTFGrid.js", "OpenLayers/Layer/OSM.js", "OpenLayers/Layer/Bing.js", "OpenLayers/Layer/TMS.js", "OpenLayers/Layer/TileCache.js", "OpenLayers/Layer/Zoomify.js", "OpenLayers/Layer/ArcGISCache.js", "OpenLayers/Popup/Anchored.js", "OpenLayers/Popup/Framed.js", "OpenLayers/Popup/FramedCloud.js", "OpenLayers/Feature.js", "OpenLayers/Feature/Vector.js", "OpenLayers/Handler.js", "OpenLayers/Handler/Click.js", "OpenLayers/Handler/Hover.js", "OpenLayers/Handler/Point.js", "OpenLayers/Handler/Path.js", "OpenLayers/Handler/Polygon.js", "OpenLayers/Handler/Feature.js", "OpenLayers/Handler/Drag.js", "OpenLayers/Handler/Pinch.js", "OpenLayers/Handler/RegularPolygon.js", "OpenLayers/Handler/Box.js", "OpenLayers/Handler/MouseWheel.js", "OpenLayers/Handler/Keyboard.js", "OpenLayers/Control.js", "OpenLayers/Control/Attribution.js", "OpenLayers/Control/Button.js", "OpenLayers/Control/CacheRead.js", "OpenLayers/Control/CacheWrite.js", "OpenLayers/Control/ZoomBox.js", "OpenLayers/Control/ZoomToMaxExtent.js", "OpenLayers/Control/DragPan.js", "OpenLayers/Control/Navigation.js", "OpenLayers/Control/PinchZoom.js", "OpenLayers/Control/TouchNavigation.js", "OpenLayers/Control/MousePosition.js", "OpenLayers/Control/OverviewMap.js", "OpenLayers/Control/KeyboardDefaults.js", "OpenLayers/Control/PanZoom.js", "OpenLayers/Control/PanZoomBar.js", "OpenLayers/Control/ArgParser.js", "OpenLayers/Control/Permalink.js", "OpenLayers/Control/Scale.js", "OpenLayers/Control/ScaleLine.js", "OpenLayers/Control/Snapping.js", "OpenLayers/Control/Split.js", "OpenLayers/Control/LayerSwitcher.js", "OpenLayers/Control/DrawFeature.js", "OpenLayers/Control/DragFeature.js", "OpenLayers/Control/ModifyFeature.js", "OpenLayers/Control/ModifyFeature/BySegment.js", "OpenLayers/Control/Panel.js", "OpenLayers/Control/SelectFeature.js", "OpenLayers/Control/NavigationHistory.js", "OpenLayers/Control/Measure.js", "OpenLayers/Control/WMSGetFeatureInfo.js", "OpenLayers/Control/WMTSGetFeatureInfo.js", "OpenLayers/Control/Graticule.js", "OpenLayers/Control/TransformFeature.js", "OpenLayers/Control/UTFGrid.js", "OpenLayers/Control/SLDSelect.js", "OpenLayers/Control/Zoom.js", "OpenLayers/Control/TextButtonPanel.js", "OpenLayers/Geometry.js", "OpenLayers/Geometry/Collection.js", "OpenLayers/Geometry/Point.js", "OpenLayers/Geometry/MultiPoint.js", "OpenLayers/Geometry/Curve.js", "OpenLayers/Geometry/LineString.js", "OpenLayers/Geometry/LinearRing.js", "OpenLayers/Geometry/Polygon.js", "OpenLayers/Geometry/MultiLineString.js", "OpenLayers/Geometry/MultiPolygon.js", "OpenLayers/Renderer.js", "OpenLayers/Renderer/Elements.js", "OpenLayers/Renderer/SVG.js", "OpenLayers/Renderer/Canvas.js", "OpenLayers/Renderer/VML.js", "OpenLayers/Layer/Vector.js", "OpenLayers/Layer/PointGrid.js", "OpenLayers/Layer/Vector/RootContainer.js", "OpenLayers/Strategy.js", "OpenLayers/Strategy/Filter.js", "OpenLayers/Strategy/Fixed.js", "OpenLayers/Strategy/Cluster.js", "OpenLayers/Strategy/Paging.js", "OpenLayers/Strategy/BBOX.js", "OpenLayers/Strategy/Save.js", "OpenLayers/Strategy/Refresh.js", "OpenLayers/Filter.js", "OpenLayers/Filter/FeatureId.js", "OpenLayers/Filter/Logical.js", "OpenLayers/Filter/Comparison.js", "OpenLayers/Filter/Spatial.js", "OpenLayers/Filter/Function.js", "OpenLayers/Protocol.js", "OpenLayers/Protocol/HTTP.js", "OpenLayers/Protocol/WFS.js", "OpenLayers/Protocol/WFS/v1.js", "OpenLayers/Protocol/WFS/v1_0_0.js", "OpenLayers/Protocol/WFS/v1_1_0.js", "OpenLayers/Protocol/WFS/v2_0_0.js", "OpenLayers/Protocol/CSW.js", "OpenLayers/Protocol/CSW/v2_0_2.js", "OpenLayers/Protocol/Script.js", "OpenLayers/Protocol/SOS.js", "OpenLayers/Protocol/SOS/v1_0_0.js", "OpenLayers/Layer/PointTrack.js", "OpenLayers/Style.js", "OpenLayers/Style2.js", "OpenLayers/StyleMap.js", "OpenLayers/Rule.js", "OpenLayers/Format.js", "OpenLayers/Format/QueryStringFilter.js", "OpenLayers/Format/XML.js", "OpenLayers/Format/XML/VersionedOGC.js", "OpenLayers/Format/Context.js", "OpenLayers/Format/ArcXML.js", "OpenLayers/Format/ArcXML/Features.js", "OpenLayers/Format/GML.js", "OpenLayers/Format/GML/Base.js", "OpenLayers/Format/GML/v2.js", "OpenLayers/Format/GML/v3.js", "OpenLayers/Format/Atom.js", "OpenLayers/Format/EncodedPolyline.js", "OpenLayers/Format/KML.js", "OpenLayers/Format/GeoRSS.js", "OpenLayers/Format/WFS.js", "OpenLayers/Format/OWSCommon.js", "OpenLayers/Format/OWSCommon/v1.js", "OpenLayers/Format/OWSCommon/v1_0_0.js", "OpenLayers/Format/OWSCommon/v1_1_0.js", "OpenLayers/Format/WCSCapabilities.js", "OpenLayers/Format/WCSCapabilities/v1.js", "OpenLayers/Format/WCSCapabilities/v1_0_0.js", "OpenLayers/Format/WCSCapabilities/v1_1_0.js", "OpenLayers/Format/WCSDescribeCoverage.js", "OpenLayers/Format/WCSDescribeCoverage/v1.js", "OpenLayers/Format/WCSDescribeCoverage/v1_0_0.js", "OpenLayers/Format/WCSDescribeCoverage/v1_1_0.js", "OpenLayers/Format/WFSCapabilities.js", "OpenLayers/Format/WFSCapabilities/v1.js", "OpenLayers/Format/WFSCapabilities/v1_0_0.js", "OpenLayers/Format/WFSCapabilities/v1_1_0.js", "OpenLayers/Format/WFSCapabilities/v2_0_0.js", "OpenLayers/Format/WFSDescribeFeatureType.js", "OpenLayers/Format/WMSDescribeLayer.js", "OpenLayers/Format/WMSDescribeLayer/v1_1.js", "OpenLayers/Format/WKT.js", "OpenLayers/Format/CQL.js", "OpenLayers/Format/OSM.js", "OpenLayers/Format/GPX.js", "OpenLayers/Format/Filter.js", "OpenLayers/Format/Filter/v1.js", "OpenLayers/Format/Filter/v2.js", "OpenLayers/Format/Filter/v1_0_0.js", "OpenLayers/Format/Filter/v1_1_0.js", "OpenLayers/Format/Filter/v2_0_0.js", "OpenLayers/Format/SLD.js", "OpenLayers/Format/SLD/v1.js", "OpenLayers/Format/SLD/v1_0_0.js", "OpenLayers/Format/SLD/v1_0_0_GeoServer.js", "OpenLayers/Format/CSWGetDomain.js", "OpenLayers/Format/CSWGetDomain/v2_0_2.js", "OpenLayers/Format/CSWGetRecords.js", "OpenLayers/Format/CSWGetRecords/v2_0_2.js", "OpenLayers/Format/WFST.js", "OpenLayers/Format/WFST/v1.js", "OpenLayers/Format/WFST/v1_0_0.js", "OpenLayers/Format/WFST/v1_1_0.js", "OpenLayers/Format/WFST/v2_0_0.js", "OpenLayers/Format/Text.js", "OpenLayers/Format/GeoJSON.js", "OpenLayers/Format/WMC.js", "OpenLayers/Format/WMC/v1.js", "OpenLayers/Format/WMC/v1_0_0.js", "OpenLayers/Format/WMC/v1_1_0.js", "OpenLayers/Format/WCSGetCoverage.js", "OpenLayers/Format/WMSCapabilities.js", "OpenLayers/Format/WMSCapabilities/v1.js", "OpenLayers/Format/WMSCapabilities/v1_1.js", "OpenLayers/Format/WMSCapabilities/v1_1_0.js", "OpenLayers/Format/WMSCapabilities/v1_1_1.js", "OpenLayers/Format/WMSCapabilities/v1_3.js", "OpenLayers/Format/WMSCapabilities/v1_3_0.js", "OpenLayers/Format/WMSCapabilities/v1_1_1_WMSC.js", "OpenLayers/Format/WMSGetFeatureInfo.js", "OpenLayers/Format/SOSCapabilities.js", "OpenLayers/Format/SOSCapabilities/v1_0_0.js", "OpenLayers/Format/SOSGetFeatureOfInterest.js", "OpenLayers/Format/SOSGetObservation.js", "OpenLayers/Format/OWSContext.js", "OpenLayers/Format/OWSContext/v0_3_1.js", "OpenLayers/Format/WMTSCapabilities.js", "OpenLayers/Format/WMTSCapabilities/v1_0_0.js", "OpenLayers/Format/WPSCapabilities.js", "OpenLayers/Format/WPSCapabilities/v1_0_0.js", "OpenLayers/Format/WPSDescribeProcess.js", "OpenLayers/Format/WPSDescribeProcess/v1_0_0.js", "OpenLayers/Format/WPSExecute.js", "OpenLayers/Format/XLS.js", "OpenLayers/Format/XLS/v1.js", "OpenLayers/Format/XLS/v1_1_0.js", "OpenLayers/Format/OGCExceptionReport.js", "OpenLayers/Format/TMSCapabilities.js", "OpenLayers/Control/GetFeature.js", "OpenLayers/Control/NavToolbar.js", "OpenLayers/Control/PanPanel.js", "OpenLayers/Control/Pan.js", "OpenLayers/Control/ZoomIn.js", "OpenLayers/Control/ZoomOut.js", "OpenLayers/Control/ZoomPanel.js", "OpenLayers/Control/EditingToolbar.js", "OpenLayers/Control/Geolocate.js", "OpenLayers/Symbolizer.js", "OpenLayers/Symbolizer/Point.js", "OpenLayers/Symbolizer/Line.js", "OpenLayers/Symbolizer/Polygon.js", "OpenLayers/Symbolizer/Text.js", "OpenLayers/Symbolizer/Raster.js", "OpenLayers/Lang.js", "OpenLayers/Lang/en.js", "OpenLayers/Spherical.js", "OpenLayers/TileManager.js", "OpenLayers/WPSClient.js", "OpenLayers/WPSProcess.js"],
  "sourcesContent": ["/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Events.js\n * @requires OpenLayers/Request/XMLHttpRequest.js\n */\n\n/**\n * TODO: deprecate me\n * Use OpenLayers.Request.proxy instead.\n */\nOpenLayers.ProxyHost = \"\";\n\n/**\n * Namespace: OpenLayers.Request\n * The OpenLayers.Request namespace contains convenience methods for working\n *     with XMLHttpRequests.  These methods work with a cross-browser\n *     W3C compliant <OpenLayers.Request.XMLHttpRequest> class.\n */\nif (!OpenLayers.Request) {\n    /**\n     * This allows for OpenLayers/Request/XMLHttpRequest.js to be included\n     * before or after this script.\n     */\n    OpenLayers.Request = {};\n}\nOpenLayers.Util.extend(OpenLayers.Request, {\n    \n    /**\n     * Constant: DEFAULT_CONFIG\n     * {Object} Default configuration for all requests.\n     */\n    DEFAULT_CONFIG: {\n        method: \"GET\",\n        url: window.location.href,\n        async: true,\n        user: undefined,\n        password: undefined,\n        params: null,\n        proxy: OpenLayers.ProxyHost,\n        headers: {},\n        data: null,\n        callback: function() {},\n        success: null,\n        failure: null,\n        scope: null\n    },\n    \n    /**\n     * Constant: URL_SPLIT_REGEX\n     */\n    URL_SPLIT_REGEX: /([^:]*:)\\/\\/([^:]*:?[^@]*@)?([^:\\/\\?]*):?([^\\/\\?]*)/,\n    \n    /**\n     * APIProperty: events\n     * {<OpenLayers.Events>} An events object that handles all \n     *     events on the {<OpenLayers.Request>} object.\n     *\n     * All event listeners will receive an event object with three properties:\n     * request - {<OpenLayers.Request.XMLHttpRequest>} The request object.\n     * config - {Object} The config object sent to the specific request method.\n     * requestUrl - {String} The request url.\n     * \n     * Supported event types:\n     * complete - Triggered when we have a response from the request, if a\n     *     listener returns false, no further response processing will take\n     *     place.\n     * success - Triggered when the HTTP response has a success code (200-299).\n     * failure - Triggered when the HTTP response does not have a success code.\n     */\n    events: new OpenLayers.Events(this),\n    \n    /**\n     * Method: makeSameOrigin\n     * Using the specified proxy, returns a same origin url of the provided url.\n     *\n     * Parameters:\n     * url - {String} An arbitrary url\n     * proxy {String|Function} The proxy to use to make the provided url a\n     *     same origin url.\n     *\n     * Returns\n     * {String} the same origin url. If no proxy is provided, the returned url\n     *     will be the same as the provided url.\n     */\n    makeSameOrigin: function(url, proxy) {\n        var sameOrigin = url.indexOf(\"http\") !== 0;\n        var urlParts = !sameOrigin && url.match(this.URL_SPLIT_REGEX);\n        if (urlParts) {\n            var location = window.location;\n            sameOrigin =\n                urlParts[1] == location.protocol &&\n                urlParts[3] == location.hostname;\n            var uPort = urlParts[4], lPort = location.port;\n            if (uPort != 80 && uPort != \"\" || lPort != \"80\" && lPort != \"\") {\n                sameOrigin = sameOrigin && uPort == lPort;\n            }\n        }\n        if (!sameOrigin) {\n            if (proxy) {\n                if (typeof proxy == \"function\") {\n                    url = proxy(url);\n                } else {\n                    url = proxy + encodeURIComponent(url);\n                }\n            }\n        }\n        return url;\n    },\n\n    /**\n     * APIMethod: issue\n     * Create a new XMLHttpRequest object, open it, set any headers, bind\n     *     a callback to done state, and send any data.  It is recommended that\n     *     you use one <GET>, <POST>, <PUT>, <DELETE>, <OPTIONS>, or <HEAD>.\n     *     This method is only documented to provide detail on the configuration\n     *     options available to all request methods.\n     *\n     * Parameters:\n     * config - {Object} Object containing properties for configuring the\n     *     request.  Allowed configuration properties are described below.\n     *     This object is modified and should not be reused.\n     *\n     * Allowed config properties:\n     * method - {String} One of GET, POST, PUT, DELETE, HEAD, or\n     *     OPTIONS.  Default is GET.\n     * url - {String} URL for the request.\n     * async - {Boolean} Open an asynchronous request.  Default is true.\n     * user - {String} User for relevant authentication scheme.  Set\n     *     to null to clear current user.\n     * password - {String} Password for relevant authentication scheme.\n     *     Set to null to clear current password.\n     * proxy - {String} Optional proxy.  Defaults to\n     *     <OpenLayers.ProxyHost>.\n     * params - {Object} Any key:value pairs to be appended to the\n     *     url as a query string.  Assumes url doesn't already include a query\n     *     string or hash.  Typically, this is only appropriate for <GET>\n     *     requests where the query string will be appended to the url.\n     *     Parameter values that are arrays will be\n     *     concatenated with a comma (note that this goes against form-encoding)\n     *     as is done with <OpenLayers.Util.getParameterString>.\n     * headers - {Object} Object with header:value pairs to be set on\n     *     the request.\n     * data - {String | Document} Optional data to send with the request.\n     *     Typically, this is only used with <POST> and <PUT> requests.\n     *     Make sure to provide the appropriate \"Content-Type\" header for your\n     *     data.  For <POST> and <PUT> requests, the content type defaults to\n     *     \"application-xml\".  If your data is a different content type, or\n     *     if you are using a different HTTP method, set the \"Content-Type\"\n     *     header to match your data type.\n     * callback - {Function} Function to call when request is done.\n     *     To determine if the request failed, check request.status (200\n     *     indicates success).\n     * success - {Function} Optional function to call if request status is in\n     *     the 200s.  This will be called in addition to callback above and\n     *     would typically only be used as an alternative.\n     * failure - {Function} Optional function to call if request status is not\n     *     in the 200s.  This will be called in addition to callback above and\n     *     would typically only be used as an alternative.\n     * scope - {Object} If callback is a public method on some object,\n     *     set the scope to that object.\n     *\n     * Returns:\n     * {XMLHttpRequest} Request object.  To abort the request before a response\n     *     is received, call abort() on the request object.\n     */\n    issue: function(config) {        \n        // apply default config - proxy host may have changed\n        var defaultConfig = OpenLayers.Util.extend(\n            this.DEFAULT_CONFIG,\n            {proxy: OpenLayers.ProxyHost}\n        );\n        config = config || {};\n        config.headers = config.headers || {};\n        config = OpenLayers.Util.applyDefaults(config, defaultConfig);\n        config.headers = OpenLayers.Util.applyDefaults(config.headers, defaultConfig.headers);\n        // Always set the \"X-Requested-With\" header to signal that this request\n        // was issued through the XHR-object. Since header keys are case \n        // insensitive and we want to allow overriding of the \"X-Requested-With\"\n        // header through the user we cannot use applyDefaults, but have to \n        // check manually whether we were called with a \"X-Requested-With\"\n        // header.\n        var customRequestedWithHeader = false,\n            headerKey;\n        for(headerKey in config.headers) {\n            if (config.headers.hasOwnProperty( headerKey )) {\n                if (headerKey.toLowerCase() === 'x-requested-with') {\n                    customRequestedWithHeader = true;\n                }\n            }\n        }\n        if (customRequestedWithHeader === false) {\n            // we did not have a custom \"X-Requested-With\" header\n            config.headers['X-Requested-With'] = 'XMLHttpRequest';\n        }\n\n        // create request, open, and set headers\n        var request = new OpenLayers.Request.XMLHttpRequest();\n        var url = OpenLayers.Util.urlAppend(config.url, \n            OpenLayers.Util.getParameterString(config.params || {}));\n        url = OpenLayers.Request.makeSameOrigin(url, config.proxy);\n        request.open(\n            config.method, url, config.async, config.user, config.password\n        );\n        for(var header in config.headers) {\n            request.setRequestHeader(header, config.headers[header]);\n        }\n\n        var events = this.events;\n\n        // we want to execute runCallbacks with \"this\" as the\n        // execution scope\n        var self = this;\n        \n        request.onreadystatechange = function() {\n            if(request.readyState == OpenLayers.Request.XMLHttpRequest.DONE) {\n                var proceed = events.triggerEvent(\n                    \"complete\",\n                    {request: request, config: config, requestUrl: url}\n                );\n                if(proceed !== false) {\n                    self.runCallbacks(\n                        {request: request, config: config, requestUrl: url}\n                    );\n                }\n            }\n        };\n        \n        // send request (optionally with data) and return\n        // call in a timeout for asynchronous requests so the return is\n        // available before readyState == 4 for cached docs\n        if(config.async === false) {\n            request.send(config.data);\n        } else {\n            window.setTimeout(function(){\n                if (request.readyState !== 0) { // W3C: 0-UNSENT\n                    request.send(config.data);\n                }\n            }, 0);\n        }\n        return request;\n    },\n    \n    /**\n     * Method: runCallbacks\n     * Calls the complete, success and failure callbacks. Application\n     *    can listen to the \"complete\" event, have the listener \n     *    display a confirm window and always return false, and\n     *    execute OpenLayers.Request.runCallbacks if the user\n     *    hits \"yes\" in the confirm window.\n     *\n     * Parameters:\n     * options - {Object} Hash containing request, config and requestUrl keys\n     */\n    runCallbacks: function(options) {\n        var request = options.request;\n        var config = options.config;\n        \n        // bind callbacks to readyState 4 (done)\n        var complete = (config.scope) ?\n            OpenLayers.Function.bind(config.callback, config.scope) :\n            config.callback;\n        \n        // optional success callback\n        var success;\n        if(config.success) {\n            success = (config.scope) ?\n                OpenLayers.Function.bind(config.success, config.scope) :\n                config.success;\n        }\n\n        // optional failure callback\n        var failure;\n        if(config.failure) {\n            failure = (config.scope) ?\n                OpenLayers.Function.bind(config.failure, config.scope) :\n                config.failure;\n        }\n\n        if (OpenLayers.Util.createUrlObject(config.url).protocol == \"file:\" &&\n                                                        request.responseText) {\n            request.status = 200;\n        }\n        complete(request);\n\n        if (!request.status || (request.status >= 200 && request.status < 300)) {\n            this.events.triggerEvent(\"success\", options);\n            if(success) {\n                success(request);\n            }\n        }\n        if(request.status && (request.status < 200 || request.status >= 300)) {                    \n            this.events.triggerEvent(\"failure\", options);\n            if(failure) {\n                failure(request);\n            }\n        }\n    },\n    \n    /**\n     * APIMethod: GET\n     * Send an HTTP GET request.  Additional configuration properties are\n     *     documented in the <issue> method, with the method property set\n     *     to GET.\n     *\n     * Parameters:\n     * config - {Object} Object with properties for configuring the request.\n     *     See the <issue> method for documentation of allowed properties.\n     *     This object is modified and should not be reused.\n     * \n     * Returns:\n     * {XMLHttpRequest} Request object.\n     */\n    GET: function(config) {\n        config = OpenLayers.Util.extend(config, {method: \"GET\"});\n        return OpenLayers.Request.issue(config);\n    },\n    \n    /**\n     * APIMethod: POST\n     * Send a POST request.  Additional configuration properties are\n     *     documented in the <issue> method, with the method property set\n     *     to POST and \"Content-Type\" header set to \"application/xml\".\n     *\n     * Parameters:\n     * config - {Object} Object with properties for configuring the request.\n     *     See the <issue> method for documentation of allowed properties.  The\n     *     default \"Content-Type\" header will be set to \"application-xml\" if\n     *     none is provided.  This object is modified and should not be reused.\n     * \n     * Returns:\n     * {XMLHttpRequest} Request object.\n     */\n    POST: function(config) {\n        config = OpenLayers.Util.extend(config, {method: \"POST\"});\n        // set content type to application/xml if it isn't already set\n        config.headers = config.headers ? config.headers : {};\n        if(!(\"CONTENT-TYPE\" in OpenLayers.Util.upperCaseObject(config.headers))) {\n            config.headers[\"Content-Type\"] = \"application/xml\";\n        }\n        return OpenLayers.Request.issue(config);\n    },\n    \n    /**\n     * APIMethod: PUT\n     * Send an HTTP PUT request.  Additional configuration properties are\n     *     documented in the <issue> method, with the method property set\n     *     to PUT and \"Content-Type\" header set to \"application/xml\".\n     *\n     * Parameters:\n     * config - {Object} Object with properties for configuring the request.\n     *     See the <issue> method for documentation of allowed properties.  The\n     *     default \"Content-Type\" header will be set to \"application-xml\" if\n     *     none is provided.  This object is modified and should not be reused.\n     * \n     * Returns:\n     * {XMLHttpRequest} Request object.\n     */\n    PUT: function(config) {\n        config = OpenLayers.Util.extend(config, {method: \"PUT\"});\n        // set content type to application/xml if it isn't already set\n        config.headers = config.headers ? config.headers : {};\n        if(!(\"CONTENT-TYPE\" in OpenLayers.Util.upperCaseObject(config.headers))) {\n            config.headers[\"Content-Type\"] = \"application/xml\";\n        }\n        return OpenLayers.Request.issue(config);\n    },\n    \n    /**\n     * APIMethod: DELETE\n     * Send an HTTP DELETE request.  Additional configuration properties are\n     *     documented in the <issue> method, with the method property set\n     *     to DELETE.\n     *\n     * Parameters:\n     * config - {Object} Object with properties for configuring the request.\n     *     See the <issue> method for documentation of allowed properties.\n     *     This object is modified and should not be reused.\n     * \n     * Returns:\n     * {XMLHttpRequest} Request object.\n     */\n    DELETE: function(config) {\n        config = OpenLayers.Util.extend(config, {method: \"DELETE\"});\n        return OpenLayers.Request.issue(config);\n    },\n  \n    /**\n     * APIMethod: HEAD\n     * Send an HTTP HEAD request.  Additional configuration properties are\n     *     documented in the <issue> method, with the method property set\n     *     to HEAD.\n     *\n     * Parameters:\n     * config - {Object} Object with properties for configuring the request.\n     *     See the <issue> method for documentation of allowed properties.\n     *     This object is modified and should not be reused.\n     * \n     * Returns:\n     * {XMLHttpRequest} Request object.\n     */\n    HEAD: function(config) {\n        config = OpenLayers.Util.extend(config, {method: \"HEAD\"});\n        return OpenLayers.Request.issue(config);\n    },\n    \n    /**\n     * APIMethod: OPTIONS\n     * Send an HTTP OPTIONS request.  Additional configuration properties are\n     *     documented in the <issue> method, with the method property set\n     *     to OPTIONS.\n     *\n     * Parameters:\n     * config - {Object} Object with properties for configuring the request.\n     *     See the <issue> method for documentation of allowed properties.\n     *     This object is modified and should not be reused.\n     * \n     * Returns:\n     * {XMLHttpRequest} Request object.\n     */\n    OPTIONS: function(config) {\n        config = OpenLayers.Util.extend(config, {method: \"OPTIONS\"});\n        return OpenLayers.Request.issue(config);\n    }\n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * Note:\n * This work draws heavily from the public domain JSON serializer/deserializer\n *     at http://www.json.org/json.js. Rewritten so that it doesn't modify\n *     basic data prototypes.\n */\n\n/**\n * @requires OpenLayers/Format.js\n */\n\n/**\n * Class: OpenLayers.Format.JSON\n * A parser to read/write JSON safely.  Create a new instance with the\n *     <OpenLayers.Format.JSON> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Format>\n */\nOpenLayers.Format.JSON = OpenLayers.Class(OpenLayers.Format, {\n    \n    /**\n     * APIProperty: indent\n     * {String} For \"pretty\" printing, the indent string will be used once for\n     *     each indentation level.\n     */\n    indent: \"    \",\n    \n    /**\n     * APIProperty: space\n     * {String} For \"pretty\" printing, the space string will be used after\n     *     the \":\" separating a name/value pair.\n     */\n    space: \" \",\n    \n    /**\n     * APIProperty: newline\n     * {String} For \"pretty\" printing, the newline string will be used at the\n     *     end of each name/value pair or array item.\n     */\n    newline: \"\\n\",\n    \n    /**\n     * Property: level\n     * {Integer} For \"pretty\" printing, this is incremented/decremented during\n     *     serialization.\n     */\n    level: 0,\n\n    /**\n     * Property: pretty\n     * {Boolean} Serialize with extra whitespace for structure.  This is set\n     *     by the <write> method.\n     */\n    pretty: false,\n\n    /**\n     * Property: nativeJSON\n     * {Boolean} Does the browser support native json?\n     */\n    nativeJSON: (function() {\n        return !!(window.JSON && typeof JSON.parse == \"function\" && typeof JSON.stringify == \"function\");\n    })(),\n\n    /**\n     * Constructor: OpenLayers.Format.JSON\n     * Create a new parser for JSON.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * APIMethod: read\n     * Deserialize a json string.\n     *\n     * Parameters:\n     * json - {String} A JSON string\n     * filter - {Function} A function which will be called for every key and\n     *     value at every level of the final result. Each value will be\n     *     replaced by the result of the filter function. This can be used to\n     *     reform generic objects into instances of classes, or to transform\n     *     date strings into Date objects.\n     *     \n     * Returns:\n     * {Object} An object, array, string, or number .\n     */\n    read: function(json, filter) {\n        var object;\n        if (this.nativeJSON) {\n            object = JSON.parse(json, filter);\n        } else try {\n            /**\n             * Parsing happens in three stages. In the first stage, we run the\n             *     text against a regular expression which looks for non-JSON\n             *     characters. We are especially concerned with '()' and 'new'\n             *     because they can cause invocation, and '=' because it can\n             *     cause mutation. But just to be safe, we will reject all\n             *     unexpected characters.\n             */\n            if (/^[\\],:{}\\s]*$/.test(json.replace(/\\\\[\"\\\\\\/bfnrtu]/g, '@').\n                                replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, ']').\n                                replace(/(?:^|:|,)(?:\\s*\\[)+/g, ''))) {\n\n                /**\n                 * In the second stage we use the eval function to compile the\n                 *     text into a JavaScript structure. The '{' operator is\n                 *     subject to a syntactic ambiguity in JavaScript - it can\n                 *     begin a block or an object literal. We wrap the text in\n                 *     parens to eliminate the ambiguity.\n                 */\n                object = eval('(' + json + ')');\n\n                /**\n                 * In the optional third stage, we recursively walk the new\n                 *     structure, passing each name/value pair to a filter\n                 *     function for possible transformation.\n                 */\n                if(typeof filter === 'function') {\n                    function walk(k, v) {\n                        if(v && typeof v === 'object') {\n                            for(var i in v) {\n                                if(v.hasOwnProperty(i)) {\n                                    v[i] = walk(i, v[i]);\n                                }\n                            }\n                        }\n                        return filter(k, v);\n                    }\n                    object = walk('', object);\n                }\n            }\n        } catch(e) {\n            // Fall through if the regexp test fails.\n        }\n\n        if(this.keepData) {\n            this.data = object;\n        }\n\n        return object;\n    },\n\n    /**\n     * APIMethod: write\n     * Serialize an object into a JSON string.\n     *\n     * Parameters:\n     * value - {String} The object, array, string, number, boolean or date\n     *     to be serialized.\n     * pretty - {Boolean} Structure the output with newlines and indentation.\n     *     Default is false.\n     *\n     * Returns:\n     * {String} The JSON string representation of the input value.\n     */\n    write: function(value, pretty) {\n        this.pretty = !!pretty;\n        var json = null;\n        var type = typeof value;\n        if(this.serialize[type]) {\n            try {\n                json = (!this.pretty && this.nativeJSON) ?\n                    JSON.stringify(value) :\n                    this.serialize[type].apply(this, [value]);\n            } catch(err) {\n                OpenLayers.Console.error(\"Trouble serializing: \" + err);\n            }\n        }\n        return json;\n    },\n    \n    /**\n     * Method: writeIndent\n     * Output an indentation string depending on the indentation level.\n     *\n     * Returns:\n     * {String} An appropriate indentation string.\n     */\n    writeIndent: function() {\n        var pieces = [];\n        if(this.pretty) {\n            for(var i=0; i<this.level; ++i) {\n                pieces.push(this.indent);\n            }\n        }\n        return pieces.join('');\n    },\n    \n    /**\n     * Method: writeNewline\n     * Output a string representing a newline if in pretty printing mode.\n     *\n     * Returns:\n     * {String} A string representing a new line.\n     */\n    writeNewline: function() {\n        return (this.pretty) ? this.newline : '';\n    },\n    \n    /**\n     * Method: writeSpace\n     * Output a string representing a space if in pretty printing mode.\n     *\n     * Returns:\n     * {String} A space.\n     */\n    writeSpace: function() {\n        return (this.pretty) ? this.space : '';\n    },\n\n    /**\n     * Property: serialize\n     * Object with properties corresponding to the serializable data types.\n     *     Property values are functions that do the actual serializing.\n     */\n    serialize: {\n        /**\n         * Method: serialize.object\n         * Transform an object into a JSON string.\n         *\n         * Parameters:\n         * object - {Object} The object to be serialized.\n         * \n         * Returns:\n         * {String} A JSON string representing the object.\n         */\n        'object': function(object) {\n            // three special objects that we want to treat differently\n            if(object == null) {\n                return \"null\";\n            }\n            if(object.constructor == Date) {\n                return this.serialize.date.apply(this, [object]);\n            }\n            if(object.constructor == Array) {\n                return this.serialize.array.apply(this, [object]);\n            }\n            var pieces = ['{'];\n            this.level += 1;\n            var key, keyJSON, valueJSON;\n            \n            var addComma = false;\n            for(key in object) {\n                if(object.hasOwnProperty(key)) {\n                    // recursive calls need to allow for sub-classing\n                    keyJSON = OpenLayers.Format.JSON.prototype.write.apply(this,\n                                                    [key, this.pretty]);\n                    valueJSON = OpenLayers.Format.JSON.prototype.write.apply(this,\n                                                    [object[key], this.pretty]);\n                    if(keyJSON != null && valueJSON != null) {\n                        if(addComma) {\n                            pieces.push(',');\n                        }\n                        pieces.push(this.writeNewline(), this.writeIndent(),\n                                    keyJSON, ':', this.writeSpace(), valueJSON);\n                        addComma = true;\n                    }\n                }\n            }\n            \n            this.level -= 1;\n            pieces.push(this.writeNewline(), this.writeIndent(), '}');\n            return pieces.join('');\n        },\n        \n        /**\n         * Method: serialize.array\n         * Transform an array into a JSON string.\n         *\n         * Parameters:\n         * array - {Array} The array to be serialized\n         * \n         * Returns:\n         * {String} A JSON string representing the array.\n         */\n        'array': function(array) {\n            var json;\n            var pieces = ['['];\n            this.level += 1;\n    \n            for(var i=0, len=array.length; i<len; ++i) {\n                // recursive calls need to allow for sub-classing\n                json = OpenLayers.Format.JSON.prototype.write.apply(this,\n                                                    [array[i], this.pretty]);\n                if(json != null) {\n                    if(i > 0) {\n                        pieces.push(',');\n                    }\n                    pieces.push(this.writeNewline(), this.writeIndent(), json);\n                }\n            }\n\n            this.level -= 1;    \n            pieces.push(this.writeNewline(), this.writeIndent(), ']');\n            return pieces.join('');\n        },\n        \n        /**\n         * Method: serialize.string\n         * Transform a string into a JSON string.\n         *\n         * Parameters:\n         * string - {String} The string to be serialized\n         * \n         * Returns:\n         * {String} A JSON string representing the string.\n         */\n        'string': function(string) {\n            // If the string contains no control characters, no quote characters, and no\n            // backslash characters, then we can simply slap some quotes around it.\n            // Otherwise we must also replace the offending characters with safe\n            // sequences.    \n            var m = {\n                '\\b': '\\\\b',\n                '\\t': '\\\\t',\n                '\\n': '\\\\n',\n                '\\f': '\\\\f',\n                '\\r': '\\\\r',\n                '\"' : '\\\\\"',\n                '\\\\': '\\\\\\\\'\n            };\n            if(/[\"\\\\\\x00-\\x1f]/.test(string)) {\n                return '\"' + string.replace(/([\\x00-\\x1f\\\\\"])/g, function(a, b) {\n                    var c = m[b];\n                    if(c) {\n                        return c;\n                    }\n                    c = b.charCodeAt();\n                    return '\\\\u00' +\n                        Math.floor(c / 16).toString(16) +\n                        (c % 16).toString(16);\n                }) + '\"';\n            }\n            return '\"' + string + '\"';\n        },\n\n        /**\n         * Method: serialize.number\n         * Transform a number into a JSON string.\n         *\n         * Parameters:\n         * number - {Number} The number to be serialized.\n         *\n         * Returns:\n         * {String} A JSON string representing the number.\n         */\n        'number': function(number) {\n            return isFinite(number) ? String(number) : \"null\";\n        },\n        \n        /**\n         * Method: serialize.boolean\n         * Transform a boolean into a JSON string.\n         *\n         * Parameters:\n         * bool - {Boolean} The boolean to be serialized.\n         * \n         * Returns:\n         * {String} A JSON string representing the boolean.\n         */\n        'boolean': function(bool) {\n            return String(bool);\n        },\n        \n        /**\n         * Method: serialize.object\n         * Transform a date into a JSON string.\n         *\n         * Parameters:\n         * date - {Date} The date to be serialized.\n         * \n         * Returns:\n         * {String} A JSON string representing the date.\n         */\n        'date': function(date) {    \n            function format(number) {\n                // Format integers to have at least two digits.\n                return (number < 10) ? '0' + number : number;\n            }\n            return '\"' + date.getFullYear() + '-' +\n                    format(date.getMonth() + 1) + '-' +\n                    format(date.getDate()) + 'T' +\n                    format(date.getHours()) + ':' +\n                    format(date.getMinutes()) + ':' +\n                    format(date.getSeconds()) + '\"';\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.JSON\" \n\n});     \n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/SingleFile.js\n */\n\n/**\n * Constructor: OpenLayers.Class\n * Base class used to construct all other classes. Includes support for \n *     multiple inheritance. \n *     \n * This constructor is new in OpenLayers 2.5.  At OpenLayers 3.0, the old \n *     syntax for creating classes and dealing with inheritance \n *     will be removed.\n * \n * To create a new OpenLayers-style class, use the following syntax:\n * (code)\n *     var MyClass = OpenLayers.Class(prototype);\n * (end)\n *\n * To create a new OpenLayers-style class with multiple inheritance, use the\n *     following syntax:\n * (code)\n *     var MyClass = OpenLayers.Class(Class1, Class2, prototype);\n * (end)\n * \n * Note that instanceof reflection will only reveal Class1 as superclass.\n *\n */\nOpenLayers.Class = function() {\n    var len = arguments.length;\n    var P = arguments[0];\n    var F = arguments[len-1];\n\n    var C = typeof F.initialize == \"function\" ?\n        F.initialize :\n        function(){ P.prototype.initialize.apply(this, arguments); };\n\n    if (len > 1) {\n        var newArgs = [C, P].concat(\n                Array.prototype.slice.call(arguments).slice(1, len-1), F);\n        OpenLayers.inherit.apply(null, newArgs);\n    } else {\n        C.prototype = F;\n    }\n    return C;\n};\n\n/**\n * Function: OpenLayers.inherit\n *\n * Parameters:\n * C - {Object} the class that inherits\n * P - {Object} the superclass to inherit from\n *\n * In addition to the mandatory C and P parameters, an arbitrary number of\n * objects can be passed, which will extend C.\n */\nOpenLayers.inherit = function(C, P) {\n   var F = function() {};\n   F.prototype = P.prototype;\n   C.prototype = new F;\n   var i, l, o;\n   for(i=2, l=arguments.length; i<l; i++) {\n       o = arguments[i];\n       if(typeof o === \"function\") {\n           o = o.prototype;\n       }\n       OpenLayers.Util.extend(C.prototype, o);\n   }\n};\n\n/**\n * APIFunction: extend\n * Copy all properties of a source object to a destination object.  Modifies\n *     the passed in destination object.  Any properties on the source object\n *     that are set to undefined will not be (re)set on the destination object.\n *\n * Parameters:\n * destination - {Object} The object that will be modified\n * source - {Object} The object with properties to be set on the destination\n *\n * Returns:\n * {Object} The destination object.\n */\nOpenLayers.Util = OpenLayers.Util || {};\nOpenLayers.Util.extend = function(destination, source) {\n    destination = destination || {};\n    if (source) {\n        for (var property in source) {\n            var value = source[property];\n            if (value !== undefined) {\n                destination[property] = value;\n            }\n        }\n\n        /**\n         * IE doesn't include the toString property when iterating over an object's\n         * properties with the for(property in object) syntax.  Explicitly check if\n         * the source has its own toString property.\n         */\n\n        /*\n         * FF/Windows < 2.0.0.13 reports \"Illegal operation on WrappedNative\n         * prototype object\" when calling hawOwnProperty if the source object\n         * is an instance of window.Event.\n         */\n\n        var sourceIsEvt = typeof window.Event == \"function\"\n                          && source instanceof window.Event;\n\n        if (!sourceIsEvt\n           && source.hasOwnProperty && source.hasOwnProperty(\"toString\")) {\n            destination.toString = source.toString;\n        }\n    }\n    return destination;\n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes.js\n * @requires OpenLayers/BaseTypes/Bounds.js\n * @requires OpenLayers/BaseTypes/Element.js\n * @requires OpenLayers/BaseTypes/LonLat.js\n * @requires OpenLayers/BaseTypes/Pixel.js\n * @requires OpenLayers/BaseTypes/Size.js\n * @requires OpenLayers/Lang.js\n */\n\n/**\n * Namespace: Util\n */\nOpenLayers.Util = OpenLayers.Util || {};\n\n/** \n * Function: getElement\n * This is the old $() from prototype\n *\n * Parameters:\n * e - {String or DOMElement or Window}\n *\n * Returns:\n * {Array(DOMElement) or DOMElement}\n */\nOpenLayers.Util.getElement = function() {\n    var elements = [];\n\n    for (var i=0, len=arguments.length; i<len; i++) {\n        var element = arguments[i];\n        if (typeof element == 'string') {\n            element = document.getElementById(element);\n        }\n        if (arguments.length == 1) {\n            return element;\n        }\n        elements.push(element);\n    }\n    return elements;\n};\n\n/**\n * Function: isElement\n * A cross-browser implementation of \"e instanceof Element\".\n *\n * Parameters:\n * o - {Object} The object to test.\n *\n * Returns:\n * {Boolean}\n */\nOpenLayers.Util.isElement = function(o) {\n    return !!(o && o.nodeType === 1);\n};\n\n/**\n * Function: isArray\n * Tests that the provided object is an array.\n * This test handles the cross-IFRAME case not caught\n * by \"a instanceof Array\" and should be used instead.\n * \n * Parameters:\n * a - {Object} the object test.\n * \n * Returns:\n * {Boolean} true if the object is an array.\n */\nOpenLayers.Util.isArray = function(a) {\n    return (Object.prototype.toString.call(a) === '[object Array]');\n};\n\n/** \n * Function: removeItem\n * Remove an object from an array. Iterates through the array\n *     to find the item, then removes it.\n *\n * Parameters:\n * array - {Array}\n * item - {Object}\n * \n * Returns:\n * {Array} A reference to the array\n */\nOpenLayers.Util.removeItem = function(array, item) {\n    for(var i = array.length - 1; i >= 0; i--) {\n        if(array[i] == item) {\n            array.splice(i,1);\n            //break;more than once??\n        }\n    }\n    return array;\n};\n\n/** \n * Function: indexOf\n * Seems to exist already in FF, but not in MOZ.\n * \n * Parameters:\n * array - {Array}\n * obj - {*}\n * \n * Returns:\n * {Integer} The index at which the first object was found in the array.\n *           If not found, returns -1.\n */\nOpenLayers.Util.indexOf = function(array, obj) {\n    // use the build-in function if available.\n    if (typeof array.indexOf == \"function\") {\n        return array.indexOf(obj);\n    } else {\n        for (var i = 0, len = array.length; i < len; i++) {\n            if (array[i] == obj) {\n                return i;\n            }\n        }\n        return -1;   \n    }\n};\n\n\n/**\n * Property: dotless\n * {RegExp}\n * Compiled regular expression to match dots (\".\").  This is used for replacing\n *     dots in identifiers.  Because object identifiers are frequently used for\n *     DOM element identifiers by the library, we avoid using dots to make for\n *     more sensible CSS selectors.\n *\n * TODO: Use a module pattern to avoid bloating the API with stuff like this.\n */\nOpenLayers.Util.dotless = /\\./g;\n\n/**\n * Function: modifyDOMElement\n * \n * Modifies many properties of a DOM element all at once.  Passing in \n * null to an individual parameter will avoid setting the attribute.\n *\n * Parameters:\n * element - {DOMElement} DOM element to modify.\n * id - {String} The element id attribute to set.  Note that dots (\".\") will be\n *     replaced with underscore (\"_\") in setting the element id.\n * px - {<OpenLayers.Pixel>|Object} The element left and top position,\n *                                  OpenLayers.Pixel or an object with\n *                                  a 'x' and 'y' properties.\n * sz - {<OpenLayers.Size>|Object} The element width and height,\n *                                 OpenLayers.Size or an object with a\n *                                 'w' and 'h' properties.\n * position - {String}       The position attribute.  eg: absolute, \n *                           relative, etc.\n * border - {String}         The style.border attribute.  eg:\n *                           solid black 2px\n * overflow - {String}       The style.overview attribute.  \n * opacity - {Float}         Fractional value (0.0 - 1.0)\n */\nOpenLayers.Util.modifyDOMElement = function(element, id, px, sz, position, \n                                            border, overflow, opacity) {\n\n    if (id) {\n        element.id = id.replace(OpenLayers.Util.dotless, \"_\");\n    }\n    if (px) {\n        element.style.left = px.x + \"px\";\n        element.style.top = px.y + \"px\";\n    }\n    if (sz) {\n        element.style.width = sz.w + \"px\";\n        element.style.height = sz.h + \"px\";\n    }\n    if (position) {\n        element.style.position = position;\n    }\n    if (border) {\n        element.style.border = border;\n    }\n    if (overflow) {\n        element.style.overflow = overflow;\n    }\n    if (parseFloat(opacity) >= 0.0 && parseFloat(opacity) < 1.0) {\n        element.style.filter = 'alpha(opacity=' + (opacity * 100) + ')';\n        element.style.opacity = opacity;\n    } else if (parseFloat(opacity) == 1.0) {\n        element.style.filter = '';\n        element.style.opacity = '';\n    }\n};\n\n/** \n * Function: createDiv\n * Creates a new div and optionally set some standard attributes.\n * Null may be passed to each parameter if you do not wish to\n * set a particular attribute.\n * Note - zIndex is NOT set on the resulting div.\n * \n * Parameters:\n * id - {String} An identifier for this element.  If no id is\n *               passed an identifier will be created \n *               automatically.  Note that dots (\".\") will be replaced with\n *               underscore (\"_\") when generating ids.\n * px - {<OpenLayers.Pixel>|Object} The element left and top position,\n *                                  OpenLayers.Pixel or an object with\n *                                  a 'x' and 'y' properties.\n * sz - {<OpenLayers.Size>|Object} The element width and height,\n *                                 OpenLayers.Size or an object with a\n *                                 'w' and 'h' properties.\n * imgURL - {String} A url pointing to an image to use as a \n *                   background image.\n * position - {String} The style.position value. eg: absolute,\n *                     relative etc.\n * border - {String} The the style.border value. \n *                   eg: 2px solid black\n * overflow - {String} The style.overflow value. Eg. hidden\n * opacity - {Float} Fractional value (0.0 - 1.0)\n * \n * Returns: \n * {DOMElement} A DOM Div created with the specified attributes.\n */\nOpenLayers.Util.createDiv = function(id, px, sz, imgURL, position, \n                                     border, overflow, opacity) {\n\n    var dom = document.createElement('div');\n\n    if (imgURL) {\n        dom.style.backgroundImage = 'url(' + imgURL + ')';\n    }\n\n    //set generic properties\n    if (!id) {\n        id = OpenLayers.Util.createUniqueID(\"OpenLayersDiv\");\n    }\n    if (!position) {\n        position = \"absolute\";\n    }\n    OpenLayers.Util.modifyDOMElement(dom, id, px, sz, position, \n                                     border, overflow, opacity);\n\n    return dom;\n};\n\n/**\n * Function: createImage\n * Creates an img element with specific attribute values.\n *  \n * Parameters:\n * id - {String} The id field for the img.  If none assigned one will be\n *               automatically generated.\n * px - {<OpenLayers.Pixel>|Object} The element left and top position,\n *                                  OpenLayers.Pixel or an object with\n *                                  a 'x' and 'y' properties.\n * sz - {<OpenLayers.Size>|Object} The element width and height,\n *                                 OpenLayers.Size or an object with a\n *                                 'w' and 'h' properties.\n * imgURL - {String} The url to use as the image source.\n * position - {String} The style.position value.\n * border - {String} The border to place around the image.\n * opacity - {Float} Fractional value (0.0 - 1.0)\n * delayDisplay - {Boolean} If true waits until the image has been\n *                          loaded.\n * \n * Returns:\n * {DOMElement} A DOM Image created with the specified attributes.\n */\nOpenLayers.Util.createImage = function(id, px, sz, imgURL, position, border,\n                                       opacity, delayDisplay) {\n\n    var image = document.createElement(\"img\");\n\n    //set generic properties\n    if (!id) {\n        id = OpenLayers.Util.createUniqueID(\"OpenLayersDiv\");\n    }\n    if (!position) {\n        position = \"relative\";\n    }\n    OpenLayers.Util.modifyDOMElement(image, id, px, sz, position, \n                                     border, null, opacity);\n\n    if (delayDisplay) {\n        image.style.display = \"none\";\n        function display() {\n            image.style.display = \"\";\n            OpenLayers.Event.stopObservingElement(image);\n        }\n        OpenLayers.Event.observe(image, \"load\", display);\n        OpenLayers.Event.observe(image, \"error\", display);\n    }\n    \n    //set special properties\n    image.style.alt = id;\n    image.galleryImg = \"no\";\n    if (imgURL) {\n        image.src = imgURL;\n    }\n        \n    return image;\n};\n\n/**\n * Property: IMAGE_RELOAD_ATTEMPTS\n * {Integer} How many times should we try to reload an image before giving up?\n *           Default is 0\n */\nOpenLayers.IMAGE_RELOAD_ATTEMPTS = 0;\n\n/**\n * Property: alphaHackNeeded\n * {Boolean} true if the png alpha hack is necessary and possible, false otherwise.\n */\nOpenLayers.Util.alphaHackNeeded = null;\n\n/**\n * Function: alphaHack\n * Checks whether it's necessary (and possible) to use the png alpha\n * hack which allows alpha transparency for png images under Internet\n * Explorer.\n * \n * Returns:\n * {Boolean} true if the png alpha hack is necessary and possible, false otherwise.\n */\nOpenLayers.Util.alphaHack = function() {\n    if (OpenLayers.Util.alphaHackNeeded == null) {\n        var arVersion = navigator.appVersion.split(\"MSIE\");\n        var version = parseFloat(arVersion[1]);\n        var filter = false;\n    \n        // IEs4Lin dies when trying to access document.body.filters, because \n        // the property is there, but requires a DLL that can't be provided. This\n        // means that we need to wrap this in a try/catch so that this can\n        // continue.\n    \n        try { \n            filter = !!(document.body.filters);\n        } catch (e) {}    \n    \n        OpenLayers.Util.alphaHackNeeded = (filter && \n                                           (version >= 5.5) && (version < 7));\n    }\n    return OpenLayers.Util.alphaHackNeeded;\n};\n\n/** \n * Function: modifyAlphaImageDiv\n * \n * Parameters:\n * div - {DOMElement} Div containing Alpha-adjusted Image\n * id - {String}\n * px - {<OpenLayers.Pixel>|Object} OpenLayers.Pixel or an object with\n *                                  a 'x' and 'y' properties.\n * sz - {<OpenLayers.Size>|Object} OpenLayers.Size or an object with\n *                                 a 'w' and 'h' properties.\n * imgURL - {String}\n * position - {String}\n * border - {String}\n * sizing - {String} 'crop', 'scale', or 'image'. Default is \"scale\"\n * opacity - {Float} Fractional value (0.0 - 1.0)\n */ \nOpenLayers.Util.modifyAlphaImageDiv = function(div, id, px, sz, imgURL, \n                                               position, border, sizing, \n                                               opacity) {\n\n    OpenLayers.Util.modifyDOMElement(div, id, px, sz, position,\n                                     null, null, opacity);\n\n    var img = div.childNodes[0];\n\n    if (imgURL) {\n        img.src = imgURL;\n    }\n    OpenLayers.Util.modifyDOMElement(img, div.id + \"_innerImage\", null, sz, \n                                     \"relative\", border);\n    \n    if (OpenLayers.Util.alphaHack()) {\n        if(div.style.display != \"none\") {\n            div.style.display = \"inline-block\";\n        }\n        if (sizing == null) {\n            sizing = \"scale\";\n        }\n        \n        div.style.filter = \"progid:DXImageTransform.Microsoft\" +\n                           \".AlphaImageLoader(src='\" + img.src + \"', \" +\n                           \"sizingMethod='\" + sizing + \"')\";\n        if (parseFloat(div.style.opacity) >= 0.0 && \n            parseFloat(div.style.opacity) < 1.0) {\n            div.style.filter += \" alpha(opacity=\" + div.style.opacity * 100 + \")\";\n        }\n\n        img.style.filter = \"alpha(opacity=0)\";\n    }\n};\n\n/** \n * Function: createAlphaImageDiv\n * \n * Parameters:\n * id - {String}\n * px - {<OpenLayers.Pixel>|Object} OpenLayers.Pixel or an object with\n *                                  a 'x' and 'y' properties.\n * sz - {<OpenLayers.Size>|Object} OpenLayers.Size or an object with\n *                                 a 'w' and 'h' properties.\n * imgURL - {String}\n * position - {String}\n * border - {String}\n * sizing - {String} 'crop', 'scale', or 'image'. Default is \"scale\"\n * opacity - {Float} Fractional value (0.0 - 1.0)\n * delayDisplay - {Boolean} If true waits until the image has been\n *                          loaded.\n * \n * Returns:\n * {DOMElement} A DOM Div created with a DOM Image inside it. If the hack is \n *              needed for transparency in IE, it is added.\n */ \nOpenLayers.Util.createAlphaImageDiv = function(id, px, sz, imgURL, \n                                               position, border, sizing, \n                                               opacity, delayDisplay) {\n    \n    var div = OpenLayers.Util.createDiv();\n    var img = OpenLayers.Util.createImage(null, null, null, null, null, null, \n                                          null, delayDisplay);\n    img.className = \"olAlphaImg\";\n    div.appendChild(img);\n\n    OpenLayers.Util.modifyAlphaImageDiv(div, id, px, sz, imgURL, position, \n                                        border, sizing, opacity);\n    \n    return div;\n};\n\n\n/** \n * Function: upperCaseObject\n * Creates a new hashtable and copies over all the keys from the \n *     passed-in object, but storing them under an uppercased\n *     version of the key at which they were stored.\n * \n * Parameters: \n * object - {Object}\n * \n * Returns: \n * {Object} A new Object with all the same keys but uppercased\n */\nOpenLayers.Util.upperCaseObject = function (object) {\n    var uObject = {};\n    for (var key in object) {\n        uObject[key.toUpperCase()] = object[key];\n    }\n    return uObject;\n};\n\n/** \n * Function: applyDefaults\n * Takes an object and copies any properties that don't exist from\n *     another properties, by analogy with OpenLayers.Util.extend() from\n *     Prototype.js.\n * \n * Parameters:\n * to - {Object} The destination object.\n * from - {Object} The source object.  Any properties of this object that\n *     are undefined in the to object will be set on the to object.\n *\n * Returns:\n * {Object} A reference to the to object.  Note that the to argument is modified\n *     in place and returned by this function.\n */\nOpenLayers.Util.applyDefaults = function (to, from) {\n    to = to || {};\n    /*\n     * FF/Windows < 2.0.0.13 reports \"Illegal operation on WrappedNative\n     * prototype object\" when calling hawOwnProperty if the source object is an\n     * instance of window.Event.\n     */\n    var fromIsEvt = typeof window.Event == \"function\"\n                    && from instanceof window.Event;\n\n    for (var key in from) {\n        if (to[key] === undefined ||\n            (!fromIsEvt && from.hasOwnProperty\n             && from.hasOwnProperty(key) && !to.hasOwnProperty(key))) {\n            to[key] = from[key];\n        }\n    }\n    /**\n     * IE doesn't include the toString property when iterating over an object's\n     * properties with the for(property in object) syntax.  Explicitly check if\n     * the source has its own toString property.\n     */\n    if(!fromIsEvt && from && from.hasOwnProperty\n       && from.hasOwnProperty('toString') && !to.hasOwnProperty('toString')) {\n        to.toString = from.toString;\n    }\n    \n    return to;\n};\n\n/**\n * Function: getParameterString\n * \n * Parameters:\n * params - {Object}\n * \n * Returns:\n * {String} A concatenation of the properties of an object in \n *          http parameter notation. \n *          (ex. <i>\"key1=value1&key2=value2&key3=value3\"</i>)\n *          If a parameter is actually a list, that parameter will then\n *          be set to a comma-separated list of values (foo,bar) instead\n *          of being URL escaped (foo%3Abar). \n */\nOpenLayers.Util.getParameterString = function(params) {\n    var paramsArray = [];\n    \n    for (var key in params) {\n      var value = params[key];\n      if ((value != null) && (typeof value != 'function')) {\n        var encodedValue;\n        if (typeof value == 'object' && value.constructor == Array) {\n          /* value is an array; encode items and separate with \",\" */\n          var encodedItemArray = [];\n          var item;\n          for (var itemIndex=0, len=value.length; itemIndex<len; itemIndex++) {\n            item = value[itemIndex];\n            encodedItemArray.push(encodeURIComponent(\n                (item === null || item === undefined) ? \"\" : item)\n            );\n          }\n          encodedValue = encodedItemArray.join(\",\");\n        }\n        else {\n          /* value is a string; simply encode */\n          encodedValue = encodeURIComponent(value);\n        }\n        paramsArray.push(encodeURIComponent(key) + \"=\" + encodedValue);\n      }\n    }\n    \n    return paramsArray.join(\"&\");\n};\n\n/**\n * Function: urlAppend\n * Appends a parameter string to a url. This function includes the logic for\n * using the appropriate character (none, & or ?) to append to the url before\n * appending the param string.\n * \n * Parameters:\n * url - {String} The url to append to\n * paramStr - {String} The param string to append\n * \n * Returns:\n * {String} The new url\n */\nOpenLayers.Util.urlAppend = function(url, paramStr) {\n    var newUrl = url;\n    if(paramStr) {\n        var parts = (url + \" \").split(/[?&]/);\n        newUrl += (parts.pop() === \" \" ?\n            paramStr :\n            parts.length ? \"&\" + paramStr : \"?\" + paramStr);\n    }\n    return newUrl;\n};\n\n/** \n * Function: getImagesLocation\n * \n * Returns:\n * {String} The fully formatted image location string\n */\nOpenLayers.Util.getImagesLocation = function() {\n    return OpenLayers.ImgPath || (OpenLayers._getScriptLocation() + \"img/\");\n};\n\n/** \n * Function: getImageLocation\n * \n * Returns:\n * {String} The fully formatted location string for a specified image\n */\nOpenLayers.Util.getImageLocation = function(image) {\n    return OpenLayers.Util.getImagesLocation() + image;\n};\n\n\n/** \n * Function: Try\n * Execute functions until one of them doesn't throw an error. \n *     Capitalized because \"try\" is a reserved word in JavaScript.\n *     Taken directly from OpenLayers.Util.Try()\n * \n * Parameters:\n * [*] - {Function} Any number of parameters may be passed to Try()\n *    It will attempt to execute each of them until one of them \n *    successfully executes. \n *    If none executes successfully, returns null.\n * \n * Returns:\n * {*} The value returned by the first successfully executed function.\n */\nOpenLayers.Util.Try = function() {\n    var returnValue = null;\n\n    for (var i=0, len=arguments.length; i<len; i++) {\n      var lambda = arguments[i];\n      try {\n        returnValue = lambda();\n        break;\n      } catch (e) {}\n    }\n\n    return returnValue;\n};\n\n/**\n * Function: getXmlNodeValue\n * \n * Parameters:\n * node - {XMLNode}\n * \n * Returns:\n * {String} The text value of the given node, without breaking in firefox or IE\n */\nOpenLayers.Util.getXmlNodeValue = function(node) {\n    var val = null;\n    OpenLayers.Util.Try( \n        function() {\n            val = node.text;\n            if (!val) {\n                val = node.textContent;\n            }\n            if (!val) {\n                val = node.firstChild.nodeValue;\n            }\n        }, \n        function() {\n            val = node.textContent;\n        }); \n    return val;\n};\n\n/** \n * Function: mouseLeft\n * \n * Parameters:\n * evt - {Event}\n * div - {HTMLDivElement}\n * \n * Returns:\n * {Boolean}\n */\nOpenLayers.Util.mouseLeft = function (evt, div) {\n    // start with the element to which the mouse has moved\n    var target = (evt.relatedTarget) ? evt.relatedTarget : evt.toElement;\n    // walk up the DOM tree.\n    while (target != div && target != null) {\n        target = target.parentNode;\n    }\n    // if the target we stop at isn't the div, then we've left the div.\n    return (target != div);\n};\n\n/**\n * Property: precision\n * {Number} The number of significant digits to retain to avoid\n * floating point precision errors.\n *\n * We use 14 as a \"safe\" default because, although IEEE 754 double floats\n * (standard on most modern operating systems) support up to about 16\n * significant digits, 14 significant digits are sufficient to represent\n * sub-millimeter accuracy in any coordinate system that anyone is likely to\n * use with OpenLayers.\n *\n * If DEFAULT_PRECISION is set to 0, the original non-truncating behavior\n * of OpenLayers <2.8 is preserved. Be aware that this will cause problems\n * with certain projections, e.g. spherical Mercator.\n *\n */\nOpenLayers.Util.DEFAULT_PRECISION = 14;\n\n/**\n * Function: toFloat\n * Convenience method to cast an object to a Number, rounded to the\n * desired floating point precision.\n *\n * Parameters:\n * number    - {Number} The number to cast and round.\n * precision - {Number} An integer suitable for use with\n *      Number.toPrecision(). Defaults to OpenLayers.Util.DEFAULT_PRECISION.\n *      If set to 0, no rounding is performed.\n *\n * Returns:\n * {Number} The cast, rounded number.\n */\nOpenLayers.Util.toFloat = function (number, precision) {\n    if (precision == null) {\n        precision = OpenLayers.Util.DEFAULT_PRECISION;\n    }\n    if (typeof number !== \"number\") {\n        number = parseFloat(number);\n    }\n    return precision === 0 ? number :\n                             parseFloat(number.toPrecision(precision));\n};\n\n/**\n * Function: rad\n * \n * Parameters:\n * x - {Float}\n * \n * Returns:\n * {Float}\n */\nOpenLayers.Util.rad = function(x) {return x*Math.PI/180;};\n\n/**\n * Function: deg\n *\n * Parameters:\n * x - {Float}\n *\n * Returns:\n * {Float}\n */\nOpenLayers.Util.deg = function(x) {return x*180/Math.PI;};\n\n/**\n * Property: VincentyConstants\n * {Object} Constants for Vincenty functions.\n */\nOpenLayers.Util.VincentyConstants = {\n    a: 6378137,\n    b: 6356752.3142,\n    f: 1/298.257223563\n};\n\n/**\n * APIFunction: distVincenty\n * Given two objects representing points with geographic coordinates, this\n *     calculates the distance between those points on the surface of an\n *     ellipsoid.\n *\n * Parameters:\n * p1 - {<OpenLayers.LonLat>} (or any object with both .lat, .lon properties)\n * p2 - {<OpenLayers.LonLat>} (or any object with both .lat, .lon properties)\n *\n * Returns:\n * {Float} The distance (in km) between the two input points as measured on an\n *     ellipsoid.  Note that the input point objects must be in geographic\n *     coordinates (decimal degrees) and the return distance is in kilometers.\n */\nOpenLayers.Util.distVincenty = function(p1, p2) {\n    var ct = OpenLayers.Util.VincentyConstants;\n    var a = ct.a, b = ct.b, f = ct.f;\n\n    var L = OpenLayers.Util.rad(p2.lon - p1.lon);\n    var U1 = Math.atan((1-f) * Math.tan(OpenLayers.Util.rad(p1.lat)));\n    var U2 = Math.atan((1-f) * Math.tan(OpenLayers.Util.rad(p2.lat)));\n    var sinU1 = Math.sin(U1), cosU1 = Math.cos(U1);\n    var sinU2 = Math.sin(U2), cosU2 = Math.cos(U2);\n    var lambda = L, lambdaP = 2*Math.PI;\n    var iterLimit = 20;\n    while (Math.abs(lambda-lambdaP) > 1e-12 && --iterLimit>0) {\n        var sinLambda = Math.sin(lambda), cosLambda = Math.cos(lambda);\n        var sinSigma = Math.sqrt((cosU2*sinLambda) * (cosU2*sinLambda) +\n        (cosU1*sinU2-sinU1*cosU2*cosLambda) * (cosU1*sinU2-sinU1*cosU2*cosLambda));\n        if (sinSigma==0) {\n            return 0;  // co-incident points\n        }\n        var cosSigma = sinU1*sinU2 + cosU1*cosU2*cosLambda;\n        var sigma = Math.atan2(sinSigma, cosSigma);\n        var alpha = Math.asin(cosU1 * cosU2 * sinLambda / sinSigma);\n        var cosSqAlpha = Math.cos(alpha) * Math.cos(alpha);\n        var cos2SigmaM = cosSigma - 2*sinU1*sinU2/cosSqAlpha;\n        var C = f/16*cosSqAlpha*(4+f*(4-3*cosSqAlpha));\n        lambdaP = lambda;\n        lambda = L + (1-C) * f * Math.sin(alpha) *\n        (sigma + C*sinSigma*(cos2SigmaM+C*cosSigma*(-1+2*cos2SigmaM*cos2SigmaM)));\n    }\n    if (iterLimit==0) {\n        return NaN;  // formula failed to converge\n    }\n    var uSq = cosSqAlpha * (a*a - b*b) / (b*b);\n    var A = 1 + uSq/16384*(4096+uSq*(-768+uSq*(320-175*uSq)));\n    var B = uSq/1024 * (256+uSq*(-128+uSq*(74-47*uSq)));\n    var deltaSigma = B*sinSigma*(cos2SigmaM+B/4*(cosSigma*(-1+2*cos2SigmaM*cos2SigmaM)-\n        B/6*cos2SigmaM*(-3+4*sinSigma*sinSigma)*(-3+4*cos2SigmaM*cos2SigmaM)));\n    var s = b*A*(sigma-deltaSigma);\n    var d = s.toFixed(3)/1000; // round to 1mm precision\n    return d;\n};\n\n/**\n * APIFunction: destinationVincenty\n * Calculate destination point given start point lat/long (numeric degrees),\n * bearing (numeric degrees) & distance (in m).\n * Adapted from Chris Veness work, see\n * http://www.movable-type.co.uk/scripts/latlong-vincenty-direct.html\n *\n * Parameters:\n * lonlat  - {<OpenLayers.LonLat>} (or any object with both .lat, .lon\n *     properties) The start point.\n * brng     - {Float} The bearing (degrees).\n * dist     - {Float} The ground distance (meters).\n *\n * Returns:\n * {<OpenLayers.LonLat>} The destination point.\n */\nOpenLayers.Util.destinationVincenty = function(lonlat, brng, dist) {\n    var u = OpenLayers.Util;\n    var ct = u.VincentyConstants;\n    var a = ct.a, b = ct.b, f = ct.f;\n\n    var lon1 = lonlat.lon;\n    var lat1 = lonlat.lat;\n\n    var s = dist;\n    var alpha1 = u.rad(brng);\n    var sinAlpha1 = Math.sin(alpha1);\n    var cosAlpha1 = Math.cos(alpha1);\n\n    var tanU1 = (1-f) * Math.tan(u.rad(lat1));\n    var cosU1 = 1 / Math.sqrt((1 + tanU1*tanU1)), sinU1 = tanU1*cosU1;\n    var sigma1 = Math.atan2(tanU1, cosAlpha1);\n    var sinAlpha = cosU1 * sinAlpha1;\n    var cosSqAlpha = 1 - sinAlpha*sinAlpha;\n    var uSq = cosSqAlpha * (a*a - b*b) / (b*b);\n    var A = 1 + uSq/16384*(4096+uSq*(-768+uSq*(320-175*uSq)));\n    var B = uSq/1024 * (256+uSq*(-128+uSq*(74-47*uSq)));\n\n    var sigma = s / (b*A), sigmaP = 2*Math.PI;\n    while (Math.abs(sigma-sigmaP) > 1e-12) {\n        var cos2SigmaM = Math.cos(2*sigma1 + sigma);\n        var sinSigma = Math.sin(sigma);\n        var cosSigma = Math.cos(sigma);\n        var deltaSigma = B*sinSigma*(cos2SigmaM+B/4*(cosSigma*(-1+2*cos2SigmaM*cos2SigmaM)-\n            B/6*cos2SigmaM*(-3+4*sinSigma*sinSigma)*(-3+4*cos2SigmaM*cos2SigmaM)));\n        sigmaP = sigma;\n        sigma = s / (b*A) + deltaSigma;\n    }\n\n    var tmp = sinU1*sinSigma - cosU1*cosSigma*cosAlpha1;\n    var lat2 = Math.atan2(sinU1*cosSigma + cosU1*sinSigma*cosAlpha1,\n        (1-f)*Math.sqrt(sinAlpha*sinAlpha + tmp*tmp));\n    var lambda = Math.atan2(sinSigma*sinAlpha1, cosU1*cosSigma - sinU1*sinSigma*cosAlpha1);\n    var C = f/16*cosSqAlpha*(4+f*(4-3*cosSqAlpha));\n    var L = lambda - (1-C) * f * sinAlpha *\n        (sigma + C*sinSigma*(cos2SigmaM+C*cosSigma*(-1+2*cos2SigmaM*cos2SigmaM)));\n\n    var revAz = Math.atan2(sinAlpha, -tmp);  // final bearing\n\n    return new OpenLayers.LonLat(lon1+u.deg(L), u.deg(lat2));\n};\n\n/**\n * Function: getParameters\n * Parse the parameters from a URL or from the current page itself into a \n *     JavaScript Object. Note that parameter values with commas are separated\n *     out into an Array.\n * \n * Parameters:\n * url - {String} Optional url used to extract the query string.\n *                If url is null or is not supplied, query string is taken \n *                from the page location.\n * options - {Object} Additional options. Optional.\n *\n * Valid options:\n *   splitArgs - {Boolean} Split comma delimited params into arrays? Default is\n *       true.\n * \n * Returns:\n * {Object} An object of key/value pairs from the query string.\n */\nOpenLayers.Util.getParameters = function(url, options) {\n    options = options || {};\n    // if no url specified, take it from the location bar\n    url = (url === null || url === undefined) ? window.location.href : url;\n\n    //parse out parameters portion of url string\n    var paramsString = \"\";\n    if (OpenLayers.String.contains(url, '?')) {\n        var start = url.indexOf('?') + 1;\n        var end = OpenLayers.String.contains(url, \"#\") ?\n                    url.indexOf('#') : url.length;\n        paramsString = url.substring(start, end);\n    }\n\n    var parameters = {};\n    var pairs = paramsString.split(/[&;]/);\n    for(var i=0, len=pairs.length; i<len; ++i) {\n        var keyValue = pairs[i].split('=');\n        if (keyValue[0]) {\n\n            var key = keyValue[0];\n            try {\n                key = decodeURIComponent(key);\n            } catch (err) {\n                key = unescape(key);\n            }\n            \n            // being liberal by replacing \"+\" with \" \"\n            var value = (keyValue[1] || '').replace(/\\+/g, \" \");\n\n            try {\n                value = decodeURIComponent(value);\n            } catch (err) {\n                value = unescape(value);\n            }\n            \n            // follow OGC convention of comma delimited values\n            if (options.splitArgs !== false) {\n                value = value.split(\",\");\n            }\n\n            //if there's only one value, do not return as array                    \n            if (value.length == 1) {\n                value = value[0];\n            }                \n            \n            parameters[key] = value;\n         }\n     }\n    return parameters;\n};\n\n/**\n * Property: lastSeqID\n * {Integer} The ever-incrementing count variable.\n *           Used for generating unique ids.\n */\nOpenLayers.Util.lastSeqID = 0;\n\n/**\n * Function: createUniqueID\n * Create a unique identifier for this session.  Each time this function\n *     is called, a counter is incremented.  The return will be the optional\n *     prefix (defaults to \"id_\") appended with the counter value.\n * \n * Parameters:\n * prefix - {String} Optional string to prefix unique id. Default is \"id_\".\n *     Note that dots (\".\") in the prefix will be replaced with underscore (\"_\").\n * \n * Returns:\n * {String} A unique id string, built on the passed in prefix.\n */\nOpenLayers.Util.createUniqueID = function(prefix) {\n    if (prefix == null) {\n        prefix = \"id_\";\n    } else {\n        prefix = prefix.replace(OpenLayers.Util.dotless, \"_\");\n    }\n    OpenLayers.Util.lastSeqID += 1; \n    return prefix + OpenLayers.Util.lastSeqID;        \n};\n\n/**\n * Constant: INCHES_PER_UNIT\n * {Object} Constant inches per unit -- borrowed from MapServer mapscale.c\n * derivation of nautical miles from http://en.wikipedia.org/wiki/Nautical_mile\n * Includes the full set of units supported by CS-MAP (http://trac.osgeo.org/csmap/)\n * and PROJ.4 (http://trac.osgeo.org/proj/)\n * The hardcoded table is maintain in a CS-MAP source code module named CSdataU.c\n * The hardcoded table of PROJ.4 units are in pj_units.c.\n */\nOpenLayers.INCHES_PER_UNIT = { \n    'inches': 1.0,\n    'ft': 12.0,\n    'mi': 63360.0,\n    'm': 39.37,\n    'km': 39370,\n    'dd': 4374754,\n    'yd': 36\n};\nOpenLayers.INCHES_PER_UNIT[\"in\"]= OpenLayers.INCHES_PER_UNIT.inches;\nOpenLayers.INCHES_PER_UNIT[\"degrees\"] = OpenLayers.INCHES_PER_UNIT.dd;\nOpenLayers.INCHES_PER_UNIT[\"nmi\"] = 1852 * OpenLayers.INCHES_PER_UNIT.m;\n\n// Units from CS-Map\nOpenLayers.METERS_PER_INCH = 0.02540005080010160020;\nOpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT, {\n    \"Inch\": OpenLayers.INCHES_PER_UNIT.inches,\n    \"Meter\": 1.0 / OpenLayers.METERS_PER_INCH,   //EPSG:9001\n    \"Foot\": 0.30480060960121920243 / OpenLayers.METERS_PER_INCH,   //EPSG:9003\n    \"IFoot\": 0.30480000000000000000 / OpenLayers.METERS_PER_INCH,   //EPSG:9002\n    \"ClarkeFoot\": 0.3047972651151 / OpenLayers.METERS_PER_INCH,   //EPSG:9005\n    \"SearsFoot\": 0.30479947153867624624 / OpenLayers.METERS_PER_INCH,   //EPSG:9041\n    \"GoldCoastFoot\": 0.30479971018150881758 / OpenLayers.METERS_PER_INCH,   //EPSG:9094\n    \"IInch\": 0.02540000000000000000 / OpenLayers.METERS_PER_INCH,\n    \"MicroInch\": 0.00002540000000000000 / OpenLayers.METERS_PER_INCH,\n    \"Mil\": 0.00000002540000000000 / OpenLayers.METERS_PER_INCH,\n    \"Centimeter\": 0.01000000000000000000 / OpenLayers.METERS_PER_INCH,\n    \"Kilometer\": 1000.00000000000000000000 / OpenLayers.METERS_PER_INCH,   //EPSG:9036\n    \"Yard\": 0.91440182880365760731 / OpenLayers.METERS_PER_INCH,\n    \"SearsYard\": 0.914398414616029 / OpenLayers.METERS_PER_INCH,   //EPSG:9040\n    \"IndianYard\": 0.91439853074444079983 / OpenLayers.METERS_PER_INCH,   //EPSG:9084\n    \"IndianYd37\": 0.91439523 / OpenLayers.METERS_PER_INCH,   //EPSG:9085\n    \"IndianYd62\": 0.9143988 / OpenLayers.METERS_PER_INCH,   //EPSG:9086\n    \"IndianYd75\": 0.9143985 / OpenLayers.METERS_PER_INCH,   //EPSG:9087\n    \"IndianFoot\": 0.30479951 / OpenLayers.METERS_PER_INCH,   //EPSG:9080\n    \"IndianFt37\": 0.30479841 / OpenLayers.METERS_PER_INCH,   //EPSG:9081\n    \"IndianFt62\": 0.3047996 / OpenLayers.METERS_PER_INCH,   //EPSG:9082\n    \"IndianFt75\": 0.3047995 / OpenLayers.METERS_PER_INCH,   //EPSG:9083\n    \"Mile\": 1609.34721869443738887477 / OpenLayers.METERS_PER_INCH,\n    \"IYard\": 0.91440000000000000000 / OpenLayers.METERS_PER_INCH,   //EPSG:9096\n    \"IMile\": 1609.34400000000000000000 / OpenLayers.METERS_PER_INCH,   //EPSG:9093\n    \"NautM\": 1852.00000000000000000000 / OpenLayers.METERS_PER_INCH,   //EPSG:9030\n    \"Lat-66\": 110943.316488932731 / OpenLayers.METERS_PER_INCH,\n    \"Lat-83\": 110946.25736872234125 / OpenLayers.METERS_PER_INCH,\n    \"Decimeter\": 0.10000000000000000000 / OpenLayers.METERS_PER_INCH,\n    \"Millimeter\": 0.00100000000000000000 / OpenLayers.METERS_PER_INCH,\n    \"Dekameter\": 10.00000000000000000000 / OpenLayers.METERS_PER_INCH,\n    \"Decameter\": 10.00000000000000000000 / OpenLayers.METERS_PER_INCH,\n    \"Hectometer\": 100.00000000000000000000 / OpenLayers.METERS_PER_INCH,\n    \"GermanMeter\": 1.0000135965 / OpenLayers.METERS_PER_INCH,   //EPSG:9031\n    \"CaGrid\": 0.999738 / OpenLayers.METERS_PER_INCH,\n    \"ClarkeChain\": 20.1166194976 / OpenLayers.METERS_PER_INCH,   //EPSG:9038\n    \"GunterChain\": 20.11684023368047 / OpenLayers.METERS_PER_INCH,   //EPSG:9033\n    \"BenoitChain\": 20.116782494375872 / OpenLayers.METERS_PER_INCH,   //EPSG:9062\n    \"SearsChain\": 20.11676512155 / OpenLayers.METERS_PER_INCH,   //EPSG:9042\n    \"ClarkeLink\": 0.201166194976 / OpenLayers.METERS_PER_INCH,   //EPSG:9039\n    \"GunterLink\": 0.2011684023368047 / OpenLayers.METERS_PER_INCH,   //EPSG:9034\n    \"BenoitLink\": 0.20116782494375872 / OpenLayers.METERS_PER_INCH,   //EPSG:9063\n    \"SearsLink\": 0.2011676512155 / OpenLayers.METERS_PER_INCH,   //EPSG:9043\n    \"Rod\": 5.02921005842012 / OpenLayers.METERS_PER_INCH,\n    \"IntnlChain\": 20.1168 / OpenLayers.METERS_PER_INCH,   //EPSG:9097\n    \"IntnlLink\": 0.201168 / OpenLayers.METERS_PER_INCH,   //EPSG:9098\n    \"Perch\": 5.02921005842012 / OpenLayers.METERS_PER_INCH,\n    \"Pole\": 5.02921005842012 / OpenLayers.METERS_PER_INCH,\n    \"Furlong\": 201.1684023368046 / OpenLayers.METERS_PER_INCH,\n    \"Rood\": 3.778266898 / OpenLayers.METERS_PER_INCH,\n    \"CapeFoot\": 0.3047972615 / OpenLayers.METERS_PER_INCH,\n    \"Brealey\": 375.00000000000000000000 / OpenLayers.METERS_PER_INCH,\n    \"ModAmFt\": 0.304812252984505969011938 / OpenLayers.METERS_PER_INCH,\n    \"Fathom\": 1.8288 / OpenLayers.METERS_PER_INCH,\n    \"NautM-UK\": 1853.184 / OpenLayers.METERS_PER_INCH,\n    \"50kilometers\": 50000.0 / OpenLayers.METERS_PER_INCH,\n    \"150kilometers\": 150000.0 / OpenLayers.METERS_PER_INCH\n});\n\n//unit abbreviations supported by PROJ.4\nOpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT, {\n    \"mm\": OpenLayers.INCHES_PER_UNIT[\"Meter\"] / 1000.0,\n    \"cm\": OpenLayers.INCHES_PER_UNIT[\"Meter\"] / 100.0,\n    \"dm\": OpenLayers.INCHES_PER_UNIT[\"Meter\"] * 100.0,\n    \"km\": OpenLayers.INCHES_PER_UNIT[\"Meter\"] * 1000.0,\n    \"kmi\": OpenLayers.INCHES_PER_UNIT[\"nmi\"],    //International Nautical Mile\n    \"fath\": OpenLayers.INCHES_PER_UNIT[\"Fathom\"], //International Fathom\n    \"ch\": OpenLayers.INCHES_PER_UNIT[\"IntnlChain\"],  //International Chain\n    \"link\": OpenLayers.INCHES_PER_UNIT[\"IntnlLink\"], //International Link\n    \"us-in\": OpenLayers.INCHES_PER_UNIT[\"inches\"], //U.S. Surveyor's Inch\n    \"us-ft\": OpenLayers.INCHES_PER_UNIT[\"Foot\"], //U.S. Surveyor's Foot\n    \"us-yd\": OpenLayers.INCHES_PER_UNIT[\"Yard\"], //U.S. Surveyor's Yard\n    \"us-ch\": OpenLayers.INCHES_PER_UNIT[\"GunterChain\"], //U.S. Surveyor's Chain\n    \"us-mi\": OpenLayers.INCHES_PER_UNIT[\"Mile\"],   //U.S. Surveyor's Statute Mile\n    \"ind-yd\": OpenLayers.INCHES_PER_UNIT[\"IndianYd37\"],  //Indian Yard\n    \"ind-ft\": OpenLayers.INCHES_PER_UNIT[\"IndianFt37\"],  //Indian Foot\n    \"ind-ch\": 20.11669506 / OpenLayers.METERS_PER_INCH  //Indian Chain\n});\n\n/** \n * Constant: DOTS_PER_INCH\n * {Integer} 72 (A sensible default)\n */\nOpenLayers.DOTS_PER_INCH = 72;\n\n/**\n * Function: normalizeScale\n * \n * Parameters:\n * scale - {float}\n * \n * Returns:\n * {Float} A normalized scale value, in 1 / X format. \n *         This means that if a value less than one ( already 1/x) is passed\n *         in, it just returns scale directly. Otherwise, it returns \n *         1 / scale\n */\nOpenLayers.Util.normalizeScale = function (scale) {\n    var normScale = (scale > 1.0) ? (1.0 / scale) \n                                  : scale;\n    return normScale;\n};\n\n/**\n * Function: getResolutionFromScale\n * \n * Parameters:\n * scale - {Float}\n * units - {String} Index into OpenLayers.INCHES_PER_UNIT hashtable.\n *                  Default is degrees\n * \n * Returns:\n * {Float} The corresponding resolution given passed-in scale and unit \n *     parameters.  If the given scale is falsey, the returned resolution will\n *     be undefined.\n */\nOpenLayers.Util.getResolutionFromScale = function (scale, units) {\n    var resolution;\n    if (scale) {\n        if (units == null) {\n            units = \"degrees\";\n        }\n        var normScale = OpenLayers.Util.normalizeScale(scale);\n        resolution = 1 / (normScale * OpenLayers.INCHES_PER_UNIT[units]\n                                        * OpenLayers.DOTS_PER_INCH);        \n    }\n    return resolution;\n};\n\n/**\n * Function: getScaleFromResolution\n * \n * Parameters:\n * resolution - {Float}\n * units - {String} Index into OpenLayers.INCHES_PER_UNIT hashtable.\n *                  Default is degrees\n * \n * Returns:\n * {Float} The corresponding scale given passed-in resolution and unit \n *         parameters.\n */\nOpenLayers.Util.getScaleFromResolution = function (resolution, units) {\n\n    if (units == null) {\n        units = \"degrees\";\n    }\n\n    var scale = resolution * OpenLayers.INCHES_PER_UNIT[units] *\n                    OpenLayers.DOTS_PER_INCH;\n    return scale;\n};\n\n/**\n * Function: pagePosition\n * Calculates the position of an element on the page (see\n * http://code.google.com/p/doctype/wiki/ArticlePageOffset)\n *\n * OpenLayers.Util.pagePosition is based on Yahoo's getXY method, which is\n * Copyright (c) 2006, Yahoo! Inc.\n * All rights reserved.\n * \n * Redistribution and use of this software in source and binary forms, with or\n * without modification, are permitted provided that the following conditions\n * are met:\n * \n * * Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n * \n * * Redistributions in binary form must reproduce the above copyright notice,\n *   this list of conditions and the following disclaimer in the documentation\n *   and/or other materials provided with the distribution.\n * \n * * Neither the name of Yahoo! Inc. nor the names of its contributors may be\n *   used to endorse or promote products derived from this software without\n *   specific prior written permission of Yahoo! Inc.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE \n * POSSIBILITY OF SUCH DAMAGE.\n *\n * Parameters:\n * forElement - {DOMElement}\n * \n * Returns:\n * {Array} two item array, Left value then Top value.\n */\nOpenLayers.Util.pagePosition =  function(forElement) {\n    // NOTE: If element is hidden (display none or disconnected or any the\n    // ancestors are hidden) we get (0,0) by default but we still do the\n    // accumulation of scroll position.\n\n    var pos = [0, 0];\n    var viewportElement = OpenLayers.Util.getViewportElement();\n    if (!forElement || forElement == window || forElement == viewportElement) {\n        // viewport is always at 0,0 as that defined the coordinate system for\n        // this function - this avoids special case checks in the code below\n        return pos;\n    }\n\n    // Gecko browsers normally use getBoxObjectFor to calculate the position.\n    // When invoked for an element with an implicit absolute position though it\n    // can be off by one. Therefore the recursive implementation is used in\n    // those (relatively rare) cases.\n    var BUGGY_GECKO_BOX_OBJECT =\n        OpenLayers.IS_GECKO && document.getBoxObjectFor &&\n        OpenLayers.Element.getStyle(forElement, 'position') == 'absolute' &&\n        (forElement.style.top == '' || forElement.style.left == '');\n\n    var parent = null;\n    var box;\n\n    if (forElement.getBoundingClientRect) { // IE\n        box = forElement.getBoundingClientRect();\n        var scrollTop = window.pageYOffset || viewportElement.scrollTop;\n        var scrollLeft = window.pageXOffset || viewportElement.scrollLeft;\n        \n        pos[0] = box.left + scrollLeft;\n        pos[1] = box.top + scrollTop;\n\n    } else if (document.getBoxObjectFor && !BUGGY_GECKO_BOX_OBJECT) { // gecko\n        // Gecko ignores the scroll values for ancestors, up to 1.9.  See:\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=328881 and\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=330619\n\n        box = document.getBoxObjectFor(forElement);\n        var vpBox = document.getBoxObjectFor(viewportElement);\n        pos[0] = box.screenX - vpBox.screenX;\n        pos[1] = box.screenY - vpBox.screenY;\n\n    } else { // safari/opera\n        pos[0] = forElement.offsetLeft;\n        pos[1] = forElement.offsetTop;\n        parent = forElement.offsetParent;\n        if (parent != forElement) {\n            while (parent) {\n                pos[0] += parent.offsetLeft;\n                pos[1] += parent.offsetTop;\n                parent = parent.offsetParent;\n            }\n        }\n\n        var browser = OpenLayers.BROWSER_NAME;\n\n        // opera & (safari absolute) incorrectly account for body offsetTop\n        if (browser == \"opera\" || (browser == \"safari\" &&\n              OpenLayers.Element.getStyle(forElement, 'position') == 'absolute')) {\n            pos[1] -= document.body.offsetTop;\n        }\n\n        // accumulate the scroll positions for everything but the body element\n        parent = forElement.offsetParent;\n        while (parent && parent != document.body) {\n            pos[0] -= parent.scrollLeft;\n            // see https://bugs.opera.com/show_bug.cgi?id=249965\n            if (browser != \"opera\" || parent.tagName != 'TR') {\n                pos[1] -= parent.scrollTop;\n            }\n            parent = parent.offsetParent;\n        }\n    }\n    \n    return pos;\n};\n\n/**\n * Function: getViewportElement\n * Returns die viewport element of the document. The viewport element is\n * usually document.documentElement, except in IE,where it is either\n * document.body or document.documentElement, depending on the document's\n * compatibility mode (see\n * http://code.google.com/p/doctype/wiki/ArticleClientViewportElement)\n *\n * Returns:\n * {DOMElement}\n */\nOpenLayers.Util.getViewportElement = function() {\n    var viewportElement = arguments.callee.viewportElement;\n    if (viewportElement == undefined) {\n        viewportElement = (OpenLayers.BROWSER_NAME == \"msie\" &&\n            document.compatMode != 'CSS1Compat') ? document.body :\n            document.documentElement;\n        arguments.callee.viewportElement = viewportElement;\n    }\n    return viewportElement;\n};\n\n/** \n * Function: isEquivalentUrl\n * Test two URLs for equivalence. \n * \n * Setting 'ignoreCase' allows for case-independent comparison.\n * \n * Comparison is based on: \n *  - Protocol\n *  - Host (evaluated without the port)\n *  - Port (set 'ignorePort80' to ignore \"80\" values)\n *  - Hash ( set 'ignoreHash' to disable)\n *  - Pathname (for relative <-> absolute comparison) \n *  - Arguments (so they can be out of order)\n *  \n * Parameters:\n * url1 - {String}\n * url2 - {String}\n * options - {Object} Allows for customization of comparison:\n *                    'ignoreCase' - Default is True\n *                    'ignorePort80' - Default is True\n *                    'ignoreHash' - Default is True\n *\n * Returns:\n * {Boolean} Whether or not the two URLs are equivalent\n */\nOpenLayers.Util.isEquivalentUrl = function(url1, url2, options) {\n    options = options || {};\n\n    OpenLayers.Util.applyDefaults(options, {\n        ignoreCase: true,\n        ignorePort80: true,\n        ignoreHash: true,\n        splitArgs: false\n    });\n\n    var urlObj1 = OpenLayers.Util.createUrlObject(url1, options);\n    var urlObj2 = OpenLayers.Util.createUrlObject(url2, options);\n\n    //compare all keys except for \"args\" (treated below)\n    for(var key in urlObj1) {\n        if(key !== \"args\") {\n            if(urlObj1[key] != urlObj2[key]) {\n                return false;\n            }\n        }\n    }\n\n    // compare search args - irrespective of order\n    for(var key in urlObj1.args) {\n        if(urlObj1.args[key] != urlObj2.args[key]) {\n            return false;\n        }\n        delete urlObj2.args[key];\n    }\n    // urlObj2 shouldn't have any args left\n    for(var key in urlObj2.args) {\n        return false;\n    }\n    \n    return true;\n};\n\n/**\n * Function: createUrlObject\n * \n * Parameters:\n * url - {String}\n * options - {Object} A hash of options.\n *\n * Valid options:\n *   ignoreCase - {Boolean} lowercase url,\n *   ignorePort80 - {Boolean} don't include explicit port if port is 80,\n *   ignoreHash - {Boolean} Don't include part of url after the hash (#).\n *   splitArgs - {Boolean} Split comma delimited params into arrays? Default is\n *       true.\n * \n * Returns:\n * {Object} An object with separate url, a, port, host, and args parsed out \n *          and ready for comparison\n */\nOpenLayers.Util.createUrlObject = function(url, options) {\n    options = options || {};\n\n    // deal with relative urls first\n    if(!(/^\\w+:\\/\\//).test(url)) {\n        var loc = window.location;\n        var port = loc.port ? \":\" + loc.port : \"\";\n        var fullUrl = loc.protocol + \"//\" + loc.host.split(\":\").shift() + port;\n        if(url.indexOf(\"/\") === 0) {\n            // full pathname\n            url = fullUrl + url;\n        } else {\n            // relative to current path\n            var parts = loc.pathname.split(\"/\");\n            parts.pop();\n            url = fullUrl + parts.join(\"/\") + \"/\" + url;\n        }\n    }\n  \n    if (options.ignoreCase) {\n        url = url.toLowerCase(); \n    }\n\n    var a = document.createElement('a');\n    a.href = url;\n    \n    var urlObject = {};\n    \n    //host (without port)\n    urlObject.host = a.host.split(\":\").shift();\n\n    //protocol\n    urlObject.protocol = a.protocol;  \n\n    //port (get uniform browser behavior with port 80 here)\n    if(options.ignorePort80) {\n        urlObject.port = (a.port == \"80\" || a.port == \"0\") ? \"\" : a.port;\n    } else {\n        urlObject.port = (a.port == \"\" || a.port == \"0\") ? \"80\" : a.port;\n    }\n\n    //hash\n    urlObject.hash = (options.ignoreHash || a.hash === \"#\") ? \"\" : a.hash;  \n    \n    //args\n    var queryString = a.search;\n    if (!queryString) {\n        var qMark = url.indexOf(\"?\");\n        queryString = (qMark != -1) ? url.substr(qMark) : \"\";\n    }\n    urlObject.args = OpenLayers.Util.getParameters(queryString,\n            {splitArgs: options.splitArgs});\n\n    // pathname\n    //\n    // This is a workaround for Internet Explorer where\n    // window.location.pathname has a leading \"/\", but\n    // a.pathname has no leading \"/\".\n    urlObject.pathname = (a.pathname.charAt(0) == \"/\") ? a.pathname : \"/\" + a.pathname;\n    \n    return urlObject; \n};\n \n/**\n * Function: removeTail\n * Takes a url and removes everything after the ? and #\n * \n * Parameters:\n * url - {String} The url to process\n * \n * Returns:\n * {String} The string with all queryString and Hash removed\n */\nOpenLayers.Util.removeTail = function(url) {\n    var head = null;\n    \n    var qMark = url.indexOf(\"?\");\n    var hashMark = url.indexOf(\"#\");\n\n    if (qMark == -1) {\n        head = (hashMark != -1) ? url.substr(0,hashMark) : url;\n    } else {\n        head = (hashMark != -1) ? url.substr(0,Math.min(qMark, hashMark)) \n                                  : url.substr(0, qMark);\n    }\n    return head;\n};\n\n/**\n * Constant: IS_GECKO\n * {Boolean} True if the userAgent reports the browser to use the Gecko engine\n */\nOpenLayers.IS_GECKO = (function() {\n    var ua = navigator.userAgent.toLowerCase();\n    return ua.indexOf(\"webkit\") == -1 && ua.indexOf(\"gecko\") != -1;\n})();\n\n/**\n * Constant: CANVAS_SUPPORTED\n * {Boolean} True if canvas 2d is supported.\n */\nOpenLayers.CANVAS_SUPPORTED = (function() {\n    var elem = document.createElement('canvas');\n    return !!(elem.getContext && elem.getContext('2d'));\n})();\n\n/**\n * Constant: BROWSER_NAME\n * {String}\n * A substring of the navigator.userAgent property.  Depending on the userAgent\n *     property, this will be the empty string or one of the following:\n *     * \"opera\" -- Opera\n *     * \"msie\"  -- Internet Explorer\n *     * \"safari\" -- Safari\n *     * \"firefox\" -- Firefox\n *     * \"mozilla\" -- Mozilla\n */\nOpenLayers.BROWSER_NAME = (function() {\n    var name = \"\";\n    var ua = navigator.userAgent.toLowerCase();\n    if (ua.indexOf(\"opera\") != -1) {\n        name = \"opera\";\n    } else if (ua.indexOf(\"msie\") != -1) {\n        name = \"msie\";\n    } else if (ua.indexOf(\"safari\") != -1) {\n        name = \"safari\";\n    } else if (ua.indexOf(\"mozilla\") != -1) {\n        if (ua.indexOf(\"firefox\") != -1) {\n            name = \"firefox\";\n        } else {\n            name = \"mozilla\";\n        }\n    }\n    return name;\n})();\n\n/**\n * Function: getBrowserName\n * \n * Returns:\n * {String} A string which specifies which is the current \n *          browser in which we are running. \n * \n *          Currently-supported browser detection and codes:\n *           * 'opera' -- Opera\n *           * 'msie'  -- Internet Explorer\n *           * 'safari' -- Safari\n *           * 'firefox' -- Firefox\n *           * 'mozilla' -- Mozilla\n * \n *          If we are unable to property identify the browser, we \n *           return an empty string.\n */\nOpenLayers.Util.getBrowserName = function() {\n    return OpenLayers.BROWSER_NAME;\n};\n\n/**\n * Method: getRenderedDimensions\n * Renders the contentHTML offscreen to determine actual dimensions for\n *     popup sizing. As we need layout to determine dimensions the content\n *     is rendered -9999px to the left and absolute to ensure the \n *     scrollbars do not flicker\n *     \n * Parameters:\n * contentHTML\n * size - {<OpenLayers.Size>} If either the 'w' or 'h' properties is \n *     specified, we fix that dimension of the div to be measured. This is \n *     useful in the case where we have a limit in one dimension and must \n *     therefore meaure the flow in the other dimension.\n * options - {Object}\n *\n * Allowed Options:\n *     displayClass - {String} Optional parameter.  A CSS class name(s) string\n *         to provide the CSS context of the rendered content.\n *     containerElement - {DOMElement} Optional parameter. Insert the HTML to \n *         this node instead of the body root when calculating dimensions. \n * \n * Returns:\n * {<OpenLayers.Size>}\n */\nOpenLayers.Util.getRenderedDimensions = function(contentHTML, size, options) {\n    \n    var w, h;\n    \n    // create temp container div with restricted size\n    var container = document.createElement(\"div\");\n    container.style.visibility = \"hidden\";\n        \n    var containerElement = (options && options.containerElement) \n        ? options.containerElement : document.body;\n    \n    // Opera and IE7 can't handle a node with position:aboslute if it inherits\n    // position:absolute from a parent.\n    var parentHasPositionAbsolute = false;\n    var superContainer = null;\n    var parent = containerElement;\n    while (parent && parent.tagName.toLowerCase()!=\"body\") {\n        var parentPosition = OpenLayers.Element.getStyle(parent, \"position\");\n        if(parentPosition == \"absolute\") {\n            parentHasPositionAbsolute = true;\n            break;\n        } else if (parentPosition && parentPosition != \"static\") {\n            break;\n        }\n        parent = parent.parentNode;\n    }\n    if(parentHasPositionAbsolute && (containerElement.clientHeight === 0 || \n                                     containerElement.clientWidth === 0) ){\n        superContainer = document.createElement(\"div\");\n        superContainer.style.visibility = \"hidden\";\n        superContainer.style.position = \"absolute\";\n        superContainer.style.overflow = \"visible\";\n        superContainer.style.width = document.body.clientWidth + \"px\";\n        superContainer.style.height = document.body.clientHeight + \"px\";\n        superContainer.appendChild(container);\n    }\n    container.style.position = \"absolute\";\n\n    //fix a dimension, if specified.\n    if (size) {\n        if (size.w) {\n            w = size.w;\n            container.style.width = w + \"px\";\n        } else if (size.h) {\n            h = size.h;\n            container.style.height = h + \"px\";\n        }\n    }\n\n    //add css classes, if specified\n    if (options && options.displayClass) {\n        container.className = options.displayClass;\n    }\n    \n    // create temp content div and assign content\n    var content = document.createElement(\"div\");\n    content.innerHTML = contentHTML;\n    \n    // we need overflow visible when calculating the size\n    content.style.overflow = \"visible\";\n    if (content.childNodes) {\n        for (var i=0, l=content.childNodes.length; i<l; i++) {\n            if (!content.childNodes[i].style) continue;\n            content.childNodes[i].style.overflow = \"visible\";\n        }\n    }\n    \n    // add content to restricted container \n    container.appendChild(content);\n    \n    // append container to body for rendering\n    if (superContainer) {\n        containerElement.appendChild(superContainer);\n    } else {\n        containerElement.appendChild(container);\n    }\n    \n    // calculate scroll width of content and add corners and shadow width\n    if (!w) {\n        w = parseInt(content.scrollWidth);\n    \n        // update container width to allow height to adjust\n        container.style.width = w + \"px\";\n    }        \n    // capture height and add shadow and corner image widths\n    if (!h) {\n        h = parseInt(content.scrollHeight);\n    }\n\n    // remove elements\n    container.removeChild(content);\n    if (superContainer) {\n        superContainer.removeChild(container);\n        containerElement.removeChild(superContainer);\n    } else {\n        containerElement.removeChild(container);\n    }\n    \n    return new OpenLayers.Size(w, h);\n};\n\n/**\n * APIFunction: getScrollbarWidth\n * This function has been modified by the OpenLayers from the original version,\n *     written by Matthew Eernisse and released under the Apache 2 \n *     license here:\n * \n *     http://www.fleegix.org/articles/2006/05/30/getting-the-scrollbar-width-in-pixels\n * \n *     It has been modified simply to cache its value, since it is physically \n *     impossible that this code could ever run in more than one browser at \n *     once. \n * \n * Returns:\n * {Integer}\n */\nOpenLayers.Util.getScrollbarWidth = function() {\n    \n    var scrollbarWidth = OpenLayers.Util._scrollbarWidth;\n    \n    if (scrollbarWidth == null) {\n        var scr = null;\n        var inn = null;\n        var wNoScroll = 0;\n        var wScroll = 0;\n    \n        // Outer scrolling div\n        scr = document.createElement('div');\n        scr.style.position = 'absolute';\n        scr.style.top = '-1000px';\n        scr.style.left = '-1000px';\n        scr.style.width = '100px';\n        scr.style.height = '50px';\n        // Start with no scrollbar\n        scr.style.overflow = 'hidden';\n    \n        // Inner content div\n        inn = document.createElement('div');\n        inn.style.width = '100%';\n        inn.style.height = '200px';\n    \n        // Put the inner div in the scrolling div\n        scr.appendChild(inn);\n        // Append the scrolling div to the doc\n        document.body.appendChild(scr);\n    \n        // Width of the inner div sans scrollbar\n        wNoScroll = inn.offsetWidth;\n    \n        // Add the scrollbar\n        scr.style.overflow = 'scroll';\n        // Width of the inner div width scrollbar\n        wScroll = inn.offsetWidth;\n    \n        // Remove the scrolling div from the doc\n        document.body.removeChild(document.body.lastChild);\n    \n        // Pixel width of the scroller\n        OpenLayers.Util._scrollbarWidth = (wNoScroll - wScroll);\n        scrollbarWidth = OpenLayers.Util._scrollbarWidth;\n    }\n\n    return scrollbarWidth;\n};\n\n/**\n * APIFunction: getFormattedLonLat\n * This function will return latitude or longitude value formatted as \n *\n * Parameters:\n * coordinate - {Float} the coordinate value to be formatted\n * axis - {String} value of either 'lat' or 'lon' to indicate which axis is to\n *          to be formatted (default = lat)\n * dmsOption - {String} specify the precision of the output can be one of:\n *           'dms' show degrees minutes and seconds\n *           'dm' show only degrees and minutes\n *           'd' show only degrees\n * \n * Returns:\n * {String} the coordinate value formatted as a string\n */\nOpenLayers.Util.getFormattedLonLat = function(coordinate, axis, dmsOption) {\n    if (!dmsOption) {\n        dmsOption = 'dms';    //default to show degree, minutes, seconds\n    }\n\n    coordinate = (coordinate+540)%360 - 180; // normalize for sphere being round\n\n    var abscoordinate = Math.abs(coordinate);\n    var coordinatedegrees = Math.floor(abscoordinate);\n\n    var coordinateminutes = (abscoordinate - coordinatedegrees)/(1/60);\n    var tempcoordinateminutes = coordinateminutes;\n    coordinateminutes = Math.floor(coordinateminutes);\n    var coordinateseconds = (tempcoordinateminutes - coordinateminutes)/(1/60);\n    coordinateseconds =  Math.round(coordinateseconds*10);\n    coordinateseconds /= 10;\n\n    if( coordinateseconds >= 60) { \n        coordinateseconds -= 60; \n        coordinateminutes += 1; \n        if( coordinateminutes >= 60) { \n            coordinateminutes -= 60; \n            coordinatedegrees += 1; \n        } \n    }\n    \n    if( coordinatedegrees < 10 ) {\n        coordinatedegrees = \"0\" + coordinatedegrees;\n    }\n    var str = coordinatedegrees + \"\\u00B0\";\n\n    if (dmsOption.indexOf('dm') >= 0) {\n        if( coordinateminutes < 10 ) {\n            coordinateminutes = \"0\" + coordinateminutes;\n        }\n        str += coordinateminutes + \"'\";\n  \n        if (dmsOption.indexOf('dms') >= 0) {\n            if( coordinateseconds < 10 ) {\n                coordinateseconds = \"0\" + coordinateseconds;\n            }\n            str += coordinateseconds + '\"';\n        }\n    }\n    \n    if (axis == \"lon\") {\n        str += coordinate < 0 ? OpenLayers.i18n(\"W\") : OpenLayers.i18n(\"E\");\n    } else {\n        str += coordinate < 0 ? OpenLayers.i18n(\"S\") : OpenLayers.i18n(\"N\");\n    }\n    return str;\n};\n\n/**\n * Function: getConstructor\n * Take an OpenLayers style CLASS_NAME and return a constructor.\n *\n * Parameters:\n * className - {String} The dot delimited class name (e.g. 'OpenLayers.Foo').\n * \n * Returns:\n * {Function} The constructor.\n */\nOpenLayers.Util.getConstructor = function(className) {\n    var Constructor;\n    var parts = className.split('.');\n    if (parts[0] === \"OpenLayers\") {\n        Constructor = OpenLayers;\n    } else {\n        // someone extended our base class and used their own namespace\n        // this will not work when the library is evaluated in a closure\n        // but it is the best we can do (until we ourselves provide a global)\n        Constructor = window[parts[0]];\n    }\n    for (var i = 1, ii = parts.length; i < ii; ++i) {\n        Constructor = Constructor[parts[i]];\n    }\n    return Constructor;\n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/SingleFile.js\n */\n\nOpenLayers.Util = OpenLayers.Util || {};\n/**\n * Namespace: OpenLayers.Util.vendorPrefix\n * A collection of utility functions to detect vendor prefixed features\n */\nOpenLayers.Util.vendorPrefix = (function() {\n    \"use strict\";\n    \n    var VENDOR_PREFIXES = [\"\", \"O\", \"ms\", \"Moz\", \"Webkit\"],\n        divStyle = document.createElement(\"div\").style,\n        cssCache = {},\n        jsCache = {};\n\n    \n    /**\n     * Function: domToCss\n     * Converts a upper camel case DOM style property name to a CSS property\n     *      i.e. transformOrigin -> transform-origin\n     *      or   WebkitTransformOrigin -> -webkit-transform-origin\n     *\n     * Parameters:\n     * prefixedDom - {String} The property to convert\n     *\n     * Returns:\n     * {String} The CSS property\n     */\n    function domToCss(prefixedDom) {\n        if (!prefixedDom) { return null; }\n        return prefixedDom.\n            replace(/([A-Z])/g, function(c) { return \"-\" + c.toLowerCase(); }).\n            replace(/^ms-/, \"-ms-\");\n    }\n\n    /**\n     * APIMethod: css\n     * Detect which property is used for a CSS property\n     *\n     * Parameters:\n     * property - {String} The standard (unprefixed) CSS property name\n     *\n     * Returns:\n     * {String} The standard CSS property, prefixed property or null if not\n     *          supported\n     */\n    function css(property) {\n        if (cssCache[property] === undefined) {\n            var domProperty = property.\n                replace(/(-[\\s\\S])/g, function(c) { return c.charAt(1).toUpperCase(); });\n            var prefixedDom = style(domProperty);\n            cssCache[property] = domToCss(prefixedDom);\n        }\n        return cssCache[property];\n    }\n\n    /**\n     * APIMethod: js\n     * Detect which property is used for a JS property/method\n     *\n     * Parameters:\n     * obj - {Object} The object to test on\n     * property - {String} The standard (unprefixed) JS property name\n     *\n     * Returns:\n     * {String} The standard JS property, prefixed property or null if not\n     *          supported\n     */\n    function js(obj, property) {\n        if (jsCache[property] === undefined) {\n            var tmpProp,\n                i = 0,\n                l = VENDOR_PREFIXES.length,\n                prefix,\n                isStyleObj = (typeof obj.cssText !== \"undefined\");\n\n            jsCache[property] = null;\n            for(; i<l; i++) {\n                prefix = VENDOR_PREFIXES[i];\n                if(prefix) {\n                    if (!isStyleObj) {\n                        // js prefix should be lower-case, while style\n                        // properties have upper case on first character\n                        prefix = prefix.toLowerCase();\n                    }\n                    tmpProp = prefix + property.charAt(0).toUpperCase() + property.slice(1);\n                } else {\n                    tmpProp = property;\n                }\n\n                if(obj[tmpProp] !== undefined) {\n                    jsCache[property] = tmpProp;\n                    break;\n                }\n            }\n        }\n        return jsCache[property];\n    }\n    \n    /**\n     * APIMethod: style\n     * Detect which property is used for a DOM style property\n     *\n     * Parameters:\n     * property - {String} The standard (unprefixed) style property name\n     *\n     * Returns:\n     * {String} The standard style property, prefixed property or null if not\n     *          supported\n     */\n    function style(property) {\n        return js(divStyle, property);\n    }\n    \n    return {\n        css:      css,\n        js:       js,\n        style:    style,\n        \n        // used for testing\n        cssCache:       cssCache,\n        jsCache:        jsCache\n    };\n}());", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/SingleFile.js\n * @requires OpenLayers/Util/vendorPrefix.js\n */\n\n/**\n * Namespace: OpenLayers.Animation\n * A collection of utility functions for executing methods that repaint a \n *     portion of the browser window.  These methods take advantage of the\n *     browser's scheduled repaints where requestAnimationFrame is available.\n */\nOpenLayers.Animation = (function(window) {\n    \n    /**\n     * Property: isNative\n     * {Boolean} true if a native requestAnimationFrame function is available\n     */\n    var requestAnimationFrame = OpenLayers.Util.vendorPrefix.js(window, \"requestAnimationFrame\");\n    var isNative = !!(requestAnimationFrame);\n    \n    /**\n     * Function: requestFrame\n     * Schedule a function to be called at the next available animation frame.\n     *     Uses the native method where available.  Where requestAnimationFrame is\n     *     not available, setTimeout will be called with a 16ms delay.\n     *\n     * Parameters:\n     * callback - {Function} The function to be called at the next animation frame.\n     * element - {DOMElement} Optional element that visually bounds the animation.\n     */\n    var requestFrame = (function() {\n        var request = window[requestAnimationFrame] ||\n            function(callback, element) {\n                window.setTimeout(callback, 16);\n            };\n        // bind to window to avoid illegal invocation of native function\n        return function(callback, element) {\n            request.apply(window, [callback, element]);\n        };\n    })();\n    \n    // private variables for animation loops\n    var counter = 0;\n    var loops = {};\n    \n    /**\n     * Function: start\n     * Executes a method with <requestFrame> in series for some \n     *     duration.\n     *\n     * Parameters:\n     * callback - {Function} The function to be called at the next animation frame.\n     * duration - {Number} Optional duration for the loop.  If not provided, the\n     *     animation loop will execute indefinitely.\n     * element - {DOMElement} Optional element that visually bounds the animation.\n     *\n     * Returns:\n     * {Number} Identifier for the animation loop.  Used to stop animations with\n     *     <stop>.\n     */\n    function start(callback, duration, element) {\n        duration = duration > 0 ? duration : Number.POSITIVE_INFINITY;\n        var id = ++counter;\n        var start = +new Date;\n        loops[id] = function() {\n            if (loops[id] && +new Date - start <= duration) {\n                callback();\n                if (loops[id]) {\n                    requestFrame(loops[id], element);\n                }\n            } else {\n                delete loops[id];\n            }\n        };\n        requestFrame(loops[id], element);\n        return id;\n    }\n    \n    /**\n     * Function: stop\n     * Terminates an animation loop started with <start>.\n     *\n     * Parameters:\n     * id - {Number} Identifier returned from <start>.\n     */\n    function stop(id) {\n        delete loops[id];\n    }\n    \n    return {\n        isNative: isNative,\n        requestFrame: requestFrame,\n        start: start,\n        stop: stop\n    };\n    \n})(window);\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/SingleFile.js\n */\n\n/** \n * Header: OpenLayers Base Types\n * OpenLayers custom string, number and function functions are described here.\n */\n\n/**\n * Namespace: OpenLayers.String\n * Contains convenience functions for string manipulation.\n */\nOpenLayers.String = {\n\n    /**\n     * APIFunction: startsWith\n     * Test whether a string starts with another string. \n     * \n     * Parameters:\n     * str - {String} The string to test.\n     * sub - {String} The substring to look for.\n     *  \n     * Returns:\n     * {Boolean} The first string starts with the second.\n     */\n    startsWith: function(str, sub) {\n        return (str.indexOf(sub) == 0);\n    },\n\n    /**\n     * APIFunction: contains\n     * Test whether a string contains another string.\n     * \n     * Parameters:\n     * str - {String} The string to test.\n     * sub - {String} The substring to look for.\n     * \n     * Returns:\n     * {Boolean} The first string contains the second.\n     */\n    contains: function(str, sub) {\n        return (str.indexOf(sub) != -1);\n    },\n    \n    /**\n     * APIFunction: trim\n     * Removes leading and trailing whitespace characters from a string.\n     * \n     * Parameters:\n     * str - {String} The (potentially) space padded string.  This string is not\n     *     modified.\n     * \n     * Returns:\n     * {String} A trimmed version of the string with all leading and \n     *     trailing spaces removed.\n     */\n    trim: function(str) {\n        return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n    },\n    \n    /**\n     * APIFunction: camelize\n     * Camel-case a hyphenated string. \n     *     Ex. \"chicken-head\" becomes \"chickenHead\", and\n     *     \"-chicken-head\" becomes \"ChickenHead\".\n     *\n     * Parameters:\n     * str - {String} The string to be camelized.  The original is not modified.\n     * \n     * Returns:\n     * {String} The string, camelized\n     */\n    camelize: function(str) {\n        var oStringList = str.split('-');\n        var camelizedString = oStringList[0];\n        for (var i=1, len=oStringList.length; i<len; i++) {\n            var s = oStringList[i];\n            camelizedString += s.charAt(0).toUpperCase() + s.substring(1);\n        }\n        return camelizedString;\n    },\n    \n    /**\n     * APIFunction: format\n     * Given a string with tokens in the form ${token}, return a string\n     *     with tokens replaced with properties from the given context\n     *     object.  Represent a literal \"${\" by doubling it, e.g. \"${${\".\n     *\n     * Parameters:\n     * template - {String} A string with tokens to be replaced.  A template\n     *     has the form \"literal ${token}\" where the token will be replaced\n     *     by the value of context[\"token\"].\n     * context - {Object} An optional object with properties corresponding\n     *     to the tokens in the format string.  If no context is sent, the\n     *     window object will be used.\n     * args - {Array} Optional arguments to pass to any functions found in\n     *     the context.  If a context property is a function, the token\n     *     will be replaced by the return from the function called with\n     *     these arguments.\n     *\n     * Returns:\n     * {String} A string with tokens replaced from the context object.\n     */\n    format: function(template, context, args) {\n        if(!context) {\n            context = window;\n        }\n\n        // Example matching: \n        // str   = ${foo.bar}\n        // match = foo.bar\n        var replacer = function(str, match) {\n            var replacement;\n\n            // Loop through all subs. Example: ${a.b.c}\n            // 0 -> replacement = context[a];\n            // 1 -> replacement = context[a][b];\n            // 2 -> replacement = context[a][b][c];\n            var subs = match.split(/\\.+/);\n            for (var i=0; i< subs.length; i++) {\n                if (i == 0) {\n                    replacement = context;\n                }\n                if (replacement === undefined) {\n                    break;\n                }\n                replacement = replacement[subs[i]];\n            }\n\n            if(typeof replacement == \"function\") {\n                replacement = args ?\n                    replacement.apply(null, args) :\n                    replacement();\n            }\n\n            // If replacement is undefined, return the string 'undefined'.\n            // This is a workaround for a bugs in browsers not properly \n            // dealing with non-participating groups in regular expressions:\n            // http://blog.stevenlevithan.com/archives/npcg-javascript\n            if (typeof replacement == 'undefined') {\n                return 'undefined';\n            } else {\n                return replacement; \n            }\n        };\n\n        return template.replace(OpenLayers.String.tokenRegEx, replacer);\n    },\n\n    /**\n     * Property: tokenRegEx\n     * Used to find tokens in a string.\n     * Examples: ${a}, ${a.b.c}, ${a-b}, ${5}\n     */\n    tokenRegEx:  /\\$\\{([\\w.]+?)\\}/g,\n    \n    /**\n     * Property: numberRegEx\n     * Used to test strings as numbers.\n     */\n    numberRegEx: /^([+-]?)(?=\\d|\\.\\d)\\d*(\\.\\d*)?([Ee]([+-]?\\d+))?$/,\n    \n    /**\n     * APIFunction: isNumeric\n     * Determine whether a string contains only a numeric value.\n     *\n     * Examples:\n     * (code)\n     * OpenLayers.String.isNumeric(\"6.02e23\") // true\n     * OpenLayers.String.isNumeric(\"12 dozen\") // false\n     * OpenLayers.String.isNumeric(\"4\") // true\n     * OpenLayers.String.isNumeric(\" 4 \") // false\n     * (end)\n     *\n     * Returns:\n     * {Boolean} String contains only a number.\n     */\n    isNumeric: function(value) {\n        return OpenLayers.String.numberRegEx.test(value);\n    },\n    \n    /**\n     * APIFunction: numericIf\n     * Converts a string that appears to be a numeric value into a number.\n     * \n     * Parameters:\n     * value - {String}\n     * trimWhitespace - {Boolean}\n     *\n     * Returns:\n     * {Number|String} a Number if the passed value is a number, a String\n     *     otherwise. \n     */\n    numericIf: function(value, trimWhitespace) {\n        var originalValue = value;\n        if (trimWhitespace === true && value != null && value.replace) {\n            value = value.replace(/^\\s*|\\s*$/g, \"\");\n        }\n        return OpenLayers.String.isNumeric(value) ? parseFloat(value) : originalValue;\n    }\n\n};\n\n/**\n * Namespace: OpenLayers.Number\n * Contains convenience functions for manipulating numbers.\n */\nOpenLayers.Number = {\n\n    /**\n     * Property: decimalSeparator\n     * Decimal separator to use when formatting numbers.\n     */\n    decimalSeparator: \".\",\n    \n    /**\n     * Property: thousandsSeparator\n     * Thousands separator to use when formatting numbers.\n     */\n    thousandsSeparator: \",\",\n    \n    /**\n     * APIFunction: limitSigDigs\n     * Limit the number of significant digits on a float.\n     * \n     * Parameters:\n     * num - {Float}\n     * sig - {Integer}\n     * \n     * Returns:\n     * {Float} The number, rounded to the specified number of significant\n     *     digits.\n     */\n    limitSigDigs: function(num, sig) {\n        var fig = 0;\n        if (sig > 0) {\n            fig = parseFloat(num.toPrecision(sig));\n        }\n        return fig;\n    },\n    \n    /**\n     * APIFunction: format\n     * Formats a number for output.\n     * \n     * Parameters:\n     * num  - {Float}\n     * dec  - {Integer} Number of decimal places to round to.\n     *        Defaults to 0. Set to null to leave decimal places unchanged.\n     * tsep - {String} Thousands separator.\n     *        Default is \",\".\n     * dsep - {String} Decimal separator.\n     *        Default is \".\".\n     *\n     * Returns:\n     * {String} A string representing the formatted number.\n     */\n    format: function(num, dec, tsep, dsep) {\n        dec = (typeof dec != \"undefined\") ? dec : 0; \n        tsep = (typeof tsep != \"undefined\") ? tsep :\n            OpenLayers.Number.thousandsSeparator; \n        dsep = (typeof dsep != \"undefined\") ? dsep :\n            OpenLayers.Number.decimalSeparator;\n\n        if (dec != null) {\n            num = parseFloat(num.toFixed(dec));\n        }\n\n        var parts = num.toString().split(\".\");\n        if (parts.length == 1 && dec == null) {\n            // integer where we do not want to touch the decimals\n            dec = 0;\n        }\n        \n        var integer = parts[0];\n        if (tsep) {\n            var thousands = /(-?[0-9]+)([0-9]{3})/; \n            while(thousands.test(integer)) { \n                integer = integer.replace(thousands, \"$1\" + tsep + \"$2\"); \n            }\n        }\n        \n        var str;\n        if (dec == 0) {\n            str = integer;\n        } else {\n            var rem = parts.length > 1 ? parts[1] : \"0\";\n            if (dec != null) {\n                rem = rem + new Array(dec - rem.length + 1).join(\"0\");\n            }\n            str = integer + dsep + rem;\n        }\n        return str;\n    },\n\n    /**\n     * Method: zeroPad\n     * Create a zero padded string optionally with a radix for casting numbers.\n     *\n     * Parameters:\n     * num - {Number} The number to be zero padded.\n     * len - {Number} The length of the string to be returned.\n     * radix - {Number} An integer between 2 and 36 specifying the base to use\n     *     for representing numeric values.\n     */\n    zeroPad: function(num, len, radix) {\n        var str = num.toString(radix || 10);\n        while (str.length < len) {\n            str = \"0\" + str;\n        }\n        return str;\n    }    \n};\n\n/**\n * Namespace: OpenLayers.Function\n * Contains convenience functions for function manipulation.\n */\nOpenLayers.Function = {\n    /**\n     * APIFunction: bind\n     * Bind a function to an object.  Method to easily create closures with\n     *     'this' altered.\n     * \n     * Parameters:\n     * func - {Function} Input function.\n     * object - {Object} The object to bind to the input function (as this).\n     * \n     * Returns:\n     * {Function} A closure with 'this' set to the passed in object.\n     */\n    bind: function(func, object) {\n        // create a reference to all arguments past the second one\n        var args = Array.prototype.slice.call(arguments, 2);\n        return function() {\n            // Push on any additional arguments from the actual function call.\n            // These will come after those sent to the bind call.\n            var newArgs = args.concat(\n                Array.prototype.slice.call(arguments, 0)\n            );\n            return func.apply(object, newArgs);\n        };\n    },\n    \n    /**\n     * APIFunction: bindAsEventListener\n     * Bind a function to an object, and configure it to receive the event\n     *     object as first parameter when called. \n     * \n     * Parameters:\n     * func - {Function} Input function to serve as an event listener.\n     * object - {Object} A reference to this.\n     * \n     * Returns:\n     * {Function}\n     */\n    bindAsEventListener: function(func, object) {\n        return function(event) {\n            return func.call(object, event || window.event);\n        };\n    },\n    \n    /**\n     * APIFunction: False\n     * A simple function to that just does \"return false\". We use this to \n     * avoid attaching anonymous functions to DOM event handlers, which \n     * causes \"issues\" on IE<8.\n     * \n     * Usage:\n     * document.onclick = OpenLayers.Function.False;\n     * \n     * Returns:\n     * {Boolean}\n     */\n    False : function() {\n        return false;\n    },\n\n    /**\n     * APIFunction: True\n     * A simple function to that just does \"return true\". We use this to \n     * avoid attaching anonymous functions to DOM event handlers, which \n     * causes \"issues\" on IE<8.\n     * \n     * Usage:\n     * document.onclick = OpenLayers.Function.True;\n     * \n     * Returns:\n     * {Boolean}\n     */\n    True : function() {\n        return true;\n    },\n    \n    /**\n     * APIFunction: Void\n     * A reusable function that returns ``undefined``.\n     *\n     * Returns:\n     * {undefined}\n     */\n    Void: function() {}\n\n};\n\n/**\n * Namespace: OpenLayers.Array\n * Contains convenience functions for array manipulation.\n */\nOpenLayers.Array = {\n\n    /**\n     * APIMethod: filter\n     * Filter an array.  Provides the functionality of the\n     *     Array.prototype.filter extension to the ECMA-262 standard.  Where\n     *     available, Array.prototype.filter will be used.\n     *\n     * Based on well known example from http://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Array/filter\n     *\n     * Parameters:\n     * array - {Array} The array to be filtered.  This array is not mutated.\n     *     Elements added to this array by the callback will not be visited.\n     * callback - {Function} A function that is called for each element in\n     *     the array.  If this function returns true, the element will be\n     *     included in the return.  The function will be called with three\n     *     arguments: the element in the array, the index of that element, and\n     *     the array itself.  If the optional caller parameter is specified\n     *     the callback will be called with this set to caller.\n     * caller - {Object} Optional object to be set as this when the callback\n     *     is called.\n     *\n     * Returns:\n     * {Array} An array of elements from the passed in array for which the\n     *     callback returns true.\n     */\n    filter: function(array, callback, caller) {\n        var selected = [];\n        if (Array.prototype.filter) {\n            selected = array.filter(callback, caller);\n        } else {\n            var len = array.length;\n            if (typeof callback != \"function\") {\n                throw new TypeError();\n            }\n            for(var i=0; i<len; i++) {\n                if (i in array) {\n                    var val = array[i];\n                    if (callback.call(caller, val, i, array)) {\n                        selected.push(val);\n                    }\n                }\n            }        \n        }\n        return selected;\n    }\n    \n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n */\n\n/**\n * Class: OpenLayers.Bounds\n * Instances of this class represent bounding boxes.  Data stored as left,\n * bottom, right, top floats. All values are initialized to null, however,\n * you should make sure you set them before using the bounds for anything.\n * \n * Possible use case:\n * (code)\n *     bounds = new OpenLayers.Bounds();\n *     bounds.extend(new OpenLayers.LonLat(4,5));\n *     bounds.extend(new OpenLayers.LonLat(5,6));\n *     bounds.toBBOX(); // returns 4,5,5,6\n * (end)\n */\nOpenLayers.Bounds = OpenLayers.Class({\n\n    /**\n     * Property: left\n     * {Number} Minimum horizontal coordinate.\n     */\n    left: null,\n\n    /**\n     * Property: bottom\n     * {Number} Minimum vertical coordinate.\n     */\n    bottom: null,\n\n    /**\n     * Property: right\n     * {Number} Maximum horizontal coordinate.\n     */\n    right: null,\n\n    /**\n     * Property: top\n     * {Number} Maximum vertical coordinate.\n     */\n    top: null,\n    \n    /**\n     * Property: centerLonLat\n     * {<OpenLayers.LonLat>} A cached center location.  This should not be\n     *     accessed directly.  Use <getCenterLonLat> instead.\n     */\n    centerLonLat: null,\n\n    /**\n     * Constructor: OpenLayers.Bounds\n     * Construct a new bounds object. Coordinates can either be passed as four\n     * arguments, or as a single argument.\n     *\n     * Parameters (four arguments):\n     * left - {Number} The left bounds of the box.  Note that for width\n     *        calculations, this is assumed to be less than the right value.\n     * bottom - {Number} The bottom bounds of the box.  Note that for height\n     *          calculations, this is assumed to be less than the top value.\n     * right - {Number} The right bounds.\n     * top - {Number} The top bounds.\n     *\n     * Parameters (single argument):\n     * bounds - {Array(Number)} [left, bottom, right, top]\n     */\n    initialize: function(left, bottom, right, top) {\n        if (OpenLayers.Util.isArray(left)) {\n            top = left[3];\n            right = left[2];\n            bottom = left[1];\n            left = left[0];\n        }\n        if (left != null) {\n            this.left = OpenLayers.Util.toFloat(left);\n        }\n        if (bottom != null) {\n            this.bottom = OpenLayers.Util.toFloat(bottom);\n        }\n        if (right != null) {\n            this.right = OpenLayers.Util.toFloat(right);\n        }\n        if (top != null) {\n            this.top = OpenLayers.Util.toFloat(top);\n        }\n    },\n\n    /**\n     * Method: clone\n     * Create a cloned instance of this bounds.\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>} A fresh copy of the bounds\n     */\n    clone:function() {\n        return new OpenLayers.Bounds(this.left, this.bottom, \n                                     this.right, this.top);\n    },\n\n    /**\n     * Method: equals\n     * Test a two bounds for equivalence.\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     *\n     * Returns:\n     * {Boolean} The passed-in bounds object has the same left,\n     *           right, top, bottom components as this.  Note that if bounds \n     *           passed in is null, returns false.\n     */\n    equals:function(bounds) {\n        var equals = false;\n        if (bounds != null) {\n            equals = ((this.left == bounds.left) && \n                      (this.right == bounds.right) &&\n                      (this.top == bounds.top) && \n                      (this.bottom == bounds.bottom));\n        }\n        return equals;\n    },\n\n    /** \n     * APIMethod: toString\n     * Returns a string representation of the bounds object.\n     * \n     * Returns:\n     * {String} String representation of bounds object. \n     */\n    toString:function() {\n        return [this.left, this.bottom, this.right, this.top].join(\",\");\n    },\n\n    /**\n     * APIMethod: toArray\n     * Returns an array representation of the bounds object.\n     *\n     * Returns an array of left, bottom, right, top properties, or -- when the\n     *     optional parameter is true -- an array of the  bottom, left, top,\n     *     right properties.\n     *\n     * Parameters:\n     * reverseAxisOrder - {Boolean} Should we reverse the axis order?\n     *\n     * Returns:\n     * {Array} array of left, bottom, right, top\n     */\n    toArray: function(reverseAxisOrder) {\n        if (reverseAxisOrder === true) {\n            return [this.bottom, this.left, this.top, this.right];\n        } else {\n            return [this.left, this.bottom, this.right, this.top];\n        }\n    },    \n\n    /** \n     * APIMethod: toBBOX\n     * Returns a boundingbox-string representation of the bounds object.\n     * \n     * Parameters:\n     * decimal - {Integer} How many decimal places in the bbox coords?\n     *                     Default is 6\n     * reverseAxisOrder - {Boolean} Should we reverse the axis order?\n     * \n     * Returns:\n     * {String} Simple String representation of bounds object.\n     *          (e.g. \"5,42,10,45\")\n     */\n    toBBOX:function(decimal, reverseAxisOrder) {\n        if (decimal== null) {\n            decimal = 6; \n        }\n        var mult = Math.pow(10, decimal);\n        var xmin = Math.round(this.left * mult) / mult;\n        var ymin = Math.round(this.bottom * mult) / mult;\n        var xmax = Math.round(this.right * mult) / mult;\n        var ymax = Math.round(this.top * mult) / mult;\n        if (reverseAxisOrder === true) {\n            return ymin + \",\" + xmin + \",\" + ymax + \",\" + xmax;\n        } else {\n            return xmin + \",\" + ymin + \",\" + xmax + \",\" + ymax;\n        }\n    },\n \n    /**\n     * APIMethod: toGeometry\n     * Create a new polygon geometry based on this bounds.\n     *\n     * Returns:\n     * {<OpenLayers.Geometry.Polygon>} A new polygon with the coordinates\n     *     of this bounds.\n     */\n    toGeometry: function() {\n        return new OpenLayers.Geometry.Polygon([\n            new OpenLayers.Geometry.LinearRing([\n                new OpenLayers.Geometry.Point(this.left, this.bottom),\n                new OpenLayers.Geometry.Point(this.right, this.bottom),\n                new OpenLayers.Geometry.Point(this.right, this.top),\n                new OpenLayers.Geometry.Point(this.left, this.top)\n            ])\n        ]);\n    },\n    \n    /**\n     * APIMethod: getWidth\n     * Returns the width of the bounds.\n     * \n     * Returns:\n     * {Float} The width of the bounds (right minus left).\n     */\n    getWidth:function() {\n        return (this.right - this.left);\n    },\n\n    /**\n     * APIMethod: getHeight\n     * Returns the height of the bounds.\n     * \n     * Returns:\n     * {Float} The height of the bounds (top minus bottom).\n     */\n    getHeight:function() {\n        return (this.top - this.bottom);\n    },\n\n    /**\n     * APIMethod: getSize\n     * Returns an <OpenLayers.Size> object of the bounds.\n     * \n     * Returns:\n     * {<OpenLayers.Size>} The size of the bounds.\n     */\n    getSize:function() {\n        return new OpenLayers.Size(this.getWidth(), this.getHeight());\n    },\n\n    /**\n     * APIMethod: getCenterPixel\n     * Returns the <OpenLayers.Pixel> object which represents the center of the\n     *     bounds.\n     * \n     * Returns:\n     * {<OpenLayers.Pixel>} The center of the bounds in pixel space.\n     */\n    getCenterPixel:function() {\n        return new OpenLayers.Pixel( (this.left + this.right) / 2,\n                                     (this.bottom + this.top) / 2);\n    },\n\n    /**\n     * APIMethod: getCenterLonLat\n     * Returns the <OpenLayers.LonLat> object which represents the center of the\n     *     bounds.\n     *\n     * Returns:\n     * {<OpenLayers.LonLat>} The center of the bounds in map space.\n     */\n    getCenterLonLat:function() {\n        if(!this.centerLonLat) {\n            this.centerLonLat = new OpenLayers.LonLat(\n                (this.left + this.right) / 2, (this.bottom + this.top) / 2\n            );\n        }\n        return this.centerLonLat;\n    },\n\n    /**\n     * APIMethod: scale\n     * Scales the bounds around a pixel or lonlat. Note that the new \n     *     bounds may return non-integer properties, even if a pixel\n     *     is passed. \n     * \n     * Parameters:\n     * ratio - {Float} \n     * origin - {<OpenLayers.Pixel> or <OpenLayers.LonLat>}\n     *          Default is center.\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>} A new bounds that is scaled by ratio\n     *                      from origin.\n     */\n    scale: function(ratio, origin){\n        if(origin == null){\n            origin = this.getCenterLonLat();\n        }\n        \n        var origx,origy;\n\n        // get origin coordinates\n        if(origin.CLASS_NAME == \"OpenLayers.LonLat\"){\n            origx = origin.lon;\n            origy = origin.lat;\n        } else {\n            origx = origin.x;\n            origy = origin.y;\n        }\n\n        var left = (this.left - origx) * ratio + origx;\n        var bottom = (this.bottom - origy) * ratio + origy;\n        var right = (this.right - origx) * ratio + origx;\n        var top = (this.top - origy) * ratio + origy;\n        \n        return new OpenLayers.Bounds(left, bottom, right, top);\n    },\n\n    /**\n     * APIMethod: add\n     * Shifts the coordinates of the bound by the given horizontal and vertical\n     *     deltas.\n     *\n     * (start code)\n     * var bounds = new OpenLayers.Bounds(0, 0, 10, 10);\n     * bounds.toString();\n     * // => \"0,0,10,10\"\n     *\n     * bounds.add(-1.5, 4).toString();\n     * // => \"-1.5,4,8.5,14\"\n     * (end)\n     *\n     * This method will throw a TypeError if it is passed null as an argument.\n     *\n     * Parameters:\n     * x - {Float} horizontal delta\n     * y - {Float} vertical delta\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>} A new bounds whose coordinates are the same as\n     *     this, but shifted by the passed-in x and y values.\n     */\n    add:function(x, y) {\n        if ( (x == null) || (y == null) ) {\n            throw new TypeError('Bounds.add cannot receive null values');\n        }\n        return new OpenLayers.Bounds(this.left + x, this.bottom + y,\n                                     this.right + x, this.top + y);\n    },\n    \n    /**\n     * APIMethod: extend\n     * Extend the bounds to include the <OpenLayers.LonLat>,\n     *     <OpenLayers.Geometry.Point> or <OpenLayers.Bounds> specified.\n     *\n     * Please note that this function assumes that left < right and\n     *     bottom < top.\n     *\n     * Parameters:\n     * object - {<OpenLayers.LonLat>, <OpenLayers.Geometry.Point> or\n     *     <OpenLayers.Bounds>} The object to be included in the new bounds\n     *     object.\n     */\n    extend:function(object) {\n        if (object) {\n            switch(object.CLASS_NAME) {\n                case \"OpenLayers.LonLat\":\n                    this.extendXY(object.lon, object.lat);\n                    break;\n                case \"OpenLayers.Geometry.Point\":\n                    this.extendXY(object.x, object.y);\n                    break;\n\n                case \"OpenLayers.Bounds\":\n                    // clear cached center location\n                    this.centerLonLat = null;\n\n                    if ( (this.left == null) || (object.left < this.left)) {\n                        this.left = object.left;\n                    }\n                    if ( (this.bottom == null) || (object.bottom < this.bottom) ) {\n                        this.bottom = object.bottom;\n                    }\n                    if ( (this.right == null) || (object.right > this.right) ) {\n                        this.right = object.right;\n                    }\n                    if ( (this.top == null) || (object.top > this.top) ) {\n                        this.top = object.top;\n                    }\n                    break;\n            }\n        }\n    },\n\n    /**\n     * APIMethod: extendXY\n     * Extend the bounds to include the XY coordinate specified.\n     *\n     * Parameters:\n     * x - {number} The X part of the the coordinate.\n     * y - {number} The Y part of the the coordinate.\n     */\n    extendXY:function(x, y) {\n        // clear cached center location\n        this.centerLonLat = null;\n\n        if ((this.left == null) || (x < this.left)) {\n            this.left = x;\n        }\n        if ((this.bottom == null) || (y < this.bottom)) {\n            this.bottom = y;\n        }\n        if ((this.right == null) || (x > this.right)) {\n            this.right = x;\n        }\n        if ((this.top == null) || (y > this.top)) {\n            this.top = y;\n        }\n    },\n\n    /**\n     * APIMethod: containsLonLat\n     * Returns whether the bounds object contains the given <OpenLayers.LonLat>.\n     * \n     * Parameters:\n     * ll - {<OpenLayers.LonLat>|Object} OpenLayers.LonLat or an\n     *     object with a 'lon' and 'lat' properties.\n     * options - {Object} Optional parameters\n     *\n     * Acceptable options:\n     * inclusive - {Boolean} Whether or not to include the border.\n     *     Default is true.\n     * worldBounds - {<OpenLayers.Bounds>} If a worldBounds is provided, the\n     *     ll will be considered as contained if it exceeds the world bounds,\n     *     but can be wrapped around the dateline so it is contained by this\n     *     bounds.\n     *\n     * Returns:\n     * {Boolean} The passed-in lonlat is within this bounds.\n     */\n    containsLonLat: function(ll, options) {\n        if (typeof options === \"boolean\") {\n            options =  {inclusive: options};\n        }\n        options = options || {};\n        var contains = this.contains(ll.lon, ll.lat, options.inclusive),\n            worldBounds = options.worldBounds;\n        if (worldBounds && !contains) {\n            var worldWidth = worldBounds.getWidth();\n            var worldCenterX = (worldBounds.left + worldBounds.right) / 2;\n            var worldsAway = Math.round((ll.lon - worldCenterX) / worldWidth);\n            contains = this.containsLonLat({\n                lon: ll.lon - worldsAway * worldWidth,\n                lat: ll.lat\n            }, {inclusive: options.inclusive});\n        }\n        return contains;\n    },\n\n    /**\n     * APIMethod: containsPixel\n     * Returns whether the bounds object contains the given <OpenLayers.Pixel>.\n     * \n     * Parameters:\n     * px - {<OpenLayers.Pixel>}\n     * inclusive - {Boolean} Whether or not to include the border. Default is\n     *     true.\n     *\n     * Returns:\n     * {Boolean} The passed-in pixel is within this bounds.\n     */\n    containsPixel:function(px, inclusive) {\n        return this.contains(px.x, px.y, inclusive);\n    },\n    \n    /**\n     * APIMethod: contains\n     * Returns whether the bounds object contains the given x and y.\n     * \n     * Parameters:\n     * x - {Float}\n     * y - {Float}\n     * inclusive - {Boolean} Whether or not to include the border. Default is\n     *     true.\n     *\n     * Returns:\n     * {Boolean} Whether or not the passed-in coordinates are within this\n     *     bounds.\n     */\n    contains:function(x, y, inclusive) {\n        //set default\n        if (inclusive == null) {\n            inclusive = true;\n        }\n\n        if (x == null || y == null) {\n            return false;\n        }\n\n        x = OpenLayers.Util.toFloat(x);\n        y = OpenLayers.Util.toFloat(y);\n\n        var contains = false;\n        if (inclusive) {\n            contains = ((x >= this.left) && (x <= this.right) && \n                        (y >= this.bottom) && (y <= this.top));\n        } else {\n            contains = ((x > this.left) && (x < this.right) && \n                        (y > this.bottom) && (y < this.top));\n        }              \n        return contains;\n    },\n\n    /**\n     * APIMethod: intersectsBounds\n     * Determine whether the target bounds intersects this bounds.  Bounds are\n     *     considered intersecting if any of their edges intersect or if one\n     *     bounds contains the other.\n     * \n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>} The target bounds.\n     * options - {Object} Optional parameters.\n     * \n     * Acceptable options:\n     * inclusive - {Boolean} Treat coincident borders as intersecting.  Default\n     *     is true.  If false, bounds that do not overlap but only touch at the\n     *     border will not be considered as intersecting.\n     * worldBounds - {<OpenLayers.Bounds>} If a worldBounds is provided, two\n     *     bounds will be considered as intersecting if they intersect when \n     *     shifted to within the world bounds.  This applies only to bounds that\n     *     cross or are completely outside the world bounds.\n     *\n     * Returns:\n     * {Boolean} The passed-in bounds object intersects this bounds.\n     */\n    intersectsBounds:function(bounds, options) {\n        if (typeof options === \"boolean\") {\n            options =  {inclusive: options};\n        }\n        options = options || {};\n        if (options.worldBounds) {\n            var self = this.wrapDateLine(options.worldBounds);\n            bounds = bounds.wrapDateLine(options.worldBounds);\n        } else {\n            self = this;\n        }\n        if (options.inclusive == null) {\n            options.inclusive = true;\n        }\n        var intersects = false;\n        var mightTouch = (\n            self.left == bounds.right ||\n            self.right == bounds.left ||\n            self.top == bounds.bottom ||\n            self.bottom == bounds.top\n        );\n        \n        // if the two bounds only touch at an edge, and inclusive is false,\n        // then the bounds don't *really* intersect.\n        if (options.inclusive || !mightTouch) {\n            // otherwise, if one of the boundaries even partially contains another,\n            // inclusive of the edges, then they do intersect.\n            var inBottom = (\n                ((bounds.bottom >= self.bottom) && (bounds.bottom <= self.top)) ||\n                ((self.bottom >= bounds.bottom) && (self.bottom <= bounds.top))\n            );\n            var inTop = (\n                ((bounds.top >= self.bottom) && (bounds.top <= self.top)) ||\n                ((self.top > bounds.bottom) && (self.top < bounds.top))\n            );\n            var inLeft = (\n                ((bounds.left >= self.left) && (bounds.left <= self.right)) ||\n                ((self.left >= bounds.left) && (self.left <= bounds.right))\n            );\n            var inRight = (\n                ((bounds.right >= self.left) && (bounds.right <= self.right)) ||\n                ((self.right >= bounds.left) && (self.right <= bounds.right))\n            );\n            intersects = ((inBottom || inTop) && (inLeft || inRight));\n        }\n        // document me\n        if (options.worldBounds && !intersects) {\n            var world = options.worldBounds;\n            var width = world.getWidth();\n            var selfCrosses = !world.containsBounds(self);\n            var boundsCrosses = !world.containsBounds(bounds);\n            if (selfCrosses && !boundsCrosses) {\n                bounds = bounds.add(-width, 0);\n                intersects = self.intersectsBounds(bounds, {inclusive: options.inclusive});\n            } else if (boundsCrosses && !selfCrosses) {\n                self = self.add(-width, 0);\n                intersects = bounds.intersectsBounds(self, {inclusive: options.inclusive});                \n            }\n        }\n        return intersects;\n    },\n    \n    /**\n     * APIMethod: containsBounds\n     * Returns whether the bounds object contains the given <OpenLayers.Bounds>.\n     * \n     * bounds - {<OpenLayers.Bounds>} The target bounds.\n     * partial - {Boolean} If any of the target corners is within this bounds\n     *     consider the bounds contained.  Default is false.  If false, the\n     *     entire target bounds must be contained within this bounds.\n     * inclusive - {Boolean} Treat shared edges as contained.  Default is\n     *     true.\n     *\n     * Returns:\n     * {Boolean} The passed-in bounds object is contained within this bounds. \n     */\n    containsBounds:function(bounds, partial, inclusive) {\n        if (partial == null) {\n            partial = false;\n        }\n        if (inclusive == null) {\n            inclusive = true;\n        }\n        var bottomLeft  = this.contains(bounds.left, bounds.bottom, inclusive);\n        var bottomRight = this.contains(bounds.right, bounds.bottom, inclusive);\n        var topLeft  = this.contains(bounds.left, bounds.top, inclusive);\n        var topRight = this.contains(bounds.right, bounds.top, inclusive);\n        \n        return (partial) ? (bottomLeft || bottomRight || topLeft || topRight)\n                         : (bottomLeft && bottomRight && topLeft && topRight);\n    },\n\n    /** \n     * APIMethod: determineQuadrant\n     * Returns the the quadrant (\"br\", \"tr\", \"tl\", \"bl\") in which the given\n     *     <OpenLayers.LonLat> lies.\n     *\n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>}\n     *\n     * Returns:\n     * {String} The quadrant (\"br\" \"tr\" \"tl\" \"bl\") of the bounds in which the\n     *     coordinate lies.\n     */\n    determineQuadrant: function(lonlat) {\n    \n        var quadrant = \"\";\n        var center = this.getCenterLonLat();\n        \n        quadrant += (lonlat.lat < center.lat) ? \"b\" : \"t\";\n        quadrant += (lonlat.lon < center.lon) ? \"l\" : \"r\";\n    \n        return quadrant; \n    },\n    \n    /**\n     * APIMethod: transform\n     * Transform the Bounds object from source to dest. \n     *\n     * Parameters: \n     * source - {<OpenLayers.Projection>} Source projection. \n     * dest   - {<OpenLayers.Projection>} Destination projection. \n     *\n     * Returns:\n     * {<OpenLayers.Bounds>} Itself, for use in chaining operations.\n     */\n    transform: function(source, dest) {\n        // clear cached center location\n        this.centerLonLat = null;\n        var ll = OpenLayers.Projection.transform(\n            {'x': this.left, 'y': this.bottom}, source, dest);\n        var lr = OpenLayers.Projection.transform(\n            {'x': this.right, 'y': this.bottom}, source, dest);\n        var ul = OpenLayers.Projection.transform(\n            {'x': this.left, 'y': this.top}, source, dest);\n        var ur = OpenLayers.Projection.transform(\n            {'x': this.right, 'y': this.top}, source, dest);\n        this.left   = Math.min(ll.x, ul.x);\n        this.bottom = Math.min(ll.y, lr.y);\n        this.right  = Math.max(lr.x, ur.x);\n        this.top    = Math.max(ul.y, ur.y);\n        return this;\n    },\n\n    /**\n     * APIMethod: wrapDateLine\n     * Wraps the bounds object around the dateline.\n     *  \n     * Parameters:\n     * maxExtent - {<OpenLayers.Bounds>}\n     * options - {Object} Some possible options are:\n     *\n     * Allowed Options:\n     *                    leftTolerance - {float} Allow for a margin of error \n     *                                            with the 'left' value of this \n     *                                            bound.\n     *                                            Default is 0.\n     *                    rightTolerance - {float} Allow for a margin of error \n     *                                             with the 'right' value of \n     *                                             this bound.\n     *                                             Default is 0.\n     * \n     * Returns:\n     * {<OpenLayers.Bounds>} A copy of this bounds, but wrapped around the \n     *                       \"dateline\" (as specified by the borders of \n     *                       maxExtent). Note that this function only returns \n     *                       a different bounds value if this bounds is \n     *                       *entirely* outside of the maxExtent. If this \n     *                       bounds straddles the dateline (is part in/part \n     *                       out of maxExtent), the returned bounds will always \n     *                       cross the left edge of the given maxExtent.\n     *.\n     */\n    wrapDateLine: function(maxExtent, options) {    \n        options = options || {};\n        \n        var leftTolerance = options.leftTolerance || 0;\n        var rightTolerance = options.rightTolerance || 0;\n\n        var newBounds = this.clone();\n    \n        if (maxExtent) {\n            var width = maxExtent.getWidth();\n\n            //shift right?\n            while (newBounds.left < maxExtent.left && \n                   newBounds.right - rightTolerance <= maxExtent.left ) { \n                newBounds = newBounds.add(width, 0);\n            }\n\n            //shift left?\n            while (newBounds.left + leftTolerance >= maxExtent.right && \n                   newBounds.right > maxExtent.right ) { \n                newBounds = newBounds.add(-width, 0);\n            }\n           \n            // crosses right only? force left\n            var newLeft = newBounds.left + leftTolerance;\n            if (newLeft < maxExtent.right && newLeft > maxExtent.left && \n                   newBounds.right - rightTolerance > maxExtent.right) {\n                newBounds = newBounds.add(-width, 0);\n            }\n        }\n                \n        return newBounds;\n    },\n\n    CLASS_NAME: \"OpenLayers.Bounds\"\n});\n\n/** \n * APIFunction: fromString\n * Alternative constructor that builds a new OpenLayers.Bounds from a \n *     parameter string.\n *\n * (begin code)\n * OpenLayers.Bounds.fromString(\"5,42,10,45\");\n * // => equivalent to ...\n * new OpenLayers.Bounds(5, 42, 10, 45);\n * (end)\n *\n * Parameters: \n * str - {String} Comma-separated bounds string. (e.g. \"5,42,10,45\")\n * reverseAxisOrder - {Boolean} Does the string use reverse axis order?\n *\n * Returns:\n * {<OpenLayers.Bounds>} New bounds object built from the \n *                       passed-in String.\n */\nOpenLayers.Bounds.fromString = function(str, reverseAxisOrder) {\n    var bounds = str.split(\",\");\n    return OpenLayers.Bounds.fromArray(bounds, reverseAxisOrder);\n};\n\n/** \n * APIFunction: fromArray\n * Alternative constructor that builds a new OpenLayers.Bounds from an array.\n *\n * (begin code)\n * OpenLayers.Bounds.fromArray( [5, 42, 10, 45] );\n * // => equivalent to ...\n * new OpenLayers.Bounds(5, 42, 10, 45);\n * (end)\n *\n * Parameters:\n * bbox - {Array(Float)} Array of bounds values (e.g. [5,42,10,45])\n * reverseAxisOrder - {Boolean} Does the array use reverse axis order?\n *\n * Returns:\n * {<OpenLayers.Bounds>} New bounds object built from the passed-in Array.\n */\nOpenLayers.Bounds.fromArray = function(bbox, reverseAxisOrder) {\n    return reverseAxisOrder === true ?\n           new OpenLayers.Bounds(bbox[1], bbox[0], bbox[3], bbox[2]) :\n           new OpenLayers.Bounds(bbox[0], bbox[1], bbox[2], bbox[3]);\n};\n\n/** \n * APIFunction: fromSize\n * Alternative constructor that builds a new OpenLayers.Bounds from a size.\n *\n * (begin code)\n * OpenLayers.Bounds.fromSize( new OpenLayers.Size(10, 20) );\n * // => equivalent to ...\n * new OpenLayers.Bounds(0, 20, 10, 0);\n * (end)\n *\n * Parameters:\n * size - {<OpenLayers.Size> or Object} <OpenLayers.Size> or an object with\n *     both 'w' and 'h' properties.\n *\n * Returns:\n * {<OpenLayers.Bounds>} New bounds object built from the passed-in size.\n */\nOpenLayers.Bounds.fromSize = function(size) {\n    return new OpenLayers.Bounds(0,\n                                 size.h,\n                                 size.w,\n                                 0);\n};\n\n/**\n * Function: oppositeQuadrant\n * Get the opposite quadrant for a given quadrant string.\n *\n * (begin code)\n * OpenLayers.Bounds.oppositeQuadrant( \"tl\" );\n * // => \"br\"\n *\n * OpenLayers.Bounds.oppositeQuadrant( \"tr\" );\n * // => \"bl\"\n * (end)\n *\n * Parameters:\n * quadrant - {String} two character quadrant shortstring\n *\n * Returns:\n * {String} The opposing quadrant (\"br\" \"tr\" \"tl\" \"bl\"). For Example, if \n *          you pass in \"bl\" it returns \"tr\", if you pass in \"br\" it \n *          returns \"tl\", etc.\n */\nOpenLayers.Bounds.oppositeQuadrant = function(quadrant) {\n    var opp = \"\";\n    \n    opp += (quadrant.charAt(0) == 't') ? 'b' : 't';\n    opp += (quadrant.charAt(1) == 'l') ? 'r' : 'l';\n    \n    return opp;\n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/SingleFile.js\n */\n\n/**\n * Namespace: OpenLayers.Date\n * Contains implementations of Date.parse and date.toISOString that match the\n *     ECMAScript 5 specification for parsing RFC 3339 dates.\n *     http://tools.ietf.org/html/rfc3339\n */\nOpenLayers.Date = {\n\n    /** \n     * APIProperty: dateRegEx\n     * The regex to be used for validating dates. You can provide your own\n     * regex for instance for adding support for years before BC. Default\n     * value is: /^(?:(\\d{4})(?:-(\\d{2})(?:-(\\d{2}))?)?)?(?:(?:T(\\d{1,2}):(\\d{2}):(\\d{2}(?:\\.\\d+)?)(Z|(?:[+-]\\d{1,2}(?::(\\d{2}))?)))|Z)?$/\n     */\n    dateRegEx: /^(?:(\\d{4})(?:-(\\d{2})(?:-(\\d{2}))?)?)?(?:(?:T(\\d{1,2}):(\\d{2}):(\\d{2}(?:\\.\\d+)?)(Z|(?:[+-]\\d{1,2}(?::(\\d{2}))?)))|Z)?$/,\n\n    /**\n     * APIMethod: toISOString\n     * Generates a string representing a date.  The format of the string follows\n     *     the profile of ISO 8601 for date and time on the Internet (see\n     *     http://tools.ietf.org/html/rfc3339).  If the toISOString method is\n     *     available on the Date prototype, that is used.  The toISOString\n     *     method for Date instances is defined in ECMA-262.\n     *\n     * Parameters:\n     * date - {Date} A date object.\n     *\n     * Returns:\n     * {String} A string representing the date (e.g.\n     *     \"2010-08-07T16:58:23.123Z\").  If the date does not have a valid time\n     *     (i.e. isNaN(date.getTime())) this method returns the string \"Invalid\n     *     Date\".  The ECMA standard says the toISOString method should throw\n     *     RangeError in this case, but Firefox returns a string instead.  For\n     *     best results, use isNaN(date.getTime()) to determine date validity\n     *     before generating date strings.\n     */\n    toISOString: (function() {\n        if (\"toISOString\" in Date.prototype) {\n            return function(date) {\n                return date.toISOString();\n            };\n        } else {\n            return function(date) {\n                var str;\n                if (isNaN(date.getTime())) {\n                    // ECMA-262 says throw RangeError, Firefox returns\n                    // \"Invalid Date\"\n                    str = \"Invalid Date\";\n                } else {\n                    str =\n                        date.getUTCFullYear() + \"-\" +\n                        OpenLayers.Number.zeroPad(date.getUTCMonth() + 1, 2) + \"-\" +\n                        OpenLayers.Number.zeroPad(date.getUTCDate(), 2) + \"T\" +\n                        OpenLayers.Number.zeroPad(date.getUTCHours(), 2) + \":\" +\n                        OpenLayers.Number.zeroPad(date.getUTCMinutes(), 2) + \":\" +\n                        OpenLayers.Number.zeroPad(date.getUTCSeconds(), 2) + \".\" +\n                        OpenLayers.Number.zeroPad(date.getUTCMilliseconds(), 3) + \"Z\";\n                }\n                return str;\n            };\n        }\n\n    })(),\n\n    /**\n     * APIMethod: parse\n     * Generate a date object from a string.  The format for the string follows\n     *     the profile of ISO 8601 for date and time on the Internet (see\n     *     http://tools.ietf.org/html/rfc3339).  We don't call the native\n     *     Date.parse because of inconsistency between implmentations.  In\n     *     Chrome, calling Date.parse with a string that doesn't contain any\n     *     indication of the timezone (e.g. \"2011\"), the date is interpreted\n     *     in local time.  On Firefox, the assumption is UTC.\n     *\n     * Parameters:\n     * str - {String} A string representing the date (e.g.\n     *     \"2010\", \"2010-08\", \"2010-08-07\", \"2010-08-07T16:58:23.123Z\",\n     *     \"2010-08-07T11:58:23.123-06\").\n     *\n     * Returns:\n     * {Date} A date object.  If the string could not be parsed, an invalid\n     *     date is returned (i.e. isNaN(date.getTime())).\n     */\n    parse: function(str) {\n        var date;\n        var match = str.match(this.dateRegEx);\n        if (match && (match[1] || match[7])) { // must have at least year or time\n            var year = parseInt(match[1], 10) || 0;\n            var month = (parseInt(match[2], 10) - 1) || 0;\n            var day = parseInt(match[3], 10) || 1;\n            date = new Date(Date.UTC(year, month, day));\n            // optional time\n            var type = match[7];\n            if (type) {\n                var hours = parseInt(match[4], 10);\n                var minutes = parseInt(match[5], 10);\n                var secFrac = parseFloat(match[6]);\n                var seconds = secFrac | 0;\n                var milliseconds = Math.round(1000 * (secFrac - seconds));\n                date.setUTCHours(hours, minutes, seconds, milliseconds);\n                // check offset\n                if (type !== \"Z\") {\n                    var hoursOffset = parseInt(type, 10);\n                    var minutesOffset = parseInt(match[8], 10) || 0;\n                    var offset = -1000 * (60 * (hoursOffset * 60) + minutesOffset * 60);\n                    date = new Date(date.getTime() + offset);\n                }\n            }\n        } else {\n            date = new Date(\"invalid\");\n        }\n        return date;\n    }\n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Util.js\n * @requires OpenLayers/BaseTypes.js\n */\n\n/**\n * Namespace: OpenLayers.Element\n */\nOpenLayers.Element = {\n\n    /**\n     * APIFunction: visible\n     * \n     * Parameters: \n     * element - {DOMElement}\n     * \n     * Returns:\n     * {Boolean} Is the element visible?\n     */\n    visible: function(element) {\n        return OpenLayers.Util.getElement(element).style.display != 'none';\n    },\n\n    /**\n     * APIFunction: toggle\n     * Toggle the visibility of element(s) passed in\n     * \n     * Parameters:\n     * element - {DOMElement} Actually user can pass any number of elements\n     */\n    toggle: function() {\n        for (var i=0, len=arguments.length; i<len; i++) {\n            var element = OpenLayers.Util.getElement(arguments[i]);\n            var display = OpenLayers.Element.visible(element) ? 'none' \n                                                              : '';\n            element.style.display = display;\n        }\n    },\n\n    /**\n     * APIFunction: remove\n     * Remove the specified element from the DOM.\n     * \n     * Parameters:\n     * element - {DOMElement}\n     */\n    remove: function(element) {\n        element = OpenLayers.Util.getElement(element);\n        element.parentNode.removeChild(element);\n    },\n\n    /**\n     * APIFunction: getHeight\n     *  \n     * Parameters:\n     * element - {DOMElement}\n     * \n     * Returns:\n     * {Integer} The offset height of the element passed in\n     */\n    getHeight: function(element) {\n        element = OpenLayers.Util.getElement(element);\n        return element.offsetHeight;\n    },\n\n    /**\n     * Function: hasClass\n     * Tests if an element has the given CSS class name.\n     *\n     * Parameters:\n     * element - {DOMElement} A DOM element node.\n     * name - {String} The CSS class name to search for.\n     *\n     * Returns:\n     * {Boolean} The element has the given class name.\n     */\n    hasClass: function(element, name) {\n        var names = element.className;\n        return (!!names && new RegExp(\"(^|\\\\s)\" + name + \"(\\\\s|$)\").test(names));\n    },\n    \n    /**\n     * Function: addClass\n     * Add a CSS class name to an element.  Safe where element already has\n     *     the class name.\n     *\n     * Parameters:\n     * element - {DOMElement} A DOM element node.\n     * name - {String} The CSS class name to add.\n     *\n     * Returns:\n     * {DOMElement} The element.\n     */\n    addClass: function(element, name) {\n        if(!OpenLayers.Element.hasClass(element, name)) {\n            element.className += (element.className ? \" \" : \"\") + name;\n        }\n        return element;\n    },\n\n    /**\n     * Function: removeClass\n     * Remove a CSS class name from an element.  Safe where element does not\n     *     have the class name.\n     *\n     * Parameters:\n     * element - {DOMElement} A DOM element node.\n     * name - {String} The CSS class name to remove.\n     *\n     * Returns:\n     * {DOMElement} The element.\n     */\n    removeClass: function(element, name) {\n        var names = element.className;\n        if(names) {\n            element.className = OpenLayers.String.trim(\n                names.replace(\n                    new RegExp(\"(^|\\\\s+)\" + name + \"(\\\\s+|$)\"), \" \"\n                )\n            );\n        }\n        return element;\n    },\n\n    /**\n     * Function: toggleClass\n     * Remove a CSS class name from an element if it exists.  Add the class name\n     *     if it doesn't exist.\n     *\n     * Parameters:\n     * element - {DOMElement} A DOM element node.\n     * name - {String} The CSS class name to toggle.\n     *\n     * Returns:\n     * {DOMElement} The element.\n     */\n    toggleClass: function(element, name) {\n        if(OpenLayers.Element.hasClass(element, name)) {\n            OpenLayers.Element.removeClass(element, name);\n        } else {\n            OpenLayers.Element.addClass(element, name);\n        }\n        return element;\n    },\n\n    /**\n     * APIFunction: getStyle\n     * \n     * Parameters:\n     * element - {DOMElement}\n     * style - {?}\n     * \n     * Returns:\n     * {?}\n     */\n    getStyle: function(element, style) {\n        element = OpenLayers.Util.getElement(element);\n\n        var value = null;\n        if (element && element.style) {\n            value = element.style[OpenLayers.String.camelize(style)];\n            if (!value) {\n                if (document.defaultView && \n                    document.defaultView.getComputedStyle) {\n                    \n                    var css = document.defaultView.getComputedStyle(element, null);\n                    value = css ? css.getPropertyValue(style) : null;\n                } else if (element.currentStyle) {\n                    value = element.currentStyle[OpenLayers.String.camelize(style)];\n                }\n            }\n        \n            var positions = ['left', 'top', 'right', 'bottom'];\n            if (window.opera &&\n                (OpenLayers.Util.indexOf(positions,style) != -1) &&\n                (OpenLayers.Element.getStyle(element, 'position') == 'static')) { \n                value = 'auto';\n            }\n        }\n    \n        return value == 'auto' ? null : value;\n    }\n\n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n */\n\n/**\n * Class: OpenLayers.LonLat\n * This class represents a longitude and latitude pair\n */\nOpenLayers.LonLat = OpenLayers.Class({\n\n    /** \n     * APIProperty: lon\n     * {Float} The x-axis coodinate in map units\n     */\n    lon: 0.0,\n    \n    /** \n     * APIProperty: lat\n     * {Float} The y-axis coordinate in map units\n     */\n    lat: 0.0,\n\n    /**\n     * Constructor: OpenLayers.LonLat\n     * Create a new map location. Coordinates can be passed either as two\n     * arguments, or as a single argument.\n     *\n     * Parameters (two arguments):\n     * lon - {Number} The x-axis coordinate in map units.  If your map is in\n     *     a geographic projection, this will be the Longitude.  Otherwise,\n     *     it will be the x coordinate of the map location in your map units.\n     * lat - {Number} The y-axis coordinate in map units.  If your map is in\n     *     a geographic projection, this will be the Latitude.  Otherwise,\n     *     it will be the y coordinate of the map location in your map units.\n     *\n     * Parameters (single argument):\n     * location - {Array(Float)} [lon, lat]\n     */\n    initialize: function(lon, lat) {\n        if (OpenLayers.Util.isArray(lon)) {\n            lat = lon[1];\n            lon = lon[0];\n        }\n        this.lon = OpenLayers.Util.toFloat(lon);\n        this.lat = OpenLayers.Util.toFloat(lat);\n    },\n    \n    /**\n     * Method: toString\n     * Return a readable string version of the lonlat\n     *\n     * Returns:\n     * {String} String representation of OpenLayers.LonLat object. \n     *           (e.g. <i>\"lon=5,lat=42\"</i>)\n     */\n    toString:function() {\n        return (\"lon=\" + this.lon + \",lat=\" + this.lat);\n    },\n\n    /** \n     * APIMethod: toShortString\n     * \n     * Returns:\n     * {String} Shortened String representation of OpenLayers.LonLat object. \n     *         (e.g. <i>\"5, 42\"</i>)\n     */\n    toShortString:function() {\n        return (this.lon + \", \" + this.lat);\n    },\n\n    /** \n     * APIMethod: clone\n     * \n     * Returns:\n     * {<OpenLayers.LonLat>} New OpenLayers.LonLat object with the same lon \n     *                       and lat values\n     */\n    clone:function() {\n        return new OpenLayers.LonLat(this.lon, this.lat);\n    },\n\n    /** \n     * APIMethod: add\n     * \n     * Parameters:\n     * lon - {Float}\n     * lat - {Float}\n     * \n     * Returns:\n     * {<OpenLayers.LonLat>} A new OpenLayers.LonLat object with the lon and \n     *                       lat passed-in added to this's. \n     */\n    add:function(lon, lat) {\n        if ( (lon == null) || (lat == null) ) {\n            throw new TypeError('LonLat.add cannot receive null values');\n        }\n        return new OpenLayers.LonLat(this.lon + OpenLayers.Util.toFloat(lon), \n                                     this.lat + OpenLayers.Util.toFloat(lat));\n    },\n\n    /** \n     * APIMethod: equals\n     * \n     * Parameters:\n     * ll - {<OpenLayers.LonLat>}\n     * \n     * Returns:\n     * {Boolean} Boolean value indicating whether the passed-in \n     *           <OpenLayers.LonLat> object has the same lon and lat \n     *           components as this.\n     *           Note: if ll passed in is null, returns false\n     */\n    equals:function(ll) {\n        var equals = false;\n        if (ll != null) {\n            equals = ((this.lon == ll.lon && this.lat == ll.lat) ||\n                      (isNaN(this.lon) && isNaN(this.lat) && isNaN(ll.lon) && isNaN(ll.lat)));\n        }\n        return equals;\n    },\n\n    /**\n     * APIMethod: transform\n     * Transform the LonLat object from source to dest. This transformation is\n     *    *in place*: if you want a *new* lonlat, use .clone() first.\n     *\n     * Parameters: \n     * source - {<OpenLayers.Projection>} Source projection. \n     * dest   - {<OpenLayers.Projection>} Destination projection. \n     *\n     * Returns:\n     * {<OpenLayers.LonLat>} Itself, for use in chaining operations.\n     */\n    transform: function(source, dest) {\n        var point = OpenLayers.Projection.transform(\n            {'x': this.lon, 'y': this.lat}, source, dest);\n        this.lon = point.x;\n        this.lat = point.y;\n        return this;\n    },\n    \n    /**\n     * APIMethod: wrapDateLine\n     * \n     * Parameters:\n     * maxExtent - {<OpenLayers.Bounds>}\n     * \n     * Returns:\n     * {<OpenLayers.LonLat>} A copy of this lonlat, but wrapped around the \n     *                       \"dateline\" (as specified by the borders of \n     *                       maxExtent)\n     */\n    wrapDateLine: function(maxExtent) {    \n\n        var newLonLat = this.clone();\n    \n        if (maxExtent) {\n            //shift right?\n            while (newLonLat.lon < maxExtent.left) {\n                newLonLat.lon +=  maxExtent.getWidth();\n            }    \n           \n            //shift left?\n            while (newLonLat.lon > maxExtent.right) {\n                newLonLat.lon -= maxExtent.getWidth();\n            }    \n        }\n                \n        return newLonLat;\n    },\n\n    CLASS_NAME: \"OpenLayers.LonLat\"\n});\n\n/** \n * Function: fromString\n * Alternative constructor that builds a new <OpenLayers.LonLat> from a \n *     parameter string\n * \n * Parameters:\n * str - {String} Comma-separated Lon,Lat coordinate string. \n *                 (e.g. <i>\"5,40\"</i>)\n * \n * Returns:\n * {<OpenLayers.LonLat>} New <OpenLayers.LonLat> object built from the \n *                       passed-in String.\n */\nOpenLayers.LonLat.fromString = function(str) {\n    var pair = str.split(\",\");\n    return new OpenLayers.LonLat(pair[0], pair[1]);\n};\n\n/** \n * Function: fromArray\n * Alternative constructor that builds a new <OpenLayers.LonLat> from an \n *     array of two numbers that represent lon- and lat-values.\n * \n * Parameters:\n * arr - {Array(Float)} Array of lon/lat values (e.g. [5,-42])\n * \n * Returns:\n * {<OpenLayers.LonLat>} New <OpenLayers.LonLat> object built from the \n *                       passed-in array.\n */\nOpenLayers.LonLat.fromArray = function(arr) {\n    var gotArr = OpenLayers.Util.isArray(arr),\n        lon = gotArr && arr[0],\n        lat = gotArr && arr[1];\n    return new OpenLayers.LonLat(lon, lat);\n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n */\n\n/**\n * Class: OpenLayers.Pixel\n * This class represents a screen coordinate, in x and y coordinates\n */\nOpenLayers.Pixel = OpenLayers.Class({\n    \n    /**\n     * APIProperty: x\n     * {Number} The x coordinate\n     */\n    x: 0.0,\n\n    /**\n     * APIProperty: y\n     * {Number} The y coordinate\n     */\n    y: 0.0,\n    \n    /**\n     * Constructor: OpenLayers.Pixel\n     * Create a new OpenLayers.Pixel instance\n     *\n     * Parameters:\n     * x - {Number} The x coordinate\n     * y - {Number} The y coordinate\n     *\n     * Returns:\n     * An instance of OpenLayers.Pixel\n     */\n    initialize: function(x, y) {\n        this.x = parseFloat(x);\n        this.y = parseFloat(y);\n    },\n    \n    /**\n     * Method: toString\n     * Cast this object into a string\n     *\n     * Returns:\n     * {String} The string representation of Pixel. ex: \"x=200.4,y=242.2\"\n     */\n    toString:function() {\n        return (\"x=\" + this.x + \",y=\" + this.y);\n    },\n\n    /**\n     * APIMethod: clone\n     * Return a clone of this pixel object\n     *\n     * Returns:\n     * {<OpenLayers.Pixel>} A clone pixel\n     */\n    clone:function() {\n        return new OpenLayers.Pixel(this.x, this.y); \n    },\n    \n    /**\n     * APIMethod: equals\n     * Determine whether one pixel is equivalent to another\n     *\n     * Parameters:\n     * px - {<OpenLayers.Pixel>|Object} An OpenLayers.Pixel or an object with\n     *                                  a 'x' and 'y' properties.\n     *\n     * Returns:\n     * {Boolean} The point passed in as parameter is equal to this. Note that\n     * if px passed in is null, returns false.\n     */\n    equals:function(px) {\n        var equals = false;\n        if (px != null) {\n            equals = ((this.x == px.x && this.y == px.y) ||\n                      (isNaN(this.x) && isNaN(this.y) && isNaN(px.x) && isNaN(px.y)));\n        }\n        return equals;\n    },\n\n    /**\n     * APIMethod: distanceTo\n     * Returns the distance to the pixel point passed in as a parameter.\n     *\n     * Parameters:\n     * px - {<OpenLayers.Pixel>}\n     *\n     * Returns:\n     * {Float} The pixel point passed in as parameter to calculate the\n     *     distance to.\n     */\n    distanceTo:function(px) {\n        return Math.sqrt(\n            Math.pow(this.x - px.x, 2) +\n            Math.pow(this.y - px.y, 2)\n        );\n    },\n\n    /**\n     * APIMethod: add\n     *\n     * Parameters:\n     * x - {Integer}\n     * y - {Integer}\n     *\n     * Returns:\n     * {<OpenLayers.Pixel>} A new Pixel with this pixel's x&y augmented by the \n     * values passed in.\n     */\n    add:function(x, y) {\n        if ( (x == null) || (y == null) ) {\n            throw new TypeError('Pixel.add cannot receive null values');\n        }\n        return new OpenLayers.Pixel(this.x + x, this.y + y);\n    },\n\n    /**\n    * APIMethod: offset\n    * \n    * Parameters\n    * px - {<OpenLayers.Pixel>|Object} An OpenLayers.Pixel or an object with\n    *                                  a 'x' and 'y' properties.\n    * \n    * Returns:\n    * {<OpenLayers.Pixel>} A new Pixel with this pixel's x&y augmented by the \n    *                      x&y values of the pixel passed in.\n    */\n    offset:function(px) {\n        var newPx = this.clone();\n        if (px) {\n            newPx = this.add(px.x, px.y);\n        }\n        return newPx;\n    },\n\n    CLASS_NAME: \"OpenLayers.Pixel\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n */\n\n/**\n * Class: OpenLayers.Size\n * Instances of this class represent a width/height pair\n */\nOpenLayers.Size = OpenLayers.Class({\n\n    /**\n     * APIProperty: w\n     * {Number} width\n     */\n    w: 0.0,\n    \n    /**\n     * APIProperty: h\n     * {Number} height\n     */\n    h: 0.0,\n\n\n    /**\n     * Constructor: OpenLayers.Size\n     * Create an instance of OpenLayers.Size\n     *\n     * Parameters:\n     * w - {Number} width\n     * h - {Number} height\n     */\n    initialize: function(w, h) {\n        this.w = parseFloat(w);\n        this.h = parseFloat(h);\n    },\n\n    /**\n     * Method: toString\n     * Return the string representation of a size object\n     *\n     * Returns:\n     * {String} The string representation of OpenLayers.Size object. \n     * (e.g. <i>\"w=55,h=66\"</i>)\n     */\n    toString:function() {\n        return (\"w=\" + this.w + \",h=\" + this.h);\n    },\n\n    /**\n     * APIMethod: clone\n     * Create a clone of this size object\n     *\n     * Returns:\n     * {<OpenLayers.Size>} A new OpenLayers.Size object with the same w and h\n     * values\n     */\n    clone:function() {\n        return new OpenLayers.Size(this.w, this.h);\n    },\n\n    /**\n     *\n     * APIMethod: equals\n     * Determine where this size is equal to another\n     *\n     * Parameters:\n     * sz - {<OpenLayers.Size>|Object} An OpenLayers.Size or an object with\n     *                                  a 'w' and 'h' properties.\n     *\n     * Returns: \n     * {Boolean} The passed in size has the same h and w properties as this one.\n     * Note that if sz passed in is null, returns false.\n     */\n    equals:function(sz) {\n        var equals = false;\n        if (sz != null) {\n            equals = ((this.w == sz.w && this.h == sz.h) ||\n                      (isNaN(this.w) && isNaN(this.h) && isNaN(sz.w) && isNaN(sz.h)));\n        }\n        return equals;\n    },\n\n    CLASS_NAME: \"OpenLayers.Size\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n */\n\n/**\n * Namespace: OpenLayers.Console\n * The OpenLayers.Console namespace is used for debugging and error logging.\n * If the Firebug Lite (../Firebug/firebug.js) is included before this script,\n * calls to OpenLayers.Console methods will get redirected to window.console.\n * This makes use of the Firebug extension where available and allows for\n * cross-browser debugging Firebug style.\n *\n * Note:\n * Note that behavior will differ with the Firebug extension and Firebug Lite.\n * Most notably, the Firebug Lite console does not currently allow for\n * hyperlinks to code or for clicking on object to explore their properties.\n * \n */\nOpenLayers.Console = {\n    /**\n     * Create empty functions for all console methods.  The real value of these\n     * properties will be set if Firebug Lite (../Firebug/firebug.js script) is\n     * included.  We explicitly require the Firebug Lite script to trigger\n     * functionality of the OpenLayers.Console methods.\n     */\n    \n    /**\n     * APIFunction: log\n     * Log an object in the console.  The Firebug Lite console logs string\n     * representation of objects.  Given multiple arguments, they will\n     * be cast to strings and logged with a space delimiter.  If the first\n     * argument is a string with printf-like formatting, subsequent arguments\n     * will be used in string substitution.  Any additional arguments (beyond\n     * the number substituted in a format string) will be appended in a space-\n     * delimited line.\n     * \n     * Parameters:\n     * object - {Object}\n     */\n    log: function() {},\n\n    /**\n     * APIFunction: debug\n     * Writes a message to the console, including a hyperlink to the line\n     * where it was called.\n     *\n     * May be called with multiple arguments as with OpenLayers.Console.log().\n     * \n     * Parameters:\n     * object - {Object}\n     */\n    debug: function() {},\n\n    /**\n     * APIFunction: info\n     * Writes a message to the console with the visual \"info\" icon and color\n     * coding and a hyperlink to the line where it was called.\n     *\n     * May be called with multiple arguments as with OpenLayers.Console.log().\n     * \n     * Parameters:\n     * object - {Object}\n     */\n    info: function() {},\n\n    /**\n     * APIFunction: warn\n     * Writes a message to the console with the visual \"warning\" icon and\n     * color coding and a hyperlink to the line where it was called.\n     *\n     * May be called with multiple arguments as with OpenLayers.Console.log().\n     * \n     * Parameters:\n     * object - {Object}\n     */\n    warn: function() {},\n\n    /**\n     * APIFunction: error\n     * Writes a message to the console with the visual \"error\" icon and color\n     * coding and a hyperlink to the line where it was called.\n     *\n     * May be called with multiple arguments as with OpenLayers.Console.log().\n     * \n     * Parameters:\n     * object - {Object}\n     */\n    error: function() {},\n    \n    /**\n     * APIFunction: userError\n     * A single interface for showing error messages to the user. The default\n     * behavior is a Javascript alert, though this can be overridden by\n     * reassigning OpenLayers.Console.userError to a different function.\n     *\n     * Expects a single error message\n     * \n     * Parameters:\n     * error - {Object}\n     */\n    userError: function(error) {\n        alert(error);\n    },\n\n    /**\n     * APIFunction: assert\n     * Tests that an expression is true. If not, it will write a message to\n     * the console and throw an exception.\n     *\n     * May be called with multiple arguments as with OpenLayers.Console.log().\n     * \n     * Parameters:\n     * object - {Object}\n     */\n    assert: function() {},\n\n    /**\n     * APIFunction: dir\n     * Prints an interactive listing of all properties of the object. This\n     * looks identical to the view that you would see in the DOM tab.\n     * \n     * Parameters:\n     * object - {Object}\n     */\n    dir: function() {},\n\n    /**\n     * APIFunction: dirxml\n     * Prints the XML source tree of an HTML or XML element. This looks\n     * identical to the view that you would see in the HTML tab. You can click\n     * on any node to inspect it in the HTML tab.\n     * \n     * Parameters:\n     * object - {Object}\n     */\n    dirxml: function() {},\n\n    /**\n     * APIFunction: trace\n     * Prints an interactive stack trace of JavaScript execution at the point\n     * where it is called.  The stack trace details the functions on the stack,\n     * as well as the values that were passed as arguments to each function.\n     * You can click each function to take you to its source in the Script tab,\n     * and click each argument value to inspect it in the DOM or HTML tabs.\n     * \n     */\n    trace: function() {},\n\n    /**\n     * APIFunction: group\n     * Writes a message to the console and opens a nested block to indent all\n     * future messages sent to the console. Call OpenLayers.Console.groupEnd()\n     * to close the block.\n     *\n     * May be called with multiple arguments as with OpenLayers.Console.log().\n     * \n     * Parameters:\n     * object - {Object}\n     */\n    group: function() {},\n\n    /**\n     * APIFunction: groupEnd\n     * Closes the most recently opened block created by a call to\n     * OpenLayers.Console.group\n     */\n    groupEnd: function() {},\n    \n    /**\n     * APIFunction: time\n     * Creates a new timer under the given name. Call\n     * OpenLayers.Console.timeEnd(name)\n     * with the same name to stop the timer and print the time elapsed.\n     *\n     * Parameters:\n     * name - {String}\n     */\n    time: function() {},\n\n    /**\n     * APIFunction: timeEnd\n     * Stops a timer created by a call to OpenLayers.Console.time(name) and\n     * writes the time elapsed.\n     *\n     * Parameters:\n     * name - {String}\n     */\n    timeEnd: function() {},\n\n    /**\n     * APIFunction: profile\n     * Turns on the JavaScript profiler. The optional argument title would\n     * contain the text to be printed in the header of the profile report.\n     *\n     * This function is not currently implemented in Firebug Lite.\n     * \n     * Parameters:\n     * title - {String} Optional title for the profiler\n     */\n    profile: function() {},\n\n    /**\n     * APIFunction: profileEnd\n     * Turns off the JavaScript profiler and prints its report.\n     * \n     * This function is not currently implemented in Firebug Lite.\n     */\n    profileEnd: function() {},\n\n    /**\n     * APIFunction: count\n     * Writes the number of times that the line of code where count was called\n     * was executed. The optional argument title will print a message in\n     * addition to the number of the count.\n     *\n     * This function is not currently implemented in Firebug Lite.\n     *\n     * Parameters:\n     * title - {String} Optional title to be printed with count\n     */\n    count: function() {},\n\n    CLASS_NAME: \"OpenLayers.Console\"\n};\n\n/**\n * Execute an anonymous function to extend the OpenLayers.Console namespace\n * if the firebug.js script is included.  This closure is used so that the\n * \"scripts\" and \"i\" variables don't pollute the global namespace.\n */\n(function() {\n    /**\n     * If Firebug Lite is included (before this script), re-route all\n     * OpenLayers.Console calls to the console object.\n     */\n    var scripts = document.getElementsByTagName(\"script\");\n    for(var i=0, len=scripts.length; i<len; ++i) {\n        if(scripts[i].src.indexOf(\"firebug.js\") != -1) {\n            if(console) {\n                OpenLayers.Util.extend(OpenLayers.Console, console);\n                break;\n            }\n        }\n    }\n})();\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Animation.js\n */\n\n/**\n * Namespace: OpenLayers.Tween\n */\nOpenLayers.Tween = OpenLayers.Class({\n    \n    /**\n     * APIProperty: easing\n     * {<OpenLayers.Easing>(Function)} Easing equation used for the animation\n     *     Defaultly set to OpenLayers.Easing.Expo.easeOut\n     */\n    easing: null,\n    \n    /**\n     * APIProperty: begin\n     * {Object} Values to start the animation with\n     */\n    begin: null,\n    \n    /**\n     * APIProperty: finish\n     * {Object} Values to finish the animation with\n     */\n    finish: null,\n    \n    /**\n     * APIProperty: duration\n     * {int} duration of the tween (number of steps)\n     */\n    duration: null,\n    \n    /**\n     * APIProperty: callbacks\n     * {Object} An object with start, eachStep and done properties whose values\n     *     are functions to be call during the animation. They are passed the\n     *     current computed value as argument.\n     */\n    callbacks: null,\n    \n    /**\n     * Property: time\n     * {int} Step counter\n     */\n    time: null,\n    \n    /**\n     * APIProperty: minFrameRate\n     * {Number} The minimum framerate for animations in frames per second. After\n     * each step, the time spent in the animation is compared to the calculated\n     * time at this frame rate. If the animation runs longer than the calculated\n     * time, the next step is skipped. Default is 30.\n     */\n    minFrameRate: null,\n\n    /**\n     * Property: startTime\n     * {Number} The timestamp of the first execution step. Used for skipping\n     * frames\n     */\n    startTime: null,\n    \n    /**\n     * Property: animationId\n     * {int} Loop id returned by OpenLayers.Animation.start\n     */\n    animationId: null,\n    \n    /**\n     * Property: playing\n     * {Boolean} Tells if the easing is currently playing\n     */\n    playing: false,\n    \n    /** \n     * Constructor: OpenLayers.Tween\n     * Creates a Tween.\n     *\n     * Parameters:\n     * easing - {<OpenLayers.Easing>(Function)} easing function method to use\n     */ \n    initialize: function(easing) {\n        this.easing = (easing) ? easing : OpenLayers.Easing.Expo.easeOut;\n    },\n    \n    /**\n     * APIMethod: start\n     * Plays the Tween, and calls the callback method on each step\n     * \n     * Parameters:\n     * begin - {Object} values to start the animation with\n     * finish - {Object} values to finish the animation with\n     * duration - {int} duration of the tween (number of steps)\n     * options - {Object} hash of options (callbacks (start, eachStep, done),\n     *     minFrameRate)\n     */\n    start: function(begin, finish, duration, options) {\n        this.playing = true;\n        this.begin = begin;\n        this.finish = finish;\n        this.duration = duration;\n        this.callbacks = options.callbacks;\n        this.minFrameRate = options.minFrameRate || 30;\n        this.time = 0;\n        this.startTime = new Date().getTime();\n        OpenLayers.Animation.stop(this.animationId);\n        this.animationId = null;\n        if (this.callbacks && this.callbacks.start) {\n            this.callbacks.start.call(this, this.begin);\n        }\n        this.animationId = OpenLayers.Animation.start(\n            OpenLayers.Function.bind(this.play, this)\n        );\n    },\n    \n    /**\n     * APIMethod: stop\n     * Stops the Tween, and calls the done callback\n     *     Doesn't do anything if animation is already finished\n     */\n    stop: function() {\n        if (!this.playing) {\n            return;\n        }\n        \n        if (this.callbacks && this.callbacks.done) {\n            this.callbacks.done.call(this, this.finish);\n        }\n        OpenLayers.Animation.stop(this.animationId);\n        this.animationId = null;\n        this.playing = false;\n    },\n    \n    /**\n     * Method: play\n     * Calls the appropriate easing method\n     */\n    play: function() {\n        var value = {};\n        for (var i in this.begin) {\n            var b = this.begin[i];\n            var f = this.finish[i];\n            if (b == null || f == null || isNaN(b) || isNaN(f)) {\n                throw new TypeError('invalid value for Tween');\n            }\n\n            var c = f - b;\n            value[i] = this.easing.apply(this, [this.time, b, c, this.duration]);\n        }\n        this.time++;\n        \n        if (this.callbacks && this.callbacks.eachStep) {\n            // skip frames if frame rate drops below threshold\n            if ((new Date().getTime() - this.startTime) / this.time <= 1000 / this.minFrameRate) {\n                this.callbacks.eachStep.call(this, value);\n            }\n        }\n        \n        if (this.time > this.duration) {\n            this.stop();\n        }\n    },\n    \n    /**\n     * Create empty functions for all easing methods.\n     */\n    CLASS_NAME: \"OpenLayers.Tween\"\n});\n\n/**\n * Namespace: OpenLayers.Easing\n * \n * Credits:\n *      Easing Equations by Robert Penner, <http://www.robertpenner.com/easing/>\n */\nOpenLayers.Easing = {\n    /**\n     * Create empty functions for all easing methods.\n     */\n    CLASS_NAME: \"OpenLayers.Easing\"\n};\n\n/**\n * Namespace: OpenLayers.Easing.Linear\n */\nOpenLayers.Easing.Linear = {\n    \n    /**\n     * Function: easeIn\n     * \n     * Parameters:\n     * t - {Float} time\n     * b - {Float} beginning position\n     * c - {Float} total change\n     * d - {Float} duration of the transition\n     *\n     * Returns:\n     * {Float}\n     */\n    easeIn: function(t, b, c, d) {\n        return c*t/d + b;\n    },\n    \n    /**\n     * Function: easeOut\n     * \n     * Parameters:\n     * t - {Float} time\n     * b - {Float} beginning position\n     * c - {Float} total change\n     * d - {Float} duration of the transition\n     *\n     * Returns:\n     * {Float}\n     */\n    easeOut: function(t, b, c, d) {\n        return c*t/d + b;\n    },\n    \n    /**\n     * Function: easeInOut\n     * \n     * Parameters:\n     * t - {Float} time\n     * b - {Float} beginning position\n     * c - {Float} total change\n     * d - {Float} duration of the transition\n     *\n     * Returns:\n     * {Float}\n     */\n    easeInOut: function(t, b, c, d) {\n        return c*t/d + b;\n    },\n\n    CLASS_NAME: \"OpenLayers.Easing.Linear\"\n};\n\n/**\n * Namespace: OpenLayers.Easing.Expo\n */\nOpenLayers.Easing.Expo = {\n    \n    /**\n     * Function: easeIn\n     * \n     * Parameters:\n     * t - {Float} time\n     * b - {Float} beginning position\n     * c - {Float} total change\n     * d - {Float} duration of the transition\n     *\n     * Returns:\n     * {Float}\n     */\n    easeIn: function(t, b, c, d) {\n        return (t==0) ? b : c * Math.pow(2, 10 * (t/d - 1)) + b;\n    },\n    \n    /**\n     * Function: easeOut\n     * \n     * Parameters:\n     * t - {Float} time\n     * b - {Float} beginning position\n     * c - {Float} total change\n     * d - {Float} duration of the transition\n     *\n     * Returns:\n     * {Float}\n     */\n    easeOut: function(t, b, c, d) {\n        return (t==d) ? b+c : c * (-Math.pow(2, -10 * t/d) + 1) + b;\n    },\n    \n    /**\n     * Function: easeInOut\n     * \n     * Parameters:\n     * t - {Float} time\n     * b - {Float} beginning position\n     * c - {Float} total change\n     * d - {Float} duration of the transition\n     *\n     * Returns:\n     * {Float}\n     */\n    easeInOut: function(t, b, c, d) {\n        if (t==0) return b;\n        if (t==d) return b+c;\n        if ((t/=d/2) < 1) return c/2 * Math.pow(2, 10 * (t - 1)) + b;\n        return c/2 * (-Math.pow(2, -10 * --t) + 2) + b;\n    },\n\n    CLASS_NAME: \"OpenLayers.Easing.Expo\"\n};\n\n/**\n * Namespace: OpenLayers.Easing.Quad\n */\nOpenLayers.Easing.Quad = {\n    \n    /**\n     * Function: easeIn\n     * \n     * Parameters:\n     * t - {Float} time\n     * b - {Float} beginning position\n     * c - {Float} total change\n     * d - {Float} duration of the transition\n     *\n     * Returns:\n     * {Float}\n     */\n    easeIn: function(t, b, c, d) {\n        return c*(t/=d)*t + b;\n    },\n    \n    /**\n     * Function: easeOut\n     * \n     * Parameters:\n     * t - {Float} time\n     * b - {Float} beginning position\n     * c - {Float} total change\n     * d - {Float} duration of the transition\n     *\n     * Returns:\n     * {Float}\n     */\n    easeOut: function(t, b, c, d) {\n        return -c *(t/=d)*(t-2) + b;\n    },\n    \n    /**\n     * Function: easeInOut\n     * \n     * Parameters:\n     * t - {Float} time\n     * b - {Float} beginning position\n     * c - {Float} total change\n     * d - {Float} duration of the transition\n     *\n     * Returns:\n     * {Float}\n     */\n    easeInOut: function(t, b, c, d) {\n        if ((t/=d/2) < 1) return c/2*t*t + b;\n        return -c/2 * ((--t)*(t-2) - 1) + b;\n    },\n\n    CLASS_NAME: \"OpenLayers.Easing.Quad\"\n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Animation.js\n */\n\nOpenLayers.Kinetic = OpenLayers.Class({\n\n    /**\n     * Property: threshold\n     * In most cases changing the threshold isn't needed.\n     * In px/ms, default to 0.\n     */\n    threshold: 0,\n\n    /**\n     * Property: deceleration\n     * {Float} the deseleration in px/ms\u00B2, default to 0.0035.\n     */\n    deceleration: 0.0035,\n\n    /**\n     * Property: nbPoints\n     * {Integer} the number of points we use to calculate the kinetic\n     * initial values.\n     */\n    nbPoints: 100,\n\n    /**\n     * Property: delay\n     * {Float} time to consider to calculate the kinetic initial values.\n     * In ms, default to 200.\n     */\n    delay: 200,\n\n    /**\n     * Property: points\n     * List of points use to calculate the kinetic initial values.\n     */\n    points: undefined,\n\n    /**\n     * Property: timerId\n     * ID of the timer.\n     */\n    timerId: undefined,\n\n    /**\n     * Constructor: OpenLayers.Kinetic\n     *\n     * Parameters:\n     * options - {Object}\n     */\n    initialize: function(options) {\n        OpenLayers.Util.extend(this, options);\n    },\n\n    /**\n     * Method: begin\n     * Begins the dragging.\n     */\n    begin: function() {\n        OpenLayers.Animation.stop(this.timerId);\n        this.timerId = undefined;\n        this.points = [];\n    },\n\n    /**\n     * Method: update\n     * Updates during the dragging.\n     *\n     * Parameters:\n     * xy - {<OpenLayers.Pixel>} The new position.\n     */\n    update: function(xy) {\n        this.points.unshift({xy: xy, tick: new Date().getTime()});\n        if (this.points.length > this.nbPoints) {\n            this.points.pop();\n        }\n    },\n\n    /**\n     * Method: end\n     * Ends the dragging, start the kinetic.\n     *\n     * Parameters:\n     * xy - {<OpenLayers.Pixel>} The last position.\n     *\n     * Returns:\n     * {Object} An object with two properties: \"speed\", and \"theta\". The\n     *     \"speed\" and \"theta\" values are to be passed to the move \n     *     function when starting the animation.\n     */\n    end: function(xy) {\n        var last, now = new Date().getTime();\n        for (var i = 0, l = this.points.length, point; i < l; i++) {\n            point = this.points[i];\n            if (now - point.tick > this.delay) {\n                break;\n            }\n            last = point;\n        }\n        if (!last) {\n            return;\n        }\n        var time = new Date().getTime() - last.tick;\n        var dist = Math.sqrt(Math.pow(xy.x - last.xy.x, 2) +\n                             Math.pow(xy.y - last.xy.y, 2));\n        var speed = dist / time;\n        if (speed == 0 || speed < this.threshold) {\n            return;\n        }\n        var theta = Math.asin((xy.y - last.xy.y) / dist);\n        if (last.xy.x <= xy.x) {\n            theta = Math.PI - theta;\n        }\n        return {speed: speed, theta: theta};\n    },\n\n    /**\n     * Method: move\n     * Launch the kinetic move pan.\n     *\n     * Parameters:\n     * info - {Object} An object with two properties, \"speed\", and \"theta\".\n     *     These values are those returned from the \"end\" call.\n     * callback - {Function} Function called on every step of the animation,\n     *     receives x, y (values to pan), end (is the last point).\n     */\n    move: function(info, callback) {\n        var v0 = info.speed;\n        var fx = Math.cos(info.theta);\n        var fy = -Math.sin(info.theta);\n\n        var initialTime = new Date().getTime();\n\n        var lastX = 0;\n        var lastY = 0;\n\n        var timerCallback = function() {\n            if (this.timerId == null) {\n                return;\n            }\n\n            var t = new Date().getTime() - initialTime;\n\n            var p = (-this.deceleration * Math.pow(t, 2)) / 2.0 + v0 * t;\n            var x = p * fx;\n            var y = p * fy;\n\n            var args = {};\n            args.end = false;\n            var v = -this.deceleration * t + v0;\n\n            if (v <= 0) {\n                OpenLayers.Animation.stop(this.timerId);\n                this.timerId = null;\n                args.end = true;\n            }\n\n            args.x = x - lastX;\n            args.y = y - lastY;\n            lastX = x;\n            lastY = y;\n            callback(args.x, args.y, args.end);\n        };\n\n        this.timerId = OpenLayers.Animation.start(\n            OpenLayers.Function.bind(timerCallback, this)\n        );\n    },\n\n    CLASS_NAME: \"OpenLayers.Kinetic\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Util.js\n */\n\n/**\n * Namespace: OpenLayers.Event\n * Utility functions for event handling.\n */\nOpenLayers.Event = {\n\n    /** \n     * Property: observers \n     * {Object} A hashtable cache of the event observers. Keyed by\n     * element._eventCacheID \n     */\n    observers: false,\n\n    /**\n     * Constant: KEY_SPACE\n     * {int}\n     */\n    KEY_SPACE: 32,\n    \n    /** \n     * Constant: KEY_BACKSPACE \n     * {int} \n     */\n    KEY_BACKSPACE: 8,\n\n    /** \n     * Constant: KEY_TAB \n     * {int} \n     */\n    KEY_TAB: 9,\n\n    /** \n     * Constant: KEY_RETURN \n     * {int} \n     */\n    KEY_RETURN: 13,\n\n    /** \n     * Constant: KEY_ESC \n     * {int} \n     */\n    KEY_ESC: 27,\n\n    /** \n     * Constant: KEY_LEFT \n     * {int} \n     */\n    KEY_LEFT: 37,\n\n    /** \n     * Constant: KEY_UP \n     * {int} \n     */\n    KEY_UP: 38,\n\n    /** \n     * Constant: KEY_RIGHT \n     * {int} \n     */\n    KEY_RIGHT: 39,\n\n    /** \n     * Constant: KEY_DOWN \n     * {int} \n     */\n    KEY_DOWN: 40,\n\n    /** \n     * Constant: KEY_DELETE \n     * {int} \n     */\n    KEY_DELETE: 46,\n\n\n    /**\n     * Method: element\n     * Cross browser event element detection.\n     * \n     * Parameters:\n     * event - {Event} \n     * \n     * Returns:\n     * {DOMElement} The element that caused the event \n     */\n    element: function(event) {\n        return event.target || event.srcElement;\n    },\n\n    /**\n     * Method: isSingleTouch\n     * Determine whether event was caused by a single touch\n     *\n     * Parameters:\n     * event - {Event}\n     *\n     * Returns:\n     * {Boolean}\n     */\n    isSingleTouch: function(event) {\n        return event.touches && event.touches.length == 1;\n    },\n\n    /**\n     * Method: isMultiTouch\n     * Determine whether event was caused by a multi touch\n     *\n     * Parameters:\n     * event - {Event}\n     *\n     * Returns:\n     * {Boolean}\n     */\n    isMultiTouch: function(event) {\n        return event.touches && event.touches.length > 1;\n    },\n\n    /**\n     * Method: isTouchEvent\n     * Determine whether the event was triggered by a touch\n     * \n     * Parameters:\n     * evt - {Event}\n     * \n     * Returns:\n     * {Boolean}\n     */\n    isTouchEvent: function(evt) {\n        return (\"\" + evt.type).indexOf(\"touch\") === 0 || (\n                \"pointerType\" in evt && (\n                     evt.pointerType === evt.MSPOINTER_TYPE_TOUCH /*IE10 pointer*/ ||\n                     evt.pointerType === \"touch\" /*W3C pointer*/));\n    },\n\n    /**\n     * Method: isLeftClick\n     * Determine whether event was caused by a left click. \n     *\n     * Parameters:\n     * event - {Event} \n     * \n     * Returns:\n     * {Boolean}\n     */\n    isLeftClick: function(event) {\n        return (((event.which) && (event.which == 1)) ||\n                ((event.button) && (event.button == 1)));\n    },\n\n    /**\n     * Method: isRightClick\n     * Determine whether event was caused by a right mouse click. \n     *\n     * Parameters:\n     * event - {Event} \n     * \n     * Returns:\n     * {Boolean}\n     */\n     isRightClick: function(event) {\n        return (((event.which) && (event.which == 3)) ||\n                ((event.button) && (event.button == 2)));\n    },\n     \n    /**\n     * Method: stop\n     * Stops an event from propagating. \n     *\n     * Parameters: \n     * event - {Event} \n     * allowDefault - {Boolean} If true, we stop the event chain but \n     *     still allow the default browser behaviour (text selection,\n     *     radio-button clicking, etc).  Default is false.\n     */\n    stop: function(event, allowDefault) {\n        \n        if (!allowDefault) { \n            OpenLayers.Event.preventDefault(event);\n        }\n                \n        if (event.stopPropagation) {\n            event.stopPropagation();\n        } else {\n            event.cancelBubble = true;\n        }\n    },\n\n    /**\n     * Method: preventDefault\n     * Cancels the event if it is cancelable, without stopping further\n     * propagation of the event.\n     *\n     * Parameters:\n     * event - {Event}\n     */\n    preventDefault: function(event) {\n        if (event.preventDefault) {\n            event.preventDefault();\n        } else {\n            event.returnValue = false;\n        }\n    },\n\n    /** \n     * Method: findElement\n     * \n     * Parameters:\n     * event - {Event} \n     * tagName - {String} \n     * \n     * Returns:\n     * {DOMElement} The first node with the given tagName, starting from the\n     * node the event was triggered on and traversing the DOM upwards\n     */\n    findElement: function(event, tagName) {\n        var element = OpenLayers.Event.element(event);\n        while (element.parentNode && (!element.tagName ||\n              (element.tagName.toUpperCase() != tagName.toUpperCase()))){\n            element = element.parentNode;\n        }\n        return element;\n    },\n\n    /** \n     * Method: observe\n     * \n     * Parameters:\n     * elementParam - {DOMElement || String} \n     * name - {String} \n     * observer - {function} \n     * useCapture - {Boolean} \n     */\n    observe: function(elementParam, name, observer, useCapture) {\n        var element = OpenLayers.Util.getElement(elementParam);\n        useCapture = useCapture || false;\n\n        if (name == 'keypress' &&\n           (navigator.appVersion.match(/Konqueror|Safari|KHTML/)\n           || element.attachEvent)) {\n            name = 'keydown';\n        }\n\n        //if observers cache has not yet been created, create it\n        if (!this.observers) {\n            this.observers = {};\n        }\n\n        //if not already assigned, make a new unique cache ID\n        if (!element._eventCacheID) {\n            var idPrefix = \"eventCacheID_\";\n            if (element.id) {\n                idPrefix = element.id + \"_\" + idPrefix;\n            }\n            element._eventCacheID = OpenLayers.Util.createUniqueID(idPrefix);\n        }\n\n        var cacheID = element._eventCacheID;\n\n        //if there is not yet a hash entry for this element, add one\n        if (!this.observers[cacheID]) {\n            this.observers[cacheID] = [];\n        }\n\n        //add a new observer to this element's list\n        this.observers[cacheID].push({\n            'element': element,\n            'name': name,\n            'observer': observer,\n            'useCapture': useCapture\n        });\n\n        //add the actual browser event listener\n        if (element.addEventListener) {\n            element.addEventListener(name, observer, useCapture);\n        } else if (element.attachEvent) {\n            element.attachEvent('on' + name, observer);\n        }\n    },\n\n    /** \n     * Method: stopObservingElement\n     * Given the id of an element to stop observing, cycle through the \n     *   element's cached observers, calling stopObserving on each one, \n     *   skipping those entries which can no longer be removed.\n     * \n     * parameters:\n     * elementParam - {DOMElement || String} \n     */\n    stopObservingElement: function(elementParam) {\n        var element = OpenLayers.Util.getElement(elementParam);\n        var cacheID = element._eventCacheID;\n\n        this._removeElementObservers(OpenLayers.Event.observers[cacheID]);\n    },\n\n    /**\n     * Method: _removeElementObservers\n     *\n     * Parameters:\n     * elementObservers - {Array(Object)} Array of (element, name, \n     *                                         observer, usecapture) objects, \n     *                                         taken directly from hashtable\n     */\n    _removeElementObservers: function(elementObservers) {\n        if (elementObservers) {\n            for(var i = elementObservers.length-1; i >= 0; i--) {\n                var entry = elementObservers[i];\n                OpenLayers.Event.stopObserving.apply(this, [\n                    entry.element, entry.name, entry.observer, entry.useCapture\n                ]);\n            }\n        }\n    },\n\n    /**\n     * Method: stopObserving\n     * \n     * Parameters:\n     * elementParam - {DOMElement || String} \n     * name - {String} \n     * observer - {function} \n     * useCapture - {Boolean} \n     *  \n     * Returns:\n     * {Boolean} Whether or not the event observer was removed\n     */\n    stopObserving: function(elementParam, name, observer, useCapture) {\n        useCapture = useCapture || false;\n    \n        var element = OpenLayers.Util.getElement(elementParam);\n        var cacheID = element._eventCacheID;\n\n        if (name == 'keypress') {\n            if ( navigator.appVersion.match(/Konqueror|Safari|KHTML/) || \n                 element.detachEvent) {\n              name = 'keydown';\n            }\n        }\n\n        // find element's entry in this.observers cache and remove it\n        var foundEntry = false;\n        var elementObservers = OpenLayers.Event.observers[cacheID];\n        if (elementObservers) {\n    \n            // find the specific event type in the element's list\n            var i=0;\n            while(!foundEntry && i < elementObservers.length) {\n                var cacheEntry = elementObservers[i];\n    \n                if ((cacheEntry.name == name) &&\n                    (cacheEntry.observer == observer) &&\n                    (cacheEntry.useCapture == useCapture)) {\n    \n                    elementObservers.splice(i, 1);\n                    if (elementObservers.length == 0) {\n                        delete OpenLayers.Event.observers[cacheID];\n                    }\n                    foundEntry = true;\n                    break; \n                }\n                i++;           \n            }\n        }\n    \n        //actually remove the event listener from browser\n        if (foundEntry) {\n            if (element.removeEventListener) {\n                element.removeEventListener(name, observer, useCapture);\n            } else if (element && element.detachEvent) {\n                element.detachEvent('on' + name, observer);\n            }\n        }\n        return foundEntry;\n    },\n    \n    /** \n     * Method: unloadCache\n     * Cycle through all the element entries in the events cache and call\n     *   stopObservingElement on each. \n     */\n    unloadCache: function() {\n        // check for OpenLayers.Event before checking for observers, because\n        // OpenLayers.Event may be undefined in IE if no map instance was\n        // created\n        if (OpenLayers.Event && OpenLayers.Event.observers) {\n            for (var cacheID in OpenLayers.Event.observers) {\n                var elementObservers = OpenLayers.Event.observers[cacheID];\n                OpenLayers.Event._removeElementObservers.apply(this, \n                                                           [elementObservers]);\n            }\n            OpenLayers.Event.observers = false;\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Event\"\n};\n\n/* prevent memory leaks in IE */\nOpenLayers.Event.observe(window, 'unload', OpenLayers.Event.unloadCache, false);\n\n/**\n * Class: OpenLayers.Events\n */\nOpenLayers.Events = OpenLayers.Class({\n\n    /** \n     * Constant: BROWSER_EVENTS\n     * {Array(String)} supported events \n     */\n    BROWSER_EVENTS: [\n        \"mouseover\", \"mouseout\",\n        \"mousedown\", \"mouseup\", \"mousemove\", \n        \"click\", \"dblclick\", \"rightclick\", \"dblrightclick\",\n        \"resize\", \"focus\", \"blur\",\n        \"touchstart\", \"touchmove\", \"touchend\",\n        \"keydown\"\n    ],\n    \n    /**\n     * Constant: standard pointer model\n     * {string}\n     */\n    TOUCH_MODEL_POINTER: \"pointer\",\n\n    /**\n     * Constant: prefixed pointer model (IE10)\n     * {string}\n     */\n    TOUCH_MODEL_MSPOINTER: \"MSPointer\",\n\n    /**\n     * Constant: legacy touch model\n     * {string}\n     */\n    TOUCH_MODEL_TOUCH: \"touch\",\n\n    /** \n     * Property: listeners \n     * {Object} Hashtable of Array(Function): events listener functions  \n     */\n    listeners: null,\n\n    /** \n     * Property: object \n     * {Object}  the code object issuing application events \n     */\n    object: null,\n\n    /** \n     * Property: element \n     * {DOMElement}  the DOM element receiving browser events \n     */\n    element: null,\n\n    /** \n     * Property: eventHandler \n     * {Function}  bound event handler attached to elements \n     */\n    eventHandler: null,\n\n    /** \n     * APIProperty: fallThrough \n     * {Boolean} \n     */\n    fallThrough: null,\n\n    /** \n     * APIProperty: includeXY\n     * {Boolean} Should the .xy property automatically be created for browser\n     *    mouse events? In general, this should be false. If it is true, then\n     *    mouse events will automatically generate a '.xy' property on the \n     *    event object that is passed. (Prior to OpenLayers 2.7, this was true\n     *    by default.) Otherwise, you can call the getMousePosition on the\n     *    relevant events handler on the object available via the 'evt.object'\n     *    property of the evt object. So, for most events, you can call:\n     *    function named(evt) { \n     *        this.xy = this.object.events.getMousePosition(evt) \n     *    } \n     *\n     *    This option typically defaults to false for performance reasons:\n     *    when creating an events object whose primary purpose is to manage\n     *    relatively positioned mouse events within a div, it may make\n     *    sense to set it to true.\n     *\n     *    This option is also used to control whether the events object caches\n     *    offsets. If this is false, it will not: the reason for this is that\n     *    it is only expected to be called many times if the includeXY property\n     *    is set to true. If you set this to true, you are expected to clear \n     *    the offset cache manually (using this.clearMouseCache()) if:\n     *        the border of the element changes\n     *        the location of the element in the page changes\n    */\n    includeXY: false,      \n    \n    /**\n     * APIProperty: extensions\n     * {Object} Event extensions registered with this instance. Keys are\n     *     event types, values are {OpenLayers.Events.*} extension instances or\n     *     {Boolean} for events that an instantiated extension provides in\n     *     addition to the one it was created for.\n     *\n     * Extensions create an event in addition to browser events, which usually\n     * fires when a sequence of browser events is completed. Extensions are\n     * automatically instantiated when a listener is registered for an event\n     * provided by an extension.\n     *\n     * Extensions are created in the <OpenLayers.Events> namespace using\n     * <OpenLayers.Class>, and named after the event they provide.\n     * The constructor receives the target <OpenLayers.Events> instance as\n     * argument. Extensions that need to capture browser events before they\n     * propagate can register their listeners events using <register>, with\n     * {extension: true} as 4th argument.\n     *\n     * If an extension creates more than one event, an alias for each event\n     * type should be created and reference the same class. The constructor\n     * should set a reference in the target's extensions registry to itself.\n     *\n     * Below is a minimal extension that provides the \"foostart\" and \"fooend\"\n     * event types, which replace the native \"click\" event type if clicked on\n     * an element with the css class \"foo\":\n     *\n     * (code)\n     *   OpenLayers.Events.foostart = OpenLayers.Class({\n     *       initialize: function(target) {\n     *           this.target = target;\n     *           this.target.register(\"click\", this, this.doStuff, {extension: true});\n     *           // only required if extension provides more than one event type\n     *           this.target.extensions[\"foostart\"] = true;\n     *           this.target.extensions[\"fooend\"] = true;\n     *       },\n     *       destroy: function() {\n     *           var target = this.target;\n     *           target.unregister(\"click\", this, this.doStuff);\n     *           delete this.target;\n     *           // only required if extension provides more than one event type\n     *           delete target.extensions[\"foostart\"];\n     *           delete target.extensions[\"fooend\"];\n     *       },\n     *       doStuff: function(evt) {\n     *           var propagate = true;\n     *           if (OpenLayers.Event.element(evt).className === \"foo\") {\n     *               propagate = false;\n     *               var target = this.target;\n     *               target.triggerEvent(\"foostart\");\n     *               window.setTimeout(function() {\n     *                   target.triggerEvent(\"fooend\");\n     *               }, 1000);\n     *           }\n     *           return propagate;\n     *       }\n     *   });\n     *   // only required if extension provides more than one event type\n     *   OpenLayers.Events.fooend = OpenLayers.Events.foostart;\n     * (end)\n     * \n     */\n    extensions: null,\n    \n    /**\n     * Property: extensionCount\n     * {Object} Keys are event types (like in <listeners>), values are the\n     *     number of extension listeners for each event type.\n     */\n    extensionCount: null,\n\n    /**\n     * Method: clearMouseListener\n     * A version of <clearMouseCache> that is bound to this instance so that\n     *     it can be used with <OpenLayers.Event.observe> and\n     *     <OpenLayers.Event.stopObserving>.\n     */\n    clearMouseListener: null,\n\n    /**\n     * Constructor: OpenLayers.Events\n     * Construct an OpenLayers.Events object.\n     *\n     * Parameters:\n     * object - {Object} The js object to which this Events object  is being added\n     * element - {DOMElement} A dom element to respond to browser events\n     * eventTypes - {Array(String)} Deprecated.  Array of custom application\n     *     events.  A listener may be registered for any named event, regardless\n     *     of the values provided here.\n     * fallThrough - {Boolean} Allow events to fall through after these have\n     *                         been handled?\n     * options - {Object} Options for the events object.\n     */\n    initialize: function (object, element, eventTypes, fallThrough, options) {\n        OpenLayers.Util.extend(this, options);\n        this.object     = object;\n        this.fallThrough = fallThrough;\n        this.listeners  = {};\n        this.extensions = {};\n        this.extensionCount = {};\n        this._pointerTouches = [];\n        \n        // if a dom element is specified, add a listeners list \n        // for browser events on the element and register them\n        if (element != null) {\n            this.attachToElement(element);\n        }\n    },\n\n    /**\n     * APIMethod: destroy\n     */\n    destroy: function () {\n        for (var e in this.extensions) {\n            if (typeof this.extensions[e] !== \"boolean\") {\n                this.extensions[e].destroy();\n            }\n        }\n        this.extensions = null;\n        if (this.element) {\n            OpenLayers.Event.stopObservingElement(this.element);\n            if(this.element.hasScrollEvent) {\n                OpenLayers.Event.stopObserving(\n                    window, \"scroll\", this.clearMouseListener\n                );\n            }\n        }\n        this.element = null;\n\n        this.listeners = null;\n        this.object = null;\n        this.fallThrough = null;\n        this.eventHandler = null;\n    },\n\n    /**\n     * APIMethod: addEventType\n     * Deprecated.  Any event can be triggered without adding it first.\n     * \n     * Parameters:\n     * eventName - {String}\n     */\n    addEventType: function(eventName) {\n    },\n\n    /**\n     * Method: attachToElement\n     *\n     * Parameters:\n     * element - {HTMLDOMElement} a DOM element to attach browser events to\n     */\n    attachToElement: function (element) {\n        if (this.element) {\n            OpenLayers.Event.stopObservingElement(this.element);\n        } else {\n            // keep a bound copy of handleBrowserEvent() so that we can\n            // pass the same function to both Event.observe() and .stopObserving()\n            this.eventHandler = OpenLayers.Function.bindAsEventListener(\n                this.handleBrowserEvent, this\n            );\n            \n            // to be used with observe and stopObserving\n            this.clearMouseListener = OpenLayers.Function.bind(\n                this.clearMouseCache, this\n            );\n        }\n        this.element = element;\n        var touchModel = this.getTouchModel();\n        var type;\n        for (var i = 0, len = this.BROWSER_EVENTS.length; i < len; i++) {\n            type = this.BROWSER_EVENTS[i];\n            // register the event cross-browser\n            if ((touchModel === this.TOUCH_MODEL_POINTER ||\n                    touchModel === this.TOUCH_MODEL_MSPOINTER) &&\n                    type.indexOf('touch') === 0) {\n                this.addPointerTouchListener(element, type, this.eventHandler);\n            } else {\n                OpenLayers.Event.observe(element, type, this.eventHandler);\n            }\n        }\n        // disable dragstart in IE so that mousedown/move/up works normally\n        OpenLayers.Event.observe(element, \"dragstart\", OpenLayers.Event.stop);\n    },\n    \n    /**\n     * APIMethod: on\n     * Convenience method for registering listeners with a common scope.\n     *     Internally, this method calls <register> as shown in the examples\n     *     below.\n     *\n     * Example use:\n     * (code)\n     * // register a single listener for the \"loadstart\" event\n     * events.on({\"loadstart\": loadStartListener});\n     *\n     * // this is equivalent to the following\n     * events.register(\"loadstart\", undefined, loadStartListener);\n     *\n     * // register multiple listeners to be called with the same `this` object\n     * events.on({\n     *     \"loadstart\": loadStartListener,\n     *     \"loadend\": loadEndListener,\n     *     scope: object\n     * });\n     *\n     * // this is equivalent to the following\n     * events.register(\"loadstart\", object, loadStartListener);\n     * events.register(\"loadend\", object, loadEndListener);\n     * (end)\n     *\n     * Parameters:\n     *  object - {Object}     \n     */\n    on: function(object) {\n        for(var type in object) {\n            if(type != \"scope\" && object.hasOwnProperty(type)) {\n                this.register(type, object.scope, object[type]);\n            }\n        }\n    },\n\n    /**\n     * APIMethod: register\n     * Register an event on the events object.\n     *\n     * When the event is triggered, the 'func' function will be called, in the\n     * context of 'obj'. Imagine we were to register an event, specifying an \n     * OpenLayers.Bounds Object as 'obj'. When the event is triggered, the \n     * context in the callback function will be our Bounds object. This means\n     * that within our callback function, we can access the properties and \n     * methods of the Bounds object through the \"this\" variable. So our \n     * callback could execute something like: \n     * :    leftStr = \"Left: \" + this.left;\n     *   \n     *                   or\n     *  \n     * :    centerStr = \"Center: \" + this.getCenterLonLat();\n     *\n     * Parameters:\n     * type - {String} Name of the event to register\n     * obj - {Object} The object to bind the context to for the callback#.\n     *     If no object is specified, default is the Events's 'object' property.\n     * func - {Function} The callback function. If no callback is \n     *     specified, this function does nothing.\n     * priority - {Boolean|Object} If true, adds the new listener to the\n     *     *front* of the events queue instead of to the end.\n     *\n     * Valid options for priority:\n     * extension - {Boolean} If true, then the event will be registered as\n     *     extension event. Extension events are handled before all other\n     *     events.\n     */\n    register: function (type, obj, func, priority) {\n        if (type in OpenLayers.Events && !this.extensions[type]) {\n            this.extensions[type] = new OpenLayers.Events[type](this);\n        }\n        if (func != null) {\n            if (obj == null)  {\n                obj = this.object;\n            }\n            var listeners = this.listeners[type];\n            if (!listeners) {\n                listeners = [];\n                this.listeners[type] = listeners;\n                this.extensionCount[type] = 0;\n            }\n            var listener = {obj: obj, func: func};\n            if (priority) {\n                listeners.splice(this.extensionCount[type], 0, listener);\n                if (typeof priority === \"object\" && priority.extension) {\n                    this.extensionCount[type]++;\n                }\n            } else {\n                listeners.push(listener);\n            }\n        }\n    },\n\n    /**\n     * APIMethod: registerPriority\n     * Same as register() but adds the new listener to the *front* of the\n     *     events queue instead of to the end.\n     *    \n     *     TODO: get rid of this in 3.0 - Decide whether listeners should be \n     *     called in the order they were registered or in reverse order.\n     *\n     *\n     * Parameters:\n     * type - {String} Name of the event to register\n     * obj - {Object} The object to bind the context to for the callback#.\n     *                If no object is specified, default is the Events's \n     *                'object' property.\n     * func - {Function} The callback function. If no callback is \n     *                   specified, this function does nothing.\n     */\n    registerPriority: function (type, obj, func) {\n        this.register(type, obj, func, true);\n    },\n    \n    /**\n     * APIMethod: un\n     * Convenience method for unregistering listeners with a common scope.\n     *     Internally, this method calls <unregister> as shown in the examples\n     *     below.\n     *\n     * Example use:\n     * (code)\n     * // unregister a single listener for the \"loadstart\" event\n     * events.un({\"loadstart\": loadStartListener});\n     *\n     * // this is equivalent to the following\n     * events.unregister(\"loadstart\", undefined, loadStartListener);\n     *\n     * // unregister multiple listeners with the same `this` object\n     * events.un({\n     *     \"loadstart\": loadStartListener,\n     *     \"loadend\": loadEndListener,\n     *     scope: object\n     * });\n     *\n     * // this is equivalent to the following\n     * events.unregister(\"loadstart\", object, loadStartListener);\n     * events.unregister(\"loadend\", object, loadEndListener);\n     * (end)\n     */\n    un: function(object) {\n        for(var type in object) {\n            if(type != \"scope\" && object.hasOwnProperty(type)) {\n                this.unregister(type, object.scope, object[type]);\n            }\n        }\n    },\n\n    /**\n     * APIMethod: unregister\n     *\n     * Parameters:\n     * type - {String} \n     * obj - {Object} If none specified, defaults to this.object\n     * func - {Function} \n     */\n    unregister: function (type, obj, func) {\n        if (obj == null)  {\n            obj = this.object;\n        }\n        var listeners = this.listeners[type];\n        if (listeners != null) {\n            for (var i=0, len=listeners.length; i<len; i++) {\n                if (listeners[i].obj == obj && listeners[i].func == func) {\n                    listeners.splice(i, 1);\n                    break;\n                }\n            }\n        }\n    },\n\n    /** \n     * Method: remove\n     * Remove all listeners for a given event type. If type is not registered,\n     *     does nothing.\n     *\n     * Parameters:\n     * type - {String} \n     */\n    remove: function(type) {\n        if (this.listeners[type] != null) {\n            this.listeners[type] = [];\n        }\n    },\n\n    /**\n     * APIMethod: triggerEvent\n     * Trigger a specified registered event.  \n     * \n     * Parameters:\n     * type - {String} \n     * evt - {Event || Object} will be passed to the listeners.\n     *\n     * Returns:\n     * {Boolean} The last listener return.  If a listener returns false, the\n     *     chain of listeners will stop getting called.\n     */\n    triggerEvent: function (type, evt) {\n        var listeners = this.listeners[type];\n\n        // fast path\n        if(!listeners || listeners.length == 0) {\n            return undefined;\n        }\n\n        // prep evt object with object & div references\n        if (evt == null) {\n            evt = {};\n        }\n        evt.object = this.object;\n        evt.element = this.element;\n        if(!evt.type) {\n            evt.type = type;\n        }\n    \n        // execute all callbacks registered for specified type\n        // get a clone of the listeners array to\n        // allow for splicing during callbacks\n        listeners = listeners.slice();\n        var continueChain;\n        for (var i=0, len=listeners.length; i<len; i++) {\n            var callback = listeners[i];\n            // bind the context to callback.obj\n            continueChain = callback.func.apply(callback.obj, [evt]);\n\n            if ((continueChain != undefined) && (continueChain == false)) {\n                // if callback returns false, execute no more callbacks.\n                break;\n            }\n        }\n        // don't fall through to other DOM elements\n        if (!this.fallThrough) {           \n            OpenLayers.Event.stop(evt, true);\n        }\n        return continueChain;\n    },\n\n    /**\n     * Method: handleBrowserEvent\n     * Basically just a wrapper to the triggerEvent() function, but takes \n     *     care to set a property 'xy' on the event with the current mouse \n     *     position.\n     *\n     * Parameters:\n     * evt - {Event} \n     */\n    handleBrowserEvent: function (evt) {\n        var type = evt.type, listeners = this.listeners[type];\n        if(!listeners || listeners.length == 0) {\n            // no one's listening, bail out\n            return;\n        }\n        // add clientX & clientY to all events - corresponds to average x, y\n        var touches = evt.touches;\n        if (touches && touches[0]) {\n            var x = 0;\n            var y = 0;\n            var num = touches.length;\n            var touch;\n            for (var i=0; i<num; ++i) {\n                touch = this.getTouchClientXY(touches[i]);\n                x += touch.clientX;\n                y += touch.clientY;\n            }\n            evt.clientX = x / num;\n            evt.clientY = y / num;\n        }\n        if (this.includeXY) {\n            evt.xy = this.getMousePosition(evt);\n        } \n        this.triggerEvent(type, evt);\n    },\n    \n    /**\n     * Method: getTouchClientXY\n     * WebKit has a few bugs for clientX/clientY. This method detects them\n     * and calculate the correct values.\n     *\n     * Parameters:\n     * evt - {Touch} a Touch object from a TouchEvent\n     * \n     * Returns:\n     * {Object} An object with only clientX and clientY properties with the\n     * calculated values.\n     */\n    getTouchClientXY: function (evt) {\n        // olMochWin is to override window, used for testing\n        var win = window.olMockWin || window,\n            winPageX = win.pageXOffset,\n            winPageY = win.pageYOffset,\n            x = evt.clientX,\n            y = evt.clientY;\n        \n        if (evt.pageY === 0 && Math.floor(y) > Math.floor(evt.pageY) ||\n            evt.pageX === 0 && Math.floor(x) > Math.floor(evt.pageX)) {\n            // iOS4 include scroll offset in clientX/Y\n            x = x - winPageX;\n            y = y - winPageY;\n        } else if (y < (evt.pageY - winPageY) || x < (evt.pageX - winPageX) ) {\n            // Some Android browsers have totally bogus values for clientX/Y\n            // when scrolling/zooming a page\n            x = evt.pageX - winPageX;\n            y = evt.pageY - winPageY;\n        }\n        \n        evt.olClientX = x;\n        evt.olClientY = y;\n        \n        return {\n            clientX: x,\n            clientY: y\n        };\n    },\n    \n    /**\n     * APIMethod: clearMouseCache\n     * Clear cached data about the mouse position. This should be called any \n     *     time the element that events are registered on changes position \n     *     within the page.\n     */\n    clearMouseCache: function() { \n        this.element.scrolls = null;\n        this.element.lefttop = null;\n        this.element.offsets = null;\n    },      \n\n    /**\n     * Method: getMousePosition\n     * \n     * Parameters:\n     * evt - {Event} \n     * \n     * Returns:\n     * {<OpenLayers.Pixel>} The current xy coordinate of the mouse, adjusted\n     *                      for offsets\n     */\n    getMousePosition: function (evt) {\n        if (!this.includeXY) {\n            this.clearMouseCache();\n        } else if (!this.element.hasScrollEvent) {\n            OpenLayers.Event.observe(window, \"scroll\", this.clearMouseListener);\n            this.element.hasScrollEvent = true;\n        }\n        \n        if (!this.element.scrolls) {\n            var viewportElement = OpenLayers.Util.getViewportElement();\n            this.element.scrolls = [\n                window.pageXOffset || viewportElement.scrollLeft,\n                window.pageYOffset || viewportElement.scrollTop\n            ];\n        }\n\n        if (!this.element.lefttop) {\n            this.element.lefttop = [\n                (document.documentElement.clientLeft || 0),\n                (document.documentElement.clientTop  || 0)\n            ];\n        }\n        \n        if (!this.element.offsets) {\n            this.element.offsets = OpenLayers.Util.pagePosition(this.element);\n        }\n\n        return new OpenLayers.Pixel(\n            (evt.clientX + this.element.scrolls[0]) - this.element.offsets[0]\n                         - this.element.lefttop[0], \n            (evt.clientY + this.element.scrolls[1]) - this.element.offsets[1]\n                         - this.element.lefttop[1]\n        ); \n    },\n\n    /**\n     * Method: getTouchModel\n     * Get the touch model currently in use.\n     * \n     * This is cached on OpenLayers.Events as _TOUCH_MODEL \n     * \n     * Returns:\n     * {string} The current touch model (TOUCH_MODEL_xxx), null if none\n     */\n    getTouchModel: function() {\n        if (!(\"_TOUCH_MODEL\" in OpenLayers.Events)) {\n            OpenLayers.Events._TOUCH_MODEL =\n                    (window.PointerEvent && \"pointer\") ||\n                    (window.MSPointerEvent && \"MSPointer\") ||\n                    ((\"ontouchdown\" in document) && \"touch\") ||\n                    null;\n        }\n        return OpenLayers.Events._TOUCH_MODEL;\n    },\n\n    /**\n     * Method: addPointerTouchListener\n     *\n     * Parameters:\n     * element - {DOMElement} The DOM element to register the listener on\n     * type - {String} The event type\n     * handler - {Function} the handler\n     */\n    addPointerTouchListener: function (element, type, handler) {\n        var eventHandler = this.eventHandler;\n        var touches = this._pointerTouches;\n\n        function pointerHandler(evt) {\n            handler(OpenLayers.Util.applyDefaults({\n                stopPropagation: function() {\n                    for (var i=touches.length-1; i>=0; --i) {\n                        touches[i].stopPropagation();\n                    }\n                },\n                preventDefault: function() {\n                    for (var i=touches.length-1; i>=0; --i) {\n                        touches[i].preventDefault();\n                    }\n                },\n                type: type\n            }, evt));\n        }\n\n        switch (type) {\n            case 'touchstart':\n                return this.addPointerTouchListenerStart(element, type, pointerHandler);\n            case 'touchend':\n                return this.addPointerTouchListenerEnd(element, type, pointerHandler);\n            case 'touchmove':\n                return this.addPointerTouchListenerMove(element, type, pointerHandler);\n            default:\n                throw 'Unknown touch event type';\n        }\n    },\n\n    /**\n     * Method: addPointerTouchListenerStart\n     *\n     * Parameters:\n     * element - {DOMElement} The DOM element to register the listener on\n     * type - {String} The event type\n     * handler - {Function} the handler\n     */\n    addPointerTouchListenerStart: function(element, type, handler) {\n        var touches = this._pointerTouches;\n\n        var cb = function(e) {\n\n            // pointer could be mouse or pen\n            if (!OpenLayers.Event.isTouchEvent(e)) {\n                return;\n            }\n\n            var alreadyInArray = false;\n            for (var i=0, ii=touches.length; i<ii; ++i) {\n                if (touches[i].pointerId == e.pointerId) {\n                    alreadyInArray = true;\n                    break;\n                }\n            }\n            if (!alreadyInArray) {\n                touches.push(e);\n            }\n\n            e.touches = touches.slice();\n            handler(e);\n        };\n\n        OpenLayers.Event.observe(element,\n                this.getTouchModel() === this.TOUCH_MODEL_MSPOINTER ?\n                        'MSPointerDown' : 'pointerdown',\n                cb);\n        \n        // the pointerId only needs to be removed from the _pointerTouches array\n        // when the pointer has left its element\n        var internalCb = function (e) {\n\n            // pointer could be mouse or pen\n            if (!OpenLayers.Event.isTouchEvent(e)) {\n            \treturn;\n            }\n\n            var up = false;\n            for (var i = 0, ii = touches.length; i < ii; ++i) {\n                if (touches[i].pointerId == e.pointerId) {\n                    if (this.clientWidth != 0 && this.clientHeight != 0) {\n                        if ((Math.ceil(e.clientX) >= this.clientWidth || Math.ceil(e.clientY) >= this.clientHeight)) {\n                            touches.splice(i, 1);\n                        }\n                    }\n                    break;\n                }\n            }\n        };\n        OpenLayers.Event.observe(element,\n                this.getTouchModel() === this.TOUCH_MODEL_MSPOINTER ?\n                        'MSPointerOut' : 'pointerout',\n                internalCb);\n    },\n\n    /**\n     * Method: addPointerTouchListenerMove\n     *\n     * Parameters:\n     * element - {DOMElement} The DOM element to register the listener on\n     * type - {String} The event type\n     * handler - {Function} the handler\n     */\n    addPointerTouchListenerMove: function (element, type, handler) {\n        var touches = this._pointerTouches;\n        var cb = function(e) {\n\n            // pointer could be mouse or pen\n            if (!OpenLayers.Event.isTouchEvent(e)) {\n                return;\n            }\n\n            if (touches.length == 1 && touches[0].pageX == e.pageX &&\n                    touches[0].pageY == e.pageY) {\n                // don't trigger event when pointer has not moved\n                return;\n            }\n            for (var i=0, ii=touches.length; i<ii; ++i) {\n                if (touches[i].pointerId == e.pointerId) {\n                    touches[i] = e;\n                    break;\n                }\n            }\n\n            e.touches = touches.slice();\n            handler(e);\n        };\n\n        OpenLayers.Event.observe(element,\n                this.getTouchModel() === this.TOUCH_MODEL_MSPOINTER ?\n                        'MSPointerMove' : 'pointermove',\n                cb);\n    },\n\n    /**\n     * Method: addPointerTouchListenerEnd\n     *\n     * Parameters:\n     * element - {DOMElement} The DOM element to register the listener on\n     * type - {String} The event type\n     * handler - {Function} the handler\n     */\n    addPointerTouchListenerEnd: function (element, type, handler) {\n        var touches = this._pointerTouches;\n\n        var cb = function(e) {\n\n            // pointer could be mouse or pen\n            if (!OpenLayers.Event.isTouchEvent(e)) {\n            \treturn;\n            }\n\n            for (var i=0, ii=touches.length; i<ii; ++i) {\n                if (touches[i].pointerId == e.pointerId) {\n                    touches.splice(i, 1);\n                    break;\n                }\n            }\n            \n            e.touches = touches.slice();\n            handler(e);\n        };\n\n        OpenLayers.Event.observe(element,\n                this.getTouchModel() === this.TOUCH_MODEL_MSPOINTER ?\n                        'MSPointerUp' : 'pointerup',\n                cb);\n    },\n\n    CLASS_NAME: \"OpenLayers.Events\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Events.js\n */\n\n/**\n * Class: OpenLayers.Events.buttonclick\n * Extension event type for handling buttons on top of a dom element. This\n *     event type fires \"buttonclick\" on its <target> when a button was\n *     clicked. Buttons are detected by the \"olButton\" class.\n *\n * This event type makes sure that button clicks do not interfere with other\n *     events that are registered on the same <element>.\n *\n * Event types provided by this extension:\n * - *buttonclick* Triggered when a button is clicked. Listeners receive an\n *     object with a *buttonElement* property referencing the dom element of\n *     the clicked button, and an *buttonXY* property with the click position\n *     relative to the button.\n */\nOpenLayers.Events.buttonclick = OpenLayers.Class({\n    \n    /**\n     * Property: target\n     * {<OpenLayers.Events>} The events instance that the buttonclick event will\n     * be triggered on.\n     */\n    target: null,\n    \n    /**\n     * Property: events\n     * {Array} Events to observe and conditionally stop from propagating when\n     *     an element with the olButton class (or its olAlphaImg child) is\n     *     clicked.\n     */\n    events: [\n        'mousedown', 'mouseup', 'click', 'dblclick',\n        'touchstart', 'touchmove', 'touchend', 'keydown'\n    ],\n    \n    /**\n     * Property: startRegEx\n     * {RegExp} Regular expression to test Event.type for events that start\n     *     a buttonclick sequence.\n     */\n    startRegEx: /^mousedown|touchstart$/,\n\n    /**\n     * Property: cancelRegEx\n     * {RegExp} Regular expression to test Event.type for events that cancel\n     *     a buttonclick sequence.\n     */\n    cancelRegEx: /^touchmove$/,\n\n    /**\n     * Property: completeRegEx\n     * {RegExp} Regular expression to test Event.type for events that complete\n     *     a buttonclick sequence.\n     */\n    completeRegEx: /^mouseup|touchend$/,\n\n    /**\n     * Property: isDeviceTouchCapable\n     * {Boolean} Tells whether the browser detects touch events.\n     */\n    isDeviceTouchCapable: 'ontouchstart' in window ||\n        window.DocumentTouch && document instanceof window.DocumentTouch,\n    \n    /**\n     * Property: startEvt\n     * {Event} The event that started the click sequence\n     */\n    \n    /**\n     * Constructor: OpenLayers.Events.buttonclick\n     * Construct a buttonclick event type. Applications are not supposed to\n     *     create instances of this class - they are created on demand by\n     *     <OpenLayers.Events> instances.\n     *\n     * Parameters:\n     * target - {<OpenLayers.Events>} The events instance that the buttonclick\n     *     event will be triggered on.\n     */\n    initialize: function(target) {\n        this.target = target;\n        for (var i=this.events.length-1; i>=0; --i) {\n            this.target.register(this.events[i], this, this.buttonClick, {\n                extension: true\n            });\n        }\n    },\n    \n    /**\n     * Method: destroy\n     */\n    destroy: function() {\n        for (var i=this.events.length-1; i>=0; --i) {\n            this.target.unregister(this.events[i], this, this.buttonClick);\n        }\n        delete this.target;\n    },\n\n    /**\n     * Method: getPressedButton\n     * Get the pressed button, if any. Returns undefined if no button\n     * was pressed.\n     *\n     * Arguments:\n     * element - {DOMElement} The event target.\n     *\n     * Returns:\n     * {DOMElement} The button element, or undefined.\n     */\n    getPressedButton: function(element) {\n        var depth = 3, // limit the search depth\n            button;\n        do {\n            if(OpenLayers.Element.hasClass(element, \"olButton\")) {\n                // hit!\n                button = element;\n                break;\n            }\n            element = element.parentNode;\n        } while(--depth > 0 && element);\n        return button;\n    },\n    \n    /**\n     * Method: ignore\n     * Check for event target elements that should be ignored by OpenLayers.\n     *\n     * Parameters:\n     * element - {DOMElement} The event target.\n     */\n    ignore: function(element) {\n        var depth = 3,\n            ignore = false;\n        do {\n            if (element.nodeName.toLowerCase() === 'a') {\n                ignore = true;\n                break;\n            }\n            element = element.parentNode;\n        } while (--depth > 0 && element);\n        return ignore;\n    },\n\n    /**\n     * Method: buttonClick\n     * Check if a button was clicked, and fire the buttonclick event\n     *\n     * Parameters:\n     * evt - {Event}\n     */\n    buttonClick: function(evt) {\n        var propagate = true,\n            element = OpenLayers.Event.element(evt);\n\n        if (element &&\n           (OpenLayers.Event.isLeftClick(evt) &&\n            !this.isDeviceTouchCapable ||\n            !~evt.type.indexOf(\"mouse\"))) {\n            // was a button pressed?\n            var button = this.getPressedButton(element);\n            if (button) {\n                if (evt.type === \"keydown\") {\n                    switch (evt.keyCode) {\n                    case OpenLayers.Event.KEY_RETURN:\n                    case OpenLayers.Event.KEY_SPACE:\n                        this.target.triggerEvent(\"buttonclick\", {\n                            buttonElement: button\n                        });\n                        OpenLayers.Event.stop(evt);\n                        propagate = false;\n                        break;\n                    }\n                } else if (this.startEvt) {\n                    if (this.completeRegEx.test(evt.type)) {\n                        var pos = OpenLayers.Util.pagePosition(button);\n                        var viewportElement = OpenLayers.Util.getViewportElement();\n                        var scrollTop = window.pageYOffset || viewportElement.scrollTop;\n                        var scrollLeft = window.pageXOffset || viewportElement.scrollLeft;\n                        pos[0] = pos[0] - scrollLeft;\n                        pos[1] = pos[1] - scrollTop;\n                        \n                        this.target.triggerEvent(\"buttonclick\", {\n                            buttonElement: button,\n                            buttonXY: {\n                                x: this.startEvt.clientX - pos[0],\n                                y: this.startEvt.clientY - pos[1]\n                            }\n                        });\n                    }\n                    if (this.cancelRegEx.test(evt.type)) {\n                        if (evt.touches && this.startEvt.touches &&\n                                (Math.abs(evt.touches[0].olClientX - this.startEvt.touches[0].olClientX) > 4 ||\n                                Math.abs(evt.touches[0].olClientY - this.startEvt.touches[0].olClientY)) > 4) {\n                            delete this.startEvt;\n                        }\n                    }\n                    OpenLayers.Event.stop(evt);\n                    propagate = false;\n                }\n                if (this.startRegEx.test(evt.type)) {\n                    this.startEvt = evt;\n                    OpenLayers.Event.stop(evt);\n                    propagate = false;\n                }\n            } else {\n                propagate = !this.ignore(OpenLayers.Event.element(evt));\n                delete this.startEvt;\n            }\n        }\n        return propagate;\n    }\n    \n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Events.js\n */\n\n/**\n * Class: OpenLayers.Events.featureclick\n *\n * Extension event type for handling feature click events, including overlapping\n * features. \n * \n * Event types provided by this extension:\n * - featureclick \n */\nOpenLayers.Events.featureclick = OpenLayers.Class({\n    \n    /**\n     * Property: cache\n     * {Object} A cache of features under the mouse.\n     */\n    cache: null,\n    \n    /**\n     * Property: map\n     * {<OpenLayers.Map>} The map to register browser events on.\n     */\n    map: null,\n    \n    /**\n     * Property: provides\n     * {Array(String)} The event types provided by this extension.\n     */\n    provides: [\"featureclick\", \"nofeatureclick\", \"featureover\", \"featureout\"],\n    \n    lastClientX: 0,\n\n    lastClientY: 0,\n    \n    /**\n     * Constructor: OpenLayers.Events.featureclick\n     * Create a new featureclick event type.\n     *\n     * Parameters:\n     * target - {<OpenLayers.Events>} The events instance to create the events\n     *     for.\n     */\n    initialize: function(target) {\n        this.target = target;\n        if (target.object instanceof OpenLayers.Map) {\n            this.setMap(target.object);\n        } else if (target.object instanceof OpenLayers.Layer.Vector) {\n            if (target.object.map) {\n                this.setMap(target.object.map);\n            } else {\n                target.object.events.register(\"added\", this, function(evt) {\n                    this.setMap(target.object.map);\n                });\n            }\n        } else {\n            throw(\"Listeners for '\" + this.provides.join(\"', '\") +\n                \"' events can only be registered for OpenLayers.Layer.Vector \" + \n                \"or OpenLayers.Map instances\");\n        }\n        for (var i=this.provides.length-1; i>=0; --i) {\n            target.extensions[this.provides[i]] = true;\n        }\n    },\n    \n    /**\n     * Method: setMap\n     *\n     * Parameters:\n     * map - {<OpenLayers.Map>} The map to register browser events on.\n     */\n    setMap: function(map) {\n        this.map = map;\n        this.cache = {};\n        map.events.register(\"mousedown\", this, this.start, {extension: true});\n        map.events.register(\"mouseup\", this, this.onClick, {extension: true});\n        map.events.register(\"touchstart\", this, this.start, {extension: true});\n        map.events.register(\"touchmove\", this, this.cancel, {extension: true});\n        map.events.register(\"touchend\", this, this.onClick, {extension: true});\n        map.events.register(\"mousemove\", this, this.onMousemove, {extension: true});\n    },\n    \n    /**\n     * Method: start\n     * Sets startEvt = evt.\n     *\n     * Parameters:\n     * evt - {<OpenLayers.Event>}\n     */\n    start: function(evt) {\n        this.startEvt = evt;\n    },\n    \n    /**\n     * Method: cancel\n     * Deletes the start event.\n     *\n     * Parameters:\n     * evt - {<OpenLayers.Event>}\n     */    \n    cancel: function(evt) {\n        delete this.startEvt;\n    },\n    \n    /**\n     * Method: onClick\n     * Listener for the click event.\n     *\n     * Parameters:\n     * evt - {<OpenLayers.Event>}\n     */\n    onClick: function(evt) {\n        if (!this.startEvt || evt.type !== \"touchend\" &&\n                !OpenLayers.Event.isLeftClick(evt)) {\n            return;\n        }\n        var features = this.getFeatures(this.startEvt);\n        delete this.startEvt;\n        // fire featureclick events\n        var feature, layer, more, clicked = {};\n        for (var i=0, len=features.length; i<len; ++i) {\n            feature = features[i];\n            layer = feature.layer;\n            clicked[layer.id] = true;\n            more = this.triggerEvent(\"featureclick\", {feature: feature});\n            if (more === false) {\n                break;\n            }\n        }\n        // fire nofeatureclick events on all vector layers with no targets\n        for (i=0, len=this.map.layers.length; i<len; ++i) {\n            layer = this.map.layers[i];\n            if (layer instanceof OpenLayers.Layer.Vector && !clicked[layer.id]) {\n                this.triggerEvent(\"nofeatureclick\", {layer: layer});\n            }\n        }\n    },\n    \n    /**\n     * Method: onMousemove\n     * Listener for the mousemove event.\n     *\n     * Parameters:\n     * evt - {<OpenLayers.Event>}\n     */\n    onMousemove: function(evt) {\n        delete this.startEvt;\n        var clientX = evt.clientX;\n        var clientY = evt.clientY;\n\t//this is a fix for Chrome 34. Mousemove event is triggered even cursor did not move.\n        if (this.lastClientX == clientX && this.lastClientY == clientY) {\n            return;\n        } else {\n            this.lastClientX = clientX;\n            this.lastClientY = clientY;\n        }\n        var features = this.getFeatures(evt);\n        var over = {}, newly = [], feature;\n        for (var i=0, len=features.length; i<len; ++i) {\n            feature = features[i];\n            over[feature.id] = feature;\n            if (!this.cache[feature.id]) {\n                newly.push(feature);\n            }\n        }\n        // check if already over features\n        var out = [];\n        for (var id in this.cache) {\n            feature = this.cache[id];\n            if (feature.layer && feature.layer.map) {\n                if (!over[feature.id]) {\n                    out.push(feature);\n                }\n            } else {\n                // removed\n                delete this.cache[id];\n            }\n        }\n        // fire featureover events\n        var more;\n        for (i=0, len=newly.length; i<len; ++i) {\n            feature = newly[i];\n            this.cache[feature.id] = feature;\n            more = this.triggerEvent(\"featureover\", {feature: feature});\n            if (more === false) {\n                break;\n            }\n        }\n        // fire featureout events\n        for (i=0, len=out.length; i<len; ++i) {\n            feature = out[i];\n            delete this.cache[feature.id];\n            more = this.triggerEvent(\"featureout\", {feature: feature});\n            if (more === false) {\n                break;\n            }\n        }\n    },\n    \n    /**\n     * Method: triggerEvent\n     * Determines where to trigger the event and triggers it.\n     *\n     * Parameters:\n     * type - {String} The event type to trigger\n     * evt - {Object} The listener argument\n     *\n     * Returns:\n     * {Boolean} The last listener return.\n     */\n    triggerEvent: function(type, evt) {\n        var layer = evt.feature ? evt.feature.layer : evt.layer,\n            object = this.target.object;\n        if (object instanceof OpenLayers.Map || object === layer) {\n            return this.target.triggerEvent(type, evt);\n        }\n    },\n\n    /**\n     * Method: getFeatures\n     * Get all features at the given screen location.\n     *\n     * Parameters:\n     * evt - {Object} Event object.\n     *\n     * Returns:\n     * {Array(<OpenLayers.Feature.Vector>)} List of features at the given point.\n     */\n    getFeatures: function(evt) {\n        var x = evt.clientX, y = evt.clientY,\n            features = [], targets = [], layers = [],\n            layer, renderer, target, feature, i, len, featureId;\n        // go through all layers looking for targets\n        for (i=this.map.layers.length-1; i>=0; --i) {\n            layer = this.map.layers[i];\n            renderer = layer.renderer;\n            if (layer.div.style.display !== \"none\") {\n                if (renderer instanceof OpenLayers.Renderer.Elements) {\n                    if (layer instanceof OpenLayers.Layer.Vector) {\n                        target = document.elementFromPoint(x, y);\n                        while (target && (featureId = renderer.getFeatureIdFromEvent({target: target}))) {\n                            feature = layer.getFeatureById(featureId);\n                            if (feature) {\n                                features.push(feature);\n                                target.style.display = \"none\";\n                                targets.push(target);\n                                target = document.elementFromPoint(x, y);\n                            } else {\n                                // sketch, all bets off\n                                target = false;\n                            }\n                        }\n                    }\n                    layers.push(layer);\n                    layer.div.style.display = \"none\";\n                } else if (renderer instanceof OpenLayers.Renderer.Canvas) {\n                    feature = renderer.getFeatureIdFromEvent(evt);\n                    if (feature) {\n                        features.push(feature);\n                        layers.push(layer);\n                    }\n                }\n            }\n        }\n        // restore feature visibility\n        for (i=0, len=targets.length; i<len; ++i) {\n            targets[i].style.display = \"\";\n        }\n        // restore layer visibility\n        for (i=layers.length-1; i>=0; --i) {\n            layers[i].div.style.display = \"block\";\n        }\n        return features;\n    },\n    \n    /**\n     * APIMethod: destroy\n     * Clean up.\n     */\n    destroy: function() {\n        for (var i=this.provides.length-1; i>=0; --i) {\n            delete this.target.extensions[this.provides[i]];\n        }        \n        this.map.events.un({\n            mousemove: this.onMousemove,\n            mousedown: this.start,\n            mouseup: this.onClick,\n            touchstart: this.start,\n            touchmove: this.cancel,\n            touchend: this.onClick,\n            scope: this\n        });\n        delete this.cache;\n        delete this.map;\n        delete this.target;\n    }\n    \n});\n \n/**\n * Class: OpenLayers.Events.nofeatureclick\n *\n * Extension event type for handling click events that do not hit a feature. \n * \n * Event types provided by this extension:\n * - nofeatureclick \n */\nOpenLayers.Events.nofeatureclick = OpenLayers.Events.featureclick;\n\n/**\n * Class: OpenLayers.Events.featureover\n *\n * Extension event type for handling hovering over a feature. \n * \n * Event types provided by this extension:\n * - featureover \n */\nOpenLayers.Events.featureover = OpenLayers.Events.featureclick;\n\n/**\n * Class: OpenLayers.Events.featureout\n *\n * Extension event type for handling leaving a feature. \n * \n * Event types provided by this extension:\n * - featureout \n */\nOpenLayers.Events.featureout = OpenLayers.Events.featureclick;\n", "import \"./OpenLayers/BaseTypes/Class.js\"\nimport \"./OpenLayers/Util.js\"\nimport \"./OpenLayers/Util/vendorPrefix.js\"\nimport \"./OpenLayers/Animation.js\"\nimport \"./OpenLayers/BaseTypes.js\"\nimport \"./OpenLayers/BaseTypes/Bounds.js\"\nimport \"./OpenLayers/BaseTypes/Date.js\"\nimport \"./OpenLayers/BaseTypes/Element.js\"\nimport \"./OpenLayers/BaseTypes/LonLat.js\"\nimport \"./OpenLayers/BaseTypes/Pixel.js\"\nimport \"./OpenLayers/BaseTypes/Size.js\"\nimport \"./OpenLayers/Console.js\"\nimport \"./OpenLayers/Tween.js\"\nimport \"./OpenLayers/Kinetic.js\"\nimport \"./OpenLayers/Events.js\"\nimport \"./OpenLayers/Events/buttonclick.js\"\nimport \"./OpenLayers/Events/featureclick.js\"\nimport \"./OpenLayers/Request.js\"\nimport \"./OpenLayers/Request/XMLHttpRequest.js\"\nimport \"./OpenLayers/Projection.js\"\nimport \"./OpenLayers/Map.js\"\nimport \"./OpenLayers/Layer.js\"\nimport \"./OpenLayers/Icon.js\"\nimport \"./OpenLayers/Marker.js\"\nimport \"./OpenLayers/Marker/Box.js\"\nimport \"./OpenLayers/Popup.js\"\nimport \"./OpenLayers/Tile.js\"\nimport \"./OpenLayers/Tile/Image.js\"\nimport \"./OpenLayers/Tile/Image/IFrame.js\"\nimport \"./OpenLayers/Tile/UTFGrid.js\"\nimport \"./OpenLayers/Layer/Image.js\"\nimport \"./OpenLayers/Layer/SphericalMercator.js\"\nimport \"./OpenLayers/Layer/EventPane.js\"\nimport \"./OpenLayers/Layer/FixedZoomLevels.js\"\nimport \"./OpenLayers/Layer/Google.js\"\nimport \"./OpenLayers/Layer/Google/v3.js\"\nimport \"./OpenLayers/Layer/HTTPRequest.js\"\nimport \"./OpenLayers/Layer/Grid.js\"\nimport \"./OpenLayers/Layer/MapGuide.js\"\nimport \"./OpenLayers/Layer/MapServer.js\"\nimport \"./OpenLayers/Layer/KaMap.js\"\nimport \"./OpenLayers/Layer/KaMapCache.js\"\nimport \"./OpenLayers/Layer/Markers.js\"\nimport \"./OpenLayers/Layer/Text.js\"\nimport \"./OpenLayers/Layer/WorldWind.js\"\nimport \"./OpenLayers/Layer/ArcGIS93Rest.js\"\nimport \"./OpenLayers/Layer/WMS.js\"\nimport \"./OpenLayers/Layer/WMTS.js\"\nimport \"./OpenLayers/Layer/ArcIMS.js\"\nimport \"./OpenLayers/Layer/GeoRSS.js\"\nimport \"./OpenLayers/Layer/Boxes.js\"\nimport \"./OpenLayers/Layer/XYZ.js\"\nimport \"./OpenLayers/Layer/UTFGrid.js\"\nimport \"./OpenLayers/Layer/OSM.js\"\nimport \"./OpenLayers/Layer/Bing.js\"\nimport \"./OpenLayers/Layer/TMS.js\"\nimport \"./OpenLayers/Layer/TileCache.js\"\nimport \"./OpenLayers/Layer/Zoomify.js\"\nimport \"./OpenLayers/Layer/ArcGISCache.js\"\nimport \"./OpenLayers/Popup/Anchored.js\"\nimport \"./OpenLayers/Popup/Framed.js\"\nimport \"./OpenLayers/Popup/FramedCloud.js\"\nimport \"./OpenLayers/Feature.js\"\nimport \"./OpenLayers/Feature/Vector.js\"\nimport \"./OpenLayers/Handler.js\"\nimport \"./OpenLayers/Handler/Click.js\"\nimport \"./OpenLayers/Handler/Hover.js\"\nimport \"./OpenLayers/Handler/Point.js\"\nimport \"./OpenLayers/Handler/Path.js\"\nimport \"./OpenLayers/Handler/Polygon.js\"\nimport \"./OpenLayers/Handler/Feature.js\"\nimport \"./OpenLayers/Handler/Drag.js\"\nimport \"./OpenLayers/Handler/Pinch.js\"\nimport \"./OpenLayers/Handler/RegularPolygon.js\"\nimport \"./OpenLayers/Handler/Box.js\"\nimport \"./OpenLayers/Handler/MouseWheel.js\"\nimport \"./OpenLayers/Handler/Keyboard.js\"\nimport \"./OpenLayers/Control.js\"\nimport \"./OpenLayers/Control/Attribution.js\"\nimport \"./OpenLayers/Control/Button.js\"\nimport \"./OpenLayers/Control/CacheRead.js\"\nimport \"./OpenLayers/Control/CacheWrite.js\"\nimport \"./OpenLayers/Control/ZoomBox.js\"\nimport \"./OpenLayers/Control/ZoomToMaxExtent.js\"\nimport \"./OpenLayers/Control/DragPan.js\"\nimport \"./OpenLayers/Control/Navigation.js\"\nimport \"./OpenLayers/Control/PinchZoom.js\"\nimport \"./OpenLayers/Control/TouchNavigation.js\"\nimport \"./OpenLayers/Control/MousePosition.js\"\nimport \"./OpenLayers/Control/OverviewMap.js\"\nimport \"./OpenLayers/Control/KeyboardDefaults.js\"\nimport \"./OpenLayers/Control/PanZoom.js\"\nimport \"./OpenLayers/Control/PanZoomBar.js\"\nimport \"./OpenLayers/Control/ArgParser.js\"\nimport \"./OpenLayers/Control/Permalink.js\"\nimport \"./OpenLayers/Control/Scale.js\"\nimport \"./OpenLayers/Control/ScaleLine.js\"\nimport \"./OpenLayers/Control/Snapping.js\"\nimport \"./OpenLayers/Control/Split.js\"\nimport \"./OpenLayers/Control/LayerSwitcher.js\"\nimport \"./OpenLayers/Control/DrawFeature.js\"\nimport \"./OpenLayers/Control/DragFeature.js\"\nimport \"./OpenLayers/Control/ModifyFeature.js\"\nimport \"./OpenLayers/Control/ModifyFeature/BySegment.js\"\nimport \"./OpenLayers/Control/Panel.js\"\nimport \"./OpenLayers/Control/SelectFeature.js\"\nimport \"./OpenLayers/Control/NavigationHistory.js\"\nimport \"./OpenLayers/Control/Measure.js\"\nimport \"./OpenLayers/Control/WMSGetFeatureInfo.js\"\nimport \"./OpenLayers/Control/WMTSGetFeatureInfo.js\"\nimport \"./OpenLayers/Control/Graticule.js\"\nimport \"./OpenLayers/Control/TransformFeature.js\"\nimport \"./OpenLayers/Control/UTFGrid.js\"\nimport \"./OpenLayers/Control/SLDSelect.js\"\nimport \"./OpenLayers/Control/Zoom.js\"\nimport \"./OpenLayers/Control/TextButtonPanel.js\"\nimport \"./OpenLayers/Geometry.js\"\nimport \"./OpenLayers/Geometry/Collection.js\"\nimport \"./OpenLayers/Geometry/Point.js\"\nimport \"./OpenLayers/Geometry/MultiPoint.js\"\nimport \"./OpenLayers/Geometry/Curve.js\"\nimport \"./OpenLayers/Geometry/LineString.js\"\nimport \"./OpenLayers/Geometry/LinearRing.js\"\nimport \"./OpenLayers/Geometry/Polygon.js\"\nimport \"./OpenLayers/Geometry/MultiLineString.js\"\nimport \"./OpenLayers/Geometry/MultiPolygon.js\"\nimport \"./OpenLayers/Renderer.js\"\nimport \"./OpenLayers/Renderer/Elements.js\"\nimport \"./OpenLayers/Renderer/SVG.js\"\nimport \"./OpenLayers/Renderer/Canvas.js\"\nimport \"./OpenLayers/Renderer/VML.js\"\nimport \"./OpenLayers/Layer/Vector.js\"\nimport \"./OpenLayers/Layer/PointGrid.js\"\nimport \"./OpenLayers/Layer/Vector/RootContainer.js\"\nimport \"./OpenLayers/Strategy.js\"\nimport \"./OpenLayers/Strategy/Filter.js\"\nimport \"./OpenLayers/Strategy/Fixed.js\"\nimport \"./OpenLayers/Strategy/Cluster.js\"\nimport \"./OpenLayers/Strategy/Paging.js\"\nimport \"./OpenLayers/Strategy/BBOX.js\"\nimport \"./OpenLayers/Strategy/Save.js\"\nimport \"./OpenLayers/Strategy/Refresh.js\"\nimport \"./OpenLayers/Filter.js\"\nimport \"./OpenLayers/Filter/FeatureId.js\"\nimport \"./OpenLayers/Filter/Logical.js\"\nimport \"./OpenLayers/Filter/Comparison.js\"\nimport \"./OpenLayers/Filter/Spatial.js\"\nimport \"./OpenLayers/Filter/Function.js\"\nimport \"./OpenLayers/Protocol.js\"\nimport \"./OpenLayers/Protocol/HTTP.js\"\nimport \"./OpenLayers/Protocol/WFS.js\"\nimport \"./OpenLayers/Protocol/WFS/v1.js\"\nimport \"./OpenLayers/Protocol/WFS/v1_0_0.js\"\nimport \"./OpenLayers/Protocol/WFS/v1_1_0.js\"\nimport \"./OpenLayers/Protocol/WFS/v2_0_0.js\"\nimport \"./OpenLayers/Protocol/CSW.js\"\nimport \"./OpenLayers/Protocol/CSW/v2_0_2.js\"\nimport \"./OpenLayers/Protocol/Script.js\"\nimport \"./OpenLayers/Protocol/SOS.js\"\nimport \"./OpenLayers/Protocol/SOS/v1_0_0.js\"\nimport \"./OpenLayers/Layer/PointTrack.js\"\nimport \"./OpenLayers/Style.js\"\nimport \"./OpenLayers/Style2.js\"\nimport \"./OpenLayers/StyleMap.js\"\nimport \"./OpenLayers/Rule.js\"\nimport \"./OpenLayers/Format.js\"\nimport \"./OpenLayers/Format/QueryStringFilter.js\"\nimport \"./OpenLayers/Format/XML.js\"\nimport \"./OpenLayers/Format/XML/VersionedOGC.js\"\nimport \"./OpenLayers/Format/Context.js\"\nimport \"./OpenLayers/Format/ArcXML.js\"\nimport \"./OpenLayers/Format/ArcXML/Features.js\"\nimport \"./OpenLayers/Format/GML.js\"\nimport \"./OpenLayers/Format/GML/Base.js\"\nimport \"./OpenLayers/Format/GML/v2.js\"\nimport \"./OpenLayers/Format/GML/v3.js\"\nimport \"./OpenLayers/Format/Atom.js\"\nimport \"./OpenLayers/Format/EncodedPolyline.js\"\nimport \"./OpenLayers/Format/KML.js\"\nimport \"./OpenLayers/Format/GeoRSS.js\"\nimport \"./OpenLayers/Format/WFS.js\"\nimport \"./OpenLayers/Format/OWSCommon.js\"\nimport \"./OpenLayers/Format/OWSCommon/v1.js\"\nimport \"./OpenLayers/Format/OWSCommon/v1_0_0.js\"\nimport \"./OpenLayers/Format/OWSCommon/v1_1_0.js\"\nimport \"./OpenLayers/Format/WCSCapabilities.js\"\nimport \"./OpenLayers/Format/WCSCapabilities/v1.js\"\nimport \"./OpenLayers/Format/WCSCapabilities/v1_0_0.js\"\nimport \"./OpenLayers/Format/WCSCapabilities/v1_1_0.js\"\nimport \"./OpenLayers/Format/WCSDescribeCoverage.js\"\nimport \"./OpenLayers/Format/WCSDescribeCoverage/v1.js\"\nimport \"./OpenLayers/Format/WCSDescribeCoverage/v1_0_0.js\"\nimport \"./OpenLayers/Format/WCSDescribeCoverage/v1_1_0.js\"\nimport \"./OpenLayers/Format/WFSCapabilities.js\"\nimport \"./OpenLayers/Format/WFSCapabilities/v1.js\"\nimport \"./OpenLayers/Format/WFSCapabilities/v1_0_0.js\"\nimport \"./OpenLayers/Format/WFSCapabilities/v1_1_0.js\"\nimport \"./OpenLayers/Format/WFSCapabilities/v2_0_0.js\"\nimport \"./OpenLayers/Format/WFSDescribeFeatureType.js\"\nimport \"./OpenLayers/Format/WMSDescribeLayer.js\"\nimport \"./OpenLayers/Format/WMSDescribeLayer/v1_1.js\"\nimport \"./OpenLayers/Format/WKT.js\"\nimport \"./OpenLayers/Format/CQL.js\"\nimport \"./OpenLayers/Format/OSM.js\"\nimport \"./OpenLayers/Format/GPX.js\"\nimport \"./OpenLayers/Format/Filter.js\"\nimport \"./OpenLayers/Format/Filter/v1.js\"\nimport \"./OpenLayers/Format/Filter/v2.js\"\nimport \"./OpenLayers/Format/Filter/v1_0_0.js\"\nimport \"./OpenLayers/Format/Filter/v1_1_0.js\"\nimport \"./OpenLayers/Format/Filter/v2_0_0.js\"\nimport \"./OpenLayers/Format/SLD.js\"\nimport \"./OpenLayers/Format/SLD/v1.js\"\nimport \"./OpenLayers/Format/SLD/v1_0_0.js\"\nimport \"./OpenLayers/Format/SLD/v1_0_0_GeoServer.js\"\nimport \"./OpenLayers/Format/OWSCommon.js\"\nimport \"./OpenLayers/Format/OWSCommon/v1.js\"\nimport \"./OpenLayers/Format/OWSCommon/v1_0_0.js\"\nimport \"./OpenLayers/Format/OWSCommon/v1_1_0.js\"\nimport \"./OpenLayers/Format/CSWGetDomain.js\"\nimport \"./OpenLayers/Format/CSWGetDomain/v2_0_2.js\"\nimport \"./OpenLayers/Format/CSWGetRecords.js\"\nimport \"./OpenLayers/Format/CSWGetRecords/v2_0_2.js\"\nimport \"./OpenLayers/Format/WFST.js\"\nimport \"./OpenLayers/Format/WFST/v1.js\"\nimport \"./OpenLayers/Format/WFST/v1_0_0.js\"\nimport \"./OpenLayers/Format/WFST/v1_1_0.js\"\nimport \"./OpenLayers/Format/WFST/v2_0_0.js\"\nimport \"./OpenLayers/Format/Text.js\"\nimport \"./OpenLayers/Format/JSON.js\"\nimport \"./OpenLayers/Format/GeoJSON.js\"\nimport \"./OpenLayers/Format/WMC.js\"\nimport \"./OpenLayers/Format/WMC/v1.js\"\nimport \"./OpenLayers/Format/WMC/v1_0_0.js\"\nimport \"./OpenLayers/Format/WMC/v1_1_0.js\"\nimport \"./OpenLayers/Format/WCSGetCoverage.js\"\nimport \"./OpenLayers/Format/WMSCapabilities.js\"\nimport \"./OpenLayers/Format/WMSCapabilities/v1.js\"\nimport \"./OpenLayers/Format/WMSCapabilities/v1_1.js\"\nimport \"./OpenLayers/Format/WMSCapabilities/v1_1_0.js\"\nimport \"./OpenLayers/Format/WMSCapabilities/v1_1_1.js\"\nimport \"./OpenLayers/Format/WMSCapabilities/v1_3.js\"\nimport \"./OpenLayers/Format/WMSCapabilities/v1_3_0.js\"\nimport \"./OpenLayers/Format/WMSCapabilities/v1_1_1_WMSC.js\"\nimport \"./OpenLayers/Format/WMSGetFeatureInfo.js\"\nimport \"./OpenLayers/Format/SOSCapabilities.js\"\nimport \"./OpenLayers/Format/SOSCapabilities/v1_0_0.js\"\nimport \"./OpenLayers/Format/SOSGetFeatureOfInterest.js\"\nimport \"./OpenLayers/Format/SOSGetObservation.js\"\nimport \"./OpenLayers/Format/OWSContext.js\"\nimport \"./OpenLayers/Format/OWSContext/v0_3_1.js\"\nimport \"./OpenLayers/Format/WMTSCapabilities.js\"\nimport \"./OpenLayers/Format/WMTSCapabilities/v1_0_0.js\"\nimport \"./OpenLayers/Format/WPSCapabilities.js\"\nimport \"./OpenLayers/Format/WPSCapabilities/v1_0_0.js\"\nimport \"./OpenLayers/Format/WPSDescribeProcess.js\"\nimport \"./OpenLayers/Format/WPSDescribeProcess/v1_0_0.js\"\nimport \"./OpenLayers/Format/WPSExecute.js\"\nimport \"./OpenLayers/Format/XLS.js\"\nimport \"./OpenLayers/Format/XLS/v1.js\"\nimport \"./OpenLayers/Format/XLS/v1_1_0.js\"\nimport \"./OpenLayers/Format/OGCExceptionReport.js\"\nimport \"./OpenLayers/Format/TMSCapabilities.js\"\nimport \"./OpenLayers/Control/GetFeature.js\"\nimport \"./OpenLayers/Control/NavToolbar.js\"\nimport \"./OpenLayers/Control/PanPanel.js\"\nimport \"./OpenLayers/Control/Pan.js\"\nimport \"./OpenLayers/Control/ZoomIn.js\"\nimport \"./OpenLayers/Control/ZoomOut.js\"\nimport \"./OpenLayers/Control/ZoomPanel.js\"\nimport \"./OpenLayers/Control/EditingToolbar.js\"\nimport \"./OpenLayers/Control/Geolocate.js\"\nimport \"./OpenLayers/Symbolizer.js\"\nimport \"./OpenLayers/Symbolizer/Point.js\"\nimport \"./OpenLayers/Symbolizer/Line.js\"\nimport \"./OpenLayers/Symbolizer/Polygon.js\"\nimport \"./OpenLayers/Symbolizer/Text.js\"\nimport \"./OpenLayers/Symbolizer/Raster.js\"\nimport \"./OpenLayers/Lang.js\"\nimport \"./OpenLayers/Lang/en.js\"\nimport \"./OpenLayers/Spherical.js\"\nimport \"./OpenLayers/TileManager.js\"\nimport \"./OpenLayers/WPSClient.js\"\nimport \"./OpenLayers/WPSProcess.js\"", "// XMLHttpRequest.js Copyright (C) 2010 Sergey Ilinsky (http://www.ilinsky.com)\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @requires OpenLayers/Request.js\n */\n\n(function () {\n\n    // Save reference to earlier defined object implementation (if any)\n    var oXMLHttpRequest    = window.XMLHttpRequest;\n\n    // Define on browser type\n    var bGecko    = !!window.controllers,\n        bIE        = window.document.all && !window.opera,\n        bIE7    = bIE && window.navigator.userAgent.match(/MSIE 7.0/);\n\n    // Enables \"XMLHttpRequest()\" call next to \"new XMLHttpReques()\"\n    function fXMLHttpRequest() {\n        this._object    = oXMLHttpRequest && !bIE7 ? new oXMLHttpRequest : new window.ActiveXObject(\"Microsoft.XMLHTTP\");\n        this._listeners    = [];\n    };\n\n    // Constructor\n    function cXMLHttpRequest() {\n        return new fXMLHttpRequest;\n    };\n    cXMLHttpRequest.prototype    = fXMLHttpRequest.prototype;\n\n    // BUGFIX: Firefox with Firebug installed would break pages if not executed\n    if (bGecko && oXMLHttpRequest.wrapped)\n        cXMLHttpRequest.wrapped    = oXMLHttpRequest.wrapped;\n\n    // Constants\n    cXMLHttpRequest.UNSENT                = 0;\n    cXMLHttpRequest.OPENED                = 1;\n    cXMLHttpRequest.HEADERS_RECEIVED    = 2;\n    cXMLHttpRequest.LOADING                = 3;\n    cXMLHttpRequest.DONE                = 4;\n\n    // Public Properties\n    cXMLHttpRequest.prototype.readyState    = cXMLHttpRequest.UNSENT;\n    cXMLHttpRequest.prototype.responseText    = '';\n    cXMLHttpRequest.prototype.responseXML    = null;\n    cXMLHttpRequest.prototype.status        = 0;\n    cXMLHttpRequest.prototype.statusText    = '';\n\n    // Priority proposal\n    cXMLHttpRequest.prototype.priority        = \"NORMAL\";\n\n    // Instance-level Events Handlers\n    cXMLHttpRequest.prototype.onreadystatechange    = null;\n\n    // Class-level Events Handlers\n    cXMLHttpRequest.onreadystatechange    = null;\n    cXMLHttpRequest.onopen                = null;\n    cXMLHttpRequest.onsend                = null;\n    cXMLHttpRequest.onabort                = null;\n\n    // Public Methods\n    cXMLHttpRequest.prototype.open    = function(sMethod, sUrl, bAsync, sUser, sPassword) {\n        // Delete headers, required when object is reused\n        delete this._headers;\n\n        // When bAsync parameter value is omitted, use true as default\n        if (arguments.length < 3)\n            bAsync    = true;\n\n        // Save async parameter for fixing Gecko bug with missing readystatechange in synchronous requests\n        this._async        = bAsync;\n\n        // Set the onreadystatechange handler\n        var oRequest    = this,\n            nState        = this.readyState,\n            fOnUnload;\n\n        // BUGFIX: IE - memory leak on page unload (inter-page leak)\n        if (bIE && bAsync) {\n            fOnUnload = function() {\n                if (nState != cXMLHttpRequest.DONE) {\n                    fCleanTransport(oRequest);\n                    // Safe to abort here since onreadystatechange handler removed\n                    oRequest.abort();\n                }\n            };\n            window.attachEvent(\"onunload\", fOnUnload);\n        }\n\n        // Add method sniffer\n        if (cXMLHttpRequest.onopen)\n            cXMLHttpRequest.onopen.apply(this, arguments);\n\n        if (arguments.length > 4)\n            this._object.open(sMethod, sUrl, bAsync, sUser, sPassword);\n        else\n        if (arguments.length > 3)\n            this._object.open(sMethod, sUrl, bAsync, sUser);\n        else\n            this._object.open(sMethod, sUrl, bAsync);\n\n        this.readyState    = cXMLHttpRequest.OPENED;\n        fReadyStateChange(this);\n\n        this._object.onreadystatechange    = function() {\n            if (bGecko && !bAsync)\n                return;\n\n            // Synchronize state\n            oRequest.readyState        = oRequest._object.readyState;\n\n            //\n            fSynchronizeValues(oRequest);\n\n            // BUGFIX: Firefox fires unnecessary DONE when aborting\n            if (oRequest._aborted) {\n                // Reset readyState to UNSENT\n                oRequest.readyState    = cXMLHttpRequest.UNSENT;\n\n                // Return now\n                return;\n            }\n\n            if (oRequest.readyState == cXMLHttpRequest.DONE) {\n                // Free up queue\n                delete oRequest._data;\n/*                if (bAsync)\n                    fQueue_remove(oRequest);*/\n                //\n                fCleanTransport(oRequest);\n// Uncomment this block if you need a fix for IE cache\n/*\n                // BUGFIX: IE - cache issue\n                if (!oRequest._object.getResponseHeader(\"Date\")) {\n                    // Save object to cache\n                    oRequest._cached    = oRequest._object;\n\n                    // Instantiate a new transport object\n                    cXMLHttpRequest.call(oRequest);\n\n                    // Re-send request\n                    if (sUser) {\n                         if (sPassword)\n                            oRequest._object.open(sMethod, sUrl, bAsync, sUser, sPassword);\n                        else\n                            oRequest._object.open(sMethod, sUrl, bAsync, sUser);\n                    }\n                    else\n                        oRequest._object.open(sMethod, sUrl, bAsync);\n                    oRequest._object.setRequestHeader(\"If-Modified-Since\", oRequest._cached.getResponseHeader(\"Last-Modified\") || new window.Date(0));\n                    // Copy headers set\n                    if (oRequest._headers)\n                        for (var sHeader in oRequest._headers)\n                            if (typeof oRequest._headers[sHeader] == \"string\")    // Some frameworks prototype objects with functions\n                                oRequest._object.setRequestHeader(sHeader, oRequest._headers[sHeader]);\n\n                    oRequest._object.onreadystatechange    = function() {\n                        // Synchronize state\n                        oRequest.readyState        = oRequest._object.readyState;\n\n                        if (oRequest._aborted) {\n                            //\n                            oRequest.readyState    = cXMLHttpRequest.UNSENT;\n\n                            // Return\n                            return;\n                        }\n\n                        if (oRequest.readyState == cXMLHttpRequest.DONE) {\n                            // Clean Object\n                            fCleanTransport(oRequest);\n\n                            // get cached request\n                            if (oRequest.status == 304)\n                                oRequest._object    = oRequest._cached;\n\n                            //\n                            delete oRequest._cached;\n\n                            //\n                            fSynchronizeValues(oRequest);\n\n                            //\n                            fReadyStateChange(oRequest);\n\n                            // BUGFIX: IE - memory leak in interrupted\n                            if (bIE && bAsync)\n                                window.detachEvent(\"onunload\", fOnUnload);\n                        }\n                    };\n                    oRequest._object.send(null);\n\n                    // Return now - wait until re-sent request is finished\n                    return;\n                };\n*/\n                // BUGFIX: IE - memory leak in interrupted\n                if (bIE && bAsync)\n                    window.detachEvent(\"onunload\", fOnUnload);\n            }\n\n            // BUGFIX: Some browsers (Internet Explorer, Gecko) fire OPEN readystate twice\n            if (nState != oRequest.readyState)\n                fReadyStateChange(oRequest);\n\n            nState    = oRequest.readyState;\n        }\n    };\n    function fXMLHttpRequest_send(oRequest) {\n        oRequest._object.send(oRequest._data);\n\n        // BUGFIX: Gecko - missing readystatechange calls in synchronous requests\n        if (bGecko && !oRequest._async) {\n            oRequest.readyState    = cXMLHttpRequest.OPENED;\n\n            // Synchronize state\n            fSynchronizeValues(oRequest);\n\n            // Simulate missing states\n            while (oRequest.readyState < cXMLHttpRequest.DONE) {\n                oRequest.readyState++;\n                fReadyStateChange(oRequest);\n                // Check if we are aborted\n                if (oRequest._aborted)\n                    return;\n            }\n        }\n    };\n    cXMLHttpRequest.prototype.send    = function(vData) {\n        // Add method sniffer\n        if (cXMLHttpRequest.onsend)\n            cXMLHttpRequest.onsend.apply(this, arguments);\n\n        if (!arguments.length)\n            vData    = null;\n\n        // BUGFIX: Safari - fails sending documents created/modified dynamically, so an explicit serialization required\n        // BUGFIX: IE - rewrites any custom mime-type to \"text/xml\" in case an XMLNode is sent\n        // BUGFIX: Gecko - fails sending Element (this is up to the implementation either to standard)\n        if (vData && vData.nodeType) {\n            vData    = window.XMLSerializer ? new window.XMLSerializer().serializeToString(vData) : vData.xml;\n            if (!this._headers[\"Content-Type\"])\n                this._object.setRequestHeader(\"Content-Type\", \"application/xml\");\n        }\n\n        this._data    = vData;\n/*\n        // Add to queue\n        if (this._async)\n            fQueue_add(this);\n        else*/\n            fXMLHttpRequest_send(this);\n    };\n    cXMLHttpRequest.prototype.abort    = function() {\n        // Add method sniffer\n        if (cXMLHttpRequest.onabort)\n            cXMLHttpRequest.onabort.apply(this, arguments);\n\n        // BUGFIX: Gecko - unnecessary DONE when aborting\n        if (this.readyState > cXMLHttpRequest.UNSENT)\n            this._aborted    = true;\n\n        this._object.abort();\n\n        // BUGFIX: IE - memory leak\n        fCleanTransport(this);\n\n        this.readyState    = cXMLHttpRequest.UNSENT;\n\n        delete this._data;\n/*        if (this._async)\n            fQueue_remove(this);*/\n    };\n    cXMLHttpRequest.prototype.getAllResponseHeaders    = function() {\n        return this._object.getAllResponseHeaders();\n    };\n    cXMLHttpRequest.prototype.getResponseHeader    = function(sName) {\n        return this._object.getResponseHeader(sName);\n    };\n    cXMLHttpRequest.prototype.setRequestHeader    = function(sName, sValue) {\n        // BUGFIX: IE - cache issue\n        if (!this._headers)\n            this._headers    = {};\n        this._headers[sName]    = sValue;\n\n        return this._object.setRequestHeader(sName, sValue);\n    };\n\n    // EventTarget interface implementation\n    cXMLHttpRequest.prototype.addEventListener    = function(sName, fHandler, bUseCapture) {\n        for (var nIndex = 0, oListener; oListener = this._listeners[nIndex]; nIndex++)\n            if (oListener[0] == sName && oListener[1] == fHandler && oListener[2] == bUseCapture)\n                return;\n        // Add listener\n        this._listeners.push([sName, fHandler, bUseCapture]);\n    };\n\n    cXMLHttpRequest.prototype.removeEventListener    = function(sName, fHandler, bUseCapture) {\n        for (var nIndex = 0, oListener; oListener = this._listeners[nIndex]; nIndex++)\n            if (oListener[0] == sName && oListener[1] == fHandler && oListener[2] == bUseCapture)\n                break;\n        // Remove listener\n        if (oListener)\n            this._listeners.splice(nIndex, 1);\n    };\n\n    cXMLHttpRequest.prototype.dispatchEvent    = function(oEvent) {\n        var oEventPseudo    = {\n            'type':            oEvent.type,\n            'target':        this,\n            'currentTarget':this,\n            'eventPhase':    2,\n            'bubbles':        oEvent.bubbles,\n            'cancelable':    oEvent.cancelable,\n            'timeStamp':    oEvent.timeStamp,\n            'stopPropagation':    function() {},    // There is no flow\n            'preventDefault':    function() {},    // There is no default action\n            'initEvent':        function() {}    // Original event object should be initialized\n        };\n\n        // Execute onreadystatechange\n        if (oEventPseudo.type == \"readystatechange\" && this.onreadystatechange)\n            (this.onreadystatechange.handleEvent || this.onreadystatechange).apply(this, [oEventPseudo]);\n\n        // Execute listeners\n        for (var nIndex = 0, oListener; oListener = this._listeners[nIndex]; nIndex++)\n            if (oListener[0] == oEventPseudo.type && !oListener[2])\n                (oListener[1].handleEvent || oListener[1]).apply(this, [oEventPseudo]);\n    };\n\n    //\n    cXMLHttpRequest.prototype.toString    = function() {\n        return '[' + \"object\" + ' ' + \"XMLHttpRequest\" + ']';\n    };\n\n    cXMLHttpRequest.toString    = function() {\n        return '[' + \"XMLHttpRequest\" + ']';\n    };\n\n    // Helper function\n    function fReadyStateChange(oRequest) {\n        // Sniffing code\n        if (cXMLHttpRequest.onreadystatechange)\n            cXMLHttpRequest.onreadystatechange.apply(oRequest);\n\n        // Fake event\n        oRequest.dispatchEvent({\n            'type':            \"readystatechange\",\n            'bubbles':        false,\n            'cancelable':    false,\n            'timeStamp':    new Date + 0\n        });\n    };\n\n    function fGetDocument(oRequest) {\n        var oDocument    = oRequest.responseXML,\n            sResponse    = oRequest.responseText;\n        // Try parsing responseText\n        if (bIE && sResponse && oDocument && !oDocument.documentElement && oRequest.getResponseHeader(\"Content-Type\").match(/[^\\/]+\\/[^\\+]+\\+xml/)) {\n            oDocument    = new window.ActiveXObject(\"Microsoft.XMLDOM\");\n            oDocument.async                = false;\n            oDocument.validateOnParse    = false;\n            oDocument.loadXML(sResponse);\n        }\n        // Check if there is no error in document\n        if (oDocument)\n            if ((bIE && oDocument.parseError != 0) || !oDocument.documentElement || (oDocument.documentElement && oDocument.documentElement.tagName == \"parsererror\"))\n                return null;\n        return oDocument;\n    };\n\n    function fSynchronizeValues(oRequest) {\n        try {    oRequest.responseText    = oRequest._object.responseText;    } catch (e) {}\n        try {    oRequest.responseXML    = fGetDocument(oRequest._object);    } catch (e) {}\n        try {    oRequest.status            = oRequest._object.status;            } catch (e) {}\n        try {    oRequest.statusText        = oRequest._object.statusText;        } catch (e) {}\n    };\n\n    function fCleanTransport(oRequest) {\n        // BUGFIX: IE - memory leak (on-page leak)\n        oRequest._object.onreadystatechange    = new window.Function;\n    };\n/*\n    // Queue manager\n    var oQueuePending    = {\"CRITICAL\":[],\"HIGH\":[],\"NORMAL\":[],\"LOW\":[],\"LOWEST\":[]},\n        aQueueRunning    = [];\n    function fQueue_add(oRequest) {\n        oQueuePending[oRequest.priority in oQueuePending ? oRequest.priority : \"NORMAL\"].push(oRequest);\n        //\n        setTimeout(fQueue_process);\n    };\n\n    function fQueue_remove(oRequest) {\n        for (var nIndex = 0, bFound    = false; nIndex < aQueueRunning.length; nIndex++)\n            if (bFound)\n                aQueueRunning[nIndex - 1]    = aQueueRunning[nIndex];\n            else\n            if (aQueueRunning[nIndex] == oRequest)\n                bFound    = true;\n        if (bFound)\n            aQueueRunning.length--;\n        //\n        setTimeout(fQueue_process);\n    };\n\n    function fQueue_process() {\n        if (aQueueRunning.length < 6) {\n            for (var sPriority in oQueuePending) {\n                if (oQueuePending[sPriority].length) {\n                    var oRequest    = oQueuePending[sPriority][0];\n                    oQueuePending[sPriority]    = oQueuePending[sPriority].slice(1);\n                    //\n                    aQueueRunning.push(oRequest);\n                    // Send request\n                    fXMLHttpRequest_send(oRequest);\n                    break;\n                }\n            }\n        }\n    };\n*/\n    // Internet Explorer 5.0 (missing apply)\n    if (!window.Function.prototype.apply) {\n        window.Function.prototype.apply    = function(oRequest, oArguments) {\n            if (!oArguments)\n                oArguments    = [];\n            oRequest.__func    = this;\n            oRequest.__func(oArguments[0], oArguments[1], oArguments[2], oArguments[3], oArguments[4]);\n            delete oRequest.__func;\n        };\n    };\n\n    // Register new object with window\n    /**\n     * Class: OpenLayers.Request.XMLHttpRequest\n     * Standard-compliant (W3C) cross-browser implementation of the\n     *     XMLHttpRequest object.  From\n     *     http://code.google.com/p/xmlhttprequest/.\n     */\n    if (!OpenLayers.Request) {\n        /**\n         * This allows for OpenLayers/Request.js to be included\n         * before or after this script.\n         */\n        OpenLayers.Request = {};\n    }\n    OpenLayers.Request.XMLHttpRequest = cXMLHttpRequest;\n})();\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Util.js\n */\n\n/**\n * Namespace: OpenLayers.Projection\n * Methods for coordinate transforms between coordinate systems.  By default,\n *     OpenLayers ships with the ability to transform coordinates between\n *     geographic (EPSG:4326) and web or spherical mercator (EPSG:900913 et al.)\n *     coordinate reference systems.  See the <transform> method for details\n *     on usage.\n *\n * Additional transforms may be added by using the <proj4js at http://proj4js.org/>\n *     library.  If the proj4js library is included, the <transform> method \n *     will work between any two coordinate reference systems with proj4js \n *     definitions.\n *\n * If the proj4js library is not included, or if you wish to allow transforms\n *     between arbitrary coordinate reference systems, use the <addTransform>\n *     method to register a custom transform method.\n */\nOpenLayers.Projection = OpenLayers.Class({\n\n    /**\n     * Property: proj\n     * {Object} Proj4js.Proj instance.\n     */\n    proj: null,\n    \n    /**\n     * Property: projCode\n     * {String}\n     */\n    projCode: null,\n    \n    /**\n     * Property: titleRegEx\n     * {RegExp} regular expression to strip the title from a proj4js definition\n     */\n    titleRegEx: /\\+title=[^\\+]*/,\n\n    /**\n     * Constructor: OpenLayers.Projection\n     * This class offers several methods for interacting with a wrapped \n     *     pro4js projection object. \n     *\n     * Parameters:\n     * projCode - {String} A string identifying the Well Known Identifier for\n     *    the projection.\n     * options - {Object} An optional object to set additional properties\n     *     on the projection.\n     *\n     * Returns:\n     * {<OpenLayers.Projection>} A projection object.\n     */\n    initialize: function(projCode, options) {\n        OpenLayers.Util.extend(this, options);\n        this.projCode = projCode;\n        if (typeof Proj4js == \"object\") {\n            this.proj = new Proj4js.Proj(projCode);\n        }\n    },\n    \n    /**\n     * APIMethod: getCode\n     * Get the string SRS code.\n     *\n     * Returns:\n     * {String} The SRS code.\n     */\n    getCode: function() {\n        return this.proj ? this.proj.srsCode : this.projCode;\n    },\n   \n    /**\n     * APIMethod: getUnits\n     * Get the units string for the projection -- returns null if \n     *     proj4js is not available.\n     *\n     * Returns:\n     * {String} The units abbreviation.\n     */\n    getUnits: function() {\n        return this.proj ? this.proj.units : null;\n    },\n\n    /**\n     * Method: toString\n     * Convert projection to string (getCode wrapper).\n     *\n     * Returns:\n     * {String} The projection code.\n     */\n    toString: function() {\n        return this.getCode();\n    },\n\n    /**\n     * Method: equals\n     * Test equality of two projection instances.  Determines equality based\n     *     solely on the projection code.\n     *\n     * Returns:\n     * {Boolean} The two projections are equivalent.\n     */\n    equals: function(projection) {\n        var p = projection, equals = false;\n        if (p) {\n            if (!(p instanceof OpenLayers.Projection)) {\n                p = new OpenLayers.Projection(p);\n            }\n            if ((typeof Proj4js == \"object\") && this.proj.defData && p.proj.defData) {\n                equals = this.proj.defData.replace(this.titleRegEx, \"\") ==\n                    p.proj.defData.replace(this.titleRegEx, \"\");\n            } else if (p.getCode) {\n                var source = this.getCode(), target = p.getCode();\n                equals = source == target ||\n                    !!OpenLayers.Projection.transforms[source] &&\n                    OpenLayers.Projection.transforms[source][target] ===\n                        OpenLayers.Projection.nullTransform;\n            }\n        }\n        return equals;   \n    },\n\n    /* Method: destroy\n     * Destroy projection object.\n     */\n    destroy: function() {\n        delete this.proj;\n        delete this.projCode;\n    },\n    \n    CLASS_NAME: \"OpenLayers.Projection\" \n});     \n\n/**\n * Property: transforms\n * {Object} Transforms is an object, with from properties, each of which may\n * have a to property. This allows you to define projections without \n * requiring support for proj4js to be included.\n *\n * This object has keys which correspond to a 'source' projection object.  The\n * keys should be strings, corresponding to the projection.getCode() value.\n * Each source projection object should have a set of destination projection\n * keys included in the object. \n * \n * Each value in the destination object should be a transformation function,\n * where the function is expected to be passed an object with a .x and a .y\n * property.  The function should return the object, with the .x and .y\n * transformed according to the transformation function.\n *\n * Note - Properties on this object should not be set directly.  To add a\n *     transform method to this object, use the <addTransform> method.  For an\n *     example of usage, see the OpenLayers.Layer.SphericalMercator file.\n */\nOpenLayers.Projection.transforms = {};\n\n/**\n * APIProperty: defaults\n * {Object} Defaults for the SRS codes known to OpenLayers (currently\n * EPSG:4326, CRS:84, urn:ogc:def:crs:EPSG:6.6:4326, EPSG:900913, EPSG:3857,\n * EPSG:102113, EPSG:102100 and OSGEO:41001). Keys are the SRS code, values are\n * units, maxExtent (the validity extent for the SRS in projected coordinates),\n * worldExtent (the world's extent in EPSG:4326) and yx (true if this SRS\n * is known to have a reverse axis order).\n */\nOpenLayers.Projection.defaults = {\n    \"EPSG:4326\": {\n        units: \"degrees\",\n        maxExtent: [-180, -90, 180, 90],\n        worldExtent: [-180, -90, 180, 90],\n        yx: true\n    },\n    \"CRS:84\": {\n        units: \"degrees\",\n        maxExtent: [-180, -90, 180, 90],\n        worldExtent: [-180, -90, 180, 90]\n    },\n    \"EPSG:900913\": {\n        units: \"m\",\n        maxExtent: [-20037508.34, -20037508.34, 20037508.34, 20037508.34],\n        worldExtent: [-180, -89, 180, 89]\n    }\n};\n\n/**\n * APIMethod: addTransform\n * Set a custom transform method between two projections.  Use this method in\n *     cases where the proj4js lib is not available or where custom projections\n *     need to be handled.\n *\n * Parameters:\n * from - {String} The code for the source projection\n * to - {String} the code for the destination projection\n * method - {Function} A function that takes a point as an argument and\n *     transforms that point from the source to the destination projection\n *     in place.  The original point should be modified.\n */\nOpenLayers.Projection.addTransform = function(from, to, method) {\n    if (method === OpenLayers.Projection.nullTransform) {\n        var defaults = OpenLayers.Projection.defaults[from];\n        if (defaults && !OpenLayers.Projection.defaults[to]) {\n            OpenLayers.Projection.defaults[to] = defaults;\n        }\n    }\n    if(!OpenLayers.Projection.transforms[from]) {\n        OpenLayers.Projection.transforms[from] = {};\n    }\n    OpenLayers.Projection.transforms[from][to] = method;\n};\n\n/**\n * APIMethod: transform\n * Transform a point coordinate from one projection to another.  Note that\n *     the input point is transformed in place.\n * \n * Parameters:\n * point - {<OpenLayers.Geometry.Point> | Object} An object with x and y\n *     properties representing coordinates in those dimensions.\n * source - {OpenLayers.Projection} Source map coordinate system\n * dest - {OpenLayers.Projection} Destination map coordinate system\n *\n * Returns:\n * point - {object} A transformed coordinate.  The original point is modified.\n */\nOpenLayers.Projection.transform = function(point, source, dest) {\n    if (source && dest) {\n        if (!(source instanceof OpenLayers.Projection)) {\n            source = new OpenLayers.Projection(source);\n        }\n        if (!(dest instanceof OpenLayers.Projection)) {\n            dest = new OpenLayers.Projection(dest);\n        }\n        if (source.proj && dest.proj) {\n            point = Proj4js.transform(source.proj, dest.proj, point);\n        } else {\n            var sourceCode = source.getCode();\n            var destCode = dest.getCode();\n            var transforms = OpenLayers.Projection.transforms;\n            if (transforms[sourceCode] && transforms[sourceCode][destCode]) {\n                transforms[sourceCode][destCode](point);\n            }\n        }\n    }\n    return point;\n};\n\n/**\n * APIFunction: nullTransform\n * A null transformation - useful for defining projection aliases when\n * proj4js is not available:\n *\n * (code)\n * OpenLayers.Projection.addTransform(\"EPSG:3857\", \"EPSG:900913\",\n *     OpenLayers.Projection.nullTransform);\n * OpenLayers.Projection.addTransform(\"EPSG:900913\", \"EPSG:3857\",\n *     OpenLayers.Projection.nullTransform);\n * (end)\n */\nOpenLayers.Projection.nullTransform = function(point) {\n    return point;\n};\n\n/**\n * Note: Transforms for web mercator <-> geographic\n * OpenLayers recognizes EPSG:3857, EPSG:900913, EPSG:102113, EPSG:102100 and \n * OSGEO:41001. OpenLayers originally started referring to EPSG:900913 as web\n * mercator. The EPSG has declared EPSG:3857 to be web mercator.\n * ArcGIS 10 recognizes the EPSG:3857, EPSG:102113, and EPSG:102100 as\n * equivalent.  See http://blogs.esri.com/Dev/blogs/arcgisserver/archive/2009/11/20/ArcGIS-Online-moving-to-Google-_2F00_-Bing-tiling-scheme_3A00_-What-does-this-mean-for-you_3F00_.aspx#12084.\n * For geographic, OpenLayers recognizes EPSG:4326, CRS:84 and\n * urn:ogc:def:crs:EPSG:6.6:4326. OpenLayers also knows about the reverse axis\n * order for EPSG:4326. \n */\n(function() {\n\n    var pole = 20037508.34;\n\n    function inverseMercator(xy) {\n        xy.x = 180 * xy.x / pole;\n        xy.y = 180 / Math.PI * (2 * Math.atan(Math.exp((xy.y / pole) * Math.PI)) - Math.PI / 2);\n        return xy;\n    }\n\n    function forwardMercator(xy) {\n        xy.x = xy.x * pole / 180;\n        var y = Math.log(Math.tan((90 + xy.y) * Math.PI / 360)) / Math.PI * pole;\n        xy.y = Math.max(-20037508.34, Math.min(y, 20037508.34));\n        return xy;\n    }\n\n    function map(base, codes) {\n        var add = OpenLayers.Projection.addTransform;\n        var same = OpenLayers.Projection.nullTransform;\n        var i, len, code, other, j;\n        for (i=0, len=codes.length; i<len; ++i) {\n            code = codes[i];\n            add(base, code, forwardMercator);\n            add(code, base, inverseMercator);\n            for (j=i+1; j<len; ++j) {\n                other = codes[j];\n                add(code, other, same);\n                add(other, code, same);\n            }\n        }\n    }\n    \n    // list of equivalent codes for web mercator\n    var mercator = [\"EPSG:900913\", \"EPSG:3857\", \"EPSG:102113\", \"EPSG:102100\", \"OSGEO:41001\"],\n        geographic = [\"CRS:84\", \"urn:ogc:def:crs:EPSG:6.6:4326\", \"EPSG:4326\"],\n        i;\n    for (i=mercator.length-1; i>=0; --i) {\n        map(mercator[i], geographic);\n    }\n    for (i=geographic.length-1; i>=0; --i) {\n        map(geographic[i], mercator);\n    }\n\n})();\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Util.js\n * @requires OpenLayers/Util/vendorPrefix.js\n * @requires OpenLayers/Events.js\n * @requires OpenLayers/Tween.js\n * @requires OpenLayers/Projection.js\n */\n\n/**\n * Class: OpenLayers.Map\n * Instances of OpenLayers.Map are interactive maps embedded in a web page.\n * Create a new map with the <OpenLayers.Map> constructor.\n * \n * On their own maps do not provide much functionality.  To extend a map\n * it's necessary to add controls (<OpenLayers.Control>) and \n * layers (<OpenLayers.Layer>) to the map. \n */\nOpenLayers.Map = OpenLayers.Class({\n    \n    /**\n     * Constant: Z_INDEX_BASE\n     * {Object} Base z-indexes for different classes of thing \n     */\n    Z_INDEX_BASE: {\n        BaseLayer: 100,\n        Overlay: 325,\n        Feature: 725,\n        Popup: 750,\n        Control: 1000\n    },\n\n    /**\n     * APIProperty: events\n     * {<OpenLayers.Events>}\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * map.events.register(type, obj, listener);\n     * (end)\n     *\n     * Listeners will be called with a reference to an event object.  The\n     *     properties of this event depends on exactly what happened.\n     *\n     * All event objects have at least the following properties:\n     * object - {Object} A reference to map.events.object.\n     * element - {DOMElement} A reference to map.events.element.\n     *\n     * Browser events have the following additional properties:\n     * xy - {<OpenLayers.Pixel>} The pixel location of the event (relative\n     *     to the the map viewport).\n     *\n     * Supported map event types:\n     * preaddlayer - triggered before a layer has been added.  The event\n     *     object will include a *layer* property that references the layer  \n     *     to be added. When a listener returns \"false\" the adding will be \n     *     aborted.\n     * addlayer - triggered after a layer has been added.  The event object\n     *     will include a *layer* property that references the added layer.\n     * preremovelayer - triggered before a layer has been removed. The event\n     *     object will include a *layer* property that references the layer  \n     *     to be removed. When a listener returns \"false\" the removal will be \n     *     aborted.\n     * removelayer - triggered after a layer has been removed.  The event\n     *     object will include a *layer* property that references the removed\n     *     layer.\n     * changelayer - triggered after a layer name change, order change,\n     *     opacity change, params change, visibility change (actual visibility,\n     *     not the layer's visibility property) or attribution change (due to\n     *     extent change). Listeners will receive an event object with *layer*\n     *     and *property* properties. The *layer* property will be a reference\n     *     to the changed layer. The *property* property will be a key to the\n     *     changed property (name, order, opacity, params, visibility or\n     *     attribution).\n     * movestart - triggered after the start of a drag, pan, or zoom. The event\n     *     object may include a *zoomChanged* property that tells whether the\n     *     zoom has changed.\n     * move - triggered after each drag, pan, or zoom\n     * moveend - triggered after a drag, pan, or zoom completes\n     * zoomstart - triggered when a zoom starts. Listeners receive an object\n     *     with *center* and *zoom* properties, for the target center and zoom\n     *     level.\n     * zoomend - triggered after a zoom completes\n     * mouseover - triggered after mouseover the map\n     * mouseout - triggered after mouseout the map\n     * mousemove - triggered after mousemove the map\n     * changebaselayer - triggered after the base layer changes\n     * updatesize - triggered after the <updateSize> method was executed\n     */\n\n    /**\n     * Property: id\n     * {String} Unique identifier for the map\n     */\n    id: null,\n    \n    /**\n     * Property: fractionalZoom\n     * {Boolean} For a base layer that supports it, allow the map resolution\n     *     to be set to a value between one of the values in the resolutions\n     *     array.  Default is false.\n     *\n     * When fractionalZoom is set to true, it is possible to zoom to\n     *     an arbitrary extent.  This requires a base layer from a source\n     *     that supports requests for arbitrary extents (i.e. not cached\n     *     tiles on a regular lattice).  This means that fractionalZoom\n     *     will not work with commercial layers (Google, Yahoo, VE), layers\n     *     using TileCache, or any other pre-cached data sources.\n     *\n     * If you are using fractionalZoom, then you should also use\n     *     <getResolutionForZoom> instead of layer.resolutions[zoom] as the\n     *     former works for non-integer zoom levels.\n     */\n    fractionalZoom: false,\n    \n    /**\n     * APIProperty: events\n     * {<OpenLayers.Events>} An events object that handles all \n     *                       events on the map\n     */\n    events: null,\n    \n    /**\n     * APIProperty: allOverlays\n     * {Boolean} Allow the map to function with \"overlays\" only.  Defaults to\n     *     false.  If true, the lowest layer in the draw order will act as\n     *     the base layer.  In addition, if set to true, all layers will\n     *     have isBaseLayer set to false when they are added to the map.\n     *\n     * Note:\n     * If you set map.allOverlays to true, then you *cannot* use\n     *     map.setBaseLayer or layer.setIsBaseLayer.  With allOverlays true,\n     *     the lowest layer in the draw layer is the base layer.  So, to change\n     *     the base layer, use <setLayerIndex> or <raiseLayer> to set the layer\n     *     index to 0.\n     */\n    allOverlays: false,\n\n    /**\n     * APIProperty: div\n     * {DOMElement|String} The element that contains the map (or an id for\n     *     that element).  If the <OpenLayers.Map> constructor is called\n     *     with two arguments, this should be provided as the first argument.\n     *     Alternatively, the map constructor can be called with the options\n     *     object as the only argument.  In this case (one argument), a\n     *     div property may or may not be provided.  If the div property\n     *     is not provided, the map can be rendered to a container later\n     *     using the <render> method.\n     *     \n     * Note:\n     * If you are calling <render> after map construction, do not use\n     *     <maxResolution>  auto.  Instead, divide your <maxExtent> by your\n     *     maximum expected dimension.\n     */\n    div: null,\n    \n    /**\n     * Property: dragging\n     * {Boolean} The map is currently being dragged.\n     */\n    dragging: false,\n\n    /**\n     * Property: size\n     * {<OpenLayers.Size>} Size of the main div (this.div)\n     */\n    size: null,\n    \n    /**\n     * Property: viewPortDiv\n     * {HTMLDivElement} The element that represents the map viewport\n     */\n    viewPortDiv: null,\n\n    /**\n     * Property: layerContainerOrigin\n     * {<OpenLayers.LonLat>} The lonlat at which the later container was\n     *                       re-initialized (on-zoom)\n     */\n    layerContainerOrigin: null,\n\n    /**\n     * Property: layerContainerDiv\n     * {HTMLDivElement} The element that contains the layers.\n     */\n    layerContainerDiv: null,\n\n    /**\n     * APIProperty: layers\n     * {Array(<OpenLayers.Layer>)} Ordered list of layers in the map\n     */\n    layers: null,\n\n    /**\n     * APIProperty: controls\n     * {Array(<OpenLayers.Control>)} List of controls associated with the map.\n     *\n     * If not provided in the map options at construction, the map will\n     *     by default be given the following controls if present in the build:\n     *  - <OpenLayers.Control.Navigation> or <OpenLayers.Control.TouchNavigation>\n     *  - <OpenLayers.Control.Zoom> or <OpenLayers.Control.PanZoom>\n     *  - <OpenLayers.Control.ArgParser>\n     *  - <OpenLayers.Control.Attribution>\n     */\n    controls: null,\n\n    /**\n     * Property: popups\n     * {Array(<OpenLayers.Popup>)} List of popups associated with the map\n     */\n    popups: null,\n\n    /**\n     * APIProperty: baseLayer\n     * {<OpenLayers.Layer>} The currently selected base layer.  This determines\n     * min/max zoom level, projection, etc.\n     */\n    baseLayer: null,\n    \n    /**\n     * Property: center\n     * {<OpenLayers.LonLat>} The current center of the map\n     */\n    center: null,\n\n    /**\n     * Property: resolution\n     * {Float} The resolution of the map.\n     */\n    resolution: null,\n\n    /**\n     * Property: zoom\n     * {Integer} The current zoom level of the map\n     */\n    zoom: 0,    \n\n    /**\n     * Property: panRatio\n     * {Float} The ratio of the current extent within\n     *         which panning will tween.\n     */\n    panRatio: 1.5,    \n\n    /**\n     * APIProperty: options\n     * {Object} The options object passed to the class constructor. Read-only.\n     */\n    options: null,\n\n  // Options\n\n    /**\n     * APIProperty: tileSize\n     * {<OpenLayers.Size>} Set in the map options to override the default tile\n     *                     size for this map.\n     */\n    tileSize: null,\n\n    /**\n     * APIProperty: projection\n     * {String} Set in the map options to specify the default projection \n     *          for layers added to this map. When using a projection other than EPSG:4326\n     *          (CRS:84, Geographic) or EPSG:3857 (EPSG:900913, Web Mercator),\n     *          also set maxExtent, maxResolution or resolutions.  Default is \"EPSG:4326\".\n     *          Note that the projection of the map is usually determined\n     *          by that of the current baseLayer (see <baseLayer> and <getProjectionObject>).\n     */\n    projection: \"EPSG:4326\",    \n        \n    /**\n     * APIProperty: units\n     * {String} The map units.  Possible values are 'degrees' (or 'dd'), 'm', \n     *     'ft', 'km', 'mi', 'inches'.  Normally taken from the projection.\n     *     Only required if both map and layers do not define a projection,\n     *     or if they define a projection which does not define units\n     */\n    units: null,\n\n    /**\n     * APIProperty: resolutions\n     * {Array(Float)} A list of map resolutions (map units per pixel) in \n     *     descending order.  If this is not set in the layer constructor, it \n     *     will be set based on other resolution related properties \n     *     (maxExtent, maxResolution, maxScale, etc.).\n     */\n    resolutions: null,\n\n    /**\n     * APIProperty: maxResolution\n     * {Float} Required if you are not displaying the whole world on a tile\n     * with the size specified in <tileSize>.\n     */\n    maxResolution: null,\n\n    /**\n     * APIProperty: minResolution\n     * {Float}\n     */\n    minResolution: null,\n\n    /**\n     * APIProperty: maxScale\n     * {Float}\n     */\n    maxScale: null,\n\n    /**\n     * APIProperty: minScale\n     * {Float}\n     */\n    minScale: null,\n\n    /**\n     * APIProperty: maxExtent\n     * {<OpenLayers.Bounds>|Array} If provided as an array, the array\n     *     should consist of four values (left, bottom, right, top).\n     *     The maximum extent for the map.\n     *     Default depends on projection; if this is one of those defined in OpenLayers.Projection.defaults\n     *     (EPSG:4326 or web mercator), maxExtent will be set to the value defined there;\n     *     else, defaults to null.\n     *     To restrict user panning and zooming of the map, use <restrictedExtent> instead.\n     *     The value for <maxExtent> will change calculations for tile URLs.\n     */\n    maxExtent: null,\n    \n    /**\n     * APIProperty: minExtent\n     * {<OpenLayers.Bounds>|Array} If provided as an array, the array\n     *     should consist of four values (left, bottom, right, top).\n     *     The minimum extent for the map.  Defaults to null.\n     */\n    minExtent: null,\n    \n    /**\n     * APIProperty: restrictedExtent\n     * {<OpenLayers.Bounds>|Array} If provided as an array, the array\n     *     should consist of four values (left, bottom, right, top).\n     *     Limit map navigation to this extent where possible.\n     *     If a non-null restrictedExtent is set, panning will be restricted\n     *     to the given bounds.  In addition, zooming to a resolution that\n     *     displays more than the restricted extent will center the map\n     *     on the restricted extent.  If you wish to limit the zoom level\n     *     or resolution, use maxResolution.\n     */\n    restrictedExtent: null,\n\n    /**\n     * APIProperty: numZoomLevels\n     * {Integer} Number of zoom levels for the map.  Defaults to 16.  Set a\n     *           different value in the map options if needed.\n     */\n    numZoomLevels: 16,\n\n    /**\n     * APIProperty: theme\n     * {String} Relative path to a CSS file from which to load theme styles.\n     *          Specify null in the map options (e.g. {theme: null}) if you \n     *          want to get cascading style declarations - by putting links to \n     *          stylesheets or style declarations directly in your page.\n     */\n    theme: null,\n    \n    /** \n     * APIProperty: displayProjection\n     * {<OpenLayers.Projection>} Requires proj4js support for projections other\n     *     than EPSG:4326 or EPSG:900913/EPSG:3857. Projection used by\n     *     several controls to display data to user. If this property is set,\n     *     it will be set on any control which has a null displayProjection\n     *     property at the time the control is added to the map. \n     */\n    displayProjection: null,\n\n    /**\n     * APIProperty: tileManager\n     * {<OpenLayers.TileManager>|Object} By default, and if the build contains\n     * TileManager.js, the map will use the TileManager to queue image requests\n     * and to cache tile image elements. To create a map without a TileManager\n     * configure the map with tileManager: null. To create a TileManager with\n     * non-default options, supply the options instead or alternatively supply\n     * an instance of {<OpenLayers.TileManager>}.\n     */\n\n    /**\n     * APIProperty: fallThrough\n     * {Boolean} Should OpenLayers allow events on the map to fall through to\n     *           other elements on the page, or should it swallow them? (#457)\n     *           Default is to swallow.\n     */\n    fallThrough: false,\n\n    /**\n     * APIProperty: autoUpdateSize\n     * {Boolean} Should OpenLayers automatically update the size of the map\n     * when the resize event is fired. Default is true.\n     */\n    autoUpdateSize: true,\n    \n    /**\n     * APIProperty: eventListeners\n     * {Object} If set as an option at construction, the eventListeners\n     *     object will be registered with <OpenLayers.Events.on>.  Object\n     *     structure must be a listeners object as shown in the example for\n     *     the events.on method.\n     */\n    eventListeners: null,\n\n    /**\n     * Property: panTween\n     * {<OpenLayers.Tween>} Animated panning tween object, see panTo()\n     */\n    panTween: null,\n\n    /**\n     * APIProperty: panMethod\n     * {Function} The Easing function to be used for tweening.  Default is\n     * OpenLayers.Easing.Expo.easeOut. Setting this to 'null' turns off\n     * animated panning.\n     */\n    panMethod: OpenLayers.Easing.Expo.easeOut,\n    \n    /**\n     * Property: panDuration\n     * {Integer} The number of steps to be passed to the\n     * OpenLayers.Tween.start() method when the map is\n     * panned.\n     * Default is 50.\n     */\n    panDuration: 50,\n    \n    /**\n     * Property: zoomTween\n     * {<OpenLayers.Tween>} Animated zooming tween object, see zoomTo()\n     */\n    zoomTween: null,\n\n    /**\n     * APIProperty: zoomMethod\n     * {Function} The Easing function to be used for tweening.  Default is\n     * OpenLayers.Easing.Quad.easeOut. Setting this to 'null' turns off\n     * animated zooming.\n     */\n    zoomMethod: OpenLayers.Easing.Quad.easeOut,\n    \n    /**\n     * Property: zoomDuration\n     * {Integer} The number of steps to be passed to the\n     * OpenLayers.Tween.start() method when the map is zoomed.\n     * Default is 20.\n     */\n    zoomDuration: 20,\n    \n    /**\n     * Property: paddingForPopups\n     * {<OpenLayers.Bounds>} Outside margin of the popup. Used to prevent \n     *     the popup from getting too close to the map border.\n     */\n    paddingForPopups : null,\n    \n    /**\n     * Property: layerContainerOriginPx\n     * {Object} Cached object representing the layer container origin (in pixels).\n     */\n    layerContainerOriginPx: null,\n    \n    /**\n     * Property: minPx\n     * {Object} An object with a 'x' and 'y' values that is the lower\n     *     left of maxExtent in viewport pixel space.\n     *     Used to verify in moveByPx that the new location we're moving to\n     *     is valid. It is also used in the getLonLatFromViewPortPx function\n     *     of Layer.\n     */\n    minPx: null,\n    \n    /**\n     * Property: maxPx\n     * {Object} An object with a 'x' and 'y' values that is the top\n     *     right of maxExtent in viewport pixel space.\n     *     Used to verify in moveByPx that the new location we're moving to\n     *     is valid.\n     */\n    maxPx: null,\n    \n    /**\n     * Constructor: OpenLayers.Map\n     * Constructor for a new OpenLayers.Map instance.  There are two possible\n     *     ways to call the map constructor.  See the examples below.\n     *\n     * Parameters:\n     * div - {DOMElement|String}  The element or id of an element in your page\n     *     that will contain the map.  May be omitted if the <div> option is\n     *     provided or if you intend to call the <render> method later.\n     * options - {Object} Optional object with properties to tag onto the map.\n     *\n     * Valid options (in addition to the listed API properties):\n     * center - {<OpenLayers.LonLat>|Array} The default initial center of the map.\n     *     If provided as array, the first value is the x coordinate,\n     *     and the 2nd value is the y coordinate.\n     *     Only specify if <layers> is provided.\n     *     Note that if an ArgParser/Permalink control is present,\n     *     and the querystring contains coordinates, center will be set\n     *     by that, and this option will be ignored.\n     * zoom - {Number} The initial zoom level for the map. Only specify if\n     *     <layers> is provided.\n     *     Note that if an ArgParser/Permalink control is present,\n     *     and the querystring contains a zoom level, zoom will be set\n     *     by that, and this option will be ignored.\n     * \n     * Examples:\n     * (code)\n     * // create a map with default options in an element with the id \"map1\"\n     * var map = new OpenLayers.Map(\"map1\");\n     *\n     * // create a map with non-default options in an element with id \"map2\"\n     * var options = {\n     *     projection: \"EPSG:3857\",\n     *     maxExtent: new OpenLayers.Bounds(-200000, -200000, 200000, 200000),\n     *     center: new OpenLayers.LonLat(-12356463.476333, 5621521.4854095)\n     * };\n     * var map = new OpenLayers.Map(\"map2\", options);\n     *\n     * // map with non-default options - same as above but with a single argument,\n     * // a restricted extent, and using arrays for bounds and center\n     * var map = new OpenLayers.Map({\n     *     div: \"map_id\",\n     *     projection: \"EPSG:3857\",\n     *     maxExtent: [-18924313.432222, -15538711.094146, 18924313.432222, 15538711.094146],\n     *     restrictedExtent: [-13358338.893333, -9608371.5085962, 13358338.893333, 9608371.5085962],\n     *     center: [-12356463.476333, 5621521.4854095]\n     * });\n     *\n     * // create a map without a reference to a container - call render later\n     * var map = new OpenLayers.Map({\n     *     projection: \"EPSG:3857\",\n     *     maxExtent: new OpenLayers.Bounds(-200000, -200000, 200000, 200000)\n     * });\n     * (end)\n     */    \n    initialize: function (div, options) {\n        \n        // If only one argument is provided, check if it is an object.\n        var isDOMElement = OpenLayers.Util.isElement(div);\n        if(arguments.length === 1 && typeof div === \"object\" && !isDOMElement) {\n            options = div;\n            div = options && options.div;\n        }\n\n        // Simple-type defaults are set in class definition. \n        //  Now set complex-type defaults \n        this.tileSize = new OpenLayers.Size(OpenLayers.Map.TILE_WIDTH,\n                                            OpenLayers.Map.TILE_HEIGHT);\n        \n        this.paddingForPopups = new OpenLayers.Bounds(15, 15, 15, 15);\n\n        this.theme = OpenLayers._getScriptLocation() + \n                             'theme/default/style.css'; \n\n        // backup original options\n        this.options = OpenLayers.Util.extend({}, options);\n\n        // now override default options \n        OpenLayers.Util.extend(this, options);\n        \n        var projCode = this.projection instanceof OpenLayers.Projection ?\n            this.projection.projCode : this.projection;\n        OpenLayers.Util.applyDefaults(this, OpenLayers.Projection.defaults[projCode]);\n        \n        // allow extents and center to be arrays\n        if (this.maxExtent && !(this.maxExtent instanceof OpenLayers.Bounds)) {\n            this.maxExtent = new OpenLayers.Bounds(this.maxExtent);\n        }\n        if (this.minExtent && !(this.minExtent instanceof OpenLayers.Bounds)) {\n            this.minExtent = new OpenLayers.Bounds(this.minExtent);\n        }\n        if (this.restrictedExtent && !(this.restrictedExtent instanceof OpenLayers.Bounds)) {\n            this.restrictedExtent = new OpenLayers.Bounds(this.restrictedExtent);\n        }\n        if (this.center && !(this.center instanceof OpenLayers.LonLat)) {\n            this.center = new OpenLayers.LonLat(this.center);\n        }\n\n        // initialize layers array\n        this.layers = [];\n\n        this.id = OpenLayers.Util.createUniqueID(\"OpenLayers.Map_\");\n\n        this.div = OpenLayers.Util.getElement(div);\n        if(!this.div) {\n            this.div = document.createElement(\"div\");\n            this.div.style.height = \"1px\";\n            this.div.style.width = \"1px\";\n        }\n        \n        OpenLayers.Element.addClass(this.div, 'olMap');\n\n        // the viewPortDiv is the outermost div we modify\n        var id = this.id + \"_OpenLayers_ViewPort\";\n        this.viewPortDiv = OpenLayers.Util.createDiv(id, null, null, null,\n                                                     \"relative\", null,\n                                                     \"hidden\");\n        this.viewPortDiv.style.width = \"100%\";\n        this.viewPortDiv.style.height = \"100%\";\n        this.viewPortDiv.className = \"olMapViewport\";\n        this.div.appendChild(this.viewPortDiv);\n\n        this.events = new OpenLayers.Events(\n            this, this.viewPortDiv, null, this.fallThrough, \n            {includeXY: true}\n        );\n        \n        if (OpenLayers.TileManager && this.tileManager !== null) {\n            if (!(this.tileManager instanceof OpenLayers.TileManager)) {\n                this.tileManager = new OpenLayers.TileManager(this.tileManager);\n            }\n            this.tileManager.addMap(this);\n        }\n\n        // the layerContainerDiv is the one that holds all the layers\n        id = this.id + \"_OpenLayers_Container\";\n        this.layerContainerDiv = OpenLayers.Util.createDiv(id);\n        this.layerContainerDiv.style.zIndex=this.Z_INDEX_BASE['Popup']-1;\n        this.layerContainerOriginPx = {x: 0, y: 0};\n        this.applyTransform();\n        \n        this.viewPortDiv.appendChild(this.layerContainerDiv);\n\n        this.updateSize();\n        if(this.eventListeners instanceof Object) {\n            this.events.on(this.eventListeners);\n        }\n\n        if (this.autoUpdateSize === true) {\n            // updateSize on catching the window's resize\n            // Note that this is ok, as updateSize() does nothing if the \n            // map's size has not actually changed.\n            this.updateSizeDestroy = OpenLayers.Function.bind(this.updateSize, \n                this);\n            OpenLayers.Event.observe(window, 'resize',\n                            this.updateSizeDestroy);\n        }\n        \n        // only append link stylesheet if the theme property is set\n        if(this.theme) {\n            // check existing links for equivalent url\n            var addNode = true;\n            var nodes = document.getElementsByTagName('link');\n            for(var i=0, len=nodes.length; i<len; ++i) {\n                if(OpenLayers.Util.isEquivalentUrl(nodes.item(i).href,\n                                                   this.theme)) {\n                    addNode = false;\n                    break;\n                }\n            }\n            // only add a new node if one with an equivalent url hasn't already\n            // been added\n            if(addNode) {\n                var cssNode = document.createElement('link');\n                cssNode.setAttribute('rel', 'stylesheet');\n                cssNode.setAttribute('type', 'text/css');\n                cssNode.setAttribute('href', this.theme);\n                document.getElementsByTagName('head')[0].appendChild(cssNode);\n            }\n        }\n        \n        if (this.controls == null) { // default controls\n            this.controls = [];\n            if (OpenLayers.Control != null) { // running full or lite?\n                // Navigation or TouchNavigation depending on what is in build\n                if (OpenLayers.Control.Navigation) {\n                    this.controls.push(new OpenLayers.Control.Navigation());\n                } else if (OpenLayers.Control.TouchNavigation) {\n                    this.controls.push(new OpenLayers.Control.TouchNavigation());\n                }\n                if (OpenLayers.Control.Zoom) {\n                    this.controls.push(new OpenLayers.Control.Zoom());\n                } else if (OpenLayers.Control.PanZoom) {\n                    this.controls.push(new OpenLayers.Control.PanZoom());\n                }\n\n                if (OpenLayers.Control.ArgParser) {\n                    this.controls.push(new OpenLayers.Control.ArgParser());\n                }\n                if (OpenLayers.Control.Attribution) {\n                    this.controls.push(new OpenLayers.Control.Attribution());\n                }\n            }\n        }\n\n        for(var i=0, len=this.controls.length; i<len; i++) {\n            this.addControlToMap(this.controls[i]);\n        }\n\n        this.popups = [];\n\n        this.unloadDestroy = OpenLayers.Function.bind(this.destroy, this);\n        \n\n        // always call map.destroy()\n        OpenLayers.Event.observe(window, 'unload', this.unloadDestroy);\n        \n        // add any initial layers\n        if (options && options.layers) {\n            /** \n             * If you have set options.center, the map center property will be\n             * set at this point.  However, since setCenter has not been called,\n             * addLayers gets confused.  So we delete the map center in this \n             * case.  Because the check below uses options.center, it will\n             * be properly set below.\n             */\n            delete this.center;\n            delete this.zoom;\n            this.addLayers(options.layers);\n            // set center (and optionally zoom)\n            if (options.center && !this.getCenter()) {\n                // zoom can be undefined here\n                this.setCenter(options.center, options.zoom);\n            }\n        }\n\n        if (this.panMethod) {\n            this.panTween = new OpenLayers.Tween(this.panMethod);\n        }\n        if (this.zoomMethod && this.applyTransform.transform) {\n            this.zoomTween = new OpenLayers.Tween(this.zoomMethod);\n        }\n    },\n\n    /** \n     * APIMethod: getViewport\n     * Get the DOMElement representing the view port.\n     *\n     * Returns:\n     * {DOMElement}\n     */\n    getViewport: function() {\n        return this.viewPortDiv;\n    },\n    \n    /**\n     * APIMethod: render\n     * Render the map to a specified container.\n     * \n     * Parameters:\n     * div - {String|DOMElement} The container that the map should be rendered\n     *     to. If different than the current container, the map viewport\n     *     will be moved from the current to the new container.\n     */\n    render: function(div) {\n        this.div = OpenLayers.Util.getElement(div);\n        OpenLayers.Element.addClass(this.div, 'olMap');\n        this.viewPortDiv.parentNode.removeChild(this.viewPortDiv);\n        this.div.appendChild(this.viewPortDiv);\n        this.updateSize();\n    },\n\n    /**\n     * Method: unloadDestroy\n     * Function that is called to destroy the map on page unload. stored here\n     *     so that if map is manually destroyed, we can unregister this.\n     */\n    unloadDestroy: null,\n    \n    /**\n     * Method: updateSizeDestroy\n     * When the map is destroyed, we need to stop listening to updateSize\n     *    events: this method stores the function we need to unregister in \n     *    non-IE browsers.\n     */\n    updateSizeDestroy: null,\n\n    /**\n     * APIMethod: destroy\n     * Destroy this map.\n     *    Note that if you are using an application which removes a container\n     *    of the map from the DOM, you need to ensure that you destroy the\n     *    map *before* this happens; otherwise, the page unload handler\n     *    will fail because the DOM elements that map.destroy() wants\n     *    to clean up will be gone. (See \n     *    http://trac.osgeo.org/openlayers/ticket/2277 for more information).\n     *    This will apply to GeoExt and also to other applications which\n     *    modify the DOM of the container of the OpenLayers Map.\n     */\n    destroy:function() {\n        // if unloadDestroy is null, we've already been destroyed\n        if (!this.unloadDestroy) {\n            return false;\n        }\n        \n        // make sure panning doesn't continue after destruction\n        if(this.panTween) {\n            this.panTween.stop();\n            this.panTween = null;\n        }\n        // make sure zooming doesn't continue after destruction\n        if(this.zoomTween) {\n            this.zoomTween.stop();\n            this.zoomTween = null;\n        }\n\n        // map has been destroyed. don't do it again!\n        OpenLayers.Event.stopObserving(window, 'unload', this.unloadDestroy);\n        this.unloadDestroy = null;\n\n        if (this.updateSizeDestroy) {\n            OpenLayers.Event.stopObserving(window, 'resize', \n                                           this.updateSizeDestroy);\n        }\n        \n        this.paddingForPopups = null;    \n\n        if (this.controls != null) {\n            for (var i = this.controls.length - 1; i>=0; --i) {\n                this.controls[i].destroy();\n            } \n            this.controls = null;\n        }\n        if (this.layers != null) {\n            for (var i = this.layers.length - 1; i>=0; --i) {\n                //pass 'false' to destroy so that map wont try to set a new \n                // baselayer after each baselayer is removed\n                this.layers[i].destroy(false);\n            } \n            this.layers = null;\n        }\n        if (this.viewPortDiv && this.viewPortDiv.parentNode) {\n            this.viewPortDiv.parentNode.removeChild(this.viewPortDiv);\n        }\n        this.viewPortDiv = null;\n        \n        if (this.tileManager) {\n            this.tileManager.removeMap(this);\n            this.tileManager = null;\n        }\n\n        if(this.eventListeners) {\n            this.events.un(this.eventListeners);\n            this.eventListeners = null;\n        }\n        this.events.destroy();\n        this.events = null;\n\n        this.options = null;\n    },\n\n    /**\n     * APIMethod: setOptions\n     * Change the map options\n     *\n     * Parameters:\n     * options - {Object} Hashtable of options to tag to the map\n     */\n    setOptions: function(options) {\n        var updatePxExtent = this.minPx &&\n            options.restrictedExtent != this.restrictedExtent;\n        OpenLayers.Util.extend(this, options);\n        // force recalculation of minPx and maxPx\n        updatePxExtent && this.moveTo(this.getCachedCenter(), this.zoom, {\n            forceZoomChange: true\n        });\n    },\n\n    /**\n     * APIMethod: getTileSize\n     * Get the tile size for the map\n     *\n     * Returns:\n     * {<OpenLayers.Size>}\n     */\n     getTileSize: function() {\n         return this.tileSize;\n     },\n\n\n    /**\n     * APIMethod: getBy\n     * Get a list of objects given a property and a match item.\n     *\n     * Parameters:\n     * array - {String} A property on the map whose value is an array.\n     * property - {String} A property on each item of the given array.\n     * match - {String | Object} A string to match.  Can also be a regular\n     *     expression literal or object.  In addition, it can be any object\n     *     with a method named test.  For reqular expressions or other, if\n     *     match.test(map[array][i][property]) evaluates to true, the item will\n     *     be included in the array returned.  If no items are found, an empty\n     *     array is returned.\n     *\n     * Returns:\n     * {Array} An array of items where the given property matches the given\n     *     criteria.\n     */\n    getBy: function(array, property, match) {\n        var test = (typeof match.test == \"function\");\n        var found = OpenLayers.Array.filter(this[array], function(item) {\n            return item[property] == match || (test && match.test(item[property]));\n        });\n        return found;\n    },\n\n    /**\n     * APIMethod: getLayersBy\n     * Get a list of layers with properties matching the given criteria.\n     *\n     * Parameters:\n     * property - {String} A layer property to be matched.\n     * match - {String | Object} A string to match.  Can also be a regular\n     *     expression literal or object.  In addition, it can be any object\n     *     with a method named test.  For reqular expressions or other, if\n     *     match.test(layer[property]) evaluates to true, the layer will be\n     *     included in the array returned.  If no layers are found, an empty\n     *     array is returned.\n     *\n     * Returns:\n     * {Array(<OpenLayers.Layer>)} A list of layers matching the given criteria.\n     *     An empty array is returned if no matches are found.\n     */\n    getLayersBy: function(property, match) {\n        return this.getBy(\"layers\", property, match);\n    },\n\n    /**\n     * APIMethod: getLayersByName\n     * Get a list of layers with names matching the given name.\n     *\n     * Parameters:\n     * match - {String | Object} A layer name.  The name can also be a regular\n     *     expression literal or object.  In addition, it can be any object\n     *     with a method named test.  For reqular expressions or other, if\n     *     name.test(layer.name) evaluates to true, the layer will be included\n     *     in the list of layers returned.  If no layers are found, an empty\n     *     array is returned.\n     *\n     * Returns:\n     * {Array(<OpenLayers.Layer>)} A list of layers matching the given name.\n     *     An empty array is returned if no matches are found.\n     */\n    getLayersByName: function(match) {\n        return this.getLayersBy(\"name\", match);\n    },\n\n    /**\n     * APIMethod: getLayersByClass\n     * Get a list of layers of a given class (CLASS_NAME).\n     *\n     * Parameters:\n     * match - {String | Object} A layer class name.  The match can also be a\n     *     regular expression literal or object.  In addition, it can be any\n     *     object with a method named test.  For reqular expressions or other,\n     *     if type.test(layer.CLASS_NAME) evaluates to true, the layer will\n     *     be included in the list of layers returned.  If no layers are\n     *     found, an empty array is returned.\n     *\n     * Returns:\n     * {Array(<OpenLayers.Layer>)} A list of layers matching the given class.\n     *     An empty array is returned if no matches are found.\n     */\n    getLayersByClass: function(match) {\n        return this.getLayersBy(\"CLASS_NAME\", match);\n    },\n\n    /**\n     * APIMethod: getControlsBy\n     * Get a list of controls with properties matching the given criteria.\n     *\n     * Parameters:\n     * property - {String} A control property to be matched.\n     * match - {String | Object} A string to match.  Can also be a regular\n     *     expression literal or object.  In addition, it can be any object\n     *     with a method named test.  For reqular expressions or other, if\n     *     match.test(layer[property]) evaluates to true, the layer will be\n     *     included in the array returned.  If no layers are found, an empty\n     *     array is returned.\n     *\n     * Returns:\n     * {Array(<OpenLayers.Control>)} A list of controls matching the given\n     *     criteria.  An empty array is returned if no matches are found.\n     */\n    getControlsBy: function(property, match) {\n        return this.getBy(\"controls\", property, match);\n    },\n\n    /**\n     * APIMethod: getControlsByClass\n     * Get a list of controls of a given class (CLASS_NAME).\n     *\n     * Parameters:\n     * match - {String | Object} A control class name.  The match can also be a\n     *     regular expression literal or object.  In addition, it can be any\n     *     object with a method named test.  For reqular expressions or other,\n     *     if type.test(control.CLASS_NAME) evaluates to true, the control will\n     *     be included in the list of controls returned.  If no controls are\n     *     found, an empty array is returned.\n     *\n     * Returns:\n     * {Array(<OpenLayers.Control>)} A list of controls matching the given class.\n     *     An empty array is returned if no matches are found.\n     */\n    getControlsByClass: function(match) {\n        return this.getControlsBy(\"CLASS_NAME\", match);\n    },\n\n  /********************************************************/\n  /*                                                      */\n  /*                  Layer Functions                     */\n  /*                                                      */\n  /*     The following functions deal with adding and     */\n  /*        removing Layers to and from the Map           */\n  /*                                                      */\n  /********************************************************/         \n\n    /**\n     * APIMethod: getLayer\n     * Get a layer based on its id\n     *\n     * Parameters:\n     * id - {String} A layer id\n     *\n     * Returns:\n     * {<OpenLayers.Layer>} The Layer with the corresponding id from the map's \n     *                      layer collection, or null if not found.\n     */\n    getLayer: function(id) {\n        var foundLayer = null;\n        for (var i=0, len=this.layers.length; i<len; i++) {\n            var layer = this.layers[i];\n            if (layer.id == id) {\n                foundLayer = layer;\n                break;\n            }\n        }\n        return foundLayer;\n    },\n\n    /**\n    * Method: setLayerZIndex\n    * \n    * Parameters:\n    * layer - {<OpenLayers.Layer>} \n    * zIdx - {int} \n    */    \n    setLayerZIndex: function (layer, zIdx) {\n        layer.setZIndex(\n            this.Z_INDEX_BASE[layer.isBaseLayer ? 'BaseLayer' : 'Overlay']\n            + zIdx * 5 );\n    },\n\n    /**\n     * Method: resetLayersZIndex\n     * Reset each layer's z-index based on layer's array index\n     */\n    resetLayersZIndex: function() {\n        for (var i=0, len=this.layers.length; i<len; i++) {\n            var layer = this.layers[i];\n            this.setLayerZIndex(layer, i);\n        }\n    },\n\n    /**\n    * APIMethod: addLayer\n    *\n    * Parameters:\n    * layer - {<OpenLayers.Layer>} \n    *\n    * Returns:\n    * {Boolean} True if the layer has been added to the map.\n    */    \n    addLayer: function (layer) {\n        for(var i = 0, len = this.layers.length; i < len; i++) {\n            if (this.layers[i] == layer) {\n                return false;\n            }\n        }\n        if (this.events.triggerEvent(\"preaddlayer\", {layer: layer}) === false) {\n            return false;\n        }\n        if(this.allOverlays) {\n            layer.isBaseLayer = false;\n        }\n        \n        layer.div.className = \"olLayerDiv\";\n        layer.div.style.overflow = \"\";\n        this.setLayerZIndex(layer, this.layers.length);\n\n        if (layer.isFixed) {\n            this.viewPortDiv.appendChild(layer.div);\n        } else {\n            this.layerContainerDiv.appendChild(layer.div);\n        }\n        this.layers.push(layer);\n        layer.setMap(this);\n\n        if (layer.isBaseLayer || (this.allOverlays && !this.baseLayer))  {\n            if (this.baseLayer == null) {\n                // set the first baselaye we add as the baselayer\n                this.setBaseLayer(layer);\n            } else {\n                layer.setVisibility(false);\n            }\n        } else {\n            layer.redraw();\n        }\n\n        this.events.triggerEvent(\"addlayer\", {layer: layer});\n        layer.events.triggerEvent(\"added\", {map: this, layer: layer});\n        layer.afterAdd();\n\n        return true;\n    },\n\n    /**\n    * APIMethod: addLayers \n    *\n    * Parameters:\n    * layers - {Array(<OpenLayers.Layer>)} \n    */    \n    addLayers: function (layers) {\n        for (var i=0, len=layers.length; i<len; i++) {\n            this.addLayer(layers[i]);\n        }\n    },\n\n    /** \n     * APIMethod: removeLayer\n     * Removes a layer from the map by removing its visual element (the \n     *   layer.div property), then removing it from the map's internal list \n     *   of layers, setting the layer's map property to null. \n     * \n     *   a \"removelayer\" event is triggered.\n     * \n     *   very worthy of mention is that simply removing a layer from a map\n     *   will not cause the removal of any popups which may have been created\n     *   by the layer. this is due to the fact that it was decided at some\n     *   point that popups would not belong to layers. thus there is no way \n     *   for us to know here to which layer the popup belongs.\n     *    \n     *     A simple solution to this is simply to call destroy() on the layer.\n     *     the default OpenLayers.Layer class's destroy() function\n     *     automatically takes care to remove itself from whatever map it has\n     *     been attached to. \n     * \n     *     The correct solution is for the layer itself to register an \n     *     event-handler on \"removelayer\" and when it is called, if it \n     *     recognizes itself as the layer being removed, then it cycles through\n     *     its own personal list of popups, removing them from the map.\n     * \n     * Parameters:\n     * layer - {<OpenLayers.Layer>} \n     * setNewBaseLayer - {Boolean} Default is true\n     */\n    removeLayer: function(layer, setNewBaseLayer) {\n        if (this.events.triggerEvent(\"preremovelayer\", {layer: layer}) === false) {\n            return;\n        }\n        if (setNewBaseLayer == null) {\n            setNewBaseLayer = true;\n        }\n\n        if (layer.isFixed) {\n            this.viewPortDiv.removeChild(layer.div);\n        } else {\n            this.layerContainerDiv.removeChild(layer.div);\n        }\n        OpenLayers.Util.removeItem(this.layers, layer);\n        layer.removeMap(this);\n        layer.map = null;\n\n        // if we removed the base layer, need to set a new one\n        if(this.baseLayer == layer) {\n            this.baseLayer = null;\n            if(setNewBaseLayer) {\n                for(var i=0, len=this.layers.length; i<len; i++) {\n                    var iLayer = this.layers[i];\n                    if (iLayer.isBaseLayer || this.allOverlays) {\n                        this.setBaseLayer(iLayer);\n                        break;\n                    }\n                }\n            }\n        }\n\n        this.resetLayersZIndex();\n\n        this.events.triggerEvent(\"removelayer\", {layer: layer});\n        layer.events.triggerEvent(\"removed\", {map: this, layer: layer});\n    },\n\n    /**\n     * APIMethod: getNumLayers\n     * \n     * Returns:\n     * {Int} The number of layers attached to the map.\n     */\n    getNumLayers: function () {\n        return this.layers.length;\n    },\n\n    /** \n     * APIMethod: getLayerIndex\n     *\n     * Parameters:\n     * layer - {<OpenLayers.Layer>}\n     *\n     * Returns:\n     * {Integer} The current (zero-based) index of the given layer in the map's\n     *           layer stack. Returns -1 if the layer isn't on the map.\n     */\n    getLayerIndex: function (layer) {\n        return OpenLayers.Util.indexOf(this.layers, layer);\n    },\n    \n    /** \n     * APIMethod: setLayerIndex\n     * Move the given layer to the specified (zero-based) index in the layer\n     *     list, changing its z-index in the map display. Use\n     *     map.getLayerIndex() to find out the current index of a layer. Note\n     *     that this cannot (or at least should not) be effectively used to\n     *     raise base layers above overlays.\n     *\n     * Parameters:\n     * layer - {<OpenLayers.Layer>} \n     * idx - {int} \n     */\n    setLayerIndex: function (layer, idx) {\n        var base = this.getLayerIndex(layer);\n        if (idx < 0) {\n            idx = 0;\n        } else if (idx > this.layers.length) {\n            idx = this.layers.length;\n        }\n        if (base != idx) {\n            this.layers.splice(base, 1);\n            this.layers.splice(idx, 0, layer);\n            for (var i=0, len=this.layers.length; i<len; i++) {\n                this.setLayerZIndex(this.layers[i], i);\n            }\n            this.events.triggerEvent(\"changelayer\", {\n                layer: layer, property: \"order\"\n            });\n            if(this.allOverlays) {\n                if(idx === 0) {\n                    this.setBaseLayer(layer);\n                } else if(this.baseLayer !== this.layers[0]) {\n                    this.setBaseLayer(this.layers[0]);\n                }\n            }\n        }\n    },\n\n    /** \n     * APIMethod: raiseLayer\n     * Change the index of the given layer by delta. If delta is positive, \n     *     the layer is moved up the map's layer stack; if delta is negative,\n     *     the layer is moved down.  Again, note that this cannot (or at least\n     *     should not) be effectively used to raise base layers above overlays.\n     *\n     * Parameters:\n     * layer - {<OpenLayers.Layer>} \n     * delta - {int} \n     */\n    raiseLayer: function (layer, delta) {\n        var idx = this.getLayerIndex(layer) + delta;\n        this.setLayerIndex(layer, idx);\n    },\n    \n    /** \n     * APIMethod: setBaseLayer\n     * Allows user to specify one of the currently-loaded layers as the Map's\n     *     new base layer.\n     * \n     * Parameters:\n     * newBaseLayer - {<OpenLayers.Layer>}\n     */\n    setBaseLayer: function(newBaseLayer) {\n        \n        if (newBaseLayer != this.baseLayer) {\n          \n            // ensure newBaseLayer is already loaded\n            if (OpenLayers.Util.indexOf(this.layers, newBaseLayer) != -1) {\n\n                // preserve center and scale when changing base layers\n                var center = this.getCachedCenter();\n                var oldResolution = this.getResolution();\n                var newResolution = OpenLayers.Util.getResolutionFromScale(\n                    this.getScale(), newBaseLayer.units\n                );\n\n                // make the old base layer invisible \n                if (this.baseLayer != null && !this.allOverlays) {\n                    this.baseLayer.setVisibility(false);\n                }\n\n                // set new baselayer\n                this.baseLayer = newBaseLayer;\n                \n                if(!this.allOverlays || this.baseLayer.visibility) {\n                    this.baseLayer.setVisibility(true);\n                    // Layer may previously have been visible but not in range.\n                    // In this case we need to redraw it to make it visible.\n                    if (this.baseLayer.inRange === false) {\n                        this.baseLayer.redraw();\n                    }\n                }\n\n                // recenter the map\n                if (center != null) {\n                    // new zoom level derived from old scale\n                    var newZoom = this.getZoomForResolution(\n                        newResolution || this.resolution, true\n                    );\n                    // zoom and force zoom change\n                    this.setCenter(center, newZoom, false, oldResolution != newResolution);\n                }\n\n                this.events.triggerEvent(\"changebaselayer\", {\n                    layer: this.baseLayer\n                });\n            }        \n        }\n    },\n\n\n  /********************************************************/\n  /*                                                      */\n  /*                 Control Functions                    */\n  /*                                                      */\n  /*     The following functions deal with adding and     */\n  /*        removing Controls to and from the Map         */\n  /*                                                      */\n  /********************************************************/         \n\n    /**\n     * APIMethod: addControl\n     * Add the passed over control to the map. Optionally \n     *     position the control at the given pixel.\n     * \n     * Parameters:\n     * control - {<OpenLayers.Control>}\n     * px - {<OpenLayers.Pixel>}\n     */    \n    addControl: function (control, px) {\n        this.controls.push(control);\n        this.addControlToMap(control, px);\n    },\n    \n    /**\n     * APIMethod: addControls\n     * Add all of the passed over controls to the map. \n     *     You can pass over an optional second array\n     *     with pixel-objects to position the controls.\n     *     The indices of the two arrays should match and\n     *     you can add null as pixel for those controls \n     *     you want to be autopositioned.   \n     *     \n     * Parameters:\n     * controls - {Array(<OpenLayers.Control>)}\n     * pixels - {Array(<OpenLayers.Pixel>)}\n     */    \n    addControls: function (controls, pixels) {\n        var pxs = (arguments.length === 1) ? [] : pixels;\n        for (var i=0, len=controls.length; i<len; i++) {\n            var ctrl = controls[i];\n            var px = (pxs[i]) ? pxs[i] : null;\n            this.addControl( ctrl, px );\n        }\n    },\n\n    /**\n     * Method: addControlToMap\n     * \n     * Parameters:\n     * \n     * control - {<OpenLayers.Control>}\n     * px - {<OpenLayers.Pixel>}\n     */    \n    addControlToMap: function (control, px) {\n        // If a control doesn't have a div at this point, it belongs in the\n        // viewport.\n        control.outsideViewport = (control.div != null);\n        \n        // If the map has a displayProjection, and the control doesn't, set \n        // the display projection.\n        if (this.displayProjection && !control.displayProjection) {\n            control.displayProjection = this.displayProjection;\n        }    \n        \n        control.setMap(this);\n        var div = control.draw(px);\n        if (div) {\n            if(!control.outsideViewport) {\n                div.style.zIndex = this.Z_INDEX_BASE['Control'] +\n                                    this.controls.length;\n                this.viewPortDiv.appendChild( div );\n            }\n        }\n        if(control.autoActivate) {\n            control.activate();\n        }\n    },\n    \n    /**\n     * APIMethod: getControl\n     * \n     * Parameters:\n     * id - {String} ID of the control to return.\n     * \n     * Returns:\n     * {<OpenLayers.Control>} The control from the map's list of controls \n     *                        which has a matching 'id'. If none found, \n     *                        returns null.\n     */    \n    getControl: function (id) {\n        var returnControl = null;\n        for(var i=0, len=this.controls.length; i<len; i++) {\n            var control = this.controls[i];\n            if (control.id == id) {\n                returnControl = control;\n                break;\n            }\n        }\n        return returnControl;\n    },\n    \n    /** \n     * APIMethod: removeControl\n     * Remove a control from the map. Removes the control both from the map \n     *     object's internal array of controls, as well as from the map's \n     *     viewPort (assuming the control was not added outsideViewport)\n     * \n     * Parameters:\n     * control - {<OpenLayers.Control>} The control to remove.\n     */    \n    removeControl: function (control) {\n        //make sure control is non-null and actually part of our map\n        if ( (control) && (control == this.getControl(control.id)) ) {\n            if (control.div && (control.div.parentNode == this.viewPortDiv)) {\n                this.viewPortDiv.removeChild(control.div);\n            }\n            OpenLayers.Util.removeItem(this.controls, control);\n        }\n    },\n\n  /********************************************************/\n  /*                                                      */\n  /*                  Popup Functions                     */\n  /*                                                      */\n  /*     The following functions deal with adding and     */\n  /*        removing Popups to and from the Map           */\n  /*                                                      */\n  /********************************************************/         \n\n    /** \n     * APIMethod: addPopup\n     * \n     * Parameters:\n     * popup - {<OpenLayers.Popup>}\n     * exclusive - {Boolean} If true, closes all other popups first\n     */\n    addPopup: function(popup, exclusive) {\n\n        if (exclusive) {\n            //remove all other popups from screen\n            for (var i = this.popups.length - 1; i >= 0; --i) {\n                this.removePopup(this.popups[i]);\n            }\n        }\n\n        popup.map = this;\n        this.popups.push(popup);\n        var popupDiv = popup.draw();\n        if (popupDiv) {\n            popupDiv.style.zIndex = this.Z_INDEX_BASE['Popup'] +\n                                    this.popups.length;\n            this.layerContainerDiv.appendChild(popupDiv);\n        }\n    },\n    \n    /** \n    * APIMethod: removePopup\n    * \n    * Parameters:\n    * popup - {<OpenLayers.Popup>}\n    */\n    removePopup: function(popup) {\n        OpenLayers.Util.removeItem(this.popups, popup);\n        if (popup.div) {\n            try { this.layerContainerDiv.removeChild(popup.div); }\n            catch (e) { } // Popups sometimes apparently get disconnected\n                      // from the layerContainerDiv, and cause complaints.\n        }\n        popup.map = null;\n    },\n\n  /********************************************************/\n  /*                                                      */\n  /*              Container Div Functions                 */\n  /*                                                      */\n  /*   The following functions deal with the access to    */\n  /*    and maintenance of the size of the container div  */\n  /*                                                      */\n  /********************************************************/     \n\n    /**\n     * APIMethod: getSize\n     * \n     * Returns:\n     * {<OpenLayers.Size>} An <OpenLayers.Size> object that represents the \n     *                     size, in pixels, of the div into which OpenLayers \n     *                     has been loaded. \n     *                     Note - A clone() of this locally cached variable is\n     *                     returned, so as not to allow users to modify it.\n     */\n    getSize: function () {\n        var size = null;\n        if (this.size != null) {\n            size = this.size.clone();\n        }\n        return size;\n    },\n\n    /**\n     * APIMethod: updateSize\n     * This function should be called by any external code which dynamically\n     *     changes the size of the map div (because mozilla wont let us catch \n     *     the \"onresize\" for an element)\n     */\n    updateSize: function() {\n        // the div might have moved on the page, also\n        var newSize = this.getCurrentSize();\n        if (newSize && !isNaN(newSize.h) && !isNaN(newSize.w)) {\n            this.events.clearMouseCache();\n            var oldSize = this.getSize();\n            if (oldSize == null) {\n                this.size = oldSize = newSize;\n            }\n            if (!newSize.equals(oldSize)) {\n                \n                // store the new size\n                this.size = newSize;\n    \n                //notify layers of mapresize\n                for(var i=0, len=this.layers.length; i<len; i++) {\n                    this.layers[i].onMapResize();                \n                }\n    \n                var center = this.getCachedCenter();\n    \n                if (this.baseLayer != null && center != null) {\n                    var zoom = this.getZoom();\n                    this.zoom = null;\n                    this.setCenter(center, zoom);\n                }\n    \n            }\n        }\n        this.events.triggerEvent(\"updatesize\");\n    },\n    \n    /**\n     * Method: getCurrentSize\n     * \n     * Returns:\n     * {<OpenLayers.Size>} A new <OpenLayers.Size> object with the dimensions \n     *                     of the map div\n     */\n    getCurrentSize: function() {\n\n        var size = new OpenLayers.Size(this.div.clientWidth, \n                                       this.div.clientHeight);\n\n        if (size.w == 0 && size.h == 0 || isNaN(size.w) && isNaN(size.h)) {\n            size.w = this.div.offsetWidth;\n            size.h = this.div.offsetHeight;\n        }\n        if (size.w == 0 && size.h == 0 || isNaN(size.w) && isNaN(size.h)) {\n            size.w = parseInt(this.div.style.width);\n            size.h = parseInt(this.div.style.height);\n        }\n        return size;\n    },\n\n    /** \n     * Method: calculateBounds\n     * \n     * Parameters:\n     * center - {<OpenLayers.LonLat>} Default is this.getCenter()\n     * resolution - {float} Default is this.getResolution() \n     * \n     * Returns:\n     * {<OpenLayers.Bounds>} A bounds based on resolution, center, and \n     *                       current mapsize.\n     */\n    calculateBounds: function(center, resolution) {\n\n        var extent = null;\n        \n        if (center == null) {\n            center = this.getCachedCenter();\n        }                \n        if (resolution == null) {\n            resolution = this.getResolution();\n        }\n    \n        if ((center != null) && (resolution != null)) {\n            var halfWDeg = (this.size.w * resolution) / 2;\n            var halfHDeg = (this.size.h * resolution) / 2;\n        \n            extent = new OpenLayers.Bounds(center.lon - halfWDeg,\n                                           center.lat - halfHDeg,\n                                           center.lon + halfWDeg,\n                                           center.lat + halfHDeg);\n        }\n\n        return extent;\n    },\n\n\n  /********************************************************/\n  /*                                                      */\n  /*            Zoom, Center, Pan Functions               */\n  /*                                                      */\n  /*    The following functions handle the validation,    */\n  /*   getting and setting of the Zoom Level and Center   */\n  /*       as well as the panning of the Map              */\n  /*                                                      */\n  /********************************************************/\n    /**\n     * APIMethod: getCenter\n     * \n     * Returns:\n     * {<OpenLayers.LonLat>}\n     */\n    getCenter: function () {\n        var center = null;\n        var cachedCenter = this.getCachedCenter();\n        if (cachedCenter) {\n            center = cachedCenter.clone();\n        }\n        return center;\n    },\n\n    /**\n     * Method: getCachedCenter\n     *\n     * Returns:\n     * {<OpenLayers.LonLat>}\n     */\n    getCachedCenter: function() {\n        if (!this.center && this.size) {\n            this.center = this.getLonLatFromViewPortPx({\n                x: this.size.w / 2,\n                y: this.size.h / 2\n            });\n        }\n        return this.center;\n    },\n\n    /**\n     * APIMethod: getZoom\n     * \n     * Returns:\n     * {Integer}\n     */\n    getZoom: function () {\n        return this.zoom;\n    },\n    \n    /** \n     * APIMethod: pan\n     * Allows user to pan by a value of screen pixels\n     * \n     * Parameters:\n     * dx - {Integer}\n     * dy - {Integer}\n     * options - {Object} Options to configure panning:\n     *  - *animate* {Boolean} Use panTo instead of setCenter. Default is true.\n     *  - *dragging* {Boolean} Call setCenter with dragging true.  Default is\n     *    false.\n     */\n    pan: function(dx, dy, options) {\n        options = OpenLayers.Util.applyDefaults(options, {\n            animate: true,\n            dragging: false\n        });\n        if (options.dragging) {\n            if (dx != 0 || dy != 0) {\n                this.moveByPx(dx, dy);\n            }\n        } else {\n            // getCenter\n            var centerPx = this.getViewPortPxFromLonLat(this.getCachedCenter());\n\n            // adjust\n            var newCenterPx = centerPx.add(dx, dy);\n\n            if (this.dragging || !newCenterPx.equals(centerPx)) {\n                var newCenterLonLat = this.getLonLatFromViewPortPx(newCenterPx);\n                if (options.animate) {\n                    this.panTo(newCenterLonLat);\n                } else {\n                    this.moveTo(newCenterLonLat);\n                    if(this.dragging) {\n                        this.dragging = false;\n                        this.events.triggerEvent(\"moveend\");\n                    }\n                }    \n            }\n        }        \n\n   },\n   \n   /** \n     * APIMethod: panTo\n     * Allows user to pan to a new lonlat.\n     * If the new lonlat is in the current extent the map will slide smoothly\n     * \n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>}\n     */\n    panTo: function(lonlat) {\n        if (this.panTween && this.getExtent().scale(this.panRatio).containsLonLat(lonlat)) {\n            var center = this.getCachedCenter();\n\n            // center will not change, don't do nothing\n            if (lonlat.equals(center)) {\n                return;\n            }\n\n            var from = this.getPixelFromLonLat(center);\n            var to = this.getPixelFromLonLat(lonlat);\n            var vector = { x: to.x - from.x, y: to.y - from.y };\n            var last = { x: 0, y: 0 };\n\n            this.panTween.start( { x: 0, y: 0 }, vector, this.panDuration, {\n                callbacks: {\n                    eachStep: OpenLayers.Function.bind(function(px) {\n                        var x = px.x - last.x,\n                            y = px.y - last.y;\n                        this.moveByPx(x, y);\n                        last.x = Math.round(px.x);\n                        last.y = Math.round(px.y);\n                    }, this),\n                    done: OpenLayers.Function.bind(function(px) {\n                        this.moveTo(lonlat);\n                        this.dragging = false;\n                        this.events.triggerEvent(\"moveend\");\n                    }, this)\n                }\n            });\n        } else {\n            this.setCenter(lonlat);\n        }\n    },\n\n    /**\n     * APIMethod: setCenter\n     * Set the map center (and optionally, the zoom level).\n     * \n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>|Array} The new center location.\n     *     If provided as array, the first value is the x coordinate,\n     *     and the 2nd value is the y coordinate.\n     * zoom - {Integer} Optional zoom level.\n     * dragging - {Boolean} Specifies whether or not to trigger \n     *                      movestart/end events\n     * forceZoomChange - {Boolean} Specifies whether or not to trigger zoom \n     *                             change events (needed on baseLayer change)\n     *\n     * TBD: reconsider forceZoomChange in 3.0\n     */\n    setCenter: function(lonlat, zoom, dragging, forceZoomChange) {\n        if (this.panTween) {\n            this.panTween.stop();\n        }\n        if (this.zoomTween) {\n            this.zoomTween.stop();\n        }            \n        this.moveTo(lonlat, zoom, {\n            'dragging': dragging,\n            'forceZoomChange': forceZoomChange\n        });\n    },\n    \n    /** \n     * Method: moveByPx\n     * Drag the map by pixels.\n     *\n     * Parameters:\n     * dx - {Number}\n     * dy - {Number}\n     */\n    moveByPx: function(dx, dy) {\n        var hw = this.size.w / 2;\n        var hh = this.size.h / 2;\n        var x = hw + dx;\n        var y = hh + dy;\n        var wrapDateLine = this.baseLayer.wrapDateLine;\n        var xRestriction = 0;\n        var yRestriction = 0;\n        if (this.restrictedExtent) {\n            xRestriction = hw;\n            yRestriction = hh;\n            // wrapping the date line makes no sense for restricted extents\n            wrapDateLine = false;\n        }\n        dx = wrapDateLine ||\n                    x <= this.maxPx.x - xRestriction &&\n                    x >= this.minPx.x + xRestriction ? Math.round(dx) : 0;\n        dy = y <= this.maxPx.y - yRestriction &&\n                    y >= this.minPx.y + yRestriction ? Math.round(dy) : 0;\n        if (dx || dy) {\n            if (!this.dragging) {\n                this.dragging = true;\n                this.events.triggerEvent(\"movestart\");\n            }\n            this.center = null;\n            if (dx) {\n                this.layerContainerOriginPx.x -= dx;\n                this.minPx.x -= dx;\n                this.maxPx.x -= dx;\n            }\n            if (dy) {\n                this.layerContainerOriginPx.y -= dy;\n                this.minPx.y -= dy;\n                this.maxPx.y -= dy;\n            }\n            this.applyTransform();\n            var layer, i, len;\n            for (i=0, len=this.layers.length; i<len; ++i) {\n                layer = this.layers[i];\n                if (layer.visibility &&\n                    (layer === this.baseLayer || layer.inRange)) {\n                    layer.moveByPx(dx, dy);\n                    layer.events.triggerEvent(\"move\");\n                }\n            }\n            this.events.triggerEvent(\"move\");\n        }\n    },\n    \n    /**\n     * Method: adjustZoom\n     *\n     * Parameters:\n     * zoom - {Number} The zoom level to adjust\n     *\n     * Returns:\n     * {Integer} Adjusted zoom level that shows a map not wider than its\n     * <baseLayer>'s maxExtent.\n     */\n    adjustZoom: function(zoom) {\n        if (this.baseLayer && this.baseLayer.wrapDateLine) {\n            var resolution, resolutions = this.baseLayer.resolutions,\n                maxResolution = this.getMaxExtent().getWidth() / this.size.w;\n            if (this.getResolutionForZoom(zoom) > maxResolution) {\n                if (this.fractionalZoom) {\n                    zoom = this.getZoomForResolution(maxResolution);\n                } else {\n                    for (var i=zoom|0, ii=resolutions.length; i<ii; ++i) {\n                        if (resolutions[i] <= maxResolution) {\n                            zoom = i;\n                            break;\n                        }\n                    }\n                } \n            }\n        }\n        return zoom;\n    },\n    \n    /**\n     * APIMethod: getMinZoom\n     * Returns the minimum zoom level for the current map view. If the base\n     * layer is configured with <wrapDateLine> set to true, this will be the\n     * first zoom level that shows no more than one world width in the current\n     * map viewport. Components that rely on this value (e.g. zoom sliders)\n     * should also listen to the map's \"updatesize\" event and call this method\n     * in the \"updatesize\" listener.\n     *\n     * Returns:\n     * {Number} Minimum zoom level that shows a map not wider than its\n     * <baseLayer>'s maxExtent. This is an Integer value, unless the map is\n     * configured with <fractionalZoom> set to true.\n     */\n    getMinZoom: function() {\n        return this.adjustZoom(0);\n    },\n\n    /**\n     * Method: moveTo\n     *\n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>}\n     * zoom - {Integer}\n     * options - {Object}\n     */\n    moveTo: function(lonlat, zoom, options) {\n        if (lonlat != null && !(lonlat instanceof OpenLayers.LonLat)) {\n            lonlat = new OpenLayers.LonLat(lonlat);\n        }\n        if (!options) { \n            options = {};\n        }\n        if (zoom != null) {\n            zoom = parseFloat(zoom);\n            if (!this.fractionalZoom) {\n                zoom = Math.round(zoom);\n            }\n        }\n        var requestedZoom = zoom;\n        zoom = this.adjustZoom(zoom);\n        if (zoom !== requestedZoom) {\n            // zoom was adjusted, so keep old lonlat to avoid panning\n            lonlat = this.getCenter();\n        }\n        // dragging is false by default\n        var dragging = options.dragging || this.dragging;\n        // forceZoomChange is false by default\n        var forceZoomChange = options.forceZoomChange;\n\n        if (!this.getCachedCenter() && !this.isValidLonLat(lonlat)) {\n            lonlat = this.maxExtent.getCenterLonLat();\n            this.center = lonlat.clone();\n        }\n\n        if(this.restrictedExtent != null) {\n            // In 3.0, decide if we want to change interpretation of maxExtent.\n            if(lonlat == null) { \n                lonlat = this.center; \n            }\n            if(zoom == null) { \n                zoom = this.getZoom(); \n            }\n            var resolution = this.getResolutionForZoom(zoom);\n            var extent = this.calculateBounds(lonlat, resolution); \n            if(!this.restrictedExtent.containsBounds(extent)) {\n                var maxCenter = this.restrictedExtent.getCenterLonLat(); \n                if(extent.getWidth() > this.restrictedExtent.getWidth()) { \n                    lonlat = new OpenLayers.LonLat(maxCenter.lon, lonlat.lat); \n                } else if(extent.left < this.restrictedExtent.left) {\n                    lonlat = lonlat.add(this.restrictedExtent.left -\n                                        extent.left, 0); \n                } else if(extent.right > this.restrictedExtent.right) { \n                    lonlat = lonlat.add(this.restrictedExtent.right -\n                                        extent.right, 0); \n                } \n                if(extent.getHeight() > this.restrictedExtent.getHeight()) { \n                    lonlat = new OpenLayers.LonLat(lonlat.lon, maxCenter.lat); \n                } else if(extent.bottom < this.restrictedExtent.bottom) { \n                    lonlat = lonlat.add(0, this.restrictedExtent.bottom -\n                                        extent.bottom); \n                } \n                else if(extent.top > this.restrictedExtent.top) { \n                    lonlat = lonlat.add(0, this.restrictedExtent.top -\n                                        extent.top); \n                } \n            }\n        }\n        \n        var zoomChanged = forceZoomChange || (\n                            (this.isValidZoomLevel(zoom)) && \n                            (zoom != this.getZoom()) );\n\n        var centerChanged = (this.isValidLonLat(lonlat)) && \n                            (!lonlat.equals(this.center));\n\n        // if neither center nor zoom will change, no need to do anything\n        if (zoomChanged || centerChanged || dragging) {\n            dragging || this.events.triggerEvent(\"movestart\", {\n                zoomChanged: zoomChanged\n            });\n\n            if (centerChanged) {\n                if (!zoomChanged && this.center) { \n                    // if zoom hasn't changed, just slide layerContainer\n                    //  (must be done before setting this.center to new value)\n                    this.centerLayerContainer(lonlat);\n                }\n                this.center = lonlat.clone();\n            }\n\n            var res = zoomChanged ?\n                this.getResolutionForZoom(zoom) : this.getResolution();\n            // (re)set the layerContainerDiv's location\n            if (zoomChanged || this.layerContainerOrigin == null) {\n                this.layerContainerOrigin = this.getCachedCenter();\n                this.layerContainerOriginPx.x = 0;\n                this.layerContainerOriginPx.y = 0;\n                this.applyTransform();\n                var maxExtent = this.getMaxExtent({restricted: true});\n                var maxExtentCenter = maxExtent.getCenterLonLat();\n                var lonDelta = this.center.lon - maxExtentCenter.lon;\n                var latDelta = maxExtentCenter.lat - this.center.lat;\n                var extentWidth = Math.round(maxExtent.getWidth() / res);\n                var extentHeight = Math.round(maxExtent.getHeight() / res);\n                this.minPx = {\n                    x: (this.size.w - extentWidth) / 2 - lonDelta / res,\n                    y: (this.size.h - extentHeight) / 2 - latDelta / res\n                };\n                this.maxPx = {\n                    x: this.minPx.x + Math.round(maxExtent.getWidth() / res),\n                    y: this.minPx.y + Math.round(maxExtent.getHeight() / res)\n                };\n            }\n\n            if (zoomChanged) {\n                this.zoom = zoom;\n                this.resolution = res;\n            }    \n            \n            var bounds = this.getExtent();\n            \n            //send the move call to the baselayer and all the overlays    \n\n            if(this.baseLayer.visibility) {\n                this.baseLayer.moveTo(bounds, zoomChanged, options.dragging);\n                options.dragging || this.baseLayer.events.triggerEvent(\n                    \"moveend\", {zoomChanged: zoomChanged}\n                );\n            }\n            \n            bounds = this.baseLayer.getExtent();\n            \n            for (var i=this.layers.length-1; i>=0; --i) {\n                var layer = this.layers[i];\n                if (layer !== this.baseLayer && !layer.isBaseLayer) {\n                    var inRange = layer.calculateInRange();\n                    if (layer.inRange != inRange) {\n                        // the inRange property has changed. If the layer is\n                        // no longer in range, we turn it off right away. If\n                        // the layer is no longer out of range, the moveTo\n                        // call below will turn on the layer.\n                        layer.inRange = inRange;\n                        if (!inRange) {\n                            layer.display(false);\n                        }\n                        this.events.triggerEvent(\"changelayer\", {\n                            layer: layer, property: \"visibility\"\n                        });\n                    }\n                    if (inRange && layer.visibility) {\n                        layer.moveTo(bounds, zoomChanged, options.dragging);\n                        options.dragging || layer.events.triggerEvent(\n                            \"moveend\", {zoomChanged: zoomChanged}\n                        );\n                    }\n                }                \n            }\n            \n            this.events.triggerEvent(\"move\");\n            dragging || this.events.triggerEvent(\"moveend\");\n\n            if (zoomChanged) {\n                //redraw popups\n                for (var i=0, len=this.popups.length; i<len; i++) {\n                    this.popups[i].updatePosition();\n                }\n                this.events.triggerEvent(\"zoomend\");\n            }\n        }\n    },\n\n    /** \n     * Method: centerLayerContainer\n     * This function takes care to recenter the layerContainerDiv.\n     * \n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>}\n     */\n    centerLayerContainer: function (lonlat) {\n        var originPx = this.getViewPortPxFromLonLat(this.layerContainerOrigin);\n        var newPx = this.getViewPortPxFromLonLat(lonlat);\n\n        if ((originPx != null) && (newPx != null)) {\n            var oldLeft = this.layerContainerOriginPx.x;\n            var oldTop = this.layerContainerOriginPx.y;\n            var newLeft = Math.round(originPx.x - newPx.x);\n            var newTop = Math.round(originPx.y - newPx.y);\n            this.applyTransform(\n                (this.layerContainerOriginPx.x = newLeft),\n                (this.layerContainerOriginPx.y = newTop));\n            var dx = oldLeft - newLeft;\n            var dy = oldTop - newTop;\n            this.minPx.x -= dx;\n            this.maxPx.x -= dx;\n            this.minPx.y -= dy;\n            this.maxPx.y -= dy;\n        }        \n    },\n\n    /**\n     * Method: isValidZoomLevel\n     * \n     * Parameters:\n     * zoomLevel - {Integer}\n     * \n     * Returns:\n     * {Boolean} Whether or not the zoom level passed in is non-null and \n     *           within the min/max range of zoom levels.\n     */\n    isValidZoomLevel: function(zoomLevel) {\n        return ( (zoomLevel != null) &&\n                 (zoomLevel >= 0) && \n                 (zoomLevel < this.getNumZoomLevels()) );\n    },\n    \n    /**\n     * Method: isValidLonLat\n     * \n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>}\n     * \n     * Returns:\n     * {Boolean} Whether or not the lonlat passed in is non-null and within\n     *           the maxExtent bounds\n     */\n    isValidLonLat: function(lonlat) {\n        var valid = false;\n        if (lonlat != null) {\n            var maxExtent = this.getMaxExtent();\n            var worldBounds = this.baseLayer.wrapDateLine && maxExtent;\n            valid = maxExtent.containsLonLat(lonlat, {worldBounds: worldBounds});\n        }\n        return valid;\n    },\n\n  /********************************************************/\n  /*                                                      */\n  /*                 Layer Options                        */\n  /*                                                      */\n  /*    Accessor functions to Layer Options parameters    */\n  /*                                                      */\n  /********************************************************/\n    \n    /**\n     * APIMethod: getProjection\n     * This method returns a string representing the projection. In \n     *     the case of projection support, this will be the srsCode which\n     *     is loaded -- otherwise it will simply be the string value that\n     *     was passed to the projection at startup.\n     *\n     * FIXME: In 3.0, we will remove getProjectionObject, and instead\n     *     return a Projection object from this function. \n     * \n     * Returns:\n     * {String} The Projection string from the base layer or null. \n     */\n    getProjection: function() {\n        var projection = this.getProjectionObject();\n        return projection ? projection.getCode() : null;\n    },\n    \n    /**\n     * APIMethod: getProjectionObject\n     * Returns the projection obect from the baselayer.\n     *\n     * Returns:\n     * {<OpenLayers.Projection>} The Projection of the base layer.\n     */\n    getProjectionObject: function() {\n        var projection = null;\n        if (this.baseLayer != null) {\n            projection = this.baseLayer.projection;\n        }\n        return projection;\n    },\n    \n    /**\n     * APIMethod: getMaxResolution\n     * \n     * Returns:\n     * {String} The Map's Maximum Resolution\n     */\n    getMaxResolution: function() {\n        var maxResolution = null;\n        if (this.baseLayer != null) {\n            maxResolution = this.baseLayer.maxResolution;\n        }\n        return maxResolution;\n    },\n        \n    /**\n     * APIMethod: getMaxExtent\n     *\n     * Parameters:\n     * options - {Object} \n     * \n     * Allowed Options:\n     * restricted - {Boolean} If true, returns restricted extent (if it is \n     *     available.)\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>} The maxExtent property as set on the current \n     *     baselayer, unless the 'restricted' option is set, in which case\n     *     the 'restrictedExtent' option from the map is returned (if it\n     *     is set).\n     */\n    getMaxExtent: function (options) {\n        var maxExtent = null;\n        if(options && options.restricted && this.restrictedExtent){\n            maxExtent = this.restrictedExtent;\n        } else if (this.baseLayer != null) {\n            maxExtent = this.baseLayer.maxExtent;\n        }        \n        return maxExtent;\n    },\n    \n    /**\n     * APIMethod: getNumZoomLevels\n     * \n     * Returns:\n     * {Integer} The total number of zoom levels that can be displayed by the \n     *           current baseLayer.\n     */\n    getNumZoomLevels: function() {\n        var numZoomLevels = null;\n        if (this.baseLayer != null) {\n            numZoomLevels = this.baseLayer.numZoomLevels;\n        }\n        return numZoomLevels;\n    },\n\n  /********************************************************/\n  /*                                                      */\n  /*                 Baselayer Functions                  */\n  /*                                                      */\n  /*    The following functions, all publicly exposed     */\n  /*       in the API?, are all merely wrappers to the    */\n  /*       the same calls on whatever layer is set as     */\n  /*                the current base layer                */\n  /*                                                      */\n  /********************************************************/\n\n    /**\n     * APIMethod: getExtent\n     * \n     * Returns:\n     * {<OpenLayers.Bounds>} A Bounds object which represents the lon/lat \n     *                       bounds of the current viewPort. \n     *                       If no baselayer is set, returns null.\n     */\n    getExtent: function () {\n        var extent = null;\n        if (this.baseLayer != null) {\n            extent = this.baseLayer.getExtent();\n        }\n        return extent;\n    },\n\n    /**\n     * APIMethod: getResolution\n     * \n     * Returns:\n     * {Float} The current resolution of the map. \n     *         If no baselayer is set, returns null.\n     */\n    getResolution: function () {\n        var resolution = null;\n        if (this.baseLayer != null) {\n            resolution = this.baseLayer.getResolution();\n        } else if(this.allOverlays === true && this.layers.length > 0) {\n            // while adding the 1st layer to the map in allOverlays mode,\n            // this.baseLayer is not set yet when we need the resolution\n            // for calculateInRange.\n            resolution = this.layers[0].getResolution();\n        }\n        return resolution;\n    },\n\n    /**\n     * APIMethod: getUnits\n     * \n     * Returns:\n     * {Float} The current units of the map. \n     *         If no baselayer is set, returns null.\n     */\n    getUnits: function () {\n        var units = null;\n        if (this.baseLayer != null) {\n            units = this.baseLayer.units;\n        }\n        return units;\n    },\n\n     /**\n      * APIMethod: getScale\n      * \n      * Returns:\n      * {Float} The current scale denominator of the map. \n      *         If no baselayer is set, returns null.\n      */\n    getScale: function () {\n        var scale = null;\n        if (this.baseLayer != null) {\n            var res = this.getResolution();\n            var units = this.baseLayer.units;\n            scale = OpenLayers.Util.getScaleFromResolution(res, units);\n        }\n        return scale;\n    },\n\n\n    /**\n     * APIMethod: getZoomForExtent\n     * \n     * Parameters: \n     * bounds - {<OpenLayers.Bounds>}\n     * closest - {Boolean} Find the zoom level that most closely fits the \n     *     specified bounds. Note that this may result in a zoom that does \n     *     not exactly contain the entire extent.\n     *     Default is false.\n     * \n     * Returns:\n     * {Integer} A suitable zoom level for the specified bounds.\n     *           If no baselayer is set, returns null.\n     */\n    getZoomForExtent: function (bounds, closest) {\n        var zoom = null;\n        if (this.baseLayer != null) {\n            zoom = this.baseLayer.getZoomForExtent(bounds, closest);\n        }\n        return zoom;\n    },\n\n    /**\n     * APIMethod: getResolutionForZoom\n     * \n     * Parameters:\n     * zoom - {Float}\n     * \n     * Returns:\n     * {Float} A suitable resolution for the specified zoom.  If no baselayer\n     *     is set, returns null.\n     */\n    getResolutionForZoom: function(zoom) {\n        var resolution = null;\n        if(this.baseLayer) {\n            resolution = this.baseLayer.getResolutionForZoom(zoom);\n        }\n        return resolution;\n    },\n\n    /**\n     * APIMethod: getZoomForResolution\n     * \n     * Parameters:\n     * resolution - {Float}\n     * closest - {Boolean} Find the zoom level that corresponds to the absolute \n     *     closest resolution, which may result in a zoom whose corresponding\n     *     resolution is actually smaller than we would have desired (if this\n     *     is being called from a getZoomForExtent() call, then this means that\n     *     the returned zoom index might not actually contain the entire \n     *     extent specified... but it'll be close).\n     *     Default is false.\n     * \n     * Returns:\n     * {Integer} A suitable zoom level for the specified resolution.\n     *           If no baselayer is set, returns null.\n     */\n    getZoomForResolution: function(resolution, closest) {\n        var zoom = null;\n        if (this.baseLayer != null) {\n            zoom = this.baseLayer.getZoomForResolution(resolution, closest);\n        }\n        return zoom;\n    },\n\n  /********************************************************/\n  /*                                                      */\n  /*                  Zooming Functions                   */\n  /*                                                      */\n  /*    The following functions, all publicly exposed     */\n  /*       in the API, are all merely wrappers to the     */\n  /*               the setCenter() function               */\n  /*                                                      */\n  /********************************************************/\n  \n    /** \n     * APIMethod: zoomTo\n     * Zoom to a specific zoom level. Zooming will be animated unless the map\n     * is configured with {zoomMethod: null}. To zoom without animation, use\n     * <setCenter> without a lonlat argument.\n     * \n     * Parameters:\n     * zoom - {Integer}\n     */\n    zoomTo: function(zoom, xy) {\n        // non-API arguments:\n        // xy - {<OpenLayers.Pixel>} optional zoom origin\n        \n        var map = this;\n        if (map.isValidZoomLevel(zoom)) {\n            if (map.baseLayer.wrapDateLine) {\n                zoom = map.adjustZoom(zoom);\n            }\n            var center = xy ?\n                map.getZoomTargetCenter(xy, map.getResolutionForZoom(zoom)) :\n                map.getCenter();\n            if (center) {\n                map.events.triggerEvent('zoomstart', {\n                    center: center,\n                    zoom: zoom\n                });\n            }\n            if (map.zoomTween) {\n                map.zoomTween.stop();\n                var currentRes = map.getResolution(),\n                    targetRes = map.getResolutionForZoom(zoom),\n                    start = {scale: 1},\n                    end = {scale: currentRes / targetRes};\n                if (!xy) {\n                    var size = map.getSize();\n                    xy = {x: size.w / 2, y: size.h / 2};\n                }\n                map.zoomTween.start(start, end, map.zoomDuration, {\n                    minFrameRate: 50, // don't spend much time zooming\n                    callbacks: {\n                        eachStep: function(data) {\n                            var containerOrigin = map.layerContainerOriginPx,\n                                scale = data.scale,\n                                dx = ((scale - 1) * (containerOrigin.x - xy.x)) | 0,\n                                dy = ((scale - 1) * (containerOrigin.y - xy.y)) | 0;\n                            map.applyTransform(containerOrigin.x + dx, containerOrigin.y + dy, scale);\n                        },\n                        done: function(data) {\n                            map.applyTransform();\n                            var resolution = map.getResolution() / data.scale,\n                                newZoom = map.getZoomForResolution(resolution, true),\n                                newCenter = data.scale === 1 ? center :\n                                        map.getZoomTargetCenter(xy, resolution);\n                            map.moveTo(newCenter, newZoom);\n                        }\n                    }\n                });\n            } else {\n                map.setCenter(center, zoom);\n            }\n        }\n    },\n        \n    /**\n     * APIMethod: zoomIn\n     * \n     */\n    zoomIn: function() {\n        if (this.zoomTween) {\n            this.zoomTween.stop();\n        }\n        this.zoomTo(this.getZoom() + 1);\n    },\n    \n    /**\n     * APIMethod: zoomOut\n     * \n     */\n    zoomOut: function() {\n        if (this.zoomTween) {\n            this.zoomTween.stop();\n        }\n        this.zoomTo(this.getZoom() - 1);\n    },\n\n    /**\n     * APIMethod: zoomToExtent\n     * Zoom to the passed in bounds, recenter\n     * \n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>|Array} If provided as an array, the array\n     *     should consist of four values (left, bottom, right, top).\n     * closest - {Boolean} Find the zoom level that most closely fits the \n     *     specified bounds. Note that this may result in a zoom that does \n     *     not exactly contain the entire extent.\n     *     Default is false.\n     * \n     */\n    zoomToExtent: function(bounds, closest) {\n        if (!(bounds instanceof OpenLayers.Bounds)) {\n            bounds = new OpenLayers.Bounds(bounds);\n        }\n        var center = bounds.getCenterLonLat();\n        if (this.baseLayer.wrapDateLine) {\n            var maxExtent = this.getMaxExtent();\n\n            //fix straddling bounds (in the case of a bbox that straddles the \n            // dateline, it's left and right boundaries will appear backwards. \n            // we fix this by allowing a right value that is greater than the\n            // max value at the dateline -- this allows us to pass a valid \n            // bounds to calculate zoom)\n            //\n            bounds = bounds.clone();\n            while (bounds.right < bounds.left) {\n                bounds.right += maxExtent.getWidth();\n            }\n            //if the bounds was straddling (see above), then the center point \n            // we got from it was wrong. So we take our new bounds and ask it\n            // for the center.\n            //\n            center = bounds.getCenterLonLat().wrapDateLine(maxExtent);\n        }\n        this.setCenter(center, this.getZoomForExtent(bounds, closest));\n    },\n\n    /** \n     * APIMethod: zoomToMaxExtent\n     * Zoom to the full extent and recenter.\n     *\n     * Parameters:\n     * options - {Object}\n     * \n     * Allowed Options:\n     * restricted - {Boolean} True to zoom to restricted extent if it is \n     *     set. Defaults to true.\n     */\n    zoomToMaxExtent: function(options) {\n        //restricted is true by default\n        var restricted = (options) ? options.restricted : true;\n\n        var maxExtent = this.getMaxExtent({\n            'restricted': restricted \n        });\n        this.zoomToExtent(maxExtent);\n    },\n\n    /** \n     * APIMethod: zoomToScale\n     * Zoom to a specified scale \n     * \n     * Parameters:\n     * scale - {float}\n     * closest - {Boolean} Find the zoom level that most closely fits the \n     *     specified scale. Note that this may result in a zoom that does \n     *     not exactly contain the entire extent.\n     *     Default is false.\n     * \n     */\n    zoomToScale: function(scale, closest) {\n        var res = OpenLayers.Util.getResolutionFromScale(scale, \n                                                         this.baseLayer.units);\n\n        var halfWDeg = (this.size.w * res) / 2;\n        var halfHDeg = (this.size.h * res) / 2;\n        var center = this.getCachedCenter();\n\n        var extent = new OpenLayers.Bounds(center.lon - halfWDeg,\n                                           center.lat - halfHDeg,\n                                           center.lon + halfWDeg,\n                                           center.lat + halfHDeg);\n        this.zoomToExtent(extent, closest);\n    },\n    \n  /********************************************************/\n  /*                                                      */\n  /*             Translation Functions                    */\n  /*                                                      */\n  /*      The following functions translate between       */\n  /*           LonLat, LayerPx, and ViewPortPx            */\n  /*                                                      */\n  /********************************************************/\n      \n  //\n  // TRANSLATION: LonLat <-> ViewPortPx\n  //\n\n    /**\n     * Method: getLonLatFromViewPortPx\n     * \n     * Parameters:\n     * viewPortPx - {<OpenLayers.Pixel>|Object} An OpenLayers.Pixel or\n     *                                          an object with a 'x'\n     *                                          and 'y' properties.\n     * \n     * Returns:\n     * {<OpenLayers.LonLat>} An OpenLayers.LonLat which is the passed-in view \n     *                       port <OpenLayers.Pixel>, translated into lon/lat\n     *                       by the current base layer.\n     */\n    getLonLatFromViewPortPx: function (viewPortPx) {\n        var lonlat = null; \n        if (this.baseLayer != null) {\n            lonlat = this.baseLayer.getLonLatFromViewPortPx(viewPortPx);\n        }\n        return lonlat;\n    },\n\n    /**\n     * APIMethod: getViewPortPxFromLonLat\n     * \n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>}\n     * \n     * Returns:\n     * {<OpenLayers.Pixel>} An OpenLayers.Pixel which is the passed-in \n     *                      <OpenLayers.LonLat>, translated into view port \n     *                      pixels by the current base layer.\n     */\n    getViewPortPxFromLonLat: function (lonlat) {\n        var px = null; \n        if (this.baseLayer != null) {\n            px = this.baseLayer.getViewPortPxFromLonLat(lonlat);\n        }\n        return px;\n    },\n\n    /**\n     * Method: getZoomTargetCenter\n     *\n     * Parameters:\n     * xy - {<OpenLayers.Pixel>} The zoom origin pixel location on the screen\n     * resolution - {Float} The resolution we want to get the center for\n     *\n     * Returns:\n     * {<OpenLayers.LonLat>} The location of the map center after the\n     *     transformation described by the origin xy and the target resolution.\n     */\n    getZoomTargetCenter: function (xy, resolution) {\n        var lonlat = null,\n            size = this.getSize(),\n            deltaX  = size.w/2 - xy.x,\n            deltaY  = xy.y - size.h/2,\n            zoomPoint = this.getLonLatFromPixel(xy);\n        if (zoomPoint) {\n            lonlat = new OpenLayers.LonLat(\n                zoomPoint.lon + deltaX * resolution,\n                zoomPoint.lat + deltaY * resolution\n            );\n        }\n        return lonlat;\n    },\n        \n  //\n  // CONVENIENCE TRANSLATION FUNCTIONS FOR API\n  //\n\n    /**\n     * APIMethod: getLonLatFromPixel\n     * \n     * Parameters:\n     * px - {<OpenLayers.Pixel>|Object} An OpenLayers.Pixel or an object with\n     *                                  a 'x' and 'y' properties.\n     *\n     * Returns:\n     * {<OpenLayers.LonLat>} An OpenLayers.LonLat corresponding to the given\n     *                       OpenLayers.Pixel, translated into lon/lat by the \n     *                       current base layer\n     */\n    getLonLatFromPixel: function (px) {\n        return this.getLonLatFromViewPortPx(px);\n    },\n\n    /**\n     * APIMethod: getPixelFromLonLat\n     * Returns a pixel location given a map location.  The map location is\n     *     translated to an integer pixel location (in viewport pixel\n     *     coordinates) by the current base layer.\n     * \n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>} A map location.\n     * \n     * Returns: \n     * {<OpenLayers.Pixel>} An OpenLayers.Pixel corresponding to the \n     *     <OpenLayers.LonLat> translated into view port pixels by the current\n     *     base layer.\n     */\n    getPixelFromLonLat: function (lonlat) {\n        var px = this.getViewPortPxFromLonLat(lonlat);\n        px.x = Math.round(px.x);\n        px.y = Math.round(px.y);\n        return px;\n    },\n    \n    /**\n     * Method: getGeodesicPixelSize\n     * \n     * Parameters:\n     * px - {<OpenLayers.Pixel>} The pixel to get the geodesic length for. If\n     *     not provided, the center pixel of the map viewport will be used.\n     * \n     * Returns:\n     * {<OpenLayers.Size>} The geodesic size of the pixel in kilometers.\n     */\n    getGeodesicPixelSize: function(px) {\n        var lonlat = px ? this.getLonLatFromPixel(px) : (\n            this.getCachedCenter() || new OpenLayers.LonLat(0, 0));\n        var res = this.getResolution();\n        var left = lonlat.add(-res / 2, 0);\n        var right = lonlat.add(res / 2, 0);\n        var bottom = lonlat.add(0, -res / 2);\n        var top = lonlat.add(0, res / 2);\n        var dest = new OpenLayers.Projection(\"EPSG:4326\");\n        var source = this.getProjectionObject() || dest;\n        if(!source.equals(dest)) {\n            left.transform(source, dest);\n            right.transform(source, dest);\n            bottom.transform(source, dest);\n            top.transform(source, dest);\n        }\n        \n        return new OpenLayers.Size(\n            OpenLayers.Util.distVincenty(left, right),\n            OpenLayers.Util.distVincenty(bottom, top)\n        );\n    },\n\n\n\n  //\n  // TRANSLATION: ViewPortPx <-> LayerPx\n  //\n\n    /**\n     * APIMethod: getViewPortPxFromLayerPx\n     * \n     * Parameters:\n     * layerPx - {<OpenLayers.Pixel>}\n     * \n     * Returns:\n     * {<OpenLayers.Pixel>} Layer Pixel translated into ViewPort Pixel \n     *                      coordinates\n     */\n    getViewPortPxFromLayerPx:function(layerPx) {\n        var viewPortPx = null;\n        if (layerPx != null) {\n            var dX = this.layerContainerOriginPx.x;\n            var dY = this.layerContainerOriginPx.y;\n            viewPortPx = layerPx.add(dX, dY);            \n        }\n        return viewPortPx;\n    },\n    \n    /**\n     * APIMethod: getLayerPxFromViewPortPx\n     * \n     * Parameters:\n     * viewPortPx - {<OpenLayers.Pixel>}\n     * \n     * Returns:\n     * {<OpenLayers.Pixel>} ViewPort Pixel translated into Layer Pixel \n     *                      coordinates\n     */\n    getLayerPxFromViewPortPx:function(viewPortPx) {\n        var layerPx = null;\n        if (viewPortPx != null) {\n            var dX = -this.layerContainerOriginPx.x;\n            var dY = -this.layerContainerOriginPx.y;\n            layerPx = viewPortPx.add(dX, dY);\n            if (isNaN(layerPx.x) || isNaN(layerPx.y)) {\n                layerPx = null;\n            }\n        }\n        return layerPx;\n    },\n    \n  //\n  // TRANSLATION: LonLat <-> LayerPx\n  //\n\n    /**\n     * Method: getLonLatFromLayerPx\n     * \n     * Parameters:\n     * px - {<OpenLayers.Pixel>}\n     *\n     * Returns:\n     * {<OpenLayers.LonLat>}\n     */\n    getLonLatFromLayerPx: function (px) {\n       //adjust for displacement of layerContainerDiv\n       px = this.getViewPortPxFromLayerPx(px);\n       return this.getLonLatFromViewPortPx(px);         \n    },\n    \n    /**\n     * APIMethod: getLayerPxFromLonLat\n     * \n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>} lonlat\n     *\n     * Returns:\n     * {<OpenLayers.Pixel>} An OpenLayers.Pixel which is the passed-in \n     *                      <OpenLayers.LonLat>, translated into layer pixels \n     *                      by the current base layer\n     */\n    getLayerPxFromLonLat: function (lonlat) {\n       //adjust for displacement of layerContainerDiv\n       var px = this.getPixelFromLonLat(lonlat);\n       return this.getLayerPxFromViewPortPx(px);         \n    },\n\n    /**\n     * Method: applyTransform\n     * Applies the given transform to the <layerContainerDiv>. This method has\n     * a 2-stage fallback from translate3d/scale3d via translate/scale to plain\n     * style.left/style.top, in which case no scaling is supported.\n     *\n     * Parameters:\n     * x - {Number} x parameter for the translation. Defaults to the x value of\n     *     the map's <layerContainerOriginPx>\n     * y - {Number} y parameter for the translation. Defaults to the y value of\n     *     the map's <layerContainerOriginPx>\n     * scale - {Number} scale. Defaults to 1 if not provided.\n     */\n     applyTransform: function(x, y, scale) {\n         scale = scale || 1;\n         var origin = this.layerContainerOriginPx,\n             needTransform = scale !== 1;\n         x = x || origin.x;\n         y = y || origin.y;\n            \n         var style = this.layerContainerDiv.style,\n             transform = this.applyTransform.transform,\n             template = this.applyTransform.template;\n        \n         if (transform === undefined) {\n             transform = OpenLayers.Util.vendorPrefix.style('transform');\n             this.applyTransform.transform = transform;\n             if (transform) {\n                 // Try translate3d, but only if the viewPortDiv has a transform\n                 // defined in a stylesheet\n                 var computedStyle = OpenLayers.Element.getStyle(this.viewPortDiv,\n                     OpenLayers.Util.vendorPrefix.css('transform'));\n                 if (!computedStyle || computedStyle !== 'none') {\n                     template = ['translate3d(', ',0) ', 'scale3d(', ',1)'];\n                     style[transform] = [template[0], '0,0', template[1]].join('');\n                 }\n                 // If no transform is defined in the stylesheet or translate3d\n                 // does not stick, use translate and scale\n                 if (!template || !~style[transform].indexOf(template[0])) {\n                     template = ['translate(', ') ', 'scale(', ')'];\n                 }\n                 this.applyTransform.template = template;\n             }\n         }\n         \n         // If we do 3d transforms, we always want to use them. If we do 2d\n         // transforms, we only use them when we need to.\n         if (transform !== null && (template[0] === 'translate3d(' || needTransform === true)) {\n             // Our 2d transforms are combined with style.left and style.top, so\n             // adjust x and y values and set the origin as left and top\n             if (needTransform === true && template[0] === 'translate(') {\n                 x -= origin.x;\n                 y -= origin.y;\n                 style.left = origin.x + 'px';\n                 style.top = origin.y + 'px';\n             }\n             style[transform] = [\n                 template[0], x, 'px,', y, 'px', template[1],\n                 template[2], scale, ',', scale, template[3]\n             ].join('');\n         } else {\n             style.left = x + 'px';\n             style.top = y + 'px';\n             // We previously might have had needTransform, so remove transform\n             if (transform !== null) {\n                 style[transform] = '';\n             }\n         }\n     },\n    \n    CLASS_NAME: \"OpenLayers.Map\"\n});\n\n/**\n * Constant: TILE_WIDTH\n * {Integer} 256 Default tile width (unless otherwise specified)\n */\nOpenLayers.Map.TILE_WIDTH = 256;\n/**\n * Constant: TILE_HEIGHT\n * {Integer} 256 Default tile height (unless otherwise specified)\n */\nOpenLayers.Map.TILE_HEIGHT = 256;\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Map.js\n * @requires OpenLayers/Projection.js\n */\n\n/**\n * Class: OpenLayers.Layer\n */\nOpenLayers.Layer = OpenLayers.Class({\n\n    /**\n     * APIProperty: id\n     * {String}\n     */\n    id: null,\n\n    /** \n     * APIProperty: name\n     * {String}\n     */\n    name: null,\n\n    /** \n     * APIProperty: div\n     * {DOMElement}\n     */\n    div: null,\n\n    /**\n     * APIProperty: opacity\n     * {Float} The layer's opacity. Float number between 0.0 and 1.0. Default\n     * is 1.\n     */\n    opacity: 1,\n\n    /**\n     * APIProperty: alwaysInRange\n     * {Boolean} If a layer's display should not be scale-based, this should \n     *     be set to true. This will cause the layer, as an overlay, to always \n     *     be 'active', by always returning true from the calculateInRange() \n     *     function. \n     * \n     *     If not explicitly specified for a layer, its value will be \n     *     determined on startup in initResolutions() based on whether or not \n     *     any scale-specific properties have been set as options on the \n     *     layer. If no scale-specific options have been set on the layer, we \n     *     assume that it should always be in range.\n     * \n     *     See #987 for more info.\n     */\n    alwaysInRange: null,   \n\n    /**\n     * Constant: RESOLUTION_PROPERTIES\n     * {Array} The properties that are used for calculating resolutions\n     *     information.\n     */\n    RESOLUTION_PROPERTIES: [\n        'scales', 'resolutions',\n        'maxScale', 'minScale',\n        'maxResolution', 'minResolution',\n        'numZoomLevels', 'maxZoomLevel'\n    ],\n\n    /**\n     * APIProperty: events\n     * {<OpenLayers.Events>}\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * layer.events.register(type, obj, listener);\n     * (end)\n     *\n     * Listeners will be called with a reference to an event object.  The\n     *     properties of this event depends on exactly what happened.\n     *\n     * All event objects have at least the following properties:\n     * object - {Object} A reference to layer.events.object.\n     * element - {DOMElement} A reference to layer.events.element.\n     *\n     * Supported map event types:\n     * loadstart - Triggered when layer loading starts.  When using a Vector \n     *     layer with a Fixed or BBOX strategy, the event object includes \n     *     a *filter* property holding the OpenLayers.Filter used when \n     *     calling read on the protocol.\n     * loadend - Triggered when layer loading ends.  When using a Vector layer\n     *     with a Fixed or BBOX strategy, the event object includes a \n     *     *response* property holding an OpenLayers.Protocol.Response object.\n     * visibilitychanged - Triggered when the layer's visibility property is\n     *     changed, e.g. by turning the layer on or off in the layer switcher.\n     *     Note that the actual visibility of the layer can also change if it\n     *     gets out of range (see <calculateInRange>). If you also want to catch\n     *     these cases, register for the map's 'changelayer' event instead.\n     * move - Triggered when layer moves (triggered with every mousemove\n     *     during a drag).\n     * moveend - Triggered when layer is done moving, object passed as\n     *     argument has a zoomChanged boolean property which tells that the\n     *     zoom has changed.\n     * added - Triggered after the layer is added to a map.  Listeners will\n     *     receive an object with a *map* property referencing the map and a\n     *     *layer* property referencing the layer.\n     * removed - Triggered after the layer is removed from the map.  Listeners\n     *     will receive an object with a *map* property referencing the map and\n     *     a *layer* property referencing the layer.\n     */\n    events: null,\n\n    /**\n     * APIProperty: map\n     * {<OpenLayers.Map>} This variable is set when the layer is added to \n     *     the map, via the accessor function setMap().\n     */\n    map: null,\n    \n    /**\n     * APIProperty: isBaseLayer\n     * {Boolean} Whether or not the layer is a base layer. This should be set \n     *     individually by all subclasses. Default is false\n     */\n    isBaseLayer: false,\n \n    /**\n     * Property: alpha\n     * {Boolean} The layer's images have an alpha channel.  Default is false.\n     */\n    alpha: false,\n\n    /** \n     * APIProperty: displayInLayerSwitcher\n     * {Boolean} Display the layer's name in the layer switcher.  Default is\n     *     true.\n     */\n    displayInLayerSwitcher: true,\n\n    /**\n     * APIProperty: visibility\n     * {Boolean} The layer should be displayed in the map.  Default is true.\n     */\n    visibility: true,\n\n    /**\n     * APIProperty: attribution\n     * {<Object>} or {<String>} Attribution information, displayed when an\n     *     <OpenLayers.Control.Attribution> has been added to the map.\n     *\n     *     An object is required to store the full attribution information\n     *     from a WMS capabilities response. Example attribution object:\n     *     {title:\"\",href:\"\",logo:{format:\"\",width:10,height:10,href:\"\"}}\n     */\n    attribution: null,\n\n    /** \n     * Property: inRange\n     * {Boolean} The current map resolution is within the layer's min/max \n     *     range. This is set in <OpenLayers.Map.setCenter> whenever the zoom \n     *     changes.\n     */\n    inRange: false,\n    \n    /**\n     * Propery: imageSize\n     * {<OpenLayers.Size>} For layers with a gutter, the image is larger than \n     *     the tile by twice the gutter in each dimension.\n     */\n    imageSize: null,\n    \n  // OPTIONS\n\n    /** \n     * Property: options\n     * {Object} An optional object whose properties will be set on the layer.\n     *     Any of the layer properties can be set as a property of the options\n     *     object and sent to the constructor when the layer is created.\n     */\n    options: null,\n\n    /**\n     * APIProperty: eventListeners\n     * {Object} If set as an option at construction, the eventListeners\n     *     object will be registered with <OpenLayers.Events.on>.  Object\n     *     structure must be a listeners object as shown in the example for\n     *     the events.on method.\n     */\n    eventListeners: null,\n\n    /**\n     * APIProperty: gutter\n     * {Integer} Determines the width (in pixels) of the gutter around image\n     *     tiles to ignore.  By setting this property to a non-zero value,\n     *     images will be requested that are wider and taller than the tile\n     *     size by a value of 2 x gutter.  This allows artifacts of rendering\n     *     at tile edges to be ignored.  Set a gutter value that is equal to\n     *     half the size of the widest symbol that needs to be displayed.\n     *     Defaults to zero.  Non-tiled layers always have zero gutter.\n     */ \n    gutter: 0, \n\n    /**\n     * APIProperty: projection\n     * {<OpenLayers.Projection>} or {<String>} Specifies the projection of the layer.\n     *     Can be set in the layer options. If not specified in the layer options,\n     *     it is set to the default projection specified in the map,\n     *     when the layer is added to the map.\n     *     Projection along with default maxExtent and resolutions\n     *     are set automatically with commercial baselayers in EPSG:3857,\n     *     such as Google, Bing and OpenStreetMap, and do not need to be specified.\n     *     Otherwise, if specifying projection, also set maxExtent,\n     *     maxResolution or resolutions as appropriate.\n     *     When using vector layers with strategies, layer projection should be set\n     *     to the projection of the source data if that is different from the map default.\n     * \n     *     Can be either a string or an <OpenLayers.Projection> object;\n     *     if a string is passed, will be converted to an object when\n     *     the layer is added to the map.\n     * \n     */\n    projection: null,    \n    \n    /**\n     * APIProperty: units\n     * {String} The layer map units.  Defaults to null.  Possible values\n     *     are 'degrees' (or 'dd'), 'm', 'ft', 'km', 'mi', 'inches'.\n     *     Normally taken from the projection.\n     *     Only required if both map and layers do not define a projection,\n     *     or if they define a projection which does not define units.\n     */\n    units: null,\n\n    /**\n     * APIProperty: scales\n     * {Array}  An array of map scales in descending order.  The values in the\n     *     array correspond to the map scale denominator.  Note that these\n     *     values only make sense if the display (monitor) resolution of the\n     *     client is correctly guessed by whomever is configuring the\n     *     application.  In addition, the units property must also be set.\n     *     Use <resolutions> instead wherever possible.\n     */\n    scales: null,\n\n    /**\n     * APIProperty: resolutions\n     * {Array} A list of map resolutions (map units per pixel) in descending\n     *     order.  If this is not set in the layer constructor, it will be set\n     *     based on other resolution related properties (maxExtent,\n     *     maxResolution, maxScale, etc.).\n     */\n    resolutions: null,\n    \n    /**\n     * APIProperty: maxExtent\n     * {<OpenLayers.Bounds>|Array} If provided as an array, the array\n     *     should consist of four values (left, bottom, right, top).\n     *     The maximum extent for the layer.  Defaults to null.\n     * \n     *     The center of these bounds will not stray outside\n     *     of the viewport extent during panning.  In addition, if\n     *     <displayOutsideMaxExtent> is set to false, data will not be\n     *     requested that falls completely outside of these bounds.\n     */\n    maxExtent: null,\n    \n    /**\n     * APIProperty: minExtent\n     * {<OpenLayers.Bounds>|Array} If provided as an array, the array\n     *     should consist of four values (left, bottom, right, top).\n     *     The minimum extent for the layer.  Defaults to null.\n     */\n    minExtent: null,\n    \n    /**\n     * APIProperty: maxResolution\n     * {Float} Default max is 360 deg / 256 px, which corresponds to\n     *     zoom level 0 on gmaps.  Specify a different value in the layer \n     *     options if you are not using the default <OpenLayers.Map.tileSize>\n     *     and displaying the whole world.\n     */\n    maxResolution: null,\n\n    /**\n     * APIProperty: minResolution\n     * {Float}\n     */\n    minResolution: null,\n\n    /**\n     * APIProperty: numZoomLevels\n     * {Integer}\n     */\n    numZoomLevels: null,\n    \n    /**\n     * APIProperty: minScale\n     * {Float}\n     */\n    minScale: null,\n    \n    /**\n     * APIProperty: maxScale\n     * {Float}\n     */\n    maxScale: null,\n\n    /**\n     * APIProperty: displayOutsideMaxExtent\n     * {Boolean} Request map tiles that are completely outside of the max \n     *     extent for this layer. Defaults to false.\n     */\n    displayOutsideMaxExtent: false,\n\n    /**\n     * APIProperty: wrapDateLine\n     * {Boolean} Wraps the world at the international dateline, so the map can\n     * be panned infinitely in longitudinal direction. Only use this on the\n     * base layer, and only if the layer's maxExtent equals the world bounds.\n     * #487 for more info.   \n     */\n    wrapDateLine: false,\n    \n    /**\n     * Property: metadata\n     * {Object} This object can be used to store additional information on a\n     *     layer object.\n     */\n    metadata: null,\n    \n    /**\n     * Constructor: OpenLayers.Layer\n     *\n     * Parameters:\n     * name - {String} The layer name\n     * options - {Object} Hashtable of extra options to tag onto the layer\n     */\n    initialize: function(name, options) {\n\n        this.metadata = {};\n        \n        options = OpenLayers.Util.extend({}, options);\n        // make sure we respect alwaysInRange if set on the prototype\n        if (this.alwaysInRange != null) {\n            options.alwaysInRange = this.alwaysInRange;\n        }\n        this.addOptions(options);\n\n        this.name = name;\n        \n        if (this.id == null) {\n\n            this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + \"_\");\n\n            this.div = OpenLayers.Util.createDiv(this.id);\n            this.div.style.width = \"100%\";\n            this.div.style.height = \"100%\";\n            this.div.dir = \"ltr\";\n\n            this.events = new OpenLayers.Events(this, this.div);\n            if(this.eventListeners instanceof Object) {\n                this.events.on(this.eventListeners);\n            }\n\n        }\n    },\n    \n    /**\n     * Method: destroy\n     * Destroy is a destructor: this is to alleviate cyclic references which\n     *     the Javascript garbage cleaner can not take care of on its own.\n     *\n     * Parameters:\n     * setNewBaseLayer - {Boolean} Set a new base layer when this layer has\n     *     been destroyed.  Default is true.\n     */\n    destroy: function(setNewBaseLayer) {\n        if (setNewBaseLayer == null) {\n            setNewBaseLayer = true;\n        }\n        if (this.map != null) {\n            this.map.removeLayer(this, setNewBaseLayer);\n        }\n        this.projection = null;\n        this.map = null;\n        this.name = null;\n        this.div = null;\n        this.options = null;\n\n        if (this.events) {\n            if(this.eventListeners) {\n                this.events.un(this.eventListeners);\n            }\n            this.events.destroy();\n        }\n        this.eventListeners = null;\n        this.events = null;\n    },\n    \n   /**\n    * Method: clone\n    *\n    * Parameters:\n    * obj - {<OpenLayers.Layer>} The layer to be cloned\n    *\n    * Returns:\n    * {<OpenLayers.Layer>} An exact clone of this <OpenLayers.Layer>\n    */\n    clone: function (obj) {\n        \n        if (obj == null) {\n            obj = new OpenLayers.Layer(this.name, this.getOptions());\n        }\n        \n        // catch any randomly tagged-on properties\n        OpenLayers.Util.applyDefaults(obj, this);\n        \n        // a cloned layer should never have its map property set\n        //  because it has not been added to a map yet. \n        obj.map = null;\n        \n        return obj;\n    },\n    \n    /**\n     * Method: getOptions\n     * Extracts an object from the layer with the properties that were set as\n     *     options, but updates them with the values currently set on the\n     *     instance.\n     * \n     * Returns:\n     * {Object} the <options> of the layer, representing the current state.\n     */\n    getOptions: function() {\n        var options = {};\n        for(var o in this.options) {\n            options[o] = this[o];\n        }\n        return options;\n    },\n    \n    /** \n     * APIMethod: setName\n     * Sets the new layer name for this layer.  Can trigger a changelayer event\n     *     on the map.\n     *\n     * Parameters:\n     * newName - {String} The new name.\n     */\n    setName: function(newName) {\n        if (newName != this.name) {\n            this.name = newName;\n            if (this.map != null) {\n                this.map.events.triggerEvent(\"changelayer\", {\n                    layer: this,\n                    property: \"name\"\n                });\n            }\n        }\n    },    \n    \n   /**\n    * APIMethod: addOptions\n    * \n    * Parameters:\n    * newOptions - {Object}\n    * reinitialize - {Boolean} If set to true, and if resolution options of the\n    *     current baseLayer were changed, the map will be recentered to make\n    *     sure that it is displayed with a valid resolution, and a\n    *     changebaselayer event will be triggered.\n    */\n    addOptions: function (newOptions, reinitialize) {\n\n        if (this.options == null) {\n            this.options = {};\n        }\n        \n        if (newOptions) {\n            // make sure this.projection references a projection object\n            if(typeof newOptions.projection == \"string\") {\n                newOptions.projection = new OpenLayers.Projection(newOptions.projection);\n            }\n            if (newOptions.projection) {\n                // get maxResolution, units and maxExtent from projection defaults if\n                // they are not defined already\n                OpenLayers.Util.applyDefaults(newOptions,\n                    OpenLayers.Projection.defaults[newOptions.projection.getCode()]);\n            }\n            // allow array for extents\n            if (newOptions.maxExtent && !(newOptions.maxExtent instanceof OpenLayers.Bounds)) {\n                newOptions.maxExtent = new OpenLayers.Bounds(newOptions.maxExtent);\n            }\n            if (newOptions.minExtent && !(newOptions.minExtent instanceof OpenLayers.Bounds)) {\n                newOptions.minExtent = new OpenLayers.Bounds(newOptions.minExtent);\n            }\n        }\n\n        // update our copy for clone\n        OpenLayers.Util.extend(this.options, newOptions);\n\n        // add new options to this\n        OpenLayers.Util.extend(this, newOptions);\n        \n        // get the units from the projection, if we have a projection\n        // and it it has units\n        if(this.projection && this.projection.getUnits()) {\n            this.units = this.projection.getUnits();\n        }\n\n        // re-initialize resolutions if necessary, i.e. if any of the\n        // properties of the \"properties\" array defined below is set\n        // in the new options\n        if(this.map) {\n            // store current resolution so we can try to restore it later\n            var resolution = this.map.getResolution();\n            var properties = this.RESOLUTION_PROPERTIES.concat(\n                [\"projection\", \"units\", \"minExtent\", \"maxExtent\"]\n            );\n            for(var o in newOptions) {\n                if(newOptions.hasOwnProperty(o) &&\n                   OpenLayers.Util.indexOf(properties, o) >= 0) {\n\n                    this.initResolutions();\n                    if (reinitialize && this.map.baseLayer === this) {\n                        // update map position, and restore previous resolution\n                        this.map.setCenter(this.map.getCenter(),\n                            this.map.getZoomForResolution(resolution),\n                            false, true\n                        );\n                        // trigger a changebaselayer event to make sure that\n                        // all controls (especially\n                        // OpenLayers.Control.PanZoomBar) get notified of the\n                        // new options\n                        this.map.events.triggerEvent(\"changebaselayer\", {\n                            layer: this\n                        });\n                    }\n                    break;\n                }\n            }\n        }\n    },\n\n    /**\n     * APIMethod: onMapResize\n     * This function can be implemented by subclasses\n     */\n    onMapResize: function() {\n        //this function can be implemented by subclasses  \n    },\n\n    /**\n     * APIMethod: redraw\n     * Redraws the layer.  Returns true if the layer was redrawn, false if not.\n     *\n     * Returns:\n     * {Boolean} The layer was redrawn.\n     */\n    redraw: function() {\n        var redrawn = false;\n        if (this.map) {\n\n            // min/max Range may have changed\n            this.inRange = this.calculateInRange();\n\n            // map's center might not yet be set\n            var extent = this.getExtent();\n\n            if (extent && this.inRange && this.visibility) {\n                var zoomChanged = true;\n                this.moveTo(extent, zoomChanged, false);\n                this.events.triggerEvent(\"moveend\",\n                    {\"zoomChanged\": zoomChanged});\n                redrawn = true;\n            }\n        }\n        return redrawn;\n    },\n\n    /**\n     * Method: moveTo\n     * \n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     * zoomChanged - {Boolean} Tells when zoom has changed, as layers have to\n     *     do some init work in that case.\n     * dragging - {Boolean}\n     */\n    moveTo:function(bounds, zoomChanged, dragging) {\n        var display = this.visibility;\n        if (!this.isBaseLayer) {\n            display = display && this.inRange;\n        }\n        this.display(display);\n    },\n\n    /**\n     * Method: moveByPx\n     * Move the layer based on pixel vector. To be implemented by subclasses.\n     *\n     * Parameters:\n     * dx - {Number} The x coord of the displacement vector.\n     * dy - {Number} The y coord of the displacement vector.\n     */\n    moveByPx: function(dx, dy) {\n    },\n\n    /**\n     * Method: setMap\n     * Set the map property for the layer. This is done through an accessor\n     *     so that subclasses can override this and take special action once \n     *     they have their map variable set. \n     * \n     *     Here we take care to bring over any of the necessary default \n     *     properties from the map. \n     * \n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    setMap: function(map) {\n        if (this.map == null) {\n        \n            this.map = map;\n            \n            // grab some essential layer data from the map if it hasn't already\n            //  been set\n            this.maxExtent = this.maxExtent || this.map.maxExtent;\n            this.minExtent = this.minExtent || this.map.minExtent;\n\n            this.projection = this.projection || this.map.projection;\n            if (typeof this.projection == \"string\") {\n                this.projection = new OpenLayers.Projection(this.projection);\n            }\n\n            // Check the projection to see if we can get units -- if not, refer\n            // to properties.\n            if (this.projection && this.projection.getUnits()) {\n                this.units = this.projection.getUnits();\n            }\n            else {\n                this.units = this.units || this.map.units;\n            }\n            \n            this.initResolutions();\n            \n            if (!this.isBaseLayer) {\n                this.inRange = this.calculateInRange();\n                var show = ((this.visibility) && (this.inRange));\n                this.div.style.display = show ? \"\" : \"none\";\n            }\n            \n            // deal with gutters\n            this.setTileSize();\n        }\n    },\n    \n    /**\n     * Method: afterAdd\n     * Called at the end of the map.addLayer sequence.  At this point, the map\n     *     will have a base layer.  To be overridden by subclasses.\n     */\n    afterAdd: function() {\n    },\n    \n    /**\n     * APIMethod: removeMap\n     * Just as setMap() allows each layer the possibility to take a \n     *     personalized action on being added to the map, removeMap() allows\n     *     each layer to take a personalized action on being removed from it. \n     *     For now, this will be mostly unused, except for the EventPane layer,\n     *     which needs this hook so that it can remove the special invisible\n     *     pane. \n     * \n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    removeMap: function(map) {\n        //to be overridden by subclasses\n    },\n    \n    /**\n     * APIMethod: getImageSize\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>} optional tile bounds, can be used\n     *     by subclasses that have to deal with different tile sizes at the\n     *     layer extent edges (e.g. Zoomify)\n     * \n     * Returns:\n     * {<OpenLayers.Size>} The size that the image should be, taking into \n     *     account gutters.\n     */ \n    getImageSize: function(bounds) { \n        return (this.imageSize || this.tileSize); \n    },    \n  \n    /**\n     * APIMethod: setTileSize\n     * Set the tile size based on the map size.  This also sets layer.imageSize\n     *     or use by Tile.Image.\n     * \n     * Parameters:\n     * size - {<OpenLayers.Size>}\n     */\n    setTileSize: function(size) {\n        var tileSize = (size) ? size :\n                                ((this.tileSize) ? this.tileSize :\n                                                   this.map.getTileSize());\n        this.tileSize = tileSize;\n        if(this.gutter) {\n          // layers with gutters need non-null tile sizes\n          //if(tileSize == null) {\n          //    OpenLayers.console.error(\"Error in layer.setMap() for \" +\n          //                              this.name + \": layers with \" +\n          //                              \"gutters need non-null tile sizes\");\n          //}\n            this.imageSize = new OpenLayers.Size(tileSize.w + (2*this.gutter), \n                                                 tileSize.h + (2*this.gutter)); \n        }\n    },\n\n    /**\n     * APIMethod: getVisibility\n     * \n     * Returns:\n     * {Boolean} The layer should be displayed (if in range).\n     */\n    getVisibility: function() {\n        return this.visibility;\n    },\n\n    /** \n     * APIMethod: setVisibility\n     * Set the visibility flag for the layer and hide/show & redraw \n     *     accordingly. Fire event unless otherwise specified\n     * \n     * Note that visibility is no longer simply whether or not the layer's\n     *     style.display is set to \"block\". Now we store a 'visibility' state \n     *     property on the layer class, this allows us to remember whether or \n     *     not we *desire* for a layer to be visible. In the case where the \n     *     map's resolution is out of the layer's range, this desire may be \n     *     subverted.\n     * \n     * Parameters:\n     * visibility - {Boolean} Whether or not to display the layer (if in range)\n     */\n    setVisibility: function(visibility) {\n        if (visibility != this.visibility) {\n            this.visibility = visibility;\n            this.display(visibility);\n            this.redraw();\n            if (this.map != null) {\n                this.map.events.triggerEvent(\"changelayer\", {\n                    layer: this,\n                    property: \"visibility\"\n                });\n            }\n            this.events.triggerEvent(\"visibilitychanged\");\n        }\n    },\n\n    /** \n     * APIMethod: display\n     * Hide or show the Layer. This is designed to be used internally, and \n     *     is not generally the way to enable or disable the layer. For that,\n     *     use the setVisibility function instead..\n     * \n     * Parameters:\n     * display - {Boolean}\n     */\n    display: function(display) {\n        if (display != (this.div.style.display != \"none\")) {\n            this.div.style.display = (display && this.calculateInRange()) ? \"block\" : \"none\";\n        }\n    },\n\n    /**\n     * APIMethod: calculateInRange\n     * \n     * Returns:\n     * {Boolean} The layer is displayable at the current map's current\n     *     resolution. Note that if 'alwaysInRange' is true for the layer, \n     *     this function will always return true.\n     */\n    calculateInRange: function() {\n        var inRange = false;\n\n        if (this.alwaysInRange) {\n            inRange = true;\n        } else {\n            if (this.map) {\n                var resolution = this.map.getResolution();\n                inRange = ( (resolution >= this.minResolution) &&\n                            (resolution <= this.maxResolution) );\n            }\n        }\n        return inRange;\n    },\n\n    /** \n     * APIMethod: setIsBaseLayer\n     * \n     * Parameters:\n     * isBaseLayer - {Boolean}\n     */\n    setIsBaseLayer: function(isBaseLayer) {\n        if (isBaseLayer != this.isBaseLayer) {\n            this.isBaseLayer = isBaseLayer;\n            if (this.map != null) {\n                this.map.events.triggerEvent(\"changebaselayer\", {\n                    layer: this\n                });\n            }\n        }\n    },\n\n  /********************************************************/\n  /*                                                      */\n  /*                 Baselayer Functions                  */\n  /*                                                      */\n  /********************************************************/\n  \n    /** \n     * Method: initResolutions\n     * This method's responsibility is to set up the 'resolutions' array \n     *     for the layer -- this array is what the layer will use to interface\n     *     between the zoom levels of the map and the resolution display \n     *     of the layer.\n     * \n     * The user has several options that determine how the array is set up.\n     *  \n     * For a detailed explanation, see the following wiki from the \n     *     openlayers.org homepage:\n     *     http://trac.openlayers.org/wiki/SettingZoomLevels\n     */\n    initResolutions: function() {\n\n        // ok we want resolutions, here's our strategy:\n        //\n        // 1. if resolutions are defined in the layer config, use them\n        // 2. else, if scales are defined in the layer config then derive\n        //    resolutions from these scales\n        // 3. else, attempt to calculate resolutions from maxResolution,\n        //    minResolution, numZoomLevels, maxZoomLevel set in the\n        //    layer config\n        // 4. if we still don't have resolutions, and if resolutions\n        //    are defined in the same, use them\n        // 5. else, if scales are defined in the map then derive\n        //    resolutions from these scales\n        // 6. else, attempt to calculate resolutions from maxResolution,\n        //    minResolution, numZoomLevels, maxZoomLevel set in the\n        //    map\n        // 7. hope for the best!\n\n        var i, len, p;\n        var props = {}, alwaysInRange = true;\n\n        // get resolution data from layer config\n        // (we also set alwaysInRange in the layer as appropriate)\n        for(i=0, len=this.RESOLUTION_PROPERTIES.length; i<len; i++) {\n            p = this.RESOLUTION_PROPERTIES[i];\n            props[p] = this.options[p];\n            if(alwaysInRange && this.options[p]) {\n                alwaysInRange = false;\n            }\n        }\n        if(this.options.alwaysInRange == null) {\n            this.alwaysInRange = alwaysInRange;\n        }\n\n        // if we don't have resolutions then attempt to derive them from scales\n        if(props.resolutions == null) {\n            props.resolutions = this.resolutionsFromScales(props.scales);\n        }\n\n        // if we still don't have resolutions then attempt to calculate them\n        if(props.resolutions == null) {\n            props.resolutions = this.calculateResolutions(props);\n        }\n\n        // if we couldn't calculate resolutions then we look at we have\n        // in the map\n        if(props.resolutions == null) {\n            for(i=0, len=this.RESOLUTION_PROPERTIES.length; i<len; i++) {\n                p = this.RESOLUTION_PROPERTIES[i];\n                props[p] = this.options[p] != null ?\n                    this.options[p] : this.map[p];\n            }\n            if(props.resolutions == null) {\n                props.resolutions = this.resolutionsFromScales(props.scales);\n            }\n            if(props.resolutions == null) {\n                props.resolutions = this.calculateResolutions(props);\n            }\n        }\n\n        // ok, we new need to set properties in the instance\n\n        // get maxResolution from the config if it's defined there\n        var maxResolution;\n        if(this.options.maxResolution &&\n           this.options.maxResolution !== \"auto\") {\n            maxResolution = this.options.maxResolution;\n        }\n        if(this.options.minScale) {\n            maxResolution = OpenLayers.Util.getResolutionFromScale(\n                this.options.minScale, this.units);\n        }\n\n        // get minResolution from the config if it's defined there\n        var minResolution;\n        if(this.options.minResolution &&\n           this.options.minResolution !== \"auto\") {\n            minResolution = this.options.minResolution;\n        }\n        if(this.options.maxScale) {\n            minResolution = OpenLayers.Util.getResolutionFromScale(\n                this.options.maxScale, this.units);\n        }\n\n        if(props.resolutions) {\n\n            //sort resolutions array descendingly\n            props.resolutions.sort(function(a, b) {\n                return (b - a);\n            });\n\n            // if we still don't have a maxResolution get it from the\n            // resolutions array\n            if(!maxResolution) {\n                maxResolution = props.resolutions[0];\n            }\n\n            // if we still don't have a minResolution get it from the\n            // resolutions array\n            if(!minResolution) {\n                var lastIdx = props.resolutions.length - 1;\n                minResolution = props.resolutions[lastIdx];\n            }\n        }\n\n        this.resolutions = props.resolutions;\n        if(this.resolutions) {\n            len = this.resolutions.length;\n            this.scales = new Array(len);\n            for(i=0; i<len; i++) {\n                this.scales[i] = OpenLayers.Util.getScaleFromResolution(\n                    this.resolutions[i], this.units);\n            }\n            this.numZoomLevels = len;\n        }\n        this.minResolution = minResolution;\n        if(minResolution) {\n            this.maxScale = OpenLayers.Util.getScaleFromResolution(\n                minResolution, this.units);\n        }\n        this.maxResolution = maxResolution;\n        if(maxResolution) {\n            this.minScale = OpenLayers.Util.getScaleFromResolution(\n                maxResolution, this.units);\n        }\n    },\n\n    /**\n     * Method: resolutionsFromScales\n     * Derive resolutions from scales.\n     *\n     * Parameters:\n     * scales - {Array(Number)} Scales\n     *\n     * Returns\n     * {Array(Number)} Resolutions\n     */\n    resolutionsFromScales: function(scales) {\n        if(scales == null) {\n            return;\n        }\n        var resolutions, i, len;\n        len = scales.length;\n        resolutions = new Array(len);\n        for(i=0; i<len; i++) {\n            resolutions[i] = OpenLayers.Util.getResolutionFromScale(\n                scales[i], this.units);\n        }\n        return resolutions;\n    },\n\n    /**\n     * Method: calculateResolutions\n     * Calculate resolutions based on the provided properties.\n     *\n     * Parameters:\n     * props - {Object} Properties\n     *\n     * Returns:\n     * {Array({Number})} Array of resolutions.\n     */\n    calculateResolutions: function(props) {\n\n        var viewSize, wRes, hRes;\n\n        // determine maxResolution\n        var maxResolution = props.maxResolution;\n        if(props.minScale != null) {\n            maxResolution =\n                OpenLayers.Util.getResolutionFromScale(props.minScale,\n                                                       this.units);\n        } else if(maxResolution == \"auto\" && this.maxExtent != null) {\n            viewSize = this.map.getSize();\n            wRes = this.maxExtent.getWidth() / viewSize.w;\n            hRes = this.maxExtent.getHeight() / viewSize.h;\n            maxResolution = Math.max(wRes, hRes);\n        }\n\n        // determine minResolution\n        var minResolution = props.minResolution;\n        if(props.maxScale != null) {\n            minResolution =\n                OpenLayers.Util.getResolutionFromScale(props.maxScale,\n                                                       this.units);\n        } else if(props.minResolution == \"auto\" && this.minExtent != null) {\n            viewSize = this.map.getSize();\n            wRes = this.minExtent.getWidth() / viewSize.w;\n            hRes = this.minExtent.getHeight()/ viewSize.h;\n            minResolution = Math.max(wRes, hRes);\n        }\n\n        if(typeof maxResolution !== \"number\" &&\n           typeof minResolution !== \"number\" &&\n           this.maxExtent != null) {\n            // maxResolution for default grid sets assumes that at zoom\n            // level zero, the whole world fits on one tile.\n            var tileSize = this.map.getTileSize();\n            maxResolution = Math.max(\n                this.maxExtent.getWidth() / tileSize.w,\n                this.maxExtent.getHeight() / tileSize.h\n            );\n        }\n\n        // determine numZoomLevels\n        var maxZoomLevel = props.maxZoomLevel;\n        var numZoomLevels = props.numZoomLevels;\n        if(typeof minResolution === \"number\" &&\n           typeof maxResolution === \"number\" && numZoomLevels === undefined) {\n            var ratio = maxResolution / minResolution;\n            numZoomLevels = Math.floor(Math.log(ratio) / Math.log(2)) + 1;\n        } else if(numZoomLevels === undefined && maxZoomLevel != null) {\n            numZoomLevels = maxZoomLevel + 1;\n        }\n\n        // are we able to calculate resolutions?\n        if(typeof numZoomLevels !== \"number\" || numZoomLevels <= 0 ||\n           (typeof maxResolution !== \"number\" &&\n                typeof minResolution !== \"number\")) {\n            return;\n        }\n\n        // now we have numZoomLevels and at least one of maxResolution\n        // or minResolution, we can populate the resolutions array\n\n        var resolutions = new Array(numZoomLevels);\n        var base = 2;\n        if(typeof minResolution == \"number\" &&\n           typeof maxResolution == \"number\") {\n            // if maxResolution and minResolution are set, we calculate\n            // the base for exponential scaling that starts at\n            // maxResolution and ends at minResolution in numZoomLevels\n            // steps.\n            base = Math.pow(\n                    (maxResolution / minResolution),\n                (1 / (numZoomLevels - 1))\n            );\n        }\n\n        var i;\n        if(typeof maxResolution === \"number\") {\n            for(i=0; i<numZoomLevels; i++) {\n                resolutions[i] = maxResolution / Math.pow(base, i);\n            }\n        } else {\n            for(i=0; i<numZoomLevels; i++) {\n                resolutions[numZoomLevels - 1 - i] =\n                    minResolution * Math.pow(base, i);\n            }\n        }\n\n        return resolutions;\n    },\n\n    /**\n     * APIMethod: getResolution\n     * \n     * Returns:\n     * {Float} The currently selected resolution of the map, taken from the\n     *     resolutions array, indexed by current zoom level.\n     */\n    getResolution: function() {\n        var zoom = this.map.getZoom();\n        return this.getResolutionForZoom(zoom);\n    },\n\n    /** \n     * APIMethod: getExtent\n     * \n     * Returns:\n     * {<OpenLayers.Bounds>} A Bounds object which represents the lon/lat \n     *     bounds of the current viewPort.\n     */\n    getExtent: function() {\n        // just use stock map calculateBounds function -- passing no arguments\n        //  means it will user map's current center & resolution\n        //\n        return this.map.calculateBounds();\n    },\n\n    /**\n     * APIMethod: getZoomForExtent\n     * \n     * Parameters:\n     * extent - {<OpenLayers.Bounds>}\n     * closest - {Boolean} Find the zoom level that most closely fits the \n     *     specified bounds. Note that this may result in a zoom that does \n     *     not exactly contain the entire extent.\n     *     Default is false.\n     *\n     * Returns:\n     * {Integer} The index of the zoomLevel (entry in the resolutions array) \n     *     for the passed-in extent. We do this by calculating the ideal \n     *     resolution for the given extent (based on the map size) and then \n     *     calling getZoomForResolution(), passing along the 'closest'\n     *     parameter.\n     */\n    getZoomForExtent: function(extent, closest) {\n        var viewSize = this.map.getSize();\n        var idealResolution = Math.max( extent.getWidth()  / viewSize.w,\n                                        extent.getHeight() / viewSize.h );\n\n        return this.getZoomForResolution(idealResolution, closest);\n    },\n    \n    /** \n     * Method: getDataExtent\n     * Calculates the max extent which includes all of the data for the layer.\n     *     This function is to be implemented by subclasses.\n     * \n     * Returns:\n     * {<OpenLayers.Bounds>}\n     */\n    getDataExtent: function () {\n        //to be implemented by subclasses\n    },\n\n    /**\n     * APIMethod: getResolutionForZoom\n     * \n     * Parameters:\n     * zoom - {Float}\n     * \n     * Returns:\n     * {Float} A suitable resolution for the specified zoom.\n     */\n    getResolutionForZoom: function(zoom) {\n        zoom = Math.max(0, Math.min(zoom, this.resolutions.length - 1));\n        var resolution;\n        if(this.map.fractionalZoom) {\n            var low = Math.floor(zoom);\n            var high = Math.ceil(zoom);\n            resolution = this.resolutions[low] -\n                ((zoom-low) * (this.resolutions[low]-this.resolutions[high]));\n        } else {\n            resolution = this.resolutions[Math.round(zoom)];\n        }\n        return resolution;\n    },\n\n    /**\n     * APIMethod: getZoomForResolution\n     * \n     * Parameters:\n     * resolution - {Float}\n     * closest - {Boolean} Find the zoom level that corresponds to the absolute \n     *     closest resolution, which may result in a zoom whose corresponding\n     *     resolution is actually smaller than we would have desired (if this\n     *     is being called from a getZoomForExtent() call, then this means that\n     *     the returned zoom index might not actually contain the entire \n     *     extent specified... but it'll be close).\n     *     Default is false.\n     * \n     * Returns:\n     * {Integer} The index of the zoomLevel (entry in the resolutions array) \n     *     that corresponds to the best fit resolution given the passed in \n     *     value and the 'closest' specification.\n     */\n    getZoomForResolution: function(resolution, closest) {\n        var zoom, i, len;\n        if(this.map.fractionalZoom) {\n            var lowZoom = 0;\n            var highZoom = this.resolutions.length - 1;\n            var highRes = this.resolutions[lowZoom];\n            var lowRes = this.resolutions[highZoom];\n            var res;\n            for(i=0, len=this.resolutions.length; i<len; ++i) {\n                res = this.resolutions[i];\n                if(res >= resolution) {\n                    highRes = res;\n                    lowZoom = i;\n                }\n                if(res <= resolution) {\n                    lowRes = res;\n                    highZoom = i;\n                    break;\n                }\n            }\n            var dRes = highRes - lowRes;\n            if(dRes > 0) {\n                zoom = lowZoom + ((highRes - resolution) / dRes);\n            } else {\n                zoom = lowZoom;\n            }\n        } else {\n            var diff;\n            var minDiff = Number.POSITIVE_INFINITY;\n            for(i=0, len=this.resolutions.length; i<len; i++) {            \n                if (closest) {\n                    diff = Math.abs(this.resolutions[i] - resolution);\n                    if (diff > minDiff) {\n                        break;\n                    }\n                    minDiff = diff;\n                } else {\n                    if (this.resolutions[i] < resolution) {\n                        break;\n                    }\n                }\n            }\n            zoom = Math.max(0, i-1);\n        }\n        return zoom;\n    },\n    \n    /**\n     * APIMethod: getLonLatFromViewPortPx\n     * \n     * Parameters:\n     * viewPortPx - {<OpenLayers.Pixel>|Object} An OpenLayers.Pixel or\n     *                                          an object with a 'x'\n     *                                          and 'y' properties.\n     *\n     * Returns:\n     * {<OpenLayers.LonLat>} An OpenLayers.LonLat which is the passed-in \n     *     view port <OpenLayers.Pixel>, translated into lon/lat by the layer.\n     */\n    getLonLatFromViewPortPx: function (viewPortPx) {\n        var lonlat = null;\n        var map = this.map;\n        if (viewPortPx != null && map.minPx) {\n            var res = map.getResolution();\n            var maxExtent = map.getMaxExtent({restricted: true});\n            var lon = (viewPortPx.x - map.minPx.x) * res + maxExtent.left;\n            var lat = (map.minPx.y - viewPortPx.y) * res + maxExtent.top;\n            lonlat = new OpenLayers.LonLat(lon, lat);\n\n            if (this.wrapDateLine) {\n                lonlat = lonlat.wrapDateLine(this.maxExtent);\n            }\n        }\n        return lonlat;\n    },\n\n    /**\n     * APIMethod: getViewPortPxFromLonLat\n     * Returns a pixel location given a map location.  This method will return\n     *     fractional pixel values.\n     * \n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>|Object} An OpenLayers.LonLat or\n     *                                       an object with a 'lon'\n     *                                       and 'lat' properties.\n     *\n     * Returns: \n     * {<OpenLayers.Pixel>} An <OpenLayers.Pixel> which is the passed-in \n     *     lonlat translated into view port pixels.\n     */\n    getViewPortPxFromLonLat: function (lonlat, resolution) {\n        var px = null; \n        if (lonlat != null) {\n            resolution = resolution || this.map.getResolution();\n            var extent = this.map.calculateBounds(null, resolution);\n            px = new OpenLayers.Pixel(\n                (1/resolution * (lonlat.lon - extent.left)),\n                (1/resolution * (extent.top - lonlat.lat))\n            );    \n        }\n        return px;\n    },\n    \n    /**\n     * APIMethod: setOpacity\n     * Sets the opacity for the entire layer (all images)\n     * \n     * Parameters:\n     * opacity - {Float}\n     */\n    setOpacity: function(opacity) {\n        if (opacity != this.opacity) {\n            this.opacity = opacity;\n            var childNodes = this.div.childNodes;\n            for(var i = 0, len = childNodes.length; i < len; ++i) {\n                var element = childNodes[i].firstChild || childNodes[i];\n                var lastChild = childNodes[i].lastChild;\n                //TODO de-uglify this\n                if (lastChild && lastChild.nodeName.toLowerCase() === \"iframe\") {\n                    element = lastChild.parentNode;\n                }\n                OpenLayers.Util.modifyDOMElement(element, null, null, null, \n                                                 null, null, null, opacity);\n            }\n            if (this.map != null) {\n                this.map.events.triggerEvent(\"changelayer\", {\n                    layer: this,\n                    property: \"opacity\"\n                });\n            }\n        }\n    },\n\n    /**\n     * Method: getZIndex\n     * \n     * Returns: \n     * {Integer} the z-index of this layer\n     */    \n    getZIndex: function () {\n        return this.div.style.zIndex;\n    },\n\n    /**\n     * Method: setZIndex\n     * \n     * Parameters: \n     * zIndex - {Integer}\n     */    \n    setZIndex: function (zIndex) {\n        this.div.style.zIndex = zIndex;\n    },\n\n    /**\n     * Method: adjustBounds\n     * This function will take a bounds, and if wrapDateLine option is set\n     *     on the layer, it will return a bounds which is wrapped around the \n     *     world. We do not wrap for bounds which *cross* the \n     *     maxExtent.left/right, only bounds which are entirely to the left \n     *     or entirely to the right.\n     * \n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     */\n    adjustBounds: function (bounds) {\n\n        if (this.gutter) {\n            // Adjust the extent of a bounds in map units by the \n            // layer's gutter in pixels.\n            var mapGutter = this.gutter * this.map.getResolution();\n            bounds = new OpenLayers.Bounds(bounds.left - mapGutter,\n                                           bounds.bottom - mapGutter,\n                                           bounds.right + mapGutter,\n                                           bounds.top + mapGutter);\n        }\n\n        if (this.wrapDateLine) {\n            // wrap around the date line, within the limits of rounding error\n            var wrappingOptions = { \n                'rightTolerance':this.getResolution(),\n                'leftTolerance':this.getResolution()\n            };    \n            bounds = bounds.wrapDateLine(this.maxExtent, wrappingOptions);\n                              \n        }\n        return bounds;\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n */\n\n/**\n * Class: OpenLayers.Icon\n * \n * The icon represents a graphical icon on the screen.  Typically used in\n * conjunction with a <OpenLayers.Marker> to represent markers on a screen.\n *\n * An icon has a url, size and position.  It also contains an offset which \n * allows the center point to be represented correctly.  This can be\n * provided either as a fixed offset or a function provided to calculate\n * the desired offset. \n * \n */\nOpenLayers.Icon = OpenLayers.Class({\n    \n    /** \n     * Property: url \n     * {String}  image url\n     */\n    url: null,\n    \n    /** \n     * Property: size \n     * {<OpenLayers.Size>|Object} An OpenLayers.Size or\n     * an object with a 'w' and 'h' properties.\n     */\n    size: null,\n\n    /** \n     * Property: offset \n     * {<OpenLayers.Pixel>|Object} distance in pixels to offset the\n     * image when being rendered. An OpenLayers.Pixel or an object\n     * with a 'x' and 'y' properties.\n     */\n    offset: null,    \n    \n    /** \n     * Property: calculateOffset \n     * {Function} Function to calculate the offset (based on the size)\n     */\n    calculateOffset: null,    \n    \n    /** \n     * Property: imageDiv \n     * {DOMElement} \n     */\n    imageDiv: null,\n\n    /** \n     * Property: px \n     * {<OpenLayers.Pixel>|Object} An OpenLayers.Pixel or an object\n     * with a 'x' and 'y' properties.\n     */\n    px: null,\n    \n    /** \n     * Constructor: OpenLayers.Icon\n     * Creates an icon, which is an image tag in a div.  \n     *\n     * url - {String} \n     * size - {<OpenLayers.Size>|Object} An OpenLayers.Size or an\n     *                                   object with a 'w' and 'h'\n     *                                   properties.\n     * offset - {<OpenLayers.Pixel>|Object} An OpenLayers.Pixel or an\n     *                                      object with a 'x' and 'y'\n     *                                      properties.\n     * calculateOffset - {Function} \n     */\n    initialize: function(url, size, offset, calculateOffset) {\n        this.url = url;\n        this.size = size || {w: 20, h: 20};\n        this.offset = offset || {x: -(this.size.w/2), y: -(this.size.h/2)};\n        this.calculateOffset = calculateOffset;\n\n        var id = OpenLayers.Util.createUniqueID(\"OL_Icon_\");\n        this.imageDiv = OpenLayers.Util.createAlphaImageDiv(id);\n    },\n    \n    /** \n     * Method: destroy\n     * Nullify references and remove event listeners to prevent circular \n     * references and memory leaks\n     */\n    destroy: function() {\n        // erase any drawn elements\n        this.erase();\n\n        OpenLayers.Event.stopObservingElement(this.imageDiv.firstChild); \n        this.imageDiv.innerHTML = \"\";\n        this.imageDiv = null;\n    },\n\n    /** \n     * Method: clone\n     * \n     * Returns:\n     * {<OpenLayers.Icon>} A fresh copy of the icon.\n     */\n    clone: function() {\n        return new OpenLayers.Icon(this.url, \n                                   this.size, \n                                   this.offset, \n                                   this.calculateOffset);\n    },\n    \n    /**\n     * Method: setSize\n     * \n     * Parameters:\n     * size - {<OpenLayers.Size>|Object} An OpenLayers.Size or\n     * an object with a 'w' and 'h' properties.\n     */\n    setSize: function(size) {\n        if (size != null) {\n            this.size = size;\n        }\n        this.draw();\n    },\n    \n    /**\n     * Method: setUrl\n     * \n     * Parameters:\n     * url - {String} \n     */\n    setUrl: function(url) {\n        if (url != null) {\n            this.url = url;\n        }\n        this.draw();\n    },\n\n    /** \n     * Method: draw\n     * Move the div to the given pixel.\n     * \n     * Parameters:\n     * px - {<OpenLayers.Pixel>|Object} An OpenLayers.Pixel or an\n     *                                  object with a 'x' and 'y' properties.\n     * \n     * Returns:\n     * {DOMElement} A new DOM Image of this icon set at the location passed-in\n     */\n    draw: function(px) {\n        OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv, \n                                            null, \n                                            null, \n                                            this.size, \n                                            this.url, \n                                            \"absolute\");\n        this.moveTo(px);\n        return this.imageDiv;\n    }, \n\n    /** \n     * Method: erase\n     * Erase the underlying image element.\n     */\n    erase: function() {\n        if (this.imageDiv != null && this.imageDiv.parentNode != null) {\n            OpenLayers.Element.remove(this.imageDiv);\n        }\n    }, \n    \n    /** \n     * Method: setOpacity\n     * Change the icon's opacity\n     *\n     * Parameters:\n     * opacity - {float} \n     */\n    setOpacity: function(opacity) {\n        OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv, null, null, null, \n                                            null, null, null, null, opacity);\n\n    },\n    \n    /**\n     * Method: moveTo\n     * move icon to passed in px.\n     *\n     * Parameters:\n     * px - {<OpenLayers.Pixel>|Object} the pixel position to move to.\n     * An OpenLayers.Pixel or an object with a 'x' and 'y' properties.\n     */\n    moveTo: function (px) {\n        //if no px passed in, use stored location\n        if (px != null) {\n            this.px = px;\n        }\n\n        if (this.imageDiv != null) {\n            if (this.px == null) {\n                this.display(false);\n            } else {\n                if (this.calculateOffset) {\n                    this.offset = this.calculateOffset(this.size);  \n                }\n                OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv, null, {\n                    x: this.px.x + this.offset.x,\n                    y: this.px.y + this.offset.y\n                });\n            }\n        }\n    },\n    \n    /** \n     * Method: display\n     * Hide or show the icon\n     *\n     * Parameters:\n     * display - {Boolean} \n     */\n    display: function(display) {\n        this.imageDiv.style.display = (display) ? \"\" : \"none\"; \n    },\n    \n\n    /**\n     * APIMethod: isDrawn\n     * \n     * Returns:\n     * {Boolean} Whether or not the icon is drawn.\n     */\n    isDrawn: function() {\n        // nodeType 11 for ie, whose nodes *always* have a parentNode\n        // (of type document fragment)\n        var isDrawn = (this.imageDiv && this.imageDiv.parentNode && \n                       (this.imageDiv.parentNode.nodeType != 11));    \n\n        return isDrawn;   \n    },\n\n    CLASS_NAME: \"OpenLayers.Icon\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Events.js\n * @requires OpenLayers/Icon.js\n */\n\n/**\n * Class: OpenLayers.Marker\n * Instances of OpenLayers.Marker are a combination of a \n * <OpenLayers.LonLat> and an <OpenLayers.Icon>.  \n *\n * Markers are generally added to a special layer called\n * <OpenLayers.Layer.Markers>.\n *\n * Example:\n * (code)\n * var markers = new OpenLayers.Layer.Markers( \"Markers\" );\n * map.addLayer(markers);\n *\n * var size = new OpenLayers.Size(21,25);\n * var offset = new OpenLayers.Pixel(-(size.w/2), -size.h);\n * var icon = new OpenLayers.Icon('http://www.openlayers.org/dev/img/marker.png', size, offset);\n * markers.addMarker(new OpenLayers.Marker(new OpenLayers.LonLat(0,0),icon));\n * markers.addMarker(new OpenLayers.Marker(new OpenLayers.LonLat(0,0),icon.clone()));\n *\n * (end)\n *\n * Note that if you pass an icon into the Marker constructor, it will take\n * that icon and use it. This means that you should not share icons between\n * markers -- you use them once, but you should clone() for any additional\n * markers using that same icon.\n */\nOpenLayers.Marker = OpenLayers.Class({\n    \n    /** \n     * Property: icon \n     * {<OpenLayers.Icon>} The icon used by this marker.\n     */\n    icon: null,\n\n    /** \n     * Property: lonlat \n     * {<OpenLayers.LonLat>} location of object\n     */\n    lonlat: null,\n    \n    /** \n     * Property: events \n     * {<OpenLayers.Events>} the event handler.\n     */\n    events: null,\n    \n    /** \n     * Property: map \n     * {<OpenLayers.Map>} the map this marker is attached to\n     */\n    map: null,\n    \n    /** \n     * Constructor: OpenLayers.Marker\n     *\n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>} the position of this marker\n     * icon - {<OpenLayers.Icon>}  the icon for this marker\n     */\n    initialize: function(lonlat, icon) {\n        this.lonlat = lonlat;\n        \n        var newIcon = (icon) ? icon : OpenLayers.Marker.defaultIcon();\n        if (this.icon == null) {\n            this.icon = newIcon;\n        } else {\n            this.icon.url = newIcon.url;\n            this.icon.size = newIcon.size;\n            this.icon.offset = newIcon.offset;\n            this.icon.calculateOffset = newIcon.calculateOffset;\n        }\n        this.events = new OpenLayers.Events(this, this.icon.imageDiv);\n    },\n    \n    /**\n     * APIMethod: destroy\n     * Destroy the marker. You must first remove the marker from any \n     * layer which it has been added to, or you will get buggy behavior.\n     * (This can not be done within the marker since the marker does not\n     * know which layer it is attached to.)\n     */\n    destroy: function() {\n        // erase any drawn features\n        this.erase();\n\n        this.map = null;\n\n        this.events.destroy();\n        this.events = null;\n\n        if (this.icon != null) {\n            this.icon.destroy();\n            this.icon = null;\n        }\n    },\n    \n    /** \n    * Method: draw\n    * Calls draw on the icon, and returns that output.\n    * \n    * Parameters:\n    * px - {<OpenLayers.Pixel>}\n    * \n    * Returns:\n    * {DOMElement} A new DOM Image with this marker's icon set at the \n    * location passed-in\n    */\n    draw: function(px) {\n        return this.icon.draw(px);\n    }, \n\n    /** \n    * Method: erase\n    * Erases any drawn elements for this marker.\n    */\n    erase: function() {\n        if (this.icon != null) {\n            this.icon.erase();\n        }\n    }, \n\n    /**\n    * Method: moveTo\n    * Move the marker to the new location.\n    *\n    * Parameters:\n    * px - {<OpenLayers.Pixel>|Object} the pixel position to move to.\n    * An OpenLayers.Pixel or an object with a 'x' and 'y' properties.\n    */\n    moveTo: function (px) {\n        if ((px != null) && (this.icon != null)) {\n            this.icon.moveTo(px);\n        }           \n        this.lonlat = this.map.getLonLatFromLayerPx(px);\n    },\n\n    /**\n     * APIMethod: isDrawn\n     * \n     * Returns:\n     * {Boolean} Whether or not the marker is drawn.\n     */\n    isDrawn: function() {\n        var isDrawn = (this.icon && this.icon.isDrawn());\n        return isDrawn;   \n    },\n\n    /**\n     * Method: onScreen\n     *\n     * Returns:\n     * {Boolean} Whether or not the marker is currently visible on screen.\n     */\n    onScreen:function() {\n        \n        var onScreen = false;\n        if (this.map) {\n            var screenBounds = this.map.getExtent();\n            onScreen = screenBounds.containsLonLat(this.lonlat);\n        }    \n        return onScreen;\n    },\n    \n    /**\n     * Method: inflate\n     * Englarges the markers icon by the specified ratio.\n     *\n     * Parameters:\n     * inflate - {float} the ratio to enlarge the marker by (passing 2\n     *                   will double the size).\n     */\n    inflate: function(inflate) {\n        if (this.icon) {\n            this.icon.setSize({\n                w: this.icon.size.w * inflate,\n                h: this.icon.size.h * inflate\n            });\n        }        \n    },\n    \n    /** \n     * Method: setOpacity\n     * Change the opacity of the marker by changin the opacity of \n     *   its icon\n     * \n     * Parameters:\n     * opacity - {float}  Specified as fraction (0.4, etc)\n     */\n    setOpacity: function(opacity) {\n        this.icon.setOpacity(opacity);\n    },\n\n    /**\n     * Method: setUrl\n     * Change URL of the Icon Image.\n     * \n     * url - {String} \n     */\n    setUrl: function(url) {\n        this.icon.setUrl(url);\n    },    \n\n    /** \n     * Method: display\n     * Hide or show the icon\n     * \n     * display - {Boolean} \n     */\n    display: function(display) {\n        this.icon.display(display);\n    },\n\n    CLASS_NAME: \"OpenLayers.Marker\"\n});\n\n\n/**\n * Function: defaultIcon\n * Creates a default <OpenLayers.Icon>.\n * \n * Returns:\n * {<OpenLayers.Icon>} A default OpenLayers.Icon to use for a marker\n */\nOpenLayers.Marker.defaultIcon = function() {\n    return new OpenLayers.Icon(OpenLayers.Util.getImageLocation(\"marker.png\"),\n                               {w: 21, h: 25}, {x: -10.5, y: -25});\n};\n    \n\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Marker.js\n */\n\n/**\n * Class: OpenLayers.Marker.Box\n *\n * Inherits from:\n *  - <OpenLayers.Marker> \n */\nOpenLayers.Marker.Box = OpenLayers.Class(OpenLayers.Marker, {\n\n    /** \n     * Property: bounds \n     * {<OpenLayers.Bounds>} \n     */\n    bounds: null,\n\n    /** \n     * Property: div \n     * {DOMElement} \n     */\n    div: null,\n    \n    /** \n     * Constructor: OpenLayers.Marker.Box\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>} \n     * borderColor - {String} \n     * borderWidth - {int} \n     */\n    initialize: function(bounds, borderColor, borderWidth) {\n        this.bounds = bounds;\n        this.div    = OpenLayers.Util.createDiv();\n        this.div.style.overflow = 'hidden';\n        this.events = new OpenLayers.Events(this, this.div);\n        this.setBorder(borderColor, borderWidth);\n    },\n\n    /**\n     * Method: destroy \n     */    \n    destroy: function() {\n\n        this.bounds = null;\n        this.div = null;\n\n        OpenLayers.Marker.prototype.destroy.apply(this, arguments);\n    },\n\n    /** \n     * Method: setBorder\n     * Allow the user to change the box's color and border width\n     * \n     * Parameters:\n     * color - {String} Default is \"red\"\n     * width - {int} Default is 2\n     */\n    setBorder: function (color, width) {\n        if (!color) {\n            color = \"red\";\n        }\n        if (!width) {\n            width = 2;\n        }\n        this.div.style.border = width + \"px solid \" + color;\n    },\n    \n    /** \n    * Method: draw\n    * \n    * Parameters:\n    * px - {<OpenLayers.Pixel>} \n    * sz - {<OpenLayers.Size>} \n    * \n    * Returns: \n    * {DOMElement} A new DOM Image with this marker's icon set at the \n    *         location passed-in\n    */\n    draw: function(px, sz) {\n        OpenLayers.Util.modifyDOMElement(this.div, null, px, sz);\n        return this.div;\n    }, \n\n    /**\n     * Method: onScreen\n     * \n     * Rreturn:\n     * {Boolean} Whether or not the marker is currently visible on screen.\n     */\n    onScreen:function() {\n        var onScreen = false;\n        if (this.map) {\n            var screenBounds = this.map.getExtent();\n            onScreen = screenBounds.containsBounds(this.bounds, true, true);\n        }    \n        return onScreen;\n    },\n    \n    /**\n     * Method: display\n     * Hide or show the icon\n     * \n     * Parameters:\n     * display - {Boolean} \n     */\n    display: function(display) {\n        this.div.style.display = (display) ? \"\" : \"none\";\n    },\n\n    CLASS_NAME: \"OpenLayers.Marker.Box\"\n});\n\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n */\n\n\n/**\n * Class: OpenLayers.Popup\n * A popup is a small div that can opened and closed on the map.\n * Typically opened in response to clicking on a marker.  \n * See <OpenLayers.Marker>.  Popup's don't require their own\n * layer and are added the the map using the <OpenLayers.Map.addPopup>\n * method.\n *\n * Example:\n * (code)\n * popup = new OpenLayers.Popup(\"chicken\", \n *                    new OpenLayers.LonLat(5,40),\n *                    new OpenLayers.Size(200,200),\n *                    \"example popup\",\n *                    true);\n *       \n * map.addPopup(popup);\n * (end)\n */\nOpenLayers.Popup = OpenLayers.Class({\n\n    /** \n     * Property: events  \n     * {<OpenLayers.Events>} custom event manager \n     */\n    events: null,\n    \n    /** Property: id\n     * {String} the unique identifier assigned to this popup.\n     */\n    id: \"\",\n\n    /** \n     * Property: lonlat \n     * {<OpenLayers.LonLat>} the position of this popup on the map\n     */\n    lonlat: null,\n\n    /** \n     * Property: div \n     * {DOMElement} the div that contains this popup.\n     */\n    div: null,\n\n    /** \n     * Property: contentSize \n     * {<OpenLayers.Size>} the width and height of the content.\n     */\n    contentSize: null,    \n\n    /** \n     * Property: size \n     * {<OpenLayers.Size>} the width and height of the popup.\n     */\n    size: null,    \n\n    /** \n     * Property: contentHTML \n     * {String} An HTML string for this popup to display.\n     */\n    contentHTML: null,\n    \n    /** \n     * Property: backgroundColor \n     * {String} the background color used by the popup.\n     */\n    backgroundColor: \"\",\n    \n    /** \n     * Property: opacity \n     * {float} the opacity of this popup (between 0.0 and 1.0)\n     */\n    opacity: \"\",\n\n    /** \n     * Property: border \n     * {String} the border size of the popup.  (eg 2px)\n     */\n    border: \"\",\n    \n    /** \n     * Property: contentDiv \n     * {DOMElement} a reference to the element that holds the content of\n     *              the div.\n     */\n    contentDiv: null,\n    \n    /** \n     * Property: groupDiv \n     * {DOMElement} First and only child of 'div'. The group Div contains the\n     *     'contentDiv' and the 'closeDiv'.\n     */\n    groupDiv: null,\n\n    /** \n     * Property: closeDiv\n     * {DOMElement} the optional closer image\n     */\n    closeDiv: null,\n\n    /** \n     * APIProperty: autoSize\n     * {Boolean} Resize the popup to auto-fit the contents.\n     *     Default is false.\n     */\n    autoSize: false,\n\n    /**\n     * APIProperty: minSize\n     * {<OpenLayers.Size>} Minimum size allowed for the popup's contents.\n     */\n    minSize: null,\n\n    /**\n     * APIProperty: maxSize\n     * {<OpenLayers.Size>} Maximum size allowed for the popup's contents.\n     */\n    maxSize: null,\n\n    /** \n     * Property: displayClass\n     * {String} The CSS class of the popup.\n     */\n    displayClass: \"olPopup\",\n\n    /** \n     * Property: contentDisplayClass\n     * {String} The CSS class of the popup content div.\n     */\n    contentDisplayClass: \"olPopupContent\",\n\n    /** \n     * Property: padding \n     * {int or <OpenLayers.Bounds>} An extra opportunity to specify internal \n     *     padding of the content div inside the popup. This was originally\n     *     confused with the css padding as specified in style.css's \n     *     'olPopupContent' class. We would like to get rid of this altogether,\n     *     except that it does come in handy for the framed and anchoredbubble\n     *     popups, who need to maintain yet another barrier between their \n     *     content and the outer border of the popup itself. \n     * \n     *     Note that in order to not break API, we must continue to support \n     *     this property being set as an integer. Really, though, we'd like to \n     *     have this specified as a Bounds object so that user can specify\n     *     distinct left, top, right, bottom paddings. With the 3.0 release\n     *     we can make this only a bounds.\n     */\n    padding: 0,\n\n    /** \n     * Property: disableFirefoxOverflowHack\n     * {Boolean} The hack for overflow in Firefox causes all elements \n     *     to be re-drawn, which causes Flash elements to be \n     *     re-initialized, which is troublesome.\n     *     With this property the hack can be disabled.\n     */\n    disableFirefoxOverflowHack: false,\n\n    /**\n     * Method: fixPadding\n     * To be removed in 3.0, this function merely helps us to deal with the \n     *     case where the user may have set an integer value for padding, \n     *     instead of an <OpenLayers.Bounds> object.\n     */\n    fixPadding: function() {\n        if (typeof this.padding == \"number\") {\n            this.padding = new OpenLayers.Bounds(\n                this.padding, this.padding, this.padding, this.padding\n            );\n        }\n    },\n\n    /**\n     * APIProperty: panMapIfOutOfView\n     * {Boolean} When drawn, pan map such that the entire popup is visible in\n     *     the current viewport (if necessary).\n     *     Default is false.\n     */\n    panMapIfOutOfView: false,\n    \n    /**\n     * APIProperty: keepInMap \n     * {Boolean} If panMapIfOutOfView is false, and this property is true, \n     *     contrain the popup such that it always fits in the available map\n     *     space. By default, this is not set on the base class. If you are\n     *     creating popups that are near map edges and not allowing pannning,\n     *     and especially if you have a popup which has a\n     *     fixedRelativePosition, setting this to false may be a smart thing to\n     *     do. Subclasses may want to override this setting.\n     *   \n     *     Default is false.\n     */\n    keepInMap: false,\n\n    /**\n     * APIProperty: closeOnMove\n     * {Boolean} When map pans, close the popup.\n     *     Default is false.\n     */\n    closeOnMove: false,\n    \n    /** \n     * Property: map \n     * {<OpenLayers.Map>} this gets set in Map.js when the popup is added to the map\n     */\n    map: null,\n\n    /** \n    * Constructor: OpenLayers.Popup\n    * Create a popup.\n    * \n    * Parameters: \n    * id - {String} a unqiue identifier for this popup.  If null is passed\n    *               an identifier will be automatically generated. \n    * lonlat - {<OpenLayers.LonLat>}  The position on the map the popup will\n    *                                 be shown.\n    * contentSize - {<OpenLayers.Size>} The size of the content.\n    * contentHTML - {String}          An HTML string to display inside the   \n    *                                 popup.\n    * closeBox - {Boolean}            Whether to display a close box inside\n    *                                 the popup.\n    * closeBoxCallback - {Function}   Function to be called on closeBox click.\n    */\n    initialize:function(id, lonlat, contentSize, contentHTML, closeBox, closeBoxCallback) {\n        if (id == null) {\n            id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + \"_\");\n        }\n\n        this.id = id;\n        this.lonlat = lonlat;\n\n        this.contentSize = (contentSize != null) ? contentSize \n                                  : new OpenLayers.Size(\n                                                   OpenLayers.Popup.WIDTH,\n                                                   OpenLayers.Popup.HEIGHT);\n        if (contentHTML != null) { \n             this.contentHTML = contentHTML;\n        }\n        this.backgroundColor = OpenLayers.Popup.COLOR;\n        this.opacity = OpenLayers.Popup.OPACITY;\n        this.border = OpenLayers.Popup.BORDER;\n\n        this.div = OpenLayers.Util.createDiv(this.id, null, null, \n                                             null, null, null, \"hidden\");\n        this.div.className = this.displayClass;\n        \n        var groupDivId = this.id + \"_GroupDiv\";\n        this.groupDiv = OpenLayers.Util.createDiv(groupDivId, null, null, \n                                                    null, \"relative\", null,\n                                                    \"hidden\");\n\n        var id = this.div.id + \"_contentDiv\";\n        this.contentDiv = OpenLayers.Util.createDiv(id, null, this.contentSize.clone(), \n                                                    null, \"relative\");\n        this.contentDiv.className = this.contentDisplayClass;\n        this.groupDiv.appendChild(this.contentDiv);\n        this.div.appendChild(this.groupDiv);\n\n        if (closeBox) {\n            this.addCloseBox(closeBoxCallback);\n        } \n\n        this.registerEvents();\n    },\n\n    /** \n     * Method: destroy\n     * nullify references to prevent circular references and memory leaks\n     */\n    destroy: function() {\n\n        this.id = null;\n        this.lonlat = null;\n        this.size = null;\n        this.contentHTML = null;\n        \n        this.backgroundColor = null;\n        this.opacity = null;\n        this.border = null;\n        \n        if (this.closeOnMove && this.map) {\n            this.map.events.unregister(\"movestart\", this, this.hide);\n        }\n\n        this.events.destroy();\n        this.events = null;\n        \n        if (this.closeDiv) {\n            OpenLayers.Event.stopObservingElement(this.closeDiv); \n            this.groupDiv.removeChild(this.closeDiv);\n        }\n        this.closeDiv = null;\n        \n        this.div.removeChild(this.groupDiv);\n        this.groupDiv = null;\n\n        if (this.map != null) {\n            this.map.removePopup(this);\n        }\n        this.map = null;\n        this.div = null;\n        \n        this.autoSize = null;\n        this.minSize = null;\n        this.maxSize = null;\n        this.padding = null;\n        this.panMapIfOutOfView = null;\n    },\n\n    /** \n    * Method: draw\n    * Constructs the elements that make up the popup.\n    *\n    * Parameters:\n    * px - {<OpenLayers.Pixel>} the position the popup in pixels.\n    * \n    * Returns:\n    * {DOMElement} Reference to a div that contains the drawn popup\n    */\n    draw: function(px) {\n        if (px == null) {\n            if ((this.lonlat != null) && (this.map != null)) {\n                px = this.map.getLayerPxFromLonLat(this.lonlat);\n            }\n        }\n\n        // this assumes that this.map already exists, which is okay because \n        // this.draw is only called once the popup has been added to the map.\n        if (this.closeOnMove) {\n            this.map.events.register(\"movestart\", this, this.hide);\n        }\n        \n        //listen to movestart, moveend to disable overflow (FF bug)\n        if (!this.disableFirefoxOverflowHack && OpenLayers.BROWSER_NAME == 'firefox') {\n            this.map.events.register(\"movestart\", this, function() {\n                var style = document.defaultView.getComputedStyle(\n                    this.contentDiv, null\n                );\n                var currentOverflow = style.getPropertyValue(\"overflow\");\n                if (currentOverflow != \"hidden\") {\n                    this.contentDiv._oldOverflow = currentOverflow;\n                    this.contentDiv.style.overflow = \"hidden\";\n                }\n            });\n            this.map.events.register(\"moveend\", this, function() {\n                var oldOverflow = this.contentDiv._oldOverflow;\n                if (oldOverflow) {\n                    this.contentDiv.style.overflow = oldOverflow;\n                    this.contentDiv._oldOverflow = null;\n                }\n            });\n        }\n\n        this.moveTo(px);\n        if (!this.autoSize && !this.size) {\n            this.setSize(this.contentSize);\n        }\n        this.setBackgroundColor();\n        this.setOpacity();\n        this.setBorder();\n        this.setContentHTML();\n        \n        if (this.panMapIfOutOfView) {\n            this.panIntoView();\n        }    \n\n        return this.div;\n    },\n\n    /** \n     * Method: updatePosition\n     * if the popup has a lonlat and its map members set, \n     * then have it move itself to its proper position\n     */\n    updatePosition: function() {\n        if ((this.lonlat) && (this.map)) {\n            var px = this.map.getLayerPxFromLonLat(this.lonlat);\n            if (px) {\n                this.moveTo(px);           \n            }    \n        }\n    },\n\n    /**\n     * Method: moveTo\n     * \n     * Parameters:\n     * px - {<OpenLayers.Pixel>} the top and left position of the popup div. \n     */\n    moveTo: function(px) {\n        if ((px != null) && (this.div != null)) {\n            this.div.style.left = px.x + \"px\";\n            this.div.style.top = px.y + \"px\";\n        }\n    },\n\n    /**\n     * Method: visible\n     *\n     * Returns:      \n     * {Boolean} Boolean indicating whether or not the popup is visible\n     */\n    visible: function() {\n        return OpenLayers.Element.visible(this.div);\n    },\n\n    /**\n     * Method: toggle\n     * Toggles visibility of the popup.\n     */\n    toggle: function() {\n        if (this.visible()) {\n            this.hide();\n        } else {\n            this.show();\n        }\n    },\n\n    /**\n     * Method: show\n     * Makes the popup visible.\n     */\n    show: function() {\n        this.div.style.display = '';\n\n        if (this.panMapIfOutOfView) {\n            this.panIntoView();\n        }    \n    },\n\n    /**\n     * Method: hide\n     * Makes the popup invisible.\n     */\n    hide: function() {\n        this.div.style.display = 'none';\n    },\n\n    /**\n     * Method: setSize\n     * Used to adjust the size of the popup. \n     *\n     * Parameters:\n     * contentSize - {<OpenLayers.Size>} the new size for the popup's \n     *     contents div (in pixels).\n     */\n    setSize:function(contentSize) { \n        this.size = contentSize.clone(); \n        \n        // if our contentDiv has a css 'padding' set on it by a stylesheet, we \n        //  must add that to the desired \"size\". \n        var contentDivPadding = this.getContentDivPadding();\n        var wPadding = contentDivPadding.left + contentDivPadding.right;\n        var hPadding = contentDivPadding.top + contentDivPadding.bottom;\n\n        // take into account the popup's 'padding' property\n        this.fixPadding();\n        wPadding += this.padding.left + this.padding.right;\n        hPadding += this.padding.top + this.padding.bottom;\n\n        // make extra space for the close div\n        if (this.closeDiv) {\n            var closeDivWidth = parseInt(this.closeDiv.style.width);\n            wPadding += closeDivWidth + contentDivPadding.right;\n        }\n\n        //increase size of the main popup div to take into account the \n        // users's desired padding and close div.        \n        this.size.w += wPadding;\n        this.size.h += hPadding;\n\n        //now if our browser is IE, we need to actually make the contents \n        // div itself bigger to take its own padding into effect. this makes \n        // me want to shoot someone, but so it goes.\n        if (OpenLayers.BROWSER_NAME == \"msie\") {\n            this.contentSize.w += \n                contentDivPadding.left + contentDivPadding.right;\n            this.contentSize.h += \n                contentDivPadding.bottom + contentDivPadding.top;\n        }\n\n        if (this.div != null) {\n            this.div.style.width = this.size.w + \"px\";\n            this.div.style.height = this.size.h + \"px\";\n        }\n        if (this.contentDiv != null){\n            this.contentDiv.style.width = contentSize.w + \"px\";\n            this.contentDiv.style.height = contentSize.h + \"px\";\n        }\n    },  \n\n    /**\n     * APIMethod: updateSize\n     * Auto size the popup so that it precisely fits its contents (as \n     *     determined by this.contentDiv.innerHTML). Popup size will, of\n     *     course, be limited by the available space on the current map\n     */\n    updateSize: function() {\n        \n        // determine actual render dimensions of the contents by putting its\n        // contents into a fake contentDiv (for the CSS) and then measuring it\n        var preparedHTML = \"<div class='\" + this.contentDisplayClass+ \"'>\" + \n            this.contentDiv.innerHTML + \n            \"</div>\";\n \n        var containerElement = (this.map) ? this.map.div : document.body;\n        var realSize = OpenLayers.Util.getRenderedDimensions(\n            preparedHTML, null, {\n                displayClass: this.displayClass,\n                containerElement: containerElement\n            }\n        );\n\n        // is the \"real\" size of the div is safe to display in our map?\n        var safeSize = this.getSafeContentSize(realSize);\n\n        var newSize = null;\n        if (safeSize.equals(realSize)) {\n            //real size of content is small enough to fit on the map, \n            // so we use real size.\n            newSize = realSize;\n\n        } else {\n\n            // make a new 'size' object with the clipped dimensions \n            // set or null if not clipped.\n            var fixedSize = {\n                w: (safeSize.w < realSize.w) ? safeSize.w : null,\n                h: (safeSize.h < realSize.h) ? safeSize.h : null\n            };\n        \n            if (fixedSize.w && fixedSize.h) {\n                //content is too big in both directions, so we will use \n                // max popup size (safeSize), knowing well that it will \n                // overflow both ways.                \n                newSize = safeSize;\n            } else {\n                //content is clipped in only one direction, so we need to \n                // run getRenderedDimensions() again with a fixed dimension\n                var clippedSize = OpenLayers.Util.getRenderedDimensions(\n                    preparedHTML, fixedSize, {\n                        displayClass: this.contentDisplayClass,\n                        containerElement: containerElement\n                    }\n                );\n                \n                //if the clipped size is still the same as the safeSize, \n                // that means that our content must be fixed in the \n                // offending direction. If overflow is 'auto', this means \n                // we are going to have a scrollbar for sure, so we must \n                // adjust for that.\n                //\n                var currentOverflow = OpenLayers.Element.getStyle(\n                    this.contentDiv, \"overflow\"\n                );\n                if ( (currentOverflow != \"hidden\") && \n                     (clippedSize.equals(safeSize)) ) {\n                    var scrollBar = OpenLayers.Util.getScrollbarWidth();\n                    if (fixedSize.w) {\n                        clippedSize.h += scrollBar;\n                    } else {\n                        clippedSize.w += scrollBar;\n                    }\n                }\n                \n                newSize = this.getSafeContentSize(clippedSize);\n            }\n        }                        \n        this.setSize(newSize);     \n    },    \n\n    /**\n     * Method: setBackgroundColor\n     * Sets the background color of the popup.\n     *\n     * Parameters:\n     * color - {String} the background color.  eg \"#FFBBBB\"\n     */\n    setBackgroundColor:function(color) { \n        if (color != undefined) {\n            this.backgroundColor = color; \n        }\n        \n        if (this.div != null) {\n            this.div.style.backgroundColor = this.backgroundColor;\n        }\n    },  \n    \n    /**\n     * Method: setOpacity\n     * Sets the opacity of the popup.\n     * \n     * Parameters:\n     * opacity - {float} A value between 0.0 (transparent) and 1.0 (solid).   \n     */\n    setOpacity:function(opacity) { \n        if (opacity != undefined) {\n            this.opacity = opacity; \n        }\n        \n        if (this.div != null) {\n            // for Mozilla and Safari\n            this.div.style.opacity = this.opacity;\n\n            // for IE\n            this.div.style.filter = 'alpha(opacity=' + this.opacity*100 + ')';\n        }\n    },  \n    \n    /**\n     * Method: setBorder\n     * Sets the border style of the popup.\n     *\n     * Parameters:\n     * border - {String} The border style value. eg 2px \n     */\n    setBorder:function(border) { \n        if (border != undefined) {\n            this.border = border;\n        }\n        \n        if (this.div != null) {\n            this.div.style.border = this.border;\n        }\n    },      \n    \n    /**\n     * Method: setContentHTML\n     * Allows the user to set the HTML content of the popup.\n     *\n     * Parameters:\n     * contentHTML - {String} HTML for the div.\n     */\n    setContentHTML:function(contentHTML) {\n\n        if (contentHTML != null) {\n            this.contentHTML = contentHTML;\n        }\n       \n        if ((this.contentDiv != null) && \n            (this.contentHTML != null) &&\n            (this.contentHTML != this.contentDiv.innerHTML)) {\n       \n            this.contentDiv.innerHTML = this.contentHTML;\n       \n            if (this.autoSize) {\n                \n                //if popup has images, listen for when they finish\n                // loading and resize accordingly\n                this.registerImageListeners();\n\n                //auto size the popup to its current contents\n                this.updateSize();\n            }\n        }    \n\n    },\n    \n    /**\n     * Method: registerImageListeners\n     * Called when an image contained by the popup loaded. this function\n     *     updates the popup size, then unregisters the image load listener.\n     */   \n    registerImageListeners: function() { \n\n        // As the images load, this function will call updateSize() to \n        // resize the popup to fit the content div (which presumably is now\n        // bigger than when the image was not loaded).\n        // \n        // If the 'panMapIfOutOfView' property is set, we will pan the newly\n        // resized popup back into view.\n        // \n        // Note that this function, when called, will have 'popup' and \n        // 'img' properties in the context.\n        //\n        var onImgLoad = function() {\n            if (this.popup.id === null) { // this.popup has been destroyed!\n                return;\n            }\n            this.popup.updateSize();\n     \n            if ( this.popup.visible() && this.popup.panMapIfOutOfView ) {\n                this.popup.panIntoView();\n            }\n\n            OpenLayers.Event.stopObserving(\n                this.img, \"load\", this.img._onImgLoad\n            );\n    \n        };\n\n        //cycle through the images and if their size is 0x0, that means that \n        // they haven't been loaded yet, so we attach the listener, which \n        // will fire when the images finish loading and will resize the \n        // popup accordingly to its new size.\n        var images = this.contentDiv.getElementsByTagName(\"img\");\n        for (var i = 0, len = images.length; i < len; i++) {\n            var img = images[i];\n            if (img.width == 0 || img.height == 0) {\n\n                var context = {\n                    'popup': this,\n                    'img': img\n                };\n\n                //expando this function to the image itself before registering\n                // it. This way we can easily and properly unregister it.\n                img._onImgLoad = OpenLayers.Function.bind(onImgLoad, context);\n\n                OpenLayers.Event.observe(img, 'load', img._onImgLoad);\n            }    \n        } \n    },\n\n    /**\n     * APIMethod: getSafeContentSize\n     * \n     * Parameters:\n     * size - {<OpenLayers.Size>} Desired size to make the popup.\n     * \n     * Returns:\n     * {<OpenLayers.Size>} A size to make the popup which is neither smaller\n     *     than the specified minimum size, nor bigger than the maximum \n     *     size (which is calculated relative to the size of the viewport).\n     */\n    getSafeContentSize: function(size) {\n\n        var safeContentSize = size.clone();\n\n        // if our contentDiv has a css 'padding' set on it by a stylesheet, we \n        //  must add that to the desired \"size\". \n        var contentDivPadding = this.getContentDivPadding();\n        var wPadding = contentDivPadding.left + contentDivPadding.right;\n        var hPadding = contentDivPadding.top + contentDivPadding.bottom;\n\n        // take into account the popup's 'padding' property\n        this.fixPadding();\n        wPadding += this.padding.left + this.padding.right;\n        hPadding += this.padding.top + this.padding.bottom;\n\n        if (this.closeDiv) {\n            var closeDivWidth = parseInt(this.closeDiv.style.width);\n            wPadding += closeDivWidth + contentDivPadding.right;\n        }\n\n        // prevent the popup from being smaller than a specified minimal size\n        if (this.minSize) {\n            safeContentSize.w = Math.max(safeContentSize.w, \n                (this.minSize.w - wPadding));\n            safeContentSize.h = Math.max(safeContentSize.h, \n                (this.minSize.h - hPadding));\n        }\n\n        // prevent the popup from being bigger than a specified maximum size\n        if (this.maxSize) {\n            safeContentSize.w = Math.min(safeContentSize.w, \n                (this.maxSize.w - wPadding));\n            safeContentSize.h = Math.min(safeContentSize.h, \n                (this.maxSize.h - hPadding));\n        }\n        \n        //make sure the desired size to set doesn't result in a popup that \n        // is bigger than the map's viewport.\n        //\n        if (this.map && this.map.size) {\n            \n            var extraX = 0, extraY = 0;\n            if (this.keepInMap && !this.panMapIfOutOfView) {\n                var px = this.map.getPixelFromLonLat(this.lonlat);\n                switch (this.relativePosition) {\n                    case \"tr\":\n                        extraX = px.x;\n                        extraY = this.map.size.h - px.y;\n                        break;\n                    case \"tl\":\n                        extraX = this.map.size.w - px.x;\n                        extraY = this.map.size.h - px.y;\n                        break;\n                    case \"bl\":\n                        extraX = this.map.size.w - px.x;\n                        extraY = px.y;\n                        break;\n                    case \"br\":\n                        extraX = px.x;\n                        extraY = px.y;\n                        break;\n                    default:    \n                        extraX = px.x;\n                        extraY = this.map.size.h - px.y;\n                        break;\n                }\n            }    \n          \n            var maxY = this.map.size.h - \n                this.map.paddingForPopups.top - \n                this.map.paddingForPopups.bottom - \n                hPadding - extraY;\n            \n            var maxX = this.map.size.w - \n                this.map.paddingForPopups.left - \n                this.map.paddingForPopups.right - \n                wPadding - extraX;\n            \n            safeContentSize.w = Math.min(safeContentSize.w, maxX);\n            safeContentSize.h = Math.min(safeContentSize.h, maxY);\n        }\n        \n        return safeContentSize;\n    },\n    \n    /**\n     * Method: getContentDivPadding\n     * Glorious, oh glorious hack in order to determine the css 'padding' of \n     *     the contentDiv. IE/Opera return null here unless we actually add the \n     *     popup's main 'div' element (which contains contentDiv) to the DOM. \n     *     So we make it invisible and then add it to the document temporarily. \n     *\n     *     Once we've taken the padding readings we need, we then remove it \n     *     from the DOM (it will actually get added to the DOM in \n     *     Map.js's addPopup)\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>}\n     */\n    getContentDivPadding: function() {\n\n        //use cached value if we have it\n        var contentDivPadding = this._contentDivPadding;\n        if (!contentDivPadding) {\n\n            if (this.div.parentNode == null) {\n                //make the div invisible and add it to the page        \n                this.div.style.display = \"none\";\n                document.body.appendChild(this.div);\n            }\n                    \n            //read the padding settings from css, put them in an OL.Bounds        \n            contentDivPadding = new OpenLayers.Bounds(\n                OpenLayers.Element.getStyle(this.contentDiv, \"padding-left\"),\n                OpenLayers.Element.getStyle(this.contentDiv, \"padding-bottom\"),\n                OpenLayers.Element.getStyle(this.contentDiv, \"padding-right\"),\n                OpenLayers.Element.getStyle(this.contentDiv, \"padding-top\")\n            );\n    \n            //cache the value\n            this._contentDivPadding = contentDivPadding;\n\n            if (this.div.parentNode == document.body) {\n                //remove the div from the page and make it visible again\n                document.body.removeChild(this.div);\n                this.div.style.display = \"\";\n            }\n        }\n        return contentDivPadding;\n    },\n\n    /**\n     * Method: addCloseBox\n     * \n     * Parameters:\n     * callback - {Function} The callback to be called when the close button\n     *     is clicked.\n     */\n    addCloseBox: function(callback) {\n\n        this.closeDiv = OpenLayers.Util.createDiv(\n            this.id + \"_close\", null, {w: 17, h: 17}\n        );\n        this.closeDiv.className = \"olPopupCloseBox\"; \n        \n        // use the content div's css padding to determine if we should\n        //  padd the close div\n        var contentDivPadding = this.getContentDivPadding();\n         \n        this.closeDiv.style.right = contentDivPadding.right + \"px\";\n        this.closeDiv.style.top = contentDivPadding.top + \"px\";\n        this.groupDiv.appendChild(this.closeDiv);\n\n        var closePopup = callback || function(e) {\n            this.hide();\n            OpenLayers.Event.stop(e);\n        };\n        OpenLayers.Event.observe(this.closeDiv, \"touchend\", \n                OpenLayers.Function.bindAsEventListener(closePopup, this));\n        OpenLayers.Event.observe(this.closeDiv, \"click\", \n                OpenLayers.Function.bindAsEventListener(closePopup, this));\n    },\n\n    /**\n     * Method: panIntoView\n     * Pans the map such that the popup is totaly viewable (if necessary)\n     */\n    panIntoView: function() {\n        \n        var mapSize = this.map.getSize();\n    \n        //start with the top left corner of the popup, in px, \n        // relative to the viewport\n        var origTL = this.map.getViewPortPxFromLayerPx( new OpenLayers.Pixel(\n            parseInt(this.div.style.left),\n            parseInt(this.div.style.top)\n        ));\n        var newTL = origTL.clone();\n    \n        //new left (compare to margins, using this.size to calculate right)\n        if (origTL.x < this.map.paddingForPopups.left) {\n            newTL.x = this.map.paddingForPopups.left;\n        } else \n        if ( (origTL.x + this.size.w) > (mapSize.w - this.map.paddingForPopups.right)) {\n            newTL.x = mapSize.w - this.map.paddingForPopups.right - this.size.w;\n        }\n        \n        //new top (compare to margins, using this.size to calculate bottom)\n        if (origTL.y < this.map.paddingForPopups.top) {\n            newTL.y = this.map.paddingForPopups.top;\n        } else \n        if ( (origTL.y + this.size.h) > (mapSize.h - this.map.paddingForPopups.bottom)) {\n            newTL.y = mapSize.h - this.map.paddingForPopups.bottom - this.size.h;\n        }\n        \n        var dx = origTL.x - newTL.x;\n        var dy = origTL.y - newTL.y;\n        \n        this.map.pan(dx, dy);\n    },\n\n    /** \n     * Method: registerEvents\n     * Registers events on the popup.\n     *\n     * Do this in a separate function so that subclasses can \n     *   choose to override it if they wish to deal differently\n     *   with mouse events\n     * \n     *   Note in the following handler functions that some special\n     *    care is needed to deal correctly with mousing and popups. \n     *   \n     *   Because the user might select the zoom-rectangle option and\n     *    then drag it over a popup, we need a safe way to allow the\n     *    mousemove and mouseup events to pass through the popup when\n     *    they are initiated from outside. The same procedure is needed for\n     *    touchmove and touchend events.\n     * \n     *   Otherwise, we want to essentially kill the event propagation\n     *    for all other events, though we have to do so carefully, \n     *    without disabling basic html functionality, like clicking on \n     *    hyperlinks or drag-selecting text.\n     */\n     registerEvents:function() {\n        this.events = new OpenLayers.Events(this, this.div, null, true);\n\n        function onTouchstart(evt) {\n            OpenLayers.Event.stop(evt, true);\n        }\n        this.events.on({\n            \"mousedown\": this.onmousedown,\n            \"mousemove\": this.onmousemove,\n            \"mouseup\": this.onmouseup,\n            \"click\": this.onclick,\n            \"mouseout\": this.onmouseout,\n            \"dblclick\": this.ondblclick,\n            \"touchstart\": onTouchstart,\n            scope: this\n        });\n        \n     },\n\n    /** \n     * Method: onmousedown \n     * When mouse goes down within the popup, make a note of\n     *   it locally, and then do not propagate the mousedown \n     *   (but do so safely so that user can select text inside)\n     * \n     * Parameters:\n     * evt - {Event} \n     */\n    onmousedown: function (evt) {\n        this.mousedown = true;\n        OpenLayers.Event.stop(evt, true);\n    },\n\n    /** \n     * Method: onmousemove\n     * If the drag was started within the popup, then \n     *   do not propagate the mousemove (but do so safely\n     *   so that user can select text inside)\n     * \n     * Parameters:\n     * evt - {Event} \n     */\n    onmousemove: function (evt) {\n        if (this.mousedown) {\n            OpenLayers.Event.stop(evt, true);\n        }\n    },\n\n    /** \n     * Method: onmouseup\n     * When mouse comes up within the popup, after going down \n     *   in it, reset the flag, and then (once again) do not \n     *   propagate the event, but do so safely so that user can \n     *   select text inside\n     * \n     * Parameters:\n     * evt - {Event} \n     */\n    onmouseup: function (evt) {\n        if (this.mousedown) {\n            this.mousedown = false;\n            OpenLayers.Event.stop(evt, true);\n        }\n    },\n\n    /**\n     * Method: onclick\n     * Ignore clicks, but allowing default browser handling\n     * \n     * Parameters:\n     * evt - {Event} \n     */\n    onclick: function (evt) {\n        OpenLayers.Event.stop(evt, true);\n    },\n\n    /** \n     * Method: onmouseout\n     * When mouse goes out of the popup set the flag to false so that\n     *   if they let go and then drag back in, we won't be confused.\n     * \n     * Parameters:\n     * evt - {Event} \n     */\n    onmouseout: function (evt) {\n        this.mousedown = false;\n    },\n    \n    /** \n     * Method: ondblclick\n     * Ignore double-clicks, but allowing default browser handling\n     * \n     * Parameters:\n     * evt - {Event} \n     */\n    ondblclick: function (evt) {\n        OpenLayers.Event.stop(evt, true);\n    },\n\n    CLASS_NAME: \"OpenLayers.Popup\"\n});\n\nOpenLayers.Popup.WIDTH = 200;\nOpenLayers.Popup.HEIGHT = 200;\nOpenLayers.Popup.COLOR = \"white\";\nOpenLayers.Popup.OPACITY = 1;\nOpenLayers.Popup.BORDER = \"0px\";\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Util.js\n */\n\n/**\n * Class: OpenLayers.Tile \n * This is a class designed to designate a single tile, however\n *     it is explicitly designed to do relatively little. Tiles store \n *     information about themselves -- such as the URL that they are related\n *     to, and their size - but do not add themselves to the layer div \n *     automatically, for example. Create a new tile with the \n *     <OpenLayers.Tile> constructor, or a subclass. \n * \n * TBD 3.0 - remove reference to url in above paragraph\n * \n */\nOpenLayers.Tile = OpenLayers.Class({\n    \n    /**\n     * APIProperty: events\n     * {<OpenLayers.Events>} An events object that handles all \n     *     events on the tile.\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * tile.events.register(type, obj, listener);\n     * (end)\n     *\n     * Supported event types:\n     * beforedraw - Triggered before the tile is drawn. Used to defer\n     *     drawing to an animation queue. To defer drawing, listeners need\n     *     to return false, which will abort drawing. The queue handler needs\n     *     to call <draw>(true) to actually draw the tile.\n     * loadstart - Triggered when tile loading starts.\n     * loadend - Triggered when tile loading ends.\n     * loaderror - Triggered before the loadend event (i.e. when the tile is\n     *     still hidden) if the tile could not be loaded.\n     * reload - Triggered when an already loading tile is reloaded.\n     * unload - Triggered before a tile is unloaded.\n     */\n    events: null,\n\n    /**\n     * APIProperty: eventListeners\n     * {Object} If set as an option at construction, the eventListeners\n     *     object will be registered with <OpenLayers.Events.on>.  Object\n     *     structure must be a listeners object as shown in the example for\n     *     the events.on method.\n     *\n     * This options can be set in the ``tileOptions`` option from\n     * <OpenLayers.Layer.Grid>. For example, to be notified of the\n     * ``loadend`` event of each tiles:\n     * (code)\n     * new OpenLayers.Layer.OSM('osm', 'http://tile.openstreetmap.org/${z}/${x}/${y}.png', {\n     *     tileOptions: {\n     *         eventListeners: {\n     *             'loadend': function(evt) {\n     *                 // do something on loadend\n     *             }\n     *         }\n     *     }\n     * });\n     * (end)\n     */\n    eventListeners: null,\n\n    /**\n     * Property: id \n     * {String} null\n     */\n    id: null,\n    \n    /** \n     * Property: layer \n     * {<OpenLayers.Layer>} layer the tile is attached to \n     */\n    layer: null,\n    \n    /**\n     * Property: url\n     * {String} url of the request.\n     *\n     * TBD 3.0 \n     * Deprecated. The base tile class does not need an url. This should be \n     * handled in subclasses. Does not belong here.\n     */\n    url: null,\n\n    /** \n     * APIProperty: bounds \n     * {<OpenLayers.Bounds>} null\n     */\n    bounds: null,\n    \n    /** \n     * Property: size \n     * {<OpenLayers.Size>} null\n     */\n    size: null,\n    \n    /** \n     * Property: position \n     * {<OpenLayers.Pixel>} Top Left pixel of the tile\n     */    \n    position: null,\n    \n    /**\n     * Property: isLoading\n     * {Boolean} Is the tile loading?\n     */\n    isLoading: false,\n    \n    /** TBD 3.0 -- remove 'url' from the list of parameters to the constructor.\n     *             there is no need for the base tile class to have a url.\n     */\n\n    /** \n     * Constructor: OpenLayers.Tile\n     * Constructor for a new <OpenLayers.Tile> instance.\n     * \n     * Parameters:\n     * layer - {<OpenLayers.Layer>} layer that the tile will go in.\n     * position - {<OpenLayers.Pixel>}\n     * bounds - {<OpenLayers.Bounds>}\n     * url - {<String>}\n     * size - {<OpenLayers.Size>}\n     * options - {Object}\n     */   \n    initialize: function(layer, position, bounds, url, size, options) {\n        this.layer = layer;\n        this.position = position.clone();\n        this.setBounds(bounds);\n        this.url = url;\n        if (size) {\n            this.size = size.clone();\n        }\n\n        //give the tile a unique id based on its BBOX.\n        this.id = OpenLayers.Util.createUniqueID(\"Tile_\");\n\n        OpenLayers.Util.extend(this, options);\n\n        this.events = new OpenLayers.Events(this);\n        if (this.eventListeners instanceof Object) {\n            this.events.on(this.eventListeners);\n        }\n    },\n\n    /**\n     * Method: unload\n     * Call immediately before destroying if you are listening to tile\n     * events, so that counters are properly handled if tile is still\n     * loading at destroy-time. Will only fire an event if the tile is\n     * still loading.\n     */\n    unload: function() {\n       if (this.isLoading) { \n           this.isLoading = false; \n           this.events.triggerEvent(\"unload\"); \n       }\n    },\n    \n    /** \n     * APIMethod: destroy\n     * Nullify references to prevent circular references and memory leaks.\n     */\n    destroy:function() {\n        this.layer  = null;\n        this.bounds = null;\n        this.size = null;\n        this.position = null;\n        \n        if (this.eventListeners) {\n            this.events.un(this.eventListeners);\n        }\n        this.events.destroy();\n        this.eventListeners = null;\n        this.events = null;\n    },\n    \n    /**\n     * Method: draw\n     * Clear whatever is currently in the tile, then return whether or not \n     *     it should actually be re-drawn. This is an example implementation\n     *     that can be overridden by subclasses. The minimum thing to do here\n     *     is to call <clear> and return the result from <shouldDraw>.\n     *\n     * Parameters:\n     * force - {Boolean} If true, the tile will not be cleared and no beforedraw\n     *     event will be fired. This is used for drawing tiles asynchronously\n     *     after drawing has been cancelled by returning false from a beforedraw\n     *     listener.\n     * \n     * Returns:\n     * {Boolean} Whether or not the tile should actually be drawn. Returns null\n     *     if a beforedraw listener returned false.\n     */\n    draw: function(force) {\n        if (!force) {\n            //clear tile's contents and mark as not drawn\n            this.clear();\n        }\n        var draw = this.shouldDraw();\n        if (draw && !force && this.events.triggerEvent(\"beforedraw\") === false) {\n            draw = null;\n        }\n        return draw;\n    },\n    \n    /**\n     * Method: shouldDraw\n     * Return whether or not the tile should actually be (re-)drawn. The only\n     * case where we *wouldn't* want to draw the tile is if the tile is outside\n     * its layer's maxExtent\n     * \n     * Returns:\n     * {Boolean} Whether or not the tile should actually be drawn.\n     */\n    shouldDraw: function() {        \n        var withinMaxExtent = false,\n            maxExtent = this.layer.maxExtent;\n        if (maxExtent) {\n            var map = this.layer.map;\n            var worldBounds = map.baseLayer.wrapDateLine && map.getMaxExtent();\n            if (this.bounds.intersectsBounds(maxExtent, {inclusive: false, worldBounds: worldBounds})) {\n                withinMaxExtent = true;\n            }\n        }\n        \n        return withinMaxExtent || this.layer.displayOutsideMaxExtent;\n    },\n    \n    /**\n     * Method: setBounds\n     * Sets the bounds on this instance\n     *\n     * Parameters:\n     * bounds {<OpenLayers.Bounds>}\n     */\n    setBounds: function(bounds) {\n        bounds = bounds.clone();\n        if (this.layer.map.baseLayer.wrapDateLine) {\n            var worldExtent = this.layer.map.getMaxExtent(),\n                tolerance = this.layer.map.getResolution();\n            bounds = bounds.wrapDateLine(worldExtent, {\n                leftTolerance: tolerance,\n                rightTolerance: tolerance\n            });\n        }\n        this.bounds = bounds;\n    },\n    \n    /** \n     * Method: moveTo\n     * Reposition the tile.\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     * position - {<OpenLayers.Pixel>}\n     * redraw - {Boolean} Call draw method on tile after moving.\n     *     Default is true\n     */\n    moveTo: function (bounds, position, redraw) {\n        if (redraw == null) {\n            redraw = true;\n        }\n\n        this.setBounds(bounds);\n        this.position = position.clone();\n        if (redraw) {\n            this.draw();\n        }\n    },\n\n    /** \n     * Method: clear\n     * Clear the tile of any bounds/position-related data so that it can \n     *     be reused in a new location.\n     */\n    clear: function(draw) {\n        // to be extended by subclasses\n    },\n    \n    CLASS_NAME: \"OpenLayers.Tile\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Tile.js\n * @requires OpenLayers/Animation.js\n * @requires OpenLayers/Util.js\n */\n\n/**\n * Class: OpenLayers.Tile.Image\n * Instances of OpenLayers.Tile.Image are used to manage the image tiles\n * used by various layers.  Create a new image tile with the\n * <OpenLayers.Tile.Image> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Tile>\n */\nOpenLayers.Tile.Image = OpenLayers.Class(OpenLayers.Tile, {\n\n    /**\n     * APIProperty: events\n     * {<OpenLayers.Events>} An events object that handles all \n     *     events on the tile.\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * tile.events.register(type, obj, listener);\n     * (end)\n     *\n     * Supported event types (in addition to the <OpenLayers.Tile> events):\n     * beforeload - Triggered before an image is prepared for loading, when the\n     *     url for the image is known already. Listeners may call <setImage> on\n     *     the tile instance. If they do so, that image will be used and no new\n     *     one will be created.\n     */\n\n    /** \n     * APIProperty: url\n     * {String} The URL of the image being requested. No default. Filled in by\n     * layer.getURL() function. May be modified by loadstart listeners.\n     */\n    url: null,\n    \n    /** \n     * Property: imgDiv\n     * {HTMLImageElement} The image for this tile.\n     */\n    imgDiv: null,\n    \n    /**\n     * Property: frame\n     * {DOMElement} The image element is appended to the frame.  Any gutter on\n     * the image will be hidden behind the frame. If no gutter is set,\n     * this will be null.\n     */ \n    frame: null, \n\n    /** \n     * Property: imageReloadAttempts\n     * {Integer} Attempts to load the image.\n     */\n    imageReloadAttempts: null,\n    \n    /**\n     * Property: layerAlphaHack\n     * {Boolean} True if the png alpha hack needs to be applied on the layer's div.\n     */\n    layerAlphaHack: null,\n    \n    /**\n     * Property: asyncRequestId\n     * {Integer} ID of an request to see if request is still valid. This is a\n     * number which increments by 1 for each asynchronous request.\n     */\n    asyncRequestId: null,\n    \n    /**\n     * APIProperty: maxGetUrlLength\n     * {Number} If set, requests that would result in GET urls with more\n     * characters than the number provided will be made using form-encoded\n     * HTTP POST. It is good practice to avoid urls that are longer than 2048\n     * characters.\n     *\n     * Caution:\n     * Older versions of Gecko based browsers (e.g. Firefox < 3.5) and most\n     * Opera versions do not fully support this option. On all browsers,\n     * transition effects are not supported if POST requests are used.\n     */\n    maxGetUrlLength: null,\n\n    /**\n     * Property: canvasContext\n     * {CanvasRenderingContext2D} A canvas context associated with\n     * the tile image.\n     */\n    canvasContext: null,\n    \n    /**\n     * APIProperty: crossOriginKeyword\n     * The value of the crossorigin keyword to use when loading images. This is\n     * only relevant when using <getCanvasContext> for tiles from remote\n     * origins and should be set to either 'anonymous' or 'use-credentials'\n     * for servers that send Access-Control-Allow-Origin headers with their\n     * tiles.\n     */\n    crossOriginKeyword: null,\n\n    /** TBD 3.0 - reorder the parameters to the init function to remove \n     *             URL. the getUrl() function on the layer gets called on \n     *             each draw(), so no need to specify it here.\n     */\n\n    /** \n     * Constructor: OpenLayers.Tile.Image\n     * Constructor for a new <OpenLayers.Tile.Image> instance.\n     * \n     * Parameters:\n     * layer - {<OpenLayers.Layer>} layer that the tile will go in.\n     * position - {<OpenLayers.Pixel>}\n     * bounds - {<OpenLayers.Bounds>}\n     * url - {<String>} Deprecated. Remove me in 3.0.\n     * size - {<OpenLayers.Size>}\n     * options - {Object}\n     */   \n    initialize: function(layer, position, bounds, url, size, options) {\n        OpenLayers.Tile.prototype.initialize.apply(this, arguments);\n\n        this.url = url; //deprecated remove me\n        \n        this.layerAlphaHack = this.layer.alpha && OpenLayers.Util.alphaHack();\n\n        if (this.maxGetUrlLength != null || this.layer.gutter || this.layerAlphaHack) {\n            // only create frame if it's needed\n            this.frame = document.createElement(\"div\");\n            this.frame.style.position = \"absolute\";\n            this.frame.style.overflow = \"hidden\";\n        }\n        if (this.maxGetUrlLength != null) {\n            OpenLayers.Util.extend(this, OpenLayers.Tile.Image.IFrame);\n        }\n    },\n    \n    /** \n     * APIMethod: destroy\n     * nullify references to prevent circular references and memory leaks\n     */\n    destroy: function() {\n        if (this.imgDiv)  {\n            this.clear();\n            this.imgDiv = null;\n            this.frame = null;\n        }\n        // don't handle async requests any more\n        this.asyncRequestId = null;\n        OpenLayers.Tile.prototype.destroy.apply(this, arguments);\n    },\n    \n    /**\n     * Method: draw\n     * Check that a tile should be drawn, and draw it.\n     * \n     * Returns:\n     * {Boolean} Was a tile drawn? Or null if a beforedraw listener returned\n     *     false.\n     */\n    draw: function() {\n        var shouldDraw = OpenLayers.Tile.prototype.draw.apply(this, arguments);\n        if (shouldDraw) {\n            // The layer's reproject option is deprecated.\n            if (this.layer != this.layer.map.baseLayer && this.layer.reproject) {\n                // getBoundsFromBaseLayer is defined in deprecated.js.\n                this.bounds = this.getBoundsFromBaseLayer(this.position);\n            }\n            if (this.isLoading) {\n                //if we're already loading, send 'reload' instead of 'loadstart'.\n                this._loadEvent = \"reload\";\n            } else {\n                this.isLoading = true;\n                this._loadEvent = \"loadstart\";\n            }\n            this.renderTile();\n            this.positionTile();\n        } else if (shouldDraw === false) {\n            this.unload();\n        }\n        return shouldDraw;\n    },\n    \n    /**\n     * Method: renderTile\n     * Internal function to actually initialize the image tile,\n     *     position it correctly, and set its url.\n     */\n    renderTile: function() {\n        if (this.layer.async) {\n            // Asynchronous image requests call the asynchronous getURL method\n            // on the layer to fetch an image that covers 'this.bounds'.\n            var id = this.asyncRequestId = (this.asyncRequestId || 0) + 1;\n            this.layer.getURLasync(this.bounds, function(url) {\n                if (id == this.asyncRequestId) {\n                    this.url = url;\n                    this.initImage();\n                }\n            }, this);\n        } else {\n            // synchronous image requests get the url immediately.\n            this.url = this.layer.getURL(this.bounds);\n            this.initImage();\n        }\n    },\n\n    /**\n     * Method: positionTile\n     * Using the properties currenty set on the layer, position the tile correctly.\n     * This method is used both by the async and non-async versions of the Tile.Image\n     * code.\n     */\n    positionTile: function() {\n        var style = this.getTile().style,\n            size = this.frame ? this.size :\n                this.layer.getImageSize(this.bounds),\n            ratio = 1;\n        if (this.layer instanceof OpenLayers.Layer.Grid) {\n            ratio = this.layer.getServerResolution() / this.layer.map.getResolution();\n        }\n        style.left = this.position.x + \"px\";\n        style.top = this.position.y + \"px\";\n        style.width = Math.round(ratio * size.w) + \"px\";\n        style.height = Math.round(ratio * size.h) + \"px\";\n    },\n\n    /** \n     * Method: clear\n     * Remove the tile from the DOM, clear it of any image related data so that\n     * it can be reused in a new location.\n     */\n    clear: function() {\n        OpenLayers.Tile.prototype.clear.apply(this, arguments);\n        var img = this.imgDiv;\n        if (img) {\n            var tile = this.getTile();\n            if (tile.parentNode === this.layer.div) {\n                this.layer.div.removeChild(tile);\n            }\n            this.setImgSrc();\n            if (this.layerAlphaHack === true) {\n                img.style.filter = \"\";\n            }\n            OpenLayers.Element.removeClass(img, \"olImageLoadError\");\n        }\n        this.canvasContext = null;\n    },\n    \n    /**\n     * Method: getImage\n     * Returns or creates and returns the tile image.\n     */\n    getImage: function() {\n        if (!this.imgDiv) {\n            this.imgDiv = OpenLayers.Tile.Image.IMAGE.cloneNode(false);\n\n            var style = this.imgDiv.style;\n            if (this.frame) {\n                var left = 0, top = 0;\n                if (this.layer.gutter) {\n                    left = this.layer.gutter / this.layer.tileSize.w * 100;\n                    top = this.layer.gutter / this.layer.tileSize.h * 100;\n                }\n                style.left = -left + \"%\";\n                style.top = -top + \"%\";\n                style.width = (2 * left + 100) + \"%\";\n                style.height = (2 * top + 100) + \"%\";\n            }\n            style.visibility = \"hidden\";\n            style.opacity = 0;\n            if (this.layer.opacity < 1) {\n                style.filter = 'alpha(opacity=' +\n                               (this.layer.opacity * 100) +\n                               ')';\n            }\n            style.position = \"absolute\";\n            if (this.layerAlphaHack) {\n                // move the image out of sight\n                style.paddingTop = style.height;\n                style.height = \"0\";\n                style.width = \"100%\";\n            }\n            if (this.frame) {\n                this.frame.appendChild(this.imgDiv);\n            }\n        }\n\n        return this.imgDiv;\n    },\n    \n    /**\n     * APIMethod: setImage\n     * Sets the image element for this tile. This method should only be called\n     * from beforeload listeners.\n     *\n     * Parameters\n     * img - {HTMLImageElement} The image to use for this tile.\n     */\n    setImage: function(img) {\n        this.imgDiv = img;\n    },\n\n    /**\n     * Method: initImage\n     * Creates the content for the frame on the tile.\n     */\n    initImage: function() {\n        if (!this.url && !this.imgDiv) {\n            // fast path out - if there is no tile url and no previous image\n            this.isLoading = false;\n            return;\n        }\n        this.events.triggerEvent('beforeload');\n        this.layer.div.appendChild(this.getTile());\n        this.events.triggerEvent(this._loadEvent);\n        var img = this.getImage();\n        var src = img.getAttribute('src') || '';\n        if (this.url && OpenLayers.Util.isEquivalentUrl(src, this.url)) {\n            this._loadTimeout = window.setTimeout(\n                OpenLayers.Function.bind(this.onImageLoad, this), 0\n            );\n        } else {\n            this.stopLoading();\n            if (this.crossOriginKeyword) {\n                img.removeAttribute(\"crossorigin\");\n            }\n            OpenLayers.Event.observe(img, \"load\",\n                OpenLayers.Function.bind(this.onImageLoad, this)\n            );\n            OpenLayers.Event.observe(img, \"error\",\n                OpenLayers.Function.bind(this.onImageError, this)\n            );\n            this.imageReloadAttempts = 0;\n            this.setImgSrc(this.url);\n        }\n    },\n    \n    /**\n     * Method: setImgSrc\n     * Sets the source for the tile image\n     *\n     * Parameters:\n     * url - {String} or undefined to hide the image\n     */\n    setImgSrc: function(url) {\n        var img = this.imgDiv;\n        if (url) {\n            img.style.visibility = 'hidden';\n            img.style.opacity = 0;\n            // don't set crossOrigin if the url is a data URL\n            if (this.crossOriginKeyword) {\n                if (url.substr(0, 5) !== 'data:') {\n                    img.setAttribute(\"crossorigin\", this.crossOriginKeyword);\n                } else {\n                    img.removeAttribute(\"crossorigin\");\n                }\n            }\n            img.src = url;\n        } else {\n            // Remove reference to the image, and leave it to the browser's\n            // caching and garbage collection.\n            this.stopLoading();\n            this.imgDiv = null;\n            if (img.parentNode) {\n                img.parentNode.removeChild(img);\n            }\n        }\n    },\n    \n    /**\n     * Method: getTile\n     * Get the tile's markup.\n     *\n     * Returns:\n     * {DOMElement} The tile's markup\n     */\n    getTile: function() {\n        return this.frame ? this.frame : this.getImage();\n    },\n\n    /**\n     * Method: createBackBuffer\n     * Create a backbuffer for this tile. A backbuffer isn't exactly a clone\n     * of the tile's markup, because we want to avoid the reloading of the\n     * image. So we clone the frame, and steal the image from the tile.\n     *\n     * Returns:\n     * {DOMElement} The markup, or undefined if the tile has no image\n     * or if it's currently loading.\n     */\n    createBackBuffer: function() {\n        if (!this.imgDiv || this.isLoading) {\n            return;\n        }\n        var backBuffer;\n        if (this.frame) {\n            backBuffer = this.frame.cloneNode(false);\n            backBuffer.appendChild(this.imgDiv);\n        } else {\n            backBuffer = this.imgDiv;\n        }\n        this.imgDiv = null;\n        return backBuffer;\n    },\n\n    /**\n     * Method: onImageLoad\n     * Handler for the image onload event\n     */\n    onImageLoad: function() {\n        var img = this.imgDiv;\n        this.stopLoading();\n        img.style.visibility = 'inherit';\n        img.style.opacity = this.layer.opacity;\n        this.isLoading = false;\n        this.canvasContext = null;\n        this.events.triggerEvent(\"loadend\");\n\n        if (this.layerAlphaHack === true) {\n            img.style.filter =\n                \"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='\" +\n                img.src + \"', sizingMethod='scale')\";\n        }\n    },\n    \n    /**\n     * Method: onImageError\n     * Handler for the image onerror event\n     */\n    onImageError: function() {\n        var img = this.imgDiv;\n        if (img.src != null) {\n            this.imageReloadAttempts++;\n            if (this.imageReloadAttempts <= OpenLayers.IMAGE_RELOAD_ATTEMPTS) {\n                this.setImgSrc(this.layer.getURL(this.bounds));\n            } else {\n                OpenLayers.Element.addClass(img, \"olImageLoadError\");\n                this.events.triggerEvent(\"loaderror\");\n                this.onImageLoad();\n            }\n        }\n    },\n    \n    /**\n     * Method: stopLoading\n     * Stops a loading sequence so <onImageLoad> won't be executed.\n     */\n    stopLoading: function() {\n        OpenLayers.Event.stopObservingElement(this.imgDiv);\n        window.clearTimeout(this._loadTimeout);\n        delete this._loadTimeout;\n    },\n\n    /**\n     * APIMethod: getCanvasContext\n     * Returns a canvas context associated with the tile image (with\n     * the image drawn on it).\n     * Returns undefined if the browser does not support canvas, if\n     * the tile has no image or if it's currently loading.\n     *\n     * The function returns a canvas context instance but the\n     * underlying canvas is still available in the 'canvas' property:\n     * (code)\n     * var context = tile.getCanvasContext();\n     * if (context) {\n     *     var data = context.canvas.toDataURL('image/jpeg');\n     * }\n     * (end)\n     *\n     * Returns:\n     * {Boolean}\n     */\n    getCanvasContext: function() {\n        if (OpenLayers.CANVAS_SUPPORTED && this.imgDiv && !this.isLoading) {\n            if (!this.canvasContext) {\n                var canvas = document.createElement(\"canvas\");\n                canvas.width = this.size.w;\n                canvas.height = this.size.h;\n                this.canvasContext = canvas.getContext(\"2d\");\n                this.canvasContext.drawImage(this.imgDiv, 0, 0);\n            }\n            return this.canvasContext;\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Tile.Image\"\n\n});\n\n/** \n * Constant: OpenLayers.Tile.Image.IMAGE\n * {HTMLImageElement} The image for a tile.\n */\nOpenLayers.Tile.Image.IMAGE = (function() {\n    var img = new Image();\n    img.className = \"olTileImage\";\n    // avoid image gallery menu in IE6\n    img.galleryImg = \"no\";\n    return img;\n}());\n\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Tile/Image.js\n */\n\n/**\n * Constant: OpenLayers.Tile.Image.IFrame\n * Mixin for tiles that use form-encoded POST requests to get images from\n * remote services. Images will be loaded using HTTP-POST into an IFrame.\n *\n * This mixin will be applied to <OpenLayers.Tile.Image> instances\n * configured with <OpenLayers.Tile.Image.maxGetUrlLength> set.\n */\nOpenLayers.Tile.Image.IFrame = {\n\n    /**\n     * Property: useIFrame\n     * {Boolean} true if we are currently using an IFrame to render POST\n     * responses, false if we are using an img element to render GET responses.\n     */ \n    useIFrame: null,\n\n    /**\n     * Property: blankImageUrl\n     * {String} Using a data scheme url is not supported by all browsers, but\n     * we don't care because we either set it as css backgroundImage, or the\n     * image's display style is set to \"none\" when we use it.\n     */\n    blankImageUrl: \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAQAIBRAA7\",\n\n    /**\n     * Method: draw\n     * Set useIFrame in the instance, and operate the image/iframe switch.\n     * Then call Tile.Image.draw.\n     *\n     * Returns:\n     * {Boolean}\n     */\n    draw: function() {\n        var draw = OpenLayers.Tile.Image.prototype.shouldDraw.call(this);\n        if(draw) {\n\n            // this.url isn't set to the currect value yet, so we call getURL\n            // on the layer and store the result in a local variable\n            var url = this.layer.getURL(this.bounds);\n\n            var usedIFrame = this.useIFrame;\n            this.useIFrame = this.maxGetUrlLength !== null &&\n                             !this.layer.async &&\n                             url.length > this.maxGetUrlLength;\n\n            var fromIFrame = usedIFrame && !this.useIFrame;\n            var toIFrame = !usedIFrame && this.useIFrame;\n\n            if(fromIFrame || toIFrame) {\n\n                // Switching between GET (image) and POST (iframe).\n\n                // We remove the imgDiv (really either an image or an iframe)\n                // from the frame and set it to null to make sure initImage\n                // will call getImage.\n\n                if(this.imgDiv && this.imgDiv.parentNode === this.frame) {\n                    this.frame.removeChild(this.imgDiv);\n                }\n                this.imgDiv = null;\n\n                // And if we had an iframe we also remove the event pane.\n\n                if(fromIFrame) {\n                    this.frame.removeChild(this.frame.firstChild);\n                }\n            }\n        }\n        return OpenLayers.Tile.Image.prototype.draw.apply(this, arguments);\n    },\n\n    /**\n     * Method: getImage\n     * Creates the content for the frame on the tile.\n     */\n    getImage: function() {\n        if (this.useIFrame === true) {\n            if (!this.frame.childNodes.length) {\n                var eventPane = document.createElement(\"div\"),\n                    style = eventPane.style;\n                style.position = \"absolute\";\n                style.width = \"100%\";\n                style.height = \"100%\";\n                style.zIndex = 1;\n                style.backgroundImage = \"url(\" + this.blankImageUrl + \")\";\n                this.frame.appendChild(eventPane);\n            }\n\n            var id = this.id + '_iFrame', iframe;\n            if (parseFloat(navigator.appVersion.split(\"MSIE\")[1]) < 9) {\n                // Older IE versions do not set the name attribute of an iFrame \n                // properly via DOM manipulation, so we need to do it on our own with\n                // this hack.\n                iframe = document.createElement('<iframe name=\"'+id+'\">');\n\n                // IFrames in older IE versions are not transparent, if you set\n                // the backgroundColor transparent. This is a workaround to get \n                // transparent iframes.\n                iframe.style.backgroundColor = '#FFFFFF';\n                iframe.style.filter          = 'chroma(color=#FFFFFF)';\n            }\n            else {\n                iframe = document.createElement('iframe');\n                iframe.style.backgroundColor = 'transparent';\n\n                // iframe.name needs to be an unique id, otherwise it \n                // could happen that other iframes are overwritten.\n                iframe.name = id;\n            }\n\n            // some special properties to avoid scaling the images and scrollbars \n            // in the iframe\n            iframe.scrolling      = 'no';\n            iframe.marginWidth    = '0px';\n            iframe.marginHeight   = '0px';\n            iframe.frameBorder    = '0';\n\n            iframe.style.position = \"absolute\";\n            var left = 0, top = 0;\n            if (this.layer.gutter) {\n                left = this.layer.gutter / this.layer.tileSize.w * 100;\n                top = this.layer.gutter / this.layer.tileSize.h * 100;\n            }\n            iframe.style.left = -left + \"%\";\n            iframe.style.top = -top + \"%\";\n            iframe.style.width = (2 * left + 100) + \"%\";\n            iframe.style.height = (2 * top + 100) + \"%\";\n\n            if (this.layer.opacity < 1) {\n                OpenLayers.Util.modifyDOMElement(iframe, null, null, null,\n                    null, null, null, this.layer.opacity);\n            }\n            this.frame.appendChild(iframe);\n            this.imgDiv = iframe;\n            return iframe;\n        } else {\n            return OpenLayers.Tile.Image.prototype.getImage.apply(this, arguments);\n        }\n    },\n    \n    /**\n     * Method: createRequestForm\n     * Create the html <form> element with width, height, bbox and all \n     * parameters specified in the layer params.\n     *\n     * Returns: \n     * {DOMElement} The form element which sends the HTTP-POST request to the\n     *              WMS. \n     */\n    createRequestForm: function() {\n        // creation of the form element\n        var form = document.createElement('form');\n        form.method = 'POST';\n        var cacheId = this.layer.params[\"_OLSALT\"];\n        cacheId = (cacheId ? cacheId + \"_\" : \"\") + this.bounds.toBBOX();\n        form.action = OpenLayers.Util.urlAppend(this.layer.url, cacheId);\n        form.target = this.id + '_iFrame';\n\n        // adding all parameters in layer params as hidden fields to the html\n        // form element\n        var imageSize = this.layer.getImageSize(this.bounds),\n            params = OpenLayers.Util.getParameters(this.url),\n            field;\n            \n        for(var par in params) {\n            field = document.createElement('input');\n            field.type  = 'hidden';\n            field.name  = par;\n            field.value = params[par];\n            form.appendChild(field);\n        }   \n\n        return form;\n    },\n\n    /**\n     * Method: setImgSrc\n     * Sets the source for the tile image\n     *\n     * Parameters:\n     * url - {String}\n     */\n    setImgSrc: function(url) {\n        if (this.useIFrame === true) {\n            if (url) {\n                var form = this.createRequestForm();\n                this.frame.appendChild(form);\n                form.submit();\n                this.frame.removeChild(form);\n            } else if (this.imgDiv.parentNode === this.frame) {\n                // we don't reuse iframes to avoid caching issues\n                this.frame.removeChild(this.imgDiv);\n                this.imgDiv = null;\n            }\n        } else {\n            OpenLayers.Tile.Image.prototype.setImgSrc.apply(this, arguments);\n        }\n    },\n    \n    /**\n     * Method: onImageLoad\n     * Handler for the image onload event\n     */\n    onImageLoad: function() {\n        //TODO de-uglify opacity handling\n        OpenLayers.Tile.Image.prototype.onImageLoad.apply(this, arguments);\n        if (this.useIFrame === true) {\n            this.imgDiv.style.opacity = 1;\n            this.frame.style.opacity = this.layer.opacity;\n        }\n    },\n\n    /**\n     * Method: createBackBuffer\n     * Override createBackBuffer to do nothing when we use an iframe. Moving an\n     * iframe from one element to another makes it necessary to reload the iframe\n     * because its content is lost. So we just give up.\n     *\n     * Returns:\n     * {DOMElement}\n     */\n    createBackBuffer: function() {\n        var backBuffer;\n        if(this.useIFrame === false) {\n            backBuffer = OpenLayers.Tile.Image.prototype.createBackBuffer.call(this);\n        }\n        return backBuffer;\n    }\n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Tile.js\n * @requires OpenLayers/Format/JSON.js\n * @requires OpenLayers/Request.js\n */\n\n/**\n * Class: OpenLayers.Tile.UTFGrid\n * Instances of OpenLayers.Tile.UTFGrid are used to manage \n * UTFGrids. This is an unusual tile type in that it doesn't have a\n * rendered image; only a 'hit grid' that can be used to \n * look up feature attributes.\n *\n * See the <OpenLayers.Tile.UTFGrid> constructor for details on constructing a\n * new instance.\n *\n * Inherits from:\n *  - <OpenLayers.Tile>\n */\nOpenLayers.Tile.UTFGrid = OpenLayers.Class(OpenLayers.Tile, {\n\n    /** \n     * Property: url\n     * {String}\n     * The URL of the UTFGrid file being requested. Provided by the <getURL>\n     *     method. \n     */\n    url: null,\n    \n    /**\n     * Property: utfgridResolution\n     * {Number}\n     * Ratio of the pixel width to the width of a UTFGrid data point.  If an \n     *     entry in the grid represents a 4x4 block of pixels, the \n     *     utfgridResolution would be 4.  Default is 2.\n     */\n    utfgridResolution: 2,\n    \n    /** \n     * Property: json\n     * {Object}\n     * Stores the parsed JSON tile data structure. \n     */\n    json: null,\n    \n    /** \n     * Property: format\n     * {OpenLayers.Format.JSON}\n     * Parser instance used to parse JSON for cross browser support.  The native\n     *     JSON.parse method will be used where available (all except IE<8).\n     */\n    format: null,\n\n    /** \n     * Constructor: OpenLayers.Tile.UTFGrid\n     * Constructor for a new <OpenLayers.Tile.UTFGrid> instance.\n     * \n     * Parameters:\n     * layer - {<OpenLayers.Layer>} layer that the tile will go in.\n     * position - {<OpenLayers.Pixel>}\n     * bounds - {<OpenLayers.Bounds>}\n     * url - {<String>} Deprecated. Remove me in 3.0.\n     * size - {<OpenLayers.Size>}\n     * options - {Object}\n     */\n\n    /** \n     * APIMethod: destroy\n     * Clean up.\n     */\n    destroy: function() {\n        this.clear();\n        OpenLayers.Tile.prototype.destroy.apply(this, arguments);\n    },\n    \n    /**\n     * Method: draw\n     * Check that a tile should be drawn, and draw it.\n     * In the case of UTFGrids, \"drawing\" it means fetching and\n     * parsing the json. \n     * \n     * Returns:\n     * {Boolean} Was a tile drawn?\n     */\n    draw: function() {\n        var drawn = OpenLayers.Tile.prototype.draw.apply(this, arguments);\n        if (drawn) {\n            if (this.isLoading) {\n                this.abortLoading();\n                //if we're already loading, send 'reload' instead of 'loadstart'.\n                this.events.triggerEvent(\"reload\"); \n            } else {\n                this.isLoading = true;\n                this.events.triggerEvent(\"loadstart\");\n            }\n            this.url = this.layer.getURL(this.bounds);\n\n            if (this.layer.useJSONP) {\n                // Use JSONP method to avoid xbrowser policy\n                var ols = new OpenLayers.Protocol.Script({\n                    url: this.url,\n                    callback: function(response) {\n                        this.isLoading = false;\n                        this.events.triggerEvent(\"loadend\");\n                        this.json = response.data;\n                    },\n                    scope: this\n                });\n                ols.read();\n                this.request = ols;\n            } else {\n                // Use standard XHR\n                this.request = OpenLayers.Request.GET({\n                    url: this.url,\n                    callback: function(response) {\n                        this.isLoading = false;\n                        this.events.triggerEvent(\"loadend\");\n                        if (response.status === 200) {\n                            this.parseData(response.responseText);\n                        }\n                    },\n                    scope: this\n                });\n            }\n        } else {\n            this.unload();\n        }\n        return drawn;\n    },\n    \n    /**\n     * Method: abortLoading\n     * Cancel a pending request.\n     */\n    abortLoading: function() {\n        if (this.request) {\n            this.request.abort();\n            delete this.request;\n        }\n        this.isLoading = false;\n    },\n    \n    /**\n     * Method: getFeatureInfo\n     * Get feature information associated with a pixel offset.  If the pixel\n     *     offset corresponds to a feature, the returned object will have id\n     *     and data properties.  Otherwise, null will be returned.\n     *     \n     *\n     * Parameters:\n     * i - {Number} X-axis pixel offset (from top left of tile)\n     * j - {Number} Y-axis pixel offset (from top left of tile)\n     *\n     * Returns:\n     * {Object} Object with feature id and data properties corresponding to the \n     *     given pixel offset.\n     */\n    getFeatureInfo: function(i, j) {\n        var info = null;\n        if (this.json) {\n            var id = this.getFeatureId(i, j);\n            if (id !== null) {\n                info = {id: id, data: this.json.data[id]};\n            }\n        }\n        return info;\n    },\n    \n    /**\n     * Method: getFeatureId\n     * Get the identifier for the feature associated with a pixel offset.\n     *\n     * Parameters:\n     * i - {Number} X-axis pixel offset (from top left of tile)\n     * j - {Number} Y-axis pixel offset (from top left of tile)\n     *\n     * Returns:\n     * {Object} The feature identifier corresponding to the given pixel offset.\n     *     Returns null if pixel doesn't correspond to a feature.\n     */\n    getFeatureId: function(i, j) {\n        var id = null;\n        if (this.json) {\n            var resolution = this.utfgridResolution;\n            var row = Math.floor(j / resolution);\n            var col = Math.floor(i / resolution);\n            var charCode = this.json.grid[row].charCodeAt(col);\n            var index = this.indexFromCharCode(charCode);\n            var keys = this.json.keys;\n            if (!isNaN(index) && (index in keys)) {\n                id = keys[index];\n            }\n        }\n        return id;\n    },\n    \n    /**\n     * Method: indexFromCharCode\n     * Given a character code for one of the UTFGrid \"grid\" characters, \n     *     resolve the integer index for the feature id in the UTFGrid \"keys\"\n     *     array.\n     *\n     * Parameters:\n     * charCode - {Integer}\n     *\n     * Returns:\n     * {Integer} Index for the feature id from the keys array.\n     */\n    indexFromCharCode: function(charCode) {\n        if (charCode >= 93) {\n            charCode--;\n        }\n        if (charCode >= 35) {\n            charCode --;\n        }\n        return charCode - 32;\n    },\n    \n    /**\n     * Method: parseData\n     * Parse the JSON from a request\n     *\n     * Parameters:\n     * str - {String} UTFGrid as a JSON string. \n     * \n     * Returns:\n     * {Object} parsed javascript data\n     */\n    parseData: function(str) {\n        if (!this.format) {\n            this.format = new OpenLayers.Format.JSON();\n        }\n        this.json = this.format.read(str);\n    },\n    \n    /** \n     * Method: clear\n     * Delete data stored with this tile.\n     */\n    clear: function() {\n        this.json = null;\n    },\n    \n    CLASS_NAME: \"OpenLayers.Tile.UTFGrid\"\n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n \n/**\n * @requires OpenLayers/Layer.js\n * @requires OpenLayers/Tile/Image.js\n */\n\n/**\n * Class: OpenLayers.Layer.Image\n * Instances of OpenLayers.Layer.Image are used to display data from a web\n * accessible image as a map layer.  Create a new image layer with the\n * <OpenLayers.Layer.Image> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Layer>\n */\nOpenLayers.Layer.Image = OpenLayers.Class(OpenLayers.Layer, {\n\n    /**\n     * Property: isBaseLayer\n     * {Boolean} The layer is a base layer.  Default is true.  Set this property\n     * in the layer options\n     */\n    isBaseLayer: true,\n    \n    /**\n     * Property: url\n     * {String} URL of the image to use\n     */\n    url: null,\n\n    /**\n     * Property: extent\n     * {<OpenLayers.Bounds>} The image bounds in map units.  This extent will\n     *     also be used as the default maxExtent for the layer.  If you wish\n     *     to have a maxExtent that is different than the image extent, set the\n     *     maxExtent property of the options argument (as with any other layer).\n     */\n    extent: null,\n    \n    /**\n     * Property: size\n     * {<OpenLayers.Size>} The image size in pixels\n     */\n    size: null,\n\n    /**\n     * Property: tile\n     * {<OpenLayers.Tile.Image>}\n     */\n    tile: null,\n\n    /**\n     * Property: aspectRatio\n     * {Float} The ratio of height/width represented by a single pixel in the\n     * graphic\n     */\n    aspectRatio: null,\n\n    /**\n     * Constructor: OpenLayers.Layer.Image\n     * Create a new image layer\n     *\n     * Parameters:\n     * name - {String} A name for the layer.\n     * url - {String} Relative or absolute path to the image\n     * extent - {<OpenLayers.Bounds>} The extent represented by the image\n     * size - {<OpenLayers.Size>} The size (in pixels) of the image\n     * options - {Object} Hashtable of extra options to tag onto the layer\n     */\n    initialize: function(name, url, extent, size, options) {\n        this.url = url;\n        this.extent = extent;\n        this.maxExtent = extent;\n        this.size = size;\n        OpenLayers.Layer.prototype.initialize.apply(this, [name, options]);\n\n        this.aspectRatio = (this.extent.getHeight() / this.size.h) /\n                           (this.extent.getWidth() / this.size.w);\n    },    \n\n    /**\n     * Method: destroy\n     * Destroy this layer\n     */\n    destroy: function() {\n        if (this.tile) {\n            this.removeTileMonitoringHooks(this.tile);\n            this.tile.destroy();\n            this.tile = null;\n        }\n        OpenLayers.Layer.prototype.destroy.apply(this, arguments);\n    },\n    \n    /**\n     * Method: clone\n     * Create a clone of this layer\n     *\n     * Parameters:\n     * obj - {Object} An optional layer (is this ever used?)\n     *\n     * Returns:\n     * {<OpenLayers.Layer.Image>} An exact copy of this layer\n     */\n    clone: function(obj) {\n        \n        if(obj == null) {\n            obj = new OpenLayers.Layer.Image(this.name,\n                                               this.url,\n                                               this.extent,\n                                               this.size,\n                                               this.getOptions());\n        }\n\n        //get all additions from superclasses\n        obj = OpenLayers.Layer.prototype.clone.apply(this, [obj]);\n\n        // copy/set any non-init, non-simple values here\n\n        return obj;\n    },    \n    \n    /**\n     * APIMethod: setMap\n     * \n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    setMap: function(map) {\n        /**\n         * If nothing to do with resolutions has been set, assume a single\n         * resolution determined by ratio*extent/size - if an image has a\n         * pixel aspect ratio different than one (as calculated above), the\n         * image will be stretched in one dimension only.\n         */\n        if( this.options.maxResolution == null ) {\n            this.options.maxResolution = this.aspectRatio *\n                                         this.extent.getWidth() /\n                                         this.size.w;\n        }\n        OpenLayers.Layer.prototype.setMap.apply(this, arguments);\n    },\n\n    /** \n     * Method: moveTo\n     * Create the tile for the image or resize it for the new resolution\n     * \n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     * zoomChanged - {Boolean}\n     * dragging - {Boolean}\n     */\n    moveTo:function(bounds, zoomChanged, dragging) {\n        OpenLayers.Layer.prototype.moveTo.apply(this, arguments);\n\n        var firstRendering = (this.tile == null);\n\n        if(zoomChanged || firstRendering) {\n\n            //determine new tile size\n            this.setTileSize();\n\n            //determine new position (upper left corner of new bounds)\n            var ulPx = this.map.getLayerPxFromLonLat({\n                lon: this.extent.left,\n                lat: this.extent.top\n            });\n\n            if(firstRendering) {\n                //create the new tile\n                this.tile = new OpenLayers.Tile.Image(this, ulPx, this.extent, \n                                                      null, this.tileSize);\n                this.addTileMonitoringHooks(this.tile);\n            } else {\n                //just resize the tile and set it's new position\n                this.tile.size = this.tileSize.clone();\n                this.tile.position = ulPx.clone();\n            }\n            this.tile.draw();\n        }\n    }, \n\n    /**\n     * Set the tile size based on the map size.\n     */\n    setTileSize: function() {\n        var tileWidth = this.extent.getWidth() / this.map.getResolution();\n        var tileHeight = this.extent.getHeight() / this.map.getResolution();\n        this.tileSize = new OpenLayers.Size(tileWidth, tileHeight);\n    },\n\n    /** \n     * Method: addTileMonitoringHooks\n     * This function takes a tile as input and adds the appropriate hooks to \n     *     the tile so that the layer can keep track of the loading tiles.\n     * \n     * Parameters: \n     * tile - {<OpenLayers.Tile>}\n     */\n    addTileMonitoringHooks: function(tile) {\n        tile.onLoadStart = function() {\n            this.events.triggerEvent(\"loadstart\");\n        };\n        tile.events.register(\"loadstart\", this, tile.onLoadStart);\n      \n        tile.onLoadEnd = function() {\n            this.events.triggerEvent(\"loadend\");\n        };\n        tile.events.register(\"loadend\", this, tile.onLoadEnd);\n        tile.events.register(\"unload\", this, tile.onLoadEnd);\n    },\n\n    /** \n     * Method: removeTileMonitoringHooks\n     * This function takes a tile as input and removes the tile hooks \n     *     that were added in <addTileMonitoringHooks>.\n     * \n     * Parameters: \n     * tile - {<OpenLayers.Tile>}\n     */\n    removeTileMonitoringHooks: function(tile) {\n        tile.unload();\n        tile.events.un({\n            \"loadstart\": tile.onLoadStart,\n            \"loadend\": tile.onLoadEnd,\n            \"unload\": tile.onLoadEnd,\n            scope: this\n        });\n    },\n    \n    /**\n     * APIMethod: setUrl\n     * \n     * Parameters:\n     * newUrl - {String}\n     */\n    setUrl: function(newUrl) {\n        this.url = newUrl;\n        this.tile.draw();\n    },\n\n    /** \n     * APIMethod: getURL\n     * The url we return is always the same (the image itself never changes)\n     *     so we can ignore the bounds parameter (it will always be the same, \n     *     anyways) \n     * \n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     */\n    getURL: function(bounds) {\n        return this.url;\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.Image\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Layer.js\n * @requires OpenLayers/Projection.js\n */\n\n/**\n * Class: OpenLayers.Layer.SphericalMercator\n * A mixin for layers that wraps up the pieces necessary to have a coordinate\n *     conversion for working with commercial APIs which use a spherical\n *     mercator projection.  Using this layer as a base layer, additional\n *     layers can be used as overlays if they are in the same projection.\n *\n * A layer is given properties of this object by setting the sphericalMercator\n *     property to true.\n *\n * More projection information:\n *  - http://spatialreference.org/ref/user/google-projection/\n *\n * Proj4 Text:\n *     +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0\n *     +k=1.0 +units=m +nadgrids=@null +no_defs\n *\n * WKT:\n *     900913=PROJCS[\"WGS84 / Simple Mercator\", GEOGCS[\"WGS 84\",\n *     DATUM[\"WGS_1984\", SPHEROID[\"WGS_1984\", 6378137.0, 298.257223563]], \n *     PRIMEM[\"Greenwich\", 0.0], UNIT[\"degree\", 0.017453292519943295], \n *     AXIS[\"Longitude\", EAST], AXIS[\"Latitude\", NORTH]],\n *     PROJECTION[\"Mercator_1SP_Google\"], \n *     PARAMETER[\"latitude_of_origin\", 0.0], PARAMETER[\"central_meridian\", 0.0], \n *     PARAMETER[\"scale_factor\", 1.0], PARAMETER[\"false_easting\", 0.0], \n *     PARAMETER[\"false_northing\", 0.0], UNIT[\"m\", 1.0], AXIS[\"x\", EAST],\n *     AXIS[\"y\", NORTH], AUTHORITY[\"EPSG\",\"900913\"]]\n */\nOpenLayers.Layer.SphericalMercator = {\n\n    /**\n     * Method: getExtent\n     * Get the map's extent.\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>} The map extent.\n     */\n    getExtent: function() {\n        var extent = null;\n        if (this.sphericalMercator) {\n            extent = this.map.calculateBounds();\n        } else {\n            extent = OpenLayers.Layer.FixedZoomLevels.prototype.getExtent.apply(this);\n        }\n        return extent;\n    },\n\n    /**\n     * Method: getLonLatFromViewPortPx\n     * Get a map location from a pixel location\n     * \n     * Parameters:\n     * viewPortPx - {<OpenLayers.Pixel>}\n     *\n     * Returns:\n     *  {<OpenLayers.LonLat>} An OpenLayers.LonLat which is the passed-in view\n     *  port OpenLayers.Pixel, translated into lon/lat by map lib\n     *  If the map lib is not loaded or not centered, returns null\n     */\n    getLonLatFromViewPortPx: function (viewPortPx) {\n        return OpenLayers.Layer.prototype.getLonLatFromViewPortPx.apply(this, arguments);\n    },\n    \n    /**\n     * Method: getViewPortPxFromLonLat\n     * Get a pixel location from a map location\n     *\n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>}\n     *\n     * Returns:\n     * {<OpenLayers.Pixel>} An OpenLayers.Pixel which is the passed-in\n     * OpenLayers.LonLat, translated into view port pixels by map lib\n     * If map lib is not loaded or not centered, returns null\n     */\n    getViewPortPxFromLonLat: function (lonlat) {\n        return OpenLayers.Layer.prototype.getViewPortPxFromLonLat.apply(this, arguments);\n    },\n\n    /** \n     * Method: initMercatorParameters \n     * Set up the mercator parameters on the layer: resolutions,\n     *     projection, units.\n     */\n    initMercatorParameters: function() {\n        // set up properties for Mercator - assume EPSG:900913\n        this.RESOLUTIONS = [];\n        var maxResolution = 156543.03390625;\n        for(var zoom=0; zoom<=this.MAX_ZOOM_LEVEL; ++zoom) {\n            this.RESOLUTIONS[zoom] = maxResolution / Math.pow(2, zoom);\n        }\n        this.units = \"m\";\n        this.projection = this.projection || \"EPSG:900913\";\n    },\n\n    /**\n     * APIMethod: forwardMercator\n     * Given a lon,lat in EPSG:4326, return a point in Spherical Mercator.\n     *\n     * Parameters:\n     * lon - {float} \n     * lat - {float}\n     * \n     * Returns:\n     * {<OpenLayers.LonLat>} The coordinates transformed to Mercator.\n     */\n    forwardMercator: (function() {\n        var gg = new OpenLayers.Projection(\"EPSG:4326\");\n        var sm = new OpenLayers.Projection(\"EPSG:900913\");\n        return function(lon, lat) {\n            var point = OpenLayers.Projection.transform({x: lon, y: lat}, gg, sm);\n            return new OpenLayers.LonLat(point.x, point.y);\n        };\n    })(),\n\n    /**\n     * APIMethod: inverseMercator\n     * Given a x,y in Spherical Mercator, return a point in EPSG:4326.\n     *\n     * Parameters:\n     * x - {float} A map x in Spherical Mercator.\n     * y - {float} A map y in Spherical Mercator.\n     * \n     * Returns:\n     * {<OpenLayers.LonLat>} The coordinates transformed to EPSG:4326.\n     */\n    inverseMercator: (function() {\n        var gg = new OpenLayers.Projection(\"EPSG:4326\");\n        var sm = new OpenLayers.Projection(\"EPSG:900913\");\n        return function(x, y) {\n            var point = OpenLayers.Projection.transform({x: x, y: y}, sm, gg);\n            return new OpenLayers.LonLat(point.x, point.y);\n        };\n    })()\n\n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Layer.js\n * @requires OpenLayers/Util.js\n */\n\n/**\n * Class: OpenLayers.Layer.EventPane\n * Base class for 3rd party layers, providing a DOM element which isolates\n * the 3rd-party layer from mouse events.\n * Only used by Google layers.\n *\n * Automatically instantiated by the Google constructor, and not usually instantiated directly.\n *\n * Create a new event pane layer with the\n * <OpenLayers.Layer.EventPane> constructor.\n * \n * Inherits from:\n *  - <OpenLayers.Layer>\n */\nOpenLayers.Layer.EventPane = OpenLayers.Class(OpenLayers.Layer, {\n    \n    /**\n     * APIProperty: smoothDragPan\n     * {Boolean} smoothDragPan determines whether non-public/internal API\n     *     methods are used for better performance while dragging EventPane \n     *     layers. When not in sphericalMercator mode, the smoother dragging \n     *     doesn't actually move north/south directly with the number of \n     *     pixels moved, resulting in a slight offset when you drag your mouse \n     *     north south with this option on. If this visual disparity bothers \n     *     you, you should turn this option off, or use spherical mercator. \n     *     Default is on.\n     */\n    smoothDragPan: true,\n\n    /**\n     * Property: isBaseLayer\n     * {Boolean} EventPaned layers are always base layers, by necessity.\n     */ \n    isBaseLayer: true,\n\n    /**\n     * APIProperty: isFixed\n     * {Boolean} EventPaned layers are fixed by default.\n     */ \n    isFixed: true,\n\n    /**\n     * Property: pane\n     * {DOMElement} A reference to the element that controls the events.\n     */\n    pane: null,\n\n\n    /**\n     * Property: mapObject\n     * {Object} This is the object which will be used to load the 3rd party library\n     * in the case of the google layer, this will be of type GMap, \n     * in the case of the ve layer, this will be of type VEMap\n     */ \n    mapObject: null,\n\n\n    /**\n     * Constructor: OpenLayers.Layer.EventPane\n     * Create a new event pane layer\n     *\n     * Parameters:\n     * name - {String}\n     * options - {Object} Hashtable of extra options to tag onto the layer\n     */\n    initialize: function(name, options) {\n        OpenLayers.Layer.prototype.initialize.apply(this, arguments);\n        if (this.pane == null) {\n            this.pane = OpenLayers.Util.createDiv(this.div.id + \"_EventPane\");\n        }\n    },\n    \n    /**\n     * APIMethod: destroy\n     * Deconstruct this layer.\n     */\n    destroy: function() {\n        this.mapObject = null;\n        this.pane = null;\n        OpenLayers.Layer.prototype.destroy.apply(this, arguments); \n    },\n\n    \n    /**\n     * Method: setMap\n     * Set the map property for the layer. This is done through an accessor\n     * so that subclasses can override this and take special action once \n     * they have their map variable set. \n     *\n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    setMap: function(map) {\n        OpenLayers.Layer.prototype.setMap.apply(this, arguments);\n        \n        this.pane.style.zIndex = parseInt(this.div.style.zIndex) + 1;\n        this.pane.style.display = this.div.style.display;\n        this.pane.style.width=\"100%\";\n        this.pane.style.height=\"100%\";\n        if (OpenLayers.BROWSER_NAME == \"msie\") {\n            this.pane.style.background = \n                \"url(\" + OpenLayers.Util.getImageLocation(\"blank.gif\") + \")\";\n        }\n\n        if (this.isFixed) {\n            this.map.viewPortDiv.appendChild(this.pane);\n        } else {\n            this.map.layerContainerDiv.appendChild(this.pane);\n        }\n\n        // once our layer has been added to the map, we can load it\n        this.loadMapObject();\n    \n        // if map didn't load, display warning\n        if (this.mapObject == null) {\n            this.loadWarningMessage();\n        }\n\n        this.map.events.register('zoomstart', this, this.onZoomStart);\n    },\n\n    /**\n     * APIMethod: removeMap\n     * On being removed from the map, we'll like to remove the invisible 'pane'\n     *     div that we added to it on creation. \n     * \n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    removeMap: function(map) {\n        this.map.events.unregister('zoomstart', this, this.onZoomStart);\n\n        if (this.pane && this.pane.parentNode) {\n            this.pane.parentNode.removeChild(this.pane);\n        }\n        OpenLayers.Layer.prototype.removeMap.apply(this, arguments);\n    },\n\n    /**\n     * Method: onZoomStart\n     *\n     * Parameters:\n     * evt - zoomstart event object with center and zoom properties.\n     */\n    onZoomStart: function(evt) {\n        if (this.mapObject != null) {\n            var center = this.getMapObjectLonLatFromOLLonLat(evt.center);\n            var zoom = this.getMapObjectZoomFromOLZoom(evt.zoom);\n            this.setMapObjectCenter(center, zoom, false);\n        }\n    },\n  \n    /**\n     * Method: loadWarningMessage\n     * If we can't load the map lib, then display an error message to the \n     *     user and tell them where to go for help.\n     * \n     *     This function sets up the layout for the warning message. Each 3rd\n     *     party layer must implement its own getWarningHTML() function to \n     *     provide the actual warning message.\n     */\n    loadWarningMessage:function() {\n\n        this.div.style.backgroundColor = \"darkblue\";\n\n        var viewSize = this.map.getSize();\n        \n        var msgW = Math.min(viewSize.w, 300);\n        var msgH = Math.min(viewSize.h, 200);\n        var size = new OpenLayers.Size(msgW, msgH);\n\n        var centerPx = new OpenLayers.Pixel(viewSize.w/2, viewSize.h/2);\n\n        var topLeft = centerPx.add(-size.w/2, -size.h/2);            \n\n        var div = OpenLayers.Util.createDiv(this.name + \"_warning\", \n                                            topLeft, \n                                            size,\n                                            null,\n                                            null,\n                                            null,\n                                            \"auto\");\n\n        div.style.padding = \"7px\";\n        div.style.backgroundColor = \"yellow\";\n\n        div.innerHTML = this.getWarningHTML();\n        this.div.appendChild(div);\n    },\n  \n    /** \n     * Method: getWarningHTML\n     * To be implemented by subclasses.\n     * \n     * Returns:\n     * {String} String with information on why layer is broken, how to get\n     *          it working.\n     */\n    getWarningHTML:function() {\n        //should be implemented by subclasses\n        return \"\";\n    },\n  \n    /**\n     * Method: display\n     * Set the display on the pane\n     *\n     * Parameters:\n     * display - {Boolean}\n     */\n    display: function(display) {\n        OpenLayers.Layer.prototype.display.apply(this, arguments);\n        this.pane.style.display = this.div.style.display;\n    },\n  \n    /**\n     * Method: setZIndex\n     * Set the z-index order for the pane.\n     * \n     * Parameters:\n     * zIndex - {int}\n     */\n    setZIndex: function (zIndex) {\n        OpenLayers.Layer.prototype.setZIndex.apply(this, arguments);\n        this.pane.style.zIndex = parseInt(this.div.style.zIndex) + 1;\n    },\n    \n    /**\n     * Method: moveByPx\n     * Move the layer based on pixel vector. To be implemented by subclasses.\n     *\n     * Parameters:\n     * dx - {Number} The x coord of the displacement vector.\n     * dy - {Number} The y coord of the displacement vector.\n     */\n    moveByPx: function(dx, dy) {\n        OpenLayers.Layer.prototype.moveByPx.apply(this, arguments);\n        \n        if (this.dragPanMapObject) {\n            this.dragPanMapObject(dx, -dy);\n        } else {\n            this.moveTo(this.map.getCachedCenter());\n        }\n    },\n\n    /**\n     * Method: moveTo\n     * Handle calls to move the layer.\n     * \n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     * zoomChanged - {Boolean}\n     * dragging - {Boolean}\n     */\n    moveTo:function(bounds, zoomChanged, dragging) {\n        OpenLayers.Layer.prototype.moveTo.apply(this, arguments);\n\n        if (this.mapObject != null) {\n\n            var newCenter = this.map.getCenter();\n            var newZoom = this.map.getZoom();\n\n            if (newCenter != null) {\n\n                var moOldCenter = this.getMapObjectCenter();\n                var oldCenter = this.getOLLonLatFromMapObjectLonLat(moOldCenter);\n\n                var moOldZoom = this.getMapObjectZoom();\n                var oldZoom= this.getOLZoomFromMapObjectZoom(moOldZoom);\n\n                if (!(newCenter.equals(oldCenter)) || newZoom != oldZoom) {\n\n                    if (!zoomChanged && oldCenter && this.dragPanMapObject && \n                        this.smoothDragPan) {\n                        var oldPx = this.map.getViewPortPxFromLonLat(oldCenter);\n                        var newPx = this.map.getViewPortPxFromLonLat(newCenter);\n                        this.dragPanMapObject(newPx.x-oldPx.x, oldPx.y-newPx.y);\n                    } else {\n                        var center = this.getMapObjectLonLatFromOLLonLat(newCenter);\n                        var zoom = this.getMapObjectZoomFromOLZoom(newZoom);\n                        this.setMapObjectCenter(center, zoom, dragging);\n                    }\n                }\n            }\n        }\n    },\n\n\n  /********************************************************/\n  /*                                                      */\n  /*                 Baselayer Functions                  */\n  /*                                                      */\n  /********************************************************/\n\n    /**\n     * Method: getLonLatFromViewPortPx\n     * Get a map location from a pixel location\n     * \n     * Parameters:\n     * viewPortPx - {<OpenLayers.Pixel>}\n     *\n     * Returns:\n     *  {<OpenLayers.LonLat>} An OpenLayers.LonLat which is the passed-in view\n     *  port OpenLayers.Pixel, translated into lon/lat by map lib\n     *  If the map lib is not loaded or not centered, returns null\n     */\n    getLonLatFromViewPortPx: function (viewPortPx) {\n        var lonlat = null;\n        if ( (this.mapObject != null) && \n             (this.getMapObjectCenter() != null) ) {\n            var moPixel = this.getMapObjectPixelFromOLPixel(viewPortPx);\n            var moLonLat = this.getMapObjectLonLatFromMapObjectPixel(moPixel);\n            lonlat = this.getOLLonLatFromMapObjectLonLat(moLonLat);\n        }\n        return lonlat;\n    },\n\n \n    /**\n     * Method: getViewPortPxFromLonLat\n     * Get a pixel location from a map location\n     *\n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>}\n     *\n     * Returns:\n     * {<OpenLayers.Pixel>} An OpenLayers.Pixel which is the passed-in\n     * OpenLayers.LonLat, translated into view port pixels by map lib\n     * If map lib is not loaded or not centered, returns null\n     */\n    getViewPortPxFromLonLat: function (lonlat) {\n        var viewPortPx = null;\n        if ( (this.mapObject != null) && \n             (this.getMapObjectCenter() != null) ) {\n\n            var moLonLat = this.getMapObjectLonLatFromOLLonLat(lonlat);\n            var moPixel = this.getMapObjectPixelFromMapObjectLonLat(moLonLat);\n        \n            viewPortPx = this.getOLPixelFromMapObjectPixel(moPixel);\n        }\n        return viewPortPx;\n    },\n\n  /********************************************************/\n  /*                                                      */\n  /*               Translation Functions                  */\n  /*                                                      */\n  /*   The following functions translate Map Object and   */\n  /*            OL formats for Pixel, LonLat              */\n  /*                                                      */\n  /********************************************************/\n\n  //\n  // TRANSLATION: MapObject LatLng <-> OpenLayers.LonLat\n  //\n\n    /**\n     * Method: getOLLonLatFromMapObjectLonLat\n     * Get an OL style map location from a 3rd party style map location\n     *\n     * Parameters\n     * moLonLat - {Object}\n     * \n     * Returns:\n     * {<OpenLayers.LonLat>} An OpenLayers.LonLat, translated from the passed in \n     *          MapObject LonLat\n     *          Returns null if null value is passed in\n     */\n    getOLLonLatFromMapObjectLonLat: function(moLonLat) {\n        var olLonLat = null;\n        if (moLonLat != null) {\n            var lon = this.getLongitudeFromMapObjectLonLat(moLonLat);\n            var lat = this.getLatitudeFromMapObjectLonLat(moLonLat);\n            olLonLat = new OpenLayers.LonLat(lon, lat);\n        }\n        return olLonLat;\n    },\n\n    /**\n     * Method: getMapObjectLonLatFromOLLonLat\n     * Get a 3rd party map location from an OL map location.\n     *\n     * Parameters:\n     * olLonLat - {<OpenLayers.LonLat>}\n     * \n     * Returns:\n     * {Object} A MapObject LonLat, translated from the passed in \n     *          OpenLayers.LonLat\n     *          Returns null if null value is passed in\n     */\n    getMapObjectLonLatFromOLLonLat: function(olLonLat) {\n        var moLatLng = null;\n        if (olLonLat != null) {\n            moLatLng = this.getMapObjectLonLatFromLonLat(olLonLat.lon,\n                                                         olLonLat.lat);\n        }\n        return moLatLng;\n    },\n\n\n  //\n  // TRANSLATION: MapObject Pixel <-> OpenLayers.Pixel\n  //\n\n    /**\n     * Method: getOLPixelFromMapObjectPixel\n     * Get an OL pixel location from a 3rd party pixel location.\n     *\n     * Parameters:\n     * moPixel - {Object}\n     * \n     * Returns:\n     * {<OpenLayers.Pixel>} An OpenLayers.Pixel, translated from the passed in \n     *          MapObject Pixel\n     *          Returns null if null value is passed in\n     */\n    getOLPixelFromMapObjectPixel: function(moPixel) {\n        var olPixel = null;\n        if (moPixel != null) {\n            var x = this.getXFromMapObjectPixel(moPixel);\n            var y = this.getYFromMapObjectPixel(moPixel);\n            olPixel = new OpenLayers.Pixel(x, y);\n        }\n        return olPixel;\n    },\n\n    /**\n     * Method: getMapObjectPixelFromOLPixel\n     * Get a 3rd party pixel location from an OL pixel location\n     *\n     * Parameters:\n     * olPixel - {<OpenLayers.Pixel>}\n     * \n     * Returns:\n     * {Object} A MapObject Pixel, translated from the passed in \n     *          OpenLayers.Pixel\n     *          Returns null if null value is passed in\n     */\n    getMapObjectPixelFromOLPixel: function(olPixel) {\n        var moPixel = null;\n        if (olPixel != null) {\n            moPixel = this.getMapObjectPixelFromXY(olPixel.x, olPixel.y);\n        }\n        return moPixel;\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.EventPane\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Layer.js\n */\n\n/**\n * Class: OpenLayers.Layer.FixedZoomLevels\n *   Some Layers will already have established zoom levels (like google \n *    or ve). Instead of trying to determine them and populate a resolutions[]\n *    Array with those values, we will hijack the resolution functionality\n *    here.\n * \n *   When you subclass FixedZoomLevels: \n * \n *   The initResolutions() call gets nullified, meaning no resolutions[] array \n *    is set up. Which would be a big problem getResolution() in Layer, since \n *    it merely takes map.zoom and indexes into resolutions[]... but....\n * \n *   The getResolution() call is also overridden. Instead of using the \n *    resolutions[] array, we simply calculate the current resolution based\n *    on the current extent and the current map size. But how will we be able\n *    to calculate the current extent without knowing the resolution...?\n *  \n *   The getExtent() function is also overridden. Instead of calculating extent\n *    based on the center point and the current resolution, we instead \n *    calculate the extent by getting the lonlats at the top-left and \n *    bottom-right by using the getLonLatFromViewPortPx() translation function,\n *    taken from the pixel locations (0,0) and the size of the map. But how \n *    will we be able to do lonlat-px translation without resolution....?\n * \n *   The getZoomForResolution() method is overridden. Instead of indexing into\n *    the resolutions[] array, we call OpenLayers.Layer.getExent(), passing in\n *    the desired resolution. With this extent, we then call getZoomForExtent() \n * \n * \n *   Whenever you implement a layer using OpenLayers.Layer.FixedZoomLevels, \n *    it is your responsibility to provide the following three functions:\n * \n *   - getLonLatFromViewPortPx\n *   - getViewPortPxFromLonLat\n *   - getZoomForExtent\n * \n *  ...those three functions should generally be provided by any reasonable \n *  API that you might be working from.\n *\n */\nOpenLayers.Layer.FixedZoomLevels = OpenLayers.Class({\n      \n  /********************************************************/\n  /*                                                      */\n  /*                 Baselayer Functions                  */\n  /*                                                      */\n  /*    The following functions must all be implemented   */\n  /*                  by all base layers                  */\n  /*                                                      */\n  /********************************************************/\n    \n    /**\n     * Constructor: OpenLayers.Layer.FixedZoomLevels\n     * Create a new fixed zoom levels layer.\n     */\n    initialize: function() {\n        //this class is only just to add the following functions... \n        // nothing to actually do here... but it is probably a good\n        // idea to have layers that use these functions call this \n        // inititalize() anyways, in case at some point we decide we \n        // do want to put some functionality or state in here. \n    },\n    \n    /**\n     * Method: initResolutions\n     * Populate the resolutions array\n     */\n    initResolutions: function() {\n\n        var props = ['minZoomLevel', 'maxZoomLevel', 'numZoomLevels'];\n          \n        for(var i=0, len=props.length; i<len; i++) {\n            var property = props[i];\n            this[property] = (this.options[property] != null)  \n                                     ? this.options[property] \n                                     : this.map[property];\n        }\n\n        if ( (this.minZoomLevel == null) ||\n             (this.minZoomLevel < this.MIN_ZOOM_LEVEL) ){\n            this.minZoomLevel = this.MIN_ZOOM_LEVEL;\n        }        \n\n        //\n        // At this point, we know what the minimum desired zoom level is, and\n        //  we must calculate the total number of zoom levels. \n        //  \n        //  Because we allow for the setting of either the 'numZoomLevels'\n        //   or the 'maxZoomLevel' properties... on either the layer or the  \n        //   map, we have to define some rules to see which we take into\n        //   account first in this calculation. \n        //\n        // The following is the precedence list for these properties:\n        // \n        // (1) numZoomLevels set on layer\n        // (2) maxZoomLevel set on layer\n        // (3) numZoomLevels set on map\n        // (4) maxZoomLevel set on map*\n        // (5) none of the above*\n        //\n        // *Note that options (4) and (5) are only possible if the user \n        //  _explicitly_ sets the 'numZoomLevels' property on the map to \n        //  null, since it is set by default to 16. \n        //\n\n        //\n        // Note to future: In 3.0, I think we should remove the default \n        // value of 16 for map.numZoomLevels. Rather, I think that value \n        // should be set as a default on the Layer.WMS class. If someone\n        // creates a 3rd party layer and does not specify any 'minZoomLevel', \n        // 'maxZoomLevel', or 'numZoomLevels', and has not explicitly \n        // specified any of those on the map object either.. then I think\n        // it is fair to say that s/he wants all the zoom levels available.\n        // \n        // By making map.numZoomLevels *null* by default, that will be the \n        // case. As it is, I don't feel comfortable changing that right now\n        // as it would be a glaring API change and actually would probably\n        // break many peoples' codes. \n        //\n\n        //the number of zoom levels we'd like to have.\n        var desiredZoomLevels;\n\n        //this is the maximum number of zoom levels the layer will allow, \n        // given the specified starting minimum zoom level.\n        var limitZoomLevels = this.MAX_ZOOM_LEVEL - this.minZoomLevel + 1;\n\n        if ( ((this.options.numZoomLevels == null) && \n              (this.options.maxZoomLevel != null)) // (2)\n              ||\n             ((this.numZoomLevels == null) &&\n              (this.maxZoomLevel != null)) // (4)\n           ) {\n            //calculate based on specified maxZoomLevel (on layer or map)\n            desiredZoomLevels = this.maxZoomLevel - this.minZoomLevel + 1;\n        } else {\n            //calculate based on specified numZoomLevels (on layer or map)\n            // this covers cases (1) and (3)\n            desiredZoomLevels = this.numZoomLevels;\n        }\n\n        if (desiredZoomLevels != null) {\n            //Now that we know what we would *like* the number of zoom levels\n            // to be, based on layer or map options, we have to make sure that\n            // it does not conflict with the actual limit, as specified by \n            // the constants on the layer itself (and calculated into the\n            // 'limitZoomLevels' variable). \n            this.numZoomLevels = Math.min(desiredZoomLevels, limitZoomLevels);\n        } else {\n            // case (5) -- neither 'numZoomLevels' not 'maxZoomLevel' was \n            // set on either the layer or the map. So we just use the \n            // maximum limit as calculated by the layer's constants.\n            this.numZoomLevels = limitZoomLevels;\n        }\n\n        //now that the 'numZoomLevels' is appropriately, safely set, \n        // we go back and re-calculate the 'maxZoomLevel'.\n        this.maxZoomLevel = this.minZoomLevel + this.numZoomLevels - 1;\n\n        if (this.RESOLUTIONS != null) {\n            var resolutionsIndex = 0;\n            this.resolutions = [];\n            for(var i= this.minZoomLevel; i <= this.maxZoomLevel; i++) {\n                this.resolutions[resolutionsIndex++] = this.RESOLUTIONS[i];            \n            }\n            this.maxResolution = this.resolutions[0];\n            this.minResolution = this.resolutions[this.resolutions.length - 1];\n        }       \n    },\n    \n    /**\n     * APIMethod: getResolution\n     * Get the current map resolution\n     * \n     * Returns:\n     * {Float} Map units per Pixel\n     */\n    getResolution: function() {\n\n        if (this.resolutions != null) {\n            return OpenLayers.Layer.prototype.getResolution.apply(this, arguments);\n        } else {\n            var resolution = null;\n            \n            var viewSize = this.map.getSize();\n            var extent = this.getExtent();\n            \n            if ((viewSize != null) && (extent != null)) {\n                resolution = Math.max( extent.getWidth()  / viewSize.w,\n                                       extent.getHeight() / viewSize.h );\n            }\n            return resolution;\n        }\n     },\n\n    /**\n     * APIMethod: getExtent\n     * Calculates using px-> lonlat translation functions on tl and br \n     *     corners of viewport\n     * \n     * Returns:\n     * {<OpenLayers.Bounds>} A Bounds object which represents the lon/lat \n     *                       bounds of the current viewPort.\n     */\n    getExtent: function () {\n        var size = this.map.getSize();\n        var tl = this.getLonLatFromViewPortPx({\n            x: 0, y: 0\n        });\n        var br = this.getLonLatFromViewPortPx({\n            x: size.w, y: size.h\n        });\n        \n        if ((tl != null) && (br != null)) {\n            return new OpenLayers.Bounds(tl.lon, br.lat, br.lon, tl.lat);\n        } else {\n            return null;\n        }\n    },\n\n    /**\n     * Method: getZoomForResolution\n     * Get the zoom level for a given resolution\n     *\n     * Parameters:\n     * resolution - {Float}\n     *\n     * Returns:\n     * {Integer} A suitable zoom level for the specified resolution.\n     *           If no baselayer is set, returns null.\n     */\n    getZoomForResolution: function(resolution) {\n      \n        if (this.resolutions != null) {\n            return OpenLayers.Layer.prototype.getZoomForResolution.apply(this, arguments);\n        } else {\n            var extent = OpenLayers.Layer.prototype.getExtent.apply(this, []);\n            return this.getZoomForExtent(extent);\n        }\n    },\n\n\n\n    \n    /********************************************************/\n    /*                                                      */\n    /*             Translation Functions                    */\n    /*                                                      */\n    /*    The following functions translate GMaps and OL    */ \n    /*     formats for Pixel, LonLat, Bounds, and Zoom      */\n    /*                                                      */\n    /********************************************************/\n    \n    \n    //\n    // TRANSLATION: MapObject Zoom <-> OpenLayers Zoom\n    //\n  \n    /**\n     * Method: getOLZoomFromMapObjectZoom\n     * Get the OL zoom index from the map object zoom level\n     *\n     * Parameters:\n     * moZoom - {Integer}\n     * \n     * Returns:\n     * {Integer} An OpenLayers Zoom level, translated from the passed in zoom\n     *           Returns null if null value is passed in\n     */\n    getOLZoomFromMapObjectZoom: function(moZoom) {\n        var zoom = null;\n        if (moZoom != null) {\n            zoom = moZoom - this.minZoomLevel;\n            if (this.map.baseLayer !== this) {\n                zoom = this.map.baseLayer.getZoomForResolution(\n                    this.getResolutionForZoom(zoom)\n                );\n            }\n        }\n        return zoom;\n    },\n    \n    /**\n     * Method: getMapObjectZoomFromOLZoom\n     * Get the map object zoom level from the OL zoom level\n     *\n     * Parameters:\n     * olZoom - {Integer}\n     * \n     * Returns:\n     * {Integer} A MapObject level, translated from the passed in olZoom\n     *           Returns null if null value is passed in\n     */\n    getMapObjectZoomFromOLZoom: function(olZoom) {\n        var zoom = null; \n        if (olZoom != null) {\n            zoom = olZoom + this.minZoomLevel;\n            if (this.map.baseLayer !== this) {\n                zoom = this.getZoomForResolution(\n                    this.map.baseLayer.getResolutionForZoom(zoom)\n                );\n            }\n        }\n        return zoom;\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.FixedZoomLevels\"\n});\n\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Layer/SphericalMercator.js\n * @requires OpenLayers/Layer/EventPane.js\n * @requires OpenLayers/Layer/FixedZoomLevels.js\n * @requires OpenLayers/Lang.js\n */\n\n/**\n * Class: OpenLayers.Layer.Google\n *\n * Provides a wrapper for Google's Maps API\n * Normally the Terms of Use for this API do not allow wrapping, but Google\n * have provided written consent to OpenLayers for this - see email in\n * http://osgeo-org.1560.n6.nabble.com/Google-Maps-API-Terms-of-Use-changes-tp4910013p4911981.html\n *\n * Inherits from:\n *  - <OpenLayers.Layer.SphericalMercator>\n *  - <OpenLayers.Layer.EventPane>\n *  - <OpenLayers.Layer.FixedZoomLevels>\n */\nOpenLayers.Layer.Google = OpenLayers.Class(\n    OpenLayers.Layer.EventPane,\n    OpenLayers.Layer.FixedZoomLevels, {\n\n    /**\n     * Constant: MIN_ZOOM_LEVEL\n     * {Integer} 0\n     */\n    MIN_ZOOM_LEVEL: 0,\n\n    /**\n     * Constant: MAX_ZOOM_LEVEL\n     * {Integer} 21\n     */\n    MAX_ZOOM_LEVEL: 21,\n\n    /**\n     * Constant: RESOLUTIONS\n     * {Array(Float)} Hardcode these resolutions so that they are more closely\n     *                tied with the standard wms projection\n     */\n    RESOLUTIONS: [\n        1.40625,\n        0.703125,\n        0.3515625,\n        0.17578125,\n        0.087890625,\n        0.0439453125,\n        0.02197265625,\n        0.010986328125,\n        0.0054931640625,\n        0.00274658203125,\n        0.001373291015625,\n        0.0006866455078125,\n        0.00034332275390625,\n        0.000171661376953125,\n        0.0000858306884765625,\n        0.00004291534423828125,\n        0.00002145767211914062,\n        0.00001072883605957031,\n        0.00000536441802978515,\n        0.00000268220901489257,\n        0.0000013411045074462891,\n        0.00000067055225372314453\n    ],\n\n    /**\n     * APIProperty: type\n     * {GMapType}\n     */\n    type: null,\n\n    /**\n     * APIProperty: wrapDateLine\n     * {Boolean} Allow user to pan forever east/west.  Default is true.\n     *     Setting this to false only restricts panning if\n     *     <sphericalMercator> is true.\n     */\n    wrapDateLine: true,\n\n    /**\n     * APIProperty: sphericalMercator\n     * {Boolean} Should the map act as a mercator-projected map? This will\n     *     cause all interactions with the map to be in the actual map\n     *     projection, which allows support for vector drawing, overlaying\n     *     other maps, etc.\n     */\n    sphericalMercator: false,\n\n    /**\n     * APIProperty: useTiltImages\n     * {Boolean} Should Google use 45\u00B0 (tilt) imagery when available or\n     *     should it stick to the 0\u00B0 overhead view? While tilt images look\n     *     impressive, the changed viewing angle can cause the misalignment\n     *     of overlay layers.\n     */\n    useTiltImages: false,\n\n    /**\n     * Property: version\n     * {Number} The version of the Google Maps API\n     */\n    version: null,\n\n    /**\n     * Constructor: OpenLayers.Layer.Google\n     *\n     * Parameters:\n     * name - {String} A name for the layer.\n     * options - {Object} An optional object whose properties will be set\n     *     on the layer.\n     */\n    initialize: function(name, options) {\n        options = options || {};\n        options.version = \"3\";\n        var mixin = OpenLayers.Layer.Google[\"v\" +\n            options.version.replace(/\\./g, \"_\")];\n        if (mixin) {\n            OpenLayers.Util.applyDefaults(options, mixin);\n        } else {\n            throw \"Unsupported Google Maps API version: \" + options.version;\n        }\n\n        OpenLayers.Util.applyDefaults(options, mixin.DEFAULTS);\n        if (options.maxExtent) {\n            options.maxExtent = options.maxExtent.clone();\n        }\n\n        OpenLayers.Layer.EventPane.prototype.initialize.apply(this,\n            [name, options]);\n        OpenLayers.Layer.FixedZoomLevels.prototype.initialize.apply(this,\n            [name, options]);\n\n        if (this.sphericalMercator) {\n            OpenLayers.Util.extend(this, OpenLayers.Layer.SphericalMercator);\n            this.initMercatorParameters();\n        }\n    },\n\n    /**\n     * Method: clone\n     * Create a clone of this layer\n     *\n     * Returns:\n     * {<OpenLayers.Layer.Google>} An exact clone of this layer\n     */\n    clone: function() {\n        /**\n         * This method isn't intended to be called by a subclass and it\n         * doesn't call the same method on the superclass.  We don't call\n         * the super's clone because we don't want properties that are set\n         * on this layer after initialize (i.e. this.mapObject etc.).\n         */\n        return new OpenLayers.Layer.Google(\n            this.name, this.getOptions()\n        );\n    },\n\n    /**\n     * APIMethod: setVisibility\n     * Set the visibility flag for the layer and hide/show & redraw\n     *     accordingly. Fire event unless otherwise specified\n     *\n     * Note that visibility is no longer simply whether or not the layer's\n     *     style.display is set to \"block\". Now we store a 'visibility' state\n     *     property on the layer class, this allows us to remember whether or\n     *     not we *desire* for a layer to be visible. In the case where the\n     *     map's resolution is out of the layer's range, this desire may be\n     *     subverted.\n     *\n     * Parameters:\n     * visible - {Boolean} Display the layer (if in range)\n     */\n    setVisibility: function(visible) {\n        // sharing a map container, opacity has to be set per layer\n        var opacity = this.opacity == null ? 1 : this.opacity;\n        OpenLayers.Layer.EventPane.prototype.setVisibility.apply(this, arguments);\n        this.setOpacity(opacity);\n    },\n\n    /**\n     * APIMethod: display\n     * Hide or show the Layer\n     *\n     * Parameters:\n     * visible - {Boolean}\n     */\n    display: function(visible) {\n        if (!this._dragging) {\n            this.setGMapVisibility(visible);\n        }\n        OpenLayers.Layer.EventPane.prototype.display.apply(this, arguments);\n    },\n\n    /**\n     * Method: moveTo\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     * zoomChanged - {Boolean} Tells when zoom has changed, as layers have to\n     *     do some init work in that case.\n     * dragging - {Boolean}\n     */\n    moveTo: function(bounds, zoomChanged, dragging) {\n        this._dragging = dragging;\n        OpenLayers.Layer.EventPane.prototype.moveTo.apply(this, arguments);\n        delete this._dragging;\n    },\n\n    /**\n     * APIMethod: setOpacity\n     * Sets the opacity for the entire layer (all images)\n     *\n     * Parameters:\n     * opacity - {Float}\n     */\n    setOpacity: function(opacity) {\n        if (opacity !== this.opacity) {\n            if (this.map != null) {\n                this.map.events.triggerEvent(\"changelayer\", {\n                    layer: this,\n                    property: \"opacity\"\n                });\n            }\n            this.opacity = opacity;\n        }\n        // Though this layer's opacity may not change, we're sharing a container\n        // and need to update the opacity for the entire container.\n        if (this.getVisibility()) {\n            var container = this.getMapContainer();\n            OpenLayers.Util.modifyDOMElement(\n                container, null, null, null, null, null, null, opacity\n            );\n        }\n    },\n\n    /**\n     * APIMethod: destroy\n     * Clean up this layer.\n     */\n    destroy: function() {\n        /**\n         * We have to override this method because the event pane destroy\n         * deletes the mapObject reference before removing this layer from\n         * the map.\n         */\n        if (this.map) {\n            this.setGMapVisibility(false);\n            var cache = OpenLayers.Layer.Google.cache[this.map.id];\n            if (cache && cache.count <= 1) {\n                this.removeGMapElements();\n            }\n        }\n        OpenLayers.Layer.EventPane.prototype.destroy.apply(this, arguments);\n    },\n\n    /**\n     * Method: removeGMapElements\n     * Remove all elements added to the dom.  This should only be called if\n     * this is the last of the Google layers for the given map.\n     */\n    removeGMapElements: function() {\n        var cache = OpenLayers.Layer.Google.cache[this.map.id];\n        if (cache) {\n            // remove shared elements from dom\n            var container = this.mapObject && this.getMapContainer();\n            if (container && container.parentNode) {\n                container.parentNode.removeChild(container);\n            }\n            var termsOfUse = cache.termsOfUse;\n            if (termsOfUse && termsOfUse.parentNode) {\n                termsOfUse.parentNode.removeChild(termsOfUse);\n            }\n            var poweredBy = cache.poweredBy;\n            if (poweredBy && poweredBy.parentNode) {\n                poweredBy.parentNode.removeChild(poweredBy);\n            }\n            if (this.mapObject && window.google && google.maps &&\n                    google.maps.event && google.maps.event.clearListeners) {\n                google.maps.event.clearListeners(this.mapObject, 'tilesloaded');\n            }\n        }\n    },\n\n    /**\n     * APIMethod: removeMap\n     * On being removed from the map, also remove termsOfUse and poweredBy divs\n     *\n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    removeMap: function(map) {\n        // hide layer before removing\n        if (this.visibility && this.mapObject) {\n            this.setGMapVisibility(false);\n        }\n        // check to see if last Google layer in this map\n        var cache = OpenLayers.Layer.Google.cache[map.id];\n        if (cache) {\n            if (cache.count <= 1) {\n                this.removeGMapElements();\n                delete OpenLayers.Layer.Google.cache[map.id];\n            } else {\n                // decrement the layer count\n                --cache.count;\n            }\n        }\n        // remove references to gmap elements\n        delete this.termsOfUse;\n        delete this.poweredBy;\n        delete this.mapObject;\n        delete this.dragObject;\n        OpenLayers.Layer.EventPane.prototype.removeMap.apply(this, arguments);\n    },\n\n  //\n  // TRANSLATION: MapObject Bounds <-> OpenLayers.Bounds\n  //\n\n    /**\n     * APIMethod: getOLBoundsFromMapObjectBounds\n     *\n     * Parameters:\n     * moBounds - {Object}\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>} An <OpenLayers.Bounds>, translated from the\n     *                       passed-in MapObject Bounds.\n     *                       Returns null if null value is passed in.\n     */\n    getOLBoundsFromMapObjectBounds: function(moBounds) {\n        var olBounds = null;\n        if (moBounds != null) {\n            var sw = moBounds.getSouthWest();\n            var ne = moBounds.getNorthEast();\n            if (this.sphericalMercator) {\n                sw = this.forwardMercator(sw.lng(), sw.lat());\n                ne = this.forwardMercator(ne.lng(), ne.lat());\n            } else {\n                sw = new OpenLayers.LonLat(sw.lng(), sw.lat());\n                ne = new OpenLayers.LonLat(ne.lng(), ne.lat());\n            }\n            olBounds = new OpenLayers.Bounds(sw.lon,\n                                             sw.lat,\n                                             ne.lon,\n                                             ne.lat );\n        }\n        return olBounds;\n    },\n\n    /**\n     * APIMethod: getWarningHTML\n     *\n     * Returns:\n     * {String} String with information on why layer is broken, how to get\n     *          it working.\n     */\n    getWarningHTML:function() {\n        return OpenLayers.i18n(\"googleWarning\");\n    },\n\n\n    /************************************\n     *                                  *\n     *   MapObject Interface Controls   *\n     *                                  *\n     ************************************/\n\n\n  // Get&Set Center, Zoom\n\n    /**\n     * APIMethod: getMapObjectCenter\n     *\n     * Returns:\n     * {Object} The mapObject's current center in Map Object format\n     */\n    getMapObjectCenter: function() {\n        return this.mapObject.getCenter();\n    },\n\n    /**\n     * APIMethod: getMapObjectZoom\n     *\n     * Returns:\n     * {Integer} The mapObject's current zoom, in Map Object format\n     */\n    getMapObjectZoom: function() {\n        return this.mapObject.getZoom();\n    },\n\n\n    /************************************\n     *                                  *\n     *       MapObject Primitives       *\n     *                                  *\n     ************************************/\n\n\n  // LonLat\n\n    /**\n     * APIMethod: getLongitudeFromMapObjectLonLat\n     *\n     * Parameters:\n     * moLonLat - {Object} MapObject LonLat format\n     *\n     * Returns:\n     * {Float} Longitude of the given MapObject LonLat\n     */\n    getLongitudeFromMapObjectLonLat: function(moLonLat) {\n        return this.sphericalMercator ?\n          this.forwardMercator(moLonLat.lng(), moLonLat.lat()).lon :\n          moLonLat.lng();\n    },\n\n    /**\n     * APIMethod: getLatitudeFromMapObjectLonLat\n     *\n     * Parameters:\n     * moLonLat - {Object} MapObject LonLat format\n     *\n     * Returns:\n     * {Float} Latitude of the given MapObject LonLat\n     */\n    getLatitudeFromMapObjectLonLat: function(moLonLat) {\n        var lat = this.sphericalMercator ?\n          this.forwardMercator(moLonLat.lng(), moLonLat.lat()).lat :\n          moLonLat.lat();\n        return lat;\n    },\n\n  // Pixel\n\n    /**\n     * APIMethod: getXFromMapObjectPixel\n     *\n     * Parameters:\n     * moPixel - {Object} MapObject Pixel format\n     *\n     * Returns:\n     * {Integer} X value of the MapObject Pixel\n     */\n    getXFromMapObjectPixel: function(moPixel) {\n        return moPixel.x;\n    },\n\n    /**\n     * APIMethod: getYFromMapObjectPixel\n     *\n     * Parameters:\n     * moPixel - {Object} MapObject Pixel format\n     *\n     * Returns:\n     * {Integer} Y value of the MapObject Pixel\n     */\n    getYFromMapObjectPixel: function(moPixel) {\n        return moPixel.y;\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.Google\"\n});\n\n/**\n * Property: OpenLayers.Layer.Google.cache\n * {Object} Cache for elements that should only be created once per map.\n */\nOpenLayers.Layer.Google.cache = {};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Layer/Google.js\n */\n\n/**\n * Constant: OpenLayers.Layer.Google.v3\n *\n * Mixin providing functionality specific to the Google Maps API v3.\n *\n * To use this layer, you must include the GMaps v3 API in your html. To match\n * Google's zoom animation better with OpenLayers animated zooming, configure\n * your map with a zoomDuration of 10:\n *\n * (code)\n * new OpenLayers.Map('map', {zoomDuration: 10});\n * (end)\n *\n * Note that this layer configures the google.maps.map object with the\n * \"disableDefaultUI\" option set to true. Using UI controls that the Google\n * Maps API provides is not supported by the OpenLayers API.\n */\nOpenLayers.Layer.Google.v3 = {\n\n    /**\n     * Constant: DEFAULTS\n     * {Object} It is not recommended to change the properties set here. Note\n     * that Google.v3 layers only work when sphericalMercator is set to true.\n     *\n     * (code)\n     * {\n     *     sphericalMercator: true,\n     *     projection: \"EPSG:900913\"\n     * }\n     * (end)\n     */\n    DEFAULTS: {\n        sphericalMercator: true,\n        projection: \"EPSG:900913\"\n    },\n\n    /**\n     * APIProperty: animationEnabled\n     * {Boolean} If set to true, the transition between zoom levels will be\n     *     animated (if supported by the GMaps API for the device used). Set to\n     *     false to match the zooming experience of other layer types. Default\n     *     is true. Note that the GMaps API does not give us control over zoom\n     *     animation, so if set to false, when zooming, this will make the\n     *     layer temporarily invisible, wait until GMaps reports the map being\n     *     idle, and make it visible again. The result will be a blank layer\n     *     for a few moments while zooming.\n     */\n    animationEnabled: true,\n\n    /**\n     * Method: loadMapObject\n     * Load the GMap and register appropriate event listeners.\n     */\n    loadMapObject: function() {\n        if (!this.type) {\n            this.type = google.maps.MapTypeId.ROADMAP;\n        }\n        var mapObject;\n        var cache = OpenLayers.Layer.Google.cache[this.map.id];\n        if (cache) {\n            // there are already Google layers added to this map\n            mapObject = cache.mapObject;\n            // increment the layer count\n            ++cache.count;\n        } else {\n            // this is the first Google layer for this map\n            // create GMap\n            var center = this.map.getCenter();\n            var container = document.createElement('div');\n            container.className = \"olForeignContainer\";\n            container.style.width = '100%';\n            container.style.height = '100%';\n            mapObject = new google.maps.Map(container, {\n                center: center ?\n                    new google.maps.LatLng(center.lat, center.lon) :\n                    new google.maps.LatLng(0, 0),\n                zoom: this.map.getZoom() || 0,\n                mapTypeId: this.type,\n                disableDefaultUI: true,\n                keyboardShortcuts: false,\n                draggable: false,\n                disableDoubleClickZoom: true,\n                scrollwheel: false,\n                streetViewControl: false,\n                tilt: (this.useTiltImages ? 45: 0)\n            });\n            var googleControl = document.createElement('div');\n            googleControl.style.width = '100%';\n            googleControl.style.height = '100%';\n            mapObject.controls[google.maps.ControlPosition.TOP_LEFT].push(googleControl);\n\n            // cache elements for use by any other google layers added to\n            // this same map\n            cache = {\n                googleControl: googleControl,\n                mapObject: mapObject,\n                count: 1\n            };\n            OpenLayers.Layer.Google.cache[this.map.id] = cache;\n        }\n        this.mapObject = mapObject;\n        this.setGMapVisibility(this.visibility);\n    },\n\n    /**\n     * APIMethod: onMapResize\n     */\n    onMapResize: function() {\n        if (this.visibility) {\n            google.maps.event.trigger(this.mapObject, \"resize\");\n        }\n    },\n\n    /**\n     * Method: setGMapVisibility\n     * Display the GMap container and associated elements.\n     *\n     * Parameters:\n     * visible - {Boolean} Display the GMap elements.\n     */\n    setGMapVisibility: function(visible) {\n        var cache = OpenLayers.Layer.Google.cache[this.map.id];\n        var map = this.map;\n        if (cache) {\n            var type = this.type;\n            var layers = map.layers;\n            var layer;\n            for (var i=layers.length-1; i>=0; --i) {\n                layer = layers[i];\n                if (layer instanceof OpenLayers.Layer.Google &&\n                            layer.visibility === true && layer.inRange === true) {\n                    type = layer.type;\n                    visible = true;\n                    break;\n                }\n            }\n            var container = this.mapObject.getDiv();\n            if (visible === true) {\n                if (container.parentNode !== map.div) {\n                    if (!cache.rendered) {\n                        container.style.visibility = 'hidden';\n                        var me = this;\n                        google.maps.event.addListenerOnce(this.mapObject, 'tilesloaded', function() {\n                            cache.rendered = true;\n                            container.style.visibility = '';\n                            me.setGMapVisibility(true);\n                            me.moveTo(me.map.getCenter());\n                            cache.googleControl.appendChild(map.viewPortDiv);\n                            me.setGMapVisibility(me.visible);\n                        });\n                    } else {\n                        cache.googleControl.appendChild(map.viewPortDiv);\n                    }\n                    map.div.appendChild(container);\n                    google.maps.event.trigger(this.mapObject, 'resize');\n                }\n                this.mapObject.setMapTypeId(type);\n            } else if (cache.googleControl.hasChildNodes()) {\n                map.div.appendChild(map.viewPortDiv);\n                if (map.div.contains(container)) {\n                    map.div.removeChild(container);\n                }\n            }\n        }\n    },\n\n    /**\n     * Method: getMapContainer\n     *\n     * Returns:\n     * {DOMElement} the GMap container's div\n     */\n    getMapContainer: function() {\n        return this.mapObject.getDiv();\n    },\n\n  //\n  // TRANSLATION: MapObject Bounds <-> OpenLayers.Bounds\n  //\n\n    /**\n     * APIMethod: getMapObjectBoundsFromOLBounds\n     *\n     * Parameters:\n     * olBounds - {<OpenLayers.Bounds>}\n     *\n     * Returns:\n     * {Object} A MapObject Bounds, translated from olBounds\n     *          Returns null if null value is passed in\n     */\n    getMapObjectBoundsFromOLBounds: function(olBounds) {\n        var moBounds = null;\n        if (olBounds != null) {\n            var sw = this.sphericalMercator ?\n              this.inverseMercator(olBounds.bottom, olBounds.left) :\n              new OpenLayers.LonLat(olBounds.bottom, olBounds.left);\n            var ne = this.sphericalMercator ?\n              this.inverseMercator(olBounds.top, olBounds.right) :\n              new OpenLayers.LonLat(olBounds.top, olBounds.right);\n            moBounds = new google.maps.LatLngBounds(\n                new google.maps.LatLng(sw.lat, sw.lon),\n                new google.maps.LatLng(ne.lat, ne.lon)\n            );\n        }\n        return moBounds;\n    },\n\n\n    /************************************\n     *                                  *\n     *   MapObject Interface Controls   *\n     *                                  *\n     ************************************/\n\n\n  // LonLat - Pixel Translation\n\n    /**\n     * APIMethod: getMapObjectLonLatFromMapObjectPixel\n     *\n     * Parameters:\n     * moPixel - {Object} MapObject Pixel format\n     *\n     * Returns:\n     * {Object} MapObject LonLat translated from MapObject Pixel\n     */\n    getMapObjectLonLatFromMapObjectPixel: function(moPixel) {\n        var size = this.map.getSize();\n        var lon = this.getLongitudeFromMapObjectLonLat(this.mapObject.center);\n        var lat = this.getLatitudeFromMapObjectLonLat(this.mapObject.center);\n        var res = this.map.getResolution();\n\n        var delta_x = moPixel.x - (size.w / 2);\n        var delta_y = moPixel.y - (size.h / 2);\n\n        var lonlat = new OpenLayers.LonLat(\n            lon + delta_x * res,\n            lat - delta_y * res\n        );\n\n        if (this.wrapDateLine) {\n            lonlat = lonlat.wrapDateLine(this.maxExtent);\n        }\n        return this.getMapObjectLonLatFromLonLat(lonlat.lon, lonlat.lat);\n    },\n\n    /**\n     * APIMethod: getMapObjectPixelFromMapObjectLonLat\n     *\n     * Parameters:\n     * moLonLat - {Object} MapObject LonLat format\n     *\n     * Returns:\n     * {Object} MapObject Pixel transtlated from MapObject LonLat\n     */\n    getMapObjectPixelFromMapObjectLonLat: function(moLonLat) {\n        var lon = this.getLongitudeFromMapObjectLonLat(moLonLat);\n        var lat = this.getLatitudeFromMapObjectLonLat(moLonLat);\n        var res = this.map.getResolution();\n        var extent = this.map.getExtent();\n        return this.getMapObjectPixelFromXY((1/res * (lon - extent.left)),\n                                            (1/res * (extent.top - lat)));\n    },\n\n\n    /**\n     * APIMethod: setMapObjectCenter\n     * Set the mapObject to the specified center and zoom\n     *\n     * Parameters:\n     * center - {Object} MapObject LonLat format\n     * zoom - {int} MapObject zoom format\n     */\n    setMapObjectCenter: function(center, zoom) {\n        if (this.animationEnabled === false && zoom != this.mapObject.zoom) {\n            var mapContainer = this.getMapContainer();\n            google.maps.event.addListenerOnce(\n                this.mapObject,\n                \"idle\",\n                function() {\n                    mapContainer.style.visibility = \"\";\n                }\n            );\n            mapContainer.style.visibility = \"hidden\";\n        }\n        this.mapObject.setOptions({\n            center: center,\n            zoom: zoom\n        });\n    },\n\n\n  // Bounds\n\n    /**\n     * APIMethod: getMapObjectZoomFromMapObjectBounds\n     *\n     * Parameters:\n     * moBounds - {Object} MapObject Bounds format\n     *\n     * Returns:\n     * {Object} MapObject Zoom for specified MapObject Bounds\n     */\n    getMapObjectZoomFromMapObjectBounds: function(moBounds) {\n        return this.mapObject.getBoundsZoomLevel(moBounds);\n    },\n\n    /************************************\n     *                                  *\n     *       MapObject Primitives       *\n     *                                  *\n     ************************************/\n\n\n  // LonLat\n\n    /**\n     * APIMethod: getMapObjectLonLatFromLonLat\n     *\n     * Parameters:\n     * lon - {Float}\n     * lat - {Float}\n     *\n     * Returns:\n     * {Object} MapObject LonLat built from lon and lat params\n     */\n    getMapObjectLonLatFromLonLat: function(lon, lat) {\n        var gLatLng;\n        if(this.sphericalMercator) {\n            var lonlat = this.inverseMercator(lon, lat);\n            gLatLng = new google.maps.LatLng(lonlat.lat, lonlat.lon);\n        } else {\n            gLatLng = new google.maps.LatLng(lat, lon);\n        }\n        return gLatLng;\n    },\n\n  // Pixel\n\n    /**\n     * APIMethod: getMapObjectPixelFromXY\n     *\n     * Parameters:\n     * x - {Integer}\n     * y - {Integer}\n     *\n     * Returns:\n     * {Object} MapObject Pixel from x and y parameters\n     */\n    getMapObjectPixelFromXY: function(x, y) {\n        return new google.maps.Point(x, y);\n    }\n\n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Layer.js\n */\n\n/**\n * Class: OpenLayers.Layer.HTTPRequest\n * \n * Inherits from: \n *  - <OpenLayers.Layer>\n */\nOpenLayers.Layer.HTTPRequest = OpenLayers.Class(OpenLayers.Layer, {\n\n    /**\n     * APIProperty: events\n     * {<OpenLayers.Events>}\n     *\n     * Supported event types (in addition to those from <OpenLayers.Layer.events>):\n     * refresh - Triggered when a redraw is forced, to re-fetch data from the\n     *     server.\n     */\n\n    /** \n     * Constant: URL_HASH_FACTOR\n     * {Float} Used to hash URL param strings for multi-WMS server selection.\n     *         Set to the Golden Ratio per Knuth's recommendation.\n     */\n    URL_HASH_FACTOR: (Math.sqrt(5) - 1) / 2,\n\n    /** \n     * Property: url\n     * {Array(String) or String} This is either an array of url strings or \n     *                           a single url string. \n     */\n    url: null,\n\n    /** \n     * Property: params\n     * {Object} Hashtable of key/value parameters\n     */\n    params: null,\n    \n    /** \n     * APIProperty: reproject\n     * *Deprecated*. See http://docs.openlayers.org/library/spherical_mercator.html\n     * for information on the replacement for this functionality. \n     * {Boolean} Whether layer should reproject itself based on base layer \n     *           locations. This allows reprojection onto commercial layers. \n     *           Default is false: Most layers can't reproject, but layers \n     *           which can create non-square geographic pixels can, like WMS.\n     *           \n     */\n    reproject: false,\n\n    /**\n     * Constructor: OpenLayers.Layer.HTTPRequest\n     * \n     * Parameters:\n     * name - {String}\n     * url - {Array(String) or String}\n     * params - {Object}\n     * options - {Object} Hashtable of extra options to tag onto the layer\n     */\n    initialize: function(name, url, params, options) {\n        OpenLayers.Layer.prototype.initialize.apply(this, [name, options]);\n        this.url = url;\n        if (!this.params) {\n            this.params = OpenLayers.Util.extend({}, params);\n        }\n    },\n\n    /**\n     * APIMethod: destroy\n     */\n    destroy: function() {\n        this.url = null;\n        this.params = null;\n        OpenLayers.Layer.prototype.destroy.apply(this, arguments); \n    },\n    \n    /**\n     * APIMethod: clone\n     * \n     * Parameters:\n     * obj - {Object}\n     * \n     * Returns:\n     * {<OpenLayers.Layer.HTTPRequest>} An exact clone of this \n     *                                  <OpenLayers.Layer.HTTPRequest>\n     */\n    clone: function (obj) {\n        \n        if (obj == null) {\n            obj = new OpenLayers.Layer.HTTPRequest(this.name,\n                                                   this.url,\n                                                   this.params,\n                                                   this.getOptions());\n        }\n        \n        //get all additions from superclasses\n        obj = OpenLayers.Layer.prototype.clone.apply(this, [obj]);\n\n        // copy/set any non-init, non-simple values here\n        \n        return obj;\n    },\n\n    /** \n     * APIMethod: setUrl\n     * \n     * Parameters:\n     * newUrl - {String}\n     */\n    setUrl: function(newUrl) {\n        this.url = newUrl;\n    },\n\n    /**\n     * APIMethod: mergeNewParams\n     * \n     * Parameters:\n     * newParams - {Object}\n     *\n     * Returns:\n     * redrawn: {Boolean} whether the layer was actually redrawn.\n     */\n    mergeNewParams:function(newParams) {\n        this.params = OpenLayers.Util.extend(this.params, newParams);\n        var ret = this.redraw();\n        if(this.map != null) {\n            this.map.events.triggerEvent(\"changelayer\", {\n                layer: this,\n                property: \"params\"\n            });\n        }\n        return ret;\n    },\n\n    /**\n     * APIMethod: redraw\n     * Redraws the layer.  Returns true if the layer was redrawn, false if not.\n     *\n     * Parameters:\n     * force - {Boolean} Force redraw by adding random parameter.\n     *\n     * Returns:\n     * {Boolean} The layer was redrawn.\n     */\n    redraw: function(force) { \n        if (force) {\n            this.events.triggerEvent('refresh');\n            return this.mergeNewParams({\"_olSalt\": Math.random()});\n        } else {\n            return OpenLayers.Layer.prototype.redraw.apply(this, []);\n        }\n    },\n    \n    /**\n     * Method: selectUrl\n     * selectUrl() implements the standard floating-point multiplicative\n     *     hash function described by Knuth, and hashes the contents of the \n     *     given param string into a float between 0 and 1. This float is then\n     *     scaled to the size of the provided urls array, and used to select\n     *     a URL.\n     *\n     * Parameters:\n     * paramString - {String}\n     * urls - {Array(String)}\n     * \n     * Returns:\n     * {String} An entry from the urls array, deterministically selected based\n     *          on the paramString.\n     */\n    selectUrl: function(paramString, urls) {\n        var product = 1;\n        for (var i=0, len=paramString.length; i<len; i++) { \n            product *= paramString.charCodeAt(i) * this.URL_HASH_FACTOR; \n            product -= Math.floor(product); \n        }\n        return urls[Math.floor(product * urls.length)];\n    },\n\n    /** \n     * Method: getFullRequestString\n     * Combine url with layer's params and these newParams. \n     *   \n     *    does checking on the serverPath variable, allowing for cases when it \n     *     is supplied with trailing ? or &, as well as cases where not. \n     *\n     *    return in formatted string like this:\n     *        \"server?key1=value1&key2=value2&key3=value3\"\n     * \n     * WARNING: The altUrl parameter is deprecated and will be removed in 3.0.\n     *\n     * Parameters:\n     * newParams - {Object}\n     * altUrl - {String} Use this as the url instead of the layer's url\n     *   \n     * Returns: \n     * {String}\n     */\n    getFullRequestString:function(newParams, altUrl) {\n\n        // if not altUrl passed in, use layer's url\n        var url = altUrl || this.url;\n        \n        // create a new params hashtable with all the layer params and the \n        // new params together. then convert to string\n        var allParams = OpenLayers.Util.extend({}, this.params);\n        allParams = OpenLayers.Util.extend(allParams, newParams);\n        var paramsString = OpenLayers.Util.getParameterString(allParams);\n        \n        // if url is not a string, it should be an array of strings, \n        // in which case we will deterministically select one of them in \n        // order to evenly distribute requests to different urls.\n        //\n        if (OpenLayers.Util.isArray(url)) {\n            url = this.selectUrl(paramsString, url);\n        }   \n \n        // ignore parameters that are already in the url search string\n        var urlParams = \n            OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(url));\n        for(var key in allParams) {\n            if(key.toUpperCase() in urlParams) {\n                delete allParams[key];\n            }\n        }\n        paramsString = OpenLayers.Util.getParameterString(allParams);\n        \n        return OpenLayers.Util.urlAppend(url, paramsString);\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.HTTPRequest\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Layer/HTTPRequest.js\n * @requires OpenLayers/Tile/Image.js\n */\n\n/**\n * Class: OpenLayers.Layer.Grid\n * Base class for layers that use a lattice of tiles.  Create a new grid\n * layer with the <OpenLayers.Layer.Grid> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Layer.HTTPRequest>\n */\nOpenLayers.Layer.Grid = OpenLayers.Class(OpenLayers.Layer.HTTPRequest, {\n    \n    /**\n     * APIProperty: tileSize\n     * {<OpenLayers.Size>}\n     */\n    tileSize: null,\n\n    /**\n     * Property: tileOriginCorner\n     * {String} If the <tileOrigin> property is not provided, the tile origin \n     *     will be derived from the layer's <maxExtent>.  The corner of the \n     *     <maxExtent> used is determined by this property.  Acceptable values\n     *     are \"tl\" (top left), \"tr\" (top right), \"bl\" (bottom left), and \"br\"\n     *     (bottom right).  Default is \"bl\".\n     */\n    tileOriginCorner: \"bl\",\n    \n    /**\n     * APIProperty: tileOrigin\n     * {<OpenLayers.LonLat>} Optional origin for aligning the grid of tiles.\n     *     If provided, requests for tiles at all resolutions will be aligned\n     *     with this location (no tiles shall overlap this location).  If\n     *     not provided, the grid of tiles will be aligned with the layer's\n     *     <maxExtent>.  Default is ``null``.\n     */\n    tileOrigin: null,\n    \n    /** APIProperty: tileOptions\n     *  {Object} optional configuration options for <OpenLayers.Tile> instances\n     *  created by this Layer, if supported by the tile class.\n     */\n    tileOptions: null,\n\n    /**\n     * APIProperty: tileClass\n     * {<OpenLayers.Tile>} The tile class to use for this layer.\n     *     Defaults is OpenLayers.Tile.Image.\n     */\n    tileClass: OpenLayers.Tile.Image,\n    \n    /**\n     * Property: grid\n     * {Array(Array(<OpenLayers.Tile>))} This is an array of rows, each row is \n     *     an array of tiles.\n     */\n    grid: null,\n\n    /**\n     * APIProperty: singleTile\n     * {Boolean} Moves the layer into single-tile mode, meaning that one tile \n     *     will be loaded. The tile's size will be determined by the 'ratio'\n     *     property. When the tile is dragged such that it does not cover the \n     *     entire viewport, it is reloaded.\n     */\n    singleTile: false,\n\n    /** APIProperty: ratio\n     *  {Float} Used only when in single-tile mode, this specifies the \n     *          ratio of the size of the single tile to the size of the map.\n     *          Default value is 1.5.\n     */\n    ratio: 1.5,\n\n    /**\n     * APIProperty: buffer\n     * {Integer} Used only when in gridded mode, this specifies the number of \n     *           extra rows and columns of tiles on each side which will\n     *           surround the minimum grid tiles to cover the map.\n     *           For very slow loading layers, a larger value may increase\n     *           performance somewhat when dragging, but will increase bandwidth\n     *           use significantly. \n     */\n    buffer: 0,\n\n    /**\n     * APIProperty: transitionEffect\n     * {String} The transition effect to use when the map is zoomed.\n     * Two possible values:\n     *\n     * \"resize\" - Existing tiles are resized on zoom to provide a visual\n     *     effect of the zoom having taken place immediately.  As the\n     *     new tiles become available, they are drawn on top of the\n     *     resized tiles (this is the default setting).\n     * \"map-resize\" - Existing tiles are resized on zoom and placed below the\n     *     base layer.  New tiles for the base layer will cover existing tiles.\n     *     This setting is recommended when having an overlay duplicated during\n     *     the transition is undesirable (e.g. street labels or big transparent\n     *     fills). \n     * null - No transition effect.\n     *\n     * Using \"resize\" on non-opaque layers can cause undesired visual\n     * effects.  Set transitionEffect to null in this case.\n     */\n    transitionEffect: \"resize\",\n\n    /**\n     * APIProperty: numLoadingTiles\n     * {Integer} How many tiles are still loading?\n     */\n    numLoadingTiles: 0,\n\n    /**\n     * Property: serverResolutions\n     * {Array(Number}} This property is documented in subclasses as\n     *     an API property.\n     */\n    serverResolutions: null,\n\n    /**\n     * Property: loading\n     * {Boolean} Indicates if tiles are being loaded.\n     */\n    loading: false,\n    \n    /**\n     * Property: backBuffer\n     * {DOMElement} The back buffer.\n     */\n    backBuffer: null,\n\n    /**\n     * Property: gridResolution\n     * {Number} The resolution of the current grid. Used for backbuffer and\n     *     client zoom. This property is updated every time the grid is\n     *     initialized.\n     */\n    gridResolution: null,\n\n    /**\n     * Property: backBufferResolution\n     * {Number} The resolution of the current back buffer. This property is\n     *     updated each time a back buffer is created.\n     */\n    backBufferResolution: null,\n\n    /**\n     * Property: backBufferLonLat\n     * {Object} The top-left corner of the current back buffer. Includes lon\n     *     and lat properties. This object is updated each time a back buffer\n     *     is created.\n     */\n    backBufferLonLat: null,\n\n    /**\n     * Property: backBufferTimerId\n     * {Number} The id of the back buffer timer. This timer is used to\n     *     delay the removal of the back buffer, thereby preventing\n     *     flash effects caused by tile animation.\n     */\n    backBufferTimerId: null,\n\n    /**\n     * APIProperty: removeBackBufferDelay\n     * {Number} Delay for removing the backbuffer when all tiles have finished\n     *     loading. Can be set to 0 when no css opacity transitions for the\n     *     olTileImage class are used. Default is 0 for <singleTile> layers,\n     *     2500 for tiled layers. See <className> for more information on\n     *     tile animation.\n     */\n    removeBackBufferDelay: null,\n\n    /**\n     * APIProperty: className\n     * {String} Name of the class added to the layer div. If not set in the\n     *     options passed to the constructor then className defaults to\n     *     \"olLayerGridSingleTile\" for single tile layers (see <singleTile>),\n     *     and \"olLayerGrid\" for non single tile layers.\n     *\n     * Note:\n     *\n     * The displaying of tiles is not animated by default for single tile\n     *     layers - OpenLayers' default theme (style.css) includes this:\n     * (code)\n     * .olLayerGrid .olTileImage {\n     *     -webkit-transition: opacity 0.2s linear;\n     *     -moz-transition: opacity 0.2s linear;\n     *     -o-transition: opacity 0.2s linear;\n     *     transition: opacity 0.2s linear;\n     *  }\n     * (end)\n     * To animate tile displaying for any grid layer the following\n     *     CSS rule can be used:\n     * (code)\n     * .olTileImage {\n     *     -webkit-transition: opacity 0.2s linear;\n     *     -moz-transition: opacity 0.2s linear;\n     *     -o-transition: opacity 0.2s linear;\n     *     transition: opacity 0.2s linear;\n     * }\n     * (end)\n     * In that case, to avoid flash effects, <removeBackBufferDelay>\n     *     should not be zero.\n     */\n    className: null,\n    \n    /**\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * layer.events.register(type, obj, listener);\n     * (end)\n     *\n     * Listeners will be called with a reference to an event object.  The\n     *     properties of this event depends on exactly what happened.\n     *\n     * All event objects have at least the following properties:\n     * object - {Object} A reference to layer.events.object.\n     * element - {DOMElement} A reference to layer.events.element.\n     *\n     * Supported event types:\n     * addtile - Triggered when a tile is added to this layer. Listeners receive\n     *     an object as first argument, which has a tile property that\n     *     references the tile that has been added.\n     * tileloadstart - Triggered when a tile starts loading. Listeners receive\n     *     an object as first argument, which has a tile property that\n     *     references the tile that starts loading.\n     * tileloaded - Triggered when each new tile is\n     *     loaded, as a means of progress update to listeners.\n     *     listeners can access 'numLoadingTiles' if they wish to keep\n     *     track of the loading progress. Listeners are called with an object\n     *     with a 'tile' property as first argument, making the loaded tile\n     *     available to the listener, and an 'aborted' property, which will be\n     *     true when loading was aborted and no tile data is available.\n     * tileerror - Triggered before the tileloaded event (i.e. when the tile is\n     *     still hidden) if a tile failed to load. Listeners receive an object\n     *     as first argument, which has a tile property that references the\n     *     tile that could not be loaded.\n     * retile - Triggered when the layer recreates its tile grid.\n     */\n\n    /**\n     * Property: gridLayout\n     * {Object} Object containing properties tilelon, tilelat, startcol,\n     * startrow\n     */\n    gridLayout: null,\n    \n    /**\n     * Property: rowSign\n     * {Number} 1 for grids starting at the top, -1 for grids starting at the\n     * bottom. This is used for several grid index and offset calculations.\n     */\n    rowSign: null,\n\n    /**\n     * Property: transitionendEvents\n     * {Array} Event names for transitionend\n     */\n    transitionendEvents: [\n        'transitionend', 'webkitTransitionEnd', 'otransitionend',\n        'oTransitionEnd'\n    ],\n\n    /**\n     * Constructor: OpenLayers.Layer.Grid\n     * Create a new grid layer\n     *\n     * Parameters:\n     * name - {String}\n     * url - {String}\n     * params - {Object}\n     * options - {Object} Hashtable of extra options to tag onto the layer\n     */\n    initialize: function(name, url, params, options) {\n        OpenLayers.Layer.HTTPRequest.prototype.initialize.apply(this, \n                                                                arguments);\n        this.grid = [];\n        this._removeBackBuffer = OpenLayers.Function.bind(this.removeBackBuffer, this);\n\n        this.initProperties();\n\n        this.rowSign = this.tileOriginCorner.substr(0, 1) === \"t\" ? 1 : -1;\n    },\n\n    /**\n     * Method: initProperties\n     * Set any properties that depend on the value of singleTile.\n     * Currently sets removeBackBufferDelay and className\n     */\n    initProperties: function() {\n        if (this.options.removeBackBufferDelay === undefined) {\n            this.removeBackBufferDelay = this.singleTile ? 0 : 2500;\n        }\n\n        if (this.options.className === undefined) {\n            this.className = this.singleTile ? 'olLayerGridSingleTile' :\n                                               'olLayerGrid';\n        }\n    },\n\n    /**\n     * Method: setMap\n     *\n     * Parameters:\n     * map - {<OpenLayers.Map>} The map.\n     */\n    setMap: function(map) {\n        OpenLayers.Layer.HTTPRequest.prototype.setMap.call(this, map);\n        OpenLayers.Element.addClass(this.div, this.className);\n    },\n\n    /**\n     * Method: removeMap\n     * Called when the layer is removed from the map.\n     *\n     * Parameters:\n     * map - {<OpenLayers.Map>} The map.\n     */\n    removeMap: function(map) {\n        this.removeBackBuffer();\n    },\n\n    /**\n     * APIMethod: destroy\n     * Deconstruct the layer and clear the grid.\n     */\n    destroy: function() {\n        this.removeBackBuffer();\n        this.clearGrid();\n\n        this.grid = null;\n        this.tileSize = null;\n        OpenLayers.Layer.HTTPRequest.prototype.destroy.apply(this, arguments); \n    },\n\n    /**\n     * APIMethod: mergeNewParams\n     * Refetches tiles with new params merged, keeping a backbuffer. Each\n     * loading new tile will have a css class of '.olTileReplacing'. If a\n     * stylesheet applies a 'display: none' style to that class, any fade-in\n     * transition will not apply, and backbuffers for each tile will be removed\n     * as soon as the tile is loaded.\n     * \n     * Parameters:\n     * newParams - {Object}\n     *\n     * Returns:\n     * redrawn: {Boolean} whether the layer was actually redrawn.\n     */\n\n    /**\n     * Method: clearGrid\n     * Go through and remove all tiles from the grid, calling\n     *    destroy() on each of them to kill circular references\n     */\n    clearGrid:function() {\n        if (this.grid) {\n            for(var iRow=0, len=this.grid.length; iRow<len; iRow++) {\n                var row = this.grid[iRow];\n                for(var iCol=0, clen=row.length; iCol<clen; iCol++) {\n                    var tile = row[iCol];\n                    this.destroyTile(tile);\n                }\n            }\n            this.grid = [];\n            this.gridResolution = null;\n            this.gridLayout = null;\n        }\n    },\n\n   /**\n    * APIMethod: addOptions\n    * \n    * Parameters:\n    * newOptions - {Object}\n    * reinitialize - {Boolean} If set to true, and if resolution options of the\n    *     current baseLayer were changed, the map will be recentered to make\n    *     sure that it is displayed with a valid resolution, and a\n    *     changebaselayer event will be triggered.\n    */\n    addOptions: function (newOptions, reinitialize) {\n        var singleTileChanged = newOptions.singleTile !== undefined && \n            newOptions.singleTile !== this.singleTile;\n        OpenLayers.Layer.HTTPRequest.prototype.addOptions.apply(this, arguments);\n        if (this.map && singleTileChanged) {\n            this.initProperties();\n            this.clearGrid();\n            this.tileSize = this.options.tileSize;\n            this.setTileSize();\n            if (this.visibility) {\n                this.moveTo(null, true);\n            }\n        }\n    },\n    \n    /**\n     * APIMethod: clone\n     * Create a clone of this layer\n     *\n     * Parameters:\n     * obj - {Object} Is this ever used?\n     * \n     * Returns:\n     * {<OpenLayers.Layer.Grid>} An exact clone of this OpenLayers.Layer.Grid\n     */\n    clone: function (obj) {\n        \n        if (obj == null) {\n            obj = new OpenLayers.Layer.Grid(this.name,\n                                            this.url,\n                                            this.params,\n                                            this.getOptions());\n        }\n\n        //get all additions from superclasses\n        obj = OpenLayers.Layer.HTTPRequest.prototype.clone.apply(this, [obj]);\n\n        // copy/set any non-init, non-simple values here\n        if (this.tileSize != null) {\n            obj.tileSize = this.tileSize.clone();\n        }\n        \n        // we do not want to copy reference to grid, so we make a new array\n        obj.grid = [];\n        obj.gridResolution = null;\n        // same for backbuffer\n        obj.backBuffer = null;\n        obj.backBufferTimerId = null;\n        obj.loading = false;\n        obj.numLoadingTiles = 0;\n\n        return obj;\n    },    \n\n    /**\n     * Method: moveTo\n     * This function is called whenever the map is moved. All the moving\n     * of actual 'tiles' is done by the map, but moveTo's role is to accept\n     * a bounds and make sure the data that that bounds requires is pre-loaded.\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     * zoomChanged - {Boolean}\n     * dragging - {Boolean}\n     */\n    moveTo:function(bounds, zoomChanged, dragging) {\n\n        OpenLayers.Layer.HTTPRequest.prototype.moveTo.apply(this, arguments);\n\n        bounds = bounds || this.map.getExtent();\n\n        if (bounds != null) {\n             \n            // if grid is empty or zoom has changed, we *must* re-tile\n            var forceReTile = !this.grid.length || zoomChanged;\n            \n            // total bounds of the tiles\n            var tilesBounds = this.getTilesBounds();            \n\n            // the new map resolution\n            var resolution = this.map.getResolution();\n\n            // the server-supported resolution for the new map resolution\n            var serverResolution = this.getServerResolution(resolution);\n\n            if (this.singleTile) {\n                \n                // We want to redraw whenever even the slightest part of the \n                //  current bounds is not contained by our tile.\n                //  (thus, we do not specify partial -- its default is false)\n\n                if ( forceReTile ||\n                     (!dragging && !tilesBounds.containsBounds(bounds))) {\n\n                    // In single tile mode with no transition effect, we insert\n                    // a non-scaled backbuffer when the layer is moved. But if\n                    // a zoom occurs right after a move, i.e. before the new\n                    // image is received, we need to remove the backbuffer, or\n                    // an ill-positioned image will be visible during the zoom\n                    // transition.\n\n                    if(zoomChanged && this.transitionEffect !== 'resize') {\n                        this.removeBackBuffer();\n                    }\n\n                    if(!zoomChanged || this.transitionEffect === 'resize') {\n                        this.applyBackBuffer(resolution);\n                    }\n\n                    this.initSingleTile(bounds);\n                }\n            } else {\n\n                // if the bounds have changed such that they are not even \n                // *partially* contained by our tiles (e.g. when user has \n                // programmatically panned to the other side of the earth on\n                // zoom level 18), then moveGriddedTiles could potentially have\n                // to run through thousands of cycles, so we want to reTile\n                // instead (thus, partial true).  \n                forceReTile = forceReTile ||\n                    !tilesBounds.intersectsBounds(bounds, {\n                        worldBounds: this.map.baseLayer.wrapDateLine &&\n                            this.map.getMaxExtent()\n                    });\n\n                if(forceReTile) {\n                    if(zoomChanged && (this.transitionEffect === 'resize' ||\n                                          this.gridResolution === resolution)) {\n                        this.applyBackBuffer(resolution);\n                    }\n                    this.initGriddedTiles(bounds);\n                } else {\n                    this.moveGriddedTiles();\n                }\n            }\n        }\n    },\n\n    /**\n     * Method: getTileData\n     * Given a map location, retrieve a tile and the pixel offset within that\n     *     tile corresponding to the location.  If there is not an existing \n     *     tile in the grid that covers the given location, null will be \n     *     returned.\n     *\n     * Parameters:\n     * loc - {<OpenLayers.LonLat>} map location\n     *\n     * Returns:\n     * {Object} Object with the following properties: tile ({<OpenLayers.Tile>}),\n     *     i ({Number} x-pixel offset from top left), and j ({Integer} y-pixel\n     *     offset from top left).\n     */\n    getTileData: function(loc) {\n        var data = null,\n            x = loc.lon,\n            y = loc.lat,\n            numRows = this.grid.length;\n\n        if (this.map && numRows) {\n            var res = this.map.getResolution(),\n                tileWidth = this.tileSize.w,\n                tileHeight = this.tileSize.h,\n                bounds = this.grid[0][0].bounds,\n                left = bounds.left,\n                top = bounds.top;\n\n            if (x < left) {\n                // deal with multiple worlds\n                if (this.map.baseLayer.wrapDateLine) {\n                    var worldWidth = this.map.getMaxExtent().getWidth();\n                    var worldsAway = Math.ceil((left - x) / worldWidth);\n                    x += worldWidth * worldsAway;\n                }\n            }\n            // tile distance to location (fractional number of tiles);\n            var dtx = (x - left) / (res * tileWidth);\n            var dty = (top - y) / (res * tileHeight);\n            // index of tile in grid\n            var col = Math.floor(dtx);\n            var row = Math.floor(dty);\n            if (row >= 0 && row < numRows) {\n                var tile = this.grid[row][col];\n                if (tile) {\n                    data = {\n                        tile: tile,\n                        // pixel index within tile\n                        i: Math.floor((dtx - col) * tileWidth),\n                        j: Math.floor((dty - row) * tileHeight)\n                    };                    \n                }\n            }\n        }\n        return data;\n    },\n    \n    /**\n     * Method: destroyTile\n     *\n     * Parameters:\n     * tile - {<OpenLayers.Tile>}\n     */\n    destroyTile: function(tile) {\n        this.removeTileMonitoringHooks(tile);\n        tile.destroy();\n    },\n\n    /**\n     * Method: getServerResolution\n     * Return the closest server-supported resolution.\n     *\n     * Parameters:\n     * resolution - {Number} The base resolution. If undefined the\n     *     map resolution is used.\n     *\n     * Returns:\n     * {Number} The closest server resolution value.\n     */\n    getServerResolution: function(resolution) {\n        var distance = Number.POSITIVE_INFINITY;\n        resolution = resolution || this.map.getResolution();\n        if(this.serverResolutions &&\n           OpenLayers.Util.indexOf(this.serverResolutions, resolution) === -1) {\n            var i, newDistance, newResolution, serverResolution;\n            for(i=this.serverResolutions.length-1; i>= 0; i--) {\n                newResolution = this.serverResolutions[i];\n                newDistance = Math.abs(newResolution - resolution);\n                if (newDistance > distance) {\n                    break;\n                }\n                distance = newDistance;\n                serverResolution = newResolution;\n            }\n            resolution = serverResolution;\n        }\n        return resolution;\n    },\n\n    /**\n     * Method: getServerZoom\n     * Return the zoom value corresponding to the best matching server\n     * resolution, taking into account <serverResolutions> and <zoomOffset>.\n     *\n     * Returns:\n     * {Number} The closest server supported zoom. This is not the map zoom\n     *     level, but an index of the server's resolutions array.\n     */\n    getServerZoom: function() {\n        var resolution = this.getServerResolution();\n        return this.serverResolutions ?\n            OpenLayers.Util.indexOf(this.serverResolutions, resolution) :\n            this.map.getZoomForResolution(resolution) + (this.zoomOffset || 0);\n    },\n\n    /**\n     * Method: applyBackBuffer\n     * Create, insert, scale and position a back buffer for the layer.\n     *\n     * Parameters:\n     * resolution - {Number} The resolution to transition to.\n     */\n    applyBackBuffer: function(resolution) {\n        if(this.backBufferTimerId !== null) {\n            this.removeBackBuffer();\n        }\n        var backBuffer = this.backBuffer;\n        if(!backBuffer) {\n            backBuffer = this.createBackBuffer();\n            if(!backBuffer) {\n                return;\n            }\n            if (resolution === this.gridResolution) {\n                this.div.insertBefore(backBuffer, this.div.firstChild);\n            } else {\n                this.map.baseLayer.div.parentNode.insertBefore(backBuffer, this.map.baseLayer.div);\n            }\n            this.backBuffer = backBuffer;\n\n            // set some information in the instance for subsequent\n            // calls to applyBackBuffer where the same back buffer\n            // is reused\n            var topLeftTileBounds = this.grid[0][0].bounds;\n            this.backBufferLonLat = {\n                lon: topLeftTileBounds.left,\n                lat: topLeftTileBounds.top\n            };\n            this.backBufferResolution = this.gridResolution;\n        }\n        \n        var ratio = this.backBufferResolution / resolution;\n\n        // scale the tiles inside the back buffer\n        var tiles = backBuffer.childNodes, tile;\n        for (var i=tiles.length-1; i>=0; --i) {\n            tile = tiles[i];\n            tile.style.top = ((ratio * tile._i * backBuffer._th) | 0) + 'px';\n            tile.style.left = ((ratio * tile._j * backBuffer._tw) | 0) + 'px';\n            tile.style.width = Math.round(ratio * tile._w) + 'px';\n            tile.style.height = Math.round(ratio * tile._h) + 'px';\n        }\n\n        // and position it (based on the grid's top-left corner)\n        var position = this.getViewPortPxFromLonLat(\n                this.backBufferLonLat, resolution);\n        var leftOffset = this.map.layerContainerOriginPx.x;\n        var topOffset = this.map.layerContainerOriginPx.y;\n        backBuffer.style.left = Math.round(position.x - leftOffset) + 'px';\n        backBuffer.style.top = Math.round(position.y - topOffset) + 'px';\n    },\n\n    /**\n     * Method: createBackBuffer\n     * Create a back buffer.\n     *\n     * Returns:\n     * {DOMElement} The DOM element for the back buffer, undefined if the\n     * grid isn't initialized yet.\n     */\n    createBackBuffer: function() {\n        var backBuffer;\n        if(this.grid.length > 0) {\n            backBuffer = document.createElement('div');\n            backBuffer.id = this.div.id + '_bb';\n            backBuffer.className = 'olBackBuffer';\n            backBuffer.style.position = 'absolute';\n            var map = this.map;\n            backBuffer.style.zIndex = this.transitionEffect === 'resize' ?\n                    this.getZIndex() - 1 :\n                    // 'map-resize':\n                    map.Z_INDEX_BASE.BaseLayer -\n                            (map.getNumLayers() - map.getLayerIndex(this));\n            for(var i=0, lenI=this.grid.length; i<lenI; i++) {\n                for(var j=0, lenJ=this.grid[i].length; j<lenJ; j++) {\n                    var tile = this.grid[i][j],\n                        markup = this.grid[i][j].createBackBuffer();\n                    if (markup) {\n                        markup._i = i;\n                        markup._j = j;\n                        markup._w = this.singleTile ?\n                                this.getImageSize(tile.bounds).w : tile.size.w;\n                        markup._h = tile.size.h;\n                        markup.id = tile.id + '_bb';\n                        backBuffer.appendChild(markup);\n                    }\n                }\n            }\n            backBuffer._tw = this.tileSize.w;\n            backBuffer._th = this.tileSize.h;\n        }\n        return backBuffer;\n    },\n\n    /**\n     * Method: removeBackBuffer\n     * Remove back buffer from DOM.\n     */\n    removeBackBuffer: function() {\n        if (this._transitionElement) {\n            for (var i=this.transitionendEvents.length-1; i>=0; --i) {\n                OpenLayers.Event.stopObserving(this._transitionElement,\n                    this.transitionendEvents[i], this._removeBackBuffer);\n            }\n            delete this._transitionElement;\n        }\n        if(this.backBuffer) {\n            if (this.backBuffer.parentNode) {\n                this.backBuffer.parentNode.removeChild(this.backBuffer);\n            }\n            this.backBuffer = null;\n            this.backBufferResolution = null;\n            if(this.backBufferTimerId !== null) {\n                window.clearTimeout(this.backBufferTimerId);\n                this.backBufferTimerId = null;\n            }\n        }\n    },\n\n    /**\n     * Method: moveByPx\n     * Move the layer based on pixel vector.\n     *\n     * Parameters:\n     * dx - {Number}\n     * dy - {Number}\n     */\n    moveByPx: function(dx, dy) {\n        if (!this.singleTile) {\n            this.moveGriddedTiles();\n        }\n    },\n\n    /**\n     * APIMethod: setTileSize\n     * Check if we are in singleTile mode and if so, set the size as a ratio\n     *     of the map size (as specified by the layer's 'ratio' property).\n     * \n     * Parameters:\n     * size - {<OpenLayers.Size>}\n     */\n    setTileSize: function(size) { \n        if (this.singleTile) {\n            size = this.map.getSize();\n            size.h = parseInt(size.h * this.ratio, 10);\n            size.w = parseInt(size.w * this.ratio, 10);\n        } \n        OpenLayers.Layer.HTTPRequest.prototype.setTileSize.apply(this, [size]);\n    },\n\n    /**\n     * APIMethod: getTilesBounds\n     * Return the bounds of the tile grid.\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>} A Bounds object representing the bounds of all the\n     *     currently loaded tiles (including those partially or not at all seen \n     *     onscreen).\n     */\n    getTilesBounds: function() {    \n        var bounds = null; \n        \n        var length = this.grid.length;\n        if (length) {\n            var bottomLeftTileBounds = this.grid[length - 1][0].bounds,\n                width = this.grid[0].length * bottomLeftTileBounds.getWidth(),\n                height = this.grid.length * bottomLeftTileBounds.getHeight();\n            \n            bounds = new OpenLayers.Bounds(bottomLeftTileBounds.left, \n                                           bottomLeftTileBounds.bottom,\n                                           bottomLeftTileBounds.left + width, \n                                           bottomLeftTileBounds.bottom + height);\n        }   \n        return bounds;\n    },\n\n    /**\n     * Method: initSingleTile\n     * \n     * Parameters: \n     * bounds - {<OpenLayers.Bounds>}\n     */\n    initSingleTile: function(bounds) {\n        this.events.triggerEvent(\"retile\");\n\n        //determine new tile bounds\n        var center = bounds.getCenterLonLat();\n        var tileWidth = bounds.getWidth() * this.ratio;\n        var tileHeight = bounds.getHeight() * this.ratio;\n                                       \n        var tileBounds = \n            new OpenLayers.Bounds(center.lon - (tileWidth/2),\n                                  center.lat - (tileHeight/2),\n                                  center.lon + (tileWidth/2),\n                                  center.lat + (tileHeight/2));\n\n        // store the resolution of the grid\n        this.gridResolution = this.getServerResolution();\n  \n        // same logic as OpenLayers.Tile#shouldDraw\n        var maxExtent = this.maxExtent;\n        if (maxExtent && (!this.displayOutsideMaxExtent ||\n                (this.map.baseLayer.wrapDateLine &&\n                this.maxExtent.equals(this.map.getMaxExtent())))) {\n            tileBounds.left = Math.max(tileBounds.left, maxExtent.left);\n            tileBounds.right = Math.min(tileBounds.right, maxExtent.right);\n        }\n\n        var px = this.map.getLayerPxFromLonLat({\n            lon: tileBounds.left,\n            lat: tileBounds.top\n        });\n\n        if (!this.grid.length) {\n            this.grid[0] = [];\n        }\n\n        var tile = this.grid[0][0];\n        if (!tile) {\n            tile = this.addTile(tileBounds, px);\n\n            this.addTileMonitoringHooks(tile);\n            tile.draw();\n            this.grid[0][0] = tile;\n        } else {\n            tile.moveTo(tileBounds, px);\n        }           \n        \n        //remove all but our single tile\n        this.removeExcessTiles(1,1);\n    },\n\n    /** \n     * Method: calculateGridLayout\n     * Generate parameters for the grid layout.\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bound>|Object} OpenLayers.Bounds or an\n     *     object with a 'left' and 'top' properties.\n     * origin - {<OpenLayers.LonLat>|Object} OpenLayers.LonLat or an\n     *     object with a 'lon' and 'lat' properties.\n     * resolution - {Number}\n     *\n     * Returns:\n     * {Object} Object containing properties tilelon, tilelat, startcol,\n     * startrow\n     */\n    calculateGridLayout: function(bounds, origin, resolution) {\n        var tilelon = resolution * this.tileSize.w;\n        var tilelat = resolution * this.tileSize.h;\n        \n        var offsetlon = bounds.left - origin.lon;\n        var tilecol = Math.floor(offsetlon/tilelon) - this.buffer;\n        \n        var rowSign = this.rowSign;\n\n        var offsetlat = rowSign * (origin.lat - bounds.top + tilelat);  \n        var tilerow = Math[~rowSign ? 'floor' : 'ceil'](offsetlat/tilelat) - this.buffer * rowSign;\n        \n        return { \n          tilelon: tilelon, tilelat: tilelat,\n          startcol: tilecol, startrow: tilerow\n        };\n\n    },\n\n    getImageSize: function(bounds) {\n        var tileSize = OpenLayers.Layer.HTTPRequest.prototype.getImageSize.apply(this, arguments);\n        if (this.singleTile) {\n            tileSize = new OpenLayers.Size(\n                Math.round(bounds.getWidth() / this.gridResolution),\n                tileSize.h\n            );\n        }\n        return tileSize;\n    },\n\n    /**\n     * Method: getTileOrigin\n     * Determine the origin for aligning the grid of tiles.  If a <tileOrigin>\n     *     property is supplied, that will be returned.  Otherwise, the origin\n     *     will be derived from the layer's <maxExtent> property.  In this case,\n     *     the tile origin will be the corner of the <maxExtent> given by the \n     *     <tileOriginCorner> property.\n     *\n     * Returns:\n     * {<OpenLayers.LonLat>} The tile origin.\n     */\n    getTileOrigin: function() {\n        var origin = this.tileOrigin;\n        if (!origin) {\n            var extent = this.getMaxExtent();\n            var edges = ({\n                \"tl\": [\"left\", \"top\"],\n                \"tr\": [\"right\", \"top\"],\n                \"bl\": [\"left\", \"bottom\"],\n                \"br\": [\"right\", \"bottom\"]\n            })[this.tileOriginCorner];\n            origin = new OpenLayers.LonLat(extent[edges[0]], extent[edges[1]]);\n        }\n        return origin;\n    },\n\n    /**\n     * Method: getTileBoundsForGridIndex\n     *\n     * Parameters:\n     * row - {Number} The row of the grid\n     * col - {Number} The column of the grid\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>} The bounds for the tile at (row, col)\n     */\n    getTileBoundsForGridIndex: function(row, col) {\n        var origin = this.getTileOrigin();\n        var tileLayout = this.gridLayout;\n        var tilelon = tileLayout.tilelon;\n        var tilelat = tileLayout.tilelat;\n        var startcol = tileLayout.startcol;\n        var startrow = tileLayout.startrow;\n        var rowSign = this.rowSign;\n        return new OpenLayers.Bounds(\n            origin.lon + (startcol + col) * tilelon,\n            origin.lat - (startrow + row * rowSign) * tilelat * rowSign,\n            origin.lon + (startcol + col + 1) * tilelon,\n            origin.lat - (startrow + (row - 1) * rowSign) * tilelat * rowSign\n        );\n    },\n\n    /**\n     * Method: initGriddedTiles\n     * \n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     */\n    initGriddedTiles:function(bounds) {\n        this.events.triggerEvent(\"retile\");\n\n        // work out mininum number of rows and columns; this is the number of\n        // tiles required to cover the viewport plus at least one for panning\n\n        var viewSize = this.map.getSize();\n        \n        var origin = this.getTileOrigin();\n        var resolution = this.map.getResolution(),\n            serverResolution = this.getServerResolution(),\n            ratio = resolution / serverResolution,\n            tileSize = {\n                w: this.tileSize.w / ratio,\n                h: this.tileSize.h / ratio\n            };\n\n        var minRows = Math.ceil(viewSize.h/tileSize.h) + \n                      2 * this.buffer + 1;\n        var minCols = Math.ceil(viewSize.w/tileSize.w) +\n                      2 * this.buffer + 1;\n\n        var tileLayout = this.calculateGridLayout(bounds, origin, serverResolution);\n        this.gridLayout = tileLayout;\n        \n        var tilelon = tileLayout.tilelon;\n        var tilelat = tileLayout.tilelat;\n        \n        var layerContainerDivLeft = this.map.layerContainerOriginPx.x;\n        var layerContainerDivTop = this.map.layerContainerOriginPx.y;\n\n        var tileBounds = this.getTileBoundsForGridIndex(0, 0);\n        var startPx = this.map.getViewPortPxFromLonLat(\n            new OpenLayers.LonLat(tileBounds.left, tileBounds.top)\n        );\n        startPx.x = Math.round(startPx.x) - layerContainerDivLeft;\n        startPx.y = Math.round(startPx.y) - layerContainerDivTop;\n\n        var tileData = [], center = this.map.getCenter();\n\n        var rowidx = 0;\n        do {\n            var row = this.grid[rowidx];\n            if (!row) {\n                row = [];\n                this.grid.push(row);\n            }\n            \n            var colidx = 0;\n            do {\n                tileBounds = this.getTileBoundsForGridIndex(rowidx, colidx);\n                var px = startPx.clone();\n                px.x = px.x + colidx * Math.round(tileSize.w);\n                px.y = px.y + rowidx * Math.round(tileSize.h);\n                var tile = row[colidx];\n                if (!tile) {\n                    tile = this.addTile(tileBounds, px);\n                    this.addTileMonitoringHooks(tile);\n                    row.push(tile);\n                } else {\n                    tile.moveTo(tileBounds, px, false);\n                }\n                var tileCenter = tileBounds.getCenterLonLat();\n                tileData.push({\n                    tile: tile,\n                    distance: Math.pow(tileCenter.lon - center.lon, 2) +\n                        Math.pow(tileCenter.lat - center.lat, 2)\n                });\n     \n                colidx += 1;\n            } while ((tileBounds.right <= bounds.right + tilelon * this.buffer)\n                     || colidx < minCols);\n             \n            rowidx += 1;\n        } while((tileBounds.bottom >= bounds.bottom - tilelat * this.buffer)\n                || rowidx < minRows);\n        \n        //shave off excess rows and columns\n        this.removeExcessTiles(rowidx, colidx);\n\n        var resolution = this.getServerResolution();\n        // store the resolution of the grid\n        this.gridResolution = resolution;\n\n        //now actually draw the tiles\n        tileData.sort(function(a, b) {\n            return a.distance - b.distance; \n        });\n        for (var i=0, ii=tileData.length; i<ii; ++i) {\n            tileData[i].tile.draw();\n        }\n    },\n\n    /**\n     * Method: getMaxExtent\n     * Get this layer's maximum extent. (Implemented as a getter for\n     *     potential specific implementations in sub-classes.)\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>}\n     */\n    getMaxExtent: function() {\n        return this.maxExtent;\n    },\n\n    /**\n     * APIMethod: addTile\n     * Create a tile, initialize it, and add it to the layer div. \n     *\n     * Parameters\n     * bounds - {<OpenLayers.Bounds>}\n     * position - {<OpenLayers.Pixel>}\n     *\n     * Returns:\n     * {<OpenLayers.Tile>} The added OpenLayers.Tile\n     */\n    addTile: function(bounds, position) {\n        var tile = new this.tileClass(\n            this, position, bounds, null, this.tileSize, this.tileOptions\n        );\n        this.events.triggerEvent(\"addtile\", {tile: tile});\n        return tile;\n    },\n    \n    /** \n     * Method: addTileMonitoringHooks\n     * This function takes a tile as input and adds the appropriate hooks to \n     *     the tile so that the layer can keep track of the loading tiles.\n     * \n     * Parameters: \n     * tile - {<OpenLayers.Tile>}\n     */\n    addTileMonitoringHooks: function(tile) {\n        \n        var replacingCls = 'olTileReplacing';\n\n        tile.onLoadStart = function() {\n            //if that was first tile then trigger a 'loadstart' on the layer\n            if (this.loading === false) {\n                this.loading = true;\n                this.events.triggerEvent(\"loadstart\");\n            }\n            this.events.triggerEvent(\"tileloadstart\", {tile: tile});\n            this.numLoadingTiles++;\n            if (!this.singleTile && this.backBuffer && this.gridResolution === this.backBufferResolution) {\n                OpenLayers.Element.addClass(tile.getTile(), replacingCls);\n            }\n        };\n      \n        tile.onLoadEnd = function(evt) {\n            this.numLoadingTiles--;\n            var aborted = evt.type === 'unload';\n            this.events.triggerEvent(\"tileloaded\", {\n                tile: tile,\n                aborted: aborted\n            });\n            if (!this.singleTile && !aborted && this.backBuffer && this.gridResolution === this.backBufferResolution) {\n                var tileDiv = tile.getTile();\n                if (OpenLayers.Element.getStyle(tileDiv, 'display') === 'none') {\n                    var bufferTile = document.getElementById(tile.id + '_bb');\n                    if (bufferTile) {\n                        bufferTile.parentNode.removeChild(bufferTile);\n                    }\n                }\n                OpenLayers.Element.removeClass(tileDiv, replacingCls);\n            }\n            //if that was the last tile, then trigger a 'loadend' on the layer\n            if (this.numLoadingTiles === 0) {\n                if (this.backBuffer) {\n                    if (this.backBuffer.childNodes.length === 0) {\n                        // no tiles transitioning, remove immediately\n                        this.removeBackBuffer();\n                    } else {\n                        // wait until transition has ended or delay has passed\n                        this._transitionElement = aborted ?\n                            this.div.lastChild : tile.imgDiv;\n                        var transitionendEvents = this.transitionendEvents;\n                        for (var i=transitionendEvents.length-1; i>=0; --i) {\n                            OpenLayers.Event.observe(this._transitionElement,\n                                transitionendEvents[i],\n                                this._removeBackBuffer);\n                        }\n                        // the removal of the back buffer is delayed to prevent\n                        // flash effects due to the animation of tile displaying\n                        this.backBufferTimerId = window.setTimeout(\n                            this._removeBackBuffer, this.removeBackBufferDelay\n                        );\n                    }\n                }\n                this.loading = false;\n                this.events.triggerEvent(\"loadend\");\n            }\n        };\n        \n        tile.onLoadError = function() {\n            this.events.triggerEvent(\"tileerror\", {tile: tile});\n        };\n        \n        tile.events.on({\n            \"loadstart\": tile.onLoadStart,\n            \"loadend\": tile.onLoadEnd,\n            \"unload\": tile.onLoadEnd,\n            \"loaderror\": tile.onLoadError,\n            scope: this\n        });\n    },\n\n    /** \n     * Method: removeTileMonitoringHooks\n     * This function takes a tile as input and removes the tile hooks \n     *     that were added in addTileMonitoringHooks()\n     * \n     * Parameters: \n     * tile - {<OpenLayers.Tile>}\n     */\n    removeTileMonitoringHooks: function(tile) {\n        tile.unload();\n        tile.events.un({\n            \"loadstart\": tile.onLoadStart,\n            \"loadend\": tile.onLoadEnd,\n            \"unload\": tile.onLoadEnd,\n            \"loaderror\": tile.onLoadError,\n            scope: this\n        });\n    },\n    \n    /**\n     * Method: moveGriddedTiles\n     */\n    moveGriddedTiles: function() {\n        var buffer = this.buffer + 1;\n        while(true) {\n            var tlTile = this.grid[0][0];\n            var tlViewPort = {\n                x: tlTile.position.x +\n                    this.map.layerContainerOriginPx.x,\n                y: tlTile.position.y +\n                    this.map.layerContainerOriginPx.y\n            };\n            var ratio = this.getServerResolution() / this.map.getResolution();\n            var tileSize = {\n                w: Math.round(this.tileSize.w * ratio),\n                h: Math.round(this.tileSize.h * ratio)\n            };\n            if (tlViewPort.x > -tileSize.w * (buffer - 1)) {\n                this.shiftColumn(true, tileSize);\n            } else if (tlViewPort.x < -tileSize.w * buffer) {\n                this.shiftColumn(false, tileSize);\n            } else if (tlViewPort.y > -tileSize.h * (buffer - 1)) {\n                this.shiftRow(true, tileSize);\n            } else if (tlViewPort.y < -tileSize.h * buffer) {\n                this.shiftRow(false, tileSize);\n            } else {\n                break;\n            }\n        }\n    },\n\n    /**\n     * Method: shiftRow\n     * Shifty grid work\n     *\n     * Parameters:\n     * prepend - {Boolean} if true, prepend to beginning.\n     *                          if false, then append to end\n     * tileSize - {Object} rendered tile size; object with w and h properties\n     */\n    shiftRow: function(prepend, tileSize) {\n        var grid = this.grid;\n        var rowIndex = prepend ? 0 : (grid.length - 1);\n        var sign = prepend ? -1 : 1;\n        var rowSign = this.rowSign;\n        var tileLayout = this.gridLayout;\n        tileLayout.startrow += sign * rowSign;\n\n        var modelRow = grid[rowIndex];\n        var row = grid[prepend ? 'pop' : 'shift']();\n        for (var i=0, len=row.length; i<len; i++) {\n            var tile = row[i];\n            var position = modelRow[i].position.clone();\n            position.y += tileSize.h * sign;\n            tile.moveTo(this.getTileBoundsForGridIndex(rowIndex, i), position);\n        }\n        grid[prepend ? 'unshift' : 'push'](row);\n    },\n\n    /**\n     * Method: shiftColumn\n     * Shift grid work in the other dimension\n     *\n     * Parameters:\n     * prepend - {Boolean} if true, prepend to beginning.\n     *                          if false, then append to end\n     * tileSize - {Object} rendered tile size; object with w and h properties\n     */\n    shiftColumn: function(prepend, tileSize) {\n        var grid = this.grid;\n        var colIndex = prepend ? 0 : (grid[0].length - 1);\n        var sign = prepend ? -1 : 1;\n        var tileLayout = this.gridLayout;\n        tileLayout.startcol += sign;\n\n        for (var i=0, len=grid.length; i<len; i++) {\n            var row = grid[i];\n            var position = row[colIndex].position.clone();\n            var tile = row[prepend ? 'pop' : 'shift']();            \n            position.x += tileSize.w * sign;\n            tile.moveTo(this.getTileBoundsForGridIndex(i, colIndex), position);\n            row[prepend ? 'unshift' : 'push'](tile);\n        }\n    },\n\n    /**\n     * Method: removeExcessTiles\n     * When the size of the map or the buffer changes, we may need to\n     *     remove some excess rows and columns.\n     * \n     * Parameters:\n     * rows - {Integer} Maximum number of rows we want our grid to have.\n     * columns - {Integer} Maximum number of columns we want our grid to have.\n     */\n    removeExcessTiles: function(rows, columns) {\n        var i, l;\n        \n        // remove extra rows\n        while (this.grid.length > rows) {\n            var row = this.grid.pop();\n            for (i=0, l=row.length; i<l; i++) {\n                var tile = row[i];\n                this.destroyTile(tile);\n            }\n        }\n        \n        // remove extra columns\n        for (i=0, l=this.grid.length; i<l; i++) {\n            while (this.grid[i].length > columns) {\n                var row = this.grid[i];\n                var tile = row.pop();\n                this.destroyTile(tile);\n            }\n        }\n    },\n\n    /**\n     * Method: onMapResize\n     * For singleTile layers, this will set a new tile size according to the\n     * dimensions of the map pane.\n     */\n    onMapResize: function() {\n        if (this.singleTile) {\n            this.clearGrid();\n            this.setTileSize();\n        }\n    },\n    \n    /**\n     * APIMethod: getTileBounds\n     * Returns The tile bounds for a layer given a pixel location.\n     *\n     * Parameters:\n     * viewPortPx - {<OpenLayers.Pixel>} The location in the viewport.\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>} Bounds of the tile at the given pixel location.\n     */\n    getTileBounds: function(viewPortPx) {\n        var maxExtent = this.maxExtent;\n        var resolution = this.getResolution();\n        var tileMapWidth = resolution * this.tileSize.w;\n        var tileMapHeight = resolution * this.tileSize.h;\n        var mapPoint = this.getLonLatFromViewPortPx(viewPortPx);\n        var tileLeft = maxExtent.left + (tileMapWidth *\n                                         Math.floor((mapPoint.lon -\n                                                     maxExtent.left) /\n                                                    tileMapWidth));\n        var tileBottom = maxExtent.bottom + (tileMapHeight *\n                                             Math.floor((mapPoint.lat -\n                                                         maxExtent.bottom) /\n                                                        tileMapHeight));\n        return new OpenLayers.Bounds(tileLeft, tileBottom,\n                                     tileLeft + tileMapWidth,\n                                     tileBottom + tileMapHeight);\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.Grid\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Request/XMLHttpRequest.js\n * @requires OpenLayers/Layer/Grid.js\n */\n\n/**\n * Class: OpenLayers.Layer.MapGuide\n * Instances of OpenLayers.Layer.MapGuide are used to display\n * data from a MapGuide OS instance.\n *\n * Inherits from:\n *  - <OpenLayers.Layer.Grid>\n */\nOpenLayers.Layer.MapGuide = OpenLayers.Class(OpenLayers.Layer.Grid, {\n\n    /** \n     * APIProperty: isBaseLayer\n     * {Boolean} Treat this layer as a base layer.  Default is true.\n     **/\n    isBaseLayer: true,\n    \n    /**\n     * APIProperty: useHttpTile\n     * {Boolean} use a tile cache exposed directly via a webserver rather than the \n     *    via mapguide server. This does require extra configuration on the Mapguide Server,\n     *    and will only work when singleTile is false. The url for the layer must be set to the\n     *    webserver path rather than the Mapguide mapagent.\n     *    See http://trac.osgeo.org/mapguide/wiki/CodeSamples/Tiles/ServingTilesViaHttp\n     **/\n    useHttpTile: false,\n    \n    /** \n     * APIProperty: singleTile\n     * {Boolean} use tile server or request single tile image. \n     **/\n    singleTile: false,\n    \n    /** \n     * APIProperty: useOverlay\n     * {Boolean} flag to indicate if the layer should be retrieved using\n     * GETMAPIMAGE (default) or using GETDYNAMICOVERLAY requests.\n     **/\n    useOverlay: false,\n    \n    /** \n     * APIProperty: useAsyncOverlay\n     * {Boolean} indicates if the MapGuide site supports the asynchronous \n     * GETDYNAMICOVERLAY requests which is available in MapGuide Enterprise 2010\n     * and MapGuide Open Source v2.0.3 or higher. The newer versions of MG \n     * is called asynchronously, allows selections to be drawn separately from \n     * the map and offers styling options.\n     * \n     * With older versions of MapGuide, set useAsyncOverlay=false.  Note that in\n     * this case a synchronous AJAX call is issued and the mapname and session\n     * parameters must be used to initialize the layer, not the mapdefinition\n     * parameter. Also note that this will issue a synchronous AJAX request \n     * before the image request can be issued so the users browser may lock\n     * up if the MG Web tier does not respond in a timely fashion.\n     **/\n    useAsyncOverlay: true,\n    \n    /**\n     * Constant: TILE_PARAMS\n     * {Object} Hashtable of default parameter key/value pairs for tiled layer\n     */\n    TILE_PARAMS: {\n         operation: 'GETTILEIMAGE',\n         version: '1.2.0'\n    },\n\n    /**\n     * Constant: SINGLE_TILE_PARAMS\n     * {Object} Hashtable of default parameter key/value pairs for untiled layer\n     */\n    SINGLE_TILE_PARAMS: {\n        operation: 'GETMAPIMAGE',\n        format: 'PNG',\n        locale: 'en',\n        clip: '1',\n        version: '1.0.0'\n    },\n    \n    /**\n     * Constant: OVERLAY_PARAMS\n     * {Object} Hashtable of default parameter key/value pairs for untiled layer\n     */\n    OVERLAY_PARAMS: {\n        operation: 'GETDYNAMICMAPOVERLAYIMAGE',\n        format: 'PNG',\n        locale: 'en',\n        clip: '1',\n        version: '2.0.0'\n    },\n    \n    /** \n     * Constant: FOLDER_PARAMS\n     * {Object} Hashtable of parameter key/value pairs which describe \n     * the folder structure for tiles as configured in the mapguide \n     * serverconfig.ini section [TileServiceProperties]\n     */\n    FOLDER_PARAMS: {\n        tileColumnsPerFolder: 30,\n        tileRowsPerFolder: 30,\n        format: 'png',\n        querystring: null\n    },\n\n    /** \n     * Property: defaultSize\n     * {<OpenLayers.Size>} Tile size as produced by MapGuide server\n     **/\n    defaultSize: new OpenLayers.Size(300,300),\n\n    /** \n     * Property: tileOriginCorner\n     * {String} MapGuide tile server uses top-left as tile origin\n     **/\n    tileOriginCorner: \"tl\",\n\n    /**\n     * Constructor: OpenLayers.Layer.MapGuide\n     * Create a new Mapguide layer, either tiled or untiled.  \n     *\n     * For tiled layers, the 'groupName' and 'mapDefinition' values \n     * must be specified as parameters in the constructor.\n     *\n     * For untiled base layers, specify either combination of 'mapName' and\n     * 'session', or 'mapDefinition' and 'locale'.  \n     *\n     * For older versions of MapGuide and overlay layers, set useAsyncOverlay \n     * to false and in this case mapName and session are required parameters \n     * for the constructor.\n     *\n     * NOTE: MapGuide OS uses a DPI value and degrees to meters conversion \n     * factor that are different than the defaults used in OpenLayers, \n     * so these must be adjusted accordingly in your application.  \n     * See the MapGuide example for how to set these values for MGOS.\n     *\n     * Parameters:\n     * name - {String} Name of the layer displayed in the interface\n     * url - {String} Location of the MapGuide mapagent executable\n     *            (e.g. http://localhost:8008/mapguide/mapagent/mapagent.fcgi)\n     * params - {Object} hashtable of additional parameters to use. Some\n     *     parameters may require additional code on the server. The ones that\n     *     you may want to use are: \n     *   - mapDefinition - {String} The MapGuide resource definition\n     *            (e.g. Library://Samples/Gmap/Maps/gmapTiled.MapDefinition)\n     *   - locale - Locale setting \n     *            (for untiled overlays layers only)\n     *   - mapName - {String} Name of the map as stored in the MapGuide session.\n     *          (for untiled layers with a session parameter only)\n     *   - session - { String} MapGuide session ID \n     *            (for untiled overlays layers only)\n     *   - basemaplayergroupname - {String} GroupName for tiled MapGuide layers only\n     *   - format - Image format to be returned (for untiled overlay layers only)\n     *   - showLayers - {String} A comma separated list of GUID's for the\n     *       layers to display eg: 'cvc-xcv34,453-345-345sdf'.\n     *   - hideLayers - {String} A comma separated list of GUID's for the\n     *       layers to hide eg: 'cvc-xcv34,453-345-345sdf'.\n     *   - showGroups - {String} A comma separated list of GUID's for the\n     *       groups to display eg: 'cvc-xcv34,453-345-345sdf'.\n     *   - hideGroups - {String} A comma separated list of GUID's for the\n     *       groups to hide eg: 'cvc-xcv34,453-345-345sdf'\n     *   - selectionXml - {String} A selection xml string Some server plumbing\n     *       is required to read such a value.\n     * options - {Object} Hashtable of extra options to tag onto the layer; \n     *          will vary depending if tiled or untiled maps are being requested\n     */\n    initialize: function(name, url, params, options) {\n        \n        OpenLayers.Layer.Grid.prototype.initialize.apply(this, arguments);\n        \n        // unless explicitly set in options, if the layer is transparent, \n        // it will be an overlay\n        if (options == null || options.isBaseLayer == null) {\n            this.isBaseLayer = ((this.transparent != \"true\") && \n                                (this.transparent != true));\n        }\n\n        if (options && options.useOverlay!=null) {\n          this.useOverlay = options.useOverlay;\n        }\n        \n        //initialize for untiled layers\n        if (this.singleTile) {\n          if (this.useOverlay) {\n            OpenLayers.Util.applyDefaults(\n                           this.params,\n                           this.OVERLAY_PARAMS\n                           );\n            if (!this.useAsyncOverlay) {\n              this.params.version = \"1.0.0\";\n            }\n          } else {\n            OpenLayers.Util.applyDefaults(\n                           this.params,\n                           this.SINGLE_TILE_PARAMS\n                           );\n          }         \n        } else {\n            //initialize for tiled layers\n            if (this.useHttpTile) {\n                OpenLayers.Util.applyDefaults(\n                               this.params,\n                               this.FOLDER_PARAMS\n                               );\n            } else {\n                OpenLayers.Util.applyDefaults(\n                               this.params,\n                               this.TILE_PARAMS\n                               );\n            }\n            this.setTileSize(this.defaultSize); \n        }\n    },\n\n    /**\n     * Method: clone\n     * Create a clone of this layer\n     *\n     * Returns:\n     * {<OpenLayers.Layer.MapGuide>} An exact clone of this layer\n     */\n    clone: function (obj) {\n      if (obj == null) {\n            obj = new OpenLayers.Layer.MapGuide(this.name,\n                                           this.url,\n                                           this.params,\n                                           this.getOptions());\n      }\n      //get all additions from superclasses\n      obj = OpenLayers.Layer.Grid.prototype.clone.apply(this, [obj]);\n\n      return obj;\n    },\n\n    /**\n     * Method: getURL\n     * Return a query string for this layer\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>} A bounds representing the bbox \n     *                                for the request\n     *\n     * Returns:\n     * {String} A string with the layer's url and parameters and also \n     *          the passed-in bounds and appropriate tile size specified \n     *          as parameters.\n     */\n    getURL: function (bounds) {\n        var url;\n        var center = bounds.getCenterLonLat();\n        var mapSize = this.map.getSize();\n\n        if (this.singleTile) {\n          //set up the call for GETMAPIMAGE or GETDYNAMICMAPOVERLAY with\n          //dynamic map parameters\n          var params = {\n            setdisplaydpi: OpenLayers.DOTS_PER_INCH,\n            setdisplayheight: mapSize.h*this.ratio,\n            setdisplaywidth: mapSize.w*this.ratio,\n            setviewcenterx: center.lon,\n            setviewcentery: center.lat,\n            setviewscale: this.map.getScale()\n          };\n          \n          if (this.useOverlay && !this.useAsyncOverlay) {\n            //first we need to call GETVISIBLEMAPEXTENT to set the extent\n            var getVisParams = {};\n            getVisParams = OpenLayers.Util.extend(getVisParams, params);\n            getVisParams.operation = \"GETVISIBLEMAPEXTENT\";\n            getVisParams.version = \"1.0.0\";\n            getVisParams.session = this.params.session;\n            getVisParams.mapName = this.params.mapName;\n            getVisParams.format = 'text/xml';\n            url = this.getFullRequestString( getVisParams );\n            \n            OpenLayers.Request.GET({url: url, async: false});\n          }\n          //construct the full URL\n          url = this.getFullRequestString( params );\n        } else {\n\n          //tiled version\n          var currentRes = this.map.getResolution();\n          var colidx = Math.floor((bounds.left-this.maxExtent.left)/currentRes);\n          colidx = Math.round(colidx/this.tileSize.w);\n          var rowidx = Math.floor((this.maxExtent.top-bounds.top)/currentRes);\n          rowidx = Math.round(rowidx/this.tileSize.h);\n\n          if (this.useHttpTile){\n              url = this.getImageFilePath(\n                   {\n                       tilecol: colidx,\n                       tilerow: rowidx,\n                       scaleindex: this.resolutions.length - this.map.zoom - 1\n                    });\n\n          } else {\n            url = this.getFullRequestString(\n                   {\n                       tilecol: colidx,\n                       tilerow: rowidx,\n                       scaleindex: this.resolutions.length - this.map.zoom - 1\n                    });\n          }\n       }\n       return url;\n    },\n\n    /**\n     * Method: getFullRequestString\n     * getFullRequestString on MapGuide layers is special, because we \n     * do a regular expression replace on ',' in parameters to '+'.\n     * This is why it is subclassed here.\n     *\n     * Parameters:\n     * altUrl - {String} Alternative base URL to use.\n     *\n     * Returns:\n     * {String} A string with the layer's url appropriately encoded for MapGuide\n     */\n    getFullRequestString:function(newParams, altUrl) {\n        // use layer's url unless altUrl passed in\n        var url = (altUrl == null) ? this.url : altUrl;\n        \n        // if url is not a string, it should be an array of strings, \n        //  in which case we will randomly select one of them in order\n        //  to evenly distribute requests to different urls.\n        if (typeof url == \"object\") {\n            url = url[Math.floor(Math.random()*url.length)];\n        }   \n        // requestString always starts with url\n        var requestString = url;        \n\n        // create a new params hashtable with all the layer params and the \n        // new params together. then convert to string\n        var allParams = OpenLayers.Util.extend({}, this.params);\n        allParams = OpenLayers.Util.extend(allParams, newParams);\n        // ignore parameters that are already in the url search string\n        var urlParams = OpenLayers.Util.upperCaseObject(\n                            OpenLayers.Util.getParameters(url));\n        for(var key in allParams) {\n            if(key.toUpperCase() in urlParams) {\n                delete allParams[key];\n            }\n        }\n        var paramsString = OpenLayers.Util.getParameterString(allParams);\n        \n        /* MapGuide needs '+' separating things like bounds/height/width.\n           Since typically this is URL encoded, we use a slight hack: we\n           depend on the list-like functionality of getParameterString to\n           leave ',' only in the case of list items (since otherwise it is\n           encoded) then do a regular expression replace on the , characters\n           to '+' */\n        paramsString = paramsString.replace(/,/g, \"+\");\n        \n        if (paramsString != \"\") {\n            var lastServerChar = url.charAt(url.length - 1);\n            if ((lastServerChar == \"&\") || (lastServerChar == \"?\")) {\n                requestString += paramsString;\n            } else {\n                if (url.indexOf('?') == -1) {\n                    //serverPath has no ? -- add one\n                    requestString += '?' + paramsString;\n                } else {\n                    //serverPath contains ?, so must already have paramsString at the end\n                    requestString += '&' + paramsString;\n                }\n            }\n        }\n        return requestString;\n    },\n\n     /** \n     * Method: getImageFilePath\n     * special handler to request mapguide tiles from an http exposed tilecache \n     *\n     * Parameters:\n     * altUrl - {String} Alternative base URL to use.\n     *\n     * Returns:\n     * {String} A string with the url for the tile image\n     */\n    getImageFilePath:function(newParams, altUrl) {\n        // use layer's url unless altUrl passed in\n        var url = (altUrl == null) ? this.url : altUrl;\n        \n        // if url is not a string, it should be an array of strings, \n        //  in which case we will randomly select one of them in order\n        //  to evenly distribute requests to different urls.\n        if (typeof url == \"object\") {\n            url = url[Math.floor(Math.random()*url.length)];\n        }   \n        // requestString always starts with url\n        var requestString = url;        \n\n        var tileRowGroup = \"\";\n        var tileColGroup = \"\";\n        \n        if (newParams.tilerow < 0) {\n          tileRowGroup =  '-';\n        }\n          \n        if (newParams.tilerow == 0 ) {\n          tileRowGroup += '0';\n        } else {\n          tileRowGroup += Math.floor(Math.abs(newParams.tilerow/this.params.tileRowsPerFolder)) * this.params.tileRowsPerFolder;\n        }\n          \n        if (newParams.tilecol < 0) {\n          tileColGroup =  '-';\n        }\n        \n        if (newParams.tilecol == 0) {\n          tileColGroup += '0';\n        } else {\n          tileColGroup += Math.floor(Math.abs(newParams.tilecol/this.params.tileColumnsPerFolder)) * this.params.tileColumnsPerFolder;\n        }\n        \n        var tilePath = '/S' + Math.floor(newParams.scaleindex)\n                + '/' + this.params.basemaplayergroupname\n                + '/R' + tileRowGroup\n                + '/C' + tileColGroup\n                + '/' + (newParams.tilerow % this.params.tileRowsPerFolder) \n                + '_' + (newParams.tilecol % this.params.tileColumnsPerFolder) \n                + '.' + this.params.format;\n    \n        if (this.params.querystring) {\n               tilePath += \"?\" + this.params.querystring;\n        }\n        \n        requestString += tilePath;\n        return requestString;\n    },\n    \n    CLASS_NAME: \"OpenLayers.Layer.MapGuide\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Layer/Grid.js\n */\n\n/**\n * Class: OpenLayers.Layer.MapServer\n * Instances of OpenLayers.Layer.MapServer are used to display\n * data from a MapServer CGI instance.\n *\n * Inherits from:\n *  - <OpenLayers.Layer.Grid>\n */\nOpenLayers.Layer.MapServer = OpenLayers.Class(OpenLayers.Layer.Grid, {\n\n    /**\n     * Constant: DEFAULT_PARAMS\n     * {Object} Hashtable of default parameter key/value pairs \n     */\n    DEFAULT_PARAMS: {\n        mode: \"map\",\n        map_imagetype: \"png\"\n    },\n\n    /**\n     * Constructor: OpenLayers.Layer.MapServer\n     * Create a new MapServer layer object\n     *\n     * Parameters:\n     * name - {String} A name for the layer\n     * url - {String} Base url for the MapServer CGI\n     *       (e.g. http://www2.dmsolutions.ca/cgi-bin/mapserv)\n     * params - {Object} An object with key/value pairs representing the\n     *          GetMap query string parameters and parameter values.\n     * options - {Object} Hashtable of extra options to tag onto the layer\n     */\n    initialize: function(name, url, params, options) {\n        OpenLayers.Layer.Grid.prototype.initialize.apply(this, arguments);\n\n        this.params = OpenLayers.Util.applyDefaults(\n            this.params, this.DEFAULT_PARAMS\n        );\n\n        // unless explicitly set in options, if the layer is transparent, \n        // it will be an overlay\n        if (options == null || options.isBaseLayer == null) {\n            this.isBaseLayer = ((this.params.transparent != \"true\") && \n                                (this.params.transparent != true));\n        }\n    },\n\n    /**\n     * Method: clone\n     * Create a clone of this layer\n     *\n     * Returns:\n     * {<OpenLayers.Layer.MapServer>} An exact clone of this layer\n     */\n    clone: function (obj) {\n        if (obj == null) {\n            obj = new OpenLayers.Layer.MapServer(this.name,\n                                           this.url,\n                                           this.params,\n                                           this.getOptions());\n        }\n        //get all additions from superclasses\n        obj = OpenLayers.Layer.Grid.prototype.clone.apply(this, [obj]);\n\n        // copy/set any non-init, non-simple values here\n\n        return obj;\n    },\n    \n    /**\n     * Method: getURL\n     * Return a query string for this layer\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>} A bounds representing the bbox \n     *                                for the request\n     *\n     * Returns:\n     * {String} A string with the layer's url and parameters and also \n     *          the passed-in bounds and appropriate tile size specified \n     *          as parameters.\n     */\n    getURL: function (bounds) {\n        bounds = this.adjustBounds(bounds);\n        // Make a list, so that getFullRequestString uses literal \",\" \n        var extent = [bounds.left, bounds. bottom, bounds.right, bounds.top];\n\n        var imageSize = this.getImageSize(bounds); \n        \n        // make lists, so that literal ','s are used \n        var url = this.getFullRequestString(\n                     {mapext:   extent,\n                      imgext:   extent,\n                      map_size: [imageSize.w, imageSize.h],\n                      imgx:     imageSize.w / 2,\n                      imgy:     imageSize.h / 2,\n                      imgxy:    [imageSize.w, imageSize.h]\n                      });\n        \n        return url;\n    },\n    \n    /** \n     * Method: getFullRequestString\n     * combine the layer's url with its params and these newParams. \n     *   \n     * Parameters:\n     * newParams - {Object} New parameters that should be added to the \n     *                      request string.\n     * altUrl - {String} (optional) Replace the URL in the full request  \n     *                              string with the provided URL.\n     * \n     * Returns: \n     * {String} A string with the layer's url and parameters embedded in it.\n     */\n    getFullRequestString:function(newParams, altUrl) {\n        // use layer's url unless altUrl passed in\n        var url = (altUrl == null) ? this.url : altUrl;\n        \n        // create a new params hashtable with all the layer params and the \n        // new params together. then convert to string\n        var allParams = OpenLayers.Util.extend({}, this.params);\n        allParams = OpenLayers.Util.extend(allParams, newParams);\n        var paramsString = OpenLayers.Util.getParameterString(allParams);\n        \n        // if url is not a string, it should be an array of strings, \n        // in which case we will deterministically select one of them in \n        // order to evenly distribute requests to different urls.\n        if (OpenLayers.Util.isArray(url)) {\n            url = this.selectUrl(paramsString, url);\n        }   \n        \n        // ignore parameters that are already in the url search string\n        var urlParams = OpenLayers.Util.upperCaseObject(\n                            OpenLayers.Util.getParameters(url));\n        for(var key in allParams) {\n            if(key.toUpperCase() in urlParams) {\n                delete allParams[key];\n            }\n        }\n        paramsString = OpenLayers.Util.getParameterString(allParams);\n        \n        // requestString always starts with url\n        var requestString = url;        \n\n        // MapServer needs '+' separating things like bounds/height/width.\n        //   Since typically this is URL encoded, we use a slight hack: we\n        //  depend on the list-like functionality of getParameterString to\n        //  leave ',' only in the case of list items (since otherwise it is\n        //  encoded) then do a regular expression replace on the , characters\n        //  to '+'\n        //\n        paramsString = paramsString.replace(/,/g, \"+\");\n        \n        if (paramsString != \"\") {\n            var lastServerChar = url.charAt(url.length - 1);\n            if ((lastServerChar == \"&\") || (lastServerChar == \"?\")) {\n                requestString += paramsString;\n            } else {\n                if (url.indexOf('?') == -1) {\n                    //serverPath has no ? -- add one\n                    requestString += '?' + paramsString;\n                } else {\n                    //serverPath contains ?, so must already have paramsString at the end\n                    requestString += '&' + paramsString;\n                }\n            }\n        }\n        return requestString;\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.MapServer\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Layer/Grid.js\n */\n\n/**\n * Class: OpenLayers.Layer.KaMap\n * \n * Inherits from:\n *  - <OpenLayers.Layer.Grid>\n */\nOpenLayers.Layer.KaMap = OpenLayers.Class(OpenLayers.Layer.Grid, {\n\n    /** \n     * APIProperty: isBaseLayer\n     * {Boolean} KaMap Layer is always a base layer \n     */    \n    isBaseLayer: true,\n\n    /**\n     * Constant: DEFAULT_PARAMS\n     * {Object} parameters set by default. The default parameters set \n     * the format via the 'i' parameter to 'jpeg'.    \n     */\n    DEFAULT_PARAMS: {\n        i: 'jpeg',\n        map: ''\n    },\n        \n    /**\n     * Constructor: OpenLayers.Layer.KaMap\n     * \n     * Parameters:\n     * name - {String}\n     * url - {String}\n     * params - {Object} Parameters to be sent to the HTTP server in the\n     *    query string for the tile. The format can be set via the 'i'\n     *    parameter (defaults to jpg) , and the map should be set via \n     *    the 'map' parameter. It has been reported that ka-Map may behave\n     *    inconsistently if your format parameter does not match the format\n     *    parameter configured in your config.php. (See ticket #327 for more\n     *    information.)\n     * options - {Object} Additional options for the layer. Any of the \n     *     APIProperties listed on this layer, and any layer types it\n     *     extends, can be overridden through the options parameter. \n     */\n    initialize: function(name, url, params, options) {\n        OpenLayers.Layer.Grid.prototype.initialize.apply(this, arguments);\n        this.params = OpenLayers.Util.applyDefaults(\n            this.params, this.DEFAULT_PARAMS\n        );\n    },\n\n    /**\n     * Method: getURL\n     * \n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>} \n     * \n     * Returns:\n     * {String} A string with the layer's url and parameters and also the \n     *          passed-in bounds and appropriate tile size specified as \n     *          parameters\n     */\n    getURL: function (bounds) {\n        bounds = this.adjustBounds(bounds);\n        var mapRes = this.map.getResolution();\n        var scale = Math.round((this.map.getScale() * 10000)) / 10000;\n        var pX = Math.round(bounds.left / mapRes);\n        var pY = -Math.round(bounds.top / mapRes);\n        return this.getFullRequestString(\n                      { t: pY, \n                        l: pX,\n                        s: scale\n                      });\n    },\n\n    /** \n     * Method: calculateGridLayout\n     * ka-Map uses the center point of the map as an origin for \n     * its tiles. Override calculateGridLayout to center tiles \n     * correctly for this case.\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bound>}\n     * origin - {<OpenLayers.LonLat>}\n     * resolution - {Number}\n     *\n     * Returns:\n     * {Object} Object containing properties tilelon, tilelat, startcol,\n     * startrow\n     */\n    calculateGridLayout: function(bounds, origin, resolution) {\n        var tilelon = resolution*this.tileSize.w;\n        var tilelat = resolution*this.tileSize.h;\n        \n        var offsetlon = bounds.left;\n        var tilecol = Math.floor(offsetlon/tilelon) - this.buffer;\n        \n        var offsetlat = bounds.top;  \n        var tilerow = Math.floor(offsetlat/tilelat) + this.buffer;\n        \n        return { \n          tilelon: tilelon, tilelat: tilelat,\n          startcol: tilecol, startrow: tilerow\n        };\n    },    \n\n    /**\n     * Method: getTileBoundsForGridIndex\n     *\n     * Parameters:\n     * row - {Number} The row of the grid\n     * col - {Number} The column of the grid\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>} The bounds for the tile at (row, col)\n     */\n    getTileBoundsForGridIndex: function(row, col) {\n        var origin = this.getTileOrigin();\n        var tileLayout = this.gridLayout;\n        var tilelon = tileLayout.tilelon;\n        var tilelat = tileLayout.tilelat;\n        var minX = (tileLayout.startcol + col) * tilelon;\n        var minY = (tileLayout.startrow - row) * tilelat;\n        return new OpenLayers.Bounds(\n            minX, minY,\n            minX + tilelon, minY + tilelat\n        );\n    },\n\n    /**\n     * APIMethod: clone\n     * \n     * Parameters: \n     * obj - {Object}\n     * \n     * Returns:\n     * {<OpenLayers.Layer.Kamap>} An exact clone of this OpenLayers.Layer.KaMap\n     */\n    clone: function (obj) {\n        \n        if (obj == null) {\n            obj = new OpenLayers.Layer.KaMap(this.name,\n                                            this.url,\n                                            this.params,\n                                            this.getOptions());\n        }\n\n        //get all additions from superclasses\n        obj = OpenLayers.Layer.Grid.prototype.clone.apply(this, [obj]);\n\n        // copy/set any non-init, non-simple values here\n        if (this.tileSize != null) {\n            obj.tileSize = this.tileSize.clone();\n        }\n        \n        // we do not want to copy reference to grid, so we make a new array\n        obj.grid = [];\n\n        return obj;\n    },    \n    \n    /**\n     * APIMethod: getTileBounds\n     * Returns The tile bounds for a layer given a pixel location.\n     *\n     * Parameters:\n     * viewPortPx - {<OpenLayers.Pixel>} The location in the viewport.\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>} Bounds of the tile at the given pixel location.\n     */\n    getTileBounds: function(viewPortPx) {\n        var resolution = this.getResolution();\n        var tileMapWidth = resolution * this.tileSize.w;\n        var tileMapHeight = resolution * this.tileSize.h;\n        var mapPoint = this.getLonLatFromViewPortPx(viewPortPx);\n        var tileLeft = tileMapWidth * Math.floor(mapPoint.lon / tileMapWidth);\n        var tileBottom = tileMapHeight * Math.floor(mapPoint.lat / tileMapHeight);\n        return new OpenLayers.Bounds(tileLeft, tileBottom,\n                                     tileLeft + tileMapWidth,\n                                     tileBottom + tileMapHeight);\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.KaMap\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Layer/Grid.js\n * @requires OpenLayers/Layer/KaMap.js\n */\n\n/**\n * Class: OpenLayers.Layer.KaMapCache\n * \n * This class is designed to talk directly to a web-accessible ka-Map\n * cache generated by the precache2.php script.\n * \n * To create a a new KaMapCache layer, you must indicate also the \"i\" parameter\n * (that will be used to calculate the file extension), and another special\n * parameter, object names \"metaTileSize\", with \"h\" (height) and \"w\" (width)\n * properties.\n * \n *     // Create a new kaMapCache layer. \n *     var kamap_base = new OpenLayers.Layer.KaMapCache(\n *         \"Satellite\",\n *         \"http://www.example.org/web/acessible/cache\",\n *         {g: \"satellite\", map: \"world\", i: 'png24', metaTileSize: {w: 5, h: 5} }\n *       );\n *    \n *     // Create an kaMapCache overlay layer (using \"isBaseLayer: false\"). \n *     // Forces the output to be a \"gif\", using the \"i\" parameter.\n *     var kamap_overlay = new OpenLayers.Layer.KaMapCache(\n *         \"Streets\",\n *         \"http://www.example.org/web/acessible/cache\",\n *         {g: \"streets\", map: \"world\", i: \"gif\", metaTileSize: {w: 5, h: 5} },\n *         {isBaseLayer: false}\n *       );\n *\n * The cache URLs must look like: \n *   var/cache/World/50000/Group_Name/def/t-440320/l20480\n * \n * This means that the cache generated via tile.php will *not* work with\n *     this class, and should instead use the KaMap layer.\n *\n * More information is available in Ticket #1518.\n * \n * Inherits from:\n *  - <OpenLayers.Layer.KaMap>\n *  - <OpenLayers.Layer.Grid>\n */\nOpenLayers.Layer.KaMapCache = OpenLayers.Class(OpenLayers.Layer.KaMap, {\n\n    /**\n     * Constant: IMAGE_EXTENSIONS\n     * {Object} Simple hash map to convert format to extension.\n     */\n    IMAGE_EXTENSIONS: {\n        'jpeg': 'jpg',\n        'gif' : 'gif',\n        'png' : 'png',\n        'png8' : 'png',\n        'png24' : 'png',\n        'dithered' : 'png'\n    },\n    \n    /**\n     * Constant: DEFAULT_FORMAT\n     * {Object} Simple hash map to convert format to extension.\n     */\n    DEFAULT_FORMAT: 'jpeg',\n    \n    /**\n     * Constructor: OpenLayers.Layer.KaMapCache\n     * \n     * Parameters:\n     * name - {String}\n     * url - {String}\n     * params - {Object} Parameters to be sent to the HTTP server in the\n     *    query string for the tile. The format can be set via the 'i'\n     *    parameter (defaults to jpg) , and the map should be set via \n     *    the 'map' parameter. It has been reported that ka-Map may behave\n     *    inconsistently if your format parameter does not match the format\n     *    parameter configured in your config.php. (See ticket #327 for more\n     *    information.)\n     * options - {Object} Additional options for the layer. Any of the \n     *     APIProperties listed on this layer, and any layer types it\n     *     extends, can be overridden through the options parameter. \n     */\n    initialize: function(name, url, params, options) {\n        OpenLayers.Layer.KaMap.prototype.initialize.apply(this, arguments);\n        this.extension = this.IMAGE_EXTENSIONS[this.params.i.toLowerCase() || this.DEFAULT_FORMAT];\n    },\n\n    /**\n     * Method: getURL\n     * \n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>} \n     * \n     * Returns:\n     * {String} A string with the layer's url and parameters and also the \n     *          passed-in bounds and appropriate tile size specified as \n     *          parameters\n     */\n    getURL: function (bounds) {\n        bounds = this.adjustBounds(bounds);\n        var mapRes = this.map.getResolution();\n        var scale = Math.round((this.map.getScale() * 10000)) / 10000;\n        var pX = Math.round(bounds.left / mapRes);\n        var pY = -Math.round(bounds.top / mapRes);\n\n        var metaX = Math.floor(pX / this.tileSize.w / this.params.metaTileSize.w) * this.tileSize.w * this.params.metaTileSize.w;\n        var metaY = Math.floor(pY / this.tileSize.h / this.params.metaTileSize.h) * this.tileSize.h * this.params.metaTileSize.h;\n    \n        var components = [\n            \"/\",\n            this.params.map,\n            \"/\",\n            scale,\n            \"/\",\n            this.params.g.replace(/\\s/g, '_'),\n            \"/def/t\", \n            metaY,\n            \"/l\",\n            metaX,\n            \"/t\",\n            pY,\n            \"l\",\n            pX,\n            \".\",\n            this.extension\n          ];\n\n        var url = this.url;\n\n        if (OpenLayers.Util.isArray(url)) {\n            url = this.selectUrl(components.join(''), url);\n        }\n        return url + components.join(\"\");\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.KaMapCache\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Layer.js\n */\n\n/**\n * Class: OpenLayers.Layer.Markers\n * \n * Inherits from:\n *  - <OpenLayers.Layer> \n */\nOpenLayers.Layer.Markers = OpenLayers.Class(OpenLayers.Layer, {\n    \n    /** \n     * APIProperty: isBaseLayer \n     * {Boolean} Markers layer is never a base layer.  \n     */\n    isBaseLayer: false,\n    \n    /** \n     * APIProperty: markers \n     * {Array(<OpenLayers.Marker>)} internal marker list \n     */\n    markers: null,\n\n\n    /** \n     * Property: drawn \n     * {Boolean} internal state of drawing. This is a workaround for the fact\n     * that the map does not call moveTo with a zoomChanged when the map is\n     * first starting up. This lets us catch the case where we have *never*\n     * drawn the layer, and draw it even if the zoom hasn't changed.\n     */\n    drawn: false,\n    \n    /**\n     * Constructor: OpenLayers.Layer.Markers \n     * Create a Markers layer.\n     *\n     * Parameters:\n     * name - {String} \n     * options - {Object} Hashtable of extra options to tag onto the layer\n     */\n    initialize: function(name, options) {\n        OpenLayers.Layer.prototype.initialize.apply(this, arguments);\n        this.markers = [];\n    },\n    \n    /**\n     * APIMethod: destroy \n     */\n    destroy: function() {\n        this.clearMarkers();\n        this.markers = null;\n        OpenLayers.Layer.prototype.destroy.apply(this, arguments);\n    },\n\n    /**\n     * APIMethod: setOpacity\n     * Sets the opacity for all the markers.\n     * \n     * Parameters:\n     * opacity - {Float}\n     */\n    setOpacity: function(opacity) {\n        if (opacity != this.opacity) {\n            this.opacity = opacity;\n            for (var i=0, len=this.markers.length; i<len; i++) {\n                this.markers[i].setOpacity(this.opacity);\n            }\n        }\n    },\n\n    /** \n     * Method: moveTo\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>} \n     * zoomChanged - {Boolean} \n     * dragging - {Boolean} \n     */\n    moveTo:function(bounds, zoomChanged, dragging) {\n        OpenLayers.Layer.prototype.moveTo.apply(this, arguments);\n\n        if (zoomChanged || !this.drawn) {\n            for(var i=0, len=this.markers.length; i<len; i++) {\n                this.drawMarker(this.markers[i]);\n            }\n            this.drawn = true;\n        }\n    },\n\n    /**\n     * APIMethod: addMarker\n     *\n     * Parameters:\n     * marker - {<OpenLayers.Marker>} \n     */\n    addMarker: function(marker) {\n        this.markers.push(marker);\n\n        if (this.opacity < 1) {\n            marker.setOpacity(this.opacity);\n        }\n\n        if (this.map && this.map.getExtent()) {\n            marker.map = this.map;\n            this.drawMarker(marker);\n        }\n    },\n\n    /**\n     * APIMethod: removeMarker\n     *\n     * Parameters:\n     * marker - {<OpenLayers.Marker>} \n     */\n    removeMarker: function(marker) {\n        if (this.markers && this.markers.length) {\n            OpenLayers.Util.removeItem(this.markers, marker);\n            marker.erase();\n        }\n    },\n\n    /**\n     * Method: clearMarkers\n     * This method removes all markers from a layer. The markers are not\n     * destroyed by this function, but are removed from the list of markers.\n     */\n    clearMarkers: function() {\n        if (this.markers != null) {\n            while(this.markers.length > 0) {\n                this.removeMarker(this.markers[0]);\n            }\n        }\n    },\n\n    /** \n     * Method: drawMarker\n     * Calculate the pixel location for the marker, create it, and \n     *    add it to the layer's div\n     *\n     * Parameters:\n     * marker - {<OpenLayers.Marker>} \n     */\n    drawMarker: function(marker) {\n        var px = this.map.getLayerPxFromLonLat(marker.lonlat);\n        if (px == null) {\n            marker.display(false);\n        } else {\n            if (!marker.isDrawn()) {\n                var markerImg = marker.draw(px);\n                this.div.appendChild(markerImg);\n            } else if(marker.icon) {\n                marker.icon.moveTo(px);\n            }\n        }\n    },\n    \n    /** \n     * APIMethod: getDataExtent\n     * Calculates the max extent which includes all of the markers.\n     * \n     * Returns:\n     * {<OpenLayers.Bounds>}\n     */\n    getDataExtent: function () {\n        var maxExtent = null;\n        \n        if ( this.markers && (this.markers.length > 0)) {\n            var maxExtent = new OpenLayers.Bounds();\n            for(var i=0, len=this.markers.length; i<len; i++) {\n                var marker = this.markers[i];\n                maxExtent.extend(marker.lonlat);\n            }\n        }\n\n        return maxExtent;\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.Markers\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Layer/Markers.js\n * @requires OpenLayers/Format/Text.js\n * @requires OpenLayers/Request/XMLHttpRequest.js\n */\n\n/**\n * Class: OpenLayers.Layer.Text\n * This layer creates markers given data in a text file.  The <location>\n *     property of the layer (specified as a property of the options argument\n *     in the <OpenLayers.Layer.Text> constructor) points to a tab delimited\n *     file with data used to create markers.\n *\n * The first row of the data file should be a header line with the column names\n *     of the data. Each column should be delimited by a tab space. The\n *     possible columns are:\n *      - *point* lat,lon of the point where a marker is to be placed\n *      - *lat*  Latitude of the point where a marker is to be placed\n *      - *lon*  Longitude of the point where a marker is to be placed\n *      - *icon* or *image* URL of marker icon to use.\n *      - *iconSize* Size of Icon to use.\n *      - *iconOffset* Where the top-left corner of the icon is to be placed\n *            relative to the latitude and longitude of the point.\n *      - *title* The text of the 'title' is placed inside an 'h2' marker\n *            inside a popup, which opens when the marker is clicked.\n *      - *description* The text of the 'description' is placed below the h2\n *            in the popup. this can be plain text or HTML.\n *\n * Example text file:\n * (code)\n * lat\tlon\ttitle\tdescription\ticonSize\ticonOffset\ticon\n * 10\t20\ttitle\tdescription\t21,25\t\t-10,-25\t\thttp://www.openlayers.org/dev/img/marker.png\n * (end)\n *\n * Inherits from:\n *  - <OpenLayers.Layer.Markers>\n */\nOpenLayers.Layer.Text = OpenLayers.Class(OpenLayers.Layer.Markers, {\n\n    /**\n     * APIProperty: location \n     * {String} URL of text file.  Must be specified in the \"options\" argument\n     *   of the constructor. Can not be changed once passed in. \n     */\n    location:null,\n\n    /** \n     * Property: features\n     * {Array(<OpenLayers.Feature>)} \n     */\n    features: null,\n    \n    /**\n     * APIProperty: formatOptions\n     * {Object} Hash of options which should be passed to the format when it is\n     * created. Must be passed in the constructor.\n     */\n    formatOptions: null, \n\n    /** \n     * Property: selectedFeature\n     * {<OpenLayers.Feature>}\n     */\n    selectedFeature: null,\n\n    /**\n     * Constructor: OpenLayers.Layer.Text\n     * Create a text layer.\n     * \n     * Parameters:\n     * name - {String} \n     * options - {Object} Object with properties to be set on the layer.\n     *     Must include <location> property.\n     */\n    initialize: function(name, options) {\n        OpenLayers.Layer.Markers.prototype.initialize.apply(this, arguments);\n        this.features = [];\n    },\n\n    /**\n     * APIMethod: destroy \n     */\n    destroy: function() {\n        // Warning: Layer.Markers.destroy() must be called prior to calling\n        // clearFeatures() here, otherwise we leak memory. Indeed, if\n        // Layer.Markers.destroy() is called after clearFeatures(), it won't be\n        // able to remove the marker image elements from the layer's div since\n        // the markers will have been destroyed by clearFeatures().\n        OpenLayers.Layer.Markers.prototype.destroy.apply(this, arguments);\n        this.clearFeatures();\n        this.features = null;\n    },\n    \n    /**\n     * Method: loadText\n     * Start the load of the Text data. Don't do this when we first add the layer,\n     * since we may not be visible at any point, and it would therefore be a waste.\n     */\n    loadText: function() {\n        if (!this.loaded) {\n            if (this.location != null) {\n\n                var onFail = function(e) {\n                    this.events.triggerEvent(\"loadend\");\n                };\n\n                this.events.triggerEvent(\"loadstart\");\n                OpenLayers.Request.GET({\n                    url: this.location,\n                    success: this.parseData,\n                    failure: onFail,\n                    scope: this\n                });\n                this.loaded = true;\n            }\n        }    \n    },    \n    \n    /**\n     * Method: moveTo\n     * If layer is visible and Text has not been loaded, load Text. \n     * \n     * Parameters:\n     * bounds - {Object} \n     * zoomChanged - {Object} \n     * minor - {Object} \n     */\n    moveTo:function(bounds, zoomChanged, minor) {\n        OpenLayers.Layer.Markers.prototype.moveTo.apply(this, arguments);\n        if(this.visibility && !this.loaded){\n            this.loadText();\n        }\n    },\n    \n    /**\n     * Method: parseData\n     *\n     * Parameters:\n     * ajaxRequest - {<OpenLayers.Request.XMLHttpRequest>} \n     */\n    parseData: function(ajaxRequest) {\n        var text = ajaxRequest.responseText;\n        \n        var options = {};\n        \n        OpenLayers.Util.extend(options, this.formatOptions);\n        \n        if (this.map && !this.projection.equals(this.map.getProjectionObject())) {\n            options.externalProjection = this.projection;\n            options.internalProjection = this.map.getProjectionObject();\n        }    \n        \n        var parser = new OpenLayers.Format.Text(options);\n        var features = parser.read(text);\n        for (var i=0, len=features.length; i<len; i++) {\n            var data = {};\n            var feature = features[i];\n            var location;\n            var iconSize, iconOffset;\n            \n            location = new OpenLayers.LonLat(feature.geometry.x, \n                                             feature.geometry.y);\n            \n            if (feature.style.graphicWidth \n                && feature.style.graphicHeight) {\n                iconSize = new OpenLayers.Size(\n                    feature.style.graphicWidth,\n                    feature.style.graphicHeight);\n            }        \n            \n            // FIXME: At the moment, we only use this if we have an \n            // externalGraphic, because icon has no setOffset API Method.\n            /**\n             * FIXME FIRST!!\n             * The Text format does all sorts of parseFloating\n             * The result of a parseFloat for a bogus string is NaN.  That\n             * means the three possible values here are undefined, NaN, or a\n             * number.  The previous check was an identity check for null.  This\n             * means it was failing for all undefined or NaN.  A slightly better\n             * check is for undefined.  An even better check is to see if the\n             * value is a number (see #1441).\n             */\n            if (feature.style.graphicXOffset !== undefined\n                && feature.style.graphicYOffset !== undefined) {\n                iconOffset = new OpenLayers.Pixel(\n                    feature.style.graphicXOffset, \n                    feature.style.graphicYOffset);\n            }\n            \n            if (feature.style.externalGraphic != null) {\n                data.icon = new OpenLayers.Icon(feature.style.externalGraphic, \n                                                iconSize, \n                                                iconOffset);\n            } else {\n                data.icon = OpenLayers.Marker.defaultIcon();\n\n                //allows for the case where the image url is not \n                // specified but the size is. use a default icon\n                // but change the size\n                if (iconSize != null) {\n                    data.icon.setSize(iconSize);\n                }\n            }\n            \n            if ((feature.attributes.title != null) \n                && (feature.attributes.description != null)) {\n                data['popupContentHTML'] = \n                    '<h2>'+feature.attributes.title+'</h2>' + \n                    '<p>'+feature.attributes.description+'</p>';\n            }\n            \n            data['overflow'] = feature.attributes.overflow || \"auto\"; \n            \n            var markerFeature = new OpenLayers.Feature(this, location, data);\n            this.features.push(markerFeature);\n            var marker = markerFeature.createMarker();\n            if ((feature.attributes.title != null) \n                && (feature.attributes.description != null)) {\n              marker.events.register('click', markerFeature, this.markerClick);\n            }\n            this.addMarker(marker);\n        }\n        this.events.triggerEvent(\"loadend\");\n    },\n    \n    /**\n     * Property: markerClick\n     * \n     * Parameters:\n     * evt - {Event} \n     *\n     * Context:\n     * - {<OpenLayers.Feature>}\n     */\n    markerClick: function(evt) {\n        var sameMarkerClicked = (this == this.layer.selectedFeature);\n        this.layer.selectedFeature = (!sameMarkerClicked) ? this : null;\n        for(var i=0, len=this.layer.map.popups.length; i<len; i++) {\n            this.layer.map.removePopup(this.layer.map.popups[i]);\n        }\n        if (!sameMarkerClicked) {\n            this.layer.map.addPopup(this.createPopup()); \n        }\n        OpenLayers.Event.stop(evt);\n    },\n\n    /**\n     * Method: clearFeatures\n     */\n    clearFeatures: function() {\n        if (this.features != null) {\n            while(this.features.length > 0) {\n                var feature = this.features[0];\n                OpenLayers.Util.removeItem(this.features, feature);\n                feature.destroy();\n            }\n        }        \n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.Text\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Layer/Grid.js\n */\n\n/**\n * Class: OpenLayers.Layer.WorldWind\n * \n * Inherits from:\n *  - <OpenLayers.Layer.Grid>\n */\nOpenLayers.Layer.WorldWind = OpenLayers.Class(OpenLayers.Layer.Grid, {\n    \n    DEFAULT_PARAMS: {\n    },\n\n    /**\n     * APIProperty: isBaseLayer\n     * {Boolean} WorldWind layer is a base layer by default.\n     */\n    isBaseLayer: true,\n\n    /** \n     * APIProperty: lzd\n     * {Float} LevelZeroTileSizeDegrees\n     */\n    lzd: null,\n\n    /**\n     * APIProperty: zoomLevels\n     * {Integer} Number of zoom levels.\n     */\n    zoomLevels: null,\n    \n    /**\n     * Constructor: OpenLayers.Layer.WorldWind\n     * \n     * Parameters:\n     * name - {String} Name of Layer\n     * url - {String} Base URL  \n     * lzd - {Float} Level zero tile size degrees \n     * zoomLevels - {Integer} number of zoom levels\n     * params - {Object} additional parameters\n     * options - {Object} additional options\n     */\n    initialize: function(name, url, lzd, zoomLevels, params, options) {\n        this.lzd = lzd;\n        this.zoomLevels = zoomLevels;\n        var newArguments = [];\n        newArguments.push(name, url, params, options);\n        OpenLayers.Layer.Grid.prototype.initialize.apply(this, newArguments);\n        this.params = OpenLayers.Util.applyDefaults(\n            this.params, this.DEFAULT_PARAMS\n        );\n    },\n\n    /**\n     * Method: getZoom\n     * Convert map zoom to WW zoom.\n     */\n    getZoom: function () {\n        var zoom = this.map.getZoom();\n        var extent = this.map.getMaxExtent();\n        zoom = zoom - Math.log(this.maxResolution / (this.lzd/512))/Math.log(2);\n        return zoom;\n    },\n\n    /**\n     * Method: getURL\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>} \n     *\n     * Returns:\n     * {String} A string with the layer's url and parameters and also the \n     *           passed-in bounds and appropriate tile size specified as \n     *           parameters\n     */\n    getURL: function (bounds) {\n        bounds = this.adjustBounds(bounds);\n        var zoom = this.getZoom();\n        var extent = this.map.getMaxExtent();\n        var deg = this.lzd/Math.pow(2,this.getZoom());\n        var x = Math.floor((bounds.left - extent.left)/deg);\n        var y = Math.floor((bounds.bottom - extent.bottom)/deg);\n        if (this.map.getResolution() <= (this.lzd/512)\n            && this.getZoom() <= this.zoomLevels) {\n            return this.getFullRequestString(\n              { L: zoom, \n                X: x,\n                Y: y\n              });\n        } else {\n            return OpenLayers.Util.getImageLocation(\"blank.gif\");\n        }\n\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.WorldWind\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Layer/Grid.js\n */\n\n/**\n * Class: OpenLayers.Layer.ArcGIS93Rest\n * Instances of OpenLayers.Layer.ArcGIS93Rest are used to display data from\n *     ESRI ArcGIS Server 9.3 (and up?) Mapping Services using the REST API.\n *     Create a new ArcGIS93Rest layer with the <OpenLayers.Layer.ArcGIS93Rest>\n *     constructor.  More detail on the REST API is available at\n *     http://sampleserver1.arcgisonline.com/ArcGIS/SDK/REST/index.html ;\n *     specifically, the URL provided to this layer should be an export service\n *     URL: http://sampleserver1.arcgisonline.com/ArcGIS/SDK/REST/export.html \n * \n * Inherits from:\n *  - <OpenLayers.Layer.Grid>\n */\nOpenLayers.Layer.ArcGIS93Rest = OpenLayers.Class(OpenLayers.Layer.Grid, {\n\n    /**\n     * Constant: DEFAULT_PARAMS\n     * {Object} Hashtable of default parameter key/value pairs \n     */\n    DEFAULT_PARAMS: { \n      format: \"png\"\n    },\n        \n    /**\n     * APIProperty: isBaseLayer\n     * {Boolean} Default is true for ArcGIS93Rest layer\n     */\n    isBaseLayer: true,\n \n \n    /**\n     * Constructor: OpenLayers.Layer.ArcGIS93Rest\n     * Create a new ArcGIS93Rest layer object.\n     *\n     * Example:\n     * (code)\n     * var arcims = new OpenLayers.Layer.ArcGIS93Rest(\"MyName\",\n     *                                    \"http://sampleserver1.arcgisonline.com/ArcGIS/rest/services/Specialty/ESRI_StateCityHighway_USA/MapServer/export\", \n     *                                    {\n     *                                      layers: \"show:0,1,2\"\n     *                                    });\n     * (end)\n     *\n     * Parameters:\n     * name - {String} A name for the layer\n     * url - {String} Base url for the ArcGIS server REST service\n     * params - {Object} An object with key/value pairs representing the\n     *                   query string parameters and values.\n     * options - {Object} Hashtable of extra options to tag onto the layer.\n     *\n     * Valid Query Parameters:\n     *        format - {String} MIME type of desired image type.  Default is 'png'\n     *        layers - {String} Comma-separated list of layers to display (requires show: command).\n     *        srs - {String} Projection ID.\n     *        transparent - {Boolean} sets transparency of images.  May apply some alphaHack magic.\n     */\n    initialize: function(name, url, params, options) {\n        var newArguments = [];\n        //uppercase params\n        params = OpenLayers.Util.upperCaseObject(params);\n        newArguments.push(name, url, params, options);\n        OpenLayers.Layer.Grid.prototype.initialize.apply(this, newArguments);\n        OpenLayers.Util.applyDefaults(\n                       this.params, \n                       OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS)\n                       );\n                       \n        //layer is transparent        \n        if (this.params.TRANSPARENT && \n            this.params.TRANSPARENT.toString().toLowerCase() == \"true\") {\n            \n            // unless explicitly set in options, make layer an overlay\n            if ( (options == null) || (!options.isBaseLayer) ) {\n                this.isBaseLayer = false;\n            } \n            \n            // jpegs can never be transparent, so intelligently switch the \n            //  format, depending on the browser's capabilities\n            if (this.params.FORMAT == \"jpg\") {\n                this.params.FORMAT = OpenLayers.Util.alphaHack() ? \"gif\"\n                                                                 : \"png\";\n            }\n        }\n    },    \n\n    /**\n         * Method: clone\n         * Create a clone of this layer\n         *\n         * Returns:\n         * {<OpenLayers.Layer.ArcGIS93Rest>} An exact clone of this layer\n         */\n    clone: function (obj) {\n        \n        if (obj == null) {\n            obj = new OpenLayers.Layer.ArcGIS93Rest(this.name,\n                                           this.url,\n                                           this.params,\n                                           this.getOptions());\n        }\n\n        //get all additions from superclasses\n        obj = OpenLayers.Layer.Grid.prototype.clone.apply(this, [obj]);\n\n        // copy/set any non-init, non-simple values here\n\n        return obj;\n    },\n    \n    \n    /**\n     * Method: getURL\n     * Return an image url this layer.\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>} A bounds representing the bbox for the\n     *                                request.\n     *\n     * Returns:\n     * {String} A string with the map image's url.\n     */\n    getURL: function (bounds) {\n        bounds = this.adjustBounds(bounds);\n\n        // ArcGIS Server only wants the numeric portion of the projection ID.\n        var projWords = this.projection.getCode().split(\":\");\n        var srid = projWords[projWords.length - 1];\n\n        var imageSize = this.getImageSize(bounds); \n        var newParams = {\n            'BBOX': bounds.toBBOX(),\n            'SIZE': imageSize.w + \",\" + imageSize.h,\n            // We always want image, the other options were json, image with a whole lotta html around it, etc.\n            'F': \"image\",\n            'BBOXSR': srid,\n            'IMAGESR': srid\n        };\n\n        // Now add the filter parameters.\n        if (this.layerDefs) {\n            var layerDefStrList = [];\n            var layerID;\n            for(layerID in this.layerDefs) {\n                if (this.layerDefs.hasOwnProperty(layerID)) {\n                    if (this.layerDefs[layerID]) {\n                        layerDefStrList.push(layerID);\n                        layerDefStrList.push(\":\");\n                        layerDefStrList.push(this.layerDefs[layerID]);\n                        layerDefStrList.push(\";\");\n                    }\n                }\n            }\n            if (layerDefStrList.length > 0) {\n                newParams['LAYERDEFS'] = layerDefStrList.join(\"\");\n            }\n        }\n        var requestString = this.getFullRequestString(newParams);\n        return requestString;\n    },\n    \n    /**\n     * Method: setLayerFilter\n     * addTile creates a tile, initializes it, and adds it to the layer div. \n     *\n     * Parameters:\n     * id - {String} The id of the layer to which the filter applies.\n     * queryDef - {String} A sql-ish query filter, for more detail see the ESRI\n     *                     documentation at http://sampleserver1.arcgisonline.com/ArcGIS/SDK/REST/export.html\n     */\n    setLayerFilter: function ( id, queryDef ) {\n        if (!this.layerDefs) {\n            this.layerDefs = {};\n        }\n        if (queryDef) {\n            this.layerDefs[id] = queryDef;\n        } else {\n            delete this.layerDefs[id];\n        }\n    },\n    \n    /**\n     * Method: clearLayerFilter\n     * Clears layer filters, either from a specific layer,\n     * or all of them.\n     *\n     * Parameters:\n     * id - {String} The id of the layer from which to remove any\n     *               filter.  If unspecified/blank, all filters\n     *               will be removed.\n     */\n    clearLayerFilter: function ( id ) {\n        if (id) {\n            delete this.layerDefs[id];\n        } else {\n            delete this.layerDefs;\n        }\n    },\n    \n    /**\n     * APIMethod: mergeNewParams\n     * Catch changeParams and uppercase the new params to be merged in\n     *     before calling changeParams on the super class.\n     * \n     *     Once params have been changed, the tiles will be reloaded with\n     *     the new parameters.\n     * \n     * Parameters:\n     * newParams - {Object} Hashtable of new params to use\n     */\n    mergeNewParams:function(newParams) {\n        var upperParams = OpenLayers.Util.upperCaseObject(newParams);\n        var newArguments = [upperParams];\n        return OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this, \n                                                             newArguments);\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.ArcGIS93Rest\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Layer/Grid.js\n */\n\n/**\n * Class: OpenLayers.Layer.WMS\n * Instances of OpenLayers.Layer.WMS are used to display data from OGC Web\n *     Mapping Services. Create a new WMS layer with the <OpenLayers.Layer.WMS>\n *     constructor.\n * \n * Inherits from:\n *  - <OpenLayers.Layer.Grid>\n */\nOpenLayers.Layer.WMS = OpenLayers.Class(OpenLayers.Layer.Grid, {\n\n    /**\n     * Constant: DEFAULT_PARAMS\n     * {Object} Hashtable of default parameter key/value pairs \n     */\n    DEFAULT_PARAMS: { service: \"WMS\",\n                      version: \"1.1.1\",\n                      request: \"GetMap\",\n                      styles: \"\",\n                      format: \"image/jpeg\"\n                     },\n    \n    /**\n     * APIProperty: isBaseLayer\n     * {Boolean} Default is true for WMS layer\n     */\n    isBaseLayer: true,\n    \n    /**\n     * APIProperty: encodeBBOX\n     * {Boolean} Should the BBOX commas be encoded? The WMS spec says 'no', \n     * but some services want it that way. Default false.\n     */\n    encodeBBOX: false,\n    \n    /** \n     * APIProperty: noMagic \n     * {Boolean} If true, the image format will not be automagicaly switched \n     *     from image/jpeg to image/png or image/gif when using \n     *     TRANSPARENT=TRUE. Also isBaseLayer will not changed by the  \n     *     constructor. Default false. \n     */ \n    noMagic: false,\n    \n    /**\n     * Property: yx\n     * {Object} Keys in this object are EPSG codes for which the axis order\n     *     is to be reversed (yx instead of xy, LatLon instead of LonLat), with\n     *     true as value. This is only relevant for WMS versions >= 1.3.0, and\n     *     only if yx is not set in <OpenLayers.Projection.defaults> for the\n     *     used projection.\n     */\n    yx: {},\n    \n    /**\n     * Constructor: OpenLayers.Layer.WMS\n     * Create a new WMS layer object\n     *\n     * Examples:\n     *\n     * The code below creates a simple WMS layer using the image/jpeg format.\n     * (code)\n     * var wms = new OpenLayers.Layer.WMS(\"NASA Global Mosaic\",\n     *                                    \"http://wms.jpl.nasa.gov/wms.cgi\", \n     *                                    {layers: \"modis,global_mosaic\"});\n     * (end)\n     * Note the 3rd argument (params). Properties added to this object will be\n     * added to the WMS GetMap requests used for this layer's tiles. The only\n     * mandatory parameter is \"layers\". Other common WMS params include\n     * \"transparent\", \"styles\" and \"format\". Note that the \"srs\" param will\n     * always be ignored. Instead, it will be derived from the baseLayer's or\n     * map's projection.\n     *\n     * The code below creates a transparent WMS layer with additional options.\n     * (code)\n     * var wms = new OpenLayers.Layer.WMS(\"NASA Global Mosaic\",\n     *                                    \"http://wms.jpl.nasa.gov/wms.cgi\", \n     *                                    {\n     *                                        layers: \"modis,global_mosaic\",\n     *                                        transparent: true\n     *                                    }, {\n     *                                        opacity: 0.5,\n     *                                        singleTile: true\n     *                                    });\n     * (end)\n     * Note that by default, a WMS layer is configured as baseLayer. Setting\n     * the \"transparent\" param to true will apply some magic (see <noMagic>).\n     * The default image format changes from image/jpeg to image/png, and the\n     * layer is not configured as baseLayer.\n     *\n     * Parameters:\n     * name - {String} A name for the layer\n     * url - {String} Base url for the WMS\n     *                (e.g. http://wms.jpl.nasa.gov/wms.cgi)\n     * params - {Object} An object with key/value pairs representing the\n     *                   GetMap query string parameters and parameter values.\n     * options - {Object} Hashtable of extra options to tag onto the layer.\n     *     These options include all properties listed above, plus the ones\n     *     inherited from superclasses.\n     */\n    initialize: function(name, url, params, options) {\n        var newArguments = [];\n        //uppercase params\n        params = OpenLayers.Util.upperCaseObject(params);\n        if (parseFloat(params.VERSION) >= 1.3 && !params.EXCEPTIONS) {\n            params.EXCEPTIONS = \"INIMAGE\";\n        } \n        newArguments.push(name, url, params, options);\n        OpenLayers.Layer.Grid.prototype.initialize.apply(this, newArguments);\n        OpenLayers.Util.applyDefaults(\n                       this.params, \n                       OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS)\n                       );\n\n\n        //layer is transparent        \n        if (!this.noMagic && this.params.TRANSPARENT && \n            this.params.TRANSPARENT.toString().toLowerCase() == \"true\") {\n            \n            // unless explicitly set in options, make layer an overlay\n            if ( (options == null) || (!options.isBaseLayer) ) {\n                this.isBaseLayer = false;\n            } \n            \n            // jpegs can never be transparent, so intelligently switch the \n            //  format, depending on the browser's capabilities\n            if (this.params.FORMAT == \"image/jpeg\") {\n                this.params.FORMAT = OpenLayers.Util.alphaHack() ? \"image/gif\"\n                                                                 : \"image/png\";\n            }\n        }\n\n    },    \n\n    /**\n     * Method: clone\n     * Create a clone of this layer\n     *\n     * Returns:\n     * {<OpenLayers.Layer.WMS>} An exact clone of this layer\n     */\n    clone: function (obj) {\n        \n        if (obj == null) {\n            obj = new OpenLayers.Layer.WMS(this.name,\n                                           this.url,\n                                           this.params,\n                                           this.getOptions());\n        }\n\n        //get all additions from superclasses\n        obj = OpenLayers.Layer.Grid.prototype.clone.apply(this, [obj]);\n\n        // copy/set any non-init, non-simple values here\n\n        return obj;\n    },    \n    \n    /**\n     * APIMethod: reverseAxisOrder\n     * Returns true if the axis order is reversed for the WMS version and\n     * projection of the layer.\n     * \n     * Returns:\n     * {Boolean} true if the axis order is reversed, false otherwise.\n     */\n    reverseAxisOrder: function() {\n        var projCode = this.projection.getCode();\n        return parseFloat(this.params.VERSION) >= 1.3 && \n            !!(this.yx[projCode] || (OpenLayers.Projection.defaults[projCode] && \n            OpenLayers.Projection.defaults[projCode].yx));\n    },\n    \n    /**\n     * Method: getURL\n     * Return a GetMap query string for this layer\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>} A bounds representing the bbox for the\n     *                                request.\n     *\n     * Returns:\n     * {String} A string with the layer's url and parameters and also the\n     *          passed-in bounds and appropriate tile size specified as \n     *          parameters.\n     */\n    getURL: function (bounds) {\n        bounds = this.adjustBounds(bounds);\n        \n        var imageSize = this.getImageSize(bounds);\n        var newParams = {};\n        // WMS 1.3 introduced axis order\n        var reverseAxisOrder = this.reverseAxisOrder();\n        newParams.BBOX = this.encodeBBOX ?\n            bounds.toBBOX(null, reverseAxisOrder) :\n            bounds.toArray(reverseAxisOrder);\n        newParams.WIDTH = imageSize.w;\n        newParams.HEIGHT = imageSize.h;\n        var requestString = this.getFullRequestString(newParams);\n        return requestString;\n    },\n\n    /**\n     * APIMethod: mergeNewParams\n     * Catch changeParams and uppercase the new params to be merged in\n     *     before calling changeParams on the super class.\n     * \n     *     Once params have been changed, the tiles will be reloaded with\n     *     the new parameters.\n     * \n     * Parameters:\n     * newParams - {Object} Hashtable of new params to use\n     */\n    mergeNewParams:function(newParams) {\n        var upperParams = OpenLayers.Util.upperCaseObject(newParams);\n        var newArguments = [upperParams];\n        return OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this, \n                                                             newArguments);\n    },\n\n    /** \n     * APIMethod: getFullRequestString\n     * Combine the layer's url with its params and these newParams. \n     *   \n     *     Add the SRS parameter from projection -- this is probably\n     *     more eloquently done via a setProjection() method, but this \n     *     works for now and always.\n     *\n     * Parameters:\n     * newParams - {Object}\n     * altUrl - {String} Use this as the url instead of the layer's url\n     * \n     * Returns:\n     * {String} \n     */\n    getFullRequestString:function(newParams, altUrl) {\n        var mapProjection = this.map.getProjectionObject();\n        var projectionCode = this.projection && this.projection.equals(mapProjection) ?\n            this.projection.getCode() :\n            mapProjection.getCode();\n        var value = (projectionCode == \"none\") ? null : projectionCode;\n        if (parseFloat(this.params.VERSION) >= 1.3) {\n            this.params.CRS = value;\n        } else {\n            this.params.SRS = value;\n        }\n        \n        if (typeof this.params.TRANSPARENT == \"boolean\") {\n            newParams.TRANSPARENT = this.params.TRANSPARENT ? \"TRUE\" : \"FALSE\";\n        }\n\n        return OpenLayers.Layer.Grid.prototype.getFullRequestString.apply(\n                                                    this, arguments);\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.WMS\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Layer/Grid.js\n */\n\n/**\n * Class: OpenLayers.Layer.WMTS\n * Instances of the WMTS class allow viewing of tiles from a service that \n *     implements the OGC WMTS specification version 1.0.0.\n * \n * Inherits from:\n *  - <OpenLayers.Layer.Grid>\n */\nOpenLayers.Layer.WMTS = OpenLayers.Class(OpenLayers.Layer.Grid, {\n    \n    /**\n     * APIProperty: isBaseLayer\n     * {Boolean} The layer will be considered a base layer.  Default is true.\n     */\n    isBaseLayer: true,\n\n    /**\n     * Property: version\n     * {String} WMTS version.  Default is \"1.0.0\".\n     */\n    version: \"1.0.0\",\n    \n    /**\n     * APIProperty: requestEncoding\n     * {String} Request encoding.  Can be \"REST\" or \"KVP\".  Default is \"KVP\".\n     */\n    requestEncoding: \"KVP\",\n    \n    /**\n     * APIProperty: url\n     * {String|Array(String)} The base URL or request URL template for the WMTS\n     * service. Must be provided. Array is only supported for base URLs, not\n     * for request URL templates. URL templates are only supported for\n     * REST <requestEncoding>.\n     */\n    url: null,\n\n    /**\n     * APIProperty: layer\n     * {String} The layer identifier advertised by the WMTS service.  Must be \n     *     provided.\n     */\n    layer: null,\n    \n    /** \n     * APIProperty: matrixSet\n     * {String} One of the advertised matrix set identifiers.  Must be provided.\n     */\n    matrixSet: null,\n\n    /** \n     * APIProperty: style\n     * {String} One of the advertised layer styles.  Must be provided.\n     */\n    style: null,\n    \n    /** \n     * APIProperty: format\n     * {String} The image MIME type.  Default is \"image/jpeg\".\n     */\n    format: \"image/jpeg\",\n    \n    /**\n     * APIProperty: tileOrigin\n     * {<OpenLayers.LonLat>} The top-left corner of the tile matrix in map \n     *     units.  If the tile origin for each matrix in a set is different,\n     *     the <matrixIds> should include a topLeftCorner property.  If\n     *     not provided, the tile origin will default to the top left corner\n     *     of the layer <maxExtent>.\n     */\n    tileOrigin: null,\n    \n    /**\n     * APIProperty: tileFullExtent\n     * {<OpenLayers.Bounds>}  The full extent of the tile set.  If not supplied,\n     *     the layer's <maxExtent> property will be used.\n     */\n    tileFullExtent: null,\n\n    /**\n     * APIProperty: formatSuffix\n     * {String} For REST request encoding, an image format suffix must be \n     *     included in the request.  If not provided, the suffix will be derived\n     *     from the <format> property.\n     */\n    formatSuffix: null,    \n\n    /**\n     * APIProperty: matrixIds\n     * {Array} A list of tile matrix identifiers.  If not provided, the matrix\n     *     identifiers will be assumed to be integers corresponding to the \n     *     map zoom level.  If a list of strings is provided, each item should\n     *     be the matrix identifier that corresponds to the map zoom level.\n     *     Additionally, a list of objects can be provided.  Each object should\n     *     describe the matrix as presented in the WMTS capabilities.  These\n     *     objects should have the properties shown below.\n     * \n     * Matrix properties:\n     * identifier - {String} The matrix identifier (required).\n     * scaleDenominator - {Number} The matrix scale denominator.\n     * topLeftCorner - {<OpenLayers.LonLat>} The top left corner of the \n     *     matrix.  Must be provided if different than the layer <tileOrigin>.\n     * tileWidth - {Number} The tile width for the matrix.  Must be provided \n     *     if different than the width given in the layer <tileSize>.\n     * tileHeight - {Number} The tile height for the matrix.  Must be provided \n     *     if different than the height given in the layer <tileSize>.\n     */\n    matrixIds: null,\n    \n    /**\n     * APIProperty: dimensions\n     * {Array} For RESTful request encoding, extra dimensions may be specified.\n     *     Items in this list should be property names in the <params> object.\n     *     Values of extra dimensions will be determined from the corresponding\n     *     values in the <params> object.\n     */\n    dimensions: null,\n    \n    /**\n     * APIProperty: params\n     * {Object} Extra parameters to include in tile requests.  For KVP \n     *     <requestEncoding>, these properties will be encoded in the request \n     *     query string.  For REST <requestEncoding>, these properties will\n     *     become part of the request path, with order determined by the \n     *     <dimensions> list.\n     */\n    params: null,\n    \n    /**\n     * APIProperty: zoomOffset\n     * {Number} If your cache has more levels than you want to provide\n     *     access to with this layer, supply a zoomOffset.  This zoom offset\n     *     is added to the current map zoom level to determine the level\n     *     for a requested tile.  For example, if you supply a zoomOffset\n     *     of 3, when the map is at the zoom 0, tiles will be requested from\n     *     level 3 of your cache.  Default is 0 (assumes cache level and map\n     *     zoom are equivalent).  Additionally, if this layer is to be used\n     *     as an overlay and the cache has fewer zoom levels than the base\n     *     layer, you can supply a negative zoomOffset.  For example, if a\n     *     map zoom level of 1 corresponds to your cache level zero, you would\n     *     supply a -1 zoomOffset (and set the maxResolution of the layer\n     *     appropriately).  The zoomOffset value has no effect if complete\n     *     matrix definitions (including scaleDenominator) are supplied in\n     *     the <matrixIds> property.  Defaults to 0 (no zoom offset).\n     */\n    zoomOffset: 0,\n\n    /**\n     * APIProperty: serverResolutions\n     * {Array} A list of all resolutions available on the server.  Only set this\n     *     property if the map resolutions differ from the server. This\n     *     property serves two purposes. (a) <serverResolutions> can include\n     *     resolutions that the server supports and that you don't want to\n     *     provide with this layer; you can also look at <zoomOffset>, which is\n     *     an alternative to <serverResolutions> for that specific purpose.\n     *     (b) The map can work with resolutions that aren't supported by\n     *     the server, i.e. that aren't in <serverResolutions>. When the\n     *     map is displayed in such a resolution data for the closest\n     *     server-supported resolution is loaded and the layer div is\n     *     stretched as necessary.\n     */\n    serverResolutions: null,\n\n    /**\n     * Property: formatSuffixMap\n     * {Object} a map between WMTS 'format' request parameter and tile image file suffix\n     */\n    formatSuffixMap: {\n        \"image/png\": \"png\",\n        \"image/png8\": \"png\",\n        \"image/png24\": \"png\",\n        \"image/png32\": \"png\",\n        \"png\": \"png\",\n        \"image/jpeg\": \"jpg\",\n        \"image/jpg\": \"jpg\",\n        \"jpeg\": \"jpg\",\n        \"jpg\": \"jpg\"\n    },\n    \n    /**\n     * Property: matrix\n     * {Object} Matrix definition for the current map resolution.  Updated by\n     *     the <updateMatrixProperties> method.\n     */\n    matrix: null,\n    \n    /**\n     * Constructor: OpenLayers.Layer.WMTS\n     * Create a new WMTS layer.\n     *\n     * Example:\n     * (code)\n     * var wmts = new OpenLayers.Layer.WMTS({\n     *     name: \"My WMTS Layer\",\n     *     url: \"http://example.com/wmts\", \n     *     layer: \"layer_id\",\n     *     style: \"default\",\n     *     matrixSet: \"matrix_id\"\n     * });\n     * (end)\n     *\n     * Parameters:\n     * config - {Object} Configuration properties for the layer.\n     *\n     * Required configuration properties:\n     * url - {String} The base url for the service.  See the <url> property.\n     * layer - {String} The layer identifier.  See the <layer> property.\n     * style - {String} The layer style identifier.  See the <style> property.\n     * matrixSet - {String} The tile matrix set identifier.  See the <matrixSet>\n     *     property.\n     *\n     * Any other documented layer properties can be provided in the config object.\n     */\n    initialize: function(config) {\n\n        // confirm required properties are supplied\n        var required = {\n            url: true,\n            layer: true,\n            style: true,\n            matrixSet: true\n        };\n        for (var prop in required) {\n            if (!(prop in config)) {\n                throw new Error(\"Missing property '\" + prop + \"' in layer configuration.\");\n            }\n        }\n\n        config.params = OpenLayers.Util.upperCaseObject(config.params);\n        var args = [config.name, config.url, config.params, config];\n        OpenLayers.Layer.Grid.prototype.initialize.apply(this, args);\n        \n\n        // determine format suffix (for REST)\n        if (!this.formatSuffix) {\n            this.formatSuffix = this.formatSuffixMap[this.format] || this.format.split(\"/\").pop();            \n        }\n\n        // expand matrixIds (may be array of string or array of object)\n        if (this.matrixIds) {\n            var len = this.matrixIds.length;\n            if (len && typeof this.matrixIds[0] === \"string\") {\n                var ids = this.matrixIds;\n                this.matrixIds = new Array(len);\n                for (var i=0; i<len; ++i) {\n                    this.matrixIds[i] = {identifier: ids[i]};\n                }\n            }\n        }\n\n    },\n    \n    /**\n     * Method: setMap\n     */\n    setMap: function() {\n        OpenLayers.Layer.Grid.prototype.setMap.apply(this, arguments);\n    },\n    \n    /**\n     * Method: updateMatrixProperties\n     * Called when map resolution changes to update matrix related properties.\n     */\n    updateMatrixProperties: function() {\n        this.matrix = this.getMatrix();\n        if (this.matrix) {\n            if (this.matrix.topLeftCorner) {\n                this.tileOrigin = this.matrix.topLeftCorner;\n            }\n            if (this.matrix.tileWidth && this.matrix.tileHeight) {\n                this.tileSize = new OpenLayers.Size(\n                    this.matrix.tileWidth, this.matrix.tileHeight\n                );\n            }\n            if (!this.tileOrigin) { \n                this.tileOrigin = new OpenLayers.LonLat(\n                    this.maxExtent.left, this.maxExtent.top\n                );\n            }   \n            if (!this.tileFullExtent) { \n                this.tileFullExtent = this.maxExtent;\n            }\n        }\n    },\n    \n    /**\n     * Method: moveTo\n     * \n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     * zoomChanged - {Boolean} Tells when zoom has changed, as layers have to\n     *     do some init work in that case.\n     * dragging - {Boolean}\n     */\n    moveTo:function(bounds, zoomChanged, dragging) {\n        if (zoomChanged || !this.matrix) {\n            this.updateMatrixProperties();\n        }\n        return OpenLayers.Layer.Grid.prototype.moveTo.apply(this, arguments);\n    },\n\n    /**\n     * APIMethod: clone\n     * \n     * Parameters:\n     * obj - {Object}\n     * \n     * Returns:\n     * {<OpenLayers.Layer.WMTS>} An exact clone of this <OpenLayers.Layer.WMTS>\n     */\n    clone: function(obj) {\n        if (obj == null) {\n            obj = new OpenLayers.Layer.WMTS(this.options);\n        }\n        //get all additions from superclasses\n        obj = OpenLayers.Layer.Grid.prototype.clone.apply(this, [obj]);\n        // copy/set any non-init, non-simple values here\n        return obj;\n    },\n\n    /**\n     * Method: getIdentifier\n     * Get the current index in the matrixIds array.\n     */\n    getIdentifier: function() {\n        return this.getServerZoom();\n    },\n    \n    /**\n     * Method: getMatrix\n     * Get the appropriate matrix definition for the current map resolution.\n     */\n    getMatrix: function() {\n        var matrix;\n        if (!this.matrixIds || this.matrixIds.length === 0) {\n            matrix = {identifier: this.getIdentifier()};\n        } else {\n            // get appropriate matrix given the map scale if possible\n            if (\"scaleDenominator\" in this.matrixIds[0]) {\n                // scale denominator calculation based on WMTS spec\n                var denom = \n                    OpenLayers.METERS_PER_INCH * \n                    OpenLayers.INCHES_PER_UNIT[this.units] * \n                    this.getServerResolution() / 0.28E-3;\n                var diff = Number.POSITIVE_INFINITY;\n                var delta;\n                for (var i=0, ii=this.matrixIds.length; i<ii; ++i) {\n                    delta = Math.abs(1 - (this.matrixIds[i].scaleDenominator / denom));\n                    if (delta < diff) {\n                        diff = delta;\n                        matrix = this.matrixIds[i];\n                    }\n                }\n            } else {\n                // fall back on zoom as index\n                matrix = this.matrixIds[this.getIdentifier()];\n            }\n        }\n        return matrix;\n    },\n    \n    /** \n     * Method: getTileInfo\n     * Get tile information for a given location at the current map resolution.\n     *\n     * Parameters:\n     * loc - {<OpenLayers.LonLat} A location in map coordinates.\n     *\n     * Returns:\n     * {Object} An object with \"col\", \"row\", \"i\", and \"j\" properties.  The col\n     *     and row values are zero based tile indexes from the top left.  The\n     *     i and j values are the number of pixels to the left and top \n     *     (respectively) of the given location within the target tile.\n     */\n    getTileInfo: function(loc) {\n        var res = this.getServerResolution();\n        \n        var fx = (loc.lon - this.tileOrigin.lon) / (res * this.tileSize.w);\n        var fy = (this.tileOrigin.lat - loc.lat) / (res * this.tileSize.h);\n\n        var col = Math.floor(fx);\n        var row = Math.floor(fy);\n        \n        return {\n            col: col, \n            row: row,\n            i: Math.floor((fx - col) * this.tileSize.w),\n            j: Math.floor((fy - row) * this.tileSize.h)\n        };\n    },\n    \n    /**\n     * Method: getURL\n     * \n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     * \n     * Returns:\n     * {String} A URL for the tile corresponding to the given bounds.\n     */\n    getURL: function(bounds) {\n        bounds = this.adjustBounds(bounds);\n        var url = \"\";\n        if (!this.tileFullExtent || this.tileFullExtent.intersectsBounds(bounds)) {            \n\n            var center = bounds.getCenterLonLat();            \n            var info = this.getTileInfo(center);\n            var matrixId = this.matrix.identifier;\n            var dimensions = this.dimensions, params;\n\n            if (OpenLayers.Util.isArray(this.url)) {\n                url = this.selectUrl([\n                    this.version, this.style, this.matrixSet,\n                    this.matrix.identifier, info.row, info.col\n                ].join(\",\"), this.url);\n            } else {\n                url = this.url;\n            }\n\n            if (this.requestEncoding.toUpperCase() === \"REST\") {\n                params = this.params;\n                if (url.indexOf(\"{\") !== -1) {\n                    var template = url.replace(/\\{/g, \"${\");\n                    var context = {\n                        // spec does not make clear if capital S or not\n                        style: this.style, Style: this.style,\n                        TileMatrixSet: this.matrixSet,\n                        TileMatrix: this.matrix.identifier,\n                        TileRow: info.row,\n                        TileCol: info.col\n                    };\n                    if (dimensions) {\n                        var dimension, i;\n                        for (i=dimensions.length-1; i>=0; --i) {\n                            dimension = dimensions[i];\n                            context[dimension] = params[dimension.toUpperCase()];\n                        }\n                    }\n                    url = OpenLayers.String.format(template, context);\n                } else {\n                    // include 'version', 'layer' and 'style' in tile resource url\n                    var path = this.version + \"/\" + this.layer + \"/\" + this.style + \"/\";\n\n                    // append optional dimension path elements\n                    if (dimensions) {\n                        for (var i=0; i<dimensions.length; i++) {\n                            if (params[dimensions[i]] !== undefined) {\n                                path = path + params[dimensions[i]] + \"/\";\n                            }\n                        }\n                    }\n\n                    // append other required path elements\n                    path = path + this.matrixSet + \"/\" + this.matrix.identifier + \n                        \"/\" + info.row + \"/\" + info.col + \".\" + this.formatSuffix;\n\n                    if (!url.match(/\\/$/)) {\n                        url = url + \"/\";\n                    }\n                    url = url + path;\n                }\n            } else if (this.requestEncoding.toUpperCase() === \"KVP\") {\n\n                // assemble all required parameters\n                params = {\n                    SERVICE: \"WMTS\",\n                    REQUEST: \"GetTile\",\n                    VERSION: this.version,\n                    LAYER: this.layer,\n                    STYLE: this.style,\n                    TILEMATRIXSET: this.matrixSet,\n                    TILEMATRIX: this.matrix.identifier,\n                    TILEROW: info.row,\n                    TILECOL: info.col,\n                    FORMAT: this.format\n                };\n                url = OpenLayers.Layer.Grid.prototype.getFullRequestString.apply(this, [params]);\n\n            }\n        }\n        return url;    \n    },\n    \n    /**\n     * APIMethod: mergeNewParams\n     * Extend the existing layer <params> with new properties.  Tiles will be\n     *     reloaded with updated params in the request.\n     * \n     * Parameters:\n     * newParams - {Object} Properties to extend to existing <params>.\n     */\n    mergeNewParams: function(newParams) {\n        return OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(\n            this, [OpenLayers.Util.upperCaseObject(newParams)]\n        );\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.WMTS\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Layer/Grid.js\n * @requires OpenLayers/Format/ArcXML.js\n * @requires OpenLayers/Request.js\n */\n\n/**\n * Class: OpenLayers.Layer.ArcIMS\n * Instances of OpenLayers.Layer.ArcIMS are used to display data from ESRI ArcIMS\n *     Mapping Services. Create a new ArcIMS layer with the <OpenLayers.Layer.ArcIMS>\n *     constructor.\n * \n * Inherits from:\n *  - <OpenLayers.Layer.Grid>\n */\nOpenLayers.Layer.ArcIMS = OpenLayers.Class(OpenLayers.Layer.Grid, {\n\n    /**\n     * Constant: DEFAULT_PARAMS\n     * {Object} Default query string parameters.\n     */\n    DEFAULT_PARAMS: { \n        ClientVersion: \"9.2\",\n        ServiceName: ''\n    },\n    \n    /**\n     * APIProperty: featureCoordSys\n     * {String} Code for feature coordinate system.  Default is \"4326\".\n     */\n    featureCoordSys: \"4326\",\n    \n    /**\n     * APIProperty: filterCoordSys\n     * {String} Code for filter coordinate system.  Default is \"4326\".\n     */\n    filterCoordSys: \"4326\",\n    \n    /**\n     * APIProperty: layers\n     * {Array} An array of objects with layer properties.\n     */\n    layers: null,\n    \n    /**\n     * APIProperty: async\n     * {Boolean} Request images asynchronously.  Default is true.\n     */\n    async: true,\n    \n    /**\n     * APIProperty: name\n     * {String} Layer name.  Default is \"ArcIMS\".\n     */\n    name: \"ArcIMS\",\n\n    /**\n     * APIProperty: isBaseLayer\n     * {Boolean} The layer is a base layer.  Default is true.\n     */\n    isBaseLayer: true,\n\n    /**\n     * Constant: DEFAULT_OPTIONS\n     * {Object} Default layers properties.\n     */\n    DEFAULT_OPTIONS: {\n        tileSize: new OpenLayers.Size(512, 512),\n        featureCoordSys: \"4326\",\n        filterCoordSys: \"4326\",\n        layers: null,\n        isBaseLayer: true,\n        async: true,\n        name: \"ArcIMS\"\n    }, \n \n    /**\n     * Constructor: OpenLayers.Layer.ArcIMS\n     * Create a new ArcIMS layer object.\n     *\n     * Example:\n     * (code)\n     * var arcims = new OpenLayers.Layer.ArcIMS(\n     *     \"Global Sample\",\n     *     \"http://sample.avencia.com/servlet/com.esri.esrimap.Esrimap\", \n     *     {\n     *         service: \"OpenLayers_Sample\", \n     *         layers: [\n     *             // layers to manipulate\n     *             {id: \"1\", visible: true}\n     *         ]\n     *     }\n     * );\n     * (end)\n     *\n     * Parameters:\n     * name - {String} A name for the layer\n     * url - {String} Base url for the ArcIMS server\n     * options - {Object} Optional object with properties to be set on the\n     *     layer.\n     */\n    initialize: function(name, url, options) {\n        \n        this.tileSize = new OpenLayers.Size(512, 512);\n\n        // parameters\n        this.params = OpenLayers.Util.applyDefaults(\n            {ServiceName: options.serviceName},\n            this.DEFAULT_PARAMS\n        );\n        this.options = OpenLayers.Util.applyDefaults(\n            options, this.DEFAULT_OPTIONS\n        );\n          \n        OpenLayers.Layer.Grid.prototype.initialize.apply(\n            this, [name, url, this.params, options]\n        );\n\n        //layer is transparent        \n        if (this.transparent) {\n            \n            // unless explicitly set in options, make layer an overlay\n            if (!this.isBaseLayer) {\n                this.isBaseLayer = false;\n            } \n            \n            // jpegs can never be transparent, so intelligently switch the \n            //  format, depending on the browser's capabilities\n            if (this.format == \"image/jpeg\") {\n                this.format = OpenLayers.Util.alphaHack() ? \"image/gif\" : \"image/png\";\n            }\n        }\n\n        // create an empty layer list if no layers specified in the options\n        if (this.options.layers === null) {\n            this.options.layers = [];\n        }\n    },    \n\n    /**\n     * Method: getURL\n     * Return an image url this layer.\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>} A bounds representing the bbox for the\n     *     request.\n     *\n     * Returns:\n     * {String} A string with the map image's url.\n     */\n    getURL: function(bounds) {\n        var url = \"\";\n        bounds = this.adjustBounds(bounds);\n        \n        // create an arcxml request to generate the image\n        var axlReq = new OpenLayers.Format.ArcXML( \n            OpenLayers.Util.extend(this.options, {\n                requesttype: \"image\",\n                envelope: bounds.toArray(),\n                tileSize: this.tileSize\n            })\n        );\n        \n        // create a synchronous ajax request to get an arcims image\n        var req = new OpenLayers.Request.POST({\n            url: this.getFullRequestString(),\n            data: axlReq.write(),\n            async: false\n        });\n        \n        // if the response exists\n        if (req != null) {\n            var doc = req.responseXML;\n\n            if (!doc || !doc.documentElement) {            \n                doc = req.responseText;\n            }\n\n            // create a new arcxml format to read the response\n            var axlResp = new OpenLayers.Format.ArcXML();\n            var arcxml = axlResp.read(doc);\n            url = this.getUrlOrImage(arcxml.image.output);\n        }\n        \n        return url;\n    },\n    \n    \n    /**\n     * Method: getURLasync\n     * Get an image url this layer asynchronously, and execute a callback\n     *     when the image url is generated.\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>} A bounds representing the bbox for the\n     *     request.\n     * callback - {Function} Function to call when image url is retrieved.\n     * scope - {Object} The scope of the callback method.\n     */\n    getURLasync: function(bounds, callback, scope) {\n        bounds = this.adjustBounds(bounds);\n        \n        // create an arcxml request to generate the image\n        var axlReq = new OpenLayers.Format.ArcXML(  \n            OpenLayers.Util.extend(this.options, { \n                requesttype: \"image\",\n                envelope: bounds.toArray(),\n                tileSize: this.tileSize\n            })\n        );\n        \n        // create an asynchronous ajax request to get an arcims image\n        OpenLayers.Request.POST({\n            url: this.getFullRequestString(),\n            async: true,\n            data: axlReq.write(),\n            callback: function(req) {\n                // process the response from ArcIMS, and call the callback function\n                // to set the image URL\n                var doc = req.responseXML;\n                if (!doc || !doc.documentElement) {            \n                    doc = req.responseText;\n                }\n\n                // create a new arcxml format to read the response\n                var axlResp = new OpenLayers.Format.ArcXML();\n                var arcxml = axlResp.read(doc);\n                \n                callback.call(scope, this.getUrlOrImage(arcxml.image.output));\n            },\n            scope: this\n        });\n    },\n    \n    /**\n     * Method: getUrlOrImage\n     * Extract a url or image from the ArcXML image output.\n     *\n     * Parameters:\n     * output - {Object} The image.output property of the object returned from\n     *     the ArcXML format read method.\n     *\n     * Returns:\n     * {String} A URL for an image (potentially with the data protocol).\n     */\n    getUrlOrImage: function(output) {\n        var ret = \"\";\n        if(output.url) {\n            // If the image response output url is a string, then the image\n            // data is not inline.\n            ret = output.url;\n        } else if(output.data) {\n            // The image data is inline and base64 encoded, create a data\n            // url for the image.  This will only work for small images,\n            // due to browser url length limits.\n            ret = \"data:image/\" + output.type + \n                  \";base64,\" + output.data;\n        }\n        return ret;\n    },\n    \n    /**\n     * Method: setLayerQuery\n     * Set the query definition on this layer. Query definitions are used to\n     *     render parts of the spatial data in an image, and can be used to\n     *     filter features or layers in the ArcIMS service.\n     *\n     * Parameters:\n     * id - {String} The ArcIMS layer ID.\n     * querydef - {Object} The query definition to apply to this layer.\n     */\n    setLayerQuery: function(id, querydef) {\n        // find the matching layer, if it exists\n        for (var lyr = 0; lyr < this.options.layers.length; lyr++) {\n            if (id == this.options.layers[lyr].id) {\n                // replace this layer definition\n                this.options.layers[lyr].query = querydef;\n                return;\n            }\n        }\n      \n        // no layer found, create a new definition\n        this.options.layers.push({id: id, visible: true, query: querydef});\n    },\n    \n    /**\n     * Method: getFeatureInfo\n     * Get feature information from ArcIMS.  Using the applied geometry, apply\n     *     the options to the query (buffer, area/envelope intersection), and\n     *     query the ArcIMS service.\n     *\n     * A note about accuracy:\n     * ArcIMS interprets the accuracy attribute in feature requests to be\n     *     something like the 'modulus' operator on feature coordinates,\n     *     applied to the database geometry of the feature.  It doesn't round,\n     *     so your feature coordinates may be up to (1 x accuracy) offset from\n     *     the actual feature coordinates.  If the accuracy of the layer is not\n     *     specified, the accuracy will be computed to be approximately 1\n     *     feature coordinate per screen  pixel.\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.LonLat>} or {<OpenLayers.Geometry.Polygon>} The\n     *     geometry to use when making the query. This should be a closed\n     *     polygon for behavior approximating a free selection.\n     * layer - {Object} The ArcIMS layer definition. This is an anonymous object\n     *     that looks like:\n     * (code)\n     * {\n     *     id: \"ArcXML layer ID\",  // the ArcXML layer ID\n     *     query: {\n     *         where: \"STATE = 'PA'\",  // the where clause of the query\n     *         accuracy: 100           // the accuracy of the returned feature\n     *     }\n     * }\n     * (end)\n     * options - {Object} Object with non-default properties to set on the layer.\n     *     Supported properties are buffer, callback, scope, and any other\n     *     properties applicable to the ArcXML format.  Set the 'callback' and\n     *     'scope' for an object and function to receive the parsed features\n     *     from ArcIMS.\n     */\n    getFeatureInfo: function(geometry, layer, options) {\n        // set the buffer to 1 unit (dd/m/ft?) by default\n        var buffer = options.buffer || 1;\n        // empty callback by default\n        var callback = options.callback || function() {};\n        // default scope is window (global)\n        var scope = options.scope || window;\n\n        // apply these option to the request options\n        var requestOptions = {};\n        OpenLayers.Util.extend(requestOptions, this.options);\n\n        // this is a feature request\n        requestOptions.requesttype = \"feature\";\n\n        if (geometry instanceof OpenLayers.LonLat) {\n            // create an envelope if the geometry is really a lon/lat\n            requestOptions.polygon = null;\n            requestOptions.envelope = [ \n                geometry.lon - buffer, \n                geometry.lat - buffer,\n                geometry.lon + buffer,\n                geometry.lat + buffer\n            ];\n        } else if (geometry instanceof OpenLayers.Geometry.Polygon) {\n            // use the polygon assigned, and empty the envelope\n            requestOptions.envelope = null;\n            requestOptions.polygon = geometry;\n        }\n      \n        // create an arcxml request to get feature requests\n        var arcxml = new OpenLayers.Format.ArcXML(requestOptions);\n\n        // apply any get feature options to the arcxml request\n        OpenLayers.Util.extend(arcxml.request.get_feature, options);\n\n        arcxml.request.get_feature.layer = layer.id;\n        if (typeof layer.query.accuracy == \"number\") {\n            // set the accuracy if it was specified\n            arcxml.request.get_feature.query.accuracy = layer.query.accuracy;\n        } else {\n            // guess that the accuracy is 1 per screen pixel\n            var mapCenter = this.map.getCenter();\n            var viewPx = this.map.getViewPortPxFromLonLat(mapCenter);\n            viewPx.x++;\n            var mapOffCenter = this.map.getLonLatFromPixel(viewPx);\n            arcxml.request.get_feature.query.accuracy = mapOffCenter.lon - mapCenter.lon;\n        }\n        \n        // set the get_feature query to be the same as the layer passed in\n        arcxml.request.get_feature.query.where = layer.query.where;\n        \n        // use area_intersection\n        arcxml.request.get_feature.query.spatialfilter.relation = \"area_intersection\";\n      \n        // create a new asynchronous request to get the feature info\n        OpenLayers.Request.POST({\n            url: this.getFullRequestString({'CustomService': 'Query'}),\n            data: arcxml.write(),\n            callback: function(request) {\n                // parse the arcxml response\n                var response = arcxml.parseResponse(request.responseText);\n                \n                if (!arcxml.iserror()) {\n                    // if the arcxml is not an error, call the callback with the features parsed\n                    callback.call(scope, response.features);\n                } else {\n                    // if the arcxml is an error, return null features selected\n                    callback.call(scope, null);\n                }\n            }\n        });\n    },\n\n    /**\n     * Method: clone\n     * Create a clone of this layer\n     *\n     * Returns:\n     * {<OpenLayers.Layer.ArcIMS>} An exact clone of this layer\n     */\n    clone: function (obj) {\n\n        if (obj == null) {\n            obj = new OpenLayers.Layer.ArcIMS(this.name,\n                                           this.url,\n                                           this.getOptions());\n        }\n\n        //get all additions from superclasses\n        obj = OpenLayers.Layer.Grid.prototype.clone.apply(this, [obj]);\n\n        // copy/set any non-init, non-simple values here\n\n        return obj;\n    },\n    \n    CLASS_NAME: \"OpenLayers.Layer.ArcIMS\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Layer/Markers.js\n * @requires OpenLayers/Request/XMLHttpRequest.js\n */\n\n/**\n * Class: OpenLayers.Layer.GeoRSS\n * Add GeoRSS Point features to your map. \n * \n * Inherits from:\n *  - <OpenLayers.Layer.Markers>\n */\nOpenLayers.Layer.GeoRSS = OpenLayers.Class(OpenLayers.Layer.Markers, {\n\n    /** \n     * Property: location \n     * {String} store url of text file \n     */\n    location: null,\n\n    /** \n     * Property: features \n     * {Array(<OpenLayers.Feature>)} \n     */\n    features: null,\n    \n    /**\n     * APIProperty: formatOptions\n     * {Object} Hash of options which should be passed to the format when it is\n     * created. Must be passed in the constructor.\n     */\n    formatOptions: null, \n\n    /** \n     * Property: selectedFeature \n     * {<OpenLayers.Feature>} \n     */\n    selectedFeature: null,\n\n    /** \n     * APIProperty: icon \n     * {<OpenLayers.Icon>}. This determines the Icon to be used on the map\n     * for this GeoRSS layer.\n     */\n    icon: null,\n\n    /**\n     * APIProperty: popupSize\n     * {<OpenLayers.Size>} This determines the size of GeoRSS popups. If \n     * not provided, defaults to 250px by 120px. \n     */\n    popupSize: null, \n    \n    /** \n     * APIProperty: useFeedTitle \n     * {Boolean} Set layer.name to the first <title> element in the feed. Default is true. \n     */\n    useFeedTitle: true,\n    \n    /**\n    * Constructor: OpenLayers.Layer.GeoRSS\n    * Create a GeoRSS Layer.\n    *\n    * Parameters:\n    * name - {String} \n    * location - {String} \n    * options - {Object}\n    */\n    initialize: function(name, location, options) {\n        OpenLayers.Layer.Markers.prototype.initialize.apply(this, [name, options]);\n        this.location = location;\n        this.features = [];\n    },\n\n    /**\n     * Method: destroy \n     */\n    destroy: function() {\n        // Warning: Layer.Markers.destroy() must be called prior to calling\n        // clearFeatures() here, otherwise we leak memory. Indeed, if\n        // Layer.Markers.destroy() is called after clearFeatures(), it won't be\n        // able to remove the marker image elements from the layer's div since\n        // the markers will have been destroyed by clearFeatures().\n        OpenLayers.Layer.Markers.prototype.destroy.apply(this, arguments);\n        this.clearFeatures();\n        this.features = null;\n    },\n\n    /**\n     * Method: loadRSS\n     * Start the load of the RSS data. Don't do this when we first add the layer,\n     * since we may not be visible at any point, and it would therefore be a waste.\n     */\n    loadRSS: function() {\n        if (!this.loaded) {\n            this.events.triggerEvent(\"loadstart\");\n            OpenLayers.Request.GET({\n                url: this.location,\n                success: this.parseData,\n                scope: this\n            });\n            this.loaded = true;\n        }    \n    },    \n    \n    /**\n     * Method: moveTo\n     * If layer is visible and RSS has not been loaded, load RSS. \n     * \n     * Parameters:\n     * bounds - {Object} \n     * zoomChanged - {Object} \n     * minor - {Object} \n     */\n    moveTo:function(bounds, zoomChanged, minor) {\n        OpenLayers.Layer.Markers.prototype.moveTo.apply(this, arguments);\n        if(this.visibility && !this.loaded){\n            this.loadRSS();\n        }\n    },\n        \n    /**\n     * Method: parseData\n     * Parse the data returned from the Events call.\n     *\n     * Parameters:\n     * ajaxRequest - {<OpenLayers.Request.XMLHttpRequest>} \n     */\n    parseData: function(ajaxRequest) {\n        var doc = ajaxRequest.responseXML;\n        if (!doc || !doc.documentElement) {\n            doc = OpenLayers.Format.XML.prototype.read(ajaxRequest.responseText);\n        }\n        \n        if (this.useFeedTitle) {\n            var name = null;\n            try {\n                name = doc.getElementsByTagNameNS('*', 'title')[0].firstChild.nodeValue;\n            }\n            catch (e) {\n                name = doc.getElementsByTagName('title')[0].firstChild.nodeValue;\n            }\n            if (name) {\n                this.setName(name);\n            }    \n        }\n       \n        var options = {};\n        \n        OpenLayers.Util.extend(options, this.formatOptions);\n        \n        if (this.map && !this.projection.equals(this.map.getProjectionObject())) {\n            options.externalProjection = this.projection;\n            options.internalProjection = this.map.getProjectionObject();\n        }    \n        \n        var format = new OpenLayers.Format.GeoRSS(options);\n        var features = format.read(doc);\n        \n        for (var i=0, len=features.length; i<len; i++) {\n            var data = {};\n            var feature = features[i];\n            \n            // we don't support features with no geometry in the GeoRSS\n            // layer at this time. \n            if (!feature.geometry) {\n                continue;\n            }    \n            \n            var title = feature.attributes.title ? \n                         feature.attributes.title : \"Untitled\";\n            \n            var description = feature.attributes.description ? \n                         feature.attributes.description : \"No description.\";\n            \n            var link = feature.attributes.link ? feature.attributes.link : \"\";\n\n            var location = feature.geometry.getBounds().getCenterLonLat();\n            \n            \n            data.icon = this.icon == null ? \n                                     OpenLayers.Marker.defaultIcon() : \n                                     this.icon.clone();\n            \n            data.popupSize = this.popupSize ? \n                             this.popupSize.clone() :\n                             new OpenLayers.Size(250, 120);\n            \n            if (title || description) {\n                // we have supplemental data, store them.\n                data.title = title;\n                data.description = description;\n            \n                var contentHTML = '<div class=\"olLayerGeoRSSClose\">[x]</div>'; \n                contentHTML += '<div class=\"olLayerGeoRSSTitle\">';\n                if (link) {\n                    contentHTML += '<a class=\"link\" href=\"'+link+'\" target=\"_blank\">';\n                }\n                contentHTML += title;\n                if (link) {\n                    contentHTML += '</a>';\n                }\n                contentHTML += '</div>';\n                contentHTML += '<div style=\"\" class=\"olLayerGeoRSSDescription\">';\n                contentHTML += description;\n                contentHTML += '</div>';\n                data['popupContentHTML'] = contentHTML;                \n            }\n            var feature = new OpenLayers.Feature(this, location, data);\n            this.features.push(feature);\n            var marker = feature.createMarker();\n            marker.events.register('click', feature, this.markerClick);\n            this.addMarker(marker);\n        }\n        this.events.triggerEvent(\"loadend\");\n    },\n    \n    /**\n     * Method: markerClick\n     *\n     * Parameters:\n     * evt - {Event} \n     */\n    markerClick: function(evt) {\n        var sameMarkerClicked = (this == this.layer.selectedFeature);\n        this.layer.selectedFeature = (!sameMarkerClicked) ? this : null;\n        for(var i=0, len=this.layer.map.popups.length; i<len; i++) {\n            this.layer.map.removePopup(this.layer.map.popups[i]);\n        }\n        if (!sameMarkerClicked) {\n            var popup = this.createPopup();\n            OpenLayers.Event.observe(popup.div, \"click\",\n                OpenLayers.Function.bind(function() { \n                    for(var i=0, len=this.layer.map.popups.length; i<len; i++) { \n                        this.layer.map.removePopup(this.layer.map.popups[i]); \n                    }\n                }, this)\n            );\n            this.layer.map.addPopup(popup); \n        }\n        OpenLayers.Event.stop(evt);\n    },\n\n    /**\n     * Method: clearFeatures\n     * Destroy all features in this layer.\n     */\n    clearFeatures: function() {\n        if (this.features != null) {\n            while(this.features.length > 0) {\n                var feature = this.features[0];\n                OpenLayers.Util.removeItem(this.features, feature);\n                feature.destroy();\n            }\n        }        \n    },\n    \n    CLASS_NAME: \"OpenLayers.Layer.GeoRSS\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Layer.js\n * @requires OpenLayers/Layer/Markers.js\n */\n\n/**\n * Class: OpenLayers.Layer.Boxes\n * Draw divs as 'boxes' on the layer. \n *\n * Inherits from:\n *  - <OpenLayers.Layer.Markers>\n */\nOpenLayers.Layer.Boxes = OpenLayers.Class(OpenLayers.Layer.Markers, {\n\n    /**\n     * Constructor: OpenLayers.Layer.Boxes\n     *\n     * Parameters:\n     * name - {String} \n     * options - {Object} Hashtable of extra options to tag onto the layer\n     */\n    \n    /**\n     * Method: drawMarker \n     * Calculate the pixel location for the marker, create it, and\n     *    add it to the layer's div\n     *\n     * Parameters: \n     * marker - {<OpenLayers.Marker.Box>} \n     */\n    drawMarker: function(marker) {\n        var topleft = this.map.getLayerPxFromLonLat({\n            lon: marker.bounds.left,\n            lat: marker.bounds.top\n        });\n        var botright = this.map.getLayerPxFromLonLat({\n            lon: marker.bounds.right,\n            lat: marker.bounds.bottom\n        });\n        if (botright == null || topleft == null) {\n            marker.display(false);\n        } else {\n            var markerDiv = marker.draw(topleft, {\n                w: Math.max(1, botright.x - topleft.x),\n                h: Math.max(1, botright.y - topleft.y)\n            });\n            if (!marker.drawn) {\n                this.div.appendChild(markerDiv);\n                marker.drawn = true;\n            }\n        }\n    },\n\n\n    /**\n     * APIMethod: removeMarker \n     * \n     * Parameters:\n     * marker - {<OpenLayers.Marker.Box>} \n     */\n    removeMarker: function(marker) {\n        OpenLayers.Util.removeItem(this.markers, marker);\n        if ((marker.div != null) &&\n            (marker.div.parentNode == this.div) ) {\n            this.div.removeChild(marker.div);    \n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.Boxes\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Layer/Grid.js\n */\n\n/** \n * Class: OpenLayers.Layer.XYZ\n * The XYZ class is designed to make it easier for people who have tiles\n * arranged by a standard XYZ grid. \n * \n * Inherits from:\n *  - <OpenLayers.Layer.Grid>\n */\nOpenLayers.Layer.XYZ = OpenLayers.Class(OpenLayers.Layer.Grid, {\n    \n    /**\n     * APIProperty: isBaseLayer\n     * Default is true, as this is designed to be a base tile source. \n     */\n    isBaseLayer: true,\n    \n    /**\n     * APIProperty: sphericalMercator\n     * Whether the tile extents should be set to the defaults for \n     *    spherical mercator. Useful for things like OpenStreetMap.\n     *    Default is false, except for the OSM subclass.\n     */\n    sphericalMercator: false,\n\n    /**\n     * APIProperty: zoomOffset\n     * {Number} If your cache has more zoom levels than you want to provide\n     *     access to with this layer, supply a zoomOffset.  This zoom offset\n     *     is added to the current map zoom level to determine the level\n     *     for a requested tile.  For example, if you supply a zoomOffset\n     *     of 3, when the map is at the zoom 0, tiles will be requested from\n     *     level 3 of your cache.  Default is 0 (assumes cache level and map\n     *     zoom are equivalent).  Using <zoomOffset> is an alternative to\n     *     setting <serverResolutions> if you only want to expose a subset\n     *     of the server resolutions.\n     */\n    zoomOffset: 0,\n    \n    /**\n     * APIProperty: serverResolutions\n     * {Array} A list of all resolutions available on the server.  Only set this\n     *     property if the map resolutions differ from the server. This\n     *     property serves two purposes. (a) <serverResolutions> can include\n     *     resolutions that the server supports and that you don't want to\n     *     provide with this layer; you can also look at <zoomOffset>, which is\n     *     an alternative to <serverResolutions> for that specific purpose.\n     *     (b) The map can work with resolutions that aren't supported by\n     *     the server, i.e. that aren't in <serverResolutions>. When the\n     *     map is displayed in such a resolution data for the closest\n     *     server-supported resolution is loaded and the layer div is\n     *     stretched as necessary.\n     */\n    serverResolutions: null,\n\n    /**\n     * Constructor: OpenLayers.Layer.XYZ\n     *\n     * Parameters:\n     * name - {String}\n     * url - {String}\n     * options - {Object} Hashtable of extra options to tag onto the layer\n     */\n    initialize: function(name, url, options) {\n        if (options && options.sphericalMercator || this.sphericalMercator) {\n            options = OpenLayers.Util.extend({\n                projection: \"EPSG:900913\",\n                numZoomLevels: this.serverResolutions ?\n                        this.serverResolutions.length : 19\n            }, options);\n        }\n        OpenLayers.Layer.Grid.prototype.initialize.apply(this, [\n            name || this.name, url || this.url, {}, options\n        ]);\n    },\n    \n    /**\n     * APIMethod: clone\n     * Create a clone of this layer\n     *\n     * Parameters:\n     * obj - {Object} Is this ever used?\n     * \n     * Returns:\n     * {<OpenLayers.Layer.XYZ>} An exact clone of this OpenLayers.Layer.XYZ\n     */\n    clone: function (obj) {\n        \n        if (obj == null) {\n            obj = new OpenLayers.Layer.XYZ(this.name,\n                                            this.url,\n                                            this.getOptions());\n        }\n\n        //get all additions from superclasses\n        obj = OpenLayers.Layer.Grid.prototype.clone.apply(this, [obj]);\n\n        return obj;\n    },    \n\n    /**\n     * Method: getURL\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     *\n     * Returns:\n     * {String} A string with the layer's url and parameters and also the\n     *          passed-in bounds and appropriate tile size specified as\n     *          parameters\n     */\n    getURL: function (bounds) {\n        var xyz = this.getXYZ(bounds);\n        var url = this.url;\n        if (OpenLayers.Util.isArray(url)) {\n            var s = '' + xyz.x + xyz.y + xyz.z;\n            url = this.selectUrl(s, url);\n        }\n        \n        return OpenLayers.String.format(url, xyz);\n    },\n    \n    /**\n     * Method: getXYZ\n     * Calculates x, y and z for the given bounds.\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     *\n     * Returns:\n     * {Object} - an object with x, y and z properties.\n     */\n    getXYZ: function(bounds) {\n        var res = this.getServerResolution();\n        var x = Math.round((bounds.left - this.tileOrigin.lon) /\n            (res * this.tileSize.w));\n        var y = Math.round((this.tileOrigin.lat - bounds.top) /\n            (res * this.tileSize.h));\n        var z = this.getServerZoom();\n\n        if (this.wrapDateLine) {\n            var limit = Math.pow(2, z);\n            x = ((x % limit) + limit) % limit;\n        }\n\n        return {'x': x, 'y': y, 'z': z};\n    },\n    \n    /* APIMethod: setMap\n     * When the layer is added to a map, then we can fetch our origin \n     *    (if we don't have one.) \n     * \n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    setMap: function(map) {\n        OpenLayers.Layer.Grid.prototype.setMap.apply(this, arguments);\n        if (!this.tileOrigin) { \n            this.tileOrigin = new OpenLayers.LonLat(this.maxExtent.left,\n                                                this.maxExtent.top);\n        }                                       \n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.XYZ\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Layer/XYZ.js\n * @requires OpenLayers/Tile/UTFGrid.js\n */\n\n/** \n * Class: OpenLayers.Layer.UTFGrid\n * This Layer reads from UTFGrid tiled data sources.  Since UTFGrids are \n * essentially JSON-based ASCII art with attached attributes, they are not \n * visibly rendered.  In order to use them in the map, you must add a \n * <OpenLayers.Control.UTFGrid> control as well.\n *\n * Example:\n *\n * (start code)\n * var world_utfgrid = new OpenLayers.Layer.UTFGrid({\n *     url: \"/tiles/world_utfgrid/${z}/${x}/${y}.json\",\n *     utfgridResolution: 4,\n *     displayInLayerSwitcher: false\n * );\n * map.addLayer(world_utfgrid);\n * \n * var control = new OpenLayers.Control.UTFGrid({\n *     layers: [world_utfgrid],\n *     handlerMode: 'move',\n *     callback: function(dataLookup) {\n *         // do something with returned data\n *     }\n * })\n * (end code)\n *\n * \n * Inherits from:\n *  - <OpenLayers.Layer.XYZ>\n */\nOpenLayers.Layer.UTFGrid = OpenLayers.Class(OpenLayers.Layer.XYZ, {\n    \n    /**\n     * APIProperty: isBaseLayer\n     * Default is false, as UTFGrids are designed to be a transparent overlay layer. \n     */\n    isBaseLayer: false,\n    \n    /**\n     * APIProperty: projection\n     * {<OpenLayers.Projection>}\n     * Source projection for the UTFGrids.  Default is \"EPSG:900913\".\n     */\n    projection: new OpenLayers.Projection(\"EPSG:900913\"),\n\n    /**\n     * Property: useJSONP\n     * {Boolean}\n     * Should we use a JSONP script approach instead of a standard AJAX call?\n     *\n     * Set to true for using utfgrids from another server. \n     * Avoids same-domain policy restrictions. \n     * Note that this only works if the server accepts \n     * the callback GET parameter and dynamically \n     * wraps the returned json in a function call.\n     * \n     * Default is false\n     */\n    useJSONP: false,\n    \n    /**\n     * APIProperty: url\n     * {String}\n     * URL tempate for UTFGrid tiles.  Include x, y, and z parameters.\n     * E.g. \"/tiles/${z}/${x}/${y}.json\"\n     */\n\n    /**\n     * APIProperty: utfgridResolution\n     * {Number}\n     * Ratio of the pixel width to the width of a UTFGrid data point.  If an \n     *     entry in the grid represents a 4x4 block of pixels, the \n     *     utfgridResolution would be 4.  Default is 2 (specified in \n     *     <OpenLayers.Tile.UTFGrid>).\n     */\n\n    /**\n     * Property: tileClass\n     * {<OpenLayers.Tile>} The tile class to use for this layer.\n     *     Defaults is <OpenLayers.Tile.UTFGrid>.\n     */\n    tileClass: OpenLayers.Tile.UTFGrid,\n\n    /**\n     * Constructor: OpenLayers.Layer.UTFGrid\n     * Create a new UTFGrid layer.\n     *\n     * Parameters:\n     * config - {Object} Configuration properties for the layer.\n     *\n     * Required configuration properties:\n     * url - {String} The url template for UTFGrid tiles.  See the <url> property.\n     */\n    initialize: function(options) {\n        OpenLayers.Layer.Grid.prototype.initialize.apply(\n            this, [options.name, options.url, {}, options]\n        );\n        this.tileOptions = OpenLayers.Util.extend({\n            utfgridResolution: this.utfgridResolution\n        }, this.tileOptions);\n    },\n\n    /**\n     * Method: createBackBuffer\n     * The UTFGrid cannot create a back buffer, so this method is overriden.\n     */\n    createBackBuffer: function() {},\n    \n    /**\n     * APIMethod: clone\n     * Create a clone of this layer\n     *\n     * Parameters:\n     * obj - {Object} Only used by a subclass of this layer.\n     * \n     * Returns:\n     * {<OpenLayers.Layer.UTFGrid>} An exact clone of this OpenLayers.Layer.UTFGrid\n     */\n    clone: function (obj) {\n        if (obj == null) {\n            obj = new OpenLayers.Layer.UTFGrid(this.getOptions());\n        }\n\n        // get all additions from superclasses\n        obj = OpenLayers.Layer.Grid.prototype.clone.apply(this, [obj]);\n\n        return obj;\n    },\n\n    /**\n     * APIProperty: getFeatureInfo\n     * Get details about a feature associated with a map location.  The object\n     *     returned will have id and data properties.  If the given location\n     *     doesn't correspond to a feature, null will be returned.\n     *\n     * Parameters:\n     * location - {<OpenLayers.LonLat>} map location\n     *\n     * Returns:\n     * {Object} Object representing the feature id and UTFGrid data \n     *     corresponding to the given map location.  Returns null if the given\n     *     location doesn't hit a feature.\n     */\n    getFeatureInfo: function(location) {\n        var info = null;\n        var tileInfo = this.getTileData(location);\n        if (tileInfo && tileInfo.tile) {\n            info = tileInfo.tile.getFeatureInfo(tileInfo.i, tileInfo.j);\n        }\n        return info;\n    },\n\n    /**\n     * APIMethod: getFeatureId\n     * Get the identifier for the feature associated with a map location.\n     *\n     * Parameters:\n     * location - {<OpenLayers.LonLat>} map location\n     *\n     * Returns:\n     * {String} The feature identifier corresponding to the given map location.\n     *     Returns null if the location doesn't hit a feature.\n     */\n    getFeatureId: function(location) {\n        var id = null;\n        var info = this.getTileData(location);\n        if (info.tile) {\n            id = info.tile.getFeatureId(info.i, info.j);\n        }\n        return id;\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.UTFGrid\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Layer/XYZ.js\n */\n\n/**\n * Class: OpenLayers.Layer.OSM\n * This layer allows accessing OpenStreetMap tiles. By default the OpenStreetMap\n *    hosted tile.openstreetmap.org Mapnik tileset is used. If you wish to use\n *    a different layer instead, you need to provide a different\n *    URL to the constructor. Here's an example for using OpenCycleMap:\n * \n * (code)\n *     new OpenLayers.Layer.OSM(\"OpenCycleMap\", \n *       [\"http://a.tile.opencyclemap.org/cycle/${z}/${x}/${y}.png\",\n *        \"http://b.tile.opencyclemap.org/cycle/${z}/${x}/${y}.png\",\n *        \"http://c.tile.opencyclemap.org/cycle/${z}/${x}/${y}.png\"]); \n * (end)\n *\n * Inherits from:\n *  - <OpenLayers.Layer.XYZ>\n */\nOpenLayers.Layer.OSM = OpenLayers.Class(OpenLayers.Layer.XYZ, {\n\n    /**\n     * APIProperty: name\n     * {String} The layer name. Defaults to \"OpenStreetMap\" if the first\n     * argument to the constructor is null or undefined.\n     */\n    name: \"OpenStreetMap\",\n\n    /**\n     * APIProperty: url\n     * {String} The tileset URL scheme. Defaults to (protocol relative url):\n     *  //[a|b|c].tile.openstreetmap.org/${z}/${x}/${y}.png \n     * (the official OSM tileset) if the second argument to the constructor\n     * is null or undefined. To use another tileset you can have something\n     * like this:\n     * (code)\n     *     new OpenLayers.Layer.OSM(\"OpenCycleMap\", \n     *       [\"http://a.tile.opencyclemap.org/cycle/${z}/${x}/${y}.png\",\n     *        \"http://b.tile.opencyclemap.org/cycle/${z}/${x}/${y}.png\",\n     *        \"http://c.tile.opencyclemap.org/cycle/${z}/${x}/${y}.png\"]); \n     * (end)\n     */\n    url: [\n        '//a.tile.openstreetmap.org/${z}/${x}/${y}.png',\n        '//b.tile.openstreetmap.org/${z}/${x}/${y}.png',\n        '//c.tile.openstreetmap.org/${z}/${x}/${y}.png'\n    ],\n\n    /**\n     * Property: attribution\n     * {String} The layer attribution.\n     */\n    attribution: \"&copy; <a href='//www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors\",\n\n    /**\n     * Property: sphericalMercator\n     * {Boolean}\n     */\n    sphericalMercator: true,\n\n    /**\n     * Property: wrapDateLine\n     * {Boolean}\n     */\n    wrapDateLine: true,\n\n    /** APIProperty: tileOptions\n     *  {Object} optional configuration options for <OpenLayers.Tile> instances\n     *  created by this Layer. Default is\n     *\n     *  (code)\n     *  {crossOriginKeyword: 'anonymous'}\n     *  (end)\n     *\n     *  When using OSM tilesets other than the default ones, it may be\n     *  necessary to set this to\n     *\n     *  (code)\n     *  {crossOriginKeyword: null}\n     *  (end)\n     *\n     *  if the server does not send Access-Control-Allow-Origin headers.\n     */\n    tileOptions: null,\n\n    /**\n     * Constructor: OpenLayers.Layer.OSM\n     *\n     * Parameters:\n     * name - {String} The layer name.\n     * url - {String} The tileset URL scheme.\n     * options - {Object} Configuration options for the layer. Any inherited\n     *     layer option can be set in this object (e.g.\n     *     <OpenLayers.Layer.Grid.buffer>).\n     */\n    initialize: function(name, url, options) {\n        OpenLayers.Layer.XYZ.prototype.initialize.apply(this, arguments);\n        this.tileOptions = OpenLayers.Util.extend({\n            crossOriginKeyword: 'anonymous'\n        }, this.options && this.options.tileOptions);\n    },\n\n    /**\n     * Method: clone\n     */\n    clone: function(obj) {\n        if (obj == null) {\n            obj = new OpenLayers.Layer.OSM(\n                this.name, this.url, this.getOptions());\n        }\n        obj = OpenLayers.Layer.XYZ.prototype.clone.apply(this, [obj]);\n        return obj;\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.OSM\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Layer/XYZ.js\n */\n\n/** \n * Class: OpenLayers.Layer.Bing\n * Bing layer using direct tile access as provided by Bing Maps REST Services.\n * See http://msdn.microsoft.com/en-us/library/ff701713.aspx for more\n * information. Note: Terms of Service compliant use requires the map to be\n * configured with an <OpenLayers.Control.Attribution> control and the\n * attribution placed on or near the map.\n * \n * Inherits from:\n *  - <OpenLayers.Layer.XYZ>\n */\nOpenLayers.Layer.Bing = OpenLayers.Class(OpenLayers.Layer.XYZ, {\n\n    /**\n     * Property: key\n     * {String} API key for Bing maps, get your own key \n     *     at http://bingmapsportal.com/ .\n     */\n    key: null,\n\n    /**\n     * Property: serverResolutions\n     * {Array} the resolutions provided by the Bing servers.\n     */\n    serverResolutions: [\n        156543.03390625, 78271.516953125, 39135.7584765625,\n        19567.87923828125, 9783.939619140625, 4891.9698095703125,\n        2445.9849047851562, 1222.9924523925781, 611.4962261962891,\n        305.74811309814453, 152.87405654907226, 76.43702827453613,\n        38.218514137268066, 19.109257068634033, 9.554628534317017,\n        4.777314267158508, 2.388657133579254, 1.194328566789627,\n        0.5971642833948135, 0.29858214169740677, 0.14929107084870338,\n        0.07464553542435169, 0.03732276771218, 0.01866138385609\n    ],\n    \n    /**\n     * Property: attributionTemplate\n     * {String}\n     */\n    attributionTemplate: '<span class=\"olBingAttribution ${type}\">' +\n         '<div><a target=\"_blank\" href=\"http://www.bing.com/maps/\">' +\n         '<img src=\"${logo}\" /></a></div>${copyrights}' +\n         '<a style=\"white-space: nowrap\" target=\"_blank\" '+\n         'href=\"http://www.microsoft.com/maps/product/terms.html\">' +\n         'Terms of Use</a></span>',\n\n    /**\n     * Property: metadata\n     * {Object} Metadata for this layer, as returned by the callback script\n     */\n    metadata: null,\n\n    /**\n     * Property: protocolRegex\n     * {RegExp} Regular expression to match and replace http: in bing urls\n     */\n    protocolRegex: /^http:/i,\n    \n    /**\n     * APIProperty: type\n     * {String} The layer identifier.  Any non-birdseye imageryType\n     *     from http://msdn.microsoft.com/en-us/library/ff701716.aspx can be\n     *     used.  Default is \"Road\".\n     */\n    type: \"Road\",\n    \n    /**\n     * APIProperty: culture\n     * {String} The culture identifier.  See http://msdn.microsoft.com/en-us/library/ff701709.aspx\n     * for the definition and the possible values.  Default is \"en-US\".\n     */\n    culture: \"en-US\",\n    \n    /**\n     * APIProperty: metadataParams\n     * {Object} Optional url parameters for the Get Imagery Metadata request\n     * as described here: http://msdn.microsoft.com/en-us/library/ff701716.aspx\n     */\n    metadataParams: null,\n\n    /** APIProperty: tileOptions\n     *  {Object} optional configuration options for <OpenLayers.Tile> instances\n     *  created by this Layer. Default is\n     *\n     *  (code)\n     *  {crossOriginKeyword: 'anonymous'}\n     *  (end)\n     */\n    tileOptions: null,\n\n    /** APIProperty: protocol\n     *  {String} Protocol to use to fetch Imagery Metadata, tiles and bing logo\n     *  Can be 'http:' 'https:' or ''\n     *\n     *  Warning: tiles may not be available under both HTTP and HTTPS protocols.\n     *  Microsoft approved use of both HTTP and HTTPS urls for tiles. However\n     *  this is undocumented and the Imagery Metadata API always returns HTTP\n     *  urls.\n     *\n     *  Default is '', unless when executed from a file:/// uri, in which case\n     *  it is 'http:'.\n     */\n    protocol: ~window.location.href.indexOf('http') ? '' : 'http:',\n\n    /**\n     * Constructor: OpenLayers.Layer.Bing\n     * Create a new Bing layer.\n     *\n     * Example:\n     * (code)\n     * var road = new OpenLayers.Layer.Bing({\n     *     name: \"My Bing Aerial Layer\",\n     *     type: \"Aerial\",\n     *     key: \"my-api-key-here\",\n     * });\n     * (end)\n     *\n     * Parameters:\n     * options - {Object} Configuration properties for the layer.\n     *\n     * Required configuration properties:\n     * key - {String} Bing Maps API key for your application. Get one at\n     *     http://bingmapsportal.com/.\n     * type - {String} The layer identifier.  Any non-birdseye imageryType\n     *     from http://msdn.microsoft.com/en-us/library/ff701716.aspx can be\n     *     used.\n     *\n     * Any other documented layer properties can be provided in the config object.\n     */\n    initialize: function(options) {\n        options = OpenLayers.Util.applyDefaults({\n            sphericalMercator: true\n        }, options);\n        var name = options.name || \"Bing \" + (options.type || this.type);\n        \n        var newArgs = [name, null, options];\n        OpenLayers.Layer.XYZ.prototype.initialize.apply(this, newArgs);\n        this.tileOptions = OpenLayers.Util.extend({\n            crossOriginKeyword: 'anonymous'\n        }, this.options.tileOptions);\n        this.loadMetadata(); \n    },\n\n    /**\n     * Method: loadMetadata\n     */\n    loadMetadata: function() {\n        this._callbackId = \"_callback_\" + this.id.replace(/\\./g, \"_\");\n        // link the processMetadata method to the global scope and bind it\n        // to this instance\n        window[this._callbackId] = OpenLayers.Function.bind(\n            OpenLayers.Layer.Bing.processMetadata, this\n        );\n        var params = OpenLayers.Util.applyDefaults({\n            key: this.key,\n            jsonp: this._callbackId,\n            include: \"ImageryProviders\"\n        }, this.metadataParams);\n        var url = this.protocol + \"//dev.virtualearth.net/REST/v1/Imagery/Metadata/\" +\n            this.type + \"?\" + OpenLayers.Util.getParameterString(params);\n        var script = document.createElement(\"script\");\n        script.type = \"text/javascript\";\n        script.src = url;\n        script.id = this._callbackId;\n        document.getElementsByTagName(\"head\")[0].appendChild(script);\n    },\n    \n    /**\n     * Method: initLayer\n     *\n     * Sets layer properties according to the metadata provided by the API\n     */\n    initLayer: function() {\n        var res = this.metadata.resourceSets[0].resources[0];\n        var url = res.imageUrl.replace(\"{quadkey}\", \"${quadkey}\");\n        url = url.replace(\"{culture}\", this.culture);\n        url = url.replace(this.protocolRegex, this.protocol);\n        this.url = [];\n        for (var i=0; i<res.imageUrlSubdomains.length; ++i) {\n            this.url.push(url.replace(\"{subdomain}\", res.imageUrlSubdomains[i]));\n        }\n        this.addOptions({\n            maxResolution: Math.min(\n                this.serverResolutions[res.zoomMin],\n                this.maxResolution || Number.POSITIVE_INFINITY\n            ),\n            numZoomLevels: Math.min(\n                res.zoomMax + 1 - res.zoomMin, this.numZoomLevels\n            )\n        }, true);\n        if (!this.isBaseLayer) {\n            this.redraw();\n        }\n        this.updateAttribution();\n    },\n    \n    /**\n     * Method: getURL\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     */\n    getURL: function(bounds) {\n        if (!this.url) {\n            return;\n        }\n        var xyz = this.getXYZ(bounds), x = xyz.x, y = xyz.y, z = xyz.z;\n        var quadDigits = [];\n        for (var i = z; i > 0; --i) {\n            var digit = '0';\n            var mask = 1 << (i - 1);\n            if ((x & mask) != 0) {\n                digit++;\n            }\n            if ((y & mask) != 0) {\n                digit++;\n                digit++;\n            }\n            quadDigits.push(digit);\n        }\n        var quadKey = quadDigits.join(\"\");\n        var url = this.selectUrl('' + x + y + z, this.url);\n\n        return OpenLayers.String.format(url, {'quadkey': quadKey});\n    },\n    \n    /**\n     * Method: updateAttribution\n     * Updates the attribution according to the requirements outlined in\n     * http://gis.638310.n2.nabble.com/Bing-imagery-td5789168.html\n     */\n    updateAttribution: function() {\n        var metadata = this.metadata;\n        if (!metadata.resourceSets || !this.map || !this.map.center) {\n            return;\n        }\n        var res = metadata.resourceSets[0].resources[0];\n        var extent = this.map.getExtent().transform(\n            this.map.getProjectionObject(),\n            new OpenLayers.Projection(\"EPSG:4326\")\n        );\n        var providers = res.imageryProviders || [],\n            zoom = OpenLayers.Util.indexOf(this.serverResolutions,\n                                           this.getServerResolution()),\n            copyrights = \"\", provider, i, ii, j, jj, bbox, coverage;\n        for (i=0,ii=providers.length; i<ii; ++i) {\n            provider = providers[i];\n            for (j=0,jj=provider.coverageAreas.length; j<jj; ++j) {\n                coverage = provider.coverageAreas[j];\n                // axis order provided is Y,X\n                bbox = OpenLayers.Bounds.fromArray(coverage.bbox, true);\n                if (extent.intersectsBounds(bbox) &&\n                        zoom <= coverage.zoomMax && zoom >= coverage.zoomMin) {\n                    copyrights += provider.attribution + \" \";\n                }\n            }\n        }\n        var logo = metadata.brandLogoUri.replace(this.protocolRegex, this.protocol);\n        this.attribution = OpenLayers.String.format(this.attributionTemplate, {\n            type: this.type.toLowerCase(),\n            logo: logo,\n            copyrights: copyrights\n        });\n        this.map && this.map.events.triggerEvent(\"changelayer\", {\n            layer: this,\n            property: \"attribution\"\n        });\n    },\n    \n    /**\n     * Method: setMap\n     */\n    setMap: function() {\n        OpenLayers.Layer.XYZ.prototype.setMap.apply(this, arguments);\n        this.map.events.register(\"moveend\", this, this.updateAttribution);\n    },\n    \n    /**\n     * APIMethod: clone\n     * \n     * Parameters:\n     * obj - {Object}\n     * \n     * Returns:\n     * {<OpenLayers.Layer.Bing>} An exact clone of this <OpenLayers.Layer.Bing>\n     */\n    clone: function(obj) {\n        if (obj == null) {\n            obj = new OpenLayers.Layer.Bing(this.options);\n        }\n        //get all additions from superclasses\n        obj = OpenLayers.Layer.XYZ.prototype.clone.apply(this, [obj]);\n        // copy/set any non-init, non-simple values here\n        return obj;\n    },\n    \n    /**\n     * Method: destroy\n     */\n    destroy: function() {\n        this.map &&\n            this.map.events.unregister(\"moveend\", this, this.updateAttribution);\n        OpenLayers.Layer.XYZ.prototype.destroy.apply(this, arguments);\n    },\n    \n    CLASS_NAME: \"OpenLayers.Layer.Bing\"\n});\n\n/**\n * Function: OpenLayers.Layer.Bing.processMetadata\n * This function will be bound to an instance, linked to the global scope with\n * an id, and called by the JSONP script returned by the API.\n *\n * Parameters:\n * metadata - {Object} metadata as returned by the API\n */\nOpenLayers.Layer.Bing.processMetadata = function(metadata) {\n    this.metadata = metadata;\n    this.initLayer();\n    var script = document.getElementById(this._callbackId);\n    script.parentNode.removeChild(script);\n    window[this._callbackId] = undefined; // cannot delete from window in IE\n    delete this._callbackId;\n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Layer/Grid.js\n */\n\n/**\n * Class: OpenLayers.Layer.TMS\n * Create a layer for accessing tiles from services that conform with the \n *     Tile Map Service Specification \n *     (http://wiki.osgeo.org/wiki/Tile_Map_Service_Specification).\n *\n * Example:\n * (code)\n *     var layer = new OpenLayers.Layer.TMS(\n *         \"My Layer\", // name for display in LayerSwitcher\n *         \"http://tilecache.osgeo.org/wms-c/Basic.py/\", // service endpoint\n *         {layername: \"basic\", type: \"png\"} // required properties\n *     );\n * (end)\n * \n * Inherits from:\n *  - <OpenLayers.Layer.Grid>\n */\nOpenLayers.Layer.TMS = OpenLayers.Class(OpenLayers.Layer.Grid, {\n\n    /**\n     * APIProperty: serviceVersion\n     * {String} Service version for tile requests.  Default is \"1.0.0\".\n     */\n    serviceVersion: \"1.0.0\",\n\n    /**\n     * APIProperty: layername\n     * {String} The identifier for the <TileMap> as advertised by the service.  \n     *     For example, if the service advertises a <TileMap> with \n     *    'href=\"http://tms.osgeo.org/1.0.0/vmap0\"', the <layername> property \n     *     would be set to \"vmap0\".\n     */\n    layername: null,\n\n    /**\n     * APIProperty: type\n     * {String} The format extension corresponding to the requested tile image\n     *     type.  This is advertised in a <TileFormat> element as the \n     *     \"extension\" attribute.  For example, if the service advertises a \n     *     <TileMap> with <TileFormat width=\"256\" height=\"256\" mime-type=\"image/jpeg\" extension=\"jpg\" />,\n     *     the <type> property would be set to \"jpg\".\n     */\n    type: null,\n\n    /**\n     * APIProperty: isBaseLayer\n     * {Boolean} Make this layer a base layer.  Default is true.  Set false to\n     *     use the layer as an overlay.\n     */\n    isBaseLayer: true,\n\n    /**\n     * APIProperty: tileOrigin\n     * {<OpenLayers.LonLat>} Optional origin for aligning the grid of tiles.\n     *     If provided, requests for tiles at all resolutions will be aligned\n     *     with this location (no tiles shall overlap this location).  If\n     *     not provided, the grid of tiles will be aligned with the bottom-left\n     *     corner of the map's <maxExtent>.  Default is ``null``.\n     *\n     * Example:\n     * (code)\n     *     var layer = new OpenLayers.Layer.TMS(\n     *         \"My Layer\",\n     *         \"http://tilecache.osgeo.org/wms-c/Basic.py/\",\n     *         {\n     *             layername: \"basic\", \n     *             type: \"png\",\n     *             // set if different than the bottom left of map.maxExtent\n     *             tileOrigin: new OpenLayers.LonLat(-180, -90)\n     *         }\n     *     );\n     * (end)\n     */\n    tileOrigin: null,\n\n    /**\n     * APIProperty: serverResolutions\n     * {Array} A list of all resolutions available on the server.  Only set this\n     *     property if the map resolutions differ from the server. This\n     *     property serves two purposes. (a) <serverResolutions> can include\n     *     resolutions that the server supports and that you don't want to\n     *     provide with this layer; you can also look at <zoomOffset>, which is\n     *     an alternative to <serverResolutions> for that specific purpose.\n     *     (b) The map can work with resolutions that aren't supported by\n     *     the server, i.e. that aren't in <serverResolutions>. When the\n     *     map is displayed in such a resolution data for the closest\n     *     server-supported resolution is loaded and the layer div is\n     *     stretched as necessary.\n     */\n    serverResolutions: null,\n\n    /**\n     * APIProperty: zoomOffset\n     * {Number} If your cache has more zoom levels than you want to provide\n     *     access to with this layer, supply a zoomOffset.  This zoom offset\n     *     is added to the current map zoom level to determine the level\n     *     for a requested tile.  For example, if you supply a zoomOffset\n     *     of 3, when the map is at the zoom 0, tiles will be requested from\n     *     level 3 of your cache.  Default is 0 (assumes cache level and map\n     *     zoom are equivalent).  Using <zoomOffset> is an alternative to\n     *     setting <serverResolutions> if you only want to expose a subset\n     *     of the server resolutions.\n     */\n    zoomOffset: 0,\n    \n    /**\n     * Constructor: OpenLayers.Layer.TMS\n     * \n     * Parameters:\n     * name - {String} Title to be displayed in a <OpenLayers.Control.LayerSwitcher>\n     * url - {String} Service endpoint (without the version number).  E.g.\n     *     \"http://tms.osgeo.org/\".\n     * options - {Object} Additional properties to be set on the layer.  The\n     *     <layername> and <type> properties must be set here.\n     */\n    initialize: function(name, url, options) {\n        var newArguments = [];\n        newArguments.push(name, url, {}, options);\n        OpenLayers.Layer.Grid.prototype.initialize.apply(this, newArguments);\n    },    \n\n    /**\n     * APIMethod: clone\n     * Create a complete copy of this layer.\n     *\n     * Parameters:\n     * obj - {Object} Should only be provided by subclasses that call this\n     *     method.\n     * \n     * Returns:\n     * {<OpenLayers.Layer.TMS>} An exact clone of this <OpenLayers.Layer.TMS>\n     */\n    clone: function (obj) {\n        \n        if (obj == null) {\n            obj = new OpenLayers.Layer.TMS(this.name,\n                                           this.url,\n                                           this.getOptions());\n        }\n\n        //get all additions from superclasses\n        obj = OpenLayers.Layer.Grid.prototype.clone.apply(this, [obj]);\n\n        // copy/set any non-init, non-simple values here\n\n        return obj;\n    },    \n    \n    /**\n     * Method: getURL\n     * \n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     * \n     * Returns:\n     * {String} A string with the layer's url and parameters and also the \n     *          passed-in bounds and appropriate tile size specified as \n     *          parameters\n     */\n    getURL: function (bounds) {\n        bounds = this.adjustBounds(bounds);\n        var res = this.getServerResolution();\n        var x = Math.round((bounds.left - this.tileOrigin.lon) / (res * this.tileSize.w));\n        var y = Math.round((bounds.bottom - this.tileOrigin.lat) / (res * this.tileSize.h));\n        var z = this.getServerZoom();\n        var path = this.serviceVersion + \"/\" + this.layername + \"/\" + z + \"/\" + x + \"/\" + y + \".\" + this.type; \n        var url = this.url;\n        if (OpenLayers.Util.isArray(url)) {\n            url = this.selectUrl(path, url);\n        }\n        return url + path;\n    },\n\n    /** \n     * Method: setMap\n     * When the layer is added to a map, then we can fetch our origin \n     *    (if we don't have one.) \n     * \n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    setMap: function(map) {\n        OpenLayers.Layer.Grid.prototype.setMap.apply(this, arguments);\n        if (!this.tileOrigin) { \n            this.tileOrigin = new OpenLayers.LonLat(this.map.maxExtent.left,\n                                                this.map.maxExtent.bottom);\n        }                                       \n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.TMS\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Layer/Grid.js\n */\n\n/**\n * Class: OpenLayers.Layer.TileCache\n * A read only TileCache layer.  Used to requests tiles cached by TileCache in\n *     a web accessible cache.  This means that you have to pre-populate your\n *     cache before this layer can be used.  It is meant only to read tiles\n *     created by TileCache, and not to make calls to TileCache for tile\n *     creation.  Create a new instance with the\n *     <OpenLayers.Layer.TileCache> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Layer.Grid>\n */\nOpenLayers.Layer.TileCache = OpenLayers.Class(OpenLayers.Layer.Grid, {\n\n    /** \n     * APIProperty: isBaseLayer\n     * {Boolean} Treat this layer as a base layer.  Default is true.\n     */\n    isBaseLayer: true,\n    \n    /** \n     * APIProperty: format\n     * {String} Mime type of the images returned.  Default is image/png.\n     */\n    format: 'image/png',\n\n    /**\n     * APIProperty: serverResolutions\n     * {Array} A list of all resolutions available on the server.  Only set this\n     *     property if the map resolutions differ from the server. This\n     *     property serves two purposes. (a) <serverResolutions> can include\n     *     resolutions that the server supports and that you don't want to\n     *     provide with this layer. (b) The map can work with resolutions\n     *     that aren't supported by the server, i.e. that aren't in\n     *     <serverResolutions>. When the map is displayed in such a resolution\n     *     data for the closest server-supported resolution is loaded and the\n     *     layer div is stretched as necessary.\n     */\n    serverResolutions: null,\n\n    /**\n     * Constructor: OpenLayers.Layer.TileCache\n     * Create a new read only TileCache layer.\n     *\n     * Parameters:\n     * name - {String} Name of the layer displayed in the interface\n     * url - {String} Location of the web accessible cache (not the location of\n     *     your tilecache script!)\n     * layername - {String} Layer name as defined in the TileCache \n     *     configuration\n     * options - {Object} Optional object with properties to be set on the\n     *     layer.  Note that you should speficy your resolutions to match\n     *     your TileCache configuration.  This can be done by setting\n     *     the resolutions array directly (here or on the map), by setting\n     *     maxResolution and numZoomLevels, or by using scale based properties.\n     */\n    initialize: function(name, url, layername, options) {\n        this.layername = layername;\n        OpenLayers.Layer.Grid.prototype.initialize.apply(this,\n                                                         [name, url, {}, options]);\n        this.extension = this.format.split('/')[1].toLowerCase();\n        this.extension = (this.extension == 'jpg') ? 'jpeg' : this.extension;\n    },    \n\n    /**\n     * APIMethod: clone\n     * obj - {Object} \n     * \n     * Returns:\n     * {<OpenLayers.Layer.TileCache>} An exact clone of this \n     *     <OpenLayers.Layer.TileCache>\n     */\n    clone: function (obj) {\n        \n        if (obj == null) {\n            obj = new OpenLayers.Layer.TileCache(this.name,\n                                                 this.url,\n                                                 this.layername,\n                                                 this.getOptions());\n        }\n\n        //get all additions from superclasses\n        obj = OpenLayers.Layer.Grid.prototype.clone.apply(this, [obj]);\n\n        // copy/set any non-init, non-simple values here\n\n        return obj;\n    },    \n    \n    /**\n     * Method: getURL\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>} \n     * \n     * Returns:\n     * {String} A string with the layer's url and parameters and also the \n     *     passed-in bounds and appropriate tile size specified as parameters.\n     */\n    getURL: function(bounds) {\n        var res = this.getServerResolution();\n        var bbox = this.maxExtent;\n        var size = this.tileSize;\n        var tileX = Math.round((bounds.left - bbox.left) / (res * size.w));\n        var tileY = Math.round((bounds.bottom - bbox.bottom) / (res * size.h));\n        var tileZ = this.serverResolutions != null ?\n            OpenLayers.Util.indexOf(this.serverResolutions, res) :\n            this.map.getZoom();\n\n        var components = [\n            this.layername,\n            OpenLayers.Number.zeroPad(tileZ, 2),\n            OpenLayers.Number.zeroPad(parseInt(tileX / 1000000), 3),\n            OpenLayers.Number.zeroPad((parseInt(tileX / 1000) % 1000), 3),\n            OpenLayers.Number.zeroPad((parseInt(tileX) % 1000), 3),\n            OpenLayers.Number.zeroPad(parseInt(tileY / 1000000), 3),\n            OpenLayers.Number.zeroPad((parseInt(tileY / 1000) % 1000), 3),\n            OpenLayers.Number.zeroPad((parseInt(tileY) % 1000), 3) + '.' + this.extension\n        ];\n        var path = components.join('/'); \n        var url = this.url;\n        if (OpenLayers.Util.isArray(url)) {\n            url = this.selectUrl(path, url);\n        }\n        url = (url.charAt(url.length - 1) == '/') ? url : url + '/';\n        return url + path;\n    },\n    \n    CLASS_NAME: \"OpenLayers.Layer.TileCache\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/*\n * Development supported by a R&D grant DC08P02OUK006 - Old Maps Online\n * (www.oldmapsonline.org) from Ministry of Culture of the Czech Republic.\n */\n\n\n/**\n * @requires OpenLayers/Layer/Grid.js\n */\n\n/**\n * Class: OpenLayers.Layer.Zoomify\n *\n * Inherits from:\n *  - <OpenLayers.Layer.Grid>\n */\nOpenLayers.Layer.Zoomify = OpenLayers.Class(OpenLayers.Layer.Grid, {\n\n    /**\n     * Property: size\n     * {<OpenLayers.Size>} The Zoomify image size in pixels.\n     */\n    size: null,\n\n    /**\n     * APIProperty: isBaseLayer\n     * {Boolean}\n     */\n    isBaseLayer: true,\n\n    /**\n     * Property: standardTileSize\n     * {Integer} The size of a standard (non-border) square tile in pixels.\n     */\n    standardTileSize: 256,\n\n    /** \n     * Property: tileOriginCorner\n     * {String} This layer uses top-left as tile origin\n     **/\n    tileOriginCorner: \"tl\",\n\n    /**\n     * Property: numberOfTiers\n     * {Integer} Depth of the Zoomify pyramid, number of tiers (zoom levels)\n     *                          - filled during Zoomify pyramid initialization.\n     */\n    numberOfTiers: 0,\n\n    /**\n     * Property: tileCountUpToTier\n     * {Array(Integer)} Number of tiles up to the given tier of pyramid.\n     *                          - filled during Zoomify pyramid initialization.\n     */\n    tileCountUpToTier: null,\n\n    /**\n     * Property: tierSizeInTiles\n     * {Array(<OpenLayers.Size>)} Size (in tiles) for each tier of pyramid.\n     *                          - filled during Zoomify pyramid initialization.\n     */\n    tierSizeInTiles: null,\n\n    /**\n     * Property: tierImageSize\n     * {Array(<OpenLayers.Size>)} Image size in pixels for each pyramid tier.\n     *                          - filled during Zoomify pyramid initialization.\n     */\n    tierImageSize: null,\n\n    /**\n     * Constructor: OpenLayers.Layer.Zoomify\n     *\n     * Parameters:\n     * name - {String} A name for the layer.\n     * url - {String} - Relative or absolute path to the image or more\n     *        precisely to the TileGroup[X] directories root.\n     *        Flash plugin use the variable name \"zoomifyImagePath\" for this.\n     * size - {<OpenLayers.Size>} The size (in pixels) of the image.\n     * options - {Object} Hashtable of extra options to tag onto the layer\n     */\n    initialize: function(name, url, size, options) {\n\n        // initialize the Zoomify pyramid for given size\n        this.initializeZoomify(size);\n\n        OpenLayers.Layer.Grid.prototype.initialize.apply(this, [\n            name, url, {}, options\n        ]);\n    },\n\n    /**\n     * Method: initializeZoomify\n     * It generates constants for all tiers of the Zoomify pyramid\n     *\n     * Parameters:\n     * size - {<OpenLayers.Size>} The size of the image in pixels\n     *\n     */\n    initializeZoomify: function( size ) {\n\n        var imageSize = size.clone();\n        this.size = size.clone();\n        var tiles = new OpenLayers.Size(\n            Math.ceil( imageSize.w / this.standardTileSize ),\n            Math.ceil( imageSize.h / this.standardTileSize )\n            );\n\n        this.tierSizeInTiles = [tiles];\n        this.tierImageSize = [imageSize];\n\n        while (imageSize.w > this.standardTileSize ||\n               imageSize.h > this.standardTileSize ) {\n\n            imageSize = new OpenLayers.Size(\n                Math.floor( imageSize.w / 2 ),\n                Math.floor( imageSize.h / 2 )\n                );\n            tiles = new OpenLayers.Size(\n                Math.ceil( imageSize.w / this.standardTileSize ),\n                Math.ceil( imageSize.h / this.standardTileSize )\n                );\n            this.tierSizeInTiles.push( tiles );\n            this.tierImageSize.push( imageSize );\n        }\n\n        this.tierSizeInTiles.reverse();\n        this.tierImageSize.reverse();\n\n        this.numberOfTiers = this.tierSizeInTiles.length;\n        var resolutions = [1];\n        this.tileCountUpToTier = [0];\n        for (var i = 1; i < this.numberOfTiers; i++) {\n            resolutions.unshift(Math.pow(2, i));\n            this.tileCountUpToTier.push(\n                this.tierSizeInTiles[i-1].w * this.tierSizeInTiles[i-1].h +\n                this.tileCountUpToTier[i-1]\n                );\n        }\n        if (!this.serverResolutions) {\n            this.serverResolutions = resolutions;\n        }\n    },\n\n    /**\n     * APIMethod:destroy\n     */\n    destroy: function() {\n        // for now, nothing special to do here.\n        OpenLayers.Layer.Grid.prototype.destroy.apply(this, arguments);\n\n        // Remove from memory the Zoomify pyramid - is that enough?\n        this.tileCountUpToTier.length = 0;\n        this.tierSizeInTiles.length = 0;\n        this.tierImageSize.length = 0;\n\n    },\n\n    /**\n     * APIMethod: clone\n     *\n     * Parameters:\n     * obj - {Object}\n     *\n     * Returns:\n     * {<OpenLayers.Layer.Zoomify>} An exact clone of this <OpenLayers.Layer.Zoomify>\n     */\n    clone: function (obj) {\n\n        if (obj == null) {\n            obj = new OpenLayers.Layer.Zoomify(this.name,\n                                           this.url,\n                                           this.size,\n                                           this.options);\n        }\n\n        //get all additions from superclasses\n        obj = OpenLayers.Layer.Grid.prototype.clone.apply(this, [obj]);\n\n        // copy/set any non-init, non-simple values here\n\n        return obj;\n    },\n\n    /**\n     * Method: createBackBuffer\n     * Create a back buffer.\n     *\n     * Returns:\n     * {DOMElement} The DOM element for the back buffer, undefined if the\n     * grid isn't initialized yet.\n     */\n    createBackBuffer: function() {\n        var backBuffer = OpenLayers.Layer.Grid.prototype.createBackBuffer.apply(this, arguments);\n        if(backBuffer) {\n            var image;\n            for (var i=backBuffer.childNodes.length-1; i>=0; --i) {\n                image = backBuffer.childNodes[i];\n                image._w = image.width;\n                image._h = image.height;\n            }\n        }\n        return backBuffer;\n    },\n\n    /**\n     * Method: getURL\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     *\n     * Returns:\n     * {String} A string with the layer's url and parameters and also the\n     *          passed-in bounds and appropriate tile size specified as\n     *          parameters\n     */\n    getURL: function (bounds) {\n        bounds = this.adjustBounds(bounds);\n        var res = this.getServerResolution();\n        var x = Math.round((bounds.left - this.tileOrigin.lon) / (res * this.tileSize.w));\n        var y = Math.round((this.tileOrigin.lat - bounds.top) / (res * this.tileSize.h));\n        var z = this.getZoomForResolution( res );\n\n        var tileIndex = x + y * this.tierSizeInTiles[z].w + this.tileCountUpToTier[z];\n        var path = \"TileGroup\" + Math.floor( (tileIndex) / 256 ) +\n            \"/\" + z + \"-\" + x + \"-\" + y + \".jpg\";\n        var url = this.url;\n        if (OpenLayers.Util.isArray(url)) {\n            url = this.selectUrl(path, url);\n        }\n        return url + path;\n    },\n\n    /**\n     * Method: getImageSize\n     * getImageSize returns size for a particular tile. If bounds are given as\n     * first argument, size is calculated (bottom-right tiles are non square).\n     *\n     */\n    getImageSize: function() {\n        if (arguments.length > 0) {\n            var bounds = this.adjustBounds(arguments[0]);\n            var res = this.getServerResolution();\n            var x = Math.round((bounds.left - this.tileOrigin.lon) / (res * this.tileSize.w));\n            var y = Math.round((this.tileOrigin.lat - bounds.top) / (res * this.tileSize.h));\n            var z = this.getZoomForResolution( res );\n            var w = this.standardTileSize;\n            var h = this.standardTileSize;\n            if (x == this.tierSizeInTiles[z].w -1 ) {\n                var w = this.tierImageSize[z].w % this.standardTileSize;\n                if (w == 0) {\n                    w = this.standardTileSize;\n                }\n            }\n            if (y == this.tierSizeInTiles[z].h -1 ) {\n                var h = this.tierImageSize[z].h % this.standardTileSize;\n                if (h == 0) {\n                    h = this.standardTileSize;\n                }\n            }\n            // in jp2 format, dimensions of tiles are ceiled, that means there may be requested part of image (1px usually) above dimension stated in tierImageSize. \n            if (x == this.tierSizeInTiles[z].w) {\n                w = Math.ceil(this.size.w / Math.pow(2, this.numberOfTiers - 1 - z) - this.tierImageSize[z].w);\n            }\n            if (y == this.tierSizeInTiles[z].h) {\n                h = Math.ceil(this.size.h / Math.pow(2, this.numberOfTiers - 1 - z) - this.tierImageSize[z].h);\n            }\n            return (new OpenLayers.Size(w, h));\n        } else {\n            return this.tileSize;\n        }\n    },\n\n    /**\n     * APIMethod: setMap\n     * When the layer is added to a map, then we can fetch our origin\n     *    (if we don't have one.)\n     *\n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    setMap: function(map) {\n        OpenLayers.Layer.Grid.prototype.setMap.apply(this, arguments);\n        this.tileOrigin = new OpenLayers.LonLat(this.map.maxExtent.left,\n                                                this.map.maxExtent.top);\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.Zoomify\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/** \n * @requires OpenLayers/Layer/XYZ.js\n */ \n\n/** \n * Class: OpenLayers.Layer.ArcGISCache   \n * Layer for accessing cached map tiles from an ArcGIS Server style mapcache. \n * Tile must already be cached for this layer to access it. This does not require \n * ArcGIS Server itself.\n * \n * A few attempts have been made at this kind of layer before. See \n * http://trac.osgeo.org/openlayers/ticket/1967 \n * and \n * http://trac.osgeo.org/openlayers/browser/sandbox/tschaub/arcgiscache/lib/OpenLayers/Layer/ArcGISCache.js\n *\n * Typically the problem encountered is that the tiles seem to \"jump around\".\n * This is due to the fact that the actual max extent for the tiles on AGS layers\n * changes at each zoom level due to the way these caches are constructed.\n * We have attempted to use the resolutions, tile size, and tile origin\n * from the cache meta data to make the appropriate changes to the max extent\n * of the tile to compensate for this behavior.  This must be done as zoom levels change\n * and before tiles are requested, which is why methods from base classes are overridden.\n *\n * For reference, you can access mapcache meta data in two ways. For accessing a \n * mapcache through ArcGIS Server, you can simply go to the landing page for the\n * layer. (ie. http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer)\n * For accessing it directly through HTTP, there should always be a conf.xml file\n * in the root directory. \n * (ie. http://serverx.esri.com/arcgiscache/DG_County_roads_yesA_backgroundDark/Layers/conf.xml)\n *  \n *Inherits from: \n *  - <OpenLayers.Layer.XYZ>             \n */    \nOpenLayers.Layer.ArcGISCache = OpenLayers.Class(OpenLayers.Layer.XYZ, {  \n\n    /**\n     * APIProperty: url\n     * {String | Array} The base URL for the layer cache.  You can also\n     *     provide a list of URL strings for the layer if your cache is\n     *     available from multiple origins.  This must be set before the layer\n     *     is drawn.\n     */\n    url: null,\n    \n    /**\n     * APIProperty: tileOrigin\n     * {<OpenLayers.LonLat>} The location of the tile origin for the cache.\n     *     An ArcGIS cache has it's origin at the upper-left (lowest x value\n     *     and highest y value of the coordinate system).  The units for the\n     *     tile origin should be the same as the units for the cached data.\n     */\n    tileOrigin: null, \n   \n    /**\n     * APIProperty: tileSize\n     * {<OpenLayers.Size>} This size of each tile. Defaults to 256 by 256 pixels.\n     */\n    tileSize: new OpenLayers.Size(256, 256),\n    \n    /**\n     * APIProperty: useArcGISServer\n     * {Boolean} Indicates if we are going to be accessing the ArcGIS Server (AGS)\n     *     cache via an AGS MapServer or directly through HTTP. When accessing via\n     *     AGS the path structure uses a standard z/y/x structure. But AGS actually\n     *     stores the tile images on disk using a hex based folder structure that looks\n     *     like \"http://example.com/mylayer/L00/R00000000/C00000000.png\".  Learn more\n     *     about this here:\n     *     http://blogs.esri.com/Support/blogs/mappingcenter/archive/2010/08/20/Checking-Your-Local-Cache-Folders.aspx\n     *     Defaults to true;\n     */    \n    useArcGISServer: true,\n\n    /**\n     * APIProperty: type\n     * {String} Image type for the layer.  This becomes the filename extension\n     *     in tile requests.  Default is \"png\" (generating a url like\n     *     \"http://example.com/mylayer/L00/R00000000/C00000000.png\").\n     */\n    type: 'png',\n    \n    /**\n     * APIProperty: useScales\n     * {Boolean} Optional override to indicate that the layer should use 'scale' information\n     *     returned from the server capabilities object instead of 'resolution' information.\n     *     This can be important if your tile server uses an unusual DPI for the tiles.\n     */\n    useScales: false,\n    \n    /**\n     * APIProperty: overrideDPI\n     * {Boolean} Optional override to change the OpenLayers.DOTS_PER_INCH setting based \n     *     on the tile information in the server capabilities object.  This can be useful \n     *     if your server has a non-standard DPI setting on its tiles, and you're only using \n     *     tiles with that DPI.  This value is used while OpenLayers is calculating resolution\n     *     using scales, and is not necessary if you have resolution information. (This is\n     *     typically the case)  Regardless, this setting can be useful, but is dangerous\n     *     because it will impact other layers while calculating resolution.  Only use this\n     *     if you know what you are doing.  (See OpenLayers.Util.getResolutionFromScale)\n     */\n    overrideDPI: false,\n\n    /**\n     * APIProperty: hexZoom\n     * {Boolean} Should we hex encode the z values in the url?\n     * Default value is false.\n     */\n    hexZoom: false,\n    \n    /**\n     * Constructor: OpenLayers.Layer.ArcGISCache \n     * Creates a new instance of this class \n     * \n     * Parameters: \n     * name - {String} \n     * url - {String} \n     * options - {Object} extra layer options\n     */ \n    initialize: function(name, url, options) { \n        OpenLayers.Layer.XYZ.prototype.initialize.apply(this, arguments);\n\n        if (this.resolutions) {        \n            this.serverResolutions = this.resolutions;\n            this.maxExtent = this.getMaxExtentForResolution(this.resolutions[0]);\n        }\n\n        // this block steps through translating the values from the server layer JSON \n        // capabilities object into values that we can use.  This is also a helpful\n        // reference when configuring this layer directly.\n        if (this.layerInfo) {\n            // alias the object\n            var info = this.layerInfo;\n            \n            // build our extents\n            var startingTileExtent = new OpenLayers.Bounds(\n                info.fullExtent.xmin, \n                info.fullExtent.ymin, \n                info.fullExtent.xmax, \n                info.fullExtent.ymax  \n            );\n\n            // set our projection based on the given spatial reference.\n            // esri uses slightly different IDs, so this may not be comprehensive\n            this.projection = 'EPSG:' + info.spatialReference.wkid;\n            this.sphericalMercator = (info.spatialReference.wkid == 102100);\n            \n            // convert esri units into openlayers units (basic feet or meters only)\n            this.units = (info.units == \"esriFeet\") ? 'ft' : 'm';\n\n            // optional extended section based on whether or not the server returned\n            // specific tile information\n            if (!!info.tileInfo) {            \n                // either set the tiles based on rows/columns, or specific width/height\n                this.tileSize = new OpenLayers.Size(\n                    info.tileInfo.width || info.tileInfo.cols, \n                    info.tileInfo.height || info.tileInfo.rows\n                );\n                \n                // this must be set when manually configuring this layer\n                this.tileOrigin = new OpenLayers.LonLat(\n                    info.tileInfo.origin.x, \n                    info.tileInfo.origin.y\n                );\n\n                var upperLeft = new OpenLayers.Geometry.Point(\n                    startingTileExtent.left, \n                    startingTileExtent.top\n                );\n                \n                var bottomRight = new OpenLayers.Geometry.Point(\n                    startingTileExtent.right, \n                    startingTileExtent.bottom\n                );            \n                \n                if (this.useScales) {\n                    this.scales = [];\n                } else {\n                    this.resolutions = [];\n                }\n                \n                this.lods = [];\n                for(var key in info.tileInfo.lods) {\n                    if (info.tileInfo.lods.hasOwnProperty(key)) {\n                        var lod = info.tileInfo.lods[key];\n                        if (this.useScales) {\n                            this.scales.push(lod.scale);\n                        } else {\n                            this.resolutions.push(lod.resolution);\n                        }\n                    \n                        var start = this.getContainingTileCoords(upperLeft, lod.resolution);\n                        lod.startTileCol = start.x;\n                        lod.startTileRow = start.y;\n                    \n                        var end = this.getContainingTileCoords(bottomRight, lod.resolution);\n                        lod.endTileCol = end.x;\n                        lod.endTileRow = end.y;    \n                        this.lods.push(lod);\n                    }\n                }\n\n                this.maxExtent = this.calculateMaxExtentWithLOD(this.lods[0]);\n                this.serverResolutions = this.resolutions;\n                if (this.overrideDPI && info.tileInfo.dpi) {\n                    // see comment above for 'overrideDPI'\n                    OpenLayers.DOTS_PER_INCH = info.tileInfo.dpi;\n                }\n            } \n       }\n    }, \n\n    /** \n     * Method: getContainingTileCoords\n     * Calculates the x/y pixel corresponding to the position of the tile\n     *     that contains the given point and for the for the given resolution.\n     * \n     * Parameters:\n     * point - {<OpenLayers.Geometry.Point>} \n     * res - {Float} The resolution for which to compute the extent.\n     * \n     * Returns: \n     * {<OpenLayers.Pixel>} The x/y pixel corresponding to the position \n     * of the upper left tile for the given resolution.\n     */\n    getContainingTileCoords: function(point, res) {\n        return new OpenLayers.Pixel(\n           Math.max(Math.floor((point.x - this.tileOrigin.lon) / (this.tileSize.w * res)),0),\n           Math.max(Math.floor((this.tileOrigin.lat - point.y) / (this.tileSize.h * res)),0)\n        );\n    },\n    \n    /** \n     * Method: calculateMaxExtentWithLOD\n     * Given a Level of Detail object from the server, this function\n     *     calculates the actual max extent\n     * \n     * Parameters: \n     * lod - {Object} a Level of Detail Object from the server capabilities object \n             representing a particular zoom level\n     * \n     * Returns: \n     * {<OpenLayers.Bounds>} The actual extent of the tiles for the given zoom level\n     */\n    calculateMaxExtentWithLOD: function(lod) {\n        // the max extent we're provided with just overlaps some tiles\n        // our real extent is the bounds of all the tiles we touch\n\n        var numTileCols = (lod.endTileCol - lod.startTileCol) + 1;\n        var numTileRows = (lod.endTileRow - lod.startTileRow) + 1;        \n\n        var minX = this.tileOrigin.lon + (lod.startTileCol * this.tileSize.w * lod.resolution);\n        var maxX = minX + (numTileCols * this.tileSize.w * lod.resolution);\n\n        var maxY = this.tileOrigin.lat - (lod.startTileRow * this.tileSize.h * lod.resolution);\n        var minY = maxY - (numTileRows * this.tileSize.h * lod.resolution);\n        return new OpenLayers.Bounds(minX, minY, maxX, maxY);\n    },\n    \n    /** \n     * Method: calculateMaxExtentWithExtent\n     * Given a 'suggested' max extent from the server, this function uses\n     *     information about the actual tile sizes to determine the actual\n     *     extent of the layer.\n     * \n     * Parameters: \n     * extent - {<OpenLayers.Bounds>} The 'suggested' extent for the layer\n     * res - {Float} The resolution for which to compute the extent.\n     * \n     * Returns: \n     * {<OpenLayers.Bounds>} The actual extent of the tiles for the given zoom level\n     */\n    calculateMaxExtentWithExtent: function(extent, res) {\n        var upperLeft = new OpenLayers.Geometry.Point(extent.left, extent.top);\n        var bottomRight = new OpenLayers.Geometry.Point(extent.right, extent.bottom);\n        var start = this.getContainingTileCoords(upperLeft, res);\n        var end = this.getContainingTileCoords(bottomRight, res);\n        var lod = {\n            resolution: res,\n            startTileCol: start.x,\n            startTileRow: start.y,\n            endTileCol: end.x,\n            endTileRow: end.y\n        };\n        return this.calculateMaxExtentWithLOD(lod);\n    },\n    \n    /** \n     * Method: getUpperLeftTileCoord\n     * Calculates the x/y pixel corresponding to the position \n     *     of the upper left tile for the given resolution.\n     * \n     * Parameters: \n     * res - {Float} The resolution for which to compute the extent.\n     * \n     * Returns: \n     * {<OpenLayers.Pixel>} The x/y pixel corresponding to the position \n     * of the upper left tile for the given resolution.\n     */\n    getUpperLeftTileCoord: function(res) {\n        var upperLeft = new OpenLayers.Geometry.Point(\n            this.maxExtent.left,\n            this.maxExtent.top);\n        return this.getContainingTileCoords(upperLeft, res);\n    },\n\n    /** \n     * Method: getLowerRightTileCoord\n     * Calculates the x/y pixel corresponding to the position \n     *     of the lower right tile for the given resolution.\n     *  \n     * Parameters: \n     * res - {Float} The resolution for which to compute the extent.\n     * \n     * Returns: \n     * {<OpenLayers.Pixel>} The x/y pixel corresponding to the position\n     * of the lower right tile for the given resolution.\n     */\n    getLowerRightTileCoord: function(res) {\n        var bottomRight = new OpenLayers.Geometry.Point(\n            this.maxExtent.right,\n            this.maxExtent.bottom);\n        return this.getContainingTileCoords(bottomRight, res);\n    },\n    \n    /** \n     * Method: getMaxExtentForResolution\n     * Since the max extent of a set of tiles can change from zoom level\n     *     to zoom level, we need to be able to calculate that max extent \n     *     for a given resolution.\n     *\n     * Parameters: \n     * res - {Float} The resolution for which to compute the extent.\n     * \n     * Returns: \n     * {<OpenLayers.Bounds>} The extent for this resolution\n     */ \n    getMaxExtentForResolution: function(res) {\n        var start = this.getUpperLeftTileCoord(res);\n        var end = this.getLowerRightTileCoord(res);\n\n        var numTileCols = (end.x - start.x) + 1;\n        var numTileRows = (end.y - start.y) + 1;\n\n        var minX = this.tileOrigin.lon + (start.x * this.tileSize.w * res);\n        var maxX = minX + (numTileCols * this.tileSize.w * res);\n        \n        var maxY = this.tileOrigin.lat - (start.y * this.tileSize.h * res);\n        var minY = maxY - (numTileRows * this.tileSize.h * res);\n        return new OpenLayers.Bounds(minX, minY, maxX, maxY);\n    },\n    \n    /** \n     * APIMethod: clone \n     * Returns an exact clone of this OpenLayers.Layer.ArcGISCache\n     * \n     * Parameters: \n     * [obj] - {Object} optional object to assign the cloned instance to.\n     *  \n     * Returns: \n     * {<OpenLayers.Layer.ArcGISCache>} clone of this instance \n     */ \n    clone: function (obj) { \n        if (obj == null) { \n            obj = new OpenLayers.Layer.ArcGISCache(this.name, this.url, this.options);\n        }\n        return OpenLayers.Layer.XYZ.prototype.clone.apply(this, [obj]);\n    },\n\n    /**\n     * Method: initGriddedTiles\n     * \n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     */\n    initGriddedTiles: function(bounds) {\n        delete this._tileOrigin;\n        OpenLayers.Layer.XYZ.prototype.initGriddedTiles.apply(this, arguments);\n    },\n    \n    /**\n     * Method: getMaxExtent\n     * Get this layer's maximum extent.\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>}\n     */\n    getMaxExtent: function() {\n        var resolution = this.map.getResolution();\n        return this.maxExtent = this.getMaxExtentForResolution(resolution);\n    },\n\n    /**\n     * Method: getTileOrigin\n     * Determine the origin for aligning the grid of tiles.  \n     *     The origin will be derived from the layer's <maxExtent> property. \n     *\n     * Returns:\n     * {<OpenLayers.LonLat>} The tile origin.\n     */\n    getTileOrigin: function() {\n        if (!this._tileOrigin) {\n            var extent = this.getMaxExtent();\n            this._tileOrigin = new OpenLayers.LonLat(extent.left, extent.bottom);\n        }\n        return this._tileOrigin;\n    },\n\n    /**\n     * Method: getURL\n     * Determine the URL for a tile given the tile bounds.  This is should support\n     *     urls that access tiles through an ArcGIS Server MapServer or directly through\n     *     the hex folder structure using HTTP.  Just be sure to set the useArcGISServer\n     *     property appropriately!  This is basically the same as \n     *     'OpenLayers.Layer.TMS.getURL',  but with the addition of hex addressing,\n     *     and tile rounding.\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     *\n     * Returns:\n     * {String} The URL for a tile based on given bounds.\n     */\n    getURL: function (bounds) {\n        var res = this.getResolution(); \n\n        // tile center\n        var originTileX = (this.tileOrigin.lon + (res * this.tileSize.w/2)); \n        var originTileY = (this.tileOrigin.lat - (res * this.tileSize.h/2));\n\n        var center = bounds.getCenterLonLat();\n        var point = { x: center.lon, y: center.lat };\n        var x = (Math.round(Math.abs((center.lon - originTileX) / (res * this.tileSize.w)))); \n        var y = (Math.round(Math.abs((originTileY - center.lat) / (res * this.tileSize.h)))); \n        var z = this.map.getZoom();\n\n        // this prevents us from getting pink tiles (non-existent tiles)\n        if (this.lods) {        \n            var lod = this.lods[this.map.getZoom()];\n            if ((x < lod.startTileCol || x > lod.endTileCol) \n                || (y < lod.startTileRow || y > lod.endTileRow)) {\n                    return null;\n            }\n        }\n        else {\n            var start = this.getUpperLeftTileCoord(res);\n            var end = this.getLowerRightTileCoord(res);\n            if ((x < start.x || x >= end.x)\n                || (y < start.y || y >= end.y)) {\n                    return null;\n            }        \n        }\n\n        // Construct the url string\n        var url = this.url;\n        var s = '' + x + y + z;\n\n        if (OpenLayers.Util.isArray(url)) {\n            url = this.selectUrl(s, url);\n        }\n\n        // Accessing tiles through ArcGIS Server uses a different path\n        // structure than direct access via the folder structure.\n        if (this.useArcGISServer) {\n            // AGS MapServers have pretty url access to tiles\n            url = url + '/tile/${z}/${y}/${x}';\n        } else {\n            // The tile images are stored using hex values on disk.\n            x = 'C' + OpenLayers.Number.zeroPad(x, 8, 16);\n            y = 'R' + OpenLayers.Number.zeroPad(y, 8, 16);\n            z = 'L' + OpenLayers.Number.zeroPad(z, 2, this.hexZoom ? 16 : 10);\n            url = url + '/${z}/${y}/${x}.' + this.type;\n        }\n\n        // Write the values into our formatted url\n        url = OpenLayers.String.format(url, {'x': x, 'y': y, 'z': z});\n\n        return OpenLayers.Util.urlAppend(\n            url, OpenLayers.Util.getParameterString(this.params)\n        );\n    },\n\n    CLASS_NAME: 'OpenLayers.Layer.ArcGISCache' \n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Popup.js\n */\n\n/**\n * Class: OpenLayers.Popup.Anchored\n * \n * Inherits from:\n *  - <OpenLayers.Popup>\n */\nOpenLayers.Popup.Anchored = \n  OpenLayers.Class(OpenLayers.Popup, {\n\n    /** \n     * Property: relativePosition\n     * {String} Relative position of the popup (\"br\", \"tr\", \"tl\" or \"bl\").\n     */\n    relativePosition: null,\n    \n    /**\n     * APIProperty: keepInMap \n     * {Boolean} If panMapIfOutOfView is false, and this property is true, \n     *     contrain the popup such that it always fits in the available map\n     *     space. By default, this is set. If you are creating popups that are\n     *     near map edges and not allowing pannning, and especially if you have\n     *     a popup which has a fixedRelativePosition, setting this to false may\n     *     be a smart thing to do.\n     *   \n     *     For anchored popups, default is true, since subclasses will\n     *     usually want this functionality.\n     */\n    keepInMap: true,\n\n    /**\n     * Property: anchor\n     * {Object} Object to which we'll anchor the popup. Must expose a \n     *     'size' (<OpenLayers.Size>) and 'offset' (<OpenLayers.Pixel>).\n     */\n    anchor: null,\n\n    /** \n    * Constructor: OpenLayers.Popup.Anchored\n    * \n    * Parameters:\n    * id - {String}\n    * lonlat - {<OpenLayers.LonLat>}\n    * contentSize - {<OpenLayers.Size>}\n    * contentHTML - {String}\n    * anchor - {Object} Object which must expose a 'size' <OpenLayers.Size> \n    *     and 'offset' <OpenLayers.Pixel> (generally an <OpenLayers.Icon>).\n    * closeBox - {Boolean}\n    * closeBoxCallback - {Function} Function to be called on closeBox click.\n    */\n    initialize:function(id, lonlat, contentSize, contentHTML, anchor, closeBox,\n                        closeBoxCallback) {\n        var newArguments = [\n            id, lonlat, contentSize, contentHTML, closeBox, closeBoxCallback\n        ];\n        OpenLayers.Popup.prototype.initialize.apply(this, newArguments);\n\n        this.anchor = (anchor != null) ? anchor \n                                       : { size: new OpenLayers.Size(0,0),\n                                           offset: new OpenLayers.Pixel(0,0)};\n    },\n\n    /**\n     * APIMethod: destroy\n     */\n    destroy: function() {\n        this.anchor = null;\n        this.relativePosition = null;\n        \n        OpenLayers.Popup.prototype.destroy.apply(this, arguments);        \n    },\n\n    /**\n     * APIMethod: show\n     * Overridden from Popup since user might hide popup and then show() it \n     *     in a new location (meaning we might want to update the relative\n     *     position on the show)\n     */\n    show: function() {\n        this.updatePosition();\n        OpenLayers.Popup.prototype.show.apply(this, arguments);\n    },\n\n    /**\n     * Method: moveTo\n     * Since the popup is moving to a new px, it might need also to be moved\n     *     relative to where the marker is. We first calculate the new \n     *     relativePosition, and then we calculate the new px where we will \n     *     put the popup, based on the new relative position. \n     * \n     *     If the relativePosition has changed, we must also call \n     *     updateRelativePosition() to make any visual changes to the popup \n     *     which are associated with putting it in a new relativePosition.\n     * \n     * Parameters:\n     * px - {<OpenLayers.Pixel>}\n     */\n    moveTo: function(px) {\n        var oldRelativePosition = this.relativePosition;\n        this.relativePosition = this.calculateRelativePosition(px);\n\n        OpenLayers.Popup.prototype.moveTo.call(this, this.calculateNewPx(px));\n        \n        //if this move has caused the popup to change its relative position, \n        // we need to make the appropriate cosmetic changes.\n        if (this.relativePosition != oldRelativePosition) {\n            this.updateRelativePosition();\n        }\n    },\n\n    /**\n     * APIMethod: setSize\n     * \n     * Parameters:\n     * contentSize - {<OpenLayers.Size>} the new size for the popup's \n     *     contents div (in pixels).\n     */\n    setSize:function(contentSize) { \n        OpenLayers.Popup.prototype.setSize.apply(this, arguments);\n\n        if ((this.lonlat) && (this.map)) {\n            var px = this.map.getLayerPxFromLonLat(this.lonlat);\n            this.moveTo(px);\n        }\n    },  \n    \n    /** \n     * Method: calculateRelativePosition\n     * \n     * Parameters:\n     * px - {<OpenLayers.Pixel>}\n     * \n     * Returns:\n     * {String} The relative position (\"br\" \"tr\" \"tl\" \"bl\") at which the popup\n     *     should be placed.\n     */\n    calculateRelativePosition:function(px) {\n        var lonlat = this.map.getLonLatFromLayerPx(px);        \n        \n        var extent = this.map.getExtent();\n        var quadrant = extent.determineQuadrant(lonlat);\n        \n        return OpenLayers.Bounds.oppositeQuadrant(quadrant);\n    }, \n\n    /**\n     * Method: updateRelativePosition\n     * The popup has been moved to a new relative location, so we may want to \n     *     make some cosmetic adjustments to it. \n     * \n     *     Note that in the classic Anchored popup, there is nothing to do \n     *     here, since the popup looks exactly the same in all four positions.\n     *     Subclasses such as Framed, however, will want to do something\n     *     special here.\n     */\n    updateRelativePosition: function() {\n        //to be overridden by subclasses\n    },\n\n    /** \n     * Method: calculateNewPx\n     * \n     * Parameters:\n     * px - {<OpenLayers.Pixel>}\n     * \n     * Returns:\n     * {<OpenLayers.Pixel>} The the new px position of the popup on the screen\n     *     relative to the passed-in px.\n     */\n    calculateNewPx:function(px) {\n        var newPx = px.offset(this.anchor.offset);\n        \n        //use contentSize if size is not already set\n        var size = this.size || this.contentSize;\n\n        var top = (this.relativePosition.charAt(0) == 't');\n        newPx.y += (top) ? -size.h : this.anchor.size.h;\n        \n        var left = (this.relativePosition.charAt(1) == 'l');\n        newPx.x += (left) ? -size.w : this.anchor.size.w;\n\n        return newPx;   \n    },\n\n    CLASS_NAME: \"OpenLayers.Popup.Anchored\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Popup/Anchored.js\n */\n\n/**\n * Class: OpenLayers.Popup.Framed\n * \n * Inherits from:\n *  - <OpenLayers.Popup.Anchored>\n */\nOpenLayers.Popup.Framed =\n  OpenLayers.Class(OpenLayers.Popup.Anchored, {\n\n    /**\n     * Property: imageSrc\n     * {String} location of the image to be used as the popup frame\n     */\n    imageSrc: null,\n\n    /**\n     * Property: imageSize\n     * {<OpenLayers.Size>} Size (measured in pixels) of the image located\n     *     by the 'imageSrc' property.\n     */\n    imageSize: null,\n\n    /**\n     * APIProperty: isAlphaImage\n     * {Boolean} The image has some alpha and thus needs to use the alpha \n     *     image hack. Note that setting this to true will have no noticeable\n     *     effect in FF or IE7 browsers, but will all but crush the ie6 \n     *     browser. \n     *     Default is false.\n     */\n    isAlphaImage: false,\n\n    /**\n     * Property: positionBlocks\n     * {Object} Hash of different position blocks (Object/Hashs). Each block \n     *     will be keyed by a two-character 'relativePosition' \n     *     code string (ie \"tl\", \"tr\", \"bl\", \"br\"). Block properties are \n     *     'offset', 'padding' (self-explanatory), and finally the 'blocks'\n     *     parameter, which is an array of the block objects. \n     * \n     *     Each block object must have 'size', 'anchor', and 'position' \n     *     properties.\n     * \n     *     Note that positionBlocks should never be modified at runtime.\n     */\n    positionBlocks: null,\n\n    /**\n     * Property: blocks\n     * {Array[Object]} Array of objects, each of which is one \"block\" of the \n     *     popup. Each block has a 'div' and an 'image' property, both of \n     *     which are DOMElements, and the latter of which is appended to the \n     *     former. These are reused as the popup goes changing positions for\n     *     great economy and elegance.\n     */\n    blocks: null,\n\n    /** \n     * APIProperty: fixedRelativePosition\n     * {Boolean} We want the framed popup to work dynamically placed relative\n     *     to its anchor but also in just one fixed position. A well designed\n     *     framed popup will have the pixels and logic to display itself in \n     *     any of the four relative positions, but (understandably), this will\n     *     not be the case for all of them. By setting this property to 'true', \n     *     framed popup will not recalculate for the best placement each time\n     *     it's open, but will always open the same way. \n     *     Note that if this is set to true, it is generally advisable to also\n     *     set the 'panIntoView' property to true so that the popup can be \n     *     scrolled into view (since it will often be offscreen on open)\n     *     Default is false.\n     */\n    fixedRelativePosition: false,\n\n    /** \n     * Constructor: OpenLayers.Popup.Framed\n     * \n     * Parameters:\n     * id - {String}\n     * lonlat - {<OpenLayers.LonLat>}\n     * contentSize - {<OpenLayers.Size>}\n     * contentHTML - {String}\n     * anchor - {Object} Object to which we'll anchor the popup. Must expose \n     *     a 'size' (<OpenLayers.Size>) and 'offset' (<OpenLayers.Pixel>) \n     *     (Note that this is generally an <OpenLayers.Icon>).\n     * closeBox - {Boolean}\n     * closeBoxCallback - {Function} Function to be called on closeBox click.\n     */\n    initialize:function(id, lonlat, contentSize, contentHTML, anchor, closeBox, \n                        closeBoxCallback) {\n\n        OpenLayers.Popup.Anchored.prototype.initialize.apply(this, arguments);\n\n        if (this.fixedRelativePosition) {\n            //based on our decided relativePostion, set the current padding\n            // this keeps us from getting into trouble \n            this.updateRelativePosition();\n            \n            //make calculateRelativePosition always return the specified\n            // fixed position.\n            this.calculateRelativePosition = function(px) {\n                return this.relativePosition;\n            };\n        }\n\n        this.contentDiv.style.position = \"absolute\";\n        this.contentDiv.style.zIndex = 1;\n\n        if (closeBox) {\n            this.closeDiv.style.zIndex = 1;\n        }\n\n        this.groupDiv.style.position = \"absolute\";\n        this.groupDiv.style.top = \"0px\";\n        this.groupDiv.style.left = \"0px\";\n        this.groupDiv.style.height = \"100%\";\n        this.groupDiv.style.width = \"100%\";\n    },\n\n    /** \n     * APIMethod: destroy\n     */\n    destroy: function() {\n        this.imageSrc = null;\n        this.imageSize = null;\n        this.isAlphaImage = null;\n\n        this.fixedRelativePosition = false;\n        this.positionBlocks = null;\n\n        //remove our blocks\n        for(var i = 0; i < this.blocks.length; i++) {\n            var block = this.blocks[i];\n\n            if (block.image) {\n                block.div.removeChild(block.image);\n            }\n            block.image = null;\n\n            if (block.div) {\n                this.groupDiv.removeChild(block.div);\n            }\n            block.div = null;\n        }\n        this.blocks = null;\n\n        OpenLayers.Popup.Anchored.prototype.destroy.apply(this, arguments);\n    },\n\n    /**\n     * APIMethod: setBackgroundColor\n     */\n    setBackgroundColor:function(color) {\n        //does nothing since the framed popup's entire scheme is based on a \n        // an image -- changing the background color makes no sense. \n    },\n\n    /**\n     * APIMethod: setBorder\n     */\n    setBorder:function() {\n        //does nothing since the framed popup's entire scheme is based on a \n        // an image -- changing the popup's border makes no sense. \n    },\n\n    /**\n     * Method: setOpacity\n     * Sets the opacity of the popup.\n     * \n     * Parameters:\n     * opacity - {float} A value between 0.0 (transparent) and 1.0 (solid).   \n     */\n    setOpacity:function(opacity) {\n        //does nothing since we suppose that we'll never apply an opacity\n        // to a framed popup\n    },\n\n    /**\n     * APIMethod: setSize\n     * Overridden here, because we need to update the blocks whenever the size\n     *     of the popup has changed.\n     * \n     * Parameters:\n     * contentSize - {<OpenLayers.Size>} the new size for the popup's \n     *     contents div (in pixels).\n     */\n    setSize:function(contentSize) { \n        OpenLayers.Popup.Anchored.prototype.setSize.apply(this, arguments);\n\n        this.updateBlocks();\n    },\n\n    /**\n     * Method: updateRelativePosition\n     * When the relative position changes, we need to set the new padding \n     *     BBOX on the popup, reposition the close div, and update the blocks.\n     */\n    updateRelativePosition: function() {\n\n        //update the padding\n        this.padding = this.positionBlocks[this.relativePosition].padding;\n\n        //update the position of our close box to new padding\n        if (this.closeDiv) {\n            // use the content div's css padding to determine if we should\n            //  padd the close div\n            var contentDivPadding = this.getContentDivPadding();\n\n            this.closeDiv.style.right = contentDivPadding.right + \n                                        this.padding.right + \"px\";\n            this.closeDiv.style.top = contentDivPadding.top + \n                                      this.padding.top + \"px\";\n        }\n\n        this.updateBlocks();\n    },\n\n    /** \n     * Method: calculateNewPx\n     * Besides the standard offset as determined by the Anchored class, our \n     *     Framed popups have a special 'offset' property for each of their \n     *     positions, which is used to offset the popup relative to its anchor.\n     * \n     * Parameters:\n     * px - {<OpenLayers.Pixel>}\n     * \n     * Returns:\n     * {<OpenLayers.Pixel>} The the new px position of the popup on the screen\n     *     relative to the passed-in px.\n     */\n    calculateNewPx:function(px) {\n        var newPx = OpenLayers.Popup.Anchored.prototype.calculateNewPx.apply(\n            this, arguments\n        );\n\n        newPx = newPx.offset(this.positionBlocks[this.relativePosition].offset);\n\n        return newPx;\n    },\n\n    /**\n     * Method: createBlocks\n     */\n    createBlocks: function() {\n        this.blocks = [];\n\n        //since all positions contain the same number of blocks, we can \n        // just pick the first position and use its blocks array to create\n        // our blocks array\n        var firstPosition = null;\n        for(var key in this.positionBlocks) {\n            firstPosition = key;\n            break;\n        }\n        \n        var position = this.positionBlocks[firstPosition];\n        for (var i = 0; i < position.blocks.length; i++) {\n\n            var block = {};\n            this.blocks.push(block);\n\n            var divId = this.id + '_FrameDecorationDiv_' + i;\n            block.div = OpenLayers.Util.createDiv(divId, \n                null, null, null, \"absolute\", null, \"hidden\", null\n            );\n\n            var imgId = this.id + '_FrameDecorationImg_' + i;\n            var imageCreator = \n                (this.isAlphaImage) ? OpenLayers.Util.createAlphaImageDiv\n                                    : OpenLayers.Util.createImage;\n\n            block.image = imageCreator(imgId, \n                null, this.imageSize, this.imageSrc, \n                \"absolute\", null, null, null\n            );\n\n            block.div.appendChild(block.image);\n            this.groupDiv.appendChild(block.div);\n        }\n    },\n\n    /**\n     * Method: updateBlocks\n     * Internal method, called on initialize and when the popup's relative\n     *     position has changed. This function takes care of re-positioning\n     *     the popup's blocks in their appropropriate places.\n     */\n    updateBlocks: function() {\n        if (!this.blocks) {\n            this.createBlocks();\n        }\n        \n        if (this.size && this.relativePosition) {\n            var position = this.positionBlocks[this.relativePosition];\n            for (var i = 0; i < position.blocks.length; i++) {\n    \n                var positionBlock = position.blocks[i];\n                var block = this.blocks[i];\n    \n                // adjust sizes\n                var l = positionBlock.anchor.left;\n                var b = positionBlock.anchor.bottom;\n                var r = positionBlock.anchor.right;\n                var t = positionBlock.anchor.top;\n    \n                //note that we use the isNaN() test here because if the \n                // size object is initialized with a \"auto\" parameter, the \n                // size constructor calls parseFloat() on the string, \n                // which will turn it into NaN\n                //\n                var w = (isNaN(positionBlock.size.w)) ? this.size.w - (r + l) \n                                                      : positionBlock.size.w;\n    \n                var h = (isNaN(positionBlock.size.h)) ? this.size.h - (b + t) \n                                                      : positionBlock.size.h;\n    \n                block.div.style.width = (w < 0 ? 0 : w) + 'px';\n                block.div.style.height = (h < 0 ? 0 : h) + 'px';\n    \n                block.div.style.left = (l != null) ? l + 'px' : '';\n                block.div.style.bottom = (b != null) ? b + 'px' : '';\n                block.div.style.right = (r != null) ? r + 'px' : '';            \n                block.div.style.top = (t != null) ? t + 'px' : '';\n    \n                block.image.style.left = positionBlock.position.x + 'px';\n                block.image.style.top = positionBlock.position.y + 'px';\n            }\n    \n            this.contentDiv.style.left = this.padding.left + \"px\";\n            this.contentDiv.style.top = this.padding.top + \"px\";\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Popup.Framed\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Popup/Framed.js\n * @requires OpenLayers/Util.js\n * @requires OpenLayers/BaseTypes/Bounds.js\n * @requires OpenLayers/BaseTypes/Pixel.js\n * @requires OpenLayers/BaseTypes/Size.js\n */\n\n/**\n * Class: OpenLayers.Popup.FramedCloud\n * \n * Inherits from: \n *  - <OpenLayers.Popup.Framed>\n */\nOpenLayers.Popup.FramedCloud = \n  OpenLayers.Class(OpenLayers.Popup.Framed, {\n\n    /** \n     * Property: contentDisplayClass\n     * {String} The CSS class of the popup content div.\n     */\n    contentDisplayClass: \"olFramedCloudPopupContent\",\n\n    /**\n     * APIProperty: autoSize\n     * {Boolean} Framed Cloud is autosizing by default.\n     */\n    autoSize: true,\n\n    /**\n     * APIProperty: panMapIfOutOfView\n     * {Boolean} Framed Cloud does pan into view by default.\n     */\n    panMapIfOutOfView: true,\n\n    /**\n     * APIProperty: imageSize\n     * {<OpenLayers.Size>}\n     */\n    imageSize: new OpenLayers.Size(1276, 736),\n\n    /**\n     * APIProperty: isAlphaImage\n     * {Boolean} The FramedCloud does not use an alpha image (in honor of the \n     *     good ie6 folk out there)\n     */\n    isAlphaImage: false,\n\n    /** \n     * APIProperty: fixedRelativePosition\n     * {Boolean} The Framed Cloud popup works in just one fixed position.\n     */\n    fixedRelativePosition: false,\n\n    /**\n     * Property: positionBlocks\n     * {Object} Hash of differen position blocks, keyed by relativePosition\n     *     two-character code string (ie \"tl\", \"tr\", \"bl\", \"br\")\n     */\n    positionBlocks: {\n        \"tl\": {\n            'offset': new OpenLayers.Pixel(44, 0),\n            'padding': new OpenLayers.Bounds(8, 40, 8, 9),\n            'blocks': [\n                { // top-left\n                    size: new OpenLayers.Size('auto', 'auto'),\n                    anchor: new OpenLayers.Bounds(0, 51, 22, 0),\n                    position: new OpenLayers.Pixel(0, 0)\n                },\n                { //top-right\n                    size: new OpenLayers.Size(22, 'auto'),\n                    anchor: new OpenLayers.Bounds(null, 50, 0, 0),\n                    position: new OpenLayers.Pixel(-1238, 0)\n                },\n                { //bottom-left\n                    size: new OpenLayers.Size('auto', 19),\n                    anchor: new OpenLayers.Bounds(0, 32, 22, null),\n                    position: new OpenLayers.Pixel(0, -631)\n                },\n                { //bottom-right\n                    size: new OpenLayers.Size(22, 18),\n                    anchor: new OpenLayers.Bounds(null, 32, 0, null),\n                    position: new OpenLayers.Pixel(-1238, -632)\n                },\n                { // stem\n                    size: new OpenLayers.Size(81, 35),\n                    anchor: new OpenLayers.Bounds(null, 0, 0, null),\n                    position: new OpenLayers.Pixel(0, -688)\n                }\n            ]\n        },\n        \"tr\": {\n            'offset': new OpenLayers.Pixel(-45, 0),\n            'padding': new OpenLayers.Bounds(8, 40, 8, 9),\n            'blocks': [\n                { // top-left\n                    size: new OpenLayers.Size('auto', 'auto'),\n                    anchor: new OpenLayers.Bounds(0, 51, 22, 0),\n                    position: new OpenLayers.Pixel(0, 0)\n                },\n                { //top-right\n                    size: new OpenLayers.Size(22, 'auto'),\n                    anchor: new OpenLayers.Bounds(null, 50, 0, 0),\n                    position: new OpenLayers.Pixel(-1238, 0)\n                },\n                { //bottom-left\n                    size: new OpenLayers.Size('auto', 19),\n                    anchor: new OpenLayers.Bounds(0, 32, 22, null),\n                    position: new OpenLayers.Pixel(0, -631)\n                },\n                { //bottom-right\n                    size: new OpenLayers.Size(22, 19),\n                    anchor: new OpenLayers.Bounds(null, 32, 0, null),\n                    position: new OpenLayers.Pixel(-1238, -631)\n                },\n                { // stem\n                    size: new OpenLayers.Size(81, 35),\n                    anchor: new OpenLayers.Bounds(0, 0, null, null),\n                    position: new OpenLayers.Pixel(-215, -687)\n                }\n            ]\n        },\n        \"bl\": {\n            'offset': new OpenLayers.Pixel(45, 0),\n            'padding': new OpenLayers.Bounds(8, 9, 8, 40),\n            'blocks': [\n                { // top-left\n                    size: new OpenLayers.Size('auto', 'auto'),\n                    anchor: new OpenLayers.Bounds(0, 21, 22, 32),\n                    position: new OpenLayers.Pixel(0, 0)\n                },\n                { //top-right\n                    size: new OpenLayers.Size(22, 'auto'),\n                    anchor: new OpenLayers.Bounds(null, 21, 0, 32),\n                    position: new OpenLayers.Pixel(-1238, 0)\n                },\n                { //bottom-left\n                    size: new OpenLayers.Size('auto', 21),\n                    anchor: new OpenLayers.Bounds(0, 0, 22, null),\n                    position: new OpenLayers.Pixel(0, -629)\n                },\n                { //bottom-right\n                    size: new OpenLayers.Size(22, 21),\n                    anchor: new OpenLayers.Bounds(null, 0, 0, null),\n                    position: new OpenLayers.Pixel(-1238, -629)\n                },\n                { // stem\n                    size: new OpenLayers.Size(81, 33),\n                    anchor: new OpenLayers.Bounds(null, null, 0, 0),\n                    position: new OpenLayers.Pixel(-101, -674)\n                }\n            ]\n        },\n        \"br\": {\n            'offset': new OpenLayers.Pixel(-44, 0),\n            'padding': new OpenLayers.Bounds(8, 9, 8, 40),\n            'blocks': [\n                { // top-left\n                    size: new OpenLayers.Size('auto', 'auto'),\n                    anchor: new OpenLayers.Bounds(0, 21, 22, 32),\n                    position: new OpenLayers.Pixel(0, 0)\n                },\n                { //top-right\n                    size: new OpenLayers.Size(22, 'auto'),\n                    anchor: new OpenLayers.Bounds(null, 21, 0, 32),\n                    position: new OpenLayers.Pixel(-1238, 0)\n                },\n                { //bottom-left\n                    size: new OpenLayers.Size('auto', 21),\n                    anchor: new OpenLayers.Bounds(0, 0, 22, null),\n                    position: new OpenLayers.Pixel(0, -629)\n                },\n                { //bottom-right\n                    size: new OpenLayers.Size(22, 21),\n                    anchor: new OpenLayers.Bounds(null, 0, 0, null),\n                    position: new OpenLayers.Pixel(-1238, -629)\n                },\n                { // stem\n                    size: new OpenLayers.Size(81, 33),\n                    anchor: new OpenLayers.Bounds(0, null, null, 0),\n                    position: new OpenLayers.Pixel(-311, -674)\n                }\n            ]\n        }\n    },\n\n    /**\n     * APIProperty: minSize\n     * {<OpenLayers.Size>}\n     */\n    minSize: new OpenLayers.Size(105, 10),\n\n    /**\n     * APIProperty: maxSize\n     * {<OpenLayers.Size>}\n     */\n    maxSize: new OpenLayers.Size(1200, 660),\n\n    /** \n     * Constructor: OpenLayers.Popup.FramedCloud\n     * \n     * Parameters:\n     * id - {String}\n     * lonlat - {<OpenLayers.LonLat>}\n     * contentSize - {<OpenLayers.Size>}\n     * contentHTML - {String}\n     * anchor - {Object} Object to which we'll anchor the popup. Must expose \n     *     a 'size' (<OpenLayers.Size>) and 'offset' (<OpenLayers.Pixel>) \n     *     (Note that this is generally an <OpenLayers.Icon>).\n     * closeBox - {Boolean}\n     * closeBoxCallback - {Function} Function to be called on closeBox click.\n     */\n    initialize:function(id, lonlat, contentSize, contentHTML, anchor, closeBox, \n                        closeBoxCallback) {\n\n        this.imageSrc = OpenLayers.Util.getImageLocation('cloud-popup-relative.png');\n        OpenLayers.Popup.Framed.prototype.initialize.apply(this, arguments);\n        this.contentDiv.className = this.contentDisplayClass;\n    },\n\n    CLASS_NAME: \"OpenLayers.Popup.FramedCloud\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Util.js\n */\n\n/**\n * Class: OpenLayers.Feature\n * Features are combinations of geography and attributes. The OpenLayers.Feature\n *     class specifically combines a marker and a lonlat.\n */\nOpenLayers.Feature = OpenLayers.Class({\n\n    /** \n     * Property: layer \n     * {<OpenLayers.Layer>} \n     */\n    layer: null,\n\n    /** \n     * Property: id \n     * {String} \n     */\n    id: null,\n    \n    /** \n     * Property: lonlat \n     * {<OpenLayers.LonLat>} \n     */\n    lonlat: null,\n\n    /** \n     * Property: data \n     * {Object} \n     */\n    data: null,\n\n    /** \n     * Property: marker \n     * {<OpenLayers.Marker>} \n     */\n    marker: null,\n\n    /**\n     * APIProperty: popupClass\n     * {<OpenLayers.Class>} The class which will be used to instantiate\n     *     a new Popup. Default is <OpenLayers.Popup.Anchored>.\n     */\n    popupClass: null,\n\n    /** \n     * Property: popup \n     * {<OpenLayers.Popup>} \n     */\n    popup: null,\n\n    /** \n     * Constructor: OpenLayers.Feature\n     * Constructor for features.\n     *\n     * Parameters:\n     * layer - {<OpenLayers.Layer>} \n     * lonlat - {<OpenLayers.LonLat>} \n     * data - {Object} \n     * \n     * Returns:\n     * {<OpenLayers.Feature>}\n     */\n    initialize: function(layer, lonlat, data) {\n        this.layer = layer;\n        this.lonlat = lonlat;\n        this.data = (data != null) ? data : {};\n        this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + \"_\"); \n    },\n\n    /** \n     * Method: destroy\n     * nullify references to prevent circular references and memory leaks\n     */\n    destroy: function() {\n\n        //remove the popup from the map\n        if ((this.layer != null) && (this.layer.map != null)) {\n            if (this.popup != null) {\n                this.layer.map.removePopup(this.popup);\n            }\n        }\n        // remove the marker from the layer\n        if (this.layer != null && this.marker != null) {\n            this.layer.removeMarker(this.marker);\n        }\n\n        this.layer = null;\n        this.id = null;\n        this.lonlat = null;\n        this.data = null;\n        if (this.marker != null) {\n            this.destroyMarker(this.marker);\n            this.marker = null;\n        }\n        if (this.popup != null) {\n            this.destroyPopup(this.popup);\n            this.popup = null;\n        }\n    },\n    \n    /**\n     * Method: onScreen\n     * \n     * Returns:\n     * {Boolean} Whether or not the feature is currently visible on screen\n     *           (based on its 'lonlat' property)\n     */\n    onScreen:function() {\n        \n        var onScreen = false;\n        if ((this.layer != null) && (this.layer.map != null)) {\n            var screenBounds = this.layer.map.getExtent();\n            onScreen = screenBounds.containsLonLat(this.lonlat);\n        }    \n        return onScreen;\n    },\n    \n\n    /**\n     * Method: createMarker\n     * Based on the data associated with the Feature, create and return a marker object.\n     *\n     * Returns: \n     * {<OpenLayers.Marker>} A Marker Object created from the 'lonlat' and 'icon' properties\n     *          set in this.data. If no 'lonlat' is set, returns null. If no\n     *          'icon' is set, OpenLayers.Marker() will load the default image.\n     *          \n     *          Note - this.marker is set to return value\n     * \n     */\n    createMarker: function() {\n\n        if (this.lonlat != null) {\n            this.marker = new OpenLayers.Marker(this.lonlat, this.data.icon);\n        }\n        return this.marker;\n    },\n\n    /**\n     * Method: destroyMarker\n     * Destroys marker.\n     * If user overrides the createMarker() function, s/he should be able\n     *   to also specify an alternative function for destroying it\n     */\n    destroyMarker: function() {\n        this.marker.destroy();  \n    },\n\n    /**\n     * Method: createPopup\n     * Creates a popup object created from the 'lonlat', 'popupSize',\n     *     and 'popupContentHTML' properties set in this.data. It uses\n     *     this.marker.icon as default anchor. \n     *  \n     *  If no 'lonlat' is set, returns null. \n     *  If no this.marker has been created, no anchor is sent.\n     *\n     *  Note - the returned popup object is 'owned' by the feature, so you\n     *      cannot use the popup's destroy method to discard the popup.\n     *      Instead, you must use the feature's destroyPopup\n     * \n     *  Note - this.popup is set to return value\n     * \n     * Parameters: \n     * closeBox - {Boolean} create popup with closebox or not\n     * \n     * Returns:\n     * {<OpenLayers.Popup>} Returns the created popup, which is also set\n     *     as 'popup' property of this feature. Will be of whatever type\n     *     specified by this feature's 'popupClass' property, but must be\n     *     of type <OpenLayers.Popup>.\n     * \n     */\n    createPopup: function(closeBox) {\n\n        if (this.lonlat != null) {\n            if (!this.popup) {\n                var anchor = (this.marker) ? this.marker.icon : null;\n                var popupClass = this.popupClass ? \n                    this.popupClass : OpenLayers.Popup.Anchored;\n                this.popup = new popupClass(this.id + \"_popup\", \n                                            this.lonlat,\n                                            this.data.popupSize,\n                                            this.data.popupContentHTML,\n                                            anchor, \n                                            closeBox); \n            }    \n            if (this.data.overflow != null) {\n                this.popup.contentDiv.style.overflow = this.data.overflow;\n            }    \n            \n            this.popup.feature = this;\n        }        \n        return this.popup;\n    },\n\n    \n    /**\n     * Method: destroyPopup\n     * Destroys the popup created via createPopup.\n     *\n     * As with the marker, if user overrides the createPopup() function, s/he \n     *   should also be able to override the destruction\n     */\n    destroyPopup: function() {\n        if (this.popup) {\n            this.popup.feature = null;\n            this.popup.destroy();\n            this.popup = null;\n        }    \n    },\n\n    CLASS_NAME: \"OpenLayers.Feature\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n// TRASH THIS\nOpenLayers.State = {\n    /** states */\n    UNKNOWN: 'Unknown',\n    INSERT: 'Insert',\n    UPDATE: 'Update',\n    DELETE: 'Delete'\n};\n\n/**\n * @requires OpenLayers/Feature.js\n * @requires OpenLayers/Util.js\n */\n\n/**\n * Class: OpenLayers.Feature.Vector\n * Vector features use the OpenLayers.Geometry classes as geometry description.\n * They have an 'attributes' property, which is the data object, and a 'style'\n * property, the default values of which are defined in the \n * <OpenLayers.Feature.Vector.style> objects.\n * \n * Inherits from:\n *  - <OpenLayers.Feature>\n */\nOpenLayers.Feature.Vector = OpenLayers.Class(OpenLayers.Feature, {\n\n    /** \n     * Property: fid \n     * {String} \n     */\n    fid: null,\n    \n    /** \n     * APIProperty: geometry \n     * {<OpenLayers.Geometry>} \n     */\n    geometry: null,\n\n    /** \n     * APIProperty: attributes \n     * {Object} This object holds arbitrary, serializable properties that\n     *     describe the feature.\n     */\n    attributes: null,\n\n    /**\n     * Property: bounds\n     * {<OpenLayers.Bounds>} The box bounding that feature's geometry, that\n     *     property can be set by an <OpenLayers.Format> object when\n     *     deserializing the feature, so in most cases it represents an\n     *     information set by the server. \n     */\n    bounds: null,\n\n    /** \n     * Property: state \n     * {String} \n     */\n    state: null,\n    \n    /** \n     * APIProperty: style \n     * {Object} \n     */\n    style: null,\n\n    /**\n     * APIProperty: url\n     * {String} If this property is set it will be taken into account by\n     *     {<OpenLayers.HTTP>} when updating or deleting the feature.\n     */\n    url: null,\n    \n    /**\n     * Property: renderIntent\n     * {String} rendering intent currently being used\n     */\n    renderIntent: \"default\",\n    \n    /**\n     * APIProperty: modified\n     * {Object} An object with the originals of the geometry and attributes of\n     * the feature, if they were changed. Currently this property is only read\n     * by <OpenLayers.Format.WFST.v1>, and written by\n     * <OpenLayers.Control.ModifyFeature>, which sets the geometry property.\n     * Applications can set the originals of modified attributes in the\n     * attributes property. Note that applications have to check if this\n     * object and the attributes property is already created before using it.\n     * After a change made with ModifyFeature, this object could look like\n     *\n     * (code)\n     * {\n     *     geometry: >Object\n     * }\n     * (end)\n     *\n     * When an application has made changes to feature attributes, it could\n     * have set the attributes to something like this:\n     *\n     * (code)\n     * {\n     *     attributes: {\n     *         myAttribute: \"original\"\n     *     }\n     * }\n     * (end)\n     *\n     * Note that <OpenLayers.Format.WFST.v1> only checks for truthy values in\n     * *modified.geometry* and the attribute names in *modified.attributes*,\n     * but it is recommended to set the original values (and not just true) as\n     * attribute value, so applications could use this information to undo\n     * changes.\n     */\n    modified: null,\n\n    /** \n     * Constructor: OpenLayers.Feature.Vector\n     * Create a vector feature. \n     * \n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} The geometry that this feature\n     *     represents.\n     * attributes - {Object} An optional object that will be mapped to the\n     *     <attributes> property. \n     * style - {Object} An optional style object.\n     */\n    initialize: function(geometry, attributes, style) {\n        OpenLayers.Feature.prototype.initialize.apply(this,\n                                                      [null, null, attributes]);\n        this.lonlat = null;\n        this.geometry = geometry ? geometry : null;\n        this.state = null;\n        this.attributes = {};\n        if (attributes) {\n            this.attributes = OpenLayers.Util.extend(this.attributes,\n                                                     attributes);\n        }\n        this.style = style ? style : null; \n    },\n    \n    /** \n     * Method: destroy\n     * nullify references to prevent circular references and memory leaks\n     */\n    destroy: function() {\n        if (this.layer) {\n            this.layer.removeFeatures(this);\n            this.layer = null;\n        }\n            \n        this.geometry = null;\n        this.modified = null;\n        OpenLayers.Feature.prototype.destroy.apply(this, arguments);\n    },\n    \n    /**\n     * Method: clone\n     * Create a clone of this vector feature.  Does not set any non-standard\n     *     properties.\n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector>} An exact clone of this vector feature.\n     */\n    clone: function () {\n        return new OpenLayers.Feature.Vector(\n            this.geometry ? this.geometry.clone() : null,\n            this.attributes,\n            this.style);\n    },\n\n    /**\n     * Method: onScreen\n     * Determine whether the feature is within the map viewport.  This method\n     *     tests for an intersection between the geometry and the viewport\n     *     bounds.  If a more efficient but less precise geometry bounds\n     *     intersection is desired, call the method with the boundsOnly\n     *     parameter true.\n     *\n     * Parameters:\n     * boundsOnly - {Boolean} Only test whether a feature's bounds intersects\n     *     the viewport bounds.  Default is false.  If false, the feature's\n     *     geometry must intersect the viewport for onScreen to return true.\n     * \n     * Returns:\n     * {Boolean} The feature is currently visible on screen (optionally\n     *     based on its bounds if boundsOnly is true).\n     */\n    onScreen:function(boundsOnly) {\n        var onScreen = false;\n        if(this.layer && this.layer.map) {\n            var screenBounds = this.layer.map.getExtent();\n            if(boundsOnly) {\n                var featureBounds = this.geometry.getBounds();\n                onScreen = screenBounds.intersectsBounds(featureBounds);\n            } else {\n                var screenPoly = screenBounds.toGeometry();\n                onScreen = screenPoly.intersects(this.geometry);\n            }\n        }    \n        return onScreen;\n    },\n\n    /**\n     * Method: getVisibility\n     * Determine whether the feature is displayed or not. It may not displayed\n     *     because:\n     *     - its style display property is set to 'none',\n     *     - it doesn't belong to any layer,\n     *     - the styleMap creates a symbolizer with display property set to 'none'\n     *          for it,\n     *     - the layer which it belongs to is not visible.\n     * \n     * Returns:\n     * {Boolean} The feature is currently displayed.\n     */\n    getVisibility: function() {\n        return !(this.style && this.style.display == 'none' ||\n                 !this.layer ||\n                 this.layer && this.layer.styleMap &&\n                 this.layer.styleMap.createSymbolizer(this, this.renderIntent).display == 'none' ||\n                 this.layer && !this.layer.getVisibility());\n    },\n    \n    /**\n     * Method: createMarker\n     * HACK - we need to decide if all vector features should be able to\n     *     create markers\n     * \n     * Returns:\n     * {<OpenLayers.Marker>} For now just returns null\n     */\n    createMarker: function() {\n        return null;\n    },\n\n    /**\n     * Method: destroyMarker\n     * HACK - we need to decide if all vector features should be able to\n     *     delete markers\n     * \n     * If user overrides the createMarker() function, s/he should be able\n     *   to also specify an alternative function for destroying it\n     */\n    destroyMarker: function() {\n        // pass\n    },\n\n    /**\n     * Method: createPopup\n     * HACK - we need to decide if all vector features should be able to\n     *     create popups\n     * \n     * Returns:\n     * {<OpenLayers.Popup>} For now just returns null\n     */\n    createPopup: function() {\n        return null;\n    },\n\n    /**\n     * Method: atPoint\n     * Determins whether the feature intersects with the specified location.\n     * \n     * Parameters: \n     * lonlat - {<OpenLayers.LonLat>|Object} OpenLayers.LonLat or an\n     *     object with a 'lon' and 'lat' properties.\n     * toleranceLon - {float} Optional tolerance in Geometric Coords\n     * toleranceLat - {float} Optional tolerance in Geographic Coords\n     * \n     * Returns:\n     * {Boolean} Whether or not the feature is at the specified location\n     */\n    atPoint: function(lonlat, toleranceLon, toleranceLat) {\n        var atPoint = false;\n        if(this.geometry) {\n            atPoint = this.geometry.atPoint(lonlat, toleranceLon, \n                                                    toleranceLat);\n        }\n        return atPoint;\n    },\n\n    /**\n     * Method: destroyPopup\n     * HACK - we need to decide if all vector features should be able to\n     * delete popups\n     */\n    destroyPopup: function() {\n        // pass\n    },\n\n    /**\n     * Method: move\n     * Moves the feature and redraws it at its new location\n     *\n     * Parameters:\n     * location - {<OpenLayers.LonLat> or <OpenLayers.Pixel>} the\n     *         location to which to move the feature.\n     */\n    move: function(location) {\n\n        if(!this.layer || !this.geometry.move){\n            //do nothing if no layer or immoveable geometry\n            return undefined;\n        }\n\n        var pixel;\n        if (location.CLASS_NAME == \"OpenLayers.LonLat\") {\n            pixel = this.layer.getViewPortPxFromLonLat(location);\n        } else {\n            pixel = location;\n        }\n        \n        var lastPixel = this.layer.getViewPortPxFromLonLat(this.geometry.getBounds().getCenterLonLat());\n        var res = this.layer.map.getResolution();\n        this.geometry.move(res * (pixel.x - lastPixel.x),\n                           res * (lastPixel.y - pixel.y));\n        this.layer.drawFeature(this);\n        return lastPixel;\n    },\n    \n    /**\n     * Method: toState\n     * Sets the new state\n     *\n     * Parameters:\n     * state - {String} \n     */\n    toState: function(state) {\n        if (state == OpenLayers.State.UPDATE) {\n            switch (this.state) {\n                case OpenLayers.State.UNKNOWN:\n                case OpenLayers.State.DELETE:\n                    this.state = state;\n                    break;\n                case OpenLayers.State.UPDATE:\n                case OpenLayers.State.INSERT:\n                    break;\n            }\n        } else if (state == OpenLayers.State.INSERT) {\n            switch (this.state) {\n                case OpenLayers.State.UNKNOWN:\n                    break;\n                default:\n                    this.state = state;\n                    break;\n            }\n        } else if (state == OpenLayers.State.DELETE) {\n            switch (this.state) {\n                case OpenLayers.State.INSERT:\n                    // the feature should be destroyed\n                    break;\n                case OpenLayers.State.DELETE:\n                    break;\n                case OpenLayers.State.UNKNOWN:\n                case OpenLayers.State.UPDATE:\n                    this.state = state;\n                    break;\n            }\n        } else if (state == OpenLayers.State.UNKNOWN) {\n            this.state = state;\n        }\n    },\n    \n    CLASS_NAME: \"OpenLayers.Feature.Vector\"\n});\n\n\n/**\n * Constant: OpenLayers.Feature.Vector.style\n * OpenLayers features can have a number of style attributes. The 'default' \n *     style will typically be used if no other style is specified. These\n *     styles correspond for the most part, to the styling properties defined\n *     by the SVG standard. \n *     Information on fill properties: http://www.w3.org/TR/SVG/painting.html#FillProperties\n *     Information on stroke properties: http://www.w3.org/TR/SVG/painting.html#StrokeProperties\n *\n * Symbolizer properties:\n * fill - {Boolean} Set to false if no fill is desired.\n * fillColor - {String} Hex fill color.  Default is \"#ee9900\".\n * fillOpacity - {Number} Fill opacity (0-1).  Default is 0.4 \n * stroke - {Boolean} Set to false if no stroke is desired.\n * strokeColor - {String} Hex stroke color.  Default is \"#ee9900\".\n * strokeOpacity - {Number} Stroke opacity (0-1).  Default is 1.\n * strokeWidth - {Number} Pixel stroke width.  Default is 1.\n * strokeLinecap - {String} Stroke cap type.  Default is \"round\".  [butt | round | square]\n * strokeDashstyle - {String} Stroke dash style.  Default is \"solid\". [dot | dash | dashdot | longdash | longdashdot | solid]\n * graphic - {Boolean} Set to false if no graphic is desired.\n * pointRadius - {Number} Pixel point radius.  Default is 6.\n * pointerEvents - {String}  Default is \"visiblePainted\".\n * cursor - {String} Default is \"\".\n * externalGraphic - {String} Url to an external graphic that will be used for rendering points.\n * graphicWidth - {Number} Pixel width for sizing an external graphic.\n * graphicHeight - {Number} Pixel height for sizing an external graphic.\n * graphicOpacity - {Number} Opacity (0-1) for an external graphic.\n * graphicXOffset - {Number} Pixel offset along the positive x axis for displacing an external graphic.\n * graphicYOffset - {Number} Pixel offset along the positive y axis for displacing an external graphic.\n * rotation - {Number} For point symbolizers, this is the rotation of a graphic in the clockwise direction about its center point (or any point off center as specified by graphicXOffset and graphicYOffset).\n * graphicZIndex - {Number} The integer z-index value to use in rendering.\n * graphicName - {String} Named graphic to use when rendering points.  Supported values include \"circle\" (default),\n *     \"square\", \"star\", \"x\", \"cross\", \"triangle\".\n * graphicTitle - {String} Tooltip when hovering over a feature. *deprecated*, use title instead\n * title - {String} Tooltip when hovering over a feature. Not supported by the canvas renderer.\n * backgroundGraphic - {String} Url to a graphic to be used as the background under an externalGraphic.\n * backgroundGraphicZIndex - {Number} The integer z-index value to use in rendering the background graphic.\n * backgroundXOffset - {Number} The x offset (in pixels) for the background graphic.\n * backgroundYOffset - {Number} The y offset (in pixels) for the background graphic.\n * backgroundHeight - {Number} The height of the background graphic.  If not provided, the graphicHeight will be used.\n * backgroundWidth - {Number} The width of the background width.  If not provided, the graphicWidth will be used.\n * label - {String} The text for an optional label. For browsers that use the canvas renderer, this requires either\n *     fillText or mozDrawText to be available.\n * labelAlign - {String} Label alignment. This specifies the insertion point relative to the text. It is a string\n *     composed of two characters. The first character is for the horizontal alignment, the second for the vertical\n *     alignment. Valid values for horizontal alignment: \"l\"=left, \"c\"=center, \"r\"=right. Valid values for vertical\n *     alignment: \"t\"=top, \"m\"=middle, \"b\"=bottom. Example values: \"lt\", \"cm\", \"rb\". Default is \"cm\".\n * labelXOffset - {Number} Pixel offset along the positive x axis for displacing the label. Not supported by the canvas renderer.\n * labelYOffset - {Number} Pixel offset along the positive y axis for displacing the label. Not supported by the canvas renderer.\n * labelSelect - {Boolean} If set to true, labels will be selectable using SelectFeature or similar controls.\n *     Default is false.\n * labelOutlineColor - {String} The color of the label outline. Default is 'white'. Only supported by the canvas & SVG renderers.\n * labelOutlineWidth - {Number} The width of the label outline. Default is 3, set to 0 or null to disable. Only supported by the  SVG renderers.\n * labelOutlineOpacity - {Number} The opacity (0-1) of the label outline. Default is fontOpacity. Only supported by the canvas & SVG renderers.\n * fontColor - {String} The font color for the label, to be provided like CSS.\n * fontOpacity - {Number} Opacity (0-1) for the label\n * fontFamily - {String} The font family for the label, to be provided like in CSS.\n * fontSize - {String} The font size for the label, to be provided like in CSS.\n * fontStyle - {String} The font style for the label, to be provided like in CSS.\n * fontWeight - {String} The font weight for the label, to be provided like in CSS.\n * display - {String} Symbolizers will have no effect if display is set to \"none\".  All other values have no effect.\n */ \nOpenLayers.Feature.Vector.style = {\n    'default': {\n        fillColor: \"#ee9900\",\n        fillOpacity: 0.4, \n        hoverFillColor: \"white\",\n        hoverFillOpacity: 0.8,\n        strokeColor: \"#ee9900\",\n        strokeOpacity: 1,\n        strokeWidth: 1,\n        strokeLinecap: \"round\",\n        strokeDashstyle: \"solid\",\n        hoverStrokeColor: \"red\",\n        hoverStrokeOpacity: 1,\n        hoverStrokeWidth: 0.2,\n        pointRadius: 6,\n        hoverPointRadius: 1,\n        hoverPointUnit: \"%\",\n        pointerEvents: \"visiblePainted\",\n        cursor: \"inherit\",\n        fontColor: \"#000000\",\n        labelAlign: \"cm\",\n        labelOutlineColor: \"white\",\n        labelOutlineWidth: 3\n    },\n    'select': {\n        fillColor: \"blue\",\n        fillOpacity: 0.4, \n        hoverFillColor: \"white\",\n        hoverFillOpacity: 0.8,\n        strokeColor: \"blue\",\n        strokeOpacity: 1,\n        strokeWidth: 2,\n        strokeLinecap: \"round\",\n        strokeDashstyle: \"solid\",\n        hoverStrokeColor: \"red\",\n        hoverStrokeOpacity: 1,\n        hoverStrokeWidth: 0.2,\n        pointRadius: 6,\n        hoverPointRadius: 1,\n        hoverPointUnit: \"%\",\n        pointerEvents: \"visiblePainted\",\n        cursor: \"pointer\",\n        fontColor: \"#000000\",\n        labelAlign: \"cm\",\n        labelOutlineColor: \"white\",\n        labelOutlineWidth: 3\n\n    },\n    'temporary': {\n        fillColor: \"#66cccc\",\n        fillOpacity: 0.2, \n        hoverFillColor: \"white\",\n        hoverFillOpacity: 0.8,\n        strokeColor: \"#66cccc\",\n        strokeOpacity: 1,\n        strokeLinecap: \"round\",\n        strokeWidth: 2,\n        strokeDashstyle: \"solid\",\n        hoverStrokeColor: \"red\",\n        hoverStrokeOpacity: 1,\n        hoverStrokeWidth: 0.2,\n        pointRadius: 6,\n        hoverPointRadius: 1,\n        hoverPointUnit: \"%\",\n        pointerEvents: \"visiblePainted\",\n        cursor: \"inherit\",\n        fontColor: \"#000000\",\n        labelAlign: \"cm\",\n        labelOutlineColor: \"white\",\n        labelOutlineWidth: 3\n\n    },\n    'delete': {\n        display: \"none\"\n    }\n};    \n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Events.js\n */\n\n/**\n * Class: OpenLayers.Handler\n * Base class to construct a higher-level handler for event sequences.  All\n *     handlers have activate and deactivate methods.  In addition, they have\n *     methods named like browser events.  When a handler is activated, any\n *     additional methods named like a browser event is registered as a\n *     listener for the corresponding event.  When a handler is deactivated,\n *     those same methods are unregistered as event listeners.\n *\n * Handlers also typically have a callbacks object with keys named like\n *     the abstracted events or event sequences that they are in charge of\n *     handling.  The controls that wrap handlers define the methods that\n *     correspond to these abstract events - so instead of listening for\n *     individual browser events, they only listen for the abstract events\n *     defined by the handler.\n *     \n * Handlers are created by controls, which ultimately have the responsibility\n *     of making changes to the the state of the application.  Handlers\n *     themselves may make temporary changes, but in general are expected to\n *     return the application in the same state that they found it.\n */\nOpenLayers.Handler = OpenLayers.Class({\n\n    /**\n     * Property: id\n     * {String}\n     */\n    id: null,\n        \n    /**\n     * APIProperty: control\n     * {<OpenLayers.Control>}. The control that initialized this handler.  The\n     *     control is assumed to have a valid map property - that map is used\n     *     in the handler's own setMap method.\n     */\n    control: null,\n\n    /**\n     * Property: map\n     * {<OpenLayers.Map>}\n     */\n    map: null,\n\n    /**\n     * APIProperty: keyMask\n     * {Integer} Use bitwise operators and one or more of the OpenLayers.Handler\n     *     constants to construct a keyMask.  The keyMask is used by\n     *     <checkModifiers>.  If the keyMask matches the combination of keys\n     *     down on an event, checkModifiers returns true.\n     *\n     * Example:\n     * (code)\n     *     // handler only responds if the Shift key is down\n     *     handler.keyMask = OpenLayers.Handler.MOD_SHIFT;\n     *\n     *     // handler only responds if Ctrl-Shift is down\n     *     handler.keyMask = OpenLayers.Handler.MOD_SHIFT |\n     *                       OpenLayers.Handler.MOD_CTRL;\n     * (end)\n     */\n    keyMask: null,\n\n    /**\n     * Property: active\n     * {Boolean}\n     */\n    active: false,\n    \n    /**\n     * Property: evt\n     * {Event} This property references the last event handled by the handler.\n     *     Note that this property is not part of the stable API.  Use of the\n     *     evt property should be restricted to controls in the library\n     *     or other applications that are willing to update with changes to\n     *     the OpenLayers code.\n     */\n    evt: null,\n    \n    /**\n     * Property: touch\n     * {Boolean} Indicates the support of touch events. When touch events are \n     *     started touch will be true and all mouse related listeners will do \n     *     nothing.\n     */\n    touch: false,\n\n    /**\n     * Constructor: OpenLayers.Handler\n     * Construct a handler.\n     *\n     * Parameters:\n     * control - {<OpenLayers.Control>} The control that initialized this\n     *     handler.  The control is assumed to have a valid map property; that\n     *     map is used in the handler's own setMap method.  If a map property\n     *     is present in the options argument it will be used instead.\n     * callbacks - {Object} An object whose properties correspond to abstracted\n     *     events or sequences of browser events.  The values for these\n     *     properties are functions defined by the control that get called by\n     *     the handler.\n     * options - {Object} An optional object whose properties will be set on\n     *     the handler.\n     */\n    initialize: function(control, callbacks, options) {\n        OpenLayers.Util.extend(this, options);\n        this.control = control;\n        this.callbacks = callbacks;\n\n        var map = this.map || control.map;\n        if (map) {\n            this.setMap(map); \n        }\n        \n        this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + \"_\");\n    },\n    \n    /**\n     * Method: setMap\n     */\n    setMap: function (map) {\n        this.map = map;\n    },\n\n    /**\n     * Method: checkModifiers\n     * Check the keyMask on the handler.  If no <keyMask> is set, this always\n     *     returns true.  If a <keyMask> is set and it matches the combination\n     *     of keys down on an event, this returns true.\n     *\n     * Returns:\n     * {Boolean} The keyMask matches the keys down on an event.\n     */\n    checkModifiers: function (evt) {\n        if(this.keyMask == null) {\n            return true;\n        }\n        /* calculate the keyboard modifier mask for this event */\n        var keyModifiers =\n            (evt.shiftKey ? OpenLayers.Handler.MOD_SHIFT : 0) |\n            (evt.ctrlKey  ? OpenLayers.Handler.MOD_CTRL  : 0) |\n            (evt.altKey   ? OpenLayers.Handler.MOD_ALT   : 0) |\n            (evt.metaKey  ? OpenLayers.Handler.MOD_META  : 0);\n    \n        /* if it differs from the handler object's key mask,\n           bail out of the event handler */\n        return (keyModifiers == this.keyMask);\n    },\n\n    /**\n     * APIMethod: activate\n     * Turn on the handler.  Returns false if the handler was already active.\n     * \n     * Returns: \n     * {Boolean} The handler was activated.\n     */\n    activate: function() {\n        if(this.active) {\n            return false;\n        }\n        // register for event handlers defined on this class.\n        var events = OpenLayers.Events.prototype.BROWSER_EVENTS;\n        for (var i=0, len=events.length; i<len; i++) {\n            if (this[events[i]]) {\n                this.register(events[i], this[events[i]]); \n            }\n        } \n        this.active = true;\n        return true;\n    },\n    \n    /**\n     * APIMethod: deactivate\n     * Turn off the handler.  Returns false if the handler was already inactive.\n     * \n     * Returns:\n     * {Boolean} The handler was deactivated.\n     */\n    deactivate: function() {\n        if(!this.active) {\n            return false;\n        }\n        // unregister event handlers defined on this class.\n        var events = OpenLayers.Events.prototype.BROWSER_EVENTS;\n        for (var i=0, len=events.length; i<len; i++) {\n            if (this[events[i]]) {\n                this.unregister(events[i], this[events[i]]); \n            }\n        } \n        this.touch = false;\n        this.active = false;\n        return true;\n    },\n\n    /**\n     * Method: startTouch\n     * Start touch events, this method must be called by subclasses in \n     *     \"touchstart\" method. When touch events are started <touch> will be\n     *     true and all mouse related listeners will do nothing.\n     */\n    startTouch: function() {\n        if (!this.touch) {\n            this.touch = true;\n            var events = [\n                \"mousedown\", \"mouseup\", \"mousemove\", \"click\", \"dblclick\",\n                \"mouseout\"\n            ];\n            for (var i=0, len=events.length; i<len; i++) {\n                if (this[events[i]]) {\n                    this.unregister(events[i], this[events[i]]); \n                }\n            } \n        }\n    },\n\n    /**\n    * Method: callback\n    * Trigger the control's named callback with the given arguments\n    *\n    * Parameters:\n    * name - {String} The key for the callback that is one of the properties\n    *     of the handler's callbacks object.\n    * args - {Array(*)} An array of arguments (any type) with which to call \n    *     the callback (defined by the control).\n    */\n    callback: function (name, args) {\n        if (name && this.callbacks[name]) {\n            this.callbacks[name].apply(this.control, args);\n        }\n    },\n\n    /**\n    * Method: register\n    * register an event on the map\n    */\n    register: function (name, method) {\n        // TODO: deal with registerPriority in 3.0\n        this.map.events.registerPriority(name, this, method);\n        this.map.events.registerPriority(name, this, this.setEvent);\n    },\n\n    /**\n    * Method: unregister\n    * unregister an event from the map\n    */\n    unregister: function (name, method) {\n        this.map.events.unregister(name, this, method);   \n        this.map.events.unregister(name, this, this.setEvent);\n    },\n    \n    /**\n     * Method: setEvent\n     * With each registered browser event, the handler sets its own evt\n     *     property.  This property can be accessed by controls if needed\n     *     to get more information about the event that the handler is\n     *     processing.\n     *\n     * This allows modifier keys on the event to be checked (alt, shift, ctrl,\n     *     and meta cannot be checked with the keyboard handler).  For a\n     *     control to determine which modifier keys are associated with the\n     *     event that a handler is currently processing, it should access\n     *     (code)handler.evt.altKey || handler.evt.shiftKey ||\n     *     handler.evt.ctrlKey || handler.evt.metaKey(end).\n     *\n     * Parameters:\n     * evt - {Event} The browser event.\n     */\n    setEvent: function(evt) {\n        this.evt = evt;\n        return true;\n    },\n\n    /**\n     * Method: destroy\n     * Deconstruct the handler.\n     */\n    destroy: function () {\n        // unregister event listeners\n        this.deactivate();\n        // eliminate circular references\n        this.control = this.map = null;        \n    },\n\n    CLASS_NAME: \"OpenLayers.Handler\"\n});\n\n/**\n * Constant: OpenLayers.Handler.MOD_NONE\n * If set as the <keyMask>, <checkModifiers> returns false if any key is down.\n */\nOpenLayers.Handler.MOD_NONE  = 0;\n\n/**\n * Constant: OpenLayers.Handler.MOD_SHIFT\n * If set as the <keyMask>, <checkModifiers> returns false if Shift is down.\n */\nOpenLayers.Handler.MOD_SHIFT = 1;\n\n/**\n * Constant: OpenLayers.Handler.MOD_CTRL\n * If set as the <keyMask>, <checkModifiers> returns false if Ctrl is down.\n */\nOpenLayers.Handler.MOD_CTRL  = 2;\n\n/**\n * Constant: OpenLayers.Handler.MOD_ALT\n * If set as the <keyMask>, <checkModifiers> returns false if Alt is down.\n */\nOpenLayers.Handler.MOD_ALT   = 4;\n\n/**\n * Constant: OpenLayers.Handler.MOD_META\n * If set as the <keyMask>, <checkModifiers> returns false if Cmd is down.\n */\nOpenLayers.Handler.MOD_META  = 8;\n\n\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Handler.js\n */\n\n/**\n * Class: OpenLayers.Handler.Click\n * A handler for mouse clicks.  The intention of this handler is to give\n *     controls more flexibility with handling clicks.  Browsers trigger\n *     click events twice for a double-click.  In addition, the mousedown,\n *     mousemove, mouseup sequence fires a click event.  With this handler,\n *     controls can decide whether to ignore clicks associated with a double\n *     click.  By setting a <pixelTolerance>, controls can also ignore clicks\n *     that include a drag.  Create a new instance with the\n *     <OpenLayers.Handler.Click> constructor.\n * \n * Inherits from:\n *  - <OpenLayers.Handler> \n */\nOpenLayers.Handler.Click = OpenLayers.Class(OpenLayers.Handler, {\n    /**\n     * APIProperty: delay\n     * {Number} Number of milliseconds between clicks before the event is\n     *     considered a double-click.\n     */\n    delay: 300,\n    \n    /**\n     * APIProperty: single\n     * {Boolean} Handle single clicks.  Default is true.  If false, clicks\n     * will not be reported.  If true, single-clicks will be reported.\n     */\n    single: true,\n    \n    /**\n     * APIProperty: double\n     * {Boolean} Handle double-clicks.  Default is false.\n     */\n    'double': false,\n    \n    /**\n     * APIProperty: pixelTolerance\n     * {Number} Maximum number of pixels between mouseup and mousedown for an\n     *     event to be considered a click.  Default is 0.  If set to an\n     *     integer value, clicks with a drag greater than the value will be\n     *     ignored.  This property can only be set when the handler is\n     *     constructed.\n     */\n    pixelTolerance: 0,\n        \n    /**\n     * APIProperty: dblclickTolerance\n     * {Number} Maximum distance in pixels between clicks for a sequence of \n     *     events to be considered a double click.  Default is 13.  If the\n     *     distance between two clicks is greater than this value, a double-\n     *     click will not be fired.\n     */\n    dblclickTolerance: 13,\n        \n    /**\n     * APIProperty: stopSingle\n     * {Boolean} Stop other listeners from being notified of clicks.  Default\n     *     is false.  If true, any listeners registered before this one for \n     *     click or rightclick events will not be notified.\n     */\n    stopSingle: false,\n    \n    /**\n     * APIProperty: stopDouble\n     * {Boolean} Stop other listeners from being notified of double-clicks.\n     *     Default is false.  If true, any click listeners registered before\n     *     this one will not be notified of *any* double-click events.\n     * \n     * The one caveat with stopDouble is that given a map with two click\n     *     handlers, one with stopDouble true and the other with stopSingle\n     *     true, the stopSingle handler should be activated last to get\n     *     uniform cross-browser performance.  Since IE triggers one click\n     *     with a dblclick and FF triggers two, if a stopSingle handler is\n     *     activated first, all it gets in IE is a single click when the\n     *     second handler stops propagation on the dblclick.\n     */\n    stopDouble: false,\n\n    /**\n     * Property: timerId\n     * {Number} The id of the timeout waiting to clear the <delayedCall>.\n     */\n    timerId: null,\n    \n    /**\n     * Property: down\n     * {Object} Object that store relevant information about the last\n     *     mousedown or touchstart. Its 'xy' OpenLayers.Pixel property gives\n     *     the average location of the mouse/touch event. Its 'touches'\n     *     property records clientX/clientY of each touches.\n     */\n    down: null,\n\n    /**\n     * Property: last\n     * {Object} Object that store relevant information about the last\n     *     mousemove or touchmove. Its 'xy' OpenLayers.Pixel property gives\n     *     the average location of the mouse/touch event. Its 'touches'\n     *     property records clientX/clientY of each touches.\n     */\n    last: null,\n\n    /** \n     * Property: first\n     * {Object} When waiting for double clicks, this object will store \n     *     information about the first click in a two click sequence.\n     */\n    first: null,\n\n    /**\n     * Property: rightclickTimerId\n     * {Number} The id of the right mouse timeout waiting to clear the \n     *     <delayedEvent>.\n     */\n    rightclickTimerId: null,\n    \n    /**\n     * Constructor: OpenLayers.Handler.Click\n     * Create a new click handler.\n     * \n     * Parameters:\n     * control - {<OpenLayers.Control>} The control that is making use of\n     *     this handler.  If a handler is being used without a control, the\n     *     handler's setMap method must be overridden to deal properly with\n     *     the map.\n     * callbacks - {Object} An object with keys corresponding to callbacks\n     *     that will be called by the handler. The callbacks should\n     *     expect to receive a single argument, the click event.\n     *     Callbacks for 'click' and 'dblclick' are supported.\n     * options - {Object} Optional object whose properties will be set on the\n     *     handler.\n     */\n    \n    /**\n     * Method: touchstart\n     * Handle touchstart.\n     *\n     * Returns:\n     * {Boolean} Continue propagating this event.\n     */\n    touchstart: function(evt) {\n        this.startTouch();\n        this.down = this.getEventInfo(evt);\n        this.last = this.getEventInfo(evt);\n        return true;\n    },\n    \n    /**\n     * Method: touchmove\n     *    Store position of last move, because touchend event can have\n     *    an empty \"touches\" property.\n     *\n     * Returns:\n     * {Boolean} Continue propagating this event.\n     */\n    touchmove: function(evt) {\n        this.last = this.getEventInfo(evt);\n        return true;\n    },\n\n    /**\n     * Method: touchend\n     *   Correctly set event xy property, and add lastTouches to have\n     *   touches property from last touchstart or touchmove\n     *\n     * Returns:\n     * {Boolean} Continue propagating this event.\n     */\n    touchend: function(evt) {\n        // touchstart may not have been allowed to propagate\n        if (this.down) {\n            evt.xy = this.last.xy;\n            evt.lastTouches = this.last.touches;\n            this.handleSingle(evt);\n            this.down = null;\n        }\n        return true;\n    },\n\n    /**\n     * Method: mousedown\n     * Handle mousedown.\n     *\n     * Returns:\n     * {Boolean} Continue propagating this event.\n     */\n    mousedown: function(evt) {\n        this.down = this.getEventInfo(evt);\n        this.last = this.getEventInfo(evt);\n        return true;\n    },\n\n    /**\n     * Method: mouseup\n     * Handle mouseup.  Installed to support collection of right mouse events.\n     * \n     * Returns:\n     * {Boolean} Continue propagating this event.\n     */\n    mouseup: function (evt) {\n        var propagate = true;\n\n        // Collect right mouse clicks from the mouseup\n        //  IE - ignores the second right click in mousedown so using\n        //  mouseup instead\n        if (this.checkModifiers(evt) && this.control.handleRightClicks &&\n           OpenLayers.Event.isRightClick(evt)) {\n            propagate = this.rightclick(evt);\n        }\n\n        return propagate;\n    },\n    \n    /**\n     * Method: rightclick\n     * Handle rightclick.  For a dblrightclick, we get two clicks so we need \n     *     to always register for dblrightclick to properly handle single \n     *     clicks.\n     *     \n     * Returns:\n     * {Boolean} Continue propagating this event.\n     */\n    rightclick: function(evt) {\n        if(this.passesTolerance(evt)) {\n           if(this.rightclickTimerId != null) {\n                //Second click received before timeout this must be \n                // a double click\n                this.clearTimer();\n                this.callback('dblrightclick', [evt]);\n                return !this.stopDouble;\n            } else { \n                //Set the rightclickTimerId, send evt only if double is \n                // true else trigger single\n                var clickEvent = this['double'] ?\n                    OpenLayers.Util.extend({}, evt) : \n                    this.callback('rightclick', [evt]);\n\n                var delayedRightCall = OpenLayers.Function.bind(\n                    this.delayedRightCall, \n                    this, \n                    clickEvent\n                );\n                this.rightclickTimerId = window.setTimeout(\n                    delayedRightCall, this.delay\n                );\n            } \n        }\n        return !this.stopSingle;\n    },\n    \n    /**\n     * Method: delayedRightCall\n     * Sets <rightclickTimerId> to null.  And optionally triggers the \n     *     rightclick callback if evt is set.\n     */\n    delayedRightCall: function(evt) {\n        this.rightclickTimerId = null;\n        if (evt) {\n           this.callback('rightclick', [evt]);\n        }\n    },\n    \n    /**\n     * Method: click\n     * Handle click events from the browser.  This is registered as a listener\n     *     for click events and should not be called from other events in this\n     *     handler.\n     *\n     * Returns:\n     * {Boolean} Continue propagating this event.\n     */\n    click: function(evt) {\n        if (!this.last) {\n            this.last = this.getEventInfo(evt);\n        }\n        this.handleSingle(evt);\n        return !this.stopSingle;\n    },\n\n    /**\n     * Method: dblclick\n     * Handle dblclick.  For a dblclick, we get two clicks in some browsers\n     *     (FF) and one in others (IE).  So we need to always register for\n     *     dblclick to properly handle single clicks.  This method is registered\n     *     as a listener for the dblclick browser event.  It should *not* be\n     *     called by other methods in this handler.\n     *     \n     * Returns:\n     * {Boolean} Continue propagating this event.\n     */\n    dblclick: function(evt) {\n        this.handleDouble(evt);\n        return !this.stopDouble;\n    },\n    \n    /** \n     * Method: handleDouble\n     * Handle double-click sequence.\n     */\n    handleDouble: function(evt) {\n        if (this.passesDblclickTolerance(evt)) {\n            if (this[\"double\"]) {\n                this.callback(\"dblclick\", [evt]);\n            }\n            // to prevent a dblclick from firing the click callback in IE\n            this.clearTimer();\n        }\n    },\n    \n    /** \n     * Method: handleSingle\n     * Handle single click sequence.\n     */\n    handleSingle: function(evt) {\n        if (this.passesTolerance(evt)) {\n            if (this.timerId != null) {\n                // already received a click\n                if (this.last.touches && this.last.touches.length === 1) {\n                    // touch device, no dblclick event - this may be a double\n                    if (this[\"double\"]) {\n                        // on Android don't let the browser zoom on the page\n                        OpenLayers.Event.preventDefault(evt);\n                    }\n                    this.handleDouble(evt);\n                }\n                // if we're not in a touch environment we clear the click timer\n                // if we've got a second touch, we'll get two touchend events\n                if (!this.last.touches || this.last.touches.length !== 2) {\n                    this.clearTimer();\n                }\n            } else {\n                // remember the first click info so we can compare to the second\n                this.first = this.getEventInfo(evt);\n                // set the timer, send evt only if single is true\n                //use a clone of the event object because it will no longer \n                //be a valid event object in IE in the timer callback\n                var clickEvent = this.single ?\n                    OpenLayers.Util.extend({}, evt) : null;\n                this.queuePotentialClick(clickEvent);\n            }\n        }\n    },\n    \n    /** \n     * Method: queuePotentialClick\n     * This method is separated out largely to make testing easier (so we\n     *     don't have to override window.setTimeout)\n     */\n    queuePotentialClick: function(evt) {\n        this.timerId = window.setTimeout(\n            OpenLayers.Function.bind(this.delayedCall, this, evt),\n            this.delay\n        );\n    },\n\n    /**\n     * Method: passesTolerance\n     * Determine whether the event is within the optional pixel tolerance.  Note\n     *     that the pixel tolerance check only works if mousedown events get to\n     *     the listeners registered here.  If they are stopped by other elements,\n     *     the <pixelTolerance> will have no effect here (this method will always\n     *     return true).\n     *\n     * Returns:\n     * {Boolean} The click is within the pixel tolerance (if specified).\n     */\n    passesTolerance: function(evt) {\n        var passes = true;\n        if (this.pixelTolerance != null && this.down && this.down.xy) {\n            passes = this.pixelTolerance >= this.down.xy.distanceTo(evt.xy);\n            // for touch environments, we also enforce that all touches\n            // start and end within the given tolerance to be considered a click\n            if (passes && this.touch && \n                this.down.touches.length === this.last.touches.length) {\n                // the touchend event doesn't come with touches, so we check\n                // down and last\n                for (var i=0, ii=this.down.touches.length; i<ii; ++i) {\n                    if (this.getTouchDistance(\n                            this.down.touches[i], \n                            this.last.touches[i]\n                        ) > this.pixelTolerance) {\n                        passes = false;\n                        break;\n                    }\n                }\n            }\n        }\n        return passes;\n    },\n    \n    /** \n     * Method: getTouchDistance\n     *\n     * Returns:\n     * {Boolean} The pixel displacement between two touches.\n     */\n    getTouchDistance: function(from, to) {\n        return Math.sqrt(\n            Math.pow(from.clientX - to.clientX, 2) +\n            Math.pow(from.clientY - to.clientY, 2)\n        );\n    },\n    \n    /**\n     * Method: passesDblclickTolerance\n     * Determine whether the event is within the optional double-cick pixel \n     *     tolerance.\n     *\n     * Returns:\n     * {Boolean} The click is within the double-click pixel tolerance.\n     */\n    passesDblclickTolerance: function(evt) {\n        var passes = true;\n        if (this.down && this.first) {\n            passes = this.down.xy.distanceTo(this.first.xy) <= this.dblclickTolerance;\n        }\n        return passes;\n    },\n\n    /**\n     * Method: clearTimer\n     * Clear the timer and set <timerId> to null.\n     */\n    clearTimer: function() {\n        if (this.timerId != null) {\n            window.clearTimeout(this.timerId);\n            this.timerId = null;\n        }\n        if (this.rightclickTimerId != null) {\n            window.clearTimeout(this.rightclickTimerId);\n            this.rightclickTimerId = null;\n        }\n    },\n    \n    /**\n     * Method: delayedCall\n     * Sets <timerId> to null.  And optionally triggers the click callback if\n     *     evt is set.\n     */\n    delayedCall: function(evt) {\n        this.timerId = null;\n        if (evt) {\n            this.callback(\"click\", [evt]);\n        }\n    },\n\n    /**\n     * Method: getEventInfo\n     * This method allows us to store event information without storing the\n     *     actual event.  In touch devices (at least), the same event is \n     *     modified between touchstart, touchmove, and touchend.\n     *\n     * Returns:\n     * {Object} An object with event related info.\n     */\n    getEventInfo: function(evt) {\n        var touches;\n        if (evt.touches) {\n            var len = evt.touches.length;\n            touches = new Array(len);\n            var touch;\n            for (var i=0; i<len; i++) {\n                touch = evt.touches[i];\n                touches[i] = {\n                    clientX: touch.olClientX,\n                    clientY: touch.olClientY\n                };\n            }\n        }\n        return {\n            xy: evt.xy,\n            touches: touches\n        };\n    },\n\n    /**\n     * APIMethod: deactivate\n     * Deactivate the handler.\n     *\n     * Returns:\n     * {Boolean} The handler was successfully deactivated.\n     */\n    deactivate: function() {\n        var deactivated = false;\n        if(OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {\n            this.clearTimer();\n            this.down = null;\n            this.first = null;\n            this.last = null;\n            deactivated = true;\n        }\n        return deactivated;\n    },\n\n    CLASS_NAME: \"OpenLayers.Handler.Click\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Handler.js\n */\n\n/**\n * Class: OpenLayers.Handler.Hover\n * The hover handler is to be used to emulate mouseovers on objects\n *      on the map that aren't DOM elements. For example one can use\n *      this handler to send WMS/GetFeatureInfo requests as the user\n *      moves the mouve over the map.\n * \n * Inherits from:\n *  - <OpenLayers.Handler> \n */\nOpenLayers.Handler.Hover = OpenLayers.Class(OpenLayers.Handler, {\n\n    /**\n     * APIProperty: delay\n     * {Integer} - Number of milliseconds between mousemoves before\n     *      the event is considered a hover. Default is 500.\n     */\n    delay: 500,\n    \n    /**\n     * APIProperty: pixelTolerance\n     * {Integer} - Maximum number of pixels between mousemoves for\n     *      an event to be considered a hover. Default is null.\n     */\n    pixelTolerance: null,\n\n    /**\n     * APIProperty: stopMove\n     * {Boolean} - Stop other listeners from being notified on mousemoves.\n     *      Default is false.\n     */\n    stopMove: false,\n\n    /**\n     * Property: px\n     * {<OpenLayers.Pixel>} - The location of the last mousemove, expressed\n     *      in pixels.\n     */\n    px: null,\n\n    /**\n     * Property: timerId\n     * {Number} - The id of the timer.\n     */\n    timerId: null,\n \n    /**\n     * Constructor: OpenLayers.Handler.Hover\n     * Construct a hover handler.\n     *\n     * Parameters:\n     * control - {<OpenLayers.Control>} The control that initialized this\n     *     handler.  The control is assumed to have a valid map property; that\n     *     map is used in the handler's own setMap method.\n     * callbacks - {Object} An object with keys corresponding to callbacks\n     *     that will be called by the handler. The callbacks should\n     *     expect to receive a single argument, the event. Callbacks for\n     *     'move', the mouse is moving, and 'pause', the mouse is pausing,\n     *     are supported.\n     * options - {Object} An optional object whose properties will be set on\n     *     the handler.\n     */\n\n    /**\n     * Method: mousemove\n     * Called when the mouse moves on the map.\n     *\n     * Parameters:\n     * evt - {<OpenLayers.Event>}\n     *\n     * Returns:\n     * {Boolean} Continue propagating this event.\n     */\n    mousemove: function(evt) {\n        if(this.passesTolerance(evt.xy)) {\n            this.clearTimer();\n            this.callback('move', [evt]);\n            this.px = evt.xy;\n            // clone the evt so original properties can be accessed even\n            // if the browser deletes them during the delay\n            evt = OpenLayers.Util.extend({}, evt);\n            this.timerId = window.setTimeout(\n                OpenLayers.Function.bind(this.delayedCall, this, evt),\n                this.delay\n            );\n        }\n        return !this.stopMove;\n    },\n\n    /**\n     * Method: mouseout\n     * Called when the mouse goes out of the map.\n     *\n     * Parameters:\n     * evt - {<OpenLayers.Event>}\n     *\n     * Returns:\n     * {Boolean} Continue propagating this event.\n     */\n    mouseout: function(evt) {\n        if (OpenLayers.Util.mouseLeft(evt, this.map.viewPortDiv)) {\n            this.clearTimer();\n            this.callback('move', [evt]);\n        }\n        return true;\n    },\n\n    /**\n     * Method: passesTolerance\n     * Determine whether the mouse move is within the optional pixel tolerance.\n     *\n     * Parameters:\n     * px - {<OpenLayers.Pixel>}\n     *\n     * Returns:\n     * {Boolean} The mouse move is within the pixel tolerance.\n     */\n    passesTolerance: function(px) {\n        var passes = true;\n        if(this.pixelTolerance && this.px) {\n            var dpx = Math.sqrt(\n                Math.pow(this.px.x - px.x, 2) +\n                Math.pow(this.px.y - px.y, 2)\n            );\n            if(dpx < this.pixelTolerance) {\n                passes = false;\n            }\n        }\n        return passes;\n    },\n\n    /**\n     * Method: clearTimer\n     * Clear the timer and set <timerId> to null.\n     */\n    clearTimer: function() {\n        if(this.timerId != null) {\n            window.clearTimeout(this.timerId);\n            this.timerId = null;\n        }\n    },\n\n    /**\n     * Method: delayedCall\n     * Triggers pause callback.\n     *\n     * Parameters:\n     * evt - {<OpenLayers.Event>}\n     */\n    delayedCall: function(evt) {\n        this.callback('pause', [evt]);\n    },\n\n    /**\n     * APIMethod: deactivate\n     * Deactivate the handler.\n     *\n     * Returns:\n     * {Boolean} The handler was successfully deactivated.\n     */\n    deactivate: function() {\n        var deactivated = false;\n        if(OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {\n            this.clearTimer();\n            deactivated = true;\n        }\n        return deactivated;\n    },\n\n    CLASS_NAME: \"OpenLayers.Handler.Hover\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Handler.js\n * @requires OpenLayers/Geometry/Point.js\n */\n\n/**\n * Class: OpenLayers.Handler.Point\n * Handler to draw a point on the map. Point is displayed on activation,\n *     moves on mouse move, and is finished on mouse up. The handler triggers\n *     callbacks for 'done', 'cancel', and 'modify'. The modify callback is\n *     called with each change in the sketch and will receive the latest point\n *     drawn.  Create a new instance with the <OpenLayers.Handler.Point>\n *     constructor.\n * \n * Inherits from:\n *  - <OpenLayers.Handler>\n */\nOpenLayers.Handler.Point = OpenLayers.Class(OpenLayers.Handler, {\n    \n    /**\n     * Property: point\n     * {<OpenLayers.Feature.Vector>} The currently drawn point\n     */\n    point: null,\n\n    /**\n     * Property: layer\n     * {<OpenLayers.Layer.Vector>} The temporary drawing layer\n     */\n    layer: null,\n    \n    /**\n     * APIProperty: multi\n     * {Boolean} Cast features to multi-part geometries before passing to the\n     *     layer.  Default is false.\n     */\n    multi: false,\n    \n    /**\n     * APIProperty: citeCompliant\n     * {Boolean} If set to true, coordinates of features drawn in a map extent\n     * crossing the date line won't exceed the world bounds. Default is false.\n     */\n    citeCompliant: false,\n    \n    /**\n     * Property: mouseDown\n     * {Boolean} The mouse is down\n     */\n    mouseDown: false,\n\n    /**\n     * Property: stoppedDown\n     * {Boolean} Indicate whether the last mousedown stopped the event\n     * propagation.\n     */\n    stoppedDown: null,\n\n    /**\n     * Property: lastDown\n     * {<OpenLayers.Pixel>} Location of the last mouse down\n     */\n    lastDown: null,\n\n    /**\n     * Property: lastUp\n     * {<OpenLayers.Pixel>}\n     */\n    lastUp: null,\n\n    /**\n     * APIProperty: persist\n     * {Boolean} Leave the feature rendered until destroyFeature is called.\n     *     Default is false.  If set to true, the feature remains rendered until\n     *     destroyFeature is called, typically by deactivating the handler or\n     *     starting another drawing.\n     */\n    persist: false,\n\n    /**\n     * APIProperty: stopDown\n     * {Boolean} Stop event propagation on mousedown. Must be false to\n     *     allow \"pan while drawing\". Defaults to false.\n     */\n    stopDown: false,\n\n    /**\n     * APIPropery: stopUp\n     * {Boolean} Stop event propagation on mouse. Must be false to\n     *     allow \"pan while dragging\". Defaults to fase.\n     */\n    stopUp: false,\n\n    /**\n     * Property: layerOptions\n     * {Object} Any optional properties to be set on the sketch layer.\n     */\n    layerOptions: null,\n    \n    /**\n     * APIProperty: pixelTolerance\n     * {Number} Maximum number of pixels between down and up (mousedown\n     *     and mouseup, or touchstart and touchend) for the handler to\n     *     add a new point. If set to an integer value, if the\n     *     displacement between down and up is great to this value\n     *     no point will be added. Default value is 5.\n     */\n    pixelTolerance: 5,\n\n    /**\n     * Property: lastTouchPx\n     * {<OpenLayers.Pixel>} The last pixel used to know the distance between\n     * two touches (for double touch).\n     */\n    lastTouchPx: null,\n\n    /**\n     * Constructor: OpenLayers.Handler.Point\n     * Create a new point handler.\n     *\n     * Parameters:\n     * control - {<OpenLayers.Control>} The control that owns this handler\n     * callbacks - {Object} An object with a properties whose values are\n     *     functions.  Various callbacks described below.\n     * options - {Object} An optional object with properties to be set on the\n     *           handler\n     *\n     * Named callbacks:\n     * create - Called when a sketch is first created.  Callback called with\n     *     the creation point geometry and sketch feature.\n     * modify - Called with each move of a vertex with the vertex (point)\n     *     geometry and the sketch feature.\n     * done - Called when the point drawing is finished.  The callback will\n     *     receive a single argument, the point geometry.\n     * cancel - Called when the handler is deactivated while drawing.  The\n     *     cancel callback will receive a geometry.\n     */\n    initialize: function(control, callbacks, options) {\n        if(!(options && options.layerOptions && options.layerOptions.styleMap)) {\n            this.style = OpenLayers.Util.extend(OpenLayers.Feature.Vector.style['default'], {});\n        }\n\n        OpenLayers.Handler.prototype.initialize.apply(this, arguments);\n    },\n    \n    /**\n     * APIMethod: activate\n     * turn on the handler\n     */\n    activate: function() {\n        if(!OpenLayers.Handler.prototype.activate.apply(this, arguments)) {\n            return false;\n        }\n        // create temporary vector layer for rendering geometry sketch\n        // TBD: this could be moved to initialize/destroy - setting visibility here\n        var options = OpenLayers.Util.extend({\n            displayInLayerSwitcher: false,\n            // indicate that the temp vector layer will never be out of range\n            // without this, resolution properties must be specified at the\n            // map-level for this temporary layer to init its resolutions\n            // correctly\n            calculateInRange: OpenLayers.Function.True,\n            wrapDateLine: this.citeCompliant\n        }, this.layerOptions);\n        this.layer = new OpenLayers.Layer.Vector(this.CLASS_NAME, options);\n        this.map.addLayer(this.layer);\n        return true;\n    },\n    \n    /**\n     * Method: createFeature\n     * Add temporary features\n     *\n     * Parameters:\n     * pixel - {<OpenLayers.Pixel>} A pixel location on the map.\n     */\n    createFeature: function(pixel) {\n        var lonlat = this.layer.getLonLatFromViewPortPx(pixel); \n        var geometry = new OpenLayers.Geometry.Point(\n            lonlat.lon, lonlat.lat\n        );\n        this.point = new OpenLayers.Feature.Vector(geometry);\n        this.callback(\"create\", [this.point.geometry, this.point]);\n        this.point.geometry.clearBounds();\n        this.layer.addFeatures([this.point], {silent: true});\n    },\n\n    /**\n     * APIMethod: deactivate\n     * turn off the handler\n     */\n    deactivate: function() {\n        if(!OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {\n            return false;\n        }\n        this.cancel();\n        // If a layer's map property is set to null, it means that that layer\n        // isn't added to the map. Since we ourself added the layer to the map\n        // in activate(), we can assume that if this.layer.map is null it means\n        // that the layer has been destroyed (as a result of map.destroy() for\n        // example.\n        if (this.layer.map != null) {\n            this.destroyFeature(true);\n            this.layer.destroy(false);\n        }\n        this.layer = null;\n        return true;\n    },\n    \n    /**\n     * Method: destroyFeature\n     * Destroy the temporary geometries\n     *\n     * Parameters:\n     * force - {Boolean} Destroy even if persist is true.\n     */\n    destroyFeature: function(force) {\n        if(this.layer && (force || !this.persist)) {\n            this.layer.destroyFeatures();\n        }\n        this.point = null;\n    },\n\n    /**\n     * Method: destroyPersistedFeature\n     * Destroy the persisted feature.\n     */\n    destroyPersistedFeature: function() {\n        var layer = this.layer;\n        if(layer && layer.features.length > 1) {\n            this.layer.features[0].destroy();\n        }\n    },\n\n    /**\n     * Method: finalize\n     * Finish the geometry and call the \"done\" callback.\n     *\n     * Parameters:\n     * cancel - {Boolean} Call cancel instead of done callback.  Default\n     *          is false.\n     */\n    finalize: function(cancel) {\n        var key = cancel ? \"cancel\" : \"done\";\n        this.mouseDown = false;\n        this.lastDown = null;\n        this.lastUp = null;\n        this.lastTouchPx = null;\n        this.callback(key, [this.geometryClone()]);\n        this.destroyFeature(cancel);\n    },\n\n    /**\n     * APIMethod: cancel\n     * Finish the geometry and call the \"cancel\" callback.\n     */\n    cancel: function() {\n        this.finalize(true);\n    },\n\n    /**\n     * Method: click\n     * Handle clicks.  Clicks are stopped from propagating to other listeners\n     *     on map.events or other dom elements.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    click: function(evt) {\n        OpenLayers.Event.stop(evt);\n        return false;\n    },\n\n    /**\n     * Method: dblclick\n     * Handle double-clicks.  Double-clicks are stopped from propagating to other\n     *     listeners on map.events or other dom elements.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    dblclick: function(evt) {\n        OpenLayers.Event.stop(evt);\n        return false;\n    },\n    \n    /**\n     * Method: modifyFeature\n     * Modify the existing geometry given a pixel location.\n     *\n     * Parameters:\n     * pixel - {<OpenLayers.Pixel>} A pixel location on the map.\n     */\n    modifyFeature: function(pixel) {\n        if(!this.point) {\n            this.createFeature(pixel);\n        }\n        var lonlat = this.layer.getLonLatFromViewPortPx(pixel); \n        this.point.geometry.x = lonlat.lon;\n        this.point.geometry.y = lonlat.lat;\n        this.callback(\"modify\", [this.point.geometry, this.point, false]);\n        this.point.geometry.clearBounds();\n        this.drawFeature();\n    },\n\n    /**\n     * Method: drawFeature\n     * Render features on the temporary layer.\n     */\n    drawFeature: function() {\n        this.layer.drawFeature(this.point, this.style);\n    },\n    \n    /**\n     * Method: getGeometry\n     * Return the sketch geometry.  If <multi> is true, this will return\n     *     a multi-part geometry.\n     *\n     * Returns:\n     * {<OpenLayers.Geometry.Point>}\n     */\n    getGeometry: function() {\n        var geometry = this.point && this.point.geometry;\n        if(geometry && this.multi) {\n            geometry = new OpenLayers.Geometry.MultiPoint([geometry]);\n        }\n        return geometry;\n    },\n\n    /**\n     * Method: geometryClone\n     * Return a clone of the relevant geometry.\n     *\n     * Returns:\n     * {<OpenLayers.Geometry>}\n     */\n    geometryClone: function() {\n        var geom = this.getGeometry();\n        return geom && geom.clone();\n    },\n\n    /**\n     * Method: mousedown\n     * Handle mousedown.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    mousedown: function(evt) {\n        return this.down(evt);\n    },\n\n    /**\n     * Method: touchstart\n     * Handle touchstart.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    touchstart: function(evt) {\n        this.startTouch();\n        this.lastTouchPx = evt.xy;\n        return this.down(evt);\n    },\n\n    /**\n     * Method: mousemove\n     * Handle mousemove.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    mousemove: function(evt) {\n        return this.move(evt);\n    },\n\n    /**\n     * Method: touchmove\n     * Handle touchmove.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    touchmove: function(evt) {\n        this.lastTouchPx = evt.xy;\n        return this.move(evt);\n    },\n\n    /**\n     * Method: mouseup\n     * Handle mouseup.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    mouseup: function(evt) {\n        return this.up(evt);\n    },\n\n    /**\n     * Method: touchend\n     * Handle touchend.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    touchend: function(evt) {\n        evt.xy = this.lastTouchPx;\n        return this.up(evt);\n    },\n  \n    /**\n     * Method: down\n     * Handle mousedown and touchstart.  Adjust the geometry and redraw.\n     * Return determines whether to propagate the event on the map.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    down: function(evt) {\n        this.mouseDown = true;\n        this.lastDown = evt.xy;\n        if(!this.touch) { // no point displayed until up on touch devices\n            this.modifyFeature(evt.xy);\n        }\n        this.stoppedDown = this.stopDown;\n        return !this.stopDown;\n    },\n\n    /**\n     * Method: move\n     * Handle mousemove and touchmove.  Adjust the geometry and redraw.\n     * Return determines whether to propagate the event on the map.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    move: function (evt) {\n        if(!this.touch // no point displayed until up on touch devices\n           && (!this.mouseDown || this.stoppedDown)) {\n            this.modifyFeature(evt.xy);\n        }\n        return true;\n    },\n\n    /**\n     * Method: up\n     * Handle mouseup and touchend.  Send the latest point in the geometry to the control.\n     * Return determines whether to propagate the event on the map.\n     *\n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    up: function (evt) {\n        this.mouseDown = false;\n        this.stoppedDown = this.stopDown;\n\n        // check keyboard modifiers\n        if(!this.checkModifiers(evt)) {\n            return true;\n        }\n        // ignore double-clicks\n        if (this.lastUp && this.lastUp.equals(evt.xy)) {\n            return true;\n        }\n        if (this.lastDown && this.passesTolerance(this.lastDown, evt.xy,\n                                                  this.pixelTolerance)) {\n            if (this.touch) {\n                this.modifyFeature(evt.xy);\n            }\n            if(this.persist) {\n                this.destroyPersistedFeature();\n            }\n            this.lastUp = evt.xy;\n            this.finalize();\n            return !this.stopUp;\n        } else {\n            return true;\n        }\n    },\n\n    /**\n     * Method: mouseout\n     * Handle mouse out.  For better user experience reset mouseDown\n     * and stoppedDown when the mouse leaves the map viewport.\n     *\n     * Parameters:\n     * evt - {Event} The browser event\n     */\n    mouseout: function(evt) {\n        if(OpenLayers.Util.mouseLeft(evt, this.map.viewPortDiv)) {\n            this.stoppedDown = this.stopDown;\n            this.mouseDown = false;\n        }\n    },\n\n    /**\n     * Method: passesTolerance\n     * Determine whether the event is within the optional pixel tolerance.\n     *\n     * Returns:\n     * {Boolean} The event is within the pixel tolerance (if specified).\n     */\n    passesTolerance: function(pixel1, pixel2, tolerance) {\n        var passes = true;\n\n        if (tolerance != null && pixel1 && pixel2) {\n            var dist = pixel1.distanceTo(pixel2);\n            if (dist > tolerance) {\n                passes = false;\n            }\n        }\n        return passes;\n    },\n    \n    CLASS_NAME: \"OpenLayers.Handler.Point\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Handler/Point.js\n * @requires OpenLayers/Geometry/Point.js\n * @requires OpenLayers/Geometry/LineString.js\n */\n\n/**\n * Class: OpenLayers.Handler.Path\n * Handler to draw a path on the map.  Path is displayed on mouse down,\n * moves on mouse move, and is finished on mouse up.\n *\n * Inherits from:\n *  - <OpenLayers.Handler.Point>\n */\nOpenLayers.Handler.Path = OpenLayers.Class(OpenLayers.Handler.Point, {\n    \n    /**\n     * Property: line\n     * {<OpenLayers.Feature.Vector>}\n     */\n    line: null,\n\n    /**\n     * APIProperty: maxVertices\n     * {Number} The maximum number of vertices which can be drawn by this\n     * handler. When the number of vertices reaches maxVertices, the\n     * geometry is automatically finalized. Default is null.\n     */\n    maxVertices: null,\n\n    /**\n     * Property: doubleTouchTolerance\n     * {Number} Maximum number of pixels between two touches for\n     *     the gesture to be considered a \"finalize feature\" action.\n     *     Default is 20.\n     */\n    doubleTouchTolerance: 20,\n\n    /**\n     * Property: freehand\n     * {Boolean} In freehand mode, the handler starts the path on mouse down,\n     * adds a point for every mouse move, and finishes the path on mouse up.\n     * Outside of freehand mode, a point is added to the path on every mouse\n     * click and double-click finishes the path.\n     */\n    freehand: false,\n    \n    /**\n     * Property: freehandToggle\n     * {String} If set, freehandToggle is checked on mouse events and will set\n     * the freehand mode to the opposite of this.freehand.  To disallow\n     * toggling between freehand and non-freehand mode, set freehandToggle to\n     * null.  Acceptable toggle values are 'shiftKey', 'ctrlKey', and 'altKey'.\n     */\n    freehandToggle: 'shiftKey',\n\n    /**\n     * Property: timerId\n     * {Integer} The timer used to test the double touch.\n     */\n    timerId: null,\n\n    /**\n     * Property: redoStack\n     * {Array} Stack containing points removed with <undo>.\n     */\n    redoStack: null,\n\n    /**\n     * Constructor: OpenLayers.Handler.Path\n     * Create a new path hander\n     *\n     * Parameters:\n     * control - {<OpenLayers.Control>} The control that owns this handler\n     * callbacks - {Object} An object with a properties whose values are\n     *     functions.  Various callbacks described below.\n     * options - {Object} An optional object with properties to be set on the\n     *           handler\n     *\n     * Named callbacks:\n     * create - Called when a sketch is first created.  Callback called with\n     *     the creation point geometry and sketch feature.\n     * modify - Called with each move of a vertex with the vertex (point)\n     *     geometry and the sketch feature.\n     * point - Called as each point is added.  Receives the new point geometry.\n     * done - Called when the point drawing is finished.  The callback will\n     *     receive a single argument, the linestring geometry.\n     * cancel - Called when the handler is deactivated while drawing.  The\n     *     cancel callback will receive a geometry.\n     */\n\n    /**\n     * Method: createFeature\n     * Add temporary geometries\n     *\n     * Parameters:\n     * pixel - {<OpenLayers.Pixel>} The initial pixel location for the new\n     *     feature.\n     */\n    createFeature: function(pixel) {\n        var lonlat = this.layer.getLonLatFromViewPortPx(pixel); \n        var geometry = new OpenLayers.Geometry.Point(\n            lonlat.lon, lonlat.lat\n        );\n        this.point = new OpenLayers.Feature.Vector(geometry);\n        this.line = new OpenLayers.Feature.Vector(\n            new OpenLayers.Geometry.LineString([this.point.geometry])\n        );\n        this.callback(\"create\", [this.point.geometry, this.getSketch()]);\n        this.point.geometry.clearBounds();\n        this.layer.addFeatures([this.line, this.point], {silent: true});\n    },\n        \n    /**\n     * Method: destroyFeature\n     * Destroy temporary geometries\n     *\n     * Parameters:\n     * force - {Boolean} Destroy even if persist is true.\n     */\n    destroyFeature: function(force) {\n        OpenLayers.Handler.Point.prototype.destroyFeature.call(\n            this, force);\n        this.line = null;\n    },\n\n    /**\n     * Method: destroyPersistedFeature\n     * Destroy the persisted feature.\n     */\n    destroyPersistedFeature: function() {\n        var layer = this.layer;\n        if(layer && layer.features.length > 2) {\n            this.layer.features[0].destroy();\n        }\n    },\n\n    /**\n     * Method: removePoint\n     * Destroy the temporary point.\n     */\n    removePoint: function() {\n        if(this.point) {\n            this.layer.removeFeatures([this.point]);\n        }\n    },\n    \n    /**\n     * Method: addPoint\n     * Add point to geometry.  Send the point index to override\n     * the behavior of LinearRing that disregards adding duplicate points.\n     *\n     * Parameters:\n     * pixel - {<OpenLayers.Pixel>} The pixel location for the new point.\n     */\n    addPoint: function(pixel) {\n        this.layer.removeFeatures([this.point]);\n        var lonlat = this.layer.getLonLatFromViewPortPx(pixel); \n        this.point = new OpenLayers.Feature.Vector(\n            new OpenLayers.Geometry.Point(lonlat.lon, lonlat.lat)\n        );\n        this.line.geometry.addComponent(\n            this.point.geometry, this.line.geometry.components.length\n        );\n        this.layer.addFeatures([this.point]);\n        this.callback(\"point\", [this.point.geometry, this.getGeometry()]);\n        this.callback(\"modify\", [this.point.geometry, this.getSketch()]);\n        this.drawFeature();\n        delete this.redoStack;\n    },\n    \n    /**\n     * Method: insertXY\n     * Insert a point in the current sketch given x & y coordinates.  The new\n     *     point is inserted immediately before the most recently drawn point.\n     *\n     * Parameters:\n     * x - {Number} The x-coordinate of the point.\n     * y - {Number} The y-coordinate of the point.\n     */\n    insertXY: function(x, y) {\n        this.line.geometry.addComponent(\n            new OpenLayers.Geometry.Point(x, y), \n            this.getCurrentPointIndex()\n        );\n        this.drawFeature();\n        delete this.redoStack;\n    },\n\n    /**\n     * Method: insertDeltaXY\n     * Insert a point given offsets from the previously inserted point.\n     *\n     * Parameters:\n     * dx - {Number} The x-coordinate offset of the point.\n     * dy - {Number} The y-coordinate offset of the point.\n     */\n    insertDeltaXY: function(dx, dy) {\n        var previousIndex = this.getCurrentPointIndex() - 1;\n        var p0 = this.line.geometry.components[previousIndex];\n        if (p0 && !isNaN(p0.x) && !isNaN(p0.y)) {\n            this.insertXY(p0.x + dx, p0.y + dy);\n        }\n    },\n\n    /**\n     * Method: insertDirectionLength\n     * Insert a point in the current sketch given a direction and a length.\n     *\n     * Parameters:\n     * direction - {Number} Degrees clockwise from the positive x-axis.\n     * length - {Number} Distance from the previously drawn point.\n     */\n    insertDirectionLength: function(direction, length) {\n        direction *= Math.PI / 180;\n        var dx = length * Math.cos(direction);\n        var dy = length * Math.sin(direction);\n        this.insertDeltaXY(dx, dy);\n    },\n\n    /**\n     * Method: insertDeflectionLength\n     * Insert a point in the current sketch given a deflection and a length.\n     *     The deflection should be degrees clockwise from the previously \n     *     digitized segment.\n     *\n     * Parameters:\n     * deflection - {Number} Degrees clockwise from the previous segment.\n     * length - {Number} Distance from the previously drawn point.\n     */\n    insertDeflectionLength: function(deflection, length) {\n        var previousIndex = this.getCurrentPointIndex() - 1;\n        if (previousIndex > 0) {\n            var p1 = this.line.geometry.components[previousIndex];\n            var p0 = this.line.geometry.components[previousIndex-1];\n            var theta = Math.atan2(p1.y - p0.y, p1.x - p0.x);\n            this.insertDirectionLength(\n                (theta * 180 / Math.PI) + deflection, length\n            );\n        }\n    },\n\n    /**\n     * Method: getCurrentPointIndex\n     * \n     * Returns:\n     * {Number} The index of the most recently drawn point.\n     */\n    getCurrentPointIndex: function() {\n        return this.line.geometry.components.length - 1;\n    },\n    \n    \n    /**\n     * Method: undo\n     * Remove the most recently added point in the sketch geometry.\n     *\n     * Returns: \n     * {Boolean} A point was removed.\n     */\n    undo: function() {\n        var geometry = this.line.geometry;\n        var components = geometry.components;\n        var index = this.getCurrentPointIndex() - 1;\n        var target = components[index];\n        var undone = geometry.removeComponent(target);\n        if (undone) {\n            // On touch devices, set the current (\"mouse location\") point to\n            // match the last digitized point.\n            if (this.touch && index > 0) {\n                components = geometry.components; // safety\n                var lastpt = components[index - 1];\n                var curptidx = this.getCurrentPointIndex();\n                var curpt = components[curptidx];\n                curpt.x = lastpt.x;\n                curpt.y = lastpt.y;\n            }\n            if (!this.redoStack) {\n                this.redoStack = [];\n            }\n            this.redoStack.push(target);\n            this.drawFeature();\n        }\n        return undone;\n    },\n    \n    /**\n     * Method: redo\n     * Reinsert the most recently removed point resulting from an <undo> call.\n     *     The undo stack is deleted whenever a point is added by other means.\n     *\n     * Returns: \n     * {Boolean} A point was added.\n     */\n    redo: function() {\n        var target = this.redoStack && this.redoStack.pop();\n        if (target) {\n            this.line.geometry.addComponent(target, this.getCurrentPointIndex());\n            this.drawFeature();\n        }\n        return !!target;\n    },\n    \n    /**\n     * Method: freehandMode\n     * Determine whether to behave in freehand mode or not.\n     *\n     * Returns:\n     * {Boolean}\n     */\n    freehandMode: function(evt) {\n        return (this.freehandToggle && evt[this.freehandToggle]) ?\n                    !this.freehand : this.freehand;\n    },\n\n    /**\n     * Method: modifyFeature\n     * Modify the existing geometry given the new point\n     *\n     * Parameters:\n     * pixel - {<OpenLayers.Pixel>} The updated pixel location for the latest\n     *     point.\n     * drawing - {Boolean} Indicate if we're currently drawing.\n     */\n    modifyFeature: function(pixel, drawing) {\n        if(!this.line) {\n            this.createFeature(pixel);\n        }\n        var lonlat = this.layer.getLonLatFromViewPortPx(pixel); \n        this.point.geometry.x = lonlat.lon;\n        this.point.geometry.y = lonlat.lat;\n        this.callback(\"modify\", [this.point.geometry, this.getSketch(), drawing]);\n        this.point.geometry.clearBounds();\n        this.drawFeature();\n    },\n\n    /**\n     * Method: drawFeature\n     * Render geometries on the temporary layer.\n     */\n    drawFeature: function() {\n        this.layer.drawFeature(this.line, this.style);\n        this.layer.drawFeature(this.point, this.style);\n    },\n\n    /**\n     * Method: getSketch\n     * Return the sketch feature.\n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector>}\n     */\n    getSketch: function() {\n        return this.line;\n    },\n\n    /**\n     * Method: getGeometry\n     * Return the sketch geometry.  If <multi> is true, this will return\n     *     a multi-part geometry.\n     *\n     * Returns:\n     * {<OpenLayers.Geometry.LineString>}\n     */\n    getGeometry: function() {\n        var geometry = this.line && this.line.geometry;\n        if(geometry && this.multi) {\n            geometry = new OpenLayers.Geometry.MultiLineString([geometry]);\n        }\n        return geometry;\n    },\n\n    /**\n     * method: touchstart\n     * handle touchstart.\n     *\n     * parameters:\n     * evt - {event} the browser event\n     *\n     * returns:\n     * {boolean} allow event propagation\n     */\n    touchstart: function(evt) {\n        if (this.timerId &&\n            this.passesTolerance(this.lastTouchPx, evt.xy,\n                                 this.doubleTouchTolerance)) {\n            // double-tap, finalize the geometry\n            this.finishGeometry();\n            window.clearTimeout(this.timerId);\n            this.timerId = null;\n            return false;\n        } else {\n            if (this.timerId) {\n                window.clearTimeout(this.timerId);\n                this.timerId = null;\n            }\n            this.timerId = window.setTimeout(\n                OpenLayers.Function.bind(function() {\n                    this.timerId = null;\n                }, this), 300);\n            return OpenLayers.Handler.Point.prototype.touchstart.call(this, evt);\n        }\n    },\n\n    /**\n     * Method: down\n     * Handle mousedown and touchstart.  Add a new point to the geometry and\n     * render it. Return determines whether to propagate the event on the map.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    down: function(evt) {\n        var stopDown = this.stopDown;\n        if(this.freehandMode(evt)) {\n            stopDown = true;\n            if (this.touch) {\n                this.modifyFeature(evt.xy, !!this.lastUp);\n                OpenLayers.Event.stop(evt);\n            }\n        }\n        if (!this.touch && (!this.lastDown ||\n                            !this.passesTolerance(this.lastDown, evt.xy,\n                                                  this.pixelTolerance))) {\n            this.modifyFeature(evt.xy, !!this.lastUp);\n        }\n        this.mouseDown = true;\n        this.lastDown = evt.xy;\n        this.stoppedDown = stopDown;\n        return !stopDown;\n    },\n\n    /**\n     * Method: move\n     * Handle mousemove and touchmove.  Adjust the geometry and redraw.\n     * Return determines whether to propagate the event on the map.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    move: function (evt) {\n        if(this.stoppedDown && this.freehandMode(evt)) {\n            if(this.persist) {\n                this.destroyPersistedFeature();\n            }\n            if(this.maxVertices && this.line &&\n                    this.line.geometry.components.length === this.maxVertices) {\n                this.removePoint();\n                this.finalize();\n            } else {\n                this.addPoint(evt.xy);\n            }\n            return false;\n        }\n        if (!this.touch && (!this.mouseDown || this.stoppedDown)) {\n            this.modifyFeature(evt.xy, !!this.lastUp);\n        }\n        return true;\n    },\n    \n    /**\n     * Method: up\n     * Handle mouseup and touchend.  Send the latest point in the geometry to\n     * the control. Return determines whether to propagate the event on the map.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    up: function (evt) {\n        if (this.mouseDown && (!this.lastUp || !this.lastUp.equals(evt.xy))) {\n            if(this.stoppedDown && this.freehandMode(evt)) {\n                if (this.persist) {\n                    this.destroyPersistedFeature();\n                }\n                this.removePoint();\n                this.finalize();\n            } else {\n                if (this.passesTolerance(this.lastDown, evt.xy,\n                                         this.pixelTolerance)) {\n                    if (this.touch) {\n                        this.modifyFeature(evt.xy);\n                    }\n                    if(this.lastUp == null && this.persist) {\n                        this.destroyPersistedFeature();\n                    }\n                    this.addPoint(evt.xy);\n                    this.lastUp = evt.xy;\n                    if(this.line.geometry.components.length === this.maxVertices + 1) {\n                        this.finishGeometry();\n                    }\n                }\n            }\n        }\n        this.stoppedDown = this.stopDown;\n        this.mouseDown = false;\n        return !this.stopUp;\n    },\n\n    /**\n     * APIMethod: finishGeometry\n     * Finish the geometry and send it back to the control.\n     */\n    finishGeometry: function() {\n        var index = this.line.geometry.components.length - 1;\n        this.line.geometry.removeComponent(this.line.geometry.components[index]);\n        this.removePoint();\n        this.finalize();\n    },\n  \n    /**\n     * Method: dblclick \n     * Handle double-clicks.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    dblclick: function(evt) {\n        if(!this.freehandMode(evt)) {\n            this.finishGeometry();\n        }\n        return false;\n    },\n\n    CLASS_NAME: \"OpenLayers.Handler.Path\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Handler/Path.js\n * @requires OpenLayers/Geometry/Polygon.js\n */\n\n/**\n * Class: OpenLayers.Handler.Polygon\n * Handler to draw a polygon on the map.  Polygon is displayed on mouse down,\n * moves on mouse move, and is finished on mouse up.\n *\n * Inherits from:\n *  - <OpenLayers.Handler.Path>\n *  - <OpenLayers.Handler>\n */\nOpenLayers.Handler.Polygon = OpenLayers.Class(OpenLayers.Handler.Path, {\n    \n    /** \n     * APIProperty: holeModifier\n     * {String} Key modifier to trigger hole digitizing.  Acceptable values are\n     *     \"altKey\", \"shiftKey\", or \"ctrlKey\".  If not set, no hole digitizing\n     *     will take place.  Default is null.\n     */\n    holeModifier: null,\n    \n    /**\n     * Property: drawingHole\n     * {Boolean} Currently drawing an interior ring.\n     */\n    drawingHole: false,\n    \n    /**\n     * Property: polygon\n     * {<OpenLayers.Feature.Vector>}\n     */\n    polygon: null,\n\n    /**\n     * Constructor: OpenLayers.Handler.Polygon\n     * Create a Polygon Handler.\n     *\n     * Parameters:\n     * control - {<OpenLayers.Control>} The control that owns this handler\n     * callbacks - {Object} An object with a properties whose values are\n     *     functions.  Various callbacks described below.\n     * options - {Object} An optional object with properties to be set on the\n     *           handler\n     *\n     * Named callbacks:\n     * create - Called when a sketch is first created.  Callback called with\n     *     the creation point geometry and sketch feature.\n     * modify - Called with each move of a vertex with the vertex (point)\n     *     geometry and the sketch feature.\n     * point - Called as each point is added.  Receives the new point geometry.\n     * done - Called when the point drawing is finished.  The callback will\n     *     receive a single argument, the polygon geometry.\n     * cancel - Called when the handler is deactivated while drawing.  The\n     *     cancel callback will receive a geometry.\n     */\n    \n    /**\n     * Method: createFeature\n     * Add temporary geometries\n     *\n     * Parameters:\n     * pixel - {<OpenLayers.Pixel>} The initial pixel location for the new\n     *     feature.\n     */\n    createFeature: function(pixel) {\n        var lonlat = this.layer.getLonLatFromViewPortPx(pixel);\n        var geometry = new OpenLayers.Geometry.Point(\n            lonlat.lon, lonlat.lat\n        );\n        this.point = new OpenLayers.Feature.Vector(geometry);\n        this.line = new OpenLayers.Feature.Vector(\n            new OpenLayers.Geometry.LinearRing([this.point.geometry])\n        );\n        this.polygon = new OpenLayers.Feature.Vector(\n            new OpenLayers.Geometry.Polygon([this.line.geometry])\n        );\n        this.callback(\"create\", [this.point.geometry, this.getSketch()]);\n        this.point.geometry.clearBounds();\n        this.layer.addFeatures([this.polygon, this.point], {silent: true});\n    },\n\n    /**\n     * Method: addPoint\n     * Add point to geometry.\n     *\n     * Parameters:\n     * pixel - {<OpenLayers.Pixel>} The pixel location for the new point.\n     */\n    addPoint: function(pixel) {\n        if(!this.drawingHole && this.holeModifier &&\n           this.evt && this.evt[this.holeModifier]) {\n            var geometry = this.point.geometry;\n            var features = this.control.layer.features;\n            var candidate, polygon;\n            // look for intersections, last drawn gets priority\n            for (var i=features.length-1; i>=0; --i) {\n                candidate = features[i].geometry;\n                if ((candidate instanceof OpenLayers.Geometry.Polygon || \n                    candidate instanceof OpenLayers.Geometry.MultiPolygon) && \n                    candidate.intersects(geometry)) {\n                    polygon = features[i];\n                    this.control.layer.removeFeatures([polygon], {silent: true});\n                    this.control.layer.events.registerPriority(\n                        \"sketchcomplete\", this, this.finalizeInteriorRing\n                    );\n                    this.control.layer.events.registerPriority(\n                        \"sketchmodified\", this, this.enforceTopology\n                    );\n                    polygon.geometry.addComponent(this.line.geometry);\n                    this.polygon = polygon;\n                    this.drawingHole = true;\n                    break;\n                }\n            }\n        }\n        OpenLayers.Handler.Path.prototype.addPoint.apply(this, arguments);\n    },\n\n    /**\n     * Method: getCurrentPointIndex\n     * \n     * Returns:\n     * {Number} The index of the most recently drawn point.\n     */\n    getCurrentPointIndex: function() {\n        return this.line.geometry.components.length - 2;\n    },\n\n    /**\n     * Method: enforceTopology\n     * Simple topology enforcement for drawing interior rings.  Ensures vertices\n     *     of interior rings are contained by exterior ring.  Other topology \n     *     rules are enforced in <finalizeInteriorRing> to allow drawing of \n     *     rings that intersect only during the sketch (e.g. a \"C\" shaped ring\n     *     that nearly encloses another ring).\n     */\n    enforceTopology: function(event) {\n        var point = event.vertex;\n        var components = this.line.geometry.components;\n        // ensure that vertices of interior ring are contained by exterior ring\n        if (!this.polygon.geometry.intersects(point)) {\n            var last = components[components.length-3];\n            point.x = last.x;\n            point.y = last.y;\n        }\n    },\n\n    /**\n     * Method: finishGeometry\n     * Finish the geometry and send it back to the control.\n     */\n    finishGeometry: function() {\n        var index = this.line.geometry.components.length - 2;\n        this.line.geometry.removeComponent(this.line.geometry.components[index]);\n        this.removePoint();\n        this.finalize();\n    },\n\n    /**\n     * Method: finalizeInteriorRing\n     * Enforces that new ring has some area and doesn't contain vertices of any\n     *     other rings.\n     */\n    finalizeInteriorRing: function() {\n        var ring = this.line.geometry;\n        // ensure that ring has some area\n        var modified = (ring.getArea() !== 0);\n        if (modified) {\n            // ensure that new ring doesn't intersect any other rings\n            var rings = this.polygon.geometry.components;\n            for (var i=rings.length-2; i>=0; --i) {\n                if (ring.intersects(rings[i])) {\n                    modified = false;\n                    break;\n                }\n            }\n            if (modified) {\n                // ensure that new ring doesn't contain any other rings\n                var target;\n                outer: for (var i=rings.length-2; i>0; --i) {\n                    var points = rings[i].components;\n                    for (var j=0, jj=points.length; j<jj; ++j) {\n                        if (ring.containsPoint(points[j])) {\n                            modified = false;\n                            break outer;\n                        }\n                    }\n                }\n            }\n        }\n        if (modified) {\n            if (this.polygon.state !== OpenLayers.State.INSERT) {\n                this.polygon.state = OpenLayers.State.UPDATE;\n            }\n        } else {\n            this.polygon.geometry.removeComponent(ring);\n        }\n        this.restoreFeature();\n        return false;\n    },\n\n    /**\n     * APIMethod: cancel\n     * Finish the geometry and call the \"cancel\" callback.\n     */\n    cancel: function() {\n        if (this.drawingHole) {\n            this.polygon.geometry.removeComponent(this.line.geometry);\n            this.restoreFeature(true);\n        }\n        return OpenLayers.Handler.Path.prototype.cancel.apply(this, arguments);\n    },\n    \n    /**\n     * Method: restoreFeature\n     * Move the feature from the sketch layer to the target layer.\n     *\n     * Properties: \n     * cancel - {Boolean} Cancel drawing.  If falsey, the \"sketchcomplete\" event\n     *     will be fired.\n     */\n    restoreFeature: function(cancel) {\n        this.control.layer.events.unregister(\n            \"sketchcomplete\", this, this.finalizeInteriorRing\n        );\n        this.control.layer.events.unregister(\n            \"sketchmodified\", this, this.enforceTopology\n        );\n        this.layer.removeFeatures([this.polygon], {silent: true});\n        this.control.layer.addFeatures([this.polygon], {silent: true});\n        this.drawingHole = false;\n        if (!cancel) {\n            // Re-trigger \"sketchcomplete\" so other listeners can do their\n            // business.  While this is somewhat sloppy (if a listener is \n            // registered with registerPriority - not common - between the start\n            // and end of a single ring drawing - very uncommon - it will be \n            // called twice).\n            // TODO: In 3.0, collapse sketch handlers into geometry specific\n            // drawing controls.\n            this.control.layer.events.triggerEvent(\n                \"sketchcomplete\", {feature : this.polygon}\n            );\n        }\n    },\n\n    /**\n     * Method: destroyFeature\n     * Destroy temporary geometries\n     *\n     * Parameters:\n     * force - {Boolean} Destroy even if persist is true.\n     */\n    destroyFeature: function(force) {\n        OpenLayers.Handler.Path.prototype.destroyFeature.call(\n            this, force);\n        this.polygon = null;\n    },\n\n    /**\n     * Method: drawFeature\n     * Render geometries on the temporary layer.\n     */\n    drawFeature: function() {\n        this.layer.drawFeature(this.polygon, this.style);\n        this.layer.drawFeature(this.point, this.style);\n    },\n    \n    /**\n     * Method: getSketch\n     * Return the sketch feature.\n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector>}\n     */\n    getSketch: function() {\n        return this.polygon;\n    },\n\n    /**\n     * Method: getGeometry\n     * Return the sketch geometry.  If <multi> is true, this will return\n     *     a multi-part geometry.\n     *\n     * Returns:\n     * {<OpenLayers.Geometry.Polygon>}\n     */\n    getGeometry: function() {\n        var geometry = this.polygon && this.polygon.geometry;\n        if(geometry && this.multi) {\n            geometry = new OpenLayers.Geometry.MultiPolygon([geometry]);\n        }\n        return geometry;\n    },\n\n    CLASS_NAME: \"OpenLayers.Handler.Polygon\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Handler.js\n */\n\n/**\n * Class: OpenLayers.Handler.Feature \n * Handler to respond to mouse events related to a drawn feature.  Callbacks\n *     with the following keys will be notified of the following events\n *     associated with features: click, clickout, over, out, and dblclick.\n *\n * This handler stops event propagation for mousedown and mouseup if those\n *     browser events target features that can be selected.\n *\n * Inherits from:\n *  - <OpenLayers.Handler>\n */\nOpenLayers.Handler.Feature = OpenLayers.Class(OpenLayers.Handler, {\n\n    /**\n     * Property: EVENTMAP\n     * {Object} A object mapping the browser events to objects with callback\n     *     keys for in and out.\n     */\n    EVENTMAP: {\n        'click': {'in': 'click', 'out': 'clickout'},\n        'mousemove': {'in': 'over', 'out': 'out'},\n        'dblclick': {'in': 'dblclick', 'out': null},\n        'mousedown': {'in': null, 'out': null},\n        'mouseup': {'in': null, 'out': null},\n        'touchstart': {'in': 'click', 'out': 'clickout'}\n    },\n\n    /**\n     * Property: feature\n     * {<OpenLayers.Feature.Vector>} The last feature that was hovered.\n     */\n    feature: null,\n\n    /**\n     * Property: lastFeature\n     * {<OpenLayers.Feature.Vector>} The last feature that was handled.\n     */\n    lastFeature: null,\n\n    /**\n     * Property: down\n     * {<OpenLayers.Pixel>} The location of the last mousedown.\n     */\n    down: null,\n\n    /**\n     * Property: up\n     * {<OpenLayers.Pixel>} The location of the last mouseup.\n     */\n    up: null,\n    \n    /**\n     * Property: clickTolerance\n     * {Number} The number of pixels the mouse can move between mousedown\n     *     and mouseup for the event to still be considered a click.\n     *     Dragging the map should not trigger the click and clickout callbacks\n     *     unless the map is moved by less than this tolerance. Defaults to 4.\n     */\n    clickTolerance: 4,\n\n    /**\n     * Property: geometryTypes\n     * To restrict dragging to a limited set of geometry types, send a list\n     * of strings corresponding to the geometry class names.\n     * \n     * @type Array(String)\n     */\n    geometryTypes: null,\n\n    /**\n     * Property: stopClick\n     * {Boolean} If stopClick is set to true, handled clicks do not\n     *      propagate to other click listeners. Otherwise, handled clicks\n     *      do propagate. Unhandled clicks always propagate, whatever the\n     *      value of stopClick. Defaults to true.\n     */\n    stopClick: true,\n\n    /**\n     * Property: stopDown\n     * {Boolean} If stopDown is set to true, handled mousedowns do not\n     *      propagate to other mousedown listeners. Otherwise, handled\n     *      mousedowns do propagate. Unhandled mousedowns always propagate,\n     *      whatever the value of stopDown. Defaults to true.\n     */\n    stopDown: true,\n\n    /**\n     * Property: stopUp\n     * {Boolean} If stopUp is set to true, handled mouseups do not\n     *      propagate to other mouseup listeners. Otherwise, handled mouseups\n     *      do propagate. Unhandled mouseups always propagate, whatever the\n     *      value of stopUp. Defaults to false.\n     */\n    stopUp: false,\n    \n    /**\n     * Constructor: OpenLayers.Handler.Feature\n     *\n     * Parameters:\n     * control - {<OpenLayers.Control>} \n     * layer - {<OpenLayers.Layer.Vector>}\n     * callbacks - {Object} An object with a 'over' property whos value is\n     *     a function to be called when the mouse is over a feature. The \n     *     callback should expect to receive a single argument, the feature.\n     * options - {Object} \n     */\n    initialize: function(control, layer, callbacks, options) {\n        OpenLayers.Handler.prototype.initialize.apply(this, [control, callbacks, options]);\n        this.layer = layer;\n    },\n\n    /**\n     * Method: touchstart\n     * Handle touchstart events\n     *\n     * Parameters:\n     * evt - {Event}\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    touchstart: function(evt) {\n        this.startTouch(); \n        return OpenLayers.Event.isMultiTouch(evt) ?\n                true : this.mousedown(evt);\n    },\n\n    /**\n     * Method: touchmove\n     * Handle touchmove events. We just prevent the browser default behavior,\n     *    for Android Webkit not to select text when moving the finger after\n     *    selecting a feature.\n     *\n     * Parameters:\n     * evt - {Event}\n     */\n    touchmove: function(evt) {\n        OpenLayers.Event.preventDefault(evt);\n    },\n\n    /**\n     * Method: mousedown\n     * Handle mouse down.  Stop propagation if a feature is targeted by this\n     *     event (stops map dragging during feature selection).\n     * \n     * Parameters:\n     * evt - {Event} \n     */\n    mousedown: function(evt) {\n        // Feature selection is only done with a left click. Other handlers may stop the\n        // propagation of left-click mousedown events but not right-click mousedown events.\n        // This mismatch causes problems when comparing the location of the down and up\n        // events in the click function so it is important ignore right-clicks.\n        if (OpenLayers.Event.isLeftClick(evt) || OpenLayers.Event.isSingleTouch(evt)) {\n            this.down = evt.xy;\n        }\n        return this.handle(evt) ? !this.stopDown : true;\n    },\n    \n    /**\n     * Method: mouseup\n     * Handle mouse up.  Stop propagation if a feature is targeted by this\n     *     event.\n     * \n     * Parameters:\n     * evt - {Event} \n     */\n    mouseup: function(evt) {\n        this.up = evt.xy;\n        return this.handle(evt) ? !this.stopUp : true;\n    },\n\n    /**\n     * Method: click\n     * Handle click.  Call the \"click\" callback if click on a feature,\n     *     or the \"clickout\" callback if click outside any feature.\n     * \n     * Parameters:\n     * evt - {Event} \n     *\n     * Returns:\n     * {Boolean}\n     */\n    click: function(evt) {\n        return this.handle(evt) ? !this.stopClick : true;\n    },\n        \n    /**\n     * Method: mousemove\n     * Handle mouse moves.  Call the \"over\" callback if moving in to a feature,\n     *     or the \"out\" callback if moving out of a feature.\n     * \n     * Parameters:\n     * evt - {Event} \n     *\n     * Returns:\n     * {Boolean}\n     */\n    mousemove: function(evt) {\n        if (!this.callbacks['over'] && !this.callbacks['out']) {\n            return true;\n        }     \n        this.handle(evt);\n        return true;\n    },\n    \n    /**\n     * Method: dblclick\n     * Handle dblclick.  Call the \"dblclick\" callback if dblclick on a feature.\n     *\n     * Parameters:\n     * evt - {Event} \n     *\n     * Returns:\n     * {Boolean}\n     */\n    dblclick: function(evt) {\n        return !this.handle(evt);\n    },\n\n    /**\n     * Method: geometryTypeMatches\n     * Return true if the geometry type of the passed feature matches\n     *     one of the geometry types in the geometryTypes array.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Vector.Feature>}\n     *\n     * Returns:\n     * {Boolean}\n     */\n    geometryTypeMatches: function(feature) {\n        return this.geometryTypes == null ||\n            OpenLayers.Util.indexOf(this.geometryTypes,\n                                    feature.geometry.CLASS_NAME) > -1;\n    },\n\n    /**\n     * Method: handle\n     *\n     * Parameters:\n     * evt - {Event}\n     *\n     * Returns:\n     * {Boolean} The event occurred over a relevant feature.\n     */\n    handle: function(evt) {\n        if(this.feature && !this.feature.layer) {\n            // feature has been destroyed\n            this.feature = null;\n        }\n        var type = evt.type;\n        var handled = false;\n        var previouslyIn = !!(this.feature); // previously in a feature\n        var click = (type == \"click\" || type == \"dblclick\" || type == \"touchstart\");\n        this.feature = this.layer.getFeatureFromEvent(evt);\n        if(this.feature && !this.feature.layer) {\n            // feature has been destroyed\n            this.feature = null;\n        }\n        if(this.lastFeature && !this.lastFeature.layer) {\n            // last feature has been destroyed\n            this.lastFeature = null;\n        }\n        if(this.feature) {\n            if(type === \"touchstart\") {\n                // stop the event to prevent Android Webkit from\n                // \"flashing\" the map div\n                OpenLayers.Event.preventDefault(evt);\n            }\n            var inNew = (this.feature != this.lastFeature);\n            if(this.geometryTypeMatches(this.feature)) {\n                // in to a feature\n                if(previouslyIn && inNew) {\n                    // out of last feature and in to another\n                    if(this.lastFeature) {\n                        this.triggerCallback(type, 'out', [this.lastFeature]);\n                    }\n                    this.triggerCallback(type, 'in', [this.feature]);\n                } else if(!previouslyIn || click) {\n                    // in feature for the first time\n                    this.triggerCallback(type, 'in', [this.feature]);\n                }\n                this.lastFeature = this.feature;\n                handled = true;\n            } else {\n                // not in to a feature\n                if(this.lastFeature && (previouslyIn && inNew || click)) {\n                    // out of last feature for the first time\n                    this.triggerCallback(type, 'out', [this.lastFeature]);\n                }\n                // next time the mouse goes in a feature whose geometry type\n                // doesn't match we don't want to call the 'out' callback\n                // again, so let's set this.feature to null so that\n                // previouslyIn will evaluate to false the next time\n                // we enter handle. Yes, a bit hackish...\n                this.feature = null;\n            }\n        } else if(this.lastFeature && (previouslyIn || click)) {\n            this.triggerCallback(type, 'out', [this.lastFeature]);\n        }\n        return handled;\n    },\n    \n    /**\n     * Method: triggerCallback\n     * Call the callback keyed in the event map with the supplied arguments.\n     *     For click and clickout, the <clickTolerance> is checked first.\n     *\n     * Parameters:\n     * type - {String}\n     */\n    triggerCallback: function(type, mode, args) {\n        var key = this.EVENTMAP[type][mode];\n        if(key) {\n            if(type == 'click' && this.up && this.down) {\n                // for click/clickout, only trigger callback if tolerance is met\n                var dpx = Math.sqrt(\n                    Math.pow(this.up.x - this.down.x, 2) +\n                    Math.pow(this.up.y - this.down.y, 2)\n                );\n                if(dpx <= this.clickTolerance) {\n                    this.callback(key, args);\n                }\n                // we're done with this set of events now: clear the cached\n                // positions so we can't trip over them later (this can occur\n                // if one of the up/down events gets eaten before it gets to us\n                // but we still get the click)\n                this.up = this.down = null;\n            } else {\n                this.callback(key, args);\n            }\n        }\n    },\n\n    /**\n     * Method: activate \n     * Turn on the handler.  Returns false if the handler was already active.\n     *\n     * Returns:\n     * {Boolean}\n     */\n    activate: function() {\n        var activated = false;\n        if(OpenLayers.Handler.prototype.activate.apply(this, arguments)) {\n            this.moveLayerToTop();\n            this.map.events.on({\n                \"removelayer\": this.handleMapEvents,\n                \"changelayer\": this.handleMapEvents,\n                scope: this\n            });\n            activated = true;\n        }\n        return activated;\n    },\n    \n    /**\n     * Method: deactivate \n     * Turn off the handler.  Returns false if the handler was already active.\n     *\n     * Returns: \n     * {Boolean}\n     */\n    deactivate: function() {\n        var deactivated = false;\n        if(OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {\n            this.moveLayerBack();\n            this.feature = null;\n            this.lastFeature = null;\n            this.down = null;\n            this.up = null;\n            this.map.events.un({\n                \"removelayer\": this.handleMapEvents,\n                \"changelayer\": this.handleMapEvents,\n                scope: this\n            });\n            deactivated = true;\n        }\n        return deactivated;\n    },\n    \n    /**\n     * Method: handleMapEvents\n     * \n     * Parameters:\n     * evt - {Object}\n     */\n    handleMapEvents: function(evt) {\n        if (evt.type == \"removelayer\" || evt.property == \"order\") {\n            this.moveLayerToTop();\n        }\n    },\n    \n    /**\n     * Method: moveLayerToTop\n     * Moves the layer for this handler to the top, so mouse events can reach\n     * it.\n     */\n    moveLayerToTop: function() {\n        var index = Math.max(this.map.Z_INDEX_BASE['Feature'] - 1,\n            this.layer.getZIndex()) + 1;\n        this.layer.setZIndex(index);\n        \n    },\n    \n    /**\n     * Method: moveLayerBack\n     * Moves the layer back to the position determined by the map's layers\n     * array.\n     */\n    moveLayerBack: function() {\n        var index = this.layer.getZIndex() - 1;\n        if (index >= this.map.Z_INDEX_BASE['Feature']) {\n            this.layer.setZIndex(index);\n        } else {\n            this.map.setLayerZIndex(this.layer,\n                this.map.getLayerIndex(this.layer));\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Handler.Feature\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Handler.js\n */\n\n/**\n * Class: OpenLayers.Handler.Drag\n * The drag handler is used to deal with sequences of browser events related\n *     to dragging.  The handler is used by controls that want to know when\n *     a drag sequence begins, when a drag is happening, and when it has\n *     finished.\n *\n * Controls that use the drag handler typically construct it with callbacks\n *     for 'down', 'move', and 'done'.  Callbacks for these keys are called\n *     when the drag begins, with each move, and when the drag is done.  In\n *     addition, controls can have callbacks keyed to 'up' and 'out' if they\n *     care to differentiate between the types of events that correspond with\n *     the end of a drag sequence.  If no drag actually occurs (no mouse move)\n *     the 'down' and 'up' callbacks will be called, but not the 'done'\n *     callback.\n *\n * Create a new drag handler with the <OpenLayers.Handler.Drag> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Handler>\n */\nOpenLayers.Handler.Drag = OpenLayers.Class(OpenLayers.Handler, {\n  \n    /** \n     * Property: started\n     * {Boolean} When a mousedown or touchstart event is received, we want to\n     * record it, but not set 'dragging' until the mouse moves after starting.\n     */\n    started: false,\n\n    /**\n     * Property: stopDown\n     * {Boolean} Stop propagation of mousedown events from getting to listeners\n     *     on the same element.  Default is true.\n     */\n    stopDown: true,\n\n    /** \n     * Property: dragging \n     * {Boolean} \n     */\n    dragging: false,\n\n    /** \n     * Property: last\n     * {<OpenLayers.Pixel>} The last pixel location of the drag.\n     */\n    last: null,\n\n    /** \n     * Property: start\n     * {<OpenLayers.Pixel>} The first pixel location of the drag.\n     */\n    start: null,\n\n    /**\n     * Property: lastMoveEvt\n     * {Object} The last mousemove event that occurred. Used to\n     *     position the map correctly when our \"delay drag\"\n     *     timeout expired.\n     */\n    lastMoveEvt: null,\n\n    /**\n     * Property: oldOnselectstart\n     * {Function}\n     */\n    oldOnselectstart: null,\n    \n    /**\n     * Property: interval\n     * {Integer} In order to increase performance, an interval (in \n     *     milliseconds) can be set to reduce the number of drag events \n     *     called. If set, a new drag event will not be set until the \n     *     interval has passed. \n     *     Defaults to 0, meaning no interval. \n     */\n    interval: 0,\n    \n    /**\n     * Property: timeoutId\n     * {String} The id of the timeout used for the mousedown interval.\n     *     This is \"private\", and should be left alone.\n     */\n    timeoutId: null,\n    \n    /**\n     * APIProperty: documentDrag\n     * {Boolean} If set to true, the handler will also handle mouse moves when\n     *     the cursor has moved out of the map viewport. Default is false.\n     */\n    documentDrag: false,\n    \n    /**\n     * Property: documentEvents\n     * {Boolean} Are we currently observing document events?\n     */\n    documentEvents: null,\n\n    /**\n     * Constructor: OpenLayers.Handler.Drag\n     * Returns OpenLayers.Handler.Drag\n     * \n     * Parameters:\n     * control - {<OpenLayers.Control>} The control that is making use of\n     *     this handler.  If a handler is being used without a control, the\n     *     handlers setMap method must be overridden to deal properly with\n     *     the map.\n     * callbacks - {Object} An object containing a single function to be\n     *     called when the drag operation is finished. The callback should\n     *     expect to receive a single argument, the pixel location of the event.\n     *     Callbacks for 'move' and 'done' are supported. You can also speficy\n     *     callbacks for 'down', 'up', and 'out' to respond to those events.\n     * options - {Object} \n     */\n    initialize: function(control, callbacks, options) {\n        OpenLayers.Handler.prototype.initialize.apply(this, arguments);\n        \n        if (this.documentDrag === true) {\n            var me = this;\n            this._docMove = function(evt) {\n                me.mousemove({\n                    xy: {x: evt.clientX, y: evt.clientY},\n                    element: document\n                });\n            };\n            this._docUp = function(evt) {\n                me.mouseup({xy: {x: evt.clientX, y: evt.clientY}});\n            };\n        }\n    },\n\n    \n    /**\n     * Method: dragstart\n     * This private method is factorized from mousedown and touchstart methods\n     *\n     * Parameters:\n     * evt - {Event} The event\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    dragstart: function (evt) {\n        var propagate = true;\n        this.dragging = false;\n        if (this.checkModifiers(evt) &&\n               this._pointerId == evt.pointerId &&\n               (OpenLayers.Event.isLeftClick(evt) ||\n                OpenLayers.Event.isSingleTouch(evt))) {\n            this.started = true;\n            this.start = evt.xy;\n            this.last = evt.xy;\n            OpenLayers.Element.addClass(\n                this.map.viewPortDiv, \"olDragDown\"\n            );\n            this.down(evt);\n            this.callback(\"down\", [evt.xy]);\n\n            // prevent document dragging\n            OpenLayers.Event.preventDefault(evt);\n\n            if(!this.oldOnselectstart) {\n                this.oldOnselectstart = document.onselectstart ?\n                    document.onselectstart : OpenLayers.Function.True;\n            }\n            document.onselectstart = OpenLayers.Function.False;\n\n            propagate = !this.stopDown;\n        } else {\n            delete this._pointerId;\n            this.started = false;\n            this.start = null;\n            this.last = null;\n        }\n        return propagate;\n    },\n\n    /**\n     * Method: dragmove\n     * This private method is factorized from mousemove and touchmove methods\n     *\n     * Parameters:\n     * evt - {Event} The event\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    dragmove: function (evt) {\n        this.lastMoveEvt = evt;\n        if (this.started && this._pointerId == evt.pointerId &&\n            !this.timeoutId && (evt.xy.x != this.last.x ||\n                                evt.xy.y != this.last.y)) {\n            if(this.documentDrag === true && this.documentEvents) {\n                if(evt.element === document) {\n                    this.adjustXY(evt);\n                    // do setEvent manually because the documentEvents are not\n                    // registered with the map\n                    this.setEvent(evt);\n                } else {\n                    this.removeDocumentEvents();\n                }\n            }\n            if (this.interval > 0) {\n                this.timeoutId = setTimeout(\n                    OpenLayers.Function.bind(this.removeTimeout, this),\n                    this.interval);\n            }\n            this.dragging = true;\n\n            this.move(evt);\n            this.callback(\"move\", [evt.xy]);\n            if(!this.oldOnselectstart) {\n                this.oldOnselectstart = document.onselectstart;\n                document.onselectstart = OpenLayers.Function.False;\n            }\n            this.last = evt.xy;\n        }\n        return true;\n    },\n\n    /**\n     * Method: dragend\n     * This private method is factorized from mouseup and touchend methods\n     *\n     * Parameters:\n     * evt - {Event} The event\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    dragend: function (evt) {\n        if (this.started && this._pointerId == evt.pointerId) {\n            if(this.documentDrag === true && this.documentEvents) {\n                this.adjustXY(evt);\n                this.removeDocumentEvents();\n            }\n            var dragged = (this.start != this.last);\n            this.started = false;\n            this.dragging = false;\n            delete this._pointerId;\n            OpenLayers.Element.removeClass(\n                this.map.viewPortDiv, \"olDragDown\"\n            );\n            this.up(evt);\n            this.callback(\"up\", [evt.xy]);\n            if(dragged) {\n                this.callback(\"done\", [evt.xy]);\n            }\n            document.onselectstart = this.oldOnselectstart;\n        }\n        return true;\n    },\n\n    /**\n     * The four methods below (down, move, up, and out) are used by subclasses\n     *     to do their own processing related to these mouse events.\n     */\n\n    /**\n     * Method: down\n     * This method is called during the handling of the mouse down event.\n     *     Subclasses can do their own processing here.\n     *\n     * Parameters:\n     * evt - {Event} The mouse down event\n     */\n    down: function(evt) {\n    },\n\n    /**\n     * Method: move\n     * This method is called during the handling of the mouse move event.\n     *     Subclasses can do their own processing here.\n     *\n     * Parameters:\n     * evt - {Event} The mouse move event\n     *\n     */\n    move: function(evt) {\n    },\n\n    /**\n     * Method: up\n     * This method is called during the handling of the mouse up event.\n     *     Subclasses can do their own processing here.\n     *\n     * Parameters:\n     * evt - {Event} The mouse up event\n     */\n    up: function(evt) {\n    },\n\n    /**\n     * Method: out\n     * This method is called during the handling of the mouse out event.\n     *     Subclasses can do their own processing here.\n     *\n     * Parameters:\n     * evt - {Event} The mouse out event\n     */\n    out: function(evt) {\n    },\n\n    /**\n     * The methods below are part of the magic of event handling.  Because\n     *     they are named like browser events, they are registered as listeners\n     *     for the events they represent.\n     */\n\n    /**\n     * Method: mousedown\n     * Handle mousedown events\n     *\n     * Parameters:\n     * evt - {Event}\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    mousedown: function(evt) {\n        return this.dragstart(evt);\n    },\n\n    /**\n     * Method: touchstart\n     * Handle touchstart events\n     *\n     * Parameters:\n     * evt - {Event}\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    touchstart: function(evt) {\n        this.startTouch();\n        // only allow the first pointer event to be monitored by noting its pointerId\n        // which is unique in the pointer model (and undefined in the touch model)\n        if (!(\"_pointerId\" in this)) {\n            this._pointerId = evt.pointerId;\n        }\n        return this.dragstart(evt);\n    },\n\n    /**\n     * Method: mousemove\n     * Handle mousemove events\n     *\n     * Parameters:\n     * evt - {Event}\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    mousemove: function(evt) {\n        return this.dragmove(evt);\n    },\n\n    /**\n     * Method: touchmove\n     * Handle touchmove events\n     *\n     * Parameters:\n     * evt - {Event}\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    touchmove: function(evt) {\n        return this.dragmove(evt);\n    },\n\n    /**\n     * Method: removeTimeout\n     * Private. Called by mousemove() to remove the drag timeout.\n     */\n    removeTimeout: function() {\n        this.timeoutId = null;\n        // if timeout expires while we're still dragging (mouseup\n        // hasn't occurred) then call mousemove to move to the\n        // correct position\n        if(this.dragging) {\n            this.mousemove(this.lastMoveEvt);\n        }\n    },\n\n    /**\n     * Method: mouseup\n     * Handle mouseup events\n     *\n     * Parameters:\n     * evt - {Event}\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    mouseup: function(evt) {\n        return this.dragend(evt);\n    },\n\n    /**\n     * Method: touchend\n     * Handle touchend events\n     *\n     * Parameters:\n     * evt - {Event}\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    touchend: function(evt) {\n        // override evt.xy with last position since touchend does not have\n        // any touch position\n        evt.xy = this.last;\n        return this.dragend(evt);\n    },\n\n    /**\n     * Method: mouseout\n     * Handle mouseout events\n     *\n     * Parameters:\n     * evt - {Event}\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    mouseout: function (evt) {\n        if (this.started && OpenLayers.Util.mouseLeft(evt, this.map.viewPortDiv)) {\n            if(this.documentDrag === true) {\n                this.addDocumentEvents();\n            } else {\n                var dragged = (this.start != this.last);\n                this.started = false; \n                this.dragging = false;\n                OpenLayers.Element.removeClass(\n                    this.map.viewPortDiv, \"olDragDown\"\n                );\n                this.out(evt);\n                this.callback(\"out\", []);\n                if(dragged) {\n                    this.callback(\"done\", [evt.xy]);\n                }\n                if(document.onselectstart) {\n                    document.onselectstart = this.oldOnselectstart;\n                }\n            }\n        }\n        return true;\n    },\n\n    /**\n     * Method: click\n     * The drag handler captures the click event.  If something else registers\n     *     for clicks on the same element, its listener will not be called \n     *     after a drag.\n     * \n     * Parameters: \n     * evt - {Event} \n     * \n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    click: function (evt) {\n        // let the click event propagate only if the mouse moved\n        return (this.start == this.last);\n    },\n\n    /**\n     * Method: activate\n     * Activate the handler.\n     * \n     * Returns:\n     * {Boolean} The handler was successfully activated.\n     */\n    activate: function() {\n        var activated = false;\n        if(OpenLayers.Handler.prototype.activate.apply(this, arguments)) {\n            this.dragging = false;\n            activated = true;\n        }\n        return activated;\n    },\n\n    /**\n     * Method: deactivate \n     * Deactivate the handler.\n     * \n     * Returns:\n     * {Boolean} The handler was successfully deactivated.\n     */\n    deactivate: function() {\n        var deactivated = false;\n        if(OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {\n            this.started = false;\n            this.dragging = false;\n            this.start = null;\n            this.last = null;\n            deactivated = true;\n            OpenLayers.Element.removeClass(\n                this.map.viewPortDiv, \"olDragDown\"\n            );\n        }\n        return deactivated;\n    },\n    \n    /**\n     * Method: adjustXY\n     * Converts event coordinates that are relative to the document body to\n     * ones that are relative to the map viewport. The latter is the default in\n     * OpenLayers.\n     * \n     * Parameters:\n     * evt - {Object}\n     */\n    adjustXY: function(evt) {\n        var pos = OpenLayers.Util.pagePosition(this.map.viewPortDiv);\n        evt.xy.x -= pos[0];\n        evt.xy.y -= pos[1];\n    },\n    \n    /**\n     * Method: addDocumentEvents\n     * Start observing document events when documentDrag is true and the mouse\n     * cursor leaves the map viewport while dragging.\n     */\n    addDocumentEvents: function() {\n        OpenLayers.Element.addClass(document.body, \"olDragDown\");\n        this.documentEvents = true;\n        OpenLayers.Event.observe(document, \"mousemove\", this._docMove);\n        OpenLayers.Event.observe(document, \"mouseup\", this._docUp);\n    },\n    \n    /**\n     * Method: removeDocumentEvents\n     * Stops observing document events when documentDrag is true and the mouse\n     * cursor re-enters the map viewport while dragging.\n     */\n    removeDocumentEvents: function() {\n        OpenLayers.Element.removeClass(document.body, \"olDragDown\");\n        this.documentEvents = false;\n        OpenLayers.Event.stopObserving(document, \"mousemove\", this._docMove);\n        OpenLayers.Event.stopObserving(document, \"mouseup\", this._docUp);\n    },\n\n    CLASS_NAME: \"OpenLayers.Handler.Drag\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Handler.js\n */\n\n/**\n * Class: OpenLayers.Handler.Pinch\n * The pinch handler is used to deal with sequences of browser events related\n *     to pinch gestures. The handler is used by controls that want to know\n *     when a pinch sequence begins, when a pinch is happening, and when it has\n *     finished.\n *\n * Controls that use the pinch handler typically construct it with callbacks\n *     for 'start', 'move', and 'done'.  Callbacks for these keys are\n *     called when the pinch begins, with each change, and when the pinch is\n *     done.\n *\n * Create a new pinch handler with the <OpenLayers.Handler.Pinch> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Handler>\n */\nOpenLayers.Handler.Pinch = OpenLayers.Class(OpenLayers.Handler, {\n\n    /**\n     * Property: started\n     * {Boolean} When a touchstart event is received, we want to record it,\n     *     but not set 'pinching' until the touchmove get started after\n     *     starting.\n     */\n    started: false,\n\n    /**\n     * Property: stopDown\n     * {Boolean} Stop propagation of touchstart events from getting to\n     *     listeners on the same element. Default is false.\n     */\n    stopDown: false,\n\n    /**\n     * Property: pinching\n     * {Boolean}\n     */\n    pinching: false,\n\n    /**\n     * Property: last\n     * {Object} Object that store informations related to pinch last touch.\n     */\n    last: null,\n\n    /**\n     * Property: start\n     * {Object} Object that store informations related to pinch touchstart.\n     */\n    start: null,\n\n    /**\n     * Constructor: OpenLayers.Handler.Pinch\n     * Returns OpenLayers.Handler.Pinch\n     *\n     * Parameters:\n     * control - {<OpenLayers.Control>} The control that is making use of\n     *     this handler.  If a handler is being used without a control, the\n     *     handlers setMap method must be overridden to deal properly with\n     *     the map.\n     * callbacks - {Object} An object containing functions to be called when\n     *     the pinch operation start, change, or is finished. The callbacks\n     *     should expect to receive an object argument, which contains\n     *     information about scale, distance, and position of touch points.\n     * options - {Object}\n     */\n\n    /**\n     * Method: touchstart\n     * Handle touchstart events\n     *\n     * Parameters:\n     * evt - {Event}\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    touchstart: function(evt) {\n        var propagate = true;\n        this.pinching = false;\n        if (OpenLayers.Event.isMultiTouch(evt)) {\n            this.started = true;\n            this.last = this.start = {\n                distance: this.getDistance(evt.touches),\n                delta: 0,\n                scale: 1\n            };\n            this.callback(\"start\", [evt, this.start]);\n            propagate = !this.stopDown;\n        } else if (this.started) {\n            // Some webkit versions send fake single-touch events during\n            // multitouch, which cause the drag handler to trigger\n            return false;\n        } else {\n            this.started = false;\n            this.start = null;\n            this.last = null;\n        }\n        // prevent document dragging\n        OpenLayers.Event.preventDefault(evt);\n        return propagate;\n    },\n\n    /**\n     * Method: touchmove\n     * Handle touchmove events\n     *\n     * Parameters:\n     * evt - {Event}\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    touchmove: function(evt) {\n        if (this.started && OpenLayers.Event.isMultiTouch(evt)) {\n            this.pinching = true;\n            var current = this.getPinchData(evt);\n            this.callback(\"move\", [evt, current]);\n            this.last = current;\n            // prevent document dragging\n            OpenLayers.Event.stop(evt);\n        } else if (this.started) {\n            // Some webkit versions send fake single-touch events during\n            // multitouch, which cause the drag handler to trigger\n            return false;\n        }\n        return true;\n    },\n\n    /**\n     * Method: touchend\n     * Handle touchend events\n     *\n     * Parameters:\n     * evt - {Event}\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    touchend: function(evt) {\n        if (this.started && !OpenLayers.Event.isMultiTouch(evt)) {\n            this.started = false;\n            this.pinching = false;\n            this.callback(\"done\", [evt, this.start, this.last]);\n            this.start = null;\n            this.last = null;\n            return false;\n        }\n        return true;\n    },\n\n    /**\n     * Method: activate\n     * Activate the handler.\n     *\n     * Returns:\n     * {Boolean} The handler was successfully activated.\n     */\n    activate: function() {\n        var activated = false;\n        if (OpenLayers.Handler.prototype.activate.apply(this, arguments)) {\n            this.pinching = false;\n            activated = true;\n        }\n        return activated;\n    },\n\n    /**\n     * Method: deactivate\n     * Deactivate the handler.\n     *\n     * Returns:\n     * {Boolean} The handler was successfully deactivated.\n     */\n    deactivate: function() {\n        var deactivated = false;\n        if (OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {\n            this.started = false;\n            this.pinching = false;\n            this.start = null;\n            this.last = null;\n            deactivated = true;\n        }\n        return deactivated;\n    },\n\n    /**\n     * Method: getDistance\n     * Get the distance in pixels between two touches.\n     *\n     * Parameters:\n     * touches - {Array(Object)}\n     *\n     * Returns:\n     * {Number} The distance in pixels.\n     */\n    getDistance: function(touches) {\n        var t0 = touches[0];\n        var t1 = touches[1];\n        return Math.sqrt(\n            Math.pow(t0.olClientX - t1.olClientX, 2) +\n            Math.pow(t0.olClientY - t1.olClientY, 2)\n        );\n    },\n\n\n    /**\n     * Method: getPinchData\n     * Get informations about the pinch event.\n     *\n     * Parameters:\n     * evt - {Event}\n     *\n     * Returns:\n     * {Object} Object that contains data about the current pinch.\n     */\n    getPinchData: function(evt) {\n        var distance = this.getDistance(evt.touches);\n        var scale = distance / this.start.distance;\n        return {\n            distance: distance,\n            delta: this.last.distance - distance,\n            scale: scale\n        };\n    },\n\n    CLASS_NAME: \"OpenLayers.Handler.Pinch\"\n});\n\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Handler/Drag.js\n */\n\n/**\n * Class: OpenLayers.Handler.RegularPolygon\n * Handler to draw a regular polygon on the map.  Polygon is displayed on mouse\n *     down, moves or is modified on mouse move, and is finished on mouse up.\n *     The handler triggers callbacks for 'done' and 'cancel'.  Create a new\n *     instance with the <OpenLayers.Handler.RegularPolygon> constructor.\n * \n * Inherits from:\n *  - <OpenLayers.Handler.Drag>\n */\nOpenLayers.Handler.RegularPolygon = OpenLayers.Class(OpenLayers.Handler.Drag, {\n    \n    /**\n     * APIProperty: sides\n     * {Integer} Number of sides for the regular polygon.  Needs to be greater\n     *     than 2.  Defaults to 4.\n     */\n    sides: 4,\n\n    /**\n     * APIProperty: radius\n     * {Float} Optional radius in map units of the regular polygon.  If this is\n     *     set to some non-zero value, a polygon with a fixed radius will be\n     *     drawn and dragged with mose movements.  If this property is not\n     *     set, dragging changes the radius of the polygon.  Set to null by\n     *     default.\n     */\n    radius: null,\n    \n    /**\n     * APIProperty: snapAngle\n     * {Float} If set to a non-zero value, the handler will snap the polygon\n     *     rotation to multiples of the snapAngle.  Value is an angle measured\n     *     in degrees counterclockwise from the positive x-axis.  \n     */\n    snapAngle: null,\n    \n    /**\n     * APIProperty: snapToggle\n     * {String} If set, snapToggle is checked on mouse events and will set\n     *     the snap mode to the opposite of what it currently is.  To disallow\n     *     toggling between snap and non-snap mode, set freehandToggle to\n     *     null.  Acceptable toggle values are 'shiftKey', 'ctrlKey', and\n     *     'altKey'. Snap mode is only possible if this.snapAngle is set to a\n     *     non-zero value.\n     */\n    snapToggle: 'shiftKey',\n    \n    /**\n     * Property: layerOptions\n     * {Object} Any optional properties to be set on the sketch layer.\n     */\n    layerOptions: null,\n\n    /**\n     * APIProperty: persist\n     * {Boolean} Leave the feature rendered until clear is called.  Default\n     *     is false.  If set to true, the feature remains rendered until\n     *     clear is called, typically by deactivating the handler or starting\n     *     another drawing.\n     */\n    persist: false,\n\n    /**\n     * APIProperty: irregular\n     * {Boolean} Draw an irregular polygon instead of a regular polygon.\n     *     Default is false.  If true, the initial mouse down will represent\n     *     one corner of the polygon bounds and with each mouse movement, the\n     *     polygon will be stretched so the opposite corner of its bounds\n     *     follows the mouse position.  This property takes precedence over\n     *     the radius property.  If set to true, the radius property will\n     *     be ignored.\n     */\n    irregular: false,\n\n    /**\n     * APIProperty: citeCompliant\n     * {Boolean} If set to true, coordinates of features drawn in a map extent\n     * crossing the date line won't exceed the world bounds. Default is false.\n     */\n    citeCompliant: false,\n\n    /**\n     * Property: angle\n     * {Float} The angle from the origin (mouse down) to the current mouse\n     *     position, in radians.  This is measured counterclockwise from the\n     *     positive x-axis.\n     */\n    angle: null,\n\n    /**\n     * Property: fixedRadius\n     * {Boolean} The polygon has a fixed radius.  True if a radius is set before\n     *     drawing begins.  False otherwise.\n     */\n    fixedRadius: false,\n\n    /**\n     * Property: feature\n     * {<OpenLayers.Feature.Vector>} The currently drawn polygon feature\n     */\n    feature: null,\n\n    /**\n     * Property: layer\n     * {<OpenLayers.Layer.Vector>} The temporary drawing layer\n     */\n    layer: null,\n\n    /**\n     * Property: origin\n     * {<OpenLayers.Geometry.Point>} Location of the first mouse down\n     */\n    origin: null,\n\n    /**\n     * Constructor: OpenLayers.Handler.RegularPolygon\n     * Create a new regular polygon handler.\n     *\n     * Parameters:\n     * control - {<OpenLayers.Control>} The control that owns this handler\n     * callbacks - {Object} An object with a properties whose values are\n     *     functions.  Various callbacks described below.\n     * options - {Object} An object with properties to be set on the handler.\n     *     If the options.sides property is not specified, the number of sides\n     *     will default to 4.\n     *\n     * Named callbacks:\n     * create - Called when a sketch is first created.  Callback called with\n     *     the creation point geometry and sketch feature.\n     * done - Called when the sketch drawing is finished.  The callback will\n     *     receive a single argument, the sketch geometry.\n     * cancel - Called when the handler is deactivated while drawing.  The\n     *     cancel callback will receive a geometry.\n     */\n    initialize: function(control, callbacks, options) {\n        if(!(options && options.layerOptions && options.layerOptions.styleMap)) {\n            this.style = OpenLayers.Util.extend(OpenLayers.Feature.Vector.style['default'], {});\n        }\n\n        OpenLayers.Handler.Drag.prototype.initialize.apply(this,\n                                                [control, callbacks, options]);\n        this.options = (options) ? options : {};\n    },\n    \n    /**\n     * APIMethod: setOptions\n     * \n     * Parameters:\n     * newOptions - {Object} \n     */\n    setOptions: function (newOptions) {\n        OpenLayers.Util.extend(this.options, newOptions);\n        OpenLayers.Util.extend(this, newOptions);\n    },\n    \n    /**\n     * APIMethod: activate\n     * Turn on the handler.\n     *\n     * Returns:\n     * {Boolean} The handler was successfully activated\n     */\n    activate: function() {\n        var activated = false;\n        if(OpenLayers.Handler.Drag.prototype.activate.apply(this, arguments)) {\n            // create temporary vector layer for rendering geometry sketch\n            var options = OpenLayers.Util.extend({\n                displayInLayerSwitcher: false,\n                // indicate that the temp vector layer will never be out of range\n                // without this, resolution properties must be specified at the\n                // map-level for this temporary layer to init its resolutions\n                // correctly\n                calculateInRange: OpenLayers.Function.True,\n                wrapDateLine: this.citeCompliant\n            }, this.layerOptions);\n            this.layer = new OpenLayers.Layer.Vector(this.CLASS_NAME, options);\n            this.map.addLayer(this.layer);\n            activated = true;\n        }\n        return activated;\n    },\n\n    /**\n     * APIMethod: deactivate\n     * Turn off the handler.\n     *\n     * Returns:\n     * {Boolean} The handler was successfully deactivated\n     */\n    deactivate: function() {\n        var deactivated = false;\n        if(OpenLayers.Handler.Drag.prototype.deactivate.apply(this, arguments)) {\n            // call the cancel callback if mid-drawing\n            if(this.dragging) {\n                this.cancel();\n            }\n            // If a layer's map property is set to null, it means that that\n            // layer isn't added to the map. Since we ourself added the layer\n            // to the map in activate(), we can assume that if this.layer.map\n            // is null it means that the layer has been destroyed (as a result\n            // of map.destroy() for example.\n            if (this.layer.map != null) {\n                this.layer.destroy(false);\n                if (this.feature) {\n                    this.feature.destroy();\n                }\n            }\n            this.layer = null;\n            this.feature = null;\n            deactivated = true;\n        }\n        return deactivated;\n    },\n    \n    /**\n     * Method: down\n     * Start drawing a new feature\n     *\n     * Parameters:\n     * evt - {Event} The drag start event\n     */\n    down: function(evt) {\n        this.fixedRadius = !!(this.radius);\n        var maploc = this.layer.getLonLatFromViewPortPx(evt.xy); \n        this.origin = new OpenLayers.Geometry.Point(maploc.lon, maploc.lat);\n        // create the new polygon\n        if(!this.fixedRadius || this.irregular) {\n            // smallest radius should not be less one pixel in map units\n            // VML doesn't behave well with smaller\n            this.radius = this.map.getResolution();\n        }\n        if(this.persist) {\n            this.clear();\n        }\n        this.feature = new OpenLayers.Feature.Vector();\n        this.createGeometry();\n        this.callback(\"create\", [this.origin, this.feature]);\n        this.layer.addFeatures([this.feature], {silent: true});\n        this.layer.drawFeature(this.feature, this.style);\n    },\n    \n    /**\n     * Method: move\n     * Respond to drag move events\n     *\n     * Parameters:\n     * evt - {Evt} The move event\n     */\n    move: function(evt) {\n        var maploc = this.layer.getLonLatFromViewPortPx(evt.xy); \n        var point = new OpenLayers.Geometry.Point(maploc.lon, maploc.lat);\n        if(this.irregular) {\n            var ry = Math.sqrt(2) * Math.abs(point.y - this.origin.y) / 2;\n            this.radius = Math.max(this.map.getResolution() / 2, ry);\n        } else if(this.fixedRadius) {\n            this.origin = point;\n        } else {\n            this.calculateAngle(point, evt);\n            this.radius = Math.max(this.map.getResolution() / 2,\n                                   point.distanceTo(this.origin));\n        }\n        this.modifyGeometry();\n        if(this.irregular) {\n            var dx = point.x - this.origin.x;\n            var dy = point.y - this.origin.y;\n            var ratio;\n            if(dy == 0) {\n                ratio = dx / (this.radius * Math.sqrt(2));\n            } else {\n                ratio = dx / dy;\n            }\n            this.feature.geometry.resize(1, this.origin, ratio);\n            this.feature.geometry.move(dx / 2, dy / 2);\n        }\n        this.layer.drawFeature(this.feature, this.style);\n    },\n\n    /**\n     * Method: up\n     * Finish drawing the feature\n     *\n     * Parameters:\n     * evt - {Event} The mouse up event\n     */\n    up: function(evt) {\n        this.finalize();\n        // the mouseup method of superclass doesn't call the\n        // \"done\" callback if there's been no move between\n        // down and up\n        if (this.start == this.last) {\n            this.callback(\"done\", [evt.xy]);\n        }\n    },\n\n    /**\n     * Method: out\n     * Finish drawing the feature.\n     *\n     * Parameters:\n     * evt - {Event} The mouse out event\n     */\n    out: function(evt) {\n        this.finalize();\n    },\n\n    /**\n     * Method: createGeometry\n     * Create the new polygon geometry.  This is called at the start of the\n     *     drag and at any point during the drag if the number of sides\n     *     changes.\n     */\n    createGeometry: function() {\n        this.angle = Math.PI * ((1/this.sides) - (1/2));\n        if(this.snapAngle) {\n            this.angle += this.snapAngle * (Math.PI / 180);\n        }\n        this.feature.geometry = OpenLayers.Geometry.Polygon.createRegularPolygon(\n            this.origin, this.radius, this.sides, this.snapAngle\n        );\n    },\n    \n    /**\n     * Method: modifyGeometry\n     * Modify the polygon geometry in place.\n     */\n    modifyGeometry: function() {\n        var angle, point;\n        var ring = this.feature.geometry.components[0];\n        // if the number of sides ever changes, create a new geometry\n        if(ring.components.length != (this.sides + 1)) {\n            this.createGeometry();\n            ring = this.feature.geometry.components[0];\n        }\n        for(var i=0; i<this.sides; ++i) {\n            point = ring.components[i];\n            angle = this.angle + (i * 2 * Math.PI / this.sides);\n            point.x = this.origin.x + (this.radius * Math.cos(angle));\n            point.y = this.origin.y + (this.radius * Math.sin(angle));\n            point.clearBounds();\n        }\n    },\n    \n    /**\n     * Method: calculateAngle\n     * Calculate the angle based on settings.\n     *\n     * Parameters:\n     * point - {<OpenLayers.Geometry.Point>}\n     * evt - {Event}\n     */\n    calculateAngle: function(point, evt) {\n        var alpha = Math.atan2(point.y - this.origin.y,\n                               point.x - this.origin.x);\n        if(this.snapAngle && (this.snapToggle && !evt[this.snapToggle])) {\n            var snapAngleRad = (Math.PI / 180) * this.snapAngle;\n            this.angle = Math.round(alpha / snapAngleRad) * snapAngleRad;\n        } else {\n            this.angle = alpha;\n        }\n    },\n\n    /**\n     * APIMethod: cancel\n     * Finish the geometry and call the \"cancel\" callback.\n     */\n    cancel: function() {\n        // the polygon geometry gets cloned in the callback method\n        this.callback(\"cancel\", null);\n        this.finalize();\n    },\n\n    /**\n     * Method: finalize\n     * Finish the geometry and call the \"done\" callback.\n     */\n    finalize: function() {\n        this.origin = null;\n        this.radius = this.options.radius;\n    },\n\n    /**\n     * APIMethod: clear\n     * Clear any rendered features on the temporary layer.  This is called\n     *     when the handler is deactivated, canceled, or done (unless persist\n     *     is true).\n     */\n    clear: function() {\n        if (this.layer) {\n            this.layer.renderer.clear();\n            this.layer.destroyFeatures();\n        }\n    },\n    \n    /**\n     * Method: callback\n     * Trigger the control's named callback with the given arguments\n     *\n     * Parameters:\n     * name - {String} The key for the callback that is one of the properties\n     *     of the handler's callbacks object.\n     * args - {Array} An array of arguments with which to call the callback\n     *     (defined by the control).\n     */\n    callback: function (name, args) {\n        // override the callback method to always send the polygon geometry\n        if (this.callbacks[name]) {\n            this.callbacks[name].apply(this.control,\n                                       [this.feature.geometry.clone()]);\n        }\n        // since sketch features are added to the temporary layer\n        // they must be cleared here if done or cancel\n        if(!this.persist && (name == \"done\" || name == \"cancel\")) {\n            this.clear();\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Handler.RegularPolygon\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Handler.js\n * @requires OpenLayers/Handler/Drag.js\n */\n\n/**\n * Class: OpenLayers.Handler.Box\n * Handler for dragging a rectangle across the map.  Box is displayed \n * on mouse down, moves on mouse move, and is finished on mouse up.\n *\n * Inherits from:\n *  - <OpenLayers.Handler> \n */\nOpenLayers.Handler.Box = OpenLayers.Class(OpenLayers.Handler, {\n\n    /** \n     * Property: dragHandler \n     * {<OpenLayers.Handler.Drag>} \n     */\n    dragHandler: null,\n\n    /**\n     * APIProperty: boxDivClassName\n     * {String} The CSS class to use for drawing the box. Default is\n     *     olHandlerBoxZoomBox\n     */\n    boxDivClassName: 'olHandlerBoxZoomBox',\n    \n    /**\n     * Property: boxOffsets\n     * {Object} Caches box offsets from css. This is used by the getBoxOffsets\n     * method.\n     */\n    boxOffsets: null,\n\n    /**\n     * Constructor: OpenLayers.Handler.Box\n     *\n     * Parameters:\n     * control - {<OpenLayers.Control>} \n     * callbacks - {Object} An object with a properties whose values are\n     *     functions.  Various callbacks described below.\n     * options - {Object} \n     *\n     * Named callbacks:\n     * start - Called when the box drag operation starts.\n     * done - Called when the box drag operation is finished.\n     *     The callback should expect to receive a single argument, the box \n     *     bounds or a pixel. If the box dragging didn't span more than a 5 \n     *     pixel distance, a pixel will be returned instead of a bounds object.\n     */\n    initialize: function(control, callbacks, options) {\n        OpenLayers.Handler.prototype.initialize.apply(this, arguments);\n        this.dragHandler = new OpenLayers.Handler.Drag(\n            this, \n            {\n                down: this.startBox, \n                move: this.moveBox, \n                out: this.removeBox,\n                up: this.endBox\n            }, \n            {keyMask: this.keyMask}\n        );\n    },\n\n    /**\n     * Method: destroy\n     */\n    destroy: function() {\n        OpenLayers.Handler.prototype.destroy.apply(this, arguments);\n        if (this.dragHandler) {\n            this.dragHandler.destroy();\n            this.dragHandler = null;\n        }            \n    },\n\n    /**\n     * Method: setMap\n     */\n    setMap: function (map) {\n        OpenLayers.Handler.prototype.setMap.apply(this, arguments);\n        if (this.dragHandler) {\n            this.dragHandler.setMap(map);\n        }\n    },\n\n    /**\n    * Method: startBox\n    *\n    * Parameters:\n    * xy - {<OpenLayers.Pixel>}\n    */\n    startBox: function (xy) {\n        this.callback(\"start\", []);\n        this.zoomBox = OpenLayers.Util.createDiv('zoomBox', {\n            x: -9999, y: -9999\n        });\n        this.zoomBox.className = this.boxDivClassName;                                         \n        this.zoomBox.style.zIndex = this.map.Z_INDEX_BASE[\"Popup\"] - 1;\n        \n        this.map.viewPortDiv.appendChild(this.zoomBox);\n        \n        OpenLayers.Element.addClass(\n            this.map.viewPortDiv, \"olDrawBox\"\n        );\n    },\n\n    /**\n    * Method: moveBox\n    */\n    moveBox: function (xy) {\n        var startX = this.dragHandler.start.x;\n        var startY = this.dragHandler.start.y;\n        var deltaX = Math.abs(startX - xy.x);\n        var deltaY = Math.abs(startY - xy.y);\n\n        var offset = this.getBoxOffsets();\n        this.zoomBox.style.width = (deltaX + offset.width + 1) + \"px\";\n        this.zoomBox.style.height = (deltaY + offset.height + 1) + \"px\";\n        this.zoomBox.style.left = (xy.x < startX ?\n            startX - deltaX - offset.left : startX - offset.left) + \"px\";\n        this.zoomBox.style.top = (xy.y < startY ?\n            startY - deltaY - offset.top : startY - offset.top) + \"px\";\n    },\n\n    /**\n    * Method: endBox\n    */\n    endBox: function(end) {\n        var result;\n        if (Math.abs(this.dragHandler.start.x - end.x) > 5 ||    \n            Math.abs(this.dragHandler.start.y - end.y) > 5) {   \n            var start = this.dragHandler.start;\n            var top = Math.min(start.y, end.y);\n            var bottom = Math.max(start.y, end.y);\n            var left = Math.min(start.x, end.x);\n            var right = Math.max(start.x, end.x);\n            result = new OpenLayers.Bounds(left, bottom, right, top);\n        } else {\n            result = this.dragHandler.start.clone(); // i.e. OL.Pixel\n        } \n        this.removeBox();\n\n        this.callback(\"done\", [result]);\n    },\n\n    /**\n     * Method: removeBox\n     * Remove the zoombox from the screen and nullify our reference to it.\n     */\n    removeBox: function() {\n        this.map.viewPortDiv.removeChild(this.zoomBox);\n        this.zoomBox = null;\n        this.boxOffsets = null;\n        OpenLayers.Element.removeClass(\n            this.map.viewPortDiv, \"olDrawBox\"\n        );\n\n    },\n\n    /**\n     * Method: activate\n     */\n    activate: function () {\n        if (OpenLayers.Handler.prototype.activate.apply(this, arguments)) {\n            this.dragHandler.activate();\n            return true;\n        } else {\n            return false;\n        }\n    },\n\n    /**\n     * Method: deactivate\n     */\n    deactivate: function () {\n        if (OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {\n            if (this.dragHandler.deactivate()) {\n                if (this.zoomBox) {\n                    this.removeBox();\n                }\n            }\n            return true;\n        } else {\n            return false;\n        }\n    },\n    \n    /**\n     * Method: getBoxOffsets\n     * Determines border offsets for a box, according to the box model.\n     * \n     * Returns:\n     * {Object} an object with the following offsets:\n     *     - left\n     *     - right\n     *     - top\n     *     - bottom\n     *     - width\n     *     - height\n     */\n    getBoxOffsets: function() {\n        if (!this.boxOffsets) {\n            // Determine the box model. If the testDiv's clientWidth is 3, then\n            // the borders are outside and we are dealing with the w3c box\n            // model. Otherwise, the browser uses the traditional box model and\n            // the borders are inside the box bounds, leaving us with a\n            // clientWidth of 1.\n            var testDiv = document.createElement(\"div\");\n            //testDiv.style.visibility = \"hidden\";\n            testDiv.style.position = \"absolute\";\n            testDiv.style.border = \"1px solid black\";\n            testDiv.style.width = \"3px\";\n            document.body.appendChild(testDiv);\n            var w3cBoxModel = testDiv.clientWidth == 3;\n            document.body.removeChild(testDiv);\n            \n            var left = parseInt(OpenLayers.Element.getStyle(this.zoomBox,\n                \"border-left-width\"));\n            var right = parseInt(OpenLayers.Element.getStyle(\n                this.zoomBox, \"border-right-width\"));\n            var top = parseInt(OpenLayers.Element.getStyle(this.zoomBox,\n                \"border-top-width\"));\n            var bottom = parseInt(OpenLayers.Element.getStyle(\n                this.zoomBox, \"border-bottom-width\"));\n            this.boxOffsets = {\n                left: left,\n                right: right,\n                top: top,\n                bottom: bottom,\n                width: w3cBoxModel === false ? left + right : 0,\n                height: w3cBoxModel === false ? top + bottom : 0\n            };\n        }\n        return this.boxOffsets;\n    },\n  \n    CLASS_NAME: \"OpenLayers.Handler.Box\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Handler.js\n */\n\n/**\n * Class: OpenLayers.Handler.MouseWheel\n * Handler for wheel up/down events.\n * \n * Inherits from:\n *  - <OpenLayers.Handler>\n */\nOpenLayers.Handler.MouseWheel = OpenLayers.Class(OpenLayers.Handler, {\n    /** \n     * Property: wheelListener \n     * {function} \n     */\n    wheelListener: null,\n\n    /**\n     * Property: interval\n     * {Integer} In order to increase server performance, an interval (in \n     *     milliseconds) can be set to reduce the number of up/down events \n     *     called. If set, a new up/down event will not be set until the \n     *     interval has passed. \n     *     Defaults to 0, meaning no interval. \n     */\n    interval: 0,\n    \n    /**\n     * Property: maxDelta\n     * {Integer} Maximum delta to collect before breaking from the current\n     *    interval. In cumulative mode, this also limits the maximum delta\n     *    returned from the handler. Default is Number.POSITIVE_INFINITY.\n     */\n    maxDelta: Number.POSITIVE_INFINITY,\n    \n    /**\n     * Property: delta\n     * {Integer} When interval is set, delta collects the mousewheel z-deltas\n     *     of the events that occur within the interval.\n     *      See also the cumulative option\n     */\n    delta: 0,\n    \n    /**\n     * Property: cumulative\n     * {Boolean} When interval is set: true to collect all the mousewheel \n     *     z-deltas, false to only record the delta direction (positive or\n     *     negative)\n     */\n    cumulative: true,\n    \n    /**\n     * Constructor: OpenLayers.Handler.MouseWheel\n     *\n     * Parameters:\n     * control - {<OpenLayers.Control>} \n     * callbacks - {Object} An object containing a single function to be\n     *                          called when the drag operation is finished.\n     *                          The callback should expect to receive a single\n     *                          argument, the point geometry.\n     * options - {Object} \n     */\n    initialize: function(control, callbacks, options) {\n        OpenLayers.Handler.prototype.initialize.apply(this, arguments);\n        this.wheelListener = OpenLayers.Function.bindAsEventListener(\n            this.onWheelEvent, this\n        );\n    },\n\n    /**\n     * Method: destroy\n     */    \n    destroy: function() {\n        OpenLayers.Handler.prototype.destroy.apply(this, arguments);\n        this.wheelListener = null;\n    },\n\n    /**\n     *  Mouse ScrollWheel code thanks to http://adomas.org/javascript-mouse-wheel/\n     */\n\n    /** \n     * Method: onWheelEvent\n     * Catch the wheel event and handle it xbrowserly\n     * \n     * Parameters:\n     * e - {Event} \n     */\n    onWheelEvent: function(e){\n        \n        // make sure we have a map and check keyboard modifiers\n        if (!this.map || !this.checkModifiers(e)) {\n            return;\n        }\n        \n        // Ride up the element's DOM hierarchy to determine if it or any of \n        //  its ancestors was: \n        //   * specifically marked as scrollable (CSS overflow property)\n        //   * one of our layer divs or a div marked as scrollable\n        //     ('olScrollable' CSS class)\n        //   * the map div\n        //\n        var overScrollableDiv = false;\n        var allowScroll = false;\n        var overMapDiv = false;\n        \n        var elem = OpenLayers.Event.element(e);\n        while((elem != null) && !overMapDiv && !overScrollableDiv) {\n\n            if (!overScrollableDiv) {\n                try {\n                    var overflow;\n                    if (elem.currentStyle) {\n                        overflow = elem.currentStyle[\"overflow\"];\n                    } else {\n                        var style = \n                            document.defaultView.getComputedStyle(elem, null);\n                        overflow = style.getPropertyValue(\"overflow\");\n                    }\n                    overScrollableDiv = ( overflow && \n                        (overflow == \"auto\") || (overflow == \"scroll\") );\n                } catch(err) {\n                    //sometimes when scrolling in a popup, this causes \n                    // obscure browser error\n                }\n            }\n\n            if (!allowScroll) {\n                allowScroll = OpenLayers.Element.hasClass(elem, 'olScrollable');\n                if (!allowScroll) {\n                    for (var i = 0, len = this.map.layers.length; i < len; i++) {\n                        // Are we in the layer div? Note that we have two cases\n                        // here: one is to catch EventPane layers, which have a\n                        // pane above the layer (layer.pane)\n                        var layer = this.map.layers[i];\n                        if (elem == layer.div || elem == layer.pane) {\n                            allowScroll = true;\n                            break;\n                        }\n                    }\n                }\n            }\n            overMapDiv = (elem == this.map.div);\n\n            elem = elem.parentNode;\n        }\n        \n        // Logic below is the following:\n        //\n        // If we are over a scrollable div or not over the map div:\n        //  * do nothing (let the browser handle scrolling)\n        //\n        //    otherwise \n        // \n        //    If we are over the layer div or a 'olScrollable' div:\n        //     * zoom/in out\n        //     then\n        //     * kill event (so as not to also scroll the page after zooming)\n        //\n        //       otherwise\n        //\n        //       Kill the event (don't scroll the page if we wheel over the\n        //        layerswitcher or the pan/zoom control)\n        //\n        if (!overScrollableDiv && overMapDiv) {\n            if (allowScroll) {\n                var delta = 0;\n                \n                if (e.wheelDelta) {\n                    delta = e.wheelDelta;\n                    if (delta % 160 === 0) {\n                        // opera have steps of 160 instead of 120\n                        delta = delta * 0.75;\n                    }\n                    delta = delta / 120;\n                } else if (e.detail) {\n                    // detail in Firefox on OS X is 1/3 of Windows\n                    // so force delta 1 / -1\n                    delta = - (e.detail / Math.abs(e.detail));\n                }\n                this.delta += delta;\n\n                window.clearTimeout(this._timeoutId);\n                if(this.interval && Math.abs(this.delta) < this.maxDelta) {\n                    // store e because window.event might change during delay\n                    var evt = OpenLayers.Util.extend({}, e);\n                    this._timeoutId = window.setTimeout(\n                        OpenLayers.Function.bind(function(){\n                            this.wheelZoom(evt);\n                        }, this),\n                        this.interval\n                    );\n                } else {\n                    this.wheelZoom(e);\n                }\n            }\n            OpenLayers.Event.stop(e);\n        }\n    },\n\n    /**\n     * Method: wheelZoom\n     * Given the wheel event, we carry out the appropriate zooming in or out,\n     *     based on the 'wheelDelta' or 'detail' property of the event.\n     * \n     * Parameters:\n     * e - {Event}\n     */\n    wheelZoom: function(e) {\n        var delta = this.delta;\n        this.delta = 0;\n        \n        if (delta) {\n            e.xy = this.map.events.getMousePosition(e);\n            if (delta < 0) {\n                this.callback(\"down\",\n                    [e, this.cumulative ? Math.max(-this.maxDelta, delta) : -1]);\n            } else {\n                this.callback(\"up\",\n                    [e, this.cumulative ? Math.min(this.maxDelta, delta) : 1]);\n            }\n        }\n    },\n    \n    /**\n     * Method: activate \n     */\n    activate: function (evt) {\n        if (OpenLayers.Handler.prototype.activate.apply(this, arguments)) {\n            //register mousewheel events specifically on the window and document\n            var wheelListener = this.wheelListener;\n            OpenLayers.Event.observe(window, \"DOMMouseScroll\", wheelListener);\n            OpenLayers.Event.observe(window, \"mousewheel\", wheelListener);\n            OpenLayers.Event.observe(document, \"mousewheel\", wheelListener);\n            return true;\n        } else {\n            return false;\n        }\n    },\n\n    /**\n     * Method: deactivate \n     */\n    deactivate: function (evt) {\n        if (OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {\n            // unregister mousewheel events specifically on the window and document\n            var wheelListener = this.wheelListener;\n            OpenLayers.Event.stopObserving(window, \"DOMMouseScroll\", wheelListener);\n            OpenLayers.Event.stopObserving(window, \"mousewheel\", wheelListener);\n            OpenLayers.Event.stopObserving(document, \"mousewheel\", wheelListener);\n            return true;\n        } else {\n            return false;\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Handler.MouseWheel\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Handler.js\n * @requires OpenLayers/Events.js\n */\n\n/**\n * Class: OpenLayers.handler.Keyboard\n * A handler for keyboard events.  Create a new instance with the\n *     <OpenLayers.Handler.Keyboard> constructor.\n * \n * Inherits from:\n *  - <OpenLayers.Handler> \n */\nOpenLayers.Handler.Keyboard = OpenLayers.Class(OpenLayers.Handler, {\n\n    /* http://www.quirksmode.org/js/keys.html explains key x-browser\n        key handling quirks in pretty nice detail */\n\n    /** \n     * Constant: KEY_EVENTS\n     * keydown, keypress, keyup\n     */\n    KEY_EVENTS: [\"keydown\", \"keyup\"],\n\n    /** \n    * Property: eventListener\n    * {Function}\n    */\n    eventListener: null,\n\n    /**\n     * Property: observeElement\n     * {DOMElement|String} The DOM element on which we listen for\n     *     key events. Default to the document.\n     */\n    observeElement: null,\n\n    /**\n     * Constructor: OpenLayers.Handler.Keyboard\n     * Returns a new keyboard handler.\n     * \n     * Parameters:\n     * control - {<OpenLayers.Control>} The control that is making use of\n     *     this handler.  If a handler is being used without a control, the\n     *     handlers setMap method must be overridden to deal properly with\n     *     the map.\n     * callbacks - {Object} An object containing a single function to be\n     *     called when the drag operation is finished. The callback should\n     *     expect to receive a single argument, the pixel location of the event.\n     *     Callbacks for 'keydown', 'keypress', and 'keyup' are supported.\n     * options - {Object} Optional object whose properties will be set on the\n     *     handler.\n     */\n    initialize: function(control, callbacks, options) {\n        OpenLayers.Handler.prototype.initialize.apply(this, arguments);\n        // cache the bound event listener method so it can be unobserved later\n        this.eventListener = OpenLayers.Function.bindAsEventListener(\n            this.handleKeyEvent, this\n        );\n    },\n    \n    /**\n     * Method: destroy\n     */\n    destroy: function() {\n        this.deactivate();\n        this.eventListener = null;\n        OpenLayers.Handler.prototype.destroy.apply(this, arguments);\n    },\n\n    /**\n     * Method: activate\n     */\n    activate: function() {\n        if (OpenLayers.Handler.prototype.activate.apply(this, arguments)) {\n            this.observeElement = this.observeElement || document;\n            for (var i=0, len=this.KEY_EVENTS.length; i<len; i++) {\n                OpenLayers.Event.observe(\n                    this.observeElement, this.KEY_EVENTS[i], this.eventListener);\n            }\n            return true;\n        } else {\n            return false;\n        }\n    },\n\n    /**\n     * Method: deactivate\n     */\n    deactivate: function() {\n        var deactivated = false;\n        if (OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {\n            for (var i=0, len=this.KEY_EVENTS.length; i<len; i++) {\n                OpenLayers.Event.stopObserving(\n                    this.observeElement, this.KEY_EVENTS[i], this.eventListener);\n            }\n            deactivated = true;\n        }\n        return deactivated;\n    },\n\n    /**\n     * Method: handleKeyEvent \n     */\n    handleKeyEvent: function (evt) {\n        if (this.checkModifiers(evt)) {\n            this.callback(evt.type, [evt]);\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Handler.Keyboard\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n */\n\n/**\n * Class: OpenLayers.Control\n * Controls affect the display or behavior of the map. They allow everything\n * from panning and zooming to displaying a scale indicator. Controls by \n * default are added to the map they are contained within however it is\n * possible to add a control to an external div by passing the div in the\n * options parameter.\n * \n * Example:\n * The following example shows how to add many of the common controls\n * to a map.\n * \n * > var map = new OpenLayers.Map('map', { controls: [] });\n * >\n * > map.addControl(new OpenLayers.Control.PanZoomBar());\n * > map.addControl(new OpenLayers.Control.LayerSwitcher({'ascending':false}));\n * > map.addControl(new OpenLayers.Control.Permalink());\n * > map.addControl(new OpenLayers.Control.Permalink('permalink'));\n * > map.addControl(new OpenLayers.Control.MousePosition());\n * > map.addControl(new OpenLayers.Control.OverviewMap());\n * > map.addControl(new OpenLayers.Control.KeyboardDefaults());\n *\n * The next code fragment is a quick example of how to intercept \n * shift-mouse click to display the extent of the bounding box\n * dragged out by the user.  Usually controls are not created\n * in exactly this manner.  See the source for a more complete \n * example:\n *\n * > var control = new OpenLayers.Control();\n * > OpenLayers.Util.extend(control, {\n * >     draw: function () {\n * >         // this Handler.Box will intercept the shift-mousedown\n * >         // before Control.MouseDefault gets to see it\n * >         this.box = new OpenLayers.Handler.Box( control, \n * >             {\"done\": this.notice},\n * >             {keyMask: OpenLayers.Handler.MOD_SHIFT});\n * >         this.box.activate();\n * >     },\n * >\n * >     notice: function (bounds) {\n * >         OpenLayers.Console.userError(bounds);\n * >     }\n * > }); \n * > map.addControl(control);\n * \n */\nOpenLayers.Control = OpenLayers.Class({\n\n    /** \n     * Property: id \n     * {String} \n     */\n    id: null,\n    \n    /** \n     * Property: map \n     * {<OpenLayers.Map>} this gets set in the addControl() function in\n     * OpenLayers.Map \n     */\n    map: null,\n\n    /** \n     * APIProperty: div \n     * {DOMElement} The element that contains the control, if not present the \n     *     control is placed inside the map.\n     */\n    div: null,\n\n    /** \n     * APIProperty: type \n     * {Number} Controls can have a 'type'. The type determines the type of\n     * interactions which are possible with them when they are placed in an\n     * <OpenLayers.Control.Panel>. \n     */\n    type: null, \n\n    /** \n     * Property: allowSelection\n     * {Boolean} By default, controls do not allow selection, because\n     * it may interfere with map dragging. If this is true, OpenLayers\n     * will not prevent selection of the control.\n     * Default is false.\n     */\n    allowSelection: false,  \n\n    /** \n     * Property: displayClass \n     * {string}  This property is used for CSS related to the drawing of the\n     * Control. \n     */\n    displayClass: \"\",\n    \n    /**\n    * APIProperty: title  \n    * {string}  This property is used for showing a tooltip over the  \n    * Control.  \n    */ \n    title: \"\",\n\n    /**\n     * APIProperty: autoActivate\n     * {Boolean} Activate the control when it is added to a map.  Default is\n     *     false.\n     */\n    autoActivate: false,\n\n    /** \n     * APIProperty: active \n     * {Boolean} The control is active (read-only).  Use <activate> and \n     *     <deactivate> to change control state.\n     */\n    active: null,\n\n    /**\n     * Property: handlerOptions\n     * {Object} Used to set non-default properties on the control's handler\n     */\n    handlerOptions: null,\n\n    /** \n     * Property: handler \n     * {<OpenLayers.Handler>} null\n     */\n    handler: null,\n\n    /**\n     * APIProperty: eventListeners\n     * {Object} If set as an option at construction, the eventListeners\n     *     object will be registered with <OpenLayers.Events.on>.  Object\n     *     structure must be a listeners object as shown in the example for\n     *     the events.on method.\n     */\n    eventListeners: null,\n\n    /** \n     * APIProperty: events\n     * {<OpenLayers.Events>} Events instance for listeners and triggering\n     *     control specific events.\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * control.events.register(type, obj, listener);\n     * (end)\n     *\n     * Listeners will be called with a reference to an event object.  The\n     *     properties of this event depends on exactly what happened.\n     *\n     * All event objects have at least the following properties:\n     * object - {Object} A reference to control.events.object (a reference\n     *      to the control).\n     * element - {DOMElement} A reference to control.events.element (which\n     *      will be null unless documented otherwise).\n     *\n     * Supported map event types:\n     * activate - Triggered when activated.\n     * deactivate - Triggered when deactivated.\n     */\n    events: null,\n\n    /**\n     * Constructor: OpenLayers.Control\n     * Create an OpenLayers Control.  The options passed as a parameter\n     * directly extend the control.  For example passing the following:\n     * \n     * > var control = new OpenLayers.Control({div: myDiv});\n     *\n     * Overrides the default div attribute value of null.\n     * \n     * Parameters:\n     * options - {Object} \n     */\n    initialize: function (options) {\n        // We do this before the extend so that instances can override\n        // className in options.\n        this.displayClass = \n            this.CLASS_NAME.replace(\"OpenLayers.\", \"ol\").replace(/\\./g, \"\");\n        \n        OpenLayers.Util.extend(this, options);\n        \n        this.events = new OpenLayers.Events(this);\n        if(this.eventListeners instanceof Object) {\n            this.events.on(this.eventListeners);\n        }\n        if (this.id == null) {\n            this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + \"_\");\n        }\n    },\n\n    /**\n     * Method: destroy\n     * The destroy method is used to perform any clean up before the control\n     * is dereferenced.  Typically this is where event listeners are removed\n     * to prevent memory leaks.\n     */\n    destroy: function () {\n        if(this.events) {\n            if(this.eventListeners) {\n                this.events.un(this.eventListeners);\n            }\n            this.events.destroy();\n            this.events = null;\n        }\n        this.eventListeners = null;\n\n        // eliminate circular references\n        if (this.handler) {\n            this.handler.destroy();\n            this.handler = null;\n        }\n        if(this.handlers) {\n            for(var key in this.handlers) {\n                if(this.handlers.hasOwnProperty(key) &&\n                   typeof this.handlers[key].destroy == \"function\") {\n                    this.handlers[key].destroy();\n                }\n            }\n            this.handlers = null;\n        }\n        if (this.map) {\n            this.map.removeControl(this);\n            this.map = null;\n        }\n        this.div = null;\n    },\n\n    /** \n     * Method: setMap\n     * Set the map property for the control. This is done through an accessor\n     * so that subclasses can override this and take special action once \n     * they have their map variable set. \n     *\n     * Parameters:\n     * map - {<OpenLayers.Map>} \n     */\n    setMap: function(map) {\n        this.map = map;\n        if (this.handler) {\n            this.handler.setMap(map);\n        }\n    },\n  \n    /**\n     * Method: draw\n     * The draw method is called when the control is ready to be displayed\n     * on the page.  If a div has not been created one is created.  Controls\n     * with a visual component will almost always want to override this method \n     * to customize the look of control. \n     *\n     * Parameters:\n     * px - {<OpenLayers.Pixel>} The top-left pixel position of the control\n     *      or null.\n     *\n     * Returns:\n     * {DOMElement} A reference to the DIV DOMElement containing the control\n     */\n    draw: function (px) {\n        if (this.div == null) {\n            this.div = OpenLayers.Util.createDiv(this.id);\n            this.div.className = this.displayClass;\n            if (!this.allowSelection) {\n                this.div.className += \" olControlNoSelect\";\n                this.div.setAttribute(\"unselectable\", \"on\", 0);\n                this.div.onselectstart = OpenLayers.Function.False; \n            }    \n            if (this.title != \"\") {\n                this.div.title = this.title;\n            }\n        }\n        if (px != null) {\n            this.position = px.clone();\n        }\n        this.moveTo(this.position);\n        return this.div;\n    },\n\n    /**\n     * Method: moveTo\n     * Sets the left and top style attributes to the passed in pixel \n     * coordinates.\n     *\n     * Parameters:\n     * px - {<OpenLayers.Pixel>}\n     */\n    moveTo: function (px) {\n        if ((px != null) && (this.div != null)) {\n            this.div.style.left = px.x + \"px\";\n            this.div.style.top = px.y + \"px\";\n        }\n    },\n\n    /**\n     * APIMethod: activate\n     * Explicitly activates a control and its associated\n     * handler if one has been set.  Controls can be\n     * deactivated by calling the deactivate() method.\n     * \n     * Returns:\n     * {Boolean}  True if the control was successfully activated or\n     *            false if the control was already active.\n     */\n    activate: function () {\n        if (this.active) {\n            return false;\n        }\n        if (this.handler) {\n            this.handler.activate();\n        }\n        this.active = true;\n        if(this.map) {\n            OpenLayers.Element.addClass(\n                this.map.viewPortDiv,\n                this.displayClass.replace(/ /g, \"\") + \"Active\"\n            );\n        }\n        this.events.triggerEvent(\"activate\");\n        return true;\n    },\n    \n    /**\n     * APIMethod: deactivate\n     * Deactivates a control and its associated handler if any.  The exact\n     * effect of this depends on the control itself.\n     * \n     * Returns:\n     * {Boolean} True if the control was effectively deactivated or false\n     *           if the control was already inactive.\n     */\n    deactivate: function () {\n        if (this.active) {\n            if (this.handler) {\n                this.handler.deactivate();\n            }\n            this.active = false;\n            if(this.map) {\n                OpenLayers.Element.removeClass(\n                    this.map.viewPortDiv,\n                    this.displayClass.replace(/ /g, \"\") + \"Active\"\n                );\n            }\n            this.events.triggerEvent(\"deactivate\");\n            return true;\n        }\n        return false;\n    },\n\n    CLASS_NAME: \"OpenLayers.Control\"\n});\n\n/**\n * Constant: OpenLayers.Control.TYPE_BUTTON\n */\nOpenLayers.Control.TYPE_BUTTON = 1;\n\n/**\n * Constant: OpenLayers.Control.TYPE_TOGGLE\n */\nOpenLayers.Control.TYPE_TOGGLE = 2;\n\n/**\n * Constant: OpenLayers.Control.TYPE_TOOL\n */\nOpenLayers.Control.TYPE_TOOL   = 3;\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n */\n\n/**\n * Class: OpenLayers.Control.Attribution\n * The attribution control adds attribution from layers to the map display. \n * It uses 'attribution' property of each layer.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.Attribution = \n  OpenLayers.Class(OpenLayers.Control, {\n    \n    /**\n     * APIProperty: separator\n     * {String} String used to separate layers.\n     */\n    separator: \", \",\n\n    /**\n     * APIProperty: template\n     * {String} Template for the global attribution markup. This has to include the\n     *     substring \"${layers}\", which will be replaced by the layer specific\n     *     attributions, separated by <separator>. The default is \"${layers}\".\n     */\n    template: \"${layers}\",\n\n    /**\n     * APIProperty: layerTemplate\n     * {String} Template for the layer specific attribution. This has to include\n     *     the substrings \"${href}\" and \"${title}\", which will be replaced by\n     *     the layer specific attribution object properties.\n     *     The default is '<a href=\"${href}\" target=\"_blank\">${title}</a>'.\n     */\n    layerTemplate: '<a href=\"${href}\" target=\"_blank\">${title}</a>',\n\n    /**\n     * Constructor: OpenLayers.Control.Attribution \n     * \n     * Parameters:\n     * options - {Object} Options for control.\n     */\n\n    /** \n     * Method: destroy\n     * Destroy control.\n     */\n    destroy: function() {\n        this.map.events.un({\n            \"removelayer\": this.updateAttribution,\n            \"addlayer\": this.updateAttribution,\n            \"changelayer\": this.updateAttribution,\n            \"changebaselayer\": this.updateAttribution,\n            scope: this\n        });\n        \n        OpenLayers.Control.prototype.destroy.apply(this, arguments);\n    },    \n    \n    /**\n     * Method: draw\n     * Initialize control.\n     * \n     * Returns: \n     * {DOMElement} A reference to the DIV DOMElement containing the control\n     */    \n    draw: function() {\n        OpenLayers.Control.prototype.draw.apply(this, arguments);\n        \n        this.map.events.on({\n            'changebaselayer': this.updateAttribution,\n            'changelayer': this.updateAttribution,\n            'addlayer': this.updateAttribution,\n            'removelayer': this.updateAttribution,\n            scope: this\n        });\n        this.updateAttribution();\n        \n        return this.div;    \n    },\n\n    /**\n     * Method: updateAttribution\n     * Update attribution string.\n     */\n    updateAttribution: function() {\n        var attributions = [], attribution;\n        if (this.map && this.map.layers) {\n            for(var i=0, len=this.map.layers.length; i<len; i++) {\n                var layer = this.map.layers[i];\n                if (layer.attribution && layer.getVisibility()) {\n                    attribution = (typeof layer.attribution == \"object\") ?\n                        OpenLayers.String.format(\n                            this.layerTemplate, layer.attribution) :\n                        layer.attribution;\n                    // add attribution only if attribution text is unique\n                    if (OpenLayers.Util.indexOf(\n                                    attributions, attribution) === -1) {\n                        attributions.push( attribution );\n                    }\n                }\n            } \n            this.div.innerHTML = OpenLayers.String.format(this.template, {\n                layers: attributions.join(this.separator)\n            });\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.Attribution\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n */\n\n/**\n * Class: OpenLayers.Control.Button \n * The Button control is a very simple push-button, for use with \n * <OpenLayers.Control.Panel>.\n * When clicked, the function trigger() is executed.\n * \n * Inherits from:\n *  - <OpenLayers.Control>\n *\n * Use:\n * (code)\n * var button = new OpenLayers.Control.Button({\n *     displayClass: \"MyButton\", trigger: myFunction\n * });\n * panel.addControls([button]);\n * (end)\n * \n * Will create a button with CSS class MyButtonItemInactive, that\n *     will call the function MyFunction() when clicked.\n */\nOpenLayers.Control.Button = OpenLayers.Class(OpenLayers.Control, {\n    /**\n     * Property: type\n     * {Integer} OpenLayers.Control.TYPE_BUTTON.\n     */\n    type: OpenLayers.Control.TYPE_BUTTON,\n    \n    /**\n     * Method: trigger\n     * Called by a control panel when the button is clicked.\n     */\n    trigger: function() {},\n\n    CLASS_NAME: \"OpenLayers.Control.Button\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n */\n\n/**\n * Class: OpenLayers.Control.CacheRead\n * A control for using image tiles cached with <OpenLayers.Control.CacheWrite>\n * from the browser's local storage.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.CacheRead = OpenLayers.Class(OpenLayers.Control, {\n    \n    /**\n     * APIProperty: fetchEvent\n     * {String} The layer event to listen to for replacing remote resource tile\n     *     URLs with cached data URIs. Supported values are \"tileerror\" (try\n     *     remote first, fall back to cached) and \"tileloadstart\" (try cache\n     *     first, fall back to remote). Default is \"tileloadstart\".\n     *\n     *     Note that \"tileerror\" will not work for CORS enabled images (see\n     *     https://developer.mozilla.org/en/CORS_Enabled_Image), i.e. layers\n     *     configured with a <OpenLayers.Tile.Image.crossOriginKeyword> in\n     *     <OpenLayers.Layer.Grid.tileOptions>.\n     */\n    fetchEvent: \"tileloadstart\",\n    \n    /**\n     * APIProperty: layers\n     * {Array(<OpenLayers.Layer.Grid>)}. Optional. If provided, only these\n     *     layers will receive tiles from the cache.\n     */\n    layers: null,\n    \n    /**\n     * APIProperty: autoActivate\n     * {Boolean} Activate the control when it is added to a map.  Default is\n     *     true.\n     */\n    autoActivate: true,\n\n    /**\n     * Constructor: OpenLayers.Control.CacheRead\n     *\n     * Parameters:\n     * options - {Object} Object with API properties for this control\n     */\n    \n    /** \n     * Method: setMap\n     * Set the map property for the control. \n     * \n     * Parameters:\n     * map - {<OpenLayers.Map>} \n     */\n    setMap: function(map) {\n        OpenLayers.Control.prototype.setMap.apply(this, arguments);\n        var i, layers = this.layers || map.layers;\n        for (i=layers.length-1; i>=0; --i) {\n            this.addLayer({layer: layers[i]});\n        }\n        if (!this.layers) {\n            map.events.on({\n                addlayer: this.addLayer,\n                removeLayer: this.removeLayer,\n                scope: this\n            });\n        }\n    },\n    \n    /**\n     * Method: addLayer\n     * Adds a layer to the control. Once added, tiles requested for this layer\n     *     will be cached.\n     *\n     * Parameters:\n     * evt - {Object} Object with a layer property referencing an\n     *     <OpenLayers.Layer> instance\n     */\n    addLayer: function(evt) {\n        evt.layer.events.register(this.fetchEvent, this, this.fetch);        \n    },\n    \n    /**\n     * Method: removeLayer\n     * Removes a layer from the control. Once removed, tiles requested for this\n     *     layer will no longer be cached.\n     *\n     * Parameters:\n     * evt - {Object} Object with a layer property referencing an\n     *     <OpenLayers.Layer> instance\n     */\n    removeLayer: function(evt) {\n        evt.layer.events.unregister(this.fetchEvent, this, this.fetch);\n    },\n    \n    /**\n     * Method: fetch\n     * Listener to the <fetchEvent> event. Replaces a tile's url with a data\n     * URI from the cache.\n     *\n     * Parameters:\n     * evt - {Object} Event object with a tile property.\n     */\n    fetch: function(evt) {\n        if (this.active && window.localStorage &&\n                evt.tile instanceof OpenLayers.Tile.Image) {\n            var tile = evt.tile,\n                url = tile.url;\n            // deal with modified tile urls when both CacheWrite and CacheRead\n            // are active\n            if (!tile.layer.crossOriginKeyword && OpenLayers.ProxyHost &&\n                    url.indexOf(OpenLayers.ProxyHost) === 0) {\n                url = OpenLayers.Control.CacheWrite.urlMap[url];        \n            }\n            var dataURI = window.localStorage.getItem(\"olCache_\" + url);\n            if (dataURI) {\n                tile.url = dataURI;\n                if (evt.type === \"tileerror\") {\n                    tile.setImgSrc(dataURI);\n                }\n            }\n        }\n    },\n    \n    /**\n     * Method: destroy\n     * The destroy method is used to perform any clean up before the control\n     * is dereferenced.  Typically this is where event listeners are removed\n     * to prevent memory leaks.\n     */\n    destroy: function() {\n        if (this.layers || this.map) {\n            var i, layers = this.layers || this.map.layers;\n            for (i=layers.length-1; i>=0; --i) {\n                this.removeLayer({layer: layers[i]});\n            }\n        }\n        if (this.map) {\n            this.map.events.un({\n                addlayer: this.addLayer,\n                removeLayer: this.removeLayer,\n                scope: this\n            });\n        }\n        OpenLayers.Control.prototype.destroy.apply(this, arguments);\n    },\n    \n    CLASS_NAME: \"OpenLayers.Control.CacheRead\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Request.js\n * @requires OpenLayers/Console.js\n */\n\n/**\n * Class: OpenLayers.Control.CacheWrite\n * A control for caching image tiles in the browser's local storage. The\n * <OpenLayers.Control.CacheRead> control is used to fetch and use the cached\n * tile images.\n *\n * Note: Before using this control on any layer that is not your own, make sure\n * that the terms of service of the tile provider allow local storage of tiles.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.CacheWrite = OpenLayers.Class(OpenLayers.Control, {\n    \n    /** \n     * APIProperty: events\n     * {<OpenLayers.Events>} Events instance for listeners and triggering\n     *     control specific events.\n     *\n     * To register events in the constructor, configure <eventListeners>.\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * control.events.register(type, obj, listener);\n     * (end)\n     *\n     * Supported event types (in addition to those from <OpenLayers.Control.events>):\n     * cachefull - Triggered when the cache is full. Listeners receive an\n     *     object with a tile property as first argument. The tile references\n     *     the tile that couldn't be cached.\n     */\n    \n    /**\n     * APIProperty: eventListeners\n     * {Object} Object with event listeners, keyed by event name. An optional\n     *     scope property defines the scope that listeners will be executed in.\n     */\n\n    /**\n     * APIProperty: layers\n     * {Array(<OpenLayers.Layer.Grid>)}. Optional. If provided, caching\n     *     will be enabled for these layers only, otherwise for all cacheable\n     *     layers.\n     */\n    layers: null,\n    \n    /**\n     * APIProperty: imageFormat\n     * {String} The image format used for caching. The default is \"image/png\".\n     *     Supported formats depend on the user agent. If an unsupported\n     *     <imageFormat> is provided, \"image/png\" will be used. For aerial\n     *     imagery, \"image/jpeg\" is recommended.\n     */\n    imageFormat: \"image/png\",\n    \n    /**\n     * Property: quotaRegEx\n     * {RegExp}\n     */\n    quotaRegEx: (/quota/i),\n    \n    /**\n     * Constructor: OpenLayers.Control.CacheWrite\n     *\n     * Parameters:\n     * options - {Object} Object with API properties for this control.\n     */\n\n    /** \n     * Method: setMap\n     * Set the map property for the control. \n     * \n     * Parameters:\n     * map - {<OpenLayers.Map>} \n     */\n    setMap: function(map) {\n        OpenLayers.Control.prototype.setMap.apply(this, arguments);\n        var i, layers = this.layers || map.layers;\n        for (i=layers.length-1; i>=0; --i) {\n            this.addLayer({layer: layers[i]});\n        }\n        if (!this.layers) {\n            map.events.on({\n                addlayer: this.addLayer,\n                removeLayer: this.removeLayer,\n                scope: this\n            });\n        }\n    },\n    \n    /**\n     * Method: addLayer\n     * Adds a layer to the control. Once added, tiles requested for this layer\n     *     will be cached.\n     *\n     * Parameters:\n     * evt - {Object} Object with a layer property referencing an\n     *     <OpenLayers.Layer> instance\n     */\n    addLayer: function(evt) {\n        evt.layer.events.on({\n            tileloadstart: this.makeSameOrigin,\n            tileloaded: this.onTileLoaded,\n            scope: this\n        });        \n    },\n    \n    /**\n     * Method: removeLayer\n     * Removes a layer from the control. Once removed, tiles requested for this\n     *     layer will no longer be cached.\n     *\n     * Parameters:\n     * evt - {Object} Object with a layer property referencing an\n     *     <OpenLayers.Layer> instance\n     */\n    removeLayer: function(evt) {\n        evt.layer.events.un({\n            tileloadstart: this.makeSameOrigin,\n            tileloaded: this.onTileLoaded,\n            scope: this\n        });\n    },\n\n    /**\n     * Method: makeSameOrigin\n     * If the tile does not have CORS image loading enabled and is from a\n     * different origin, use OpenLayers.ProxyHost to make it a same origin url.\n     *\n     * Parameters:\n     * evt - {<OpenLayers.Event>}\n     */\n    makeSameOrigin: function(evt) {\n        if (this.active) {\n            var tile = evt.tile;\n            if (tile instanceof OpenLayers.Tile.Image &&\n                    !tile.crossOriginKeyword &&\n                    tile.url.substr(0, 5) !== \"data:\") {\n                var sameOriginUrl = OpenLayers.Request.makeSameOrigin(\n                    tile.url, OpenLayers.ProxyHost\n                );\n                OpenLayers.Control.CacheWrite.urlMap[sameOriginUrl] = tile.url;\n                tile.url = sameOriginUrl;\n            }\n        }\n    },\n    \n    /**\n     * Method: onTileLoaded\n     * Decides whether a tile can be cached and calls the cache method.\n     *\n     * Parameters:\n     * evt - {Event}\n     */\n    onTileLoaded: function(evt) {\n        if (this.active && !evt.aborted &&\n                evt.tile instanceof OpenLayers.Tile.Image &&\n                evt.tile.url.substr(0, 5) !== 'data:') {\n            this.cache({tile: evt.tile});\n            delete OpenLayers.Control.CacheWrite.urlMap[evt.tile.url];\n        }\n    },\n    \n    /**\n     * Method: cache\n     * Adds a tile to the cache. When the cache is full, the \"cachefull\" event\n     * is triggered.\n     *\n     * Parameters:\n     * obj - {Object} Object with a tile property, tile being the\n     *     <OpenLayers.Tile.Image> with the data to add to the cache\n     */\n    cache: function(obj) {\n        if (window.localStorage) {\n            var tile = obj.tile;\n            try {\n                var canvasContext = tile.getCanvasContext();\n                if (canvasContext) {\n                    var urlMap = OpenLayers.Control.CacheWrite.urlMap;\n                    var url = urlMap[tile.url] || tile.url;\n                    window.localStorage.setItem(\n                        \"olCache_\" + url,\n                        canvasContext.canvas.toDataURL(this.imageFormat)\n                    );\n                }\n            } catch(e) {\n                // local storage full or CORS violation\n                var reason = e.name || e.message;\n                if (reason && this.quotaRegEx.test(reason)) {\n                    this.events.triggerEvent(\"cachefull\", {tile: tile});\n                } else {\n                    OpenLayers.Console.error(e.toString());\n                }\n            }\n        }\n    },\n    \n    /**\n     * Method: destroy\n     * The destroy method is used to perform any clean up before the control\n     * is dereferenced.  Typically this is where event listeners are removed\n     * to prevent memory leaks.\n     */\n    destroy: function() {\n        if (this.layers || this.map) {\n            var i, layers = this.layers || this.map.layers;\n            for (i=layers.length-1; i>=0; --i) {\n                this.removeLayer({layer: layers[i]});\n            }\n        }\n        if (this.map) {\n            this.map.events.un({\n                addlayer: this.addLayer,\n                removeLayer: this.removeLayer,\n                scope: this\n            });\n        }\n        OpenLayers.Control.prototype.destroy.apply(this, arguments);\n    },\n    \n    CLASS_NAME: \"OpenLayers.Control.CacheWrite\"\n});\n\n/**\n * APIFunction: OpenLayers.Control.CacheWrite.clearCache\n * Clears all tiles cached with <OpenLayers.Control.CacheWrite> from the cache.\n */\nOpenLayers.Control.CacheWrite.clearCache = function() {\n    if (!window.localStorage) { return; }\n    var i, key;\n    for (i=window.localStorage.length-1; i>=0; --i) {\n        key = window.localStorage.key(i);\n        if (key.substr(0, 8) === \"olCache_\") {\n            window.localStorage.removeItem(key);\n        }\n    }\n};\n\n/**\n * Property: OpenLayers.Control.CacheWrite.urlMap\n * {Object} Mapping of same origin urls to cache url keys. Entries will be\n *     deleted as soon as a tile was cached.\n */\nOpenLayers.Control.CacheWrite.urlMap = {};\n\n\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Handler/Box.js\n */\n\n/**\n * Class: OpenLayers.Control.ZoomBox\n * The ZoomBox control enables zooming directly to a given extent, by drawing \n * a box on the map. The box is drawn by holding down shift, whilst dragging \n * the mouse.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.ZoomBox = OpenLayers.Class(OpenLayers.Control, {\n    /**\n     * Property: type\n     * {OpenLayers.Control.TYPE}\n     */\n    type: OpenLayers.Control.TYPE_TOOL,\n\n    /**\n     * Property: out\n     * {Boolean} Should the control be used for zooming out?\n     */\n    out: false,\n\n    /**\n     * APIProperty: keyMask\n     * {Integer} Zoom only occurs if the keyMask matches the combination of \n     *     keys down. Use bitwise operators and one or more of the\n     *     <OpenLayers.Handler> constants to construct a keyMask. Leave null if \n     *     not used mask. Default is null.\n     */\n    keyMask: null,\n\n    /**\n     * APIProperty: alwaysZoom\n     * {Boolean} Always zoom in/out when box drawn, even if the zoom level does\n     * not change.\n     */\n    alwaysZoom: false,\n    \n    /**\n     * APIProperty: zoomOnClick\n     * {Boolean} Should we zoom when no box was dragged, i.e. the user only\n     * clicked? Default is true.\n     */\n    zoomOnClick: true,\n\n    /**\n     * Method: draw\n     */    \n    draw: function() {\n        this.handler = new OpenLayers.Handler.Box( this,\n                            {done: this.zoomBox}, {keyMask: this.keyMask} );\n    },\n\n    /**\n     * Method: zoomBox\n     *\n     * Parameters:\n     * position - {<OpenLayers.Bounds>} or {<OpenLayers.Pixel>}\n     */\n    zoomBox: function (position) {\n        if (position instanceof OpenLayers.Bounds) {\n            var bounds,\n                targetCenterPx = position.getCenterPixel();\n            if (!this.out) {\n                var minXY = this.map.getLonLatFromPixel({\n                    x: position.left,\n                    y: position.bottom\n                });\n                var maxXY = this.map.getLonLatFromPixel({\n                    x: position.right,\n                    y: position.top\n                });\n                bounds = new OpenLayers.Bounds(minXY.lon, minXY.lat,\n                                               maxXY.lon, maxXY.lat);\n            } else {\n                var pixWidth = position.right - position.left;\n                var pixHeight = position.bottom - position.top;\n                var zoomFactor = Math.min((this.map.size.h / pixHeight),\n                    (this.map.size.w / pixWidth));\n                var extent = this.map.getExtent();\n                var center = this.map.getLonLatFromPixel(targetCenterPx);\n                var xmin = center.lon - (extent.getWidth()/2)*zoomFactor;\n                var xmax = center.lon + (extent.getWidth()/2)*zoomFactor;\n                var ymin = center.lat - (extent.getHeight()/2)*zoomFactor;\n                var ymax = center.lat + (extent.getHeight()/2)*zoomFactor;\n                bounds = new OpenLayers.Bounds(xmin, ymin, xmax, ymax);\n            }\n            // always zoom in/out \n            var lastZoom = this.map.getZoom(),\n                size = this.map.getSize(),\n                centerPx = {x: size.w / 2, y: size.h / 2},\n                zoom = this.map.getZoomForExtent(bounds),\n                oldRes = this.map.getResolution(),\n                newRes = this.map.getResolutionForZoom(zoom);\n            if (oldRes == newRes) {\n                this.map.setCenter(this.map.getLonLatFromPixel(targetCenterPx));\n            } else {\n              var zoomOriginPx = {\n                    x: (oldRes * targetCenterPx.x - newRes * centerPx.x) /\n                        (oldRes - newRes),\n                    y: (oldRes * targetCenterPx.y - newRes * centerPx.y) /\n                        (oldRes - newRes)\n                };\n                this.map.zoomTo(zoom, zoomOriginPx);\n            }\n            if (lastZoom == this.map.getZoom() && this.alwaysZoom == true){ \n                this.map.zoomTo(lastZoom + (this.out ? -1 : 1)); \n            }\n        } else if (this.zoomOnClick) { // it's a pixel\n            if (!this.out) {\n                this.map.zoomTo(this.map.getZoom() + 1, position);\n            } else {\n                this.map.zoomTo(this.map.getZoom() - 1, position);\n            }\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.ZoomBox\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control/Button.js\n */\n\n/**\n * Class: OpenLayers.Control.ZoomToMaxExtent \n * The ZoomToMaxExtent control is a button that zooms out to the maximum\n * extent of the map. It is designed to be used with a \n * <OpenLayers.Control.Panel>.\n * \n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.ZoomToMaxExtent = OpenLayers.Class(OpenLayers.Control.Button, {\n\n    /**\n     * Method: trigger\n     * \n     * Called whenever this control is being rendered inside of a panel and a \n     *     click occurs on this controls element. Actually zooms to the maximum\n     *     extent of this controls map.\n     */\n    trigger: function() {\n        if (this.map) {\n            this.map.zoomToMaxExtent();\n        }    \n    },\n\n    CLASS_NAME: \"OpenLayers.Control.ZoomToMaxExtent\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Handler/Drag.js\n */\n\n/**\n * Class: OpenLayers.Control.DragPan\n * The DragPan control pans the map with a drag of the mouse.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.DragPan = OpenLayers.Class(OpenLayers.Control, {\n\n    /** \n     * Property: type\n     * {OpenLayers.Control.TYPES}\n     */\n    type: OpenLayers.Control.TYPE_TOOL,\n    \n    /**\n     * Property: panned\n     * {Boolean} The map moved.\n     */\n    panned: false,\n    \n    /**\n     * Property: interval\n     * {Integer} The number of milliseconds that should ellapse before\n     *     panning the map again. Defaults to 0 milliseconds, which means that\n     *     no separate cycle is used for panning. In most cases you won't want\n     *     to change this value. For slow machines/devices larger values can be\n     *     tried out.\n     */\n    interval: 0,\n    \n    /**\n     * APIProperty: documentDrag\n     * {Boolean} If set to true, mouse dragging will continue even if the\n     *     mouse cursor leaves the map viewport. Default is false.\n     */\n    documentDrag: false,\n\n    /**\n     * Property: kinetic\n     * {<OpenLayers.Kinetic>} The OpenLayers.Kinetic object.\n     */\n    kinetic: null,\n\n    /**\n     * APIProperty: enableKinetic\n     * {Boolean} Set this option to enable \"kinetic dragging\". Can be\n     *     set to true or to an object. If set to an object this\n     *     object will be passed to the {<OpenLayers.Kinetic>}\n     *     constructor. Defaults to true.\n     *     To get kinetic dragging, ensure that OpenLayers/Kinetic.js is\n     *     included in your build config.\n     */\n    enableKinetic: true,\n\n    /**\n     * APIProperty: kineticInterval\n     * {Integer} Interval in milliseconds between 2 steps in the \"kinetic\n     *     scrolling\". Applies only if enableKinetic is set. Defaults\n     *     to 10 milliseconds.\n     */\n    kineticInterval: 10,\n\n\n    /**\n     * Method: draw\n     * Creates a Drag handler, using <panMap> and\n     * <panMapDone> as callbacks.\n     */    \n    draw: function() {\n        if (this.enableKinetic && OpenLayers.Kinetic) {\n            var config = {interval: this.kineticInterval};\n            if(typeof this.enableKinetic === \"object\") {\n                config = OpenLayers.Util.extend(config, this.enableKinetic);\n            }\n            this.kinetic = new OpenLayers.Kinetic(config);\n        }\n        this.handler = new OpenLayers.Handler.Drag(this, {\n                \"move\": this.panMap,\n                \"done\": this.panMapDone,\n                \"down\": this.panMapStart\n            }, {\n                interval: this.interval,\n                documentDrag: this.documentDrag\n            }\n        );\n    },\n\n    /**\n     * Method: panMapStart\n     */\n    panMapStart: function() {\n        if(this.kinetic) {\n            this.kinetic.begin();\n        }\n    },\n\n    /**\n    * Method: panMap\n    *\n    * Parameters:\n    * xy - {<OpenLayers.Pixel>} Pixel of the mouse position\n    */\n    panMap: function(xy) {\n        if(this.kinetic) {\n            this.kinetic.update(xy);\n        }\n        this.panned = true;\n        this.map.pan(\n            this.handler.last.x - xy.x,\n            this.handler.last.y - xy.y,\n            {dragging: true, animate: false}\n        );\n    },\n    \n    /**\n     * Method: panMapDone\n     * Finish the panning operation.  Only call setCenter (through <panMap>)\n     *     if the map has actually been moved.\n     *\n     * Parameters:\n     * xy - {<OpenLayers.Pixel>} Pixel of the mouse position\n     */\n    panMapDone: function(xy) {\n        if(this.panned) {\n            var res = null;\n            if (this.kinetic) {\n                res = this.kinetic.end(xy);\n            }\n            this.map.pan(\n                this.handler.last.x - xy.x,\n                this.handler.last.y - xy.y,\n                {dragging: !!res, animate: false}\n            );\n            if (res) {\n                var self = this;\n                this.kinetic.move(res, function(x, y, end) {\n                    self.map.pan(x, y, {dragging: !end, animate: false});\n                });\n            }\n            this.panned = false;\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.DragPan\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control/ZoomBox.js\n * @requires OpenLayers/Control/DragPan.js\n * @requires OpenLayers/Handler/MouseWheel.js\n * @requires OpenLayers/Handler/Click.js\n */\n\n/**\n * Class: OpenLayers.Control.Navigation\n * The navigation control handles map browsing with mouse events (dragging,\n *     double-clicking, and scrolling the wheel).  Create a new navigation \n *     control with the <OpenLayers.Control.Navigation> control.  \n * \n *     Note that this control is added to the map by default (if no controls \n *     array is sent in the options object to the <OpenLayers.Map> \n *     constructor).\n * \n * Inherits:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.Navigation = OpenLayers.Class(OpenLayers.Control, {\n\n    /** \n     * Property: dragPan\n     * {<OpenLayers.Control.DragPan>} \n     */\n    dragPan: null,\n\n    /**\n     * APIProperty: dragPanOptions\n     * {Object} Options passed to the DragPan control.\n     */\n    dragPanOptions: null,\n\n    /**\n     * Property: pinchZoom\n     * {<OpenLayers.Control.PinchZoom>}\n     */\n    pinchZoom: null,\n\n    /**\n     * APIProperty: pinchZoomOptions\n     * {Object} Options passed to the PinchZoom control.\n     */\n    pinchZoomOptions: null,\n\n    /**\n     * APIProperty: documentDrag\n     * {Boolean} Allow panning of the map by dragging outside map viewport.\n     *     Default is false.\n     */\n    documentDrag: false,\n\n    /** \n     * Property: zoomBox\n     * {<OpenLayers.Control.ZoomBox>}\n     */\n    zoomBox: null,\n\n    /**\n     * APIProperty: zoomBoxEnabled\n     * {Boolean} Whether the user can draw a box to zoom\n     */\n    zoomBoxEnabled: true, \n\n    /**\n     * APIProperty: zoomWheelEnabled\n     * {Boolean} Whether the mousewheel should zoom the map\n     */\n    zoomWheelEnabled: true,\n    \n    /**\n     * Property: mouseWheelOptions\n     * {Object} Options passed to the MouseWheel control (only useful if\n     *     <zoomWheelEnabled> is set to true). Default is no options for maps\n     *     with fractionalZoom set to true, otherwise\n     *     {cumulative: false, interval: 50, maxDelta: 6} \n     */\n    mouseWheelOptions: null,\n\n    /**\n     * APIProperty: handleRightClicks\n     * {Boolean} Whether or not to handle right clicks. Default is false.\n     */\n    handleRightClicks: false,\n\n    /**\n     * APIProperty: zoomBoxKeyMask\n     * {Integer} <OpenLayers.Handler> key code of the key, which has to be\n     *    pressed, while drawing the zoom box with the mouse on the screen. \n     *    You should probably set handleRightClicks to true if you use this\n     *    with MOD_CTRL, to disable the context menu for machines which use\n     *    CTRL-Click as a right click.\n     * Default: <OpenLayers.Handler.MOD_SHIFT>\n     */\n    zoomBoxKeyMask: OpenLayers.Handler.MOD_SHIFT,\n    \n    /**\n     * APIProperty: autoActivate\n     * {Boolean} Activate the control when it is added to a map.  Default is\n     *     true.\n     */\n    autoActivate: true,\n\n    /**\n     * Constructor: OpenLayers.Control.Navigation\n     * Create a new navigation control\n     * \n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *                    the control\n     */\n    initialize: function(options) {\n        this.handlers = {};\n        OpenLayers.Control.prototype.initialize.apply(this, arguments);\n    },\n\n    /**\n     * Method: destroy\n     * The destroy method is used to perform any clean up before the control\n     * is dereferenced.  Typically this is where event listeners are removed\n     * to prevent memory leaks.\n     */\n    destroy: function() {\n        this.deactivate();\n\n        if (this.dragPan) {\n            this.dragPan.destroy();\n        }\n        this.dragPan = null;\n\n        if (this.zoomBox) {\n            this.zoomBox.destroy();\n        }\n        this.zoomBox = null;\n\n        if (this.pinchZoom) {\n            this.pinchZoom.destroy();\n        }\n        this.pinchZoom = null;\n\n        OpenLayers.Control.prototype.destroy.apply(this,arguments);\n    },\n    \n    /**\n     * Method: activate\n     */\n    activate: function() {\n        this.dragPan.activate();\n        if (this.zoomWheelEnabled) {\n            this.handlers.wheel.activate();\n        }    \n        this.handlers.click.activate();\n        if (this.zoomBoxEnabled) {\n            this.zoomBox.activate();\n        }\n        if (this.pinchZoom) {\n            this.pinchZoom.activate();\n        }\n        return OpenLayers.Control.prototype.activate.apply(this,arguments);\n    },\n\n    /**\n     * Method: deactivate\n     */\n    deactivate: function() {\n        if (this.pinchZoom) {\n            this.pinchZoom.deactivate();\n        }\n        this.zoomBox.deactivate();\n        this.dragPan.deactivate();\n        this.handlers.click.deactivate();\n        this.handlers.wheel.deactivate();\n        return OpenLayers.Control.prototype.deactivate.apply(this,arguments);\n    },\n    \n    /**\n     * Method: draw\n     */\n    draw: function() {\n        // disable right mouse context menu for support of right click events\n        if (this.handleRightClicks) {\n            this.map.viewPortDiv.oncontextmenu = OpenLayers.Function.False;\n        }\n\n        var clickCallbacks = { \n            'click': this.defaultClick,\n            'dblclick': this.defaultDblClick, \n            'dblrightclick': this.defaultDblRightClick \n        };\n        var clickOptions = {\n            'double': true, \n            'stopDouble': true\n        };\n        this.handlers.click = new OpenLayers.Handler.Click(\n            this, clickCallbacks, clickOptions\n        );\n        this.dragPan = new OpenLayers.Control.DragPan(\n            OpenLayers.Util.extend({\n                map: this.map,\n                documentDrag: this.documentDrag\n            }, this.dragPanOptions)\n        );\n        this.zoomBox = new OpenLayers.Control.ZoomBox(\n                    {map: this.map, keyMask: this.zoomBoxKeyMask});\n        this.dragPan.draw();\n        this.zoomBox.draw();\n        var wheelOptions = this.map.fractionalZoom ? {} : {\n            cumulative: false,\n            interval: 50,\n            maxDelta: 6\n        };\n        this.handlers.wheel = new OpenLayers.Handler.MouseWheel(\n            this, {up : this.wheelUp, down: this.wheelDown},\n            OpenLayers.Util.extend(wheelOptions, this.mouseWheelOptions)\n        );\n        if (OpenLayers.Control.PinchZoom) {\n            this.pinchZoom = new OpenLayers.Control.PinchZoom(\n                OpenLayers.Util.extend(\n                    {map: this.map}, this.pinchZoomOptions));\n        }\n    },\n\n    /**\n     * Method: defaultClick\n     *\n     * Parameters:\n     * evt - {Event}\n     */\n    defaultClick: function (evt) {\n        if (evt.lastTouches && evt.lastTouches.length == 2) {\n            this.map.zoomOut();\n        }\n    },\n\n    /**\n     * Method: defaultDblClick \n     * \n     * Parameters:\n     * evt - {Event} \n     */\n    defaultDblClick: function (evt) {\n        this.map.zoomTo(this.map.zoom + 1, evt.xy);\n    },\n\n    /**\n     * Method: defaultDblRightClick \n     * \n     * Parameters:\n     * evt - {Event} \n     */\n    defaultDblRightClick: function (evt) {\n        this.map.zoomTo(this.map.zoom - 1, evt.xy);\n    },\n    \n    /**\n     * Method: wheelChange  \n     *\n     * Parameters:\n     * evt - {Event}\n     * deltaZ - {Integer}\n     */\n    wheelChange: function(evt, deltaZ) {\n        if (!this.map.fractionalZoom) {\n            deltaZ =  Math.round(deltaZ);\n        }\n        var currentZoom = this.map.getZoom(),\n            newZoom = currentZoom + deltaZ;\n        newZoom = Math.max(newZoom, 0);\n        newZoom = Math.min(newZoom, this.map.getNumZoomLevels());\n        if (newZoom === currentZoom) {\n            return;\n        }\n        this.map.zoomTo(newZoom, evt.xy);\n    },\n\n    /** \n     * Method: wheelUp\n     * User spun scroll wheel up\n     * \n     * Parameters:\n     * evt - {Event}\n     * delta - {Integer}\n     */\n    wheelUp: function(evt, delta) {\n        this.wheelChange(evt, delta || 1);\n    },\n\n    /** \n     * Method: wheelDown\n     * User spun scroll wheel down\n     * \n     * Parameters:\n     * evt - {Event}\n     * delta - {Integer}\n     */\n    wheelDown: function(evt, delta) {\n        this.wheelChange(evt, delta || -1);\n    },\n    \n    /**\n     * Method: disableZoomBox\n     */\n    disableZoomBox : function() {\n        this.zoomBoxEnabled = false;\n        this.zoomBox.deactivate();       \n    },\n    \n    /**\n     * Method: enableZoomBox\n     */\n    enableZoomBox : function() {\n        this.zoomBoxEnabled = true;\n        if (this.active) {\n            this.zoomBox.activate();\n        }    \n    },\n    \n    /**\n     * Method: disableZoomWheel\n     */\n    \n    disableZoomWheel : function() {\n        this.zoomWheelEnabled = false;\n        this.handlers.wheel.deactivate();       \n    },\n    \n    /**\n     * Method: enableZoomWheel\n     */\n    \n    enableZoomWheel : function() {\n        this.zoomWheelEnabled = true;\n        if (this.active) {\n            this.handlers.wheel.activate();\n        }    \n    },\n\n    CLASS_NAME: \"OpenLayers.Control.Navigation\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Handler/Pinch.js\n */\n\n/**\n * Class: OpenLayers.Control.PinchZoom\n *\n * Inherits:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.PinchZoom = OpenLayers.Class(OpenLayers.Control, {\n\n    /** \n     * Property: type\n     * {OpenLayers.Control.TYPES}\n     */\n    type: OpenLayers.Control.TYPE_TOOL,\n\n    /**\n     * Property: pinchOrigin\n     * {Object} Cached object representing the pinch start (in pixels).\n     */\n    pinchOrigin: null,    \n    \n    /**\n     * Property: currentCenter\n     * {Object} Cached object representing the latest pinch center (in pixels).\n     */\n    currentCenter: null,    \n\n    /**\n     * APIProperty: autoActivate\n     * {Boolean} Activate the control when it is added to a map.  Default is\n     *     true.\n     */\n    autoActivate: true,\n\n    /**\n     * APIProperty: preserveCenter\n     * {Boolean} Set this to true if you don't want the map center to change\n     *     while pinching. For example you may want to set preserveCenter to\n     *     true when the user location is being watched and you want to preserve\n     *     the user location at the center of the map even if he zooms in or\n     *     out using pinch. This property's value can be changed any time on an\n     *     existing instance. Default is false.\n     */\n    preserveCenter: false,\n    \n    /**\n     * APIProperty: handlerOptions\n     * {Object} Used to set non-default properties on the pinch handler\n     */\n\n    /**\n     * Constructor: OpenLayers.Control.PinchZoom\n     * Create a control for zooming with pinch gestures.  This works on devices\n     *     with multi-touch support.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *                    the control\n     */\n    initialize: function(options) {\n        OpenLayers.Control.prototype.initialize.apply(this, arguments);\n        this.handler = new OpenLayers.Handler.Pinch(this, {\n            start: this.pinchStart,\n            move: this.pinchMove,\n            done: this.pinchDone\n        }, this.handlerOptions);\n    },\n    \n    /**\n     * Method: pinchStart\n     *\n     * Parameters:\n     * evt - {Event}\n     * pinchData - {Object} pinch data object related to the current touchmove\n     *     of the pinch gesture. This give us the current scale of the pinch.\n     */\n    pinchStart: function(evt, pinchData) {\n        var xy = (this.preserveCenter) ?\n            this.map.getPixelFromLonLat(this.map.getCenter()) : evt.xy;\n        this.pinchOrigin = xy;\n        this.currentCenter = xy;\n    },\n    \n    /**\n     * Method: pinchMove\n     *\n     * Parameters:\n     * evt - {Event}\n     * pinchData - {Object} pinch data object related to the current touchmove\n     *     of the pinch gesture. This give us the current scale of the pinch.\n     */\n    pinchMove: function(evt, pinchData) {\n        var scale = pinchData.scale;\n        var containerOrigin = this.map.layerContainerOriginPx;\n        var pinchOrigin = this.pinchOrigin;\n        var current = (this.preserveCenter) ?\n            this.map.getPixelFromLonLat(this.map.getCenter()) : evt.xy;\n\n        var dx = Math.round((containerOrigin.x + current.x - pinchOrigin.x) + (scale - 1) * (containerOrigin.x - pinchOrigin.x));\n        var dy = Math.round((containerOrigin.y + current.y - pinchOrigin.y) + (scale - 1) * (containerOrigin.y - pinchOrigin.y));\n\n        this.map.applyTransform(dx, dy, scale);\n        this.currentCenter = current;\n    },\n\n    /**\n     * Method: pinchDone\n     *\n     * Parameters:\n     * evt - {Event}\n     * start - {Object} pinch data object related to the touchstart event that\n     *     started the pinch gesture.\n     * last - {Object} pinch data object related to the last touchmove event\n     *     of the pinch gesture. This give us the final scale of the pinch.\n     */\n    pinchDone: function(evt, start, last) {\n        this.map.applyTransform();\n        var zoom = this.map.getZoomForResolution(this.map.getResolution() / last.scale, true);\n        if (zoom !== this.map.getZoom() || !this.currentCenter.equals(this.pinchOrigin)) {\n            var resolution = this.map.getResolutionForZoom(zoom);\n\n            var location = this.map.getLonLatFromPixel(this.pinchOrigin);\n            var zoomPixel = this.currentCenter;        \n            var size = this.map.getSize();\n\n            location.lon += resolution * ((size.w / 2) - zoomPixel.x);\n            location.lat -= resolution * ((size.h / 2) - zoomPixel.y);\n\n            // Force a reflow before calling setCenter. This is to work\n            // around an issue occurring in iOS.\n            //\n            // See https://github.com/openlayers/ol2/pull/351.\n            //\n            // Without a reflow setting the layer container div's top left\n            // style properties to \"0px\" - as done in Map.moveTo when zoom\n            // is changed - won't actually correctly reposition the layer\n            // container div.\n            //\n            // Also, we need to use a statement that the Google Closure\n            // compiler won't optimize away.\n            this.map.div.clientWidth = this.map.div.clientWidth;\n\n            this.map.setCenter(location, zoom);\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.PinchZoom\"\n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control/DragPan.js\n * @requires OpenLayers/Control/PinchZoom.js\n * @requires OpenLayers/Handler/Click.js\n */\n\n/**\n * Class: OpenLayers.Control.TouchNavigation\n * The navigation control handles map browsing with touch events (dragging,\n *     double-tapping, tap with two fingers, and pinch zoom).  Create a new \n *     control with the <OpenLayers.Control.TouchNavigation> constructor.\n *\n * If you\u2019re only targeting touch enabled devices with your mapping application,\n *     you can create a map with only a TouchNavigation control. The \n *     <OpenLayers.Control.Navigation> control is mobile ready by default, but \n *     you can generate a smaller build of the library by only including this\n *     touch navigation control if you aren't concerned about mouse interaction.\n *\n * Inherits:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.TouchNavigation = OpenLayers.Class(OpenLayers.Control, {\n\n    /**\n     * Property: dragPan\n     * {<OpenLayers.Control.DragPan>}\n     */\n    dragPan: null,\n\n    /**\n     * APIProperty: dragPanOptions\n     * {Object} Options passed to the DragPan control.\n     */\n    dragPanOptions: null,\n\n    /**\n     * Property: pinchZoom\n     * {<OpenLayers.Control.PinchZoom>}\n     */\n    pinchZoom: null,\n\n    /**\n     * APIProperty: pinchZoomOptions\n     * {Object} Options passed to the PinchZoom control.\n     */\n    pinchZoomOptions: null,\n\n    /**\n     * APIProperty: clickHandlerOptions\n     * {Object} Options passed to the Click handler.\n     */\n    clickHandlerOptions: null,\n\n    /**\n     * APIProperty: documentDrag\n     * {Boolean} Allow panning of the map by dragging outside map viewport.\n     *     Default is false.\n     */\n    documentDrag: false,\n\n    /**\n     * APIProperty: autoActivate\n     * {Boolean} Activate the control when it is added to a map.  Default is\n     *     true.\n     */\n    autoActivate: true,\n\n    /**\n     * Constructor: OpenLayers.Control.TouchNavigation\n     * Create a new navigation control\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *                    the control\n     */\n    initialize: function(options) {\n        this.handlers = {};\n        OpenLayers.Control.prototype.initialize.apply(this, arguments);\n    },\n\n    /**\n     * Method: destroy\n     * The destroy method is used to perform any clean up before the control\n     * is dereferenced.  Typically this is where event listeners are removed\n     * to prevent memory leaks.\n     */\n    destroy: function() {\n        this.deactivate();\n        if(this.dragPan) {\n            this.dragPan.destroy();\n        }\n        this.dragPan = null;\n        if (this.pinchZoom) {\n            this.pinchZoom.destroy();\n            delete this.pinchZoom;\n        }\n        OpenLayers.Control.prototype.destroy.apply(this,arguments);\n    },\n\n    /**\n     * Method: activate\n     */\n    activate: function() {\n        if(OpenLayers.Control.prototype.activate.apply(this,arguments)) {\n            this.dragPan.activate();\n            this.handlers.click.activate();\n            this.pinchZoom.activate();\n            return true;\n        }\n        return false;\n    },\n\n    /**\n     * Method: deactivate\n     */\n    deactivate: function() {\n        if(OpenLayers.Control.prototype.deactivate.apply(this,arguments)) {\n            this.dragPan.deactivate();\n            this.handlers.click.deactivate();\n            this.pinchZoom.deactivate();\n            return true;\n        }\n        return false;\n    },\n    \n    /**\n     * Method: draw\n     */\n    draw: function() {\n        var clickCallbacks = {\n            click: this.defaultClick,\n            dblclick: this.defaultDblClick\n        };\n        var clickOptions = OpenLayers.Util.extend({\n            \"double\": true,\n            stopDouble: true,\n            pixelTolerance: 2\n        }, this.clickHandlerOptions);\n        this.handlers.click = new OpenLayers.Handler.Click(\n            this, clickCallbacks, clickOptions\n        );\n        this.dragPan = new OpenLayers.Control.DragPan(\n            OpenLayers.Util.extend({\n                map: this.map,\n                documentDrag: this.documentDrag\n            }, this.dragPanOptions)\n        );\n        this.dragPan.draw();\n        this.pinchZoom = new OpenLayers.Control.PinchZoom(\n            OpenLayers.Util.extend({map: this.map}, this.pinchZoomOptions)\n        );\n    },\n\n    /**\n     * Method: defaultClick\n     *\n     * Parameters:\n     * evt - {Event}\n     */\n    defaultClick: function (evt) {\n        if(evt.lastTouches && evt.lastTouches.length == 2) {\n            this.map.zoomOut();\n        }\n    },\n\n    /**\n     * Method: defaultDblClick\n     *\n     * Parameters:\n     * evt - {Event}\n     */\n    defaultDblClick: function (evt) {\n        this.map.zoomTo(this.map.zoom + 1, evt.xy);\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.TouchNavigation\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Control.js\n */\n\n/**\n * Class: OpenLayers.Control.MousePosition\n * The MousePosition control displays geographic coordinates of the mouse\n * pointer, as it is moved about the map.\n *\n * You can use the <prefix>- or <suffix>-properties to provide more information\n * about the displayed coordinates to the user:\n *\n * (code)\n *     var mousePositionCtrl = new OpenLayers.Control.MousePosition({\n *         prefix: '<a target=\"_blank\" ' +\n *             'href=\"http://spatialreference.org/ref/epsg/4326/\">' +\n *             'EPSG:4326</a> coordinates: '\n *         }\n *     );\n * (end code)\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.MousePosition = OpenLayers.Class(OpenLayers.Control, {\n\n    /**\n     * APIProperty: autoActivate\n     * {Boolean} Activate the control when it is added to a map.  Default is\n     *     true.\n     */\n    autoActivate: true,\n\n    /**\n     * Property: element\n     * {DOMElement}\n     */\n    element: null,\n\n    /**\n     * APIProperty: prefix\n     * {String} A string to be prepended to the current pointers coordinates\n     *     when it is rendered.  Defaults to the empty string ''.\n     */\n    prefix: '',\n\n    /**\n     * APIProperty: separator\n     * {String} A string to be used to separate the two coordinates from each\n     *     other.  Defaults to the string ', ', which will result in a\n     *     rendered coordinate of e.g. '42.12, 21.22'.\n     */\n    separator: ', ',\n\n    /**\n     * APIProperty: suffix\n     * {String} A string to be appended to the current pointers coordinates\n     *     when it is rendered.  Defaults to the empty string ''.\n     */\n    suffix: '',\n\n    /**\n     * APIProperty: numDigits\n     * {Integer} The number of digits each coordinate shall have when being\n     *     rendered, Defaults to 5.\n     */\n    numDigits: 5,\n\n    /**\n     * APIProperty: granularity\n     * {Integer}\n     */\n    granularity: 10,\n\n    /**\n     * APIProperty: emptyString\n     * {String} Set this to some value to set when the mouse is outside the\n     *     map.\n     */\n    emptyString: null,\n\n    /**\n     * Property: lastXy\n     * {<OpenLayers.Pixel>}\n     */\n    lastXy: null,\n\n    /**\n     * APIProperty: displayProjection\n     * {<OpenLayers.Projection>} The projection in which the mouse position is\n     *     displayed.\n     */\n    displayProjection: null,\n\n    /**\n     * Constructor: OpenLayers.Control.MousePosition\n     *\n     * Parameters:\n     * options - {Object} Options for control.\n     */\n\n    /**\n     * Method: destroy\n     */\n     destroy: function() {\n         this.deactivate();\n         OpenLayers.Control.prototype.destroy.apply(this, arguments);\n     },\n\n    /**\n     * APIMethod: activate\n     */\n    activate: function() {\n        if (OpenLayers.Control.prototype.activate.apply(this, arguments)) {\n            this.map.events.register('mousemove', this, this.redraw);\n            this.map.events.register('mouseout', this, this.reset);\n            this.redraw();\n            return true;\n        } else {\n            return false;\n        }\n    },\n\n    /**\n     * APIMethod: deactivate\n     */\n    deactivate: function() {\n        if (OpenLayers.Control.prototype.deactivate.apply(this, arguments)) {\n            this.map.events.unregister('mousemove', this, this.redraw);\n            this.map.events.unregister('mouseout', this, this.reset);\n            this.element.innerHTML = \"\";\n            return true;\n        } else {\n            return false;\n        }\n    },\n\n    /**\n     * Method: draw\n     * {DOMElement}\n     */\n    draw: function() {\n        OpenLayers.Control.prototype.draw.apply(this, arguments);\n\n        if (!this.element) {\n            this.div.left = \"\";\n            this.div.top = \"\";\n            this.element = this.div;\n        }\n\n        return this.div;\n    },\n\n    /**\n     * Method: redraw\n     */\n    redraw: function(evt) {\n\n        var lonLat;\n\n        if (evt == null) {\n            this.reset();\n            return;\n        } else {\n            if (this.lastXy == null ||\n                Math.abs(evt.xy.x - this.lastXy.x) > this.granularity ||\n                Math.abs(evt.xy.y - this.lastXy.y) > this.granularity)\n            {\n                this.lastXy = evt.xy;\n                return;\n            }\n\n            lonLat = this.map.getLonLatFromPixel(evt.xy);\n            if (!lonLat) {\n                // map has not yet been properly initialized\n                return;\n            }\n            if (this.displayProjection) {\n                lonLat.transform(this.map.getProjectionObject(),\n                                 this.displayProjection );\n            }\n            this.lastXy = evt.xy;\n\n        }\n\n        var newHtml = this.formatOutput(lonLat);\n\n        if (newHtml != this.element.innerHTML) {\n            this.element.innerHTML = newHtml;\n        }\n    },\n\n    /**\n     * Method: reset\n     */\n    reset: function(evt) {\n        if (this.emptyString != null) {\n            this.element.innerHTML = this.emptyString;\n        }\n    },\n\n    /**\n     * Method: formatOutput\n     * Override to provide custom display output\n     *\n     * Parameters:\n     * lonLat - {<OpenLayers.LonLat>} Location to display\n     */\n    formatOutput: function(lonLat) {\n        var digits = parseInt(this.numDigits);\n        var newHtml =\n            this.prefix +\n            lonLat.lon.toFixed(digits) +\n            this.separator +\n            lonLat.lat.toFixed(digits) +\n            this.suffix;\n        return newHtml;\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.MousePosition\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/** \n * @requires OpenLayers/Control.js\n * @requires OpenLayers/BaseTypes.js\n * @requires OpenLayers/Events/buttonclick.js\n * @requires OpenLayers/Map.js\n * @requires OpenLayers/Handler/Click.js\n * @requires OpenLayers/Handler/Drag.js\n */\n\n/**\n * Class: OpenLayers.Control.OverviewMap\n * The OverMap control creates a small overview map, useful to display the \n * extent of a zoomed map and your main map and provide additional \n * navigation options to the User.  By default the overview map is drawn in\n * the lower right corner of the main map. Create a new overview map with the\n * <OpenLayers.Control.OverviewMap> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.OverviewMap = OpenLayers.Class(OpenLayers.Control, {\n\n    /**\n     * Property: element\n     * {DOMElement} The DOM element that contains the overview map\n     */\n    element: null,\n    \n    /**\n     * APIProperty: ovmap\n     * {<OpenLayers.Map>} A reference to the overview map itself.\n     */\n    ovmap: null,\n\n    /**\n     * APIProperty: size\n     * {<OpenLayers.Size>} The overvew map size in pixels.  Note that this is\n     * the size of the map itself - the element that contains the map (default\n     * class name olControlOverviewMapElement) may have padding or other style\n     * attributes added via CSS.\n     */\n    size: {w: 180, h: 90},\n\n    /**\n     * APIProperty: layers\n     * {Array(<OpenLayers.Layer>)} Ordered list of layers in the overview map.\n     * If none are sent at construction, the base layer for the main map is used.\n     */\n    layers: null,\n    \n    /**\n     * APIProperty: minRectSize\n     * {Integer} The minimum width or height (in pixels) of the extent\n     *     rectangle on the overview map.  When the extent rectangle reaches\n     *     this size, it will be replaced depending on the value of the\n     *     <minRectDisplayClass> property.  Default is 15 pixels.\n     */\n    minRectSize: 15,\n    \n    /**\n     * APIProperty: minRectDisplayClass\n     * {String} Replacement style class name for the extent rectangle when\n     *     <minRectSize> is reached.  This string will be suffixed on to the\n     *     displayClass.  Default is \"RectReplacement\".\n     *\n     * Example CSS declaration:\n     * (code)\n     * .olControlOverviewMapRectReplacement {\n     *     overflow: hidden;\n     *     cursor: move;\n     *     background-image: url(\"img/overview_replacement.gif\");\n     *     background-repeat: no-repeat;\n     *     background-position: center;\n     * }\n     * (end)\n     */\n    minRectDisplayClass: \"RectReplacement\",\n\n    /**\n     * APIProperty: minRatio\n     * {Float} The ratio of the overview map resolution to the main map\n     *     resolution at which to zoom farther out on the overview map.\n     */\n    minRatio: 8,\n\n    /**\n     * APIProperty: maxRatio\n     * {Float} The ratio of the overview map resolution to the main map\n     *     resolution at which to zoom farther in on the overview map.\n     */\n    maxRatio: 32,\n    \n    /**\n     * APIProperty: mapOptions\n     * {Object} An object containing any non-default properties to be sent to\n     *     the overview map's map constructor.  These should include any\n     *     non-default options that the main map was constructed with.\n     */\n    mapOptions: null,\n\n    /**\n     * APIProperty: autoPan\n     * {Boolean} Always pan the overview map, so the extent marker remains in\n     *     the center.  Default is false.  If true, when you drag the extent\n     *     marker, the overview map will update itself so the marker returns\n     *     to the center.\n     */\n    autoPan: false,\n    \n    /**\n     * Property: handlers\n     * {Object}\n     */\n    handlers: null,\n\n    /**\n     * Property: resolutionFactor\n     * {Object}\n     */\n    resolutionFactor: 1,\n\n    /**\n     * APIProperty: maximized\n     * {Boolean} Start as maximized (visible). Defaults to false.\n     */\n    maximized: false,\n\n    /**\n     * APIProperty: maximizeTitle\n     * {String}  This property is used for showing a tooltip over the  \n     * maximize div. Defaults to \"\" (no title).\n     */ \n    maximizeTitle: \"\",\n\n    /**\n     * APIProperty: minimizeTitle\n     * {String}  This property is used for showing a tooltip over the  \n     * minimize div. Defaults to \"\" (no title).\n     */ \n    minimizeTitle: \"\",\n\n    /**\n     * Constructor: OpenLayers.Control.OverviewMap\n     * Create a new overview map\n     *\n     * Parameters:\n     * options - {Object} Properties of this object will be set on the overview\n     * map object.  Note, to set options on the map object contained in this\n     * control, set <mapOptions> as one of the options properties.\n     */\n    initialize: function(options) {\n        this.layers = [];\n        this.handlers = {};\n        OpenLayers.Control.prototype.initialize.apply(this, [options]);\n    },\n    \n    /**\n     * APIMethod: destroy\n     * Deconstruct the control\n     */\n    destroy: function() {\n        if (!this.mapDiv) { // we've already been destroyed\n            return;\n        }\n        if (this.handlers.click) {\n            this.handlers.click.destroy();\n        }\n        if (this.handlers.drag) {\n            this.handlers.drag.destroy();\n        }\n\n        this.ovmap && this.ovmap.viewPortDiv.removeChild(this.extentRectangle);\n        this.extentRectangle = null;\n\n        if (this.rectEvents) {\n            this.rectEvents.destroy();\n            this.rectEvents = null;\n        }\n\n        if (this.ovmap) {\n            this.ovmap.destroy();\n            this.ovmap = null;\n        }\n        \n        this.element.removeChild(this.mapDiv);\n        this.mapDiv = null;\n\n        this.div.removeChild(this.element);\n        this.element = null;\n\n        if (this.maximizeDiv) {\n            this.div.removeChild(this.maximizeDiv);\n            this.maximizeDiv = null;\n        }\n        \n        if (this.minimizeDiv) {\n            this.div.removeChild(this.minimizeDiv);\n            this.minimizeDiv = null;\n        }\n\n        this.map.events.un({\n            buttonclick: this.onButtonClick,\n            moveend: this.update,\n            changebaselayer: this.baseLayerDraw,\n            scope: this\n        });\n\n        OpenLayers.Control.prototype.destroy.apply(this, arguments);    \n    },\n\n    /**\n     * Method: draw\n     * Render the control in the browser.\n     */    \n    draw: function() {\n        OpenLayers.Control.prototype.draw.apply(this, arguments);\n        if (this.layers.length === 0) {\n            if (this.map.baseLayer) {\n                var layer = this.map.baseLayer.clone();\n                this.layers = [layer];\n            } else {\n                this.map.events.register(\"changebaselayer\", this, this.baseLayerDraw);\n                return this.div;\n            }\n        }\n\n        // create overview map DOM elements\n        this.element = document.createElement('div');\n        this.element.className = this.displayClass + 'Element';\n        this.element.style.display = 'none';\n\n        this.mapDiv = document.createElement('div');\n        this.mapDiv.style.width = this.size.w + 'px';\n        this.mapDiv.style.height = this.size.h + 'px';\n        this.mapDiv.style.position = 'relative';\n        this.mapDiv.style.overflow = 'hidden';\n        this.mapDiv.id = OpenLayers.Util.createUniqueID('overviewMap');\n        \n        this.extentRectangle = document.createElement('div');\n        this.extentRectangle.style.position = 'absolute';\n        this.extentRectangle.style.zIndex = 1000;  //HACK\n        this.extentRectangle.className = this.displayClass+'ExtentRectangle';\n\n        this.element.appendChild(this.mapDiv);  \n\n        this.div.appendChild(this.element);\n\n        // Optionally add min/max buttons if the control will go in the\n        // map viewport.\n        if(!this.outsideViewport) {\n            this.div.className += \" \" + this.displayClass + 'Container';\n            // maximize button div\n            var img = OpenLayers.Util.getImageLocation('layer-switcher-maximize.png');\n            this.maximizeDiv = OpenLayers.Util.createAlphaImageDiv(\n                                        this.displayClass + 'MaximizeButton', \n                                        null, \n                                        null, \n                                        img, \n                                        'absolute');\n            this.maximizeDiv.style.display = 'none';\n            this.maximizeDiv.className = this.displayClass + 'MaximizeButton olButton';\n            if (this.maximizeTitle) {\n                this.maximizeDiv.title = this.maximizeTitle;\n            }\n            this.div.appendChild(this.maximizeDiv);\n    \n            // minimize button div\n            var img = OpenLayers.Util.getImageLocation('layer-switcher-minimize.png');\n            this.minimizeDiv = OpenLayers.Util.createAlphaImageDiv(\n                                        'OpenLayers_Control_minimizeDiv', \n                                        null, \n                                        null, \n                                        img, \n                                        'absolute');\n            this.minimizeDiv.style.display = 'none';\n            this.minimizeDiv.className = this.displayClass + 'MinimizeButton olButton';\n            if (this.minimizeTitle) {\n                this.minimizeDiv.title = this.minimizeTitle;\n            }\n            this.div.appendChild(this.minimizeDiv);            \n            this.minimizeControl();\n        } else {\n            // show the overview map\n            this.element.style.display = '';\n        }\n        if(this.map.getExtent()) {\n            this.update();\n        }\n        \n        this.map.events.on({\n            buttonclick: this.onButtonClick,\n            moveend: this.update,\n            scope: this\n        });\n        \n        if (this.maximized) {\n            this.maximizeControl();\n        }\n        return this.div;\n    },\n    \n    /**\n     * Method: baseLayerDraw\n     * Draw the base layer - called if unable to complete in the initial draw\n     */\n    baseLayerDraw: function() {\n        this.draw();\n        this.map.events.unregister(\"changebaselayer\", this, this.baseLayerDraw);\n    },\n\n    /**\n     * Method: rectDrag\n     * Handle extent rectangle drag\n     *\n     * Parameters:\n     * px - {<OpenLayers.Pixel>} The pixel location of the drag.\n     */\n    rectDrag: function(px) {\n        var deltaX = this.handlers.drag.last.x - px.x;\n        var deltaY = this.handlers.drag.last.y - px.y;\n        if(deltaX != 0 || deltaY != 0) {\n            var rectTop = this.rectPxBounds.top;\n            var rectLeft = this.rectPxBounds.left;\n            var rectHeight = Math.abs(this.rectPxBounds.getHeight());\n            var rectWidth = this.rectPxBounds.getWidth();\n            // don't allow dragging off of parent element\n            var newTop = Math.max(0, (rectTop - deltaY));\n            newTop = Math.min(newTop,\n                              this.ovmap.size.h - this.hComp - rectHeight);\n            var newLeft = Math.max(0, (rectLeft - deltaX));\n            newLeft = Math.min(newLeft,\n                               this.ovmap.size.w - this.wComp - rectWidth);\n            this.setRectPxBounds(new OpenLayers.Bounds(newLeft,\n                                                       newTop + rectHeight,\n                                                       newLeft + rectWidth,\n                                                       newTop));\n        }\n    },\n    \n    /**\n     * Method: mapDivClick\n     * Handle browser events\n     *\n     * Parameters:\n     * evt - {<OpenLayers.Event>} evt\n     */\n    mapDivClick: function(evt) {\n        var pxCenter = this.rectPxBounds.getCenterPixel();\n        var deltaX = evt.xy.x - pxCenter.x;\n        var deltaY = evt.xy.y - pxCenter.y;\n        var top = this.rectPxBounds.top;\n        var left = this.rectPxBounds.left;\n        var height = Math.abs(this.rectPxBounds.getHeight());\n        var width = this.rectPxBounds.getWidth();\n        var newTop = Math.max(0, (top + deltaY));\n        newTop = Math.min(newTop, this.ovmap.size.h - height);\n        var newLeft = Math.max(0, (left + deltaX));\n        newLeft = Math.min(newLeft, this.ovmap.size.w - width);\n        this.setRectPxBounds(new OpenLayers.Bounds(newLeft,\n                                                   newTop + height,\n                                                   newLeft + width,\n                                                   newTop));\n        this.updateMapToRect();\n    },\n    \n    /**\n     * Method: onButtonClick\n     *\n     * Parameters:\n     * evt - {Event}\n     */\n    onButtonClick: function(evt) {\n        if (evt.buttonElement === this.minimizeDiv) {\n            this.minimizeControl();\n        } else if (evt.buttonElement === this.maximizeDiv) {\n            this.maximizeControl();\n        }\n    },\n\n    /**\n     * Method: maximizeControl\n     * Unhide the control.  Called when the control is in the map viewport.\n     *\n     * Parameters:\n     * e - {<OpenLayers.Event>}\n     */\n    maximizeControl: function(e) {\n        this.element.style.display = '';\n        this.showToggle(false);\n        if (e != null) {\n            OpenLayers.Event.stop(e);                                            \n        }\n    },\n\n    /**\n     * Method: minimizeControl\n     * Hide all the contents of the control, shrink the size, \n     * add the maximize icon\n     * \n     * Parameters:\n     * e - {<OpenLayers.Event>}\n     */\n    minimizeControl: function(e) {\n        this.element.style.display = 'none';\n        this.showToggle(true);\n        if (e != null) {\n            OpenLayers.Event.stop(e);                                            \n        }\n    },\n\n    /**\n     * Method: showToggle\n     * Hide/Show the toggle depending on whether the control is minimized\n     *\n     * Parameters:\n     * minimize - {Boolean} \n     */\n    showToggle: function(minimize) {\n        if (this.maximizeDiv) {\n            this.maximizeDiv.style.display = minimize ? '' : 'none';\n        }\n        if (this.minimizeDiv) {\n            this.minimizeDiv.style.display = minimize ? 'none' : '';\n        }\n    },\n\n    /**\n     * Method: update\n     * Update the overview map after layers move.\n     */\n    update: function() {\n        if(this.ovmap == null) {\n            this.createMap();\n        }\n        \n        if(this.autoPan || !this.isSuitableOverview()) {\n            this.updateOverview();\n        }\n        \n        // update extent rectangle\n        this.updateRectToMap();\n    },\n    \n    /**\n     * Method: isSuitableOverview\n     * Determines if the overview map is suitable given the extent and\n     * resolution of the main map.\n     */\n    isSuitableOverview: function() {\n        var mapExtent = this.map.getExtent();\n        var maxExtent = this.map.getMaxExtent();\n        var testExtent = new OpenLayers.Bounds(\n                                Math.max(mapExtent.left, maxExtent.left),\n                                Math.max(mapExtent.bottom, maxExtent.bottom),\n                                Math.min(mapExtent.right, maxExtent.right),\n                                Math.min(mapExtent.top, maxExtent.top));        \n\n        if (this.ovmap.getProjection() != this.map.getProjection()) {\n            testExtent = testExtent.transform(\n                this.map.getProjectionObject(),\n                this.ovmap.getProjectionObject() );\n        }\n\n        var resRatio = this.ovmap.getResolution() / this.map.getResolution();\n        return ((resRatio > this.minRatio) &&\n                (resRatio <= this.maxRatio) &&\n                (this.ovmap.getExtent().containsBounds(testExtent)));\n    },\n    \n    /**\n     * Method updateOverview\n     * Called by <update> if <isSuitableOverview> returns true\n     */\n    updateOverview: function() {\n        var mapRes = this.map.getResolution();\n        var targetRes = this.ovmap.getResolution();\n        var resRatio = targetRes / mapRes;\n        if(resRatio > this.maxRatio) {\n            // zoom in overview map\n            targetRes = this.minRatio * mapRes;            \n        } else if(resRatio <= this.minRatio) {\n            // zoom out overview map\n            targetRes = this.maxRatio * mapRes;\n        }\n        var center;\n        if (this.ovmap.getProjection() != this.map.getProjection()) {\n            center = this.map.center.clone();\n            center.transform(this.map.getProjectionObject(),\n                this.ovmap.getProjectionObject() );\n        } else {\n            center = this.map.center;\n        }\n        this.ovmap.setCenter(center, this.ovmap.getZoomForResolution(\n            targetRes * this.resolutionFactor));\n        this.updateRectToMap();\n    },\n    \n    /**\n     * Method: createMap\n     * Construct the map that this control contains\n     */\n    createMap: function() {\n        // create the overview map\n        var options = OpenLayers.Util.extend(\n                        {controls: [], maxResolution: 'auto', \n                         fallThrough: false}, this.mapOptions);\n        this.ovmap = new OpenLayers.Map(this.mapDiv, options);\n        this.ovmap.viewPortDiv.appendChild(this.extentRectangle);\n        \n        // prevent ovmap from being destroyed when the page unloads, because\n        // the OverviewMap control has to do this (and does it).\n        OpenLayers.Event.stopObserving(window, 'unload', this.ovmap.unloadDestroy);\n        \n        this.ovmap.addLayers(this.layers);\n        this.ovmap.zoomToMaxExtent();\n        // check extent rectangle border width\n        this.wComp = parseInt(OpenLayers.Element.getStyle(this.extentRectangle,\n                                               'border-left-width')) +\n                     parseInt(OpenLayers.Element.getStyle(this.extentRectangle,\n                                               'border-right-width'));\n        this.wComp = (this.wComp) ? this.wComp : 2;\n        this.hComp = parseInt(OpenLayers.Element.getStyle(this.extentRectangle,\n                                               'border-top-width')) +\n                     parseInt(OpenLayers.Element.getStyle(this.extentRectangle,\n                                               'border-bottom-width'));\n        this.hComp = (this.hComp) ? this.hComp : 2;\n\n        this.handlers.drag = new OpenLayers.Handler.Drag(\n            this, {move: this.rectDrag, done: this.updateMapToRect},\n            {map: this.ovmap}\n        );\n        this.handlers.click = new OpenLayers.Handler.Click(\n            this, {\n                \"click\": this.mapDivClick\n            },{\n                \"single\": true, \"double\": false,\n                \"stopSingle\": true, \"stopDouble\": true,\n                \"pixelTolerance\": 1,\n                map: this.ovmap\n            }\n        );\n        this.handlers.click.activate();\n        \n        this.rectEvents = new OpenLayers.Events(this, this.extentRectangle,\n                                                null, true);\n        this.rectEvents.register(\"mouseover\", this, function(e) {\n            if(!this.handlers.drag.active && !this.map.dragging) {\n                this.handlers.drag.activate();\n            }\n        });\n        this.rectEvents.register(\"mouseout\", this, function(e) {\n            if(!this.handlers.drag.dragging) {\n                this.handlers.drag.deactivate();\n            }\n        });\n\n        if (this.ovmap.getProjection() != this.map.getProjection()) {\n            var sourceUnits = this.map.getProjectionObject().getUnits() ||\n                this.map.units || this.map.baseLayer.units;\n            var targetUnits = this.ovmap.getProjectionObject().getUnits() ||\n                this.ovmap.units || this.ovmap.baseLayer.units;\n            this.resolutionFactor = sourceUnits && targetUnits ?\n                OpenLayers.INCHES_PER_UNIT[sourceUnits] /\n                OpenLayers.INCHES_PER_UNIT[targetUnits] : 1;\n        }\n    },\n        \n    /**\n     * Method: updateRectToMap\n     * Updates the extent rectangle position and size to match the map extent\n     */\n    updateRectToMap: function() {\n        // If the projections differ we need to reproject\n        var bounds;\n        if (this.ovmap.getProjection() != this.map.getProjection()) {\n            bounds = this.map.getExtent().transform(\n                this.map.getProjectionObject(), \n                this.ovmap.getProjectionObject() );\n        } else {\n            bounds = this.map.getExtent();\n        }\n        var pxBounds = this.getRectBoundsFromMapBounds(bounds);\n        if (pxBounds) {\n            this.setRectPxBounds(pxBounds);\n        }\n    },\n    \n    /**\n     * Method: updateMapToRect\n     * Updates the map extent to match the extent rectangle position and size\n     */\n    updateMapToRect: function() {\n        var lonLatBounds = this.getMapBoundsFromRectBounds(this.rectPxBounds);\n        if (this.ovmap.getProjection() != this.map.getProjection()) {\n            lonLatBounds = lonLatBounds.transform(\n                this.ovmap.getProjectionObject(),\n                this.map.getProjectionObject() );\n        }\n        this.map.panTo(lonLatBounds.getCenterLonLat());\n    },\n\n    /**\n     * Method: setRectPxBounds\n     * Set extent rectangle pixel bounds.\n     *\n     * Parameters:\n     * pxBounds - {<OpenLayers.Bounds>}\n     */\n    setRectPxBounds: function(pxBounds) {\n        var top = Math.max(pxBounds.top, 0);\n        var left = Math.max(pxBounds.left, 0);\n        var bottom = Math.min(pxBounds.top + Math.abs(pxBounds.getHeight()),\n                              this.ovmap.size.h - this.hComp);\n        var right = Math.min(pxBounds.left + pxBounds.getWidth(),\n                             this.ovmap.size.w - this.wComp);\n        var width = Math.max(right - left, 0);\n        var height = Math.max(bottom - top, 0);\n        if(width < this.minRectSize || height < this.minRectSize) {\n            this.extentRectangle.className = this.displayClass +\n                                             this.minRectDisplayClass;\n            var rLeft = left + (width / 2) - (this.minRectSize / 2);\n            var rTop = top + (height / 2) - (this.minRectSize / 2);\n            this.extentRectangle.style.top = Math.round(rTop) + 'px';\n            this.extentRectangle.style.left = Math.round(rLeft) + 'px';\n            this.extentRectangle.style.height = this.minRectSize + 'px';\n            this.extentRectangle.style.width = this.minRectSize + 'px';\n        } else {\n            this.extentRectangle.className = this.displayClass +\n                                             'ExtentRectangle';\n            this.extentRectangle.style.top = Math.round(top) + 'px';\n            this.extentRectangle.style.left = Math.round(left) + 'px';\n            this.extentRectangle.style.height = Math.round(height) + 'px';\n            this.extentRectangle.style.width = Math.round(width) + 'px';\n        }\n        this.rectPxBounds = new OpenLayers.Bounds(\n            Math.round(left), Math.round(bottom),\n            Math.round(right), Math.round(top)\n        );\n    },\n\n    /**\n     * Method: getRectBoundsFromMapBounds\n     * Get the rect bounds from the map bounds.\n     *\n     * Parameters:\n     * lonLatBounds - {<OpenLayers.Bounds>}\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>}A bounds which is the passed-in map lon/lat extent\n     * translated into pixel bounds for the overview map\n     */\n    getRectBoundsFromMapBounds: function(lonLatBounds) {\n        var leftBottomPx = this.getOverviewPxFromLonLat({\n            lon: lonLatBounds.left,\n            lat: lonLatBounds.bottom\n        });\n        var rightTopPx = this.getOverviewPxFromLonLat({\n            lon: lonLatBounds.right,\n            lat: lonLatBounds.top\n        });\n        var bounds = null;\n        if (leftBottomPx && rightTopPx) {\n            bounds = new OpenLayers.Bounds(leftBottomPx.x, leftBottomPx.y,\n                                           rightTopPx.x, rightTopPx.y);\n        }\n        return bounds;\n    },\n\n    /**\n     * Method: getMapBoundsFromRectBounds\n     * Get the map bounds from the rect bounds.\n     *\n     * Parameters:\n     * pxBounds - {<OpenLayers.Bounds>}\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>} Bounds which is the passed-in overview rect bounds\n     * translated into lon/lat bounds for the overview map\n     */\n    getMapBoundsFromRectBounds: function(pxBounds) {\n        var leftBottomLonLat = this.getLonLatFromOverviewPx({\n            x: pxBounds.left,\n            y: pxBounds.bottom\n        });\n        var rightTopLonLat = this.getLonLatFromOverviewPx({\n            x: pxBounds.right,\n            y: pxBounds.top\n        });\n        return new OpenLayers.Bounds(leftBottomLonLat.lon, leftBottomLonLat.lat,\n                                     rightTopLonLat.lon, rightTopLonLat.lat);\n    },\n\n    /**\n     * Method: getLonLatFromOverviewPx\n     * Get a map location from a pixel location\n     *\n     * Parameters:\n     * overviewMapPx - {<OpenLayers.Pixel>|Object} OpenLayers.Pixel or\n     *                                             an object with a\n     *                                             'x' and 'y' properties.\n     *\n     * Returns:\n     * {Object} Location which is the passed-in overview map\n     * OpenLayers.Pixel, translated into lon/lat by the overview\n     * map. An object with a 'lon' and 'lat' properties.\n     */\n    getLonLatFromOverviewPx: function(overviewMapPx) {\n        var size = this.ovmap.size;\n        var res  = this.ovmap.getResolution();\n        var center = this.ovmap.getExtent().getCenterLonLat();\n    \n        var deltaX = overviewMapPx.x - (size.w / 2);\n        var deltaY = overviewMapPx.y - (size.h / 2);\n\n        return {\n            lon: center.lon + deltaX * res,\n            lat: center.lat - deltaY * res\n        };\n    },\n\n    /**\n     * Method: getOverviewPxFromLonLat\n     * Get a pixel location from a map location\n     *\n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>|Object} OpenLayers.LonLat or an\n     *     object with a 'lon' and 'lat' properties.\n     *\n     * Returns:\n     * {Object} Location which is the passed-in OpenLayers.LonLat, \n     * translated into overview map pixels\n     */\n    getOverviewPxFromLonLat: function(lonlat) {\n        var res = this.ovmap.getResolution();\n        var extent = this.ovmap.getExtent();\n        if (extent) {\n            return {\n                x: Math.round(1/res * (lonlat.lon - extent.left)),\n                y: Math.round(1/res * (extent.top - lonlat.lat))\n            };\n        } \n    },\n\n    CLASS_NAME: 'OpenLayers.Control.OverviewMap'\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Handler/Keyboard.js\n * @requires OpenLayers/Events.js\n */\n\n/**\n * Class: OpenLayers.Control.KeyboardDefaults\n * The KeyboardDefaults control adds panning and zooming functions, controlled\n * with the keyboard. By default arrow keys pan, +/- keys zoom & Page Up/Page\n * Down/Home/End scroll by three quarters of a page.\n * \n * This control has no visible appearance.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.KeyboardDefaults = OpenLayers.Class(OpenLayers.Control, {\n\n    /**\n     * APIProperty: autoActivate\n     * {Boolean} Activate the control when it is added to a map.  Default is\n     *     true.\n     */\n    autoActivate: true,\n\n    /**\n     * APIProperty: slideFactor\n     * Pixels to slide by.\n     */\n    slideFactor: 75,\n\n    /**\n     * APIProperty: observeElement\n     * {DOMelement|String} The DOM element to handle keys for. You\n     *     can use the map div here, to have the navigation keys\n     *     work when the map div has the focus. If undefined the\n     *     document is used.\n     */\n    observeElement: null,\n\n    /**\n     * Constructor: OpenLayers.Control.KeyboardDefaults\n     */\n        \n    /**\n     * Method: draw\n     * Create handler.\n     */\n    draw: function() {\n        var observeElement = this.observeElement || document;\n        this.handler = new OpenLayers.Handler.Keyboard( this,\n                {\"keydown\": this.defaultKeyPress},\n                {observeElement: observeElement}\n        );\n    },\n    \n    /**\n     * Method: defaultKeyPress\n     * When handling the key event, we only use evt.keyCode. This holds \n     * some drawbacks, though we get around them below. When interpretting\n     * the keycodes below (including the comments associated with them),\n     * consult the URL below. For instance, the Safari browser returns\n     * \"IE keycodes\", and so is supported by any keycode labeled \"IE\".\n     * \n     * Very informative URL:\n     *    http://unixpapa.com/js/key.html\n     *\n     * Parameters:\n     * evt - {Event} \n     */\n    defaultKeyPress: function (evt) {\n        var size, handled = true;\n\n        var target = OpenLayers.Event.element(evt);\n        if (target  &&\n            (target.tagName == 'INPUT' ||\n             target.tagName == 'TEXTAREA' ||\n             target.tagName == 'SELECT')) {\n            return;\n        }\n\n        switch (evt.keyCode) {\n            case OpenLayers.Event.KEY_LEFT:\n                this.map.pan(-this.slideFactor, 0);\n                break;\n            case OpenLayers.Event.KEY_RIGHT: \n                this.map.pan(this.slideFactor, 0);\n                break;\n            case OpenLayers.Event.KEY_UP:\n                this.map.pan(0, -this.slideFactor);\n                break;\n            case OpenLayers.Event.KEY_DOWN:\n                this.map.pan(0, this.slideFactor);\n                break;\n            \n            case 33: // Page Up. Same in all browsers.\n                size = this.map.getSize();\n                this.map.pan(0, -0.75*size.h);\n                break;\n            case 34: // Page Down. Same in all browsers.\n                size = this.map.getSize();\n                this.map.pan(0, 0.75*size.h);\n                break; \n            case 35: // End. Same in all browsers.\n                size = this.map.getSize();\n                this.map.pan(0.75*size.w, 0);\n                break; \n            case 36: // Home. Same in all browsers.\n                size = this.map.getSize();\n                this.map.pan(-0.75*size.w, 0);\n                break; \n\n            case 43:  // +/= (ASCII), keypad + (ASCII, Opera)\n            case 61:  // +/= (Mozilla, Opera, some ASCII)\n            case 187: // +/= (IE)\n            case 107: // keypad + (IE, Mozilla)\n                this.map.zoomIn();\n                break; \n            case 45:  // -/_ (ASCII, Opera), keypad - (ASCII, Opera)\n            case 109: // -/_ (Mozilla), keypad - (Mozilla, IE)\n            case 189: // -/_ (IE)\n            case 95:  // -/_ (some ASCII)\n                this.map.zoomOut();\n                break; \n            default:\n                handled = false;\n        }\n        if (handled) {\n            // prevent browser default not to move the page\n            // when moving the page with the keyboard\n            OpenLayers.Event.stop(evt);\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.KeyboardDefaults\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Events/buttonclick.js\n */\n\n/**\n * Class: OpenLayers.Control.PanZoom\n * The PanZoom is a visible control, composed of a\n * <OpenLayers.Control.PanPanel> and a <OpenLayers.Control.ZoomPanel>. By\n * default it is drawn in the upper left corner of the map.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.PanZoom = OpenLayers.Class(OpenLayers.Control, {\n\n    /** \n     * APIProperty: slideFactor\n     * {Integer} Number of pixels by which we'll pan the map in any direction \n     *     on clicking the arrow buttons.  If you want to pan by some ratio\n     *     of the map dimensions, use <slideRatio> instead.\n     */\n    slideFactor: 50,\n\n    /** \n     * APIProperty: slideRatio\n     * {Number} The fraction of map width/height by which we'll pan the map            \n     *     on clicking the arrow buttons.  Default is null.  If set, will\n     *     override <slideFactor>. E.g. if slideRatio is .5, then the Pan Up\n     *     button will pan up half the map height. \n     */\n    slideRatio: null,\n\n    /** \n     * Property: buttons\n     * {Array(DOMElement)} Array of Button Divs \n     */\n    buttons: null,\n\n    /** \n     * Property: position\n     * {<OpenLayers.Pixel>} \n     */\n    position: null,\n\n    /**\n     * Constructor: OpenLayers.Control.PanZoom\n     * \n     * Parameters:\n     * options - {Object}\n     */\n    initialize: function(options) {\n        this.position = new OpenLayers.Pixel(OpenLayers.Control.PanZoom.X,\n                                             OpenLayers.Control.PanZoom.Y);\n        OpenLayers.Control.prototype.initialize.apply(this, arguments);\n    },\n\n    /**\n     * APIMethod: destroy\n     */\n    destroy: function() {\n        if (this.map && !this.outsideViewport) {\n            this.map.events.unregister(\"buttonclick\", this, this.onButtonClick);\n        }\n        this.removeButtons();\n        this.buttons = null;\n        this.position = null;\n        OpenLayers.Control.prototype.destroy.apply(this, arguments);\n    },\n\n    /** \n     * Method: setMap\n     *\n     * Properties:\n     * map - {<OpenLayers.Map>} \n     */\n    setMap: function(map) {\n        OpenLayers.Control.prototype.setMap.apply(this, arguments);\n        var target;\n        if (this.outsideViewport) {\n            this.events.attachToElement(this.div);\n            target = this;\n        } else {\n            target = this.map;\n        }\n        target.events.register('buttonclick', this, this.onButtonClick);\n    },\n\n    /**\n     * Method: draw\n     *\n     * Parameters:\n     * px - {<OpenLayers.Pixel>} \n     * \n     * Returns:\n     * {DOMElement} A reference to the container div for the PanZoom control.\n     */\n    draw: function(px) {\n        // initialize our internal div\n        OpenLayers.Control.prototype.draw.apply(this, arguments);\n        px = this.position;\n\n        // place the controls\n        this.buttons = [];\n\n        var sz = {w: 18, h: 18};\n        var centered = new OpenLayers.Pixel(px.x+sz.w/2, px.y);\n\n        this._addButton(\"panup\", \"north-mini.png\", centered, sz);\n        px.y = centered.y+sz.h;\n        this._addButton(\"panleft\", \"west-mini.png\", px, sz);\n        this._addButton(\"panright\", \"east-mini.png\", px.add(sz.w, 0), sz);\n        this._addButton(\"pandown\", \"south-mini.png\", \n                        centered.add(0, sz.h*2), sz);\n        this._addButton(\"zoomin\", \"zoom-plus-mini.png\", \n                        centered.add(0, sz.h*3+5), sz);\n        this._addButton(\"zoomworld\", \"zoom-world-mini.png\", \n                        centered.add(0, sz.h*4+5), sz);\n        this._addButton(\"zoomout\", \"zoom-minus-mini.png\", \n                        centered.add(0, sz.h*5+5), sz);\n        return this.div;\n    },\n    \n    /**\n     * Method: _addButton\n     * \n     * Parameters:\n     * id - {String} \n     * img - {String} \n     * xy - {<OpenLayers.Pixel>} \n     * sz - {<OpenLayers.Size>} \n     * \n     * Returns:\n     * {DOMElement} A Div (an alphaImageDiv, to be precise) that contains the\n     *     image of the button, and has all the proper event handlers set.\n     */\n    _addButton:function(id, img, xy, sz) {\n        var imgLocation = OpenLayers.Util.getImageLocation(img);\n        var btn = OpenLayers.Util.createAlphaImageDiv(\n                                    this.id + \"_\" + id, \n                                    xy, sz, imgLocation, \"absolute\");\n        btn.style.cursor = \"pointer\";\n        //we want to add the outer div\n        this.div.appendChild(btn);\n        btn.action = id;\n        btn.className = \"olButton\";\n    \n        //we want to remember/reference the outer div\n        this.buttons.push(btn);\n        return btn;\n    },\n    \n    /**\n     * Method: _removeButton\n     * \n     * Parameters:\n     * btn - {Object}\n     */\n    _removeButton: function(btn) {\n        this.div.removeChild(btn);\n        OpenLayers.Util.removeItem(this.buttons, btn);\n    },\n    \n    /**\n     * Method: removeButtons\n     */\n    removeButtons: function() {\n        for(var i=this.buttons.length-1; i>=0; --i) {\n            this._removeButton(this.buttons[i]);\n        }\n    },\n    \n    /**\n     * Method: onButtonClick\n     *\n     * Parameters:\n     * evt - {Event}\n     */\n    onButtonClick: function(evt) {\n        var btn = evt.buttonElement;\n        switch (btn.action) {\n            case \"panup\": \n                this.map.pan(0, -this.getSlideFactor(\"h\"));\n                break;\n            case \"pandown\": \n                this.map.pan(0, this.getSlideFactor(\"h\"));\n                break;\n            case \"panleft\": \n                this.map.pan(-this.getSlideFactor(\"w\"), 0);\n                break;\n            case \"panright\": \n                this.map.pan(this.getSlideFactor(\"w\"), 0);\n                break;\n            case \"zoomin\": \n                this.map.zoomIn(); \n                break;\n            case \"zoomout\": \n                this.map.zoomOut(); \n                break;\n            case \"zoomworld\": \n                this.map.zoomToMaxExtent(); \n                break;\n        }\n    },\n    \n    /**\n     * Method: getSlideFactor\n     *\n     * Parameters:\n     * dim - {String} \"w\" or \"h\" (for width or height).\n     *\n     * Returns:\n     * {Number} The slide factor for panning in the requested direction.\n     */\n    getSlideFactor: function(dim) {\n        return this.slideRatio ?\n            this.map.getSize()[dim] * this.slideRatio :\n            this.slideFactor;\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.PanZoom\"\n});\n\n/**\n * Constant: X\n * {Integer}\n */\nOpenLayers.Control.PanZoom.X = 4;\n\n/**\n * Constant: Y\n * {Integer}\n */\nOpenLayers.Control.PanZoom.Y = 4;\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Control/PanZoom.js\n */\n\n/**\n * Class: OpenLayers.Control.PanZoomBar\n * The PanZoomBar is a visible control composed of a\n * <OpenLayers.Control.PanPanel> and a <OpenLayers.Control.ZoomBar>. \n * By default it is displayed in the upper left corner of the map as 4\n * directional arrows above a vertical slider.\n *\n * Inherits from:\n *  - <OpenLayers.Control.PanZoom>\n */\nOpenLayers.Control.PanZoomBar = OpenLayers.Class(OpenLayers.Control.PanZoom, {\n\n    /** \n     * APIProperty: zoomStopWidth\n     */\n    zoomStopWidth: 18,\n\n    /** \n     * APIProperty: zoomStopHeight\n     */\n    zoomStopHeight: 11,\n\n    /** \n     * Property: slider\n     */\n    slider: null,\n\n    /** \n     * Property: sliderEvents\n     * {<OpenLayers.Events>}\n     */\n    sliderEvents: null,\n\n    /** \n     * Property: zoombarDiv\n     * {DOMElement}\n     */\n    zoombarDiv: null,\n\n    /** \n     * APIProperty: zoomWorldIcon\n     * {Boolean}\n     */\n    zoomWorldIcon: false,\n\n    /**\n     * APIProperty: panIcons\n     * {Boolean} Set this property to false not to display the pan icons. If\n     * false the zoom world icon is placed under the zoom bar. Defaults to\n     * true.\n     */\n    panIcons: true,\n\n    /**\n     * APIProperty: forceFixedZoomLevel\n     * {Boolean} Force a fixed zoom level even though the map has \n     *     fractionalZoom\n     */\n    forceFixedZoomLevel: false,\n\n    /**\n     * Property: mouseDragStart\n     * {<OpenLayers.Pixel>}\n     */\n    mouseDragStart: null,\n\n    /**\n     * Property: deltaY\n     * {Number} The cumulative vertical pixel offset during a zoom bar drag.\n     */\n    deltaY: null,\n\n    /**\n     * Property: zoomStart\n     * {<OpenLayers.Pixel>}\n     */\n    zoomStart: null,\n\n    /**\n     * Constructor: OpenLayers.Control.PanZoomBar\n     */ \n\n    /**\n     * APIMethod: destroy\n     */\n    destroy: function() {\n\n        this._removeZoomBar();\n\n        this.map.events.un({\n            \"changebaselayer\": this.redraw,\n            \"updatesize\": this.redraw,\n            scope: this\n        });\n\n        OpenLayers.Control.PanZoom.prototype.destroy.apply(this, arguments);\n\n        delete this.mouseDragStart;\n        delete this.zoomStart;\n    },\n    \n    /**\n     * Method: setMap\n     * \n     * Parameters:\n     * map - {<OpenLayers.Map>} \n     */\n    setMap: function(map) {\n        OpenLayers.Control.PanZoom.prototype.setMap.apply(this, arguments);\n        \n        if (this.outsideViewport) {\n            this.events.attachToElement(this.div);\n        }\n\n        this.map.events.on({\n            \"changebaselayer\": this.redraw,\n            \"updatesize\": this.redraw,\n            scope: this\n        });\n    },\n\n    /** \n     * Method: redraw\n     * clear the div and start over.\n     */\n    redraw: function() {\n        if (this.div != null) {\n            this.removeButtons();\n            this._removeZoomBar();\n        }  \n        this.draw();\n    },\n    \n    /**\n    * Method: draw \n    *\n    * Parameters:\n    * px - {<OpenLayers.Pixel>} \n    */\n    draw: function(px) {\n        // initialize our internal div\n        OpenLayers.Control.prototype.draw.apply(this, arguments);\n        px = this.position.clone();\n\n        // place the controls\n        this.buttons = [];\n\n        var sz = {w: 18, h: 18};\n        if (this.panIcons) {\n            var centered = new OpenLayers.Pixel(px.x+sz.w/2, px.y);\n            var wposition = sz.w;\n\n            if (this.zoomWorldIcon) {\n                centered = new OpenLayers.Pixel(px.x+sz.w, px.y);\n            }\n\n            this._addButton(\"panup\", \"north-mini.png\", centered, sz);\n            px.y = centered.y+sz.h;\n            this._addButton(\"panleft\", \"west-mini.png\", px, sz);\n            if (this.zoomWorldIcon) {\n                this._addButton(\"zoomworld\", \"zoom-world-mini.png\", px.add(sz.w, 0), sz);\n\n                wposition *= 2;\n            }\n            this._addButton(\"panright\", \"east-mini.png\", px.add(wposition, 0), sz);\n            this._addButton(\"pandown\", \"south-mini.png\", centered.add(0, sz.h*2), sz);\n            this._addButton(\"zoomin\", \"zoom-plus-mini.png\", centered.add(0, sz.h*3+5), sz);\n            centered = this._addZoomBar(centered.add(0, sz.h*4 + 5));\n            this._addButton(\"zoomout\", \"zoom-minus-mini.png\", centered, sz);\n        }\n        else {\n            this._addButton(\"zoomin\", \"zoom-plus-mini.png\", px, sz);\n            centered = this._addZoomBar(px.add(0, sz.h));\n            this._addButton(\"zoomout\", \"zoom-minus-mini.png\", centered, sz);\n            if (this.zoomWorldIcon) {\n                centered = centered.add(0, sz.h+3);\n                this._addButton(\"zoomworld\", \"zoom-world-mini.png\", centered, sz);\n            }\n        }\n        return this.div;\n    },\n\n    /** \n    * Method: _addZoomBar\n    * \n    * Parameters:\n    * centered - {<OpenLayers.Pixel>} where zoombar drawing is to start.\n    */\n    _addZoomBar:function(centered) {\n        var imgLocation = OpenLayers.Util.getImageLocation(\"slider.png\");\n        var id = this.id + \"_\" + this.map.id;\n        var minZoom = this.map.getMinZoom();\n        var zoomsToEnd = this.map.getNumZoomLevels() - 1 - this.map.getZoom();\n        var slider = OpenLayers.Util.createAlphaImageDiv(id,\n                       centered.add(-1, zoomsToEnd * this.zoomStopHeight), \n                       {w: 20, h: 9},\n                       imgLocation,\n                       \"absolute\");\n        slider.style.cursor = \"move\";\n        this.slider = slider;\n        \n        this.sliderEvents = new OpenLayers.Events(this, slider, null, true,\n                                            {includeXY: true});\n        this.sliderEvents.on({\n            \"touchstart\": this.zoomBarDown,\n            \"touchmove\": this.zoomBarDrag,\n            \"touchend\": this.zoomBarUp,\n            \"mousedown\": this.zoomBarDown,\n            \"mousemove\": this.zoomBarDrag,\n            \"mouseup\": this.zoomBarUp\n        });\n        \n        var sz = {\n            w: this.zoomStopWidth,\n            h: this.zoomStopHeight * (this.map.getNumZoomLevels() - minZoom)\n        };\n        var imgLocation = OpenLayers.Util.getImageLocation(\"zoombar.png\");\n        var div = null;\n        \n        if (OpenLayers.Util.alphaHack()) {\n            var id = this.id + \"_\" + this.map.id;\n            div = OpenLayers.Util.createAlphaImageDiv(id, centered,\n                                      {w: sz.w, h: this.zoomStopHeight},\n                                      imgLocation,\n                                      \"absolute\", null, \"crop\");\n            div.style.height = sz.h + \"px\";\n        } else {\n            div = OpenLayers.Util.createDiv(\n                        'OpenLayers_Control_PanZoomBar_Zoombar' + this.map.id,\n                        centered,\n                        sz,\n                        imgLocation);\n        }\n        div.style.cursor = \"pointer\";\n        div.className = \"olButton\";\n        this.zoombarDiv = div;\n        \n        this.div.appendChild(div);\n\n        this.startTop = parseInt(div.style.top);\n        this.div.appendChild(slider);\n\n        this.map.events.register(\"zoomend\", this, this.moveZoomBar);\n\n        centered = centered.add(0, \n            this.zoomStopHeight * (this.map.getNumZoomLevels() - minZoom));\n        return centered; \n    },\n    \n    /**\n     * Method: _removeZoomBar\n     */\n    _removeZoomBar: function() {\n        this.sliderEvents.un({\n            \"touchstart\": this.zoomBarDown,\n            \"touchmove\": this.zoomBarDrag,\n            \"touchend\": this.zoomBarUp,\n            \"mousedown\": this.zoomBarDown,\n            \"mousemove\": this.zoomBarDrag,\n            \"mouseup\": this.zoomBarUp\n        });\n        this.sliderEvents.destroy();\n        \n        this.div.removeChild(this.zoombarDiv);\n        this.zoombarDiv = null;\n        this.div.removeChild(this.slider);\n        this.slider = null;\n        \n        this.map.events.unregister(\"zoomend\", this, this.moveZoomBar);\n    },\n    \n    /**\n     * Method: onButtonClick\n     *\n     * Parameters:\n     * evt - {Event}\n     */\n    onButtonClick: function(evt) {\n        OpenLayers.Control.PanZoom.prototype.onButtonClick.apply(this, arguments);\n        if (evt.buttonElement === this.zoombarDiv) {\n            var levels = evt.buttonXY.y / this.zoomStopHeight;\n            if(this.forceFixedZoomLevel || !this.map.fractionalZoom) {\n                levels = Math.floor(levels);\n            }    \n            var zoom = (this.map.getNumZoomLevels() - 1) - levels; \n            zoom = Math.min(Math.max(zoom, 0), this.map.getNumZoomLevels() - 1);\n            this.map.zoomTo(zoom);\n        }\n    },\n    \n    /**\n     * Method: passEventToSlider\n     * This function is used to pass events that happen on the div, or the map,\n     * through to the slider, which then does its moving thing.\n     *\n     * Parameters:\n     * evt - {<OpenLayers.Event>} \n     */\n    passEventToSlider:function(evt) {\n        this.sliderEvents.handleBrowserEvent(evt);\n    },\n    \n    /*\n     * Method: zoomBarDown\n     * event listener for clicks on the slider\n     *\n     * Parameters:\n     * evt - {<OpenLayers.Event>} \n     */\n    zoomBarDown:function(evt) {\n        if (!OpenLayers.Event.isLeftClick(evt) && !OpenLayers.Event.isSingleTouch(evt)) {\n            return;\n        }\n        var target = this.outsideViewport ? this : this.map;\n        target.events.on({\n            touchmove: this.passEventToSlider,\n            mousemove: this.passEventToSlider,\n            mouseup: this.passEventToSlider,\n            scope: this\n        });\n        \n        this.mouseDragStart = evt.xy.clone();\n        this.zoomStart = evt.xy.clone();\n        this.div.style.cursor = \"move\";\n        // reset the div offsets just in case the div moved\n        this.zoombarDiv.offsets = null; \n        OpenLayers.Event.stop(evt);\n    },\n    \n    /*\n     * Method: zoomBarDrag\n     * This is what happens when a click has occurred, and the client is\n     * dragging.  Here we must ensure that the slider doesn't go beyond the\n     * bottom/top of the zoombar div, as well as moving the slider to its new\n     * visual location\n     *\n     * Parameters:\n     * evt - {<OpenLayers.Event>} \n     */\n    zoomBarDrag:function(evt) {\n        if (this.mouseDragStart != null) {\n            var deltaY = this.mouseDragStart.y - evt.xy.y;\n            var offsets = OpenLayers.Util.pagePosition(this.zoombarDiv);\n            if ((evt.clientY - offsets[1]) > 0 && \n                (evt.clientY - offsets[1]) < parseInt(this.zoombarDiv.style.height) - 2) {\n                var newTop = parseInt(this.slider.style.top) - deltaY;\n                this.slider.style.top = newTop+\"px\";\n                this.mouseDragStart = evt.xy.clone();\n            }\n            // set cumulative displacement\n            this.deltaY = this.zoomStart.y - evt.xy.y;\n            OpenLayers.Event.stop(evt);\n        }\n    },\n    \n    /*\n     * Method: zoomBarUp\n     * Perform cleanup when a mouseup event is received -- discover new zoom\n     * level and switch to it.\n     *\n     * Parameters:\n     * evt - {<OpenLayers.Event>} \n     */\n    zoomBarUp:function(evt) {\n        if (!OpenLayers.Event.isLeftClick(evt) && evt.type !== \"touchend\") {\n            return;\n        }\n        if (this.mouseDragStart) {\n            this.div.style.cursor=\"\";\n            var target = this.outsideViewport ? this : this.map;\n            target.events.un({\n                \"touchmove\": this.passEventToSlider,\n                \"mouseup\": this.passEventToSlider,\n                \"mousemove\": this.passEventToSlider,\n                scope: this\n            });\n            var zoomLevel = this.map.zoom;\n            if (!this.forceFixedZoomLevel && this.map.fractionalZoom) {\n                zoomLevel += this.deltaY/this.zoomStopHeight;\n                zoomLevel = Math.min(Math.max(zoomLevel, 0), \n                                     this.map.getNumZoomLevels() - 1);\n            } else {\n                zoomLevel += this.deltaY/this.zoomStopHeight;\n                zoomLevel = Math.max(Math.round(zoomLevel), 0);      \n            }\n            this.map.zoomTo(zoomLevel);\n            this.mouseDragStart = null;\n            this.zoomStart = null;\n            this.deltaY = 0;\n            OpenLayers.Event.stop(evt);\n        }\n    },\n    \n    /*\n    * Method: moveZoomBar\n    * Change the location of the slider to match the current zoom level.\n    */\n    moveZoomBar:function() {\n        var newTop = \n            ((this.map.getNumZoomLevels()-1) - this.map.getZoom()) * \n            this.zoomStopHeight + this.startTop + 1;\n        this.slider.style.top = newTop + \"px\";\n    },    \n    \n    CLASS_NAME: \"OpenLayers.Control.PanZoomBar\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Control.js\n */\n\n/**\n * Class: OpenLayers.Control.ArgParser\n * The ArgParser control adds location bar query string parsing functionality \n * to an OpenLayers Map.\n * When added to a Map control, on a page load/refresh, the Map will \n * automatically take the href string and parse it for lon, lat, zoom, and \n * layers information. \n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.ArgParser = OpenLayers.Class(OpenLayers.Control, {\n\n    /**\n     * Property: center\n     * {<OpenLayers.LonLat>}\n     */\n    center: null,\n    \n    /**\n     * Property: zoom\n     * {int}\n     */\n    zoom: null,\n\n    /**\n     * Property: layers\n     * {String} Each character represents the state of the corresponding layer \n     *     on the map.\n     */\n    layers: null,\n    \n    /** \n     * APIProperty: displayProjection\n     * {<OpenLayers.Projection>} Requires proj4js support. \n     *     Projection used when reading the coordinates from the URL. This will\n     *     reproject the map coordinates from the URL into the map's\n     *     projection.\n     *\n     *     If you are using this functionality, be aware that any permalink\n     *     which is added to the map will determine the coordinate type which\n     *     is read from the URL, which means you should not add permalinks with\n     *     different displayProjections to the same map. \n     */\n    displayProjection: null, \n\n    /**\n     * Constructor: OpenLayers.Control.ArgParser\n     *\n     * Parameters:\n     * options - {Object}\n     */\n\n    /**\n     * Method: getParameters\n     */    \n    getParameters: function(url) {\n        url = url || window.location.href;\n        var parameters = OpenLayers.Util.getParameters(url);\n\n        // If we have an anchor in the url use it to split the url\n        var index = url.indexOf('#');\n        if (index > 0) {\n            // create an url to parse on the getParameters\n            url = '?' + url.substring(index + 1, url.length);\n\n            OpenLayers.Util.extend(parameters,\n                    OpenLayers.Util.getParameters(url));\n        }\n        return parameters;\n    },\n    \n    /**\n     * Method: setMap\n     * Set the map property for the control. \n     * \n     * Parameters:\n     * map - {<OpenLayers.Map>} \n     */\n    setMap: function(map) {\n        OpenLayers.Control.prototype.setMap.apply(this, arguments);\n\n        //make sure we don't already have an arg parser attached\n        for(var i=0, len=this.map.controls.length; i<len; i++) {\n            var control = this.map.controls[i];\n            if ( (control != this) &&\n                 (control.CLASS_NAME == \"OpenLayers.Control.ArgParser\") ) {\n                \n                // If a second argparser is added to the map, then we \n                // override the displayProjection to be the one added to the\n                // map. \n                if (control.displayProjection != this.displayProjection) {\n                    this.displayProjection = control.displayProjection;\n                }    \n                \n                break;\n            }\n        }\n        if (i == this.map.controls.length) {\n\n            var args = this.getParameters();\n            // Be careful to set layer first, to not trigger unnecessary layer loads\n            if (args.layers) {\n                this.layers = args.layers;\n    \n                // when we add a new layer, set its visibility \n                this.map.events.register('addlayer', this, \n                                         this.configureLayers);\n                this.configureLayers();\n            }\n            if (args.lat && args.lon) {\n                this.center = new OpenLayers.LonLat(parseFloat(args.lon),\n                                                    parseFloat(args.lat));\n                if (args.zoom) {\n                    this.zoom = parseFloat(args.zoom);\n                }\n    \n                // when we add a new baselayer to see when we can set the center\n                this.map.events.register('changebaselayer', this, \n                                         this.setCenter);\n                this.setCenter();\n            }\n        }\n    },\n   \n    /** \n     * Method: setCenter\n     * As soon as a baseLayer has been loaded, we center and zoom\n     *   ...and remove the handler.\n     */\n    setCenter: function() {\n        \n        if (this.map.baseLayer) {\n            //don't need to listen for this one anymore\n            this.map.events.unregister('changebaselayer', this, \n                                       this.setCenter);\n            \n            if (this.displayProjection) {\n                this.center.transform(this.displayProjection, \n                                      this.map.getProjectionObject()); \n            }      \n\n            this.map.setCenter(this.center, this.zoom);\n        }\n    },\n\n    /** \n     * Method: configureLayers\n     * As soon as all the layers are loaded, cycle through them and \n     *   hide or show them. \n     */\n    configureLayers: function() {\n\n        if (this.layers.length == this.map.layers.length) { \n            this.map.events.unregister('addlayer', this, this.configureLayers);\n\n            for(var i=0, len=this.layers.length; i<len; i++) {\n                \n                var layer = this.map.layers[i];\n                var c = this.layers.charAt(i);\n                \n                if (c == \"B\") {\n                    this.map.setBaseLayer(layer);\n                } else if ( (c == \"T\") || (c == \"F\") ) {\n                    layer.setVisibility(c == \"T\");\n                }\n            }\n        }\n    },     \n\n    CLASS_NAME: \"OpenLayers.Control.ArgParser\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Control/ArgParser.js\n * @requires OpenLayers/Lang.js\n */\n\n/**\n * Class: OpenLayers.Control.Permalink\n * The Permalink control is hyperlink that will return the user to the \n * current map view. By default it is drawn in the lower right corner of the\n * map. The href is updated as the map is zoomed, panned and whilst layers\n * are switched.\n * \n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.Permalink = OpenLayers.Class(OpenLayers.Control, {\n    \n    /**\n     * APIProperty: argParserClass\n     * {Class} The ArgParser control class (not instance) to use with this\n     *     control.\n     */\n    argParserClass: OpenLayers.Control.ArgParser,\n\n    /** \n     * Property: element \n     * {DOMElement}\n     */\n    element: null,\n    \n    /** \n     * APIProperty: anchor\n     * {Boolean} This option changes 3 things:\n     *     the character '#' is used in place of the character '?',\n     *     the window.href is updated if no element is provided.\n     *     When this option is set to true it's not recommend to provide\n     *     a base without provide an element.\n     */\n    anchor: false,\n\n    /** \n     * APIProperty: base\n     * {String}\n     */\n    base: '',\n\n    /** \n     * APIProperty: displayProjection\n     * {<OpenLayers.Projection>} Requires proj4js support.  Projection used\n     *     when creating the coordinates in the link. This will reproject the\n     *     map coordinates into display coordinates. If you are using this\n     *     functionality, the permalink which is last added to the map will\n     *     determine the coordinate type which is read from the URL, which\n     *     means you should not add permalinks with different\n     *     displayProjections to the same map. \n     */\n    displayProjection: null, \n\n    /**\n     * Constructor: OpenLayers.Control.Permalink\n     *\n     * Parameters: \n     * element - {DOMElement} \n     * base - {String} \n     * options - {Object} options to the control.\n     *\n     * Or for anchor:\n     * options - {Object} options to the control.\n     */\n    initialize: function(element, base, options) {\n        if (element !== null && typeof element == 'object' && !OpenLayers.Util.isElement(element)) {\n            options = element;\n            this.base = document.location.href;\n            OpenLayers.Control.prototype.initialize.apply(this, [options]);\n            if (this.element != null) {\n                this.element = OpenLayers.Util.getElement(this.element);\n            }\n        }\n        else {\n            OpenLayers.Control.prototype.initialize.apply(this, [options]);\n            this.element = OpenLayers.Util.getElement(element);\n            this.base = base || document.location.href;\n        }\n    },\n    \n    /**\n     * APIMethod: destroy\n     */\n    destroy: function()  {\n        if (this.element && this.element.parentNode == this.div) {\n            this.div.removeChild(this.element);\n            this.element = null;\n        }\n        if (this.map) {\n            this.map.events.unregister('moveend', this, this.updateLink);\n        }\n\n        OpenLayers.Control.prototype.destroy.apply(this, arguments); \n    },\n\n    /**\n     * Method: setMap\n     * Set the map property for the control. \n     * \n     * Parameters:\n     * map - {<OpenLayers.Map>} \n     */\n    setMap: function(map) {\n        OpenLayers.Control.prototype.setMap.apply(this, arguments);\n\n        //make sure we have an arg parser attached\n        for(var i=0, len=this.map.controls.length; i<len; i++) {\n            var control = this.map.controls[i];\n            if (control.CLASS_NAME == this.argParserClass.CLASS_NAME) {\n                \n                // If a permalink is added to the map, and an ArgParser already\n                // exists, we override the displayProjection to be the one\n                // on the permalink. \n                if (control.displayProjection != this.displayProjection) {\n                    this.displayProjection = control.displayProjection;\n                }    \n                \n                break;\n            }\n        }\n        if (i == this.map.controls.length) {\n            this.map.addControl(new this.argParserClass(\n                { 'displayProjection': this.displayProjection }));       \n        }\n\n    },\n\n    /**\n     * Method: draw\n     *\n     * Returns:\n     * {DOMElement}\n     */    \n    draw: function() {\n        OpenLayers.Control.prototype.draw.apply(this, arguments);\n          \n        if (!this.element && !this.anchor) {\n            this.element = document.createElement(\"a\");\n            this.element.innerHTML = OpenLayers.i18n(\"Permalink\");\n            this.element.href=\"\";\n            this.div.appendChild(this.element);\n        }\n        this.map.events.on({\n            'moveend': this.updateLink,\n            'changelayer': this.updateLink,\n            'changebaselayer': this.updateLink,\n            scope: this\n        });\n        \n        // Make it so there is at least a link even though the map may not have\n        // moved yet.\n        this.updateLink();\n        \n        return this.div;\n    },\n   \n    /**\n     * Method: updateLink \n     */\n    updateLink: function() {\n        var separator = this.anchor ? '#' : '?';\n        var href = this.base;\n        var anchor = null;\n        if (href.indexOf(\"#\") != -1 && this.anchor == false) {\n            anchor = href.substring( href.indexOf(\"#\"), href.length);\n        }\n        if (href.indexOf(separator) != -1) {\n            href = href.substring( 0, href.indexOf(separator) );\n        }\n        var splits = href.split(\"#\");\n        href = splits[0] + separator+ OpenLayers.Util.getParameterString(this.createParams());\n        if (anchor) {\n            href += anchor;\n        }\n        if (this.anchor && !this.element) {\n            window.location.href = href;\n        }\n        else {\n            this.element.href = href;\n        }\n    }, \n    \n    /**\n     * APIMethod: createParams\n     * Creates the parameters that need to be encoded into the permalink url.\n     * \n     * Parameters:\n     * center - {<OpenLayers.LonLat>} center to encode in the permalink.\n     *     Defaults to the current map center.\n     * zoom - {Integer} zoom level to encode in the permalink. Defaults to the\n     *     current map zoom level.\n     * layers - {Array(<OpenLayers.Layer>)} layers to encode in the permalink.\n     *     Defaults to the current map layers.\n     * \n     * Returns:\n     * {Object} Hash of parameters that will be url-encoded into the\n     * permalink.\n     */\n    createParams: function(center, zoom, layers) {\n        center = center || this.map.getCenter();\n          \n        var params = OpenLayers.Util.getParameters(this.base);\n        \n        // If there's still no center, map is not initialized yet. \n        // Break out of this function, and simply return the params from the\n        // base link.\n        if (center) { \n\n            //zoom\n            params.zoom = zoom || this.map.getZoom(); \n\n            //lon,lat\n            var lat = center.lat;\n            var lon = center.lon;\n            \n            if (this.displayProjection) {\n                var mapPosition = OpenLayers.Projection.transform(\n                  { x: lon, y: lat }, \n                  this.map.getProjectionObject(), \n                  this.displayProjection );\n                lon = mapPosition.x;  \n                lat = mapPosition.y;  \n            }       \n            params.lat = Math.round(lat*100000)/100000;\n            params.lon = Math.round(lon*100000)/100000;\n    \n            //layers        \n            layers = layers || this.map.layers;  \n            params.layers = '';\n            for (var i=0, len=layers.length; i<len; i++) {\n                var layer = layers[i];\n    \n                if (layer.isBaseLayer) {\n                    params.layers += (layer == this.map.baseLayer) ? \"B\" : \"0\";\n                } else {\n                    params.layers += (layer.getVisibility()) ? \"T\" : \"F\";           \n                }\n            }\n        }\n\n        return params;\n    }, \n\n    CLASS_NAME: \"OpenLayers.Control.Permalink\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Lang.js\n */\n\n/**\n * Class: OpenLayers.Control.Scale\n * The Scale control displays the current map scale as a ratio (e.g. Scale = \n * 1:1M). By default it is displayed in the lower right corner of the map.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.Scale = OpenLayers.Class(OpenLayers.Control, {\n    \n    /**\n     * Property: element\n     * {DOMElement}\n     */\n    element: null,\n    \n    /**\n     * APIProperty: geodesic\n     * {Boolean} Use geodesic measurement. Default is false. The recommended\n     * setting for maps in EPSG:4326 is false, and true EPSG:900913. If set to\n     * true, the scale will be calculated based on the horizontal size of the\n     * pixel in the center of the map viewport.\n     */\n    geodesic: false,\n\n    /**\n     * APIProperty: template\n     * {String} Template string for the scale label.\n     * Scale denominator value is substituted for token ${scaleDenom}. \n     */\n\ttemplate: \"Scale = 1 : ${scaleDenom}\",\n\n    /**\n     * Constructor: OpenLayers.Control.Scale\n     * \n     * Parameters:\n     * element - {DOMElement} \n     * options - {Object} \n     */\n    initialize: function(element, options) {\n        OpenLayers.Control.prototype.initialize.apply(this, [options]);\n        this.element = OpenLayers.Util.getElement(element);        \n    },\n\n    /**\n     * Method: draw\n     * \n     * Returns:\n     * {DOMElement}\n     */    \n    draw: function() {\n        OpenLayers.Control.prototype.draw.apply(this, arguments);\n        if (!this.element) {\n            this.element = document.createElement(\"div\");\n            this.div.appendChild(this.element);\n        }\n        this.map.events.register( 'moveend', this, this.updateScale);\n        this.updateScale();\n        return this.div;\n    },\n   \n    /**\n     * Method: updateScale\n     */\n    updateScale: function() {\n        var scale;\n        if(this.geodesic === true) {\n            var units = this.map.getUnits();\n            if(!units) {\n                return;\n            }\n            var inches = OpenLayers.INCHES_PER_UNIT;\n            scale = (this.map.getGeodesicPixelSize().w || 0.000001) *\n                    inches[\"km\"] * OpenLayers.DOTS_PER_INCH;\n        } else {\n            scale = this.map.getScale();\n        }\n            \n        if (!scale) {\n            return;\n        }\n\n        if (scale >= 9500 && scale <= 950000) {\n            scale = Math.round(scale / 1000) + \"K\";\n        } else if (scale >= 950000) {\n            scale = Math.round(scale / 1000000) + \"M\";\n        } else {\n            scale = Math.round(scale);\n        }    \n        \n        var scaleStr = OpenLayers.i18n(this.template, {'scaleDenom':scale});\n        this.element.innerHTML = scaleStr;\n    }, \n\n    CLASS_NAME: \"OpenLayers.Control.Scale\"\n});\n\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n */\n\n/**\n * Class: OpenLayers.Control.ScaleLine\n * The ScaleLine displays a small line indicator representing the current \n * map scale on the map. By default it is drawn in the lower left corner of\n * the map.\n * \n * Inherits from:\n *  - <OpenLayers.Control>\n *  \n * Is a very close copy of:\n *  - <OpenLayers.Control.Scale>\n */\nOpenLayers.Control.ScaleLine = OpenLayers.Class(OpenLayers.Control, {\n\n    /**\n     * Property: maxWidth\n     * {Integer} Maximum width of the scale line in pixels.  Default is 100.\n     */\n    maxWidth: 100,\n\n    /**\n     * Property: topOutUnits\n     * {String} Units for zoomed out on top bar.  Default is km.\n     */\n    topOutUnits: \"km\",\n    \n    /**\n     * Property: topInUnits\n     * {String} Units for zoomed in on top bar.  Default is m.\n     */\n    topInUnits: \"m\",\n\n    /**\n     * Property: bottomOutUnits\n     * {String} Units for zoomed out on bottom bar.  Default is mi.\n     */\n    bottomOutUnits: \"mi\",\n\n    /**\n     * Property: bottomInUnits\n     * {String} Units for zoomed in on bottom bar.  Default is ft.\n     */\n    bottomInUnits: \"ft\",\n    \n    /**\n     * Property: eTop\n     * {DOMElement}\n     */\n    eTop: null,\n\n    /**\n     * Property: eBottom\n     * {DOMElement}\n     */\n    eBottom:null,\n    \n    /**\n     * APIProperty: geodesic\n     * {Boolean} Use geodesic measurement. Default is false. The recommended\n     * setting for maps in EPSG:4326 is false, and true EPSG:900913. If set to\n     * true, the scale will be calculated based on the horizontal size of the\n     * pixel in the center of the map viewport.\n     */\n    geodesic: false,\n\n    /**\n     * Constructor: OpenLayers.Control.ScaleLine\n     * Create a new scale line control.\n     * \n     * Parameters:\n     * options - {Object} An optional object whose properties will be used\n     *     to extend the control.\n     */\n\n    /**\n     * Method: draw\n     * \n     * Returns:\n     * {DOMElement}\n     */\n    draw: function() {\n        OpenLayers.Control.prototype.draw.apply(this, arguments);\n        if (!this.eTop) {\n            // stick in the top bar\n            this.eTop = document.createElement(\"div\");\n            this.eTop.className = this.displayClass + \"Top\";\n            var theLen = this.topInUnits.length;\n            this.div.appendChild(this.eTop);\n            if((this.topOutUnits == \"\") || (this.topInUnits == \"\")) {\n                this.eTop.style.visibility = \"hidden\";\n            } else {\n                this.eTop.style.visibility = \"visible\";\n            }\n\n            // and the bottom bar\n            this.eBottom = document.createElement(\"div\");\n            this.eBottom.className = this.displayClass + \"Bottom\";\n            this.div.appendChild(this.eBottom);\n            if((this.bottomOutUnits == \"\") || (this.bottomInUnits == \"\")) {\n                this.eBottom.style.visibility = \"hidden\";\n            } else {\n                this.eBottom.style.visibility = \"visible\";\n            }\n        }\n        this.map.events.register('moveend', this, this.update);\n        this.update();\n        return this.div;\n    },\n\n    /** \n     * Method: getBarLen\n     * Given a number, round it down to the nearest 1,2,5 times a power of 10.\n     * That seems a fairly useful set of number groups to use.\n     * \n     * Parameters:\n     * maxLen - {float}  the number we're rounding down from\n     * \n     * Returns:\n     * {Float} the rounded number (less than or equal to maxLen)\n     */\n    getBarLen: function(maxLen) {\n        // nearest power of 10 lower than maxLen\n        var digits = parseInt(Math.log(maxLen) / Math.log(10));\n        var pow10 = Math.pow(10, digits);\n        \n        // ok, find first character\n        var firstChar = parseInt(maxLen / pow10);\n\n        // right, put it into the correct bracket\n        var barLen;\n        if(firstChar > 5) {\n            barLen = 5;\n        } else if(firstChar > 2) {\n            barLen = 2;\n        } else {\n            barLen = 1;\n        }\n\n        // scale it up the correct power of 10\n        return barLen * pow10;\n    },\n\n    /**\n     * Method: update\n     * Update the size of the bars, and the labels they contain.\n     */\n    update: function() {\n        var res = this.map.getResolution();\n        if (!res) {\n            return;\n        }\n\n        var curMapUnits = this.map.getUnits();\n        var inches = OpenLayers.INCHES_PER_UNIT;\n\n        // convert maxWidth to map units\n        var maxSizeData = this.maxWidth * res * inches[curMapUnits];\n        var geodesicRatio = 1;\n        if(this.geodesic === true) {\n            var maxSizeGeodesic = (this.map.getGeodesicPixelSize().w ||\n                0.000001) * this.maxWidth;\n            var maxSizeKilometers = maxSizeData / inches[\"km\"];\n            geodesicRatio = maxSizeGeodesic / maxSizeKilometers;\n            maxSizeData *= geodesicRatio;\n        }\n\n        // decide whether to use large or small scale units     \n        var topUnits;\n        var bottomUnits;\n        if(maxSizeData > 100000) {\n            topUnits = this.topOutUnits;\n            bottomUnits = this.bottomOutUnits;\n        } else {\n            topUnits = this.topInUnits;\n            bottomUnits = this.bottomInUnits;\n        }\n\n        // and to map units units\n        var topMax = maxSizeData / inches[topUnits];\n        var bottomMax = maxSizeData / inches[bottomUnits];\n\n        // now trim this down to useful block length\n        var topRounded = this.getBarLen(topMax);\n        var bottomRounded = this.getBarLen(bottomMax);\n\n        // and back to display units\n        topMax = topRounded / inches[curMapUnits] * inches[topUnits];\n        bottomMax = bottomRounded / inches[curMapUnits] * inches[bottomUnits];\n\n        // and to pixel units\n        var topPx = topMax / res / geodesicRatio;\n        var bottomPx = bottomMax / res / geodesicRatio;\n        \n        // now set the pixel widths\n        // and the values inside them\n        \n        if (this.eBottom.style.visibility == \"visible\"){\n            this.eBottom.style.width = Math.round(bottomPx) + \"px\"; \n            this.eBottom.innerHTML = bottomRounded + \" \" + bottomUnits ;\n        }\n            \n        if (this.eTop.style.visibility == \"visible\"){\n            this.eTop.style.width = Math.round(topPx) + \"px\";\n            this.eTop.innerHTML = topRounded + \" \" + topUnits;\n        }\n        \n    }, \n\n    CLASS_NAME: \"OpenLayers.Control.ScaleLine\"\n});\n\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Layer/Vector.js\n */\n\n/**\n * Class: OpenLayers.Control.Snapping\n * Acts as a snapping agent while editing vector features.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.Snapping = OpenLayers.Class(OpenLayers.Control, {\n\n    /** \n     * APIProperty: events\n     * {<OpenLayers.Events>} Events instance for listeners and triggering\n     *     control specific events.\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * control.events.register(type, obj, listener);\n     * (end)\n     *\n     * Supported event types (in addition to those from <OpenLayers.Control.events>):\n     * beforesnap - Triggered before a snap occurs.  Listeners receive an\n     *     event object with *point*, *x*, *y*, *distance*, *layer*, and\n     *     *snapType* properties.  The point property will be original point\n     *     geometry considered for snapping. The x and y properties represent\n     *     coordinates the point will receive. The distance is the distance\n     *     of the snap.  The layer is the target layer.  The snapType property\n     *     will be one of \"node\", \"vertex\", or \"edge\". Return false to stop\n     *     snapping from occurring.\n     * snap - Triggered when a snap occurs.  Listeners receive an event with\n     *     *point*, *snapType*, *layer*, and *distance* properties.  The point\n     *     will be the location snapped to.  The snapType will be one of \"node\",\n     *     \"vertex\", or \"edge\".  The layer will be the target layer.  The\n     *     distance will be the distance of the snap in map units.\n     * unsnap - Triggered when a vertex is unsnapped.  Listeners receive an\n     *     event with a *point* property.\n     */\n    \n    /**\n     * CONSTANT: DEFAULTS\n     * Default target properties.\n     */\n    DEFAULTS: {\n        tolerance: 10,\n        node: true,\n        edge: true,\n        vertex: true\n    },\n    \n    /**\n     * Property: greedy\n     * {Boolean} Snap to closest feature in first layer with an eligible\n     *     feature.  Default is true.\n     */\n    greedy: true,\n    \n    /**\n     * Property: precedence\n     * {Array} List representing precedence of different snapping types.\n     *     Default is \"node\", \"vertex\", \"edge\".\n     */\n    precedence: [\"node\", \"vertex\", \"edge\"],\n    \n    /**\n     * Property: resolution\n     * {Float} The map resolution for the previously considered snap.\n     */\n    resolution: null,\n    \n    /**\n     * Property: geoToleranceCache\n     * {Object} A cache of geo-tolerances.  Tolerance values (in map units) are\n     *     calculated when the map resolution changes.\n     */\n    geoToleranceCache: null,\n    \n    /**\n     * Property: layer\n     * {<OpenLayers.Layer.Vector>} The current editable layer.  Set at\n     *     construction or after construction with <setLayer>.\n     */\n    layer: null,\n    \n    /**\n     * Property: feature\n     * {<OpenLayers.Feature.Vector>} The current editable feature.\n     */\n    feature: null,\n    \n    /**\n     * Property: point\n     * {<OpenLayers.Geometry.Point>} The currently snapped vertex.\n     */\n    point: null,\n\n    /**\n     * Constructor: OpenLayers.Control.Snapping\n     * Creates a new snapping control. A control is constructed with an editable\n     *     layer and a set of configuration objects for target layers. While the\n     *     control is active, dragging vertices while drawing new features or\n     *     modifying existing features on the editable layer will engage\n     *     snapping to features on the target layers. Whether a vertex snaps to\n     *     a feature on a target layer depends on the target layer configuration.\n     *\n     * Parameters:\n     * options - {Object} An object containing all configuration properties for\n     *     the control.\n     *\n     * Valid options:\n     * layer - {<OpenLayers.Layer.Vector>} The editable layer.  Features from this\n     *     layer that are digitized or modified may have vertices snapped to\n     *     features from any of the target layers.\n     * targets - {Array(Object | OpenLayers.Layer.Vector)} A list of objects for\n     *     configuring target layers.  See valid properties of the target\n     *     objects below.  If the items in the targets list are vector layers\n     *     (instead of configuration objects), the defaults from the <defaults>\n     *     property will apply.  The editable layer itself may be a target\n     *     layer, allowing newly created or edited features to be snapped to\n     *     existing features from the same layer.  If no targets are provided\n     *     the layer given in the constructor (as <layer>) will become the\n     *     initial target.\n     * defaults - {Object} An object with default properties to be applied\n     *     to all target objects.\n     * greedy - {Boolean} Snap to closest feature in first target layer that\n     *     applies.  Default is true.  If false, all features in all target\n     *     layers will be checked and the closest feature in all target layers\n     *     will be chosen.  The greedy property determines if the order of the\n     *     target layers is significant.  By default, the order of the target\n     *     layers is significant where layers earlier in the target layer list\n     *     have precedence over layers later in the list.  Within a single\n     *     layer, the closest feature is always chosen for snapping.  This\n     *     property only determines whether the search for a closer feature\n     *     continues after an eligible feature is found in a target layer.\n     *\n     * Valid target properties:\n     * layer - {<OpenLayers.Layer.Vector>} A target layer.  Features from this\n     *     layer will be eligible to act as snapping target for the editable\n     *     layer.\n     * tolerance - {Float} The distance (in pixels) at which snapping may occur.\n     *     Default is 10.\n     * node - {Boolean} Snap to nodes (first or last point in a geometry) in\n     *     target layer.  Default is true.\n     * nodeTolerance - {Float} Optional distance at which snapping may occur\n     *     for nodes specifically.  If none is provided, <tolerance> will be\n     *     used.\n     * vertex - {Boolean} Snap to vertices in target layer.  Default is true.\n     * vertexTolerance - {Float} Optional distance at which snapping may occur\n     *     for vertices specifically.  If none is provided, <tolerance> will be\n     *     used.\n     * edge - {Boolean} Snap to edges in target layer.  Default is true.\n     * edgeTolerance - {Float} Optional distance at which snapping may occur\n     *     for edges specifically.  If none is provided, <tolerance> will be\n     *     used.\n     * filter - {<OpenLayers.Filter>} Optional filter to evaluate to determine if\n     *     feature is eligible for snapping.  If filter evaluates to true for a\n     *     target feature a vertex may be snapped to the feature. \n     * minResolution - {Number} If a minResolution is provided, snapping to this\n     *     target will only be considered if the map resolution is greater than\n     *     or equal to this value (the minResolution is inclusive).  Default is\n     *     no minimum resolution limit.\n     * maxResolution - {Number} If a maxResolution is provided, snapping to this\n     *     target will only be considered if the map resolution is strictly\n     *     less than this value (the maxResolution is exclusive).  Default is\n     *     no maximum resolution limit.\n     */\n    initialize: function(options) {\n        OpenLayers.Control.prototype.initialize.apply(this, [options]);\n        this.options = options || {}; // TODO: this could be done by the super\n        \n        // set the editable layer if provided\n        if(this.options.layer) {\n            this.setLayer(this.options.layer);\n        }\n        // configure target layers\n        var defaults = OpenLayers.Util.extend({}, this.options.defaults);\n        this.defaults = OpenLayers.Util.applyDefaults(defaults, this.DEFAULTS);\n        this.setTargets(this.options.targets);\n        if(this.targets.length === 0 && this.layer) {\n            this.addTargetLayer(this.layer);\n        }\n\n        this.geoToleranceCache = {};\n    },\n    \n    /**\n     * APIMethod: setLayer\n     * Set the editable layer.  Call the setLayer method if the editable layer\n     *     changes and the same control should be used on a new editable layer.\n     *     If the control is already active, it will be active after the new\n     *     layer is set.\n     *\n     * Parameters:\n     * layer - {<OpenLayers.Layer.Vector>}  The new editable layer.\n     */\n    setLayer: function(layer) {\n        if(this.active) {\n            this.deactivate();\n            this.layer = layer;\n            this.activate();\n        } else {\n            this.layer = layer;\n        }\n    },\n    \n    /**\n     * Method: setTargets\n     * Set the targets for the snapping agent.\n     *\n     * Parameters:\n     * targets - {Array} An array of target configs or target layers.\n     */\n    setTargets: function(targets) {\n        this.targets = [];\n        if(targets && targets.length) {\n            var target;\n            for(var i=0, len=targets.length; i<len; ++i) {\n                target = targets[i];\n                if(target instanceof OpenLayers.Layer.Vector) {\n                    this.addTargetLayer(target);\n                } else {\n                    this.addTarget(target);\n                }\n            }\n        }\n    },\n    \n    /**\n     * Method: addTargetLayer\n     * Add a target layer with the default target config.\n     *\n     * Parameters:\n     * layer - {<OpenLayers.Layer.Vector>} A target layer.\n     */\n    addTargetLayer: function(layer) {\n        this.addTarget({layer: layer});\n    },\n    \n    /**\n     * Method: addTarget\n     * Add a configured target layer.\n     *\n     * Parameters:\n     * target - {Object} A target config.\n     */\n    addTarget: function(target) {\n        target = OpenLayers.Util.applyDefaults(target, this.defaults);\n        target.nodeTolerance = target.nodeTolerance || target.tolerance;\n        target.vertexTolerance = target.vertexTolerance || target.tolerance;\n        target.edgeTolerance = target.edgeTolerance || target.tolerance;\n        this.targets.push(target);\n    },\n    \n    /**\n     * Method: removeTargetLayer\n     * Remove a target layer.\n     *\n     * Parameters:\n     * layer - {<OpenLayers.Layer.Vector>} The target layer to remove.\n     */\n    removeTargetLayer: function(layer) {\n        var target;\n        for(var i=this.targets.length-1; i>=0; --i) {\n            target = this.targets[i];\n            if(target.layer === layer) {\n                this.removeTarget(target);\n            }\n        }\n    },\n    \n    /**\n     * Method: removeTarget\n     * Remove a target.\n     *\n     * Parameters:\n     * target - {Object} A target config.\n     *\n     * Returns:\n     * {Array} The targets array.\n     */\n    removeTarget: function(target) {\n        return OpenLayers.Util.removeItem(this.targets, target);\n    },\n    \n    /**\n     * APIMethod: activate\n     * Activate the control.  Activating the control registers listeners for\n     *     editing related events so that during feature creation and\n     *     modification, moving vertices will trigger snapping.\n     */\n    activate: function() {\n        var activated = OpenLayers.Control.prototype.activate.call(this);\n        if(activated) {\n            if(this.layer && this.layer.events) {\n                this.layer.events.on({\n                    sketchstarted: this.onSketchModified,\n                    sketchmodified: this.onSketchModified,\n                    vertexmodified: this.onVertexModified,\n                    scope: this\n                });\n            }\n        }\n        return activated;\n    },\n    \n    /**\n     * APIMethod: deactivate\n     * Deactivate the control.  Deactivating the control unregisters listeners\n     *     so feature editing may proceed without engaging the snapping agent.\n     */\n    deactivate: function() {\n        var deactivated = OpenLayers.Control.prototype.deactivate.call(this);\n        if(deactivated) {\n            if(this.layer && this.layer.events) {\n                this.layer.events.un({\n                    sketchstarted: this.onSketchModified,\n                    sketchmodified: this.onSketchModified,\n                    vertexmodified: this.onVertexModified,\n                    scope: this\n                });\n            }\n        }\n        this.feature = null;\n        this.point = null;\n        return deactivated;\n    },\n    \n    /**\n     * Method: onSketchModified\n     * Registered as a listener for the sketchmodified event on the editable\n     *     layer.\n     *\n     * Parameters:\n     * event - {Object} The sketch modified event.\n     */\n    onSketchModified: function(event) {\n        this.feature = event.feature;\n        this.considerSnapping(event.vertex, event.vertex);\n    },\n    \n    /**\n     * Method: onVertexModified\n     * Registered as a listener for the vertexmodified event on the editable\n     *     layer.\n     *\n     * Parameters:\n     * event - {Object} The vertex modified event.\n     */\n    onVertexModified: function(event) {\n        this.feature = event.feature;\n        var loc = this.layer.map.getLonLatFromViewPortPx(event.pixel);\n        this.considerSnapping(\n            event.vertex, new OpenLayers.Geometry.Point(loc.lon, loc.lat)\n        );\n    },\n\n    /**\n     * Method: considerSnapping\n     *\n     * Parameters:\n     * point - {<OpenLayers.Geometry.Point>} The vertex to be snapped (or\n     *     unsnapped).\n     * loc - {<OpenLayers.Geometry.Point>} The location of the mouse in map\n     *     coords.\n     */\n    considerSnapping: function(point, loc) {\n        var best = {\n            rank: Number.POSITIVE_INFINITY,\n            dist: Number.POSITIVE_INFINITY,\n            x: null, y: null\n        };\n        var snapped = false;\n        var result, target;\n        for(var i=0, len=this.targets.length; i<len; ++i) {\n            target = this.targets[i];\n            result = this.testTarget(target, loc);\n            if(result) {\n                if(this.greedy) {\n                    best = result;\n                    best.target = target; \n                    snapped = true;\n                    break;\n                } else {\n                    if((result.rank < best.rank) ||\n                       (result.rank === best.rank && result.dist < best.dist)) {\n                        best = result;\n                        best.target = target;\n                        snapped = true;\n                    }\n                }\n            }\n        }\n        if(snapped) {\n            var proceed = this.events.triggerEvent(\"beforesnap\", {\n                point: point, x: best.x, y: best.y, distance: best.dist,\n                layer: best.target.layer, snapType: this.precedence[best.rank]\n            });\n            if(proceed !== false) {\n                point.x = best.x;\n                point.y = best.y;\n                this.point = point;\n                this.events.triggerEvent(\"snap\", {\n                    point: point,\n                    snapType: this.precedence[best.rank],\n                    layer: best.target.layer,\n                    distance: best.dist\n                });\n            } else {\n                snapped = false;\n            }\n        }\n        if(this.point && !snapped) {\n            point.x = loc.x;\n            point.y = loc.y;\n            this.point = null;\n            this.events.triggerEvent(\"unsnap\", {point: point});\n        }\n    },\n    \n    /**\n     * Method: testTarget\n     *\n     * Parameters:\n     * target - {Object} Object with target layer configuration.\n     * loc - {<OpenLayers.Geometry.Point>} The location of the mouse in map\n     *     coords.\n     *\n     * Returns:\n     * {Object} A result object with rank, dist, x, and y properties.\n     *     Returns null if candidate is not eligible for snapping.\n     */\n    testTarget: function(target, loc) {\n        var resolution = this.layer.map.getResolution();\n        if (\"minResolution\" in target) {\n            if (resolution < target.minResolution) {\n                return null;\n            }\n        }\n        if (\"maxResolution\" in target) {\n            if (resolution >= target.maxResolution) {\n                return null;\n            }\n        }\n        var tolerance = {\n            node: this.getGeoTolerance(target.nodeTolerance, resolution),\n            vertex: this.getGeoTolerance(target.vertexTolerance, resolution),\n            edge: this.getGeoTolerance(target.edgeTolerance, resolution)\n        };\n        // this could be cached if we don't support setting tolerance values directly\n        var maxTolerance = Math.max(\n            tolerance.node, tolerance.vertex, tolerance.edge\n        );\n        var result = {\n            rank: Number.POSITIVE_INFINITY, dist: Number.POSITIVE_INFINITY\n        };\n        var eligible = false;\n        var features = target.layer.features;\n        var feature, type, vertices, vertex, closest, dist, found;\n        var numTypes = this.precedence.length;\n        var ll = new OpenLayers.LonLat(loc.x, loc.y);\n        for(var i=0, len=features.length; i<len; ++i) {\n            feature = features[i];\n            if(feature !== this.feature && !feature._sketch &&\n               feature.state !== OpenLayers.State.DELETE &&\n               (!target.filter || target.filter.evaluate(feature))) {\n                if(feature.atPoint(ll, maxTolerance, maxTolerance)) {\n                    for(var j=0, stop=Math.min(result.rank+1, numTypes); j<stop; ++j) {\n                        type = this.precedence[j];\n                        if(target[type]) {\n                            if(type === \"edge\") {\n                                closest = feature.geometry.distanceTo(loc, {details: true});\n                                dist = closest.distance;\n                                if(dist <= tolerance[type] && dist < result.dist) {\n                                    result = {\n                                        rank: j, dist: dist,\n                                        x: closest.x0, y: closest.y0 // closest coords on feature\n                                    };\n                                    eligible = true;\n                                    // don't look for lower precedence types for this feature\n                                    break;\n                                }\n                            } else {\n                                // look for nodes or vertices\n                                vertices = feature.geometry.getVertices(type === \"node\");\n                                found = false;\n                                for(var k=0, klen=vertices.length; k<klen; ++k) {\n                                    vertex = vertices[k];\n                                    dist = vertex.distanceTo(loc);\n                                    if(dist <= tolerance[type] &&\n                                       (j < result.rank || (j === result.rank && dist < result.dist))) {\n                                        result = {\n                                            rank: j, dist: dist,\n                                            x: vertex.x, y: vertex.y\n                                        };\n                                        eligible = true;\n                                        found = true;\n                                    }\n                                }\n                                if(found) {\n                                    // don't look for lower precedence types for this feature\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return eligible ? result : null;\n    },\n    \n    /**\n     * Method: getGeoTolerance\n     * Calculate a tolerance in map units given a tolerance in pixels.  This\n     *     takes advantage of the <geoToleranceCache> when the map resolution\n     *     has not changed.\n     *     \n     * Parameters:\n     * tolerance - {Number} A tolerance value in pixels.\n     * resolution - {Number} Map resolution.\n     *\n     * Returns:\n     * {Number} A tolerance value in map units.\n     */\n    getGeoTolerance: function(tolerance, resolution) {\n        if(resolution !== this.resolution) {\n            this.resolution = resolution;\n            this.geoToleranceCache = {};\n        }\n        var geoTolerance = this.geoToleranceCache[tolerance];\n        if(geoTolerance === undefined) {\n            geoTolerance = tolerance * resolution;\n            this.geoToleranceCache[tolerance] = geoTolerance;\n        }\n        return geoTolerance;\n    },\n    \n    /**\n     * Method: destroy\n     * Clean up the control.\n     */\n    destroy: function() {\n        if(this.active) {\n            this.deactivate(); // TODO: this should be handled by the super\n        }\n        delete this.layer;\n        delete this.targets;\n        OpenLayers.Control.prototype.destroy.call(this);\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.Snapping\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Handler/Path.js\n * @requires OpenLayers/Layer/Vector.js\n */\n\n/**\n * Class: OpenLayers.Control.Split\n * Acts as a split feature agent while editing vector features.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.Split = OpenLayers.Class(OpenLayers.Control, {\n\n    /** \n     * APIProperty: events\n     * {<OpenLayers.Events>} Events instance for listeners and triggering\n     *     control specific events.\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * control.events.register(type, obj, listener);\n     * (end)\n     *\n     * Supported event types (in addition to those from <OpenLayers.Control.events>):\n     * beforesplit - Triggered before a split occurs.  Listeners receive an\n     *     event object with *source* and *target* properties.\n     * split - Triggered when a split occurs.  Listeners receive an event with\n     *     an *original* property and a *features* property.  The original\n     *     is a reference to the target feature that the sketch or modified\n     *     feature intersects.  The features property is a list of all features\n     *     that result from this single split.  This event is triggered before\n     *     the resulting features are added to the layer (while the layer still\n     *     has a reference to the original).\n     * aftersplit - Triggered after all splits resulting from a single sketch\n     *     or feature modification have occurred.  The original features\n     *     have been destroyed and features that result from the split\n     *     have already been added to the layer.  Listeners receive an event\n     *     with a *source* and *features* property.  The source references the\n     *     sketch or modified feature used as a splitter.  The features\n     *     property is a list of all resulting features.\n     */\n    \n    /**\n     * APIProperty: layer\n     * {<OpenLayers.Layer.Vector>} The target layer with features to be split.\n     *     Set at construction or after construction with <setLayer>.\n     */\n    layer: null,\n    \n    /**\n     * Property: source\n     * {<OpenLayers.Layer.Vector>} Optional source layer.  Any newly created\n     *     or modified features from this layer will be used to split features\n     *     on the target layer.  If not provided, a temporary sketch layer will\n     *     be created.\n     */\n    source: null,\n    \n    /**\n     * Property: sourceOptions\n     * {Options} If a temporary sketch layer is created, these layer options\n     *     will be applied.\n     */\n    sourceOptions: null,\n\n    /**\n     * APIProperty: tolerance\n     * {Number} Distance between the calculated intersection and a vertex on\n     *     the source geometry below which the existing vertex will be used\n     *     for the split.  Default is null.\n     */\n    tolerance: null,\n    \n    /**\n     * APIProperty: edge\n     * {Boolean} Allow splits given intersection of edges only.  Default is\n     *     true.  If false, a vertex on the source must be within the\n     *     <tolerance> distance of the calculated intersection for a split\n     *     to occur.\n     */\n    edge: true,\n    \n    /**\n     * APIProperty: deferDelete\n     * {Boolean} Instead of removing features from the layer, set feature\n     *     states of split features to DELETE.  This assumes a save strategy\n     *     or other component is in charge of removing features from the\n     *     layer.  Default is false.  If false, split features will be\n     *     immediately deleted from the layer.\n     */\n    deferDelete: false,\n    \n    /**\n     * APIProperty: mutual\n     * {Boolean} If source and target layers are the same, split source\n     *     features and target features where they intersect.  Default is\n     *     true.  If false, only target features will be split.\n     */\n    mutual: true,\n    \n    /**\n     * APIProperty: targetFilter\n     * {<OpenLayers.Filter>} Optional filter that will be evaluated\n     *     to determine if a feature from the target layer is eligible for\n     *     splitting.\n     */\n    targetFilter: null,\n    \n    /**\n     * APIProperty: sourceFilter\n     * {<OpenLayers.Filter>} Optional filter that will be evaluated\n     *     to determine if a feature from the source layer is eligible for\n     *     splitting.\n     */\n    sourceFilter: null,\n    \n    /**\n     * Property: handler\n     * {<OpenLayers.Handler.Path>} The temporary sketch handler created if\n     *     no source layer is provided.\n     */\n    handler: null,\n\n    /**\n     * Constructor: OpenLayers.Control.Split\n     * Creates a new split control. A control is constructed with a target\n     *     layer and an optional source layer. While the control is active,\n     *     creating new features or modifying existing features on the source\n     *     layer will result in splitting any eligible features on the target\n     *     layer.  If no source layer is provided, a temporary sketch layer will\n     *     be created to create lines for splitting features on the target.\n     *\n     * Parameters:\n     * options - {Object} An object containing all configuration properties for\n     *     the control.\n     *\n     * Valid options:\n     * layer - {<OpenLayers.Layer.Vector>} The target layer.  Features from this\n     *     layer will be split by new or modified features on the source layer\n     *     or temporary sketch layer.\n     * source - {<OpenLayers.Layer.Vector>} Optional source layer.  If provided\n     *     newly created features or modified features will be used to split\n     *     features on the target layer.  If not provided, a temporary sketch\n     *     layer will be created for drawing lines.\n     * tolerance - {Number} Optional value for the distance between a source\n     *     vertex and the calculated intersection below which the split will\n     *     occur at the vertex.\n     * edge - {Boolean} Allow splits given intersection of edges only.  Default\n     *     is true.  If false, a vertex on the source must be within the\n     *     <tolerance> distance of the calculated intersection for a split\n     *     to occur.\n     * mutual - {Boolean} If source and target are the same, split source\n     *     features and target features where they intersect.  Default is\n     *     true.  If false, only target features will be split.\n     * targetFilter - {<OpenLayers.Filter>} Optional filter that will be evaluated\n     *     to determine if a feature from the target layer is eligible for\n     *     splitting.\n     * sourceFilter - {<OpenLayers.Filter>} Optional filter that will be evaluated\n     *     to determine if a feature from the target layer is eligible for\n     *     splitting.\n     */\n    initialize: function(options) {\n        OpenLayers.Control.prototype.initialize.apply(this, [options]);\n        this.options = options || {}; // TODO: this could be done by the super\n        \n        // set the source layer if provided\n        if(this.options.source) {\n            this.setSource(this.options.source);\n        }\n    },\n    \n    /**\n     * APIMethod: setSource\n     * Set the source layer for edits layer.\n     *\n     * Parameters:\n     * layer - {<OpenLayers.Layer.Vector>}  The new source layer layer.  If\n     *     null, a temporary sketch layer will be created.\n     */\n    setSource: function(layer) {\n        if(this.active) {\n            this.deactivate();\n            if(this.handler) {\n                this.handler.destroy();\n                delete this.handler;\n            }\n            this.source = layer;\n            this.activate();\n        } else {\n            this.source = layer;\n        }\n    },\n    \n    /**\n     * APIMethod: activate\n     * Activate the control.  Activating the control registers listeners for\n     *     editing related events so that during feature creation and\n     *     modification, features in the target will be considered for\n     *     splitting.\n     */\n    activate: function() {\n        var activated = OpenLayers.Control.prototype.activate.call(this);\n        if(activated) {\n            if(!this.source) {\n                if(!this.handler) {\n                    this.handler = new OpenLayers.Handler.Path(this,\n                        {done: function(geometry) {\n                            this.onSketchComplete({\n                                feature: new OpenLayers.Feature.Vector(geometry)\n                            });\n                        }},\n                        {layerOptions: this.sourceOptions}\n                    );\n                }\n                this.handler.activate();\n            } else if(this.source.events) {\n                this.source.events.on({\n                    sketchcomplete: this.onSketchComplete,\n                    afterfeaturemodified: this.afterFeatureModified,\n                    scope: this\n                });\n            }\n        }\n        return activated;\n    },\n    \n    /**\n     * APIMethod: deactivate\n     * Deactivate the control.  Deactivating the control unregisters listeners\n     *     so feature editing may proceed without engaging the split agent.\n     */\n    deactivate: function() {\n        var deactivated = OpenLayers.Control.prototype.deactivate.call(this);\n        if(deactivated) {\n            if(this.source && this.source.events) {\n                this.source.events.un({\n                    sketchcomplete: this.onSketchComplete,\n                    afterfeaturemodified: this.afterFeatureModified,\n                    scope: this\n                });\n            }\n        }\n        return deactivated;\n    },\n    \n    /**\n     * Method: onSketchComplete\n     * Registered as a listener for the sketchcomplete event on the editable\n     *     layer.\n     *\n     * Parameters:\n     * event - {Object} The sketch complete event.\n     *\n     * Returns:\n     * {Boolean} Stop the sketch from being added to the layer (it has been\n     *     split).\n     */\n    onSketchComplete: function(event) {\n        this.feature = null;\n        return !this.considerSplit(event.feature);\n    },\n    \n    /**\n     * Method: afterFeatureModified\n     * Registered as a listener for the afterfeaturemodified event on the\n     *     editable layer.\n     *\n     * Parameters:\n     * event - {Object} The after feature modified event.\n     */\n    afterFeatureModified: function(event) {\n        if(event.modified) {\n            var feature = event.feature;\n            if (typeof feature.geometry.split === \"function\") {\n                this.feature = event.feature;\n                this.considerSplit(event.feature);\n            }\n        }\n    },\n    \n    /**\n     * Method: removeByGeometry\n     * Remove a feature from a list based on the given geometry.\n     *\n     * Parameters:\n     * features - {Array(<OpenLayers.Feature.Vector>)} A list of features.\n     * geometry - {<OpenLayers.Geometry>} A geometry.\n     */\n    removeByGeometry: function(features, geometry) {\n        for(var i=0, len=features.length; i<len; ++i) {\n            if(features[i].geometry === geometry) {\n                features.splice(i, 1);\n                break;\n            }\n        }\n    },\n    \n    /**\n     * Method: isEligible\n     * Test if a target feature is eligible for splitting.\n     *\n     * Parameters:\n     * target - {<OpenLayers.Feature.Vector>} The target feature.\n     *\n     * Returns:\n     * {Boolean} The target is eligible for splitting.\n     */\n    isEligible: function(target) {\n        if (!target.geometry) {\n            return false;\n        } else {\n            return (\n                target.state !== OpenLayers.State.DELETE\n            ) && (\n                typeof target.geometry.split === \"function\"\n            ) && (\n                this.feature !== target\n            ) && (\n                !this.targetFilter ||\n                this.targetFilter.evaluate(target.attributes)\n            );\n        }\n    },\n\n    /**\n     * Method: considerSplit\n     * Decide whether or not to split target features with the supplied\n     *     feature.  If <mutual> is true, both the source and target features\n     *     will be split if eligible.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} The newly created or modified\n     *     feature.\n     *\n     * Returns:\n     * {Boolean} The supplied feature was split (and destroyed).\n     */\n    considerSplit: function(feature) {\n        var sourceSplit = false;\n        var targetSplit = false;\n        if(!this.sourceFilter ||\n           this.sourceFilter.evaluate(feature.attributes)) {\n            var features = this.layer && this.layer.features || [];\n            var target, results, proceed;\n            var additions = [], removals = [];\n            var mutual = (this.layer === this.source) && this.mutual;\n            var options = {\n                edge: this.edge,\n                tolerance: this.tolerance,\n                mutual: mutual\n            };\n            var sourceParts = [feature.geometry];\n            var targetFeature, targetParts;\n            var source, parts;\n            for(var i=0, len=features.length; i<len; ++i) {\n                targetFeature = features[i];\n                if(this.isEligible(targetFeature)) {\n                    targetParts = [targetFeature.geometry];\n                    // work through source geoms - this array may change\n                    for(var j=0; j<sourceParts.length; ++j) { \n                        source = sourceParts[j];\n                        // work through target parts - this array may change\n                        for(var k=0; k<targetParts.length; ++k) {\n                            target = targetParts[k];\n                            if(source.getBounds().intersectsBounds(target.getBounds())) {\n                                results = source.split(target, options);\n                                if(results) {\n                                    proceed = this.events.triggerEvent(\n                                        \"beforesplit\", {source: feature, target: targetFeature}\n                                    );\n                                    if(proceed !== false) {\n                                        if(mutual) {\n                                            parts = results[0];\n                                            // handle parts that result from source splitting\n                                            if(parts.length > 1) {\n                                                // splice in new source parts\n                                                parts.unshift(j, 1); // add args for splice below\n                                                Array.prototype.splice.apply(sourceParts, parts);\n                                                j += parts.length - 3;\n                                            }\n                                            results = results[1];\n                                        }\n                                        // handle parts that result from target splitting\n                                        if(results.length > 1) {\n                                            // splice in new target parts\n                                            results.unshift(k, 1); // add args for splice below\n                                            Array.prototype.splice.apply(targetParts, results);\n                                            k += results.length - 3;\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    if(targetParts && targetParts.length > 1) {\n                        this.geomsToFeatures(targetFeature, targetParts);\n                        this.events.triggerEvent(\"split\", {\n                            original: targetFeature,\n                            features: targetParts\n                        });\n                        Array.prototype.push.apply(additions, targetParts);\n                        removals.push(targetFeature);\n                        targetSplit = true;\n                    }\n                }\n            }\n            if(sourceParts && sourceParts.length > 1) {\n                this.geomsToFeatures(feature, sourceParts);\n                this.events.triggerEvent(\"split\", {\n                    original: feature,\n                    features: sourceParts\n                });\n                Array.prototype.push.apply(additions, sourceParts);\n                removals.push(feature);\n                sourceSplit = true;\n            }\n            if(sourceSplit || targetSplit) {\n                // remove and add feature events are suppressed\n                // listen for split event on this control instead\n                if(this.deferDelete) {\n                    // Set state instead of removing.  Take care to avoid\n                    // setting delete for features that have not yet been\n                    // inserted - those should be destroyed immediately.\n                    var feat, destroys = [];\n                    for(var i=0, len=removals.length; i<len; ++i) {\n                        feat = removals[i];\n                        if(feat.state === OpenLayers.State.INSERT) {\n                            destroys.push(feat);\n                        } else {\n                            feat.state = OpenLayers.State.DELETE;\n                            this.layer.drawFeature(feat);\n                        }\n                    }\n                    this.layer.destroyFeatures(destroys, {silent: true});\n                    for(var i=0, len=additions.length; i<len; ++i) {\n                        additions[i].state = OpenLayers.State.INSERT;\n                    }\n                } else {\n                    this.layer.destroyFeatures(removals, {silent: true});\n                }\n                this.layer.addFeatures(additions, {silent: true});\n                this.events.triggerEvent(\"aftersplit\", {\n                    source: feature,\n                    features: additions\n                });\n            }\n        }\n        return sourceSplit;\n    },\n    \n    /**\n     * Method: geomsToFeatures\n     * Create new features given a template feature and a list of geometries.\n     *     The list of geometries is modified in place.  The result will be\n     *     a list of new features.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} The feature to be cloned.\n     * geoms - {Array(<OpenLayers.Geometry>)} List of goemetries.  This will\n     *     become a list of new features.\n     */\n    geomsToFeatures: function(feature, geoms) {\n        var clone = feature.clone();\n        delete clone.geometry;\n        var newFeature;\n        for(var i=0, len=geoms.length; i<len; ++i) {\n            // turn results list from geoms to features\n            newFeature = clone.clone();\n            newFeature.geometry = geoms[i];\n            newFeature.state = OpenLayers.State.INSERT;\n            geoms[i] = newFeature;\n        }\n    },\n    \n    /**\n     * Method: destroy\n     * Clean up the control.\n     */\n    destroy: function() {\n        if(this.active) {\n            this.deactivate(); // TODO: this should be handled by the super\n        }\n        OpenLayers.Control.prototype.destroy.call(this);\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.Split\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Lang.js\n * @requires OpenLayers/Util.js\n * @requires OpenLayers/Events/buttonclick.js\n */\n\n/**\n * Class: OpenLayers.Control.LayerSwitcher\n * The LayerSwitcher control displays a table of contents for the map. This\n * allows the user interface to switch between BaseLasyers and to show or hide\n * Overlays. By default the switcher is shown minimized on the right edge of\n * the map, the user may expand it by clicking on the handle.\n *\n * To create the LayerSwitcher outside of the map, pass the Id of a html div\n * as the first argument to the constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.LayerSwitcher = OpenLayers.Class(OpenLayers.Control, {\n\n    /**  \n     * Property: layerStates \n     * {Array(Object)} Basically a copy of the \"state\" of the map's layers \n     *     the last time the control was drawn. We have this in order to avoid\n     *     unnecessarily redrawing the control.\n     */\n    layerStates: null,\n\n  // DOM Elements\n\n    /**\n     * Property: layersDiv\n     * {DOMElement}\n     */\n    layersDiv: null,\n\n    /**\n     * Property: baseLayersDiv\n     * {DOMElement}\n     */\n    baseLayersDiv: null,\n\n    /**\n     * Property: baseLayers\n     * {Array(Object)}\n     */\n    baseLayers: null,\n\n\n    /**\n     * Property: dataLbl\n     * {DOMElement}\n     */\n    dataLbl: null,\n\n    /**\n     * Property: dataLayersDiv\n     * {DOMElement}\n     */\n    dataLayersDiv: null,\n\n    /**\n     * Property: dataLayers\n     * {Array(Object)}\n     */\n    dataLayers: null,\n\n\n    /**\n     * Property: minimizeDiv\n     * {DOMElement}\n     */\n    minimizeDiv: null,\n\n    /**\n     * Property: maximizeDiv\n     * {DOMElement}\n     */\n    maximizeDiv: null,\n\n    /**\n     * APIProperty: ascending\n     * {Boolean}\n     */\n    ascending: true,\n\n    /**\n     * Constructor: OpenLayers.Control.LayerSwitcher\n     *\n     * Parameters:\n     * options - {Object}\n     */\n    initialize: function(options) {\n        OpenLayers.Control.prototype.initialize.apply(this, arguments);\n        this.layerStates = [];\n    },\n\n    /**\n     * APIMethod: destroy\n     */\n    destroy: function() {\n\n        //clear out layers info and unregister their events\n        this.clearLayersArray(\"base\");\n        this.clearLayersArray(\"data\");\n\n        this.map.events.un({\n            buttonclick: this.onButtonClick,\n            addlayer: this.redraw,\n            changelayer: this.redraw,\n            removelayer: this.redraw,\n            changebaselayer: this.redraw,\n            scope: this\n        });\n        this.events.unregister(\"buttonclick\", this, this.onButtonClick);\n\n        OpenLayers.Control.prototype.destroy.apply(this, arguments);\n    },\n\n    /**\n     * Method: setMap\n     *\n     * Properties:\n     * map - {<OpenLayers.Map>}\n     */\n    setMap: function(map) {\n        OpenLayers.Control.prototype.setMap.apply(this, arguments);\n\n        this.map.events.on({\n            addlayer: this.redraw,\n            changelayer: this.redraw,\n            removelayer: this.redraw,\n            changebaselayer: this.redraw,\n            scope: this\n        });\n        if (this.outsideViewport) {\n            this.events.attachToElement(this.div);\n            this.events.register(\"buttonclick\", this, this.onButtonClick);\n        } else {\n            this.map.events.register(\"buttonclick\", this, this.onButtonClick);\n        }\n    },\n\n    /**\n     * Method: draw\n     *\n     * Returns:\n     * {DOMElement} A reference to the DIV DOMElement containing the\n     *     switcher tabs.\n     */\n    draw: function() {\n        OpenLayers.Control.prototype.draw.apply(this);\n\n        // create layout divs\n        this.loadContents();\n\n        // set mode to minimize\n        if(!this.outsideViewport) {\n            this.minimizeControl();\n        }\n\n        // populate div with current info\n        this.redraw();\n\n        return this.div;\n    },\n\n    /**\n     * Method: onButtonClick\n     *\n     * Parameters:\n     * evt - {Event}\n     */\n    onButtonClick: function(evt) {\n        var button = evt.buttonElement;\n        if (button === this.minimizeDiv) {\n            this.minimizeControl();\n        } else if (button === this.maximizeDiv) {\n            this.maximizeControl();\n        } else if (button._layerSwitcher === this.id) {\n            if (button[\"for\"]) {\n                button = document.getElementById(button[\"for\"]);\n            }\n            if (!button.disabled) {\n                if (button.type == \"radio\") {\n                    button.checked = true;\n                    this.map.setBaseLayer(this.map.getLayer(button._layer));\n                } else {\n                    button.checked = !button.checked;\n                    this.updateMap();\n                }\n            }\n        }\n    },\n\n    /**\n     * Method: clearLayersArray\n     * User specifies either \"base\" or \"data\". we then clear all the\n     *     corresponding listeners, the div, and reinitialize a new array.\n     *\n     * Parameters:\n     * layersType - {String}\n     */\n    clearLayersArray: function(layersType) {\n        this[layersType + \"LayersDiv\"].innerHTML = \"\";\n        this[layersType + \"Layers\"] = [];\n    },\n\n\n    /**\n     * Method: checkRedraw\n     * Checks if the layer state has changed since the last redraw() call.\n     *\n     * Returns:\n     * {Boolean} The layer state changed since the last redraw() call.\n     */\n    checkRedraw: function() {\n        if ( !this.layerStates.length ||\n             (this.map.layers.length != this.layerStates.length) ) {\n            return true;\n        }\n\n        for (var i = 0, len = this.layerStates.length; i < len; i++) {\n            var layerState = this.layerStates[i];\n            var layer = this.map.layers[i];\n            if ( (layerState.name != layer.name) ||\n                 (layerState.inRange != layer.inRange) ||\n                 (layerState.id != layer.id) ||\n                 (layerState.visibility != layer.visibility) ) {\n                return true;\n            }\n        }\n\n        return false;\n    },\n\n    /**\n     * Method: redraw\n     * Goes through and takes the current state of the Map and rebuilds the\n     *     control to display that state. Groups base layers into a\n     *     radio-button group and lists each data layer with a checkbox.\n     *\n     * Returns:\n     * {DOMElement} A reference to the DIV DOMElement containing the control\n     */\n    redraw: function() {\n        //if the state hasn't changed since last redraw, no need\n        // to do anything. Just return the existing div.\n        if (!this.checkRedraw()) {\n            return this.div;\n        }\n\n        //clear out previous layers\n        this.clearLayersArray(\"base\");\n        this.clearLayersArray(\"data\");\n\n        var containsOverlays = false;\n        var containsBaseLayers = false;\n\n        // Save state -- for checking layer if the map state changed.\n        // We save this before redrawing, because in the process of redrawing\n        // we will trigger more visibility changes, and we want to not redraw\n        // and enter an infinite loop.\n        var len = this.map.layers.length;\n        this.layerStates = new Array(len);\n        for (var i=0; i <len; i++) {\n            var layer = this.map.layers[i];\n            this.layerStates[i] = {\n                'name': layer.name,\n                'visibility': layer.visibility,\n                'inRange': layer.inRange,\n                'id': layer.id\n            };\n        }\n\n        var layers = this.map.layers.slice();\n        if (!this.ascending) { layers.reverse(); }\n        for(var i=0, len=layers.length; i<len; i++) {\n            var layer = layers[i];\n            var baseLayer = layer.isBaseLayer;\n\n            if (layer.displayInLayerSwitcher) {\n\n                if (baseLayer) {\n                    containsBaseLayers = true;\n                } else {\n                    containsOverlays = true;\n                }\n\n                // only check a baselayer if it is *the* baselayer, check data\n                //  layers if they are visible\n                var checked = (baseLayer) ? (layer == this.map.baseLayer)\n                                          : layer.getVisibility();\n\n                // create input element\n                var inputElem = document.createElement(\"input\"),\n                    // The input shall have an id attribute so we can use\n                    // labels to interact with them.\n                    inputId = OpenLayers.Util.createUniqueID(\n                        this.id + \"_input_\"\n                    );\n\n                inputElem.id = inputId;\n                inputElem.name = (baseLayer) ? this.id + \"_baseLayers\" : layer.name;\n                inputElem.type = (baseLayer) ? \"radio\" : \"checkbox\";\n                inputElem.value = layer.name;\n                inputElem.checked = checked;\n                inputElem.defaultChecked = checked;\n                inputElem.className = \"olButton\";\n                inputElem._layer = layer.id;\n                inputElem._layerSwitcher = this.id;\n\n                if (!baseLayer && !layer.inRange) {\n                    inputElem.disabled = true;\n                }\n\n                // create span\n                var labelSpan = document.createElement(\"label\");\n                // this isn't the DOM attribute 'for', but an arbitrary name we\n                // use to find the appropriate input element in <onButtonClick>\n                labelSpan[\"for\"] = inputElem.id;\n                OpenLayers.Element.addClass(labelSpan, \"labelSpan olButton\");\n                labelSpan._layer = layer.id;\n                labelSpan._layerSwitcher = this.id;\n                if (!baseLayer && !layer.inRange) {\n                    labelSpan.style.color = \"gray\";\n                }\n                labelSpan.innerHTML = layer.name;\n                labelSpan.style.verticalAlign = (baseLayer) ? \"bottom\"\n                                                            : \"baseline\";\n                // create line break\n                var br = document.createElement(\"br\");\n\n\n                var groupArray = (baseLayer) ? this.baseLayers\n                                             : this.dataLayers;\n                groupArray.push({\n                    'layer': layer,\n                    'inputElem': inputElem,\n                    'labelSpan': labelSpan\n                });\n\n\n                var groupDiv = (baseLayer) ? this.baseLayersDiv\n                                           : this.dataLayersDiv;\n                groupDiv.appendChild(inputElem);\n                groupDiv.appendChild(labelSpan);\n                groupDiv.appendChild(br);\n            }\n        }\n\n        // if no overlays, don't display the overlay label\n        this.dataLbl.style.display = (containsOverlays) ? \"\" : \"none\";\n\n        // if no baselayers, don't display the baselayer label\n        this.baseLbl.style.display = (containsBaseLayers) ? \"\" : \"none\";\n\n        return this.div;\n    },\n\n    /**\n     * Method: updateMap\n     * Cycles through the loaded data and base layer input arrays and makes\n     *     the necessary calls to the Map object such that that the map's\n     *     visual state corresponds to what the user has selected in\n     *     the control.\n     */\n    updateMap: function() {\n\n        // set the newly selected base layer\n        for(var i=0, len=this.baseLayers.length; i<len; i++) {\n            var layerEntry = this.baseLayers[i];\n            if (layerEntry.inputElem.checked) {\n                this.map.setBaseLayer(layerEntry.layer, false);\n            }\n        }\n\n        // set the correct visibilities for the overlays\n        for(var i=0, len=this.dataLayers.length; i<len; i++) {\n            var layerEntry = this.dataLayers[i];\n            layerEntry.layer.setVisibility(layerEntry.inputElem.checked);\n        }\n\n    },\n\n    /**\n     * Method: maximizeControl\n     * Set up the labels and divs for the control\n     *\n     * Parameters:\n     * e - {Event}\n     */\n    maximizeControl: function(e) {\n\n        // set the div's width and height to empty values, so\n        // the div dimensions can be controlled by CSS\n        this.div.style.width = \"\";\n        this.div.style.height = \"\";\n\n        this.showControls(false);\n\n        if (e != null) {\n            OpenLayers.Event.stop(e);\n        }\n    },\n\n    /**\n     * Method: minimizeControl\n     * Hide all the contents of the control, shrink the size,\n     *     add the maximize icon\n     *\n     * Parameters:\n     * e - {Event}\n     */\n    minimizeControl: function(e) {\n\n        // to minimize the control we set its div's width\n        // and height to 0px, we cannot just set \"display\"\n        // to \"none\" because it would hide the maximize\n        // div\n        this.div.style.width = \"0px\";\n        this.div.style.height = \"0px\";\n\n        this.showControls(true);\n\n        if (e != null) {\n            OpenLayers.Event.stop(e);\n        }\n    },\n\n    /**\n     * Method: showControls\n     * Hide/Show all LayerSwitcher controls depending on whether we are\n     *     minimized or not\n     *\n     * Parameters:\n     * minimize - {Boolean}\n     */\n    showControls: function(minimize) {\n\n        this.maximizeDiv.style.display = minimize ? \"\" : \"none\";\n        this.minimizeDiv.style.display = minimize ? \"none\" : \"\";\n\n        this.layersDiv.style.display = minimize ? \"none\" : \"\";\n    },\n\n    /**\n     * Method: loadContents\n     * Set up the labels and divs for the control\n     */\n    loadContents: function() {\n\n        // layers list div\n        this.layersDiv = document.createElement(\"div\");\n        this.layersDiv.id = this.id + \"_layersDiv\";\n        OpenLayers.Element.addClass(this.layersDiv, \"layersDiv\");\n\n        this.baseLbl = document.createElement(\"div\");\n        this.baseLbl.innerHTML = OpenLayers.i18n(\"Base Layer\");\n        OpenLayers.Element.addClass(this.baseLbl, \"baseLbl\");\n\n        this.baseLayersDiv = document.createElement(\"div\");\n        OpenLayers.Element.addClass(this.baseLayersDiv, \"baseLayersDiv\");\n\n        this.dataLbl = document.createElement(\"div\");\n        this.dataLbl.innerHTML = OpenLayers.i18n(\"Overlays\");\n        OpenLayers.Element.addClass(this.dataLbl, \"dataLbl\");\n\n        this.dataLayersDiv = document.createElement(\"div\");\n        OpenLayers.Element.addClass(this.dataLayersDiv, \"dataLayersDiv\");\n\n        if (this.ascending) {\n            this.layersDiv.appendChild(this.baseLbl);\n            this.layersDiv.appendChild(this.baseLayersDiv);\n            this.layersDiv.appendChild(this.dataLbl);\n            this.layersDiv.appendChild(this.dataLayersDiv);\n        } else {\n            this.layersDiv.appendChild(this.dataLbl);\n            this.layersDiv.appendChild(this.dataLayersDiv);\n            this.layersDiv.appendChild(this.baseLbl);\n            this.layersDiv.appendChild(this.baseLayersDiv);\n        }\n\n        this.div.appendChild(this.layersDiv);\n\n        // maximize button div\n        var img = OpenLayers.Util.getImageLocation('layer-switcher-maximize.png');\n        this.maximizeDiv = OpenLayers.Util.createAlphaImageDiv(\n                                    \"OpenLayers_Control_MaximizeDiv\",\n                                    null,\n                                    null,\n                                    img,\n                                    \"absolute\");\n        OpenLayers.Element.addClass(this.maximizeDiv, \"maximizeDiv olButton\");\n        this.maximizeDiv.style.display = \"none\";\n\n        this.div.appendChild(this.maximizeDiv);\n\n        // minimize button div\n        var img = OpenLayers.Util.getImageLocation('layer-switcher-minimize.png');\n        this.minimizeDiv = OpenLayers.Util.createAlphaImageDiv(\n                                    \"OpenLayers_Control_MinimizeDiv\",\n                                    null,\n                                    null,\n                                    img,\n                                    \"absolute\");\n        OpenLayers.Element.addClass(this.minimizeDiv, \"minimizeDiv olButton\");\n        this.minimizeDiv.style.display = \"none\";\n\n        this.div.appendChild(this.minimizeDiv);\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.LayerSwitcher\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Feature/Vector.js\n */\n\n/**\n * Class: OpenLayers.Control.DrawFeature\n * The DrawFeature control draws point, line or polygon features on a vector\n * layer when active.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.DrawFeature = OpenLayers.Class(OpenLayers.Control, {\n    \n    /**\n     * Property: layer\n     * {<OpenLayers.Layer.Vector>}\n     */\n    layer: null,\n\n    /**\n     * Property: callbacks\n     * {Object} The functions that are sent to the handler for callback\n     */\n    callbacks: null,\n    \n    /** \n     * APIProperty: events\n     * {<OpenLayers.Events>} Events instance for listeners and triggering\n     *     control specific events.\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * control.events.register(type, obj, listener);\n     * (end)\n     *\n     * Supported event types (in addition to those from <OpenLayers.Control.events>):\n     * featureadded - Triggered when a feature is added\n     */\n    \n    /**\n     * APIProperty: multi\n     * {Boolean} Cast features to multi-part geometries before passing to the\n     *     layer.  Default is false.\n     */\n    multi: false,\n\n    /**\n     * APIProperty: featureAdded\n     * {Function} Called after each feature is added\n     */\n    featureAdded: function() {},\n\n    /**\n     * APIProperty: handlerOptions\n     * {Object} Used to set non-default properties on the control's handler\n     */\n    \n    /**\n     * Constructor: OpenLayers.Control.DrawFeature\n     * \n     * Parameters:\n     * layer - {<OpenLayers.Layer.Vector>} \n     * handler - {<OpenLayers.Handler>} \n     * options - {Object} \n     */\n    initialize: function(layer, handler, options) {\n        OpenLayers.Control.prototype.initialize.apply(this, [options]);\n        this.callbacks = OpenLayers.Util.extend(\n            {\n                done: this.drawFeature,\n                modify: function(vertex, feature) {\n                    this.layer.events.triggerEvent(\n                        \"sketchmodified\", {vertex: vertex, feature: feature}\n                    );\n                },\n                create: function(vertex, feature) {\n                    this.layer.events.triggerEvent(\n                        \"sketchstarted\", {vertex: vertex, feature: feature}\n                    );\n                }\n            },\n            this.callbacks\n        );\n        this.layer = layer;\n        this.handlerOptions = this.handlerOptions || {};\n        this.handlerOptions.layerOptions = OpenLayers.Util.applyDefaults(\n            this.handlerOptions.layerOptions, {\n                renderers: layer.renderers, rendererOptions: layer.rendererOptions\n            }\n        );\n        if (!(\"multi\" in this.handlerOptions)) {\n            this.handlerOptions.multi = this.multi;\n        }\n        var sketchStyle = this.layer.styleMap && this.layer.styleMap.styles.temporary;\n        if(sketchStyle) {\n            this.handlerOptions.layerOptions = OpenLayers.Util.applyDefaults(\n                this.handlerOptions.layerOptions,\n                {styleMap: new OpenLayers.StyleMap({\"default\": sketchStyle})}\n            );\n        }\n        this.handler = new handler(this, this.callbacks, this.handlerOptions);\n    },\n\n    /**\n     * Method: drawFeature\n     */\n    drawFeature: function(geometry) {\n        var feature = new OpenLayers.Feature.Vector(geometry);\n        var proceed = this.layer.events.triggerEvent(\n            \"sketchcomplete\", {feature: feature}\n        );\n        if(proceed !== false) {\n            feature.state = OpenLayers.State.INSERT;\n            this.layer.addFeatures([feature]);\n            this.featureAdded(feature);\n            this.events.triggerEvent(\"featureadded\",{feature : feature});\n        }\n    },\n    \n    /**\n     * APIMethod: insertXY\n     * Insert a point in the current sketch given x & y coordinates.\n     *\n     * Parameters:\n     * x - {Number} The x-coordinate of the point.\n     * y - {Number} The y-coordinate of the point.\n     */\n    insertXY: function(x, y) {\n        if (this.handler && this.handler.line) {\n            this.handler.insertXY(x, y);\n        }\n    },\n\n    /**\n     * APIMethod: insertDeltaXY\n     * Insert a point given offsets from the previously inserted point.\n     *\n     * Parameters:\n     * dx - {Number} The x-coordinate offset of the point.\n     * dy - {Number} The y-coordinate offset of the point.\n     */\n    insertDeltaXY: function(dx, dy) {\n        if (this.handler && this.handler.line) {\n            this.handler.insertDeltaXY(dx, dy);\n        }\n    },\n\n    /**\n     * APIMethod: insertDirectionLength\n     * Insert a point in the current sketch given a direction and a length.\n     *\n     * Parameters:\n     * direction - {Number} Degrees clockwise from the positive x-axis.\n     * length - {Number} Distance from the previously drawn point.\n     */\n    insertDirectionLength: function(direction, length) {\n        if (this.handler && this.handler.line) {\n            this.handler.insertDirectionLength(direction, length);\n        }\n    },\n\n    /**\n     * APIMethod: insertDeflectionLength\n     * Insert a point in the current sketch given a deflection and a length.\n     *     The deflection should be degrees clockwise from the previously \n     *     digitized segment.\n     *\n     * Parameters:\n     * deflection - {Number} Degrees clockwise from the previous segment.\n     * length - {Number} Distance from the previously drawn point.\n     */\n    insertDeflectionLength: function(deflection, length) {\n        if (this.handler && this.handler.line) {\n            this.handler.insertDeflectionLength(deflection, length);\n        }\n    },\n    \n    /**\n     * APIMethod: undo\n     * Remove the most recently added point in the current sketch geometry.\n     *\n     * Returns: \n     * {Boolean} An edit was undone.\n     */\n    undo: function() {\n        return this.handler.undo && this.handler.undo();\n    },\n    \n    /**\n     * APIMethod: redo\n     * Reinsert the most recently removed point resulting from an <undo> call.\n     *     The undo stack is deleted whenever a point is added by other means.\n     *\n     * Returns: \n     * {Boolean} An edit was redone.\n     */\n    redo: function() {\n        return this.handler.redo && this.handler.redo();\n    },\n    \n    /**\n     * APIMethod: finishSketch\n     * Finishes the sketch without including the currently drawn point.\n     *     This method can be called to terminate drawing programmatically\n     *     instead of waiting for the user to end the sketch.\n     */\n    finishSketch: function() {\n        this.handler.finishGeometry();\n    },\n\n    /**\n     * APIMethod: cancel\n     * Cancel the current sketch.  This removes the current sketch and keeps\n     *     the drawing control active.\n     */\n    cancel: function() {\n        this.handler.cancel();\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.DrawFeature\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Handler/Drag.js\n * @requires OpenLayers/Handler/Feature.js\n */\n\n/**\n * Class: OpenLayers.Control.DragFeature\n * The DragFeature control moves a feature with a drag of the mouse. Create a\n * new control with the <OpenLayers.Control.DragFeature> constructor.\n *\n * Inherits From:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.DragFeature = OpenLayers.Class(OpenLayers.Control, {\n\n    /**\n     * APIProperty: geometryTypes\n     * {Array(String)} To restrict dragging to a limited set of geometry types,\n     *     send a list of strings corresponding to the geometry class names.\n     */\n    geometryTypes: null,\n    \n    /**\n     * APIProperty: onStart\n     * {Function} Define this function if you want to know when a drag starts.\n     *     The function should expect to receive two arguments: the feature\n     *     that is about to be dragged and the pixel location of the mouse.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} The feature that is about to be\n     *     dragged.\n     * pixel - {<OpenLayers.Pixel>} The pixel location of the mouse.\n     */\n    onStart: function(feature, pixel) {},\n\n    /**\n     * APIProperty: onDrag\n     * {Function} Define this function if you want to know about each move of a\n     *     feature. The function should expect to receive two arguments: the\n     *     feature that is being dragged and the pixel location of the mouse.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} The feature that was dragged.\n     * pixel - {<OpenLayers.Pixel>} The pixel location of the mouse.\n     */\n    onDrag: function(feature, pixel) {},\n\n    /**\n     * APIProperty: onComplete\n     * {Function} Define this function if you want to know when a feature is\n     *     done dragging. The function should expect to receive two arguments:\n     *     the feature that is being dragged and the pixel location of the\n     *     mouse.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} The feature that was dragged.\n     * pixel - {<OpenLayers.Pixel>} The pixel location of the mouse.\n     */\n    onComplete: function(feature, pixel) {},\n\n    /**\n     * APIProperty: onEnter\n     * {Function} Define this function if you want to know when the mouse\n     *     goes over a feature and thereby makes this feature a candidate\n     *     for dragging.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} The feature that is ready\n     *     to be dragged.\n     */\n    onEnter: function(feature) {},\n\n    /**\n     * APIProperty: onLeave\n     * {Function} Define this function if you want to know when the mouse\n     *     goes out of the feature that was dragged.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} The feature that was dragged.\n     */\n    onLeave: function(feature) {},\n\n    /**\n     * APIProperty: documentDrag\n     * {Boolean} If set to true, mouse dragging will continue even if the\n     *     mouse cursor leaves the map viewport. Default is false.\n     */\n    documentDrag: false,\n    \n    /**\n     * Property: layer\n     * {<OpenLayers.Layer.Vector>}\n     */\n    layer: null,\n    \n    /**\n     * Property: feature\n     * {<OpenLayers.Feature.Vector>}\n     */\n    feature: null,\n\n    /**\n     * Property: dragCallbacks\n     * {Object} The functions that are sent to the drag handler for callback.\n     */\n    dragCallbacks: {},\n\n    /**\n     * Property: featureCallbacks\n     * {Object} The functions that are sent to the feature handler for callback.\n     */\n    featureCallbacks: {},\n    \n    /**\n     * Property: lastPixel\n     * {<OpenLayers.Pixel>}\n     */\n    lastPixel: null,\n\n    /**\n     * Constructor: OpenLayers.Control.DragFeature\n     * Create a new control to drag features.\n     *\n     * Parameters:\n     * layer - {<OpenLayers.Layer.Vector>} The layer containing features to be\n     *     dragged.\n     * options - {Object} Optional object whose properties will be set on the\n     *     control.\n     */\n    initialize: function(layer, options) {\n        OpenLayers.Control.prototype.initialize.apply(this, [options]);\n        this.layer = layer;\n        this.handlers = {\n            drag: new OpenLayers.Handler.Drag(\n                this, OpenLayers.Util.extend({\n                    down: this.downFeature,\n                    move: this.moveFeature,\n                    up: this.upFeature,\n                    out: this.cancel,\n                    done: this.doneDragging\n                }, this.dragCallbacks), {\n                    documentDrag: this.documentDrag\n                }\n            ),\n            feature: new OpenLayers.Handler.Feature(\n                this, this.layer, OpenLayers.Util.extend({\n                    // 'click' and 'clickout' callback are for the mobile\n                    // support: no 'over' or 'out' in touch based browsers.\n                    click: this.clickFeature,\n                    clickout: this.clickoutFeature,\n                    over: this.overFeature,\n                    out: this.outFeature\n                }, this.featureCallbacks),\n                {geometryTypes: this.geometryTypes}\n            )\n        };\n    },\n\n    /**\n     * Method: clickFeature\n     * Called when the feature handler detects a click-in on a feature.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     */\n    clickFeature: function(feature) {\n        if (this.handlers.feature.touch && !this.over && this.overFeature(feature)) {\n            this.handlers.drag.dragstart(this.handlers.feature.evt);\n            // to let the events propagate to the feature handler (click callback)\n            this.handlers.drag.stopDown = false;\n        }\n    },\n\n    /**\n     * Method: clickoutFeature\n     * Called when the feature handler detects a click-out on a feature.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     */\n    clickoutFeature: function(feature) {\n        if (this.handlers.feature.touch && this.over) {\n            this.outFeature(feature);\n            this.handlers.drag.stopDown = true;\n        }\n    },\n\n    /**\n     * APIMethod: destroy\n     * Take care of things that are not handled in superclass\n     */\n    destroy: function() {\n        this.layer = null;\n        OpenLayers.Control.prototype.destroy.apply(this, []);\n    },\n\n    /**\n     * APIMethod: activate\n     * Activate the control and the feature handler.\n     * \n     * Returns:\n     * {Boolean} Successfully activated the control and feature handler.\n     */\n    activate: function() {\n        return (this.handlers.feature.activate() &&\n                OpenLayers.Control.prototype.activate.apply(this, arguments));\n    },\n\n    /**\n     * APIMethod: deactivate\n     * Deactivate the control and all handlers.\n     * \n     * Returns:\n     * {Boolean} Successfully deactivated the control.\n     */\n    deactivate: function() {\n        // the return from the handlers is unimportant in this case\n        this.handlers.drag.deactivate();\n        this.handlers.feature.deactivate();\n        this.feature = null;\n        this.dragging = false;\n        this.lastPixel = null;\n        OpenLayers.Element.removeClass(\n            this.map.viewPortDiv, this.displayClass + \"Over\"\n        );\n        return OpenLayers.Control.prototype.deactivate.apply(this, arguments);\n    },\n\n    /**\n     * Method: overFeature\n     * Called when the feature handler detects a mouse-over on a feature.\n     *     This activates the drag handler.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} The selected feature.\n     *\n     * Returns:\n     * {Boolean} Successfully activated the drag handler.\n     */\n    overFeature: function(feature) {\n        var activated = false;\n        if(!this.handlers.drag.dragging) {\n            this.feature = feature;\n            this.handlers.drag.activate();\n            activated = true;\n            this.over = true;\n            OpenLayers.Element.addClass(this.map.viewPortDiv, this.displayClass + \"Over\");\n            this.onEnter(feature);\n        } else {\n            if(this.feature.id == feature.id) {\n                this.over = true;\n            } else {\n                this.over = false;\n            }\n        }\n        return activated;\n    },\n\n    /**\n     * Method: downFeature\n     * Called when the drag handler detects a mouse-down.\n     *\n     * Parameters:\n     * pixel - {<OpenLayers.Pixel>} Location of the mouse event.\n     */\n    downFeature: function(pixel) {\n        this.lastPixel = pixel;\n        this.onStart(this.feature, pixel);\n    },\n\n    /**\n     * Method: moveFeature\n     * Called when the drag handler detects a mouse-move.  Also calls the\n     *     optional onDrag method.\n     * \n     * Parameters:\n     * pixel - {<OpenLayers.Pixel>} Location of the mouse event.\n     */\n    moveFeature: function(pixel) {\n        var res = this.map.getResolution();\n        this.feature.geometry.move(res * (pixel.x - this.lastPixel.x),\n                                   res * (this.lastPixel.y - pixel.y));\n        this.layer.drawFeature(this.feature);\n        this.lastPixel = pixel;\n        this.onDrag(this.feature, pixel);\n    },\n\n    /**\n     * Method: upFeature\n     * Called when the drag handler detects a mouse-up.\n     * \n     * Parameters:\n     * pixel - {<OpenLayers.Pixel>} Location of the mouse event.\n     */\n    upFeature: function(pixel) {\n        if(!this.over) {\n            this.handlers.drag.deactivate();\n        }\n    },\n\n    /**\n     * Method: doneDragging\n     * Called when the drag handler is done dragging.\n     *\n     * Parameters:\n     * pixel - {<OpenLayers.Pixel>} The last event pixel location.  If this event\n     *     came from a mouseout, this may not be in the map viewport.\n     */\n    doneDragging: function(pixel) {\n        this.onComplete(this.feature, pixel);\n    },\n\n    /**\n     * Method: outFeature\n     * Called when the feature handler detects a mouse-out on a feature.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} The feature that the mouse left.\n     */\n    outFeature: function(feature) {\n        if(!this.handlers.drag.dragging) {\n            this.over = false;\n            this.handlers.drag.deactivate();\n            OpenLayers.Element.removeClass(\n                this.map.viewPortDiv, this.displayClass + \"Over\"\n            );\n            this.onLeave(feature);\n            this.feature = null;\n        } else {\n            if(this.feature.id == feature.id) {\n                this.over = false;\n            }\n        }\n    },\n        \n    /**\n     * Method: cancel\n     * Called when the drag handler detects a mouse-out (from the map viewport).\n     */\n    cancel: function() {\n        this.handlers.drag.deactivate();\n        this.over = false;\n    },\n\n    /**\n     * Method: setMap\n     * Set the map property for the control and all handlers.\n     *\n     * Parameters: \n     * map - {<OpenLayers.Map>} The control's map.\n     */\n    setMap: function(map) {\n        this.handlers.drag.setMap(map);\n        this.handlers.feature.setMap(map);\n        OpenLayers.Control.prototype.setMap.apply(this, arguments);\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.DragFeature\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Handler/Drag.js\n * @requires OpenLayers/Handler/Keyboard.js\n */\n\n/**\n * Class: OpenLayers.Control.ModifyFeature\n * Control to modify features.  When activated, a click renders the vertices\n *     of a feature - these vertices can then be dragged.  By default, the\n *     delete key will delete the vertex under the mouse.  New features are\n *     added by dragging \"virtual vertices\" between vertices.  Create a new\n *     control with the <OpenLayers.Control.ModifyFeature> constructor.\n *\n * Inherits From:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.ModifyFeature = OpenLayers.Class(OpenLayers.Control, {\n\n    /**\n     * APIProperty: bySegment\n     * {Boolean} If set to true, one segment at a time will be editable (the\n     *     one under the mouse cursor on hover). This supports editing much\n     *     larger geometries. This requires the rbush library\n     *     (https://github.com/mourner/rbush) for spatial indexing. Default is\n     *     false.\n     */\n    bySegment: false,\n\n    /**\n     * APIProperty: documentDrag\n     * {Boolean} If set to true, dragging vertices will continue even if the\n     *     mouse cursor leaves the map viewport. Default is false.\n     */\n    documentDrag: false,\n\n    /**\n     * APIProperty: geometryTypes\n     * {Array(String)} To restrict modification to a limited set of geometry\n     *     types, send a list of strings corresponding to the geometry class\n     *     names.\n     */\n    geometryTypes: null,\n\n    /**\n     * APIProperty: clickout\n     * {Boolean} Unselect features when clicking outside any feature.\n     *     Default is true.\n     */\n    clickout: true,\n\n    /**\n     * APIProperty: toggle\n     * {Boolean} Unselect a selected feature on click.\n     *      Default is true.\n     */\n    toggle: true,\n\n    /**\n     * APIProperty: standalone\n     * {Boolean} Set to true to create a control without SelectFeature\n     *     capabilities. Default is false.  If standalone is true, to modify\n     *     a feature, call the <selectFeature> method with the target feature.\n     *     Note that you must call the <unselectFeature> method to finish\n     *     feature modification in standalone mode (before starting to modify\n     *     another feature).\n     */\n    standalone: false,\n\n    /**\n     * Property: layer\n     * {<OpenLayers.Layer.Vector>}\n     */\n    layer: null,\n\n    /**\n     * Property: feature\n     * {<OpenLayers.Feature.Vector>} Feature currently available for modification.\n     */\n    feature: null,\n\n    /**\n     * Property: vertex\n     * {<OpenLayers.Feature.Vector>} Vertex currently being modified.\n     */\n    vertex: null,\n\n    /**\n     * Property: vertices\n     * {Array(<OpenLayers.Feature.Vector>)} Verticies currently available\n     *     for dragging.\n     */\n    vertices: null,\n\n    /**\n     * Property: virtualVertices\n     * {Array(<OpenLayers.Feature.Vector>)} Virtual vertices in the middle\n     *     of each edge.\n     */\n    virtualVertices: null,\n\n    /**\n     * Property: handlers\n     * {Object}\n     */\n    handlers: null,\n\n    /**\n     * APIProperty: deleteCodes\n     * {Array(Integer)} Keycodes for deleting verticies.  Set to null to disable\n     *     vertex deltion by keypress.  If non-null, keypresses with codes\n     *     in this array will delete vertices under the mouse. Default\n     *     is 46 and 68, the 'delete' and lowercase 'd' keys.\n     */\n    deleteCodes: null,\n\n    /**\n     * APIProperty: virtualStyle\n     * {Object} A symbolizer to be used for virtual vertices.\n     */\n    virtualStyle: null,\n\n    /**\n     * APIProperty: vertexRenderIntent\n     * {String} The renderIntent to use for vertices. If no <virtualStyle> is\n     * provided, this renderIntent will also be used for virtual vertices, with\n     * a fillOpacity and strokeOpacity of 0.3. Default is null, which means\n     * that the layer's default style will be used for vertices.\n     */\n    vertexRenderIntent: null,\n\n    /**\n     * APIProperty: mode\n     * {Integer} Bitfields specifying the modification mode. Defaults to\n     *      OpenLayers.Control.ModifyFeature.RESHAPE. To set the mode to a\n     *      combination of options, use the | operator. For example, to allow\n     *      the control to both resize and rotate features, use the following\n     *      syntax\n     * (code)\n     * control.mode = OpenLayers.Control.ModifyFeature.RESIZE |\n     *                OpenLayers.Control.ModifyFeature.ROTATE;\n     *  (end)\n     */\n    mode: null,\n\n    /**\n     * APIProperty: createVertices\n     * {Boolean} Create new vertices by dragging the virtual vertices\n     *     in the middle of each edge. Default is true.\n     */\n    createVertices: true,\n\n    /**\n     * Property: modified\n     * {Boolean} The currently selected feature has been modified.\n     */\n    modified: false,\n\n    /**\n     * Property: radiusHandle\n     * {<OpenLayers.Feature.Vector>} A handle for rotating/resizing a feature.\n     */\n    radiusHandle: null,\n\n    /**\n     * Property: dragHandle\n     * {<OpenLayers.Feature.Vector>} A handle for dragging a feature.\n     */\n    dragHandle: null,\n\n    /**\n     * APIProperty: onModificationStart\n     * {Function} *Deprecated*.  Register for \"beforefeaturemodified\" instead.\n     *     The \"beforefeaturemodified\" event is triggered on the layer before\n     *     any modification begins.\n     *\n     * Optional function to be called when a feature is selected\n     *     to be modified. The function should expect to be called with a\n     *     feature.  This could be used for example to allow to lock the\n     *     feature on server-side.\n     */\n    onModificationStart: function() {},\n\n    /**\n     * APIProperty: onModification\n     * {Function} *Deprecated*.  Register for \"featuremodified\" instead.\n     *     The \"featuremodified\" event is triggered on the layer with each\n     *     feature modification.\n     *\n     * Optional function to be called when a feature has been\n     *     modified.  The function should expect to be called with a feature.\n     */\n    onModification: function() {},\n\n    /**\n     * APIProperty: onModificationEnd\n     * {Function} *Deprecated*.  Register for \"afterfeaturemodified\" instead.\n     *     The \"afterfeaturemodified\" event is triggered on the layer after\n     *     a feature has been modified.\n     *\n     * Optional function to be called when a feature is finished\n     *     being modified.  The function should expect to be called with a\n     *     feature.\n     */\n    onModificationEnd: function() {},\n\n    /**\n     * Constructor: OpenLayers.Control.ModifyFeature\n     * Create a new modify feature control.\n     *\n     * Parameters:\n     * layer - {<OpenLayers.Layer.Vector>} Layer that contains features that\n     *     will be modified.\n     * options - {Object} Optional object whose properties will be set on the\n     *     control.\n     */\n    initialize: function(layer, options) {\n        options = options || {};\n        this.layer = layer;\n        this.vertices = [];\n        this.virtualVertices = [];\n        this.virtualStyle = OpenLayers.Util.extend({},\n            this.layer.style ||\n            this.layer.styleMap.createSymbolizer(null, options.vertexRenderIntent)\n        );\n        this.virtualStyle.fillOpacity = 0.3;\n        this.virtualStyle.strokeOpacity = 0.3;\n        this.deleteCodes = [46, 68];\n        this.mode = OpenLayers.Control.ModifyFeature.RESHAPE;\n        OpenLayers.Control.prototype.initialize.apply(this, [options]);\n        if(!(OpenLayers.Util.isArray(this.deleteCodes))) {\n            this.deleteCodes = [this.deleteCodes];\n        }\n\n        // configure the drag handler\n        var dragCallbacks = {\n            down: function(pixel) {\n                this.vertex = null;\n                var feature = this.layer.getFeatureFromEvent(\n                        this.handlers.drag.evt);\n                if (feature) {\n                    this.dragStart(feature);\n                } else if (this.clickout) {\n                    this._unselect = this.feature;\n                }\n            },\n            move: function(pixel) {\n                delete this._unselect;\n                if (this.vertex) {\n                    this.dragVertex(this.vertex, pixel);\n                }\n            },\n            up: function() {\n                this.handlers.drag.stopDown = false;\n                if (this._unselect) {\n                    this.unselectFeature(this._unselect);\n                    delete this._unselect;\n                }\n            },\n            done: function(pixel) {\n                if (this.vertex) {\n                    this.dragComplete(this.vertex);\n                }\n            }\n        };\n        var _self = this;\n        var dragOptions = {\n            documentDrag: this.documentDrag,\n            setEvent: function(evt) {\n                var feature = _self.feature;\n                _self._lastVertex = feature ?\n                                  feature.layer.getFeatureFromEvent(evt) : null;\n                OpenLayers.Handler.Drag.prototype.setEvent.apply(\n                                                               this, arguments);\n            },\n            stopDown: false\n        };\n\n        // configure the keyboard handler\n        var keyboardOptions = {\n            keydown: this.handleKeypress\n        };\n        this.handlers = {\n            keyboard: new OpenLayers.Handler.Keyboard(this, keyboardOptions),\n            drag: new OpenLayers.Handler.Drag(this, dragCallbacks, dragOptions)\n        };\n\n        if (this.bySegment) {\n            if (!window.rbush) {\n                throw new Error(\"The rbush library is required\");\n            }\n            if (!OpenLayers.Control.ModifyFeature.BySegment) {\n                throw new Error(\"OpenLayers.Control.ModifyFeature.BySegment is missing from the build\");\n            } else {\n                OpenLayers.Util.extend(this, OpenLayers.Control.ModifyFeature.BySegment);\n            }\n        }\n    },\n\n    /**\n     * Method: createVirtualVertex\n     * Create a virtual vertex in the middle of the segment.\n     *\n     * Parameters:\n     * point1 - {<OpenLayers.Geometry.Point>} First point of the segment.\n     * point2 - {<OpenLayers.Geometry.Point>} Second point of the segment.\n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector>} The virtual vertex created.\n     */\n    createVirtualVertex: function(point1, point2) {\n        var x = (point1.x + point2.x) / 2;\n        var y = (point1.y + point2.y) / 2;\n        var point = new OpenLayers.Feature.Vector(\n            new OpenLayers.Geometry.Point(x, y),\n            null, this.virtualStyle\n        );\n        point._sketch = true;\n        return point;\n    },\n\n    /**\n     * APIMethod: destroy\n     * Take care of things that are not handled in superclass.\n     */\n    destroy: function() {\n        if (this.map) {\n            this.map.events.un({\n                \"removelayer\": this.handleMapEvents,\n                \"changelayer\": this.handleMapEvents,\n                scope: this\n            });\n        }\n        this.layer = null;\n        OpenLayers.Control.prototype.destroy.apply(this, []);\n    },\n\n    /**\n     * APIMethod: activate\n     * Activate the control.\n     *\n     * Returns:\n     * {Boolean} Successfully activated the control.\n     */\n    activate: function() {\n        if (OpenLayers.Control.prototype.activate.apply(this, arguments)) {\n            this.moveLayerToTop();\n            this.map.events.on({\n                \"removelayer\": this.handleMapEvents,\n                \"changelayer\": this.handleMapEvents,\n                scope: this\n            });\n            this._lastVertex = null;\n            return this.handlers.keyboard.activate() &&\n                    this.handlers.drag.activate();\n        }\n        return false;\n    },\n\n    /**\n     * APIMethod: deactivate\n     * Deactivate the control.\n     *\n     * Returns:\n     * {Boolean} Successfully deactivated the control.\n     */\n    deactivate: function() {\n        var deactivated = false;\n        // the return from the controls is unimportant in this case\n        if(OpenLayers.Control.prototype.deactivate.apply(this, arguments)) {\n            this.moveLayerBack();\n            this.map.events.un({\n                \"removelayer\": this.handleMapEvents,\n                \"changelayer\": this.handleMapEvents,\n                scope: this\n            });\n            this.layer.removeFeatures(this.vertices, {silent: true});\n            this.layer.removeFeatures(this.virtualVertices, {silent: true});\n            this.vertices = [];\n            this.handlers.drag.deactivate();\n            this.handlers.keyboard.deactivate();\n            var feature = this.feature;\n            if (feature && feature.geometry && feature.layer) {\n                this.unselectFeature(feature);\n            }\n            deactivated = true;\n        }\n        return deactivated;\n    },\n\n    /**\n     * Method: beforeSelectFeature\n     * Called before a feature is selected.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} The feature about to be selected.\n     */\n    beforeSelectFeature: function(feature) {\n        return this.layer.events.triggerEvent(\n            \"beforefeaturemodified\", {feature: feature}\n        );\n    },\n\n    /**\n     * APIMethod: selectFeature\n     * Select a feature for modification in standalone mode. In non-standalone\n     * mode, this method is called when a feature is selected by clicking.\n     * Register a listener to the beforefeaturemodified event and return false\n     * to prevent feature modification.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} the selected feature.\n     */\n    selectFeature: function(feature) {\n        var indexOf = OpenLayers.Util.indexOf;\n\n        if (this.feature === feature ||\n           (this.geometryTypes && indexOf(this.geometryTypes,\n           feature.geometry.CLASS_NAME) == -1)) {\n            return;\n        }\n        if (this.beforeSelectFeature(feature) !== false) {\n            if (this.feature) {\n                this.unselectFeature(this.feature);\n            }\n            this.feature = feature;\n\n            if(indexOf(this.layer.selectedFeatures, feature) == -1){\n                this.layer.selectedFeatures.push(feature);\n            }\n\n            this.layer.drawFeature(feature, 'select');\n            this.modified = false;\n            this.resetVertices();\n            this.onModificationStart(this.feature);\n        }\n        // keep track of geometry modifications\n        var modified = feature.modified;\n        if (feature.geometry && !(modified && modified.geometry)) {\n            this._originalGeometry = feature.geometry.clone();\n        }\n    },\n\n    /**\n     * APIMethod: unselectFeature\n     * Called when the select feature control unselects a feature.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} The unselected feature.\n     */\n    unselectFeature: function(feature) {\n        this.layer.removeFeatures(this.vertices, {silent: true});\n        this.vertices = [];\n        this.layer.destroyFeatures(this.virtualVertices, {silent: true});\n        this.virtualVertices = [];\n        if(this.dragHandle) {\n            this.layer.destroyFeatures([this.dragHandle], {silent: true});\n            delete this.dragHandle;\n        }\n        if(this.radiusHandle) {\n            this.layer.destroyFeatures([this.radiusHandle], {silent: true});\n            delete this.radiusHandle;\n        }\n        this.layer.drawFeature(this.feature, 'default');\n        this.feature = null;\n        OpenLayers.Util.removeItem(this.layer.selectedFeatures, feature);\n        this.onModificationEnd(feature);\n        this.layer.events.triggerEvent(\"afterfeaturemodified\", {\n            feature: feature,\n            modified: this.modified\n        });\n        this.modified = false;\n    },\n\n\n    /**\n     * Method: dragStart\n     * Called by the drag handler before a feature is dragged.  This method is\n     *     used to differentiate between points and vertices\n     *     of higher order geometries.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} The point or vertex about to be\n     *     dragged.\n     */\n    dragStart: function(feature) {\n        var isPoint = feature.geometry.CLASS_NAME ==\n                'OpenLayers.Geometry.Point';\n        if (!this.standalone &&\n                ((!feature._sketch && isPoint) || !feature._sketch)) {\n            if (this.toggle && this.feature === feature) {\n                // mark feature for unselection\n                this._unselect = feature;\n            }\n            this.selectFeature(feature);\n        }\n        if (this.feature &&\n                (feature._sketch || isPoint && feature === this.feature)) {\n            // feature is a drag or virtual handle or point\n            this.vertex = feature;\n            this.handlers.drag.stopDown = true;\n        }\n    },\n\n    /**\n     * Method: dragVertex\n     * Called by the drag handler with each drag move of a vertex.\n     *\n     * Parameters:\n     * vertex - {<OpenLayers.Feature.Vector>} The vertex being dragged.\n     * pixel - {<OpenLayers.Pixel>} Pixel location of the mouse event.\n     */\n    dragVertex: function(vertex, pixel) {\n        var pos = this.map.getLonLatFromViewPortPx(pixel);\n        var geom = vertex.geometry;\n        geom.move(pos.lon - geom.x, pos.lat - geom.y);\n        this.modified = true;\n        /**\n         * Five cases:\n         * 1) dragging a simple point\n         * 2) dragging a virtual vertex\n         * 3) dragging a drag handle\n         * 4) dragging a real vertex\n         * 5) dragging a radius handle\n         */\n        if(this.feature.geometry.CLASS_NAME == \"OpenLayers.Geometry.Point\") {\n            // dragging a simple point\n            this.layer.events.triggerEvent(\"vertexmodified\", {\n                vertex: vertex.geometry,\n                feature: this.feature,\n                pixel: pixel\n            });\n        } else {\n            if(vertex._index) {\n                if (vertex._index == -1) {\n                    vertex._index = OpenLayers.Util.indexOf(vertex.geometry.parent.components, vertex._next);\n                }\n                // dragging a virtual vertex\n                vertex.geometry.parent.addComponent(vertex.geometry,\n                                                    vertex._index);\n                // move from virtual to real vertex\n                delete vertex._index;\n                OpenLayers.Util.removeItem(this.virtualVertices, vertex);\n                this.vertices.push(vertex);\n            } else if(vertex == this.dragHandle) {\n                // dragging a drag handle\n                this.layer.removeFeatures(this.vertices, {silent: true});\n                this.vertices = [];\n                if(this.radiusHandle) {\n                    this.layer.destroyFeatures([this.radiusHandle], {silent: true});\n                    this.radiusHandle = null;\n                }\n            } else if(vertex !== this.radiusHandle) {\n                // dragging a real vertex\n                this.layer.events.triggerEvent(\"vertexmodified\", {\n                    vertex: vertex.geometry,\n                    feature: this.feature,\n                    pixel: pixel\n                });\n            }\n            // dragging a radius handle - no special treatment\n            if(this.virtualVertices.length > 0) {\n                this.layer.destroyFeatures(this.virtualVertices, {silent: true});\n                this.virtualVertices = [];\n            }\n            this.layer.drawFeature(this.feature, this.standalone ? undefined :\n                                            'select');\n        }\n        // keep the vertex on top so it gets the mouseout after dragging\n        // this should be removed in favor of an option to draw under or\n        // maintain node z-index\n        this.layer.drawFeature(vertex);\n    },\n\n    /**\n     * Method: dragComplete\n     * Called by the drag handler when the feature dragging is complete.\n     *\n     * Parameters:\n     * vertex - {<OpenLayers.Feature.Vector>} The vertex being dragged.\n     */\n    dragComplete: function(vertex) {\n        this.resetVertices();\n        this.setFeatureState();\n        this.onModification(this.feature);\n        this.layer.events.triggerEvent(\"featuremodified\",\n                                       {feature: this.feature});\n    },\n\n    /**\n     * Method: setFeatureState\n     * Called when the feature is modified.  If the current state is not\n     *     INSERT or DELETE, the state is set to UPDATE.\n     */\n    setFeatureState: function() {\n        if(this.feature.state != OpenLayers.State.INSERT &&\n           this.feature.state != OpenLayers.State.DELETE) {\n            this.feature.state = OpenLayers.State.UPDATE;\n            if (this.modified && this._originalGeometry) {\n                var feature = this.feature;\n                feature.modified = OpenLayers.Util.extend(feature.modified, {\n                    geometry: this._originalGeometry\n                });\n                delete this._originalGeometry;\n            }\n        }\n    },\n\n    /**\n     * Method: resetVertices\n     */\n    resetVertices: function() {\n        if(this.vertices.length > 0) {\n            this.layer.removeFeatures(this.vertices, {silent: true});\n            this.vertices = [];\n        }\n        if(this.virtualVertices.length > 0) {\n            this.layer.removeFeatures(this.virtualVertices, {silent: true});\n            this.virtualVertices = [];\n        }\n        if(this.dragHandle) {\n            this.layer.destroyFeatures([this.dragHandle], {silent: true});\n            this.dragHandle = null;\n        }\n        if(this.radiusHandle) {\n            this.layer.destroyFeatures([this.radiusHandle], {silent: true});\n            this.radiusHandle = null;\n        }\n        if(this.feature &&\n           this.feature.geometry.CLASS_NAME != \"OpenLayers.Geometry.Point\") {\n            if((this.mode & OpenLayers.Control.ModifyFeature.DRAG)) {\n                this.collectDragHandle();\n            }\n            if((this.mode & (OpenLayers.Control.ModifyFeature.ROTATE |\n                             OpenLayers.Control.ModifyFeature.RESIZE))) {\n                this.collectRadiusHandle();\n            }\n            if(this.mode & OpenLayers.Control.ModifyFeature.RESHAPE){\n                // Don't collect vertices when we're resizing\n                if (!(this.mode & OpenLayers.Control.ModifyFeature.RESIZE)){\n                    this.collectVertices();\n                }\n            }\n        }\n    },\n\n    /**\n     * Method: handleKeypress\n     * Called by the feature handler on keypress.  This is used to delete\n     *     vertices. If the <deleteCode> property is set, vertices will\n     *     be deleted when a feature is selected for modification and\n     *     the mouse is over a vertex.\n     *\n     * Parameters:\n     * evt - {Event} Keypress event.\n     */\n    handleKeypress: function(evt) {\n        var code = evt.keyCode;\n\n        // check for delete key\n        if(this.feature &&\n           OpenLayers.Util.indexOf(this.deleteCodes, code) != -1) {\n            var vertex = this._lastVertex;\n            if (vertex &&\n                    OpenLayers.Util.indexOf(this.vertices, vertex) != -1 &&\n                    !this.handlers.drag.dragging && vertex.geometry.parent) {\n                // remove the vertex\n                vertex.geometry.parent.removeComponent(vertex.geometry);\n                this.layer.events.triggerEvent(\"vertexremoved\", {\n                    vertex: vertex.geometry,\n                    feature: this.feature,\n                    pixel: evt.xy\n                });\n                this.layer.drawFeature(this.feature, this.standalone ?\n                                       undefined : 'select');\n                this.modified = true;\n                this.resetVertices();\n                this.setFeatureState();\n                this.onModification(this.feature);\n                this.layer.events.triggerEvent(\"featuremodified\",\n                                               {feature: this.feature});\n            }\n        }\n    },\n\n    /**\n     * Method: collectVertices\n     * Collect the vertices from the modifiable feature's geometry and push\n     *     them on to the control's vertices array.\n     */\n    collectVertices: function() {\n        this.vertices = [];\n        this.virtualVertices = [];\n        var control = this;\n        function collectComponentVertices(geometry) {\n            var i, vertex, component, len;\n            if(geometry.CLASS_NAME == \"OpenLayers.Geometry.Point\") {\n                vertex = new OpenLayers.Feature.Vector(geometry);\n                vertex._sketch = true;\n                vertex.renderIntent = control.vertexRenderIntent;\n                control.vertices.push(vertex);\n            } else {\n                var numVert = geometry.components.length;\n                if(geometry.CLASS_NAME == \"OpenLayers.Geometry.LinearRing\") {\n                    numVert -= 1;\n                }\n                for(i=0; i<numVert; ++i) {\n                    component = geometry.components[i];\n                    if(component.CLASS_NAME == \"OpenLayers.Geometry.Point\") {\n                        vertex = new OpenLayers.Feature.Vector(component);\n                        vertex._sketch = true;\n                        vertex.renderIntent = control.vertexRenderIntent;\n                        control.vertices.push(vertex);\n                    } else {\n                        collectComponentVertices(component);\n                    }\n                }\n\n                // add virtual vertices in the middle of each edge\n                if (control.createVertices && geometry.CLASS_NAME != \"OpenLayers.Geometry.MultiPoint\") {\n                    for(i=0, len=geometry.components.length; i<len-1; ++i) {\n                        var prevVertex = geometry.components[i];\n                        var nextVertex = geometry.components[i + 1];\n                        if(prevVertex.CLASS_NAME == \"OpenLayers.Geometry.Point\" &&\n                           nextVertex.CLASS_NAME == \"OpenLayers.Geometry.Point\") {\n                            var point = control.createVirtualVertex.call(control, prevVertex, nextVertex);\n                            // set the virtual parent and intended index\n                            point.geometry.parent = geometry;\n                            point._index = i + 1;\n                            control.virtualVertices.push(point);\n                        }\n                    }\n                }\n            }\n        }\n        collectComponentVertices.call(this, this.feature.geometry);\n        this.layer.addFeatures(this.virtualVertices, {silent: true});\n        this.layer.addFeatures(this.vertices, {silent: true});\n    },\n\n    /**\n     * Method: collectDragHandle\n     * Collect the drag handle for the selected geometry.\n     */\n    collectDragHandle: function() {\n        var geometry = this.feature.geometry;\n        var center = geometry.getBounds().getCenterLonLat();\n        var originGeometry = new OpenLayers.Geometry.Point(\n            center.lon, center.lat\n        );\n        var origin = new OpenLayers.Feature.Vector(originGeometry);\n        originGeometry.move = function(x, y) {\n            OpenLayers.Geometry.Point.prototype.move.call(this, x, y);\n            geometry.move(x, y);\n        };\n        origin._sketch = true;\n        this.dragHandle = origin;\n        this.dragHandle.renderIntent = this.vertexRenderIntent;\n        this.layer.addFeatures([this.dragHandle], {silent: true});\n    },\n\n    /**\n     * Method: collectRadiusHandle\n     * Collect the radius handle for the selected geometry.\n     */\n    collectRadiusHandle: function() {\n        var geometry = this.feature.geometry;\n        var bounds = geometry.getBounds();\n        var center = bounds.getCenterLonLat();\n        var originGeometry = new OpenLayers.Geometry.Point(\n            center.lon, center.lat\n        );\n        var radiusGeometry = new OpenLayers.Geometry.Point(\n            bounds.right, bounds.bottom\n        );\n        var radius = new OpenLayers.Feature.Vector(radiusGeometry);\n        var resize = (this.mode & OpenLayers.Control.ModifyFeature.RESIZE);\n        var reshape = (this.mode & OpenLayers.Control.ModifyFeature.RESHAPE);\n        var rotate = (this.mode & OpenLayers.Control.ModifyFeature.ROTATE);\n\n        radiusGeometry.move = function(x, y) {\n            OpenLayers.Geometry.Point.prototype.move.call(this, x, y);\n            var dx1 = this.x - originGeometry.x;\n            var dy1 = this.y - originGeometry.y;\n            var dx0 = dx1 - x;\n            var dy0 = dy1 - y;\n            if(rotate) {\n                var a0 = Math.atan2(dy0, dx0);\n                var a1 = Math.atan2(dy1, dx1);\n                var angle = a1 - a0;\n                angle *= 180 / Math.PI;\n                geometry.rotate(angle, originGeometry);\n            }\n            if(resize) {\n                var scale, ratio;\n                // 'resize' together with 'reshape' implies that the aspect\n                // ratio of the geometry will not be preserved whilst resizing\n                if (reshape) {\n                    scale = dy1 / dy0;\n                    ratio = (dx1 / dx0) / scale;\n                } else {\n                    var l0 = Math.sqrt((dx0 * dx0) + (dy0 * dy0));\n                    var l1 = Math.sqrt((dx1 * dx1) + (dy1 * dy1));\n                    scale = l1 / l0;\n                }\n                geometry.resize(scale, originGeometry, ratio);\n            }\n        };\n        radius._sketch = true;\n        this.radiusHandle = radius;\n        this.radiusHandle.renderIntent = this.vertexRenderIntent;\n        this.layer.addFeatures([this.radiusHandle], {silent: true});\n    },\n\n    /**\n     * Method: setMap\n     * Set the map property for the control and all handlers.\n     *\n     * Parameters:\n     * map - {<OpenLayers.Map>} The control's map.\n     */\n    setMap: function(map) {\n        this.handlers.drag.setMap(map);\n        OpenLayers.Control.prototype.setMap.apply(this, arguments);\n    },\n\n    /**\n     * Method: handleMapEvents\n     *\n     * Parameters:\n     * evt - {Object}\n     */\n    handleMapEvents: function(evt) {\n        if (evt.type == \"removelayer\" || evt.property == \"order\") {\n            this.moveLayerToTop();\n        }\n    },\n\n    /**\n     * Method: moveLayerToTop\n     * Moves the layer for this handler to the top, so mouse events can reach\n     * it.\n     */\n    moveLayerToTop: function() {\n        var index = Math.max(this.map.Z_INDEX_BASE['Feature'] - 1,\n            this.layer.getZIndex()) + 1;\n        this.layer.setZIndex(index);\n\n    },\n\n    /**\n     * Method: moveLayerBack\n     * Moves the layer back to the position determined by the map's layers\n     * array.\n     */\n    moveLayerBack: function() {\n        var index = this.layer.getZIndex() - 1;\n        if (index >= this.map.Z_INDEX_BASE['Feature']) {\n            this.layer.setZIndex(index);\n        } else {\n            this.map.setLayerZIndex(this.layer,\n                this.map.getLayerIndex(this.layer));\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.ModifyFeature\"\n});\n\n/**\n * Constant: RESHAPE\n * {Integer} Constant used to make the control work in reshape mode\n */\nOpenLayers.Control.ModifyFeature.RESHAPE = 1;\n/**\n * Constant: RESIZE\n * {Integer} Constant used to make the control work in resize mode\n */\nOpenLayers.Control.ModifyFeature.RESIZE = 2;\n/**\n * Constant: ROTATE\n * {Integer} Constant used to make the control work in rotate mode\n */\nOpenLayers.Control.ModifyFeature.ROTATE = 4;\n/**\n * Constant: DRAG\n * {Integer} Constant used to make the control work in drag mode\n */\nOpenLayers.Control.ModifyFeature.DRAG = 8;\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/BaseTypes.js\n * @requires OpenLayers/Control/ModifyFeature.js\n * @requires OpenLayers/Geometry.js\n * @requires OpenLayers/Handler/Hover.js\n */\n\n/**\n * Class: OpenLayers.Control.ModifyFeature.BySegment\n * A mixin for the ModifyFeature control to allow editing of large geometries\n *     by editing one segment at a time, the segment which is closest to the\n *     mouse cursor on hover.\n *\n * To use this is in combination with OpenLayers.Control.ModifyFeature include\n *     this file in your build and set bySegment to true on the ModifyFeature\n *     control. Also note this code depends on the rbush library which can be\n *     found at: https://github.com/mourner/rbush\n */\nOpenLayers.Control.ModifyFeature.BySegment = {\n\n    /**\n     * APIProperty: hoverTolerance\n     * {Integer} Number of pixels around the hover location to query the\n     *     spatial index in order to find the closest segment. Defaults to 25.\n     */\n    hoverTolerance: 25,\n\n    /**\n     * Method: collectVertices\n     * Collect the vertices from the modifiable feature's geometry and push\n     *     them on to the control's vertices array.\n     */\n    collectVertices: OpenLayers.Function.Void,\n\n    /**\n     * Method: setMap\n     * Set the map property for the control and all handlers.\n     *\n     * Parameters:\n     * map - {<OpenLayers.Map>} The control's map.\n     */\n    setMap: function(map) {\n        OpenLayers.Control.ModifyFeature.prototype.setMap.apply(this, arguments);\n        if (!this.handlers.hover) {\n            this.handlers.hover = new OpenLayers.Handler.Hover(this, { \n                move: this.onHoverMove\n            });\n        }\n        this.handlers.hover.setMap(map);\n        this.layer.events.on({\n            beforefeaturemodified: this.createSpatialIndex,\n            afterfeaturemodified: this.deactivateHover,\n            scope: this\n       });\n    },\n\n    /**\n     * Method: deactivateHover\n     * Deactivate the hover handler.\n     */\n    deactivateHover: function() {\n        this.handlers.hover.deactivate();\n    },\n\n    /**\n     * APIMethod: destroy\n     * Take care of things that are not handled in superclass.\n     */\n    destroy: function() {\n        if (this.layer) {\n            this.layer.events.un({\n                beforefeaturemodified: this.createSpatialIndex,\n                afterfeaturemodified: this.deactivateHover,\n                scope: this\n            });\n        }\n        OpenLayers.Control.ModifyFeature.prototype.destroy.apply(this, []);\n    },\n\n    /**\n     * Method: dragStart\n     * Called by the drag handler before a feature is dragged.  This method is\n     *     used to differentiate between points and vertices\n     *     of higher order geometries.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} The point or vertex about to be\n     *     dragged.\n     */\n    dragStart: function(feature) {\n        OpenLayers.Control.ModifyFeature.prototype.dragStart.apply(this, arguments);\n        this.vertexGeom = feature.geometry.clone();\n        if (this.handlers.drag.stopDown) {\n            this.handlers.hover.deactivate();\n        }\n    },\n\n    /**\n     * Method: dragComplete\n     * Called by the drag handler when the feature dragging is complete.\n     *\n     * Parameters:\n     * vertex - {<OpenLayers.Feature.Vector>} The vertex being dragged.\n     */\n    dragComplete: function(vertex) {\n        this.updateSpatialIndex(vertex);\n        OpenLayers.Control.ModifyFeature.prototype.dragComplete.apply(this, arguments);\n        this.handlers.hover.activate();\n    },\n\n    /**\n     * Method: onHoverMove\n     * Move listener of the hover handler. Draws the 2 vertices of the segment\n     * closest to the mouse cursor, and one virtual vertex in the center of the\n     * segment.\n     *\n     * Parameters:\n     * evt - {Object} The event object.\n     */\n    onHoverMove: function(evt) {\n        if(this.vertices.length > 0) {\n            this.layer.removeFeatures(this.vertices, {silent: true});\n            this.vertices = [];\n        }\n        if(this.virtualVertices.length > 0) {\n            this.layer.removeFeatures(this.virtualVertices, {silent: true});\n            this.virtualVertices = [];\n        }\n        var pixel = evt.xy;\n        var llPx = pixel.add(-this.hoverTolerance/2, this.hoverTolerance/2);\n        var urPx = pixel.add(this.hoverTolerance/2, -this.hoverTolerance/2);\n        var ll = this.map.getLonLatFromPixel(llPx);\n        var ur = this.map.getLonLatFromPixel(urPx);\n        var hits = this.tree.search([ll.lon, ll.lat, ur.lon, ur.lat]);\n        if (hits.length > 0) {\n            var center = this.map.getLonLatFromPixel(pixel);\n            var centerPt = new OpenLayers.Geometry.Point(center.lon, center.lat);\n            var d = Number.MAX_VALUE;\n            var closestHit;\n            for (var i=0, ii = hits.length; i<ii; ++i) {\n                var hit = hits[i];\n                var distance = OpenLayers.Geometry.distanceSquaredToSegment(centerPt, {\n                    x1: hit.point1.x,\n                    x2: hit.point2.x,\n                    y1: hit.point1.y,\n                    y2: hit.point2.y\n                }).distance;\n                if (distance < d) {\n                    closestHit = hit;\n                }\n                d = distance;\n            }\n            var createVertex = function(geom) {\n                var vertex = new OpenLayers.Feature.Vector(geom);\n                vertex._sketch = true;\n                vertex.renderIntent = this.vertexRenderIntent;\n                this.vertices.push(vertex);\n            };\n            createVertex.call(this, closestHit.point1);\n            createVertex.call(this, closestHit.point2);\n            // create virtual vertex\n            var point = this.createVirtualVertex(closestHit.point1, closestHit.point2);\n            point._previous = closestHit.point1;\n            point._next = closestHit.point2;\n            point._index = -1;\n            point.geometry.parent = closestHit.point1.parent;\n            this.virtualVertices.push(point);\n        }\n        this.layer.addFeatures(this.vertices, {silent: true});\n        this.layer.addFeatures(this.virtualVertices, {silent: true});\n    },\n\n    /**\n     * Method: createSpatialIndex\n     * Creates a spatial index for all the segments of the feature's geometry.\n     *\n     * Parameters:\n     * evt - {Object} The event object.\n     */\n    createSpatialIndex: function(evt) {\n        var feature = evt.feature;\n        var data = [];\n        function collectComponentVertices(geometry) {\n            var i, vertex, component, nextComponent, len;\n            if (geometry.CLASS_NAME !== \"OpenLayers.Geometry.Point\") {\n                var numVert = geometry.components.length;\n                if (geometry.CLASS_NAME == \"OpenLayers.Geometry.LinearRing\"\n                || geometry.CLASS_NAME == \"OpenLayers.Geometry.LineString\") {\n                    numVert -= 1;\n                }\n                nextComponent = geometry.components[0];\n                for (i=1; i<=numVert; ++i) {\n                    component = nextComponent;\n                    nextComponent = geometry.components[i];\n                    if (component.CLASS_NAME == \"OpenLayers.Geometry.Point\") {\n                        var bbox = this.createBBOX(component, nextComponent);\n                        bbox.point1 = component;\n                        bbox.point2 = nextComponent;\n                        data.push(bbox);\n                    } else {\n                        collectComponentVertices.call(this, component);\n                    }\n                }\n            }\n        }\n        collectComponentVertices.call(this, feature.geometry);\n        this.tree = window.rbush();\n        this.tree.load(data);\n        this.handlers.hover.activate();\n    },\n\n    /**\n     * Method: createBBOX\n     * Create an array of 4 points (minx, miny, maxx, maxy) that represents the\n     * bounding box of the 2 provided points.\n     *\n     * Parameters:\n     * point1 - {<OpenLayers.Geometry.Point>} The first point.\n     * point2 - {<OpenLayers.Geometry.Point>} The second point.\n     *\n     * Returns: {Array(float)}\n     */\n    createBBOX: function(point1, point2) {\n        return [\n            point1.x < point2.x ? point1.x : point2.x,\n            point1.y < point2.y ? point1.y : point2.y,\n            point1.x < point2.x ? point2.x : point1.x,\n            point1.y < point2.y ? point2.y : point1.y\n        ];\n    },\n\n    /**\n     * Method: updateSpatialIndex\n     * Update the spatial index after a (virtual) vertex gets moved.\n     *\n     * Parameters:\n     * vertex - {<OpenLayers.Feature.Vector>}\n     */\n    updateSpatialIndex: function(vertex) {\n        // this.vertexGeom is the original location of the vertex\n        var hits = this.tree.search([\n            this.vertexGeom.x, \n            this.vertexGeom.y, \n            this.vertexGeom.x, \n            this.vertexGeom.y\n        ]);\n        var bbox, i, ii;\n        // virtual vertex\n        if (vertex._previous) {\n            // split segment into 2 and add them to spatial index\n            bbox = this.createBBOX(vertex._previous, vertex.geometry);\n            bbox.point1 = vertex._previous;\n            bbox.point2 = vertex.geometry;\n            this.tree.insert(bbox);\n            bbox = this.createBBOX(vertex.geometry, vertex._next);\n            bbox.point1 = vertex.geometry;\n            bbox.point2 = vertex._next;\n            this.tree.insert(bbox);\n            this.tree.remove(hits[0]);\n            delete vertex._next;\n            delete vertex._previous;\n        } else { // normal vertex\n            for (i=0, ii=hits.length; i<ii; ++i) {\n                var hit = hits[i];\n                if (this.vertexGeom.equals(hit.point1)) {\n                    bbox = this.createBBOX(vertex.geometry, hit.point2);\n                    bbox.point1 = vertex.geometry;\n                    bbox.point2 = hit.point2;\n                } else {\n                    bbox = this.createBBOX(vertex.geometry, hit.point1);\n                    bbox.point1 = hit.point1;\n                    bbox.point2 = vertex.geometry;\n                }\n                this.tree.insert(bbox);\n                this.tree.remove(hit);\n            }\n        }\n        this.vertexGeom.destroy();\n        this.vertexGeom = null;\n    }\n\n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Events/buttonclick.js\n */\n\n/**\n * Class: OpenLayers.Control.Panel\n * The Panel control is a container for other controls. With it toolbars\n * may be composed.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.Panel = OpenLayers.Class(OpenLayers.Control, {\n    /**\n     * Property: controls\n     * {Array(<OpenLayers.Control>)}\n     */\n    controls: null,    \n    \n    /**\n     * APIProperty: autoActivate\n     * {Boolean} Activate the control when it is added to a map.  Default is\n     *     true.\n     */\n    autoActivate: true,\n\n    /** \n     * APIProperty: defaultControl\n     * {<OpenLayers.Control>} The control which is activated when the control is\n     * activated (turned on), which also happens at instantiation.\n     * If <saveState> is true, <defaultControl> will be nullified after the\n     * first activation of the panel.\n     */\n    defaultControl: null,\n    \n    /**\n     * APIProperty: saveState\n     * {Boolean} If set to true, the active state of this panel's controls will\n     * be stored on panel deactivation, and restored on reactivation. Default\n     * is false.\n     */\n    saveState: false,\n      \n    /**\n     * APIProperty: allowDepress\n     * {Boolean} If is true the <OpenLayers.Control.TYPE_TOOL> controls can \n     *     be deactivated by clicking the icon that represents them.  Default \n     *     is false.\n     */\n    allowDepress: false,\n    \n    /**\n     * Property: activeState\n     * {Object} stores the active state of this panel's controls.\n     */\n    activeState: null,\n\n    /**\n     * Constructor: OpenLayers.Control.Panel\n     * Create a new control panel.\n     *\n     * Each control in the panel is represented by an icon. When clicking \n     *     on an icon, the <activateControl> method is called.\n     *\n     * Specific properties for controls on a panel:\n     * type - {Number} One of <OpenLayers.Control.TYPE_TOOL>,\n     *     <OpenLayers.Control.TYPE_TOGGLE>, <OpenLayers.Control.TYPE_BUTTON>.\n     *     If not provided, <OpenLayers.Control.TYPE_TOOL> is assumed.\n     * title - {string} Text displayed when mouse is over the icon that \n     *     represents the control.     \n     *\n     * The <OpenLayers.Control.type> of a control determines the behavior when\n     * clicking its icon:\n     * <OpenLayers.Control.TYPE_TOOL> - The control is activated and other\n     *     controls of this type in the same panel are deactivated. This is\n     *     the default type.\n     * <OpenLayers.Control.TYPE_TOGGLE> - The active state of the control is\n     *     toggled.\n     * <OpenLayers.Control.TYPE_BUTTON> - The\n     *     <OpenLayers.Control.Button.trigger> method of the control is called,\n     *     but its active state is not changed.\n     *\n     * If a control is <OpenLayers.Control.active>, it will be drawn with the\n     * olControl[Name]ItemActive class, otherwise with the\n     * olControl[Name]ItemInactive class.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be used\n     *     to extend the control.\n     */\n    initialize: function(options) {\n        OpenLayers.Control.prototype.initialize.apply(this, [options]);\n        this.controls = [];\n        this.activeState = {};\n    },\n\n    /**\n     * APIMethod: destroy\n     */\n    destroy: function() {\n        if (this.map) {\n            this.map.events.unregister(\"buttonclick\", this, this.onButtonClick);\n        }\n        OpenLayers.Control.prototype.destroy.apply(this, arguments);\n        for (var ctl, i = this.controls.length - 1; i >= 0; i--) {\n            ctl = this.controls[i];\n            if (ctl.events) {\n                ctl.events.un({\n                    activate: this.iconOn,\n                    deactivate: this.iconOff\n                });\n            }\n            ctl.panel_div = null;\n        }\n        this.activeState = null;\n    },\n\n    /**\n     * APIMethod: activate\n     */\n    activate: function() {\n        if (OpenLayers.Control.prototype.activate.apply(this, arguments)) {\n            var control;\n            for (var i=0, len=this.controls.length; i<len; i++) {\n                control = this.controls[i];\n                if (control === this.defaultControl ||\n                            (this.saveState && this.activeState[control.id])) {\n                    control.activate();\n                }\n            }    \n            if (this.saveState === true) {\n                this.defaultControl = null;\n            }\n            this.redraw();\n            return true;\n        } else {\n            return false;\n        }\n    },\n    \n    /**\n     * APIMethod: deactivate\n     */\n    deactivate: function() {\n        if (OpenLayers.Control.prototype.deactivate.apply(this, arguments)) {\n            var control;\n            for (var i=0, len=this.controls.length; i<len; i++) {\n                control = this.controls[i];\n                this.activeState[control.id] = control.deactivate();\n            }    \n            this.redraw();\n            return true;\n        } else {\n            return false;\n        }\n    },\n    \n    /**\n     * Method: draw\n     *\n     * Returns:\n     * {DOMElement}\n     */    \n    draw: function() {\n        OpenLayers.Control.prototype.draw.apply(this, arguments);\n        if (this.outsideViewport) {\n            this.events.attachToElement(this.div);\n            this.events.register(\"buttonclick\", this, this.onButtonClick);\n        } else {\n            this.map.events.register(\"buttonclick\", this, this.onButtonClick);\n        }\n        this.addControlsToMap(this.controls);\n        return this.div;\n    },\n\n    /**\n     * Method: redraw\n     */\n    redraw: function() {\n        for (var l=this.div.childNodes.length, i=l-1; i>=0; i--) {\n            this.div.removeChild(this.div.childNodes[i]);\n        }\n        this.div.innerHTML = \"\";\n        if (this.active) {\n            for (var i=0, len=this.controls.length; i<len; i++) {\n                this.div.appendChild(this.controls[i].panel_div);\n            }\n        }\n    },\n    \n    /**\n     * APIMethod: activateControl\n     * This method is called when the user click on the icon representing a \n     *     control in the panel.\n     *\n     * Parameters:\n     * control - {<OpenLayers.Control>}\n     */\n    activateControl: function (control) {\n        if (!this.active) { return false; }\n        if (control.type == OpenLayers.Control.TYPE_BUTTON) {\n            control.trigger();\n            return;\n        }\n        if (control.type == OpenLayers.Control.TYPE_TOGGLE) {\n            if (control.active) {\n                control.deactivate();\n            } else {\n                control.activate();\n            }\n            return;\n        }\n        if (this.allowDepress && control.active) {\n            control.deactivate();\n        } else {\n            var c;\n            for (var i=0, len=this.controls.length; i<len; i++) {\n                c = this.controls[i];\n                if (c != control &&\n                   (c.type === OpenLayers.Control.TYPE_TOOL || c.type == null)) {\n                    c.deactivate();\n                }\n            }\n            control.activate();\n        }\n    },\n\n    /**\n     * APIMethod: addControls\n     * To build a toolbar, you add a set of controls to it. addControls\n     * lets you add a single control or a list of controls to the \n     * Control Panel.\n     *\n     * Parameters:\n     * controls - {<OpenLayers.Control>} Controls to add in the panel.\n     */    \n    addControls: function(controls) {\n        if (!(OpenLayers.Util.isArray(controls))) {\n            controls = [controls];\n        }\n        this.controls = this.controls.concat(controls);\n\n        for (var i=0, len=controls.length; i<len; i++) {\n            var control = controls[i],\n                element = this.createControlMarkup(control);\n            OpenLayers.Element.addClass(element, \n                                        control.displayClass + \"ItemInactive\");\n            OpenLayers.Element.addClass(element, \"olButton\");\n            if (control.title != \"\"  && !element.title) {\n                element.title = control.title;\n            }\n            control.panel_div = element;\n        }\n\n        if (this.map) { // map.addControl() has already been called on the panel\n            this.addControlsToMap(controls);\n            this.redraw();\n        }\n    },\n\n    /**\n     * APIMethod: createControlMarkup\n     * This function just creates a div for the control. If specific HTML\n     * markup is needed this function can be overridden in specific classes,\n     * or at panel instantiation time:\n     *\n     * Example:\n     * (code)\n     * var panel = new OpenLayers.Control.Panel({\n     *     defaultControl: control,\n     *     // override createControlMarkup to create actual buttons\n     *     // including texts wrapped into span elements.\n     *     createControlMarkup: function(control) {\n     *         var button = document.createElement('button'),\n     *             span = document.createElement('span');\n     *         if (control.text) {\n     *             span.innerHTML = control.text;\n     *         }\n     *         return button;\n     *     }\n     *  });\n     * (end)\n     *\n     * Parameters:\n     * control - {<OpenLayers.Control>} The control to create the HTML\n     *     markup for.\n     *\n     * Returns:\n     * {DOMElement} The markup.\n     */\n    createControlMarkup: function(control) {\n        return document.createElement(\"div\");\n    },\n   \n    /**\n     * Method: addControlsToMap\n     * Only for internal use in draw() and addControls() methods.\n     *\n     * Parameters:\n     * controls - {Array(<OpenLayers.Control>)} Controls to add into map.\n     */         \n    addControlsToMap: function (controls) {\n        var control;\n        for (var i=0, len=controls.length; i<len; i++) {\n            control = controls[i];\n            if (control.autoActivate === true) {\n                control.autoActivate = false;\n                this.map.addControl(control);\n                control.autoActivate = true;\n            } else {\n                this.map.addControl(control);\n                control.deactivate();\n            }\n            control.events.on({\n                activate: this.iconOn,\n                deactivate: this.iconOff\n            });\n        }  \n    },\n\n    /**\n     * Method: iconOn\n     * Internal use, for use only with \"controls[i].events.on/un\".\n     */\n     iconOn: function() {\n        var d = this.panel_div; // \"this\" refers to a control on panel!\n        var re = new RegExp(\"\\\\b(\" + this.displayClass + \"Item)Inactive\\\\b\");\n        d.className = d.className.replace(re, \"$1Active\");\n    },\n\n    /**\n     * Method: iconOff\n     * Internal use, for use only with \"controls[i].events.on/un\".\n     */\n     iconOff: function() {\n        var d = this.panel_div; // \"this\" refers to a control on panel!\n        var re = new RegExp(\"\\\\b(\" + this.displayClass + \"Item)Active\\\\b\");\n        d.className = d.className.replace(re, \"$1Inactive\");\n    },\n    \n    /**\n     * Method: onButtonClick\n     *\n     * Parameters:\n     * evt - {Event}\n     */\n    onButtonClick: function (evt) {\n        var controls = this.controls,\n            button = evt.buttonElement;\n        for (var i=controls.length-1; i>=0; --i) {\n            if (controls[i].panel_div === button) {\n                this.activateControl(controls[i]);\n                break;\n            }\n        }\n    },\n\n    /**\n     * APIMethod: getControlsBy\n     * Get a list of controls with properties matching the given criteria.\n     *\n     * Parameters:\n     * property - {String} A control property to be matched.\n     * match - {String | Object} A string to match.  Can also be a regular\n     *     expression literal or object.  In addition, it can be any object\n     *     with a method named test.  For regular expressions or other, if\n     *     match.test(control[property]) evaluates to true, the control will be\n     *     included in the array returned.  If no controls are found, an empty\n     *     array is returned.\n     *\n     * Returns:\n     * {Array(<OpenLayers.Control>)} A list of controls matching the given criteria.\n     *     An empty array is returned if no matches are found.\n     */\n    getControlsBy: function(property, match) {\n        var test = (typeof match.test == \"function\");\n        var found = OpenLayers.Array.filter(this.controls, function(item) {\n            return item[property] == match || (test && match.test(item[property]));\n        });\n        return found;\n    },\n\n    /**\n     * APIMethod: getControlsByName\n     * Get a list of controls with names matching the given name.\n     *\n     * Parameters:\n     * match - {String | Object} A control name.  The name can also be a regular\n     *     expression literal or object.  In addition, it can be any object\n     *     with a method named test.  For regular expressions or other, if\n     *     name.test(control.name) evaluates to true, the control will be included\n     *     in the list of controls returned.  If no controls are found, an empty\n     *     array is returned.\n     *\n     * Returns:\n     * {Array(<OpenLayers.Control>)} A list of controls matching the given name.\n     *     An empty array is returned if no matches are found.\n     */\n    getControlsByName: function(match) {\n        return this.getControlsBy(\"name\", match);\n    },\n\n    /**\n     * APIMethod: getControlsByClass\n     * Get a list of controls of a given type (CLASS_NAME).\n     *\n     * Parameters:\n     * match - {String | Object} A control class name.  The type can also be a\n     *     regular expression literal or object.  In addition, it can be any\n     *     object with a method named test.  For regular expressions or other,\n     *     if type.test(control.CLASS_NAME) evaluates to true, the control will\n     *     be included in the list of controls returned.  If no controls are\n     *     found, an empty array is returned.\n     *\n     * Returns:\n     * {Array(<OpenLayers.Control>)} A list of controls matching the given type.\n     *     An empty array is returned if no matches are found.\n     */\n    getControlsByClass: function(match) {\n        return this.getControlsBy(\"CLASS_NAME\", match);\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.Panel\"\n});\n\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Feature/Vector.js\n * @requires OpenLayers/Handler/Feature.js\n * @requires OpenLayers/Layer/Vector/RootContainer.js\n */\n\n/**\n * Class: OpenLayers.Control.SelectFeature\n * The SelectFeature control selects vector features from a given layer on\n * click or hover.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.SelectFeature = OpenLayers.Class(OpenLayers.Control, {\n\n    /**\n     * APIProperty: events\n     * {<OpenLayers.Events>} Events instance for listeners and triggering\n     *     control specific events.\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * control.events.register(type, obj, listener);\n     * (end)\n     *\n     * Supported event types (in addition to those from <OpenLayers.Control.events>):\n     * beforefeaturehighlighted - Triggered before a feature is highlighted\n     * featurehighlighted - Triggered when a feature is highlighted\n     * featureunhighlighted - Triggered when a feature is unhighlighted\n     * boxselectionstart - Triggered before box selection starts\n     * boxselectionend - Triggered after box selection ends\n     */\n\n    /**\n     * APIProperty: multipleKey\n     * {String} An event modifier ('altKey' or 'shiftKey') that temporarily sets\n     *     the <multiple> property to true.  Default is null.\n     */\n    multipleKey: null,\n\n    /**\n     * APIProperty: toggleKey\n     * {String} An event modifier ('altKey' or 'shiftKey') that temporarily sets\n     *     the <toggle> property to true.  Default is null.\n     */\n    toggleKey: null,\n\n    /**\n     * APIProperty: multiple\n     * {Boolean} Allow selection of multiple geometries.  Default is false.\n     */\n    multiple: false,\n\n    /**\n     * APIProperty: clickout\n     * {Boolean} Unselect features when clicking outside any feature.\n     *     Default is true.\n     */\n    clickout: true,\n\n    /**\n     * APIProperty: toggle\n     * {Boolean} Unselect a selected feature on click.  Default is false.  Only\n     *     has meaning if hover is false.\n     */\n    toggle: false,\n\n    /**\n     * APIProperty: hover\n     * {Boolean} Select on mouse over and deselect on mouse out.  If true, this\n     * ignores clicks and only listens to mouse moves.\n     */\n    hover: false,\n\n    /**\n     * APIProperty: highlightOnly\n     * {Boolean} If true do not actually select features (that is place them in\n     * the layer's selected features array), just highlight them. This property\n     * has no effect if hover is false. Defaults to false.\n     */\n    highlightOnly: false,\n\n    /**\n     * APIProperty: box\n     * {Boolean} Allow feature selection by drawing a box.\n     */\n    box: false,\n\n    /**\n     * APIProperty: onBeforeSelect\n     * {Function} Optional function to be called before a feature is selected.\n     *     The function should expect to be called with a feature.\n     */\n    onBeforeSelect: function() {},\n\n    /**\n     * APIProperty: onSelect\n     * {Function} Optional function to be called when a feature is selected.\n     *     The function should expect to be called with a feature.\n     */\n    onSelect: function() {},\n\n    /**\n     * APIProperty: onUnselect\n     * {Function} Optional function to be called when a feature is unselected.\n     *     The function should expect to be called with a feature.\n     */\n    onUnselect: function() {},\n\n    /**\n     * APIProperty: scope\n     * {Object} The scope to use with the onBeforeSelect, onSelect, onUnselect\n     *     callbacks. If null the scope will be this control.\n     */\n    scope: null,\n\n    /**\n     * APIProperty: geometryTypes\n     * {Array(String)} To restrict selecting to a limited set of geometry types,\n     *     send a list of strings corresponding to the geometry class names.\n     */\n    geometryTypes: null,\n\n    /**\n     * Property: layer\n     * {<OpenLayers.Layer.Vector>} The vector layer with a common renderer\n     * root for all layers this control is configured with (if an array of\n     * layers was passed to the constructor), or the vector layer the control\n     * was configured with (if a single layer was passed to the constructor).\n     */\n    layer: null,\n\n    /**\n     * Property: layers\n     * {Array(<OpenLayers.Layer.Vector>)} The layers this control will work on,\n     * or null if the control was configured with a single layer\n     */\n    layers: null,\n\n    /**\n     * APIProperty: callbacks\n     * {Object} The functions that are sent to the handlers.feature for callback\n     */\n    callbacks: null,\n\n    /**\n     * APIProperty: selectStyle\n     * {Object} Hash of styles\n     */\n    selectStyle: null,\n\n    /**\n     * APIProperty: renderIntent\n     * {String} key used to retrieve the select style from the layer's\n     * style map.\n     */\n    renderIntent: \"select\",\n\n    /**\n     * Property: handlers\n     * {Object} Object with references to multiple <OpenLayers.Handler>\n     *     instances.\n     */\n    handlers: null,\n\n    /**\n     * Constructor: OpenLayers.Control.SelectFeature\n     * Create a new control for selecting features.\n     *\n     * Parameters:\n     * layers - {<OpenLayers.Layer.Vector>}, or an array of vector layers. The\n     *     layer(s) this control will select features from.\n     * options - {Object}\n     */\n    initialize: function(layers, options) {\n        OpenLayers.Control.prototype.initialize.apply(this, [options]);\n\n        if(this.scope === null) {\n            this.scope = this;\n        }\n        this.initLayer(layers);\n        var callbacks = {\n            click: this.clickFeature,\n            clickout: this.clickoutFeature\n        };\n        if (this.hover) {\n            callbacks.over = this.overFeature;\n            callbacks.out = this.outFeature;\n        }\n\n        this.callbacks = OpenLayers.Util.extend(callbacks, this.callbacks);\n        this.handlers = {\n            feature: new OpenLayers.Handler.Feature(\n                this, this.layer, this.callbacks,\n                {geometryTypes: this.geometryTypes}\n            )\n        };\n\n        if (this.box) {\n            this.handlers.box = new OpenLayers.Handler.Box(\n                this, {done: this.selectBox},\n                {boxDivClassName: \"olHandlerBoxSelectFeature\"}\n            );\n        }\n    },\n\n    /**\n     * Method: initLayer\n     * Assign the layer property. If layers is an array, we need to use\n     *     a RootContainer.\n     *\n     * Parameters:\n     * layers - {<OpenLayers.Layer.Vector>}, or an array of vector layers.\n     */\n    initLayer: function(layers) {\n        if(OpenLayers.Util.isArray(layers)) {\n            this.layers = layers;\n            this.layer = new OpenLayers.Layer.Vector.RootContainer(\n                this.id + \"_container\", {\n                    layers: layers\n                }\n            );\n        } else {\n            this.layer = layers;\n        }\n    },\n\n    /**\n     * Method: destroy\n     */\n    destroy: function() {\n        if(this.active && this.layers) {\n            this.map.removeLayer(this.layer);\n        }\n        OpenLayers.Control.prototype.destroy.apply(this, arguments);\n        if(this.layers) {\n            this.layer.destroy();\n        }\n    },\n\n    /**\n     * Method: activate\n     * Activates the control.\n     *\n     * Returns:\n     * {Boolean} The control was effectively activated.\n     */\n    activate: function () {\n        if (!this.active) {\n            if(this.layers) {\n                this.map.addLayer(this.layer);\n            }\n            this.handlers.feature.activate();\n            if(this.box && this.handlers.box) {\n                this.handlers.box.activate();\n            }\n        }\n        return OpenLayers.Control.prototype.activate.apply(\n            this, arguments\n        );\n    },\n\n    /**\n     * Method: deactivate\n     * Deactivates the control.\n     *\n     * Returns:\n     * {Boolean} The control was effectively deactivated.\n     */\n    deactivate: function () {\n        if (this.active) {\n            this.handlers.feature.deactivate();\n            if(this.handlers.box) {\n                this.handlers.box.deactivate();\n            }\n            if(this.layers) {\n                this.map.removeLayer(this.layer);\n            }\n        }\n        return OpenLayers.Control.prototype.deactivate.apply(\n            this, arguments\n        );\n    },\n\n    /**\n     * Method: unselectAll\n     * Unselect all selected features.  To unselect all except for a single\n     *     feature, set the options.except property to the feature.\n     *\n     * Parameters:\n     * options - {Object} Optional configuration object.\n     */\n    unselectAll: function(options) {\n        // we'll want an option to suppress notification here\n        var layers = this.layers || [this.layer],\n            layer, feature, l, numExcept;\n        for(l=0; l<layers.length; ++l) {\n            layer = layers[l];\n            numExcept = 0;\n            //layer.selectedFeatures is null when layer is destroyed and\n            //one of it's preremovelayer listener calls setLayer\n            //with another layer on this control\n            if(layer.selectedFeatures != null) {\n                while(layer.selectedFeatures.length > numExcept) {\n                    feature = layer.selectedFeatures[numExcept];\n                    if(!options || options.except != feature) {\n                        this.unselect(feature);\n                    } else {\n                        ++numExcept;\n                    }\n                }\n            }\n        }\n    },\n\n    /**\n     * Method: clickFeature\n     * Called on click in a feature\n     * Only responds if this.hover is false.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     */\n    clickFeature: function(feature) {\n        if(!this.hover) {\n            var selected = (OpenLayers.Util.indexOf(\n                feature.layer.selectedFeatures, feature) > -1);\n            if(selected) {\n                if(this.toggleSelect()) {\n                    this.unselect(feature);\n                } else if(!this.multipleSelect()) {\n                    this.unselectAll({except: feature});\n                }\n            } else {\n                if(!this.multipleSelect()) {\n                    this.unselectAll({except: feature});\n                }\n                this.select(feature);\n            }\n        }\n    },\n\n    /**\n     * Method: multipleSelect\n     * Allow for multiple selected features based on <multiple> property and\n     *     <multipleKey> event modifier.\n     *\n     * Returns:\n     * {Boolean} Allow for multiple selected features.\n     */\n    multipleSelect: function() {\n        return this.multiple || (this.handlers.feature.evt &&\n                                 this.handlers.feature.evt[this.multipleKey]);\n    },\n\n    /**\n     * Method: toggleSelect\n     * Event should toggle the selected state of a feature based on <toggle>\n     *     property and <toggleKey> event modifier.\n     *\n     * Returns:\n     * {Boolean} Toggle the selected state of a feature.\n     */\n    toggleSelect: function() {\n        return this.toggle || (this.handlers.feature.evt &&\n                               this.handlers.feature.evt[this.toggleKey]);\n    },\n\n    /**\n     * Method: clickoutFeature\n     * Called on click outside a previously clicked (selected) feature.\n     * Only responds if this.hover is false.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Vector.Feature>}\n     */\n    clickoutFeature: function(feature) {\n        if(!this.hover && this.clickout) {\n            this.unselectAll();\n        }\n    },\n\n    /**\n     * Method: overFeature\n     * Called on over a feature.\n     * Only responds if this.hover is true.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     */\n    overFeature: function(feature) {\n        var layer = feature.layer;\n        if(this.hover) {\n            if(this.highlightOnly) {\n                this.highlight(feature);\n            } else if(OpenLayers.Util.indexOf(\n                layer.selectedFeatures, feature) == -1) {\n                this.select(feature);\n            }\n        }\n    },\n\n    /**\n     * Method: outFeature\n     * Called on out of a selected feature.\n     * Only responds if this.hover is true.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     */\n    outFeature: function(feature) {\n        if(this.hover) {\n            if(this.highlightOnly) {\n                // we do nothing if we're not the last highlighter of the\n                // feature\n                if(feature._lastHighlighter == this.id) {\n                    // if another select control had highlighted the feature before\n                    // we did it ourself then we use that control to highlight the\n                    // feature as it was before we highlighted it, else we just\n                    // unhighlight it\n                    if(feature._prevHighlighter &&\n                       feature._prevHighlighter != this.id) {\n                        delete feature._lastHighlighter;\n                        var control = this.map.getControl(\n                            feature._prevHighlighter);\n                        if(control) {\n                            control.highlight(feature);\n                        }\n                    } else {\n                        this.unhighlight(feature);\n                    }\n                }\n            } else {\n                this.unselect(feature);\n            }\n        }\n    },\n\n    /**\n     * Method: highlight\n     * Redraw feature with the select style.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     */\n    highlight: function(feature) {\n        var layer = feature.layer;\n        var cont = this.events.triggerEvent(\"beforefeaturehighlighted\", {\n            feature : feature\n        });\n        if(cont !== false) {\n            feature._prevHighlighter = feature._lastHighlighter;\n            feature._lastHighlighter = this.id;\n            var style = this.selectStyle || this.renderIntent;\n            layer.drawFeature(feature, style);\n            this.events.triggerEvent(\"featurehighlighted\", {feature : feature});\n        }\n    },\n\n    /**\n     * Method: unhighlight\n     * Redraw feature with the \"default\" style\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     */\n    unhighlight: function(feature) {\n        var layer = feature.layer;\n        // three cases:\n        // 1. there's no other highlighter, in that case _prev is undefined,\n        //    and we just need to undef _last\n        // 2. another control highlighted the feature after we did it, in\n        //    that case _last references this other control, and we just\n        //    need to undef _prev\n        // 3. another control highlighted the feature before we did it, in\n        //    that case _prev references this other control, and we need to\n        //    set _last to _prev and undef _prev\n        if(feature._prevHighlighter == undefined) {\n            delete feature._lastHighlighter;\n        } else if(feature._prevHighlighter == this.id) {\n            delete feature._prevHighlighter;\n        } else {\n            feature._lastHighlighter = feature._prevHighlighter;\n            delete feature._prevHighlighter;\n        }\n        layer.drawFeature(feature, feature.style || feature.layer.style ||\n            \"default\");\n        this.events.triggerEvent(\"featureunhighlighted\", {feature : feature});\n    },\n\n    /**\n     * Method: select\n     * Add feature to the layer's selectedFeature array, render the feature as\n     * selected, and call the onSelect function.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     */\n    select: function(feature) {\n        var cont = this.onBeforeSelect.call(this.scope, feature);\n        var layer = feature.layer;\n        if(cont !== false) {\n            cont = layer.events.triggerEvent(\"beforefeatureselected\", {\n                feature: feature\n            });\n            if(cont !== false) {\n                layer.selectedFeatures.push(feature);\n                this.highlight(feature);\n                // if the feature handler isn't involved in the feature\n                // selection (because the box handler is used or the\n                // feature is selected programatically) we fake the\n                // feature handler to allow unselecting on click\n                if(!this.handlers.feature.lastFeature) {\n                    this.handlers.feature.lastFeature = layer.selectedFeatures[0];\n                }\n                layer.events.triggerEvent(\"featureselected\", {feature: feature});\n                this.onSelect.call(this.scope, feature);\n            }\n        }\n    },\n\n    /**\n     * Method: unselect\n     * Remove feature from the layer's selectedFeature array, render the feature as\n     * normal, and call the onUnselect function.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     */\n    unselect: function(feature) {\n        var layer = feature.layer;\n        // Store feature style for restoration later\n        this.unhighlight(feature);\n        OpenLayers.Util.removeItem(layer.selectedFeatures, feature);\n        layer.events.triggerEvent(\"featureunselected\", {feature: feature});\n        this.onUnselect.call(this.scope, feature);\n    },\n\n    /**\n     * Method: selectBox\n     * Callback from the handlers.box set up when <box> selection is true\n     *     on.\n     *\n     * Parameters:\n     * position - {<OpenLayers.Bounds> || <OpenLayers.Pixel> }\n     */\n    selectBox: function(position) {\n        if (position instanceof OpenLayers.Bounds) {\n            var minXY = this.map.getLonLatFromPixel({\n                x: position.left,\n                y: position.bottom\n            });\n            var maxXY = this.map.getLonLatFromPixel({\n                x: position.right,\n                y: position.top\n            });\n            var bounds = new OpenLayers.Bounds(\n                minXY.lon, minXY.lat, maxXY.lon, maxXY.lat\n            );\n\n            // if multiple is false, first deselect currently selected features\n            if (!this.multipleSelect()) {\n                this.unselectAll();\n            }\n\n            // because we're using a box, we consider we want multiple selection\n            var prevMultiple = this.multiple;\n            this.multiple = true;\n            var layers = this.layers || [this.layer];\n            this.events.triggerEvent(\"boxselectionstart\", {layers: layers});\n            var layer;\n            for(var l=0; l<layers.length; ++l) {\n                layer = layers[l];\n                for(var i=0, len = layer.features.length; i<len; ++i) {\n                    var feature = layer.features[i];\n                    // check if the feature is displayed\n                    if (!feature.getVisibility()) {\n                        continue;\n                    }\n\n                    if (this.geometryTypes == null || OpenLayers.Util.indexOf(\n                            this.geometryTypes, feature.geometry.CLASS_NAME) > -1) {\n                        if (bounds.toGeometry().intersects(feature.geometry)) {\n                            if (OpenLayers.Util.indexOf(layer.selectedFeatures, feature) == -1) {\n                                this.select(feature);\n                            }\n                        }\n                    }\n                }\n            }\n            this.multiple = prevMultiple;\n            this.events.triggerEvent(\"boxselectionend\", {layers: layers});\n        }\n    },\n\n    /**\n     * Method: setMap\n     * Set the map property for the control.\n     *\n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    setMap: function(map) {\n        this.handlers.feature.setMap(map);\n        if (this.box) {\n            this.handlers.box.setMap(map);\n        }\n        OpenLayers.Control.prototype.setMap.apply(this, arguments);\n    },\n\n    /**\n     * APIMethod: setLayer\n     * Attach a new layer to the control, overriding any existing layers.\n     *\n     * Parameters:\n     * layers - Array of {<OpenLayers.Layer.Vector>} or a single\n     *     {<OpenLayers.Layer.Vector>}\n     */\n    setLayer: function(layers) {\n        var isActive = this.active;\n        this.unselectAll();\n        this.deactivate();\n        if(this.layers) {\n            this.layer.destroy();\n            this.layers = null;\n        }\n        this.initLayer(layers);\n        this.handlers.feature.layer = this.layer;\n        if (isActive) {\n            this.activate();\n        }\n    },\n    \n    /**\n     * APIMethod: addLayer\n     * Add a layer to the control, making the existing layers still selectable\n     *\n     * Parameters:\n     * layer - element <OpenLayers.Layer.Vector> \n     */\n    addLayer: function( layer ) {\n        var isActive = this.active;\n        this.deactivate();\n        if (this.layers == null) {\n            if (this.layer != null) {\n                this.layers = [this.layer];\n                this.layers.push(layer);\n            } else {\n                this.layers = [layer];\n            }\n        } else {\t\n            this.layers.push(layer);\n        }\n        this.initLayer(this.layers);\n        this.handlers.feature.layer = this.layer;\n        if (isActive) {\n            this.activate();\n        }\n    },\t    \n\n    CLASS_NAME: \"OpenLayers.Control.SelectFeature\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Control/Button.js\n */\n\n/**\n * Class: OpenLayers.Control.NavigationHistory\n * A navigation history control.  This is a meta-control, that creates two\n *     dependent controls: <previous> and <next>.  Call the trigger method\n *     on the <previous> and <next> controls to restore previous and next\n *     history states.  The previous and next controls will become active\n *     when there are available states to restore and will become deactive\n *     when there are no states to restore.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.NavigationHistory = OpenLayers.Class(OpenLayers.Control, {\n\n    /**\n     * Property: type\n     * {String} Note that this control is not intended to be added directly\n     *     to a control panel.  Instead, add the sub-controls previous and\n     *     next.  These sub-controls are button type controls that activate\n     *     and deactivate themselves.  If this parent control is added to\n     *     a panel, it will act as a toggle.\n     */\n    type: OpenLayers.Control.TYPE_TOGGLE,\n\n    /**\n     * APIProperty: previous\n     * {<OpenLayers.Control>} A button type control whose trigger method restores\n     *     the previous state managed by this control.\n     */\n    previous: null,\n    \n    /**\n     * APIProperty: previousOptions\n     * {Object} Set this property on the options argument of the constructor\n     *     to set optional properties on the <previous> control.\n     */\n    previousOptions: null,\n    \n    /**\n     * APIProperty: next\n     * {<OpenLayers.Control>} A button type control whose trigger method restores\n     *     the next state managed by this control.\n     */\n    next: null,\n\n    /**\n     * APIProperty: nextOptions\n     * {Object} Set this property on the options argument of the constructor\n     *     to set optional properties on the <next> control.\n     */\n    nextOptions: null,\n\n    /**\n     * APIProperty: limit\n     * {Integer} Optional limit on the number of history items to retain.  If\n     *     null, there is no limit.  Default is 50.\n     */\n    limit: 50,\n\n    /**\n     * APIProperty: autoActivate\n     * {Boolean} Activate the control when it is added to a map.  Default is\n     *     true.\n     */\n    autoActivate: true,\n\n    /**\n     * Property: clearOnDeactivate\n     * {Boolean} Clear the history when the control is deactivated.  Default\n     *     is false.\n     */\n    clearOnDeactivate: false,\n\n    /**\n     * Property: registry\n     * {Object} An object with keys corresponding to event types.  Values\n     *     are functions that return an object representing the current state.\n     */\n    registry: null,\n\n    /**\n     * Property: nextStack\n     * {Array} Array of items in the history.\n     */\n    nextStack: null,\n\n    /**\n     * Property: previousStack\n     * {Array} List of items in the history.  First item represents the current\n     *     state.\n     */\n    previousStack: null,\n    \n    /**\n     * Property: listeners\n     * {Object} An object containing properties corresponding to event types.\n     *     This object is used to configure the control and is modified on\n     *     construction.\n     */\n    listeners: null,\n    \n    /**\n     * Property: restoring\n     * {Boolean} Currently restoring a history state.  This is set to true\n     *     before calling restore and set to false after restore returns.\n     */\n    restoring: false,\n    \n    /**\n     * Constructor: OpenLayers.Control.NavigationHistory \n     * \n     * Parameters:\n     * options - {Object} An optional object whose properties will be used\n     *     to extend the control.\n     */\n    initialize: function(options) {\n        OpenLayers.Control.prototype.initialize.apply(this, [options]);\n        \n        this.registry = OpenLayers.Util.extend({\n            \"moveend\": this.getState\n        }, this.registry);\n        \n        var previousOptions = {\n            trigger: OpenLayers.Function.bind(this.previousTrigger, this),\n            displayClass: this.displayClass + \" \" + this.displayClass + \"Previous\"\n        };\n        OpenLayers.Util.extend(previousOptions, this.previousOptions);\n        this.previous = new OpenLayers.Control.Button(previousOptions);\n        \n        var nextOptions = {\n            trigger: OpenLayers.Function.bind(this.nextTrigger, this),\n            displayClass: this.displayClass + \" \" + this.displayClass + \"Next\"\n        };\n        OpenLayers.Util.extend(nextOptions, this.nextOptions);\n        this.next = new OpenLayers.Control.Button(nextOptions);\n\n        this.clear();\n    },\n    \n    /**\n     * Method: onPreviousChange\n     * Called when the previous history stack changes.\n     *\n     * Parameters:\n     * state - {Object} An object representing the state to be restored\n     *     if previous is triggered again or null if no previous states remain.\n     * length - {Integer} The number of remaining previous states that can\n     *     be restored.\n     */\n    onPreviousChange: function(state, length) {\n        if(state && !this.previous.active) {\n            this.previous.activate();\n        } else if(!state && this.previous.active) {\n            this.previous.deactivate();\n        }\n    },\n    \n    /**\n     * Method: onNextChange\n     * Called when the next history stack changes.\n     *\n     * Parameters:\n     * state - {Object} An object representing the state to be restored\n     *     if next is triggered again or null if no next states remain.\n     * length - {Integer} The number of remaining next states that can\n     *     be restored.\n     */\n    onNextChange: function(state, length) {\n        if(state && !this.next.active) {\n            this.next.activate();\n        } else if(!state && this.next.active) {\n            this.next.deactivate();\n        }\n    },\n    \n    /**\n     * APIMethod: destroy\n     * Destroy the control.\n     */\n    destroy: function() {\n        OpenLayers.Control.prototype.destroy.apply(this);\n        this.previous.destroy();\n        this.next.destroy();\n        this.deactivate();\n        for(var prop in this) {\n            this[prop] = null;\n        }\n    },\n    \n    /** \n     * Method: setMap\n     * Set the map property for the control and <previous> and <next> child\n     *     controls.\n     *\n     * Parameters:\n     * map - {<OpenLayers.Map>} \n     */\n    setMap: function(map) {\n        this.map = map;\n        this.next.setMap(map);\n        this.previous.setMap(map);\n    },\n\n    /**\n     * Method: draw\n     * Called when the control is added to the map.\n     */\n    draw: function() {\n        OpenLayers.Control.prototype.draw.apply(this, arguments);\n        this.next.draw();\n        this.previous.draw();\n    },\n    \n    /**\n     * Method: previousTrigger\n     * Restore the previous state.  If no items are in the previous history\n     *     stack, this has no effect.\n     *\n     * Returns:\n     * {Object} Item representing state that was restored.  Undefined if no\n     *     items are in the previous history stack.\n     */\n    previousTrigger: function() {\n        var current = this.previousStack.shift();\n        var state = this.previousStack.shift();\n        if(state != undefined) {\n            this.nextStack.unshift(current);\n            this.previousStack.unshift(state);\n            this.restoring = true;\n            this.restore(state);\n            this.restoring = false;\n            this.onNextChange(this.nextStack[0], this.nextStack.length);\n            this.onPreviousChange(\n                this.previousStack[1], this.previousStack.length - 1\n            );\n        } else {\n            this.previousStack.unshift(current);\n        }\n        return state;\n    },\n    \n    /**\n     * APIMethod: nextTrigger\n     * Restore the next state.  If no items are in the next history\n     *     stack, this has no effect.  The next history stack is populated\n     *     as states are restored from the previous history stack.\n     *\n     * Returns:\n     * {Object} Item representing state that was restored.  Undefined if no\n     *     items are in the next history stack.\n     */\n    nextTrigger: function() {\n        var state = this.nextStack.shift();\n        if(state != undefined) {\n            this.previousStack.unshift(state);\n            this.restoring = true;\n            this.restore(state);\n            this.restoring = false;\n            this.onNextChange(this.nextStack[0], this.nextStack.length);\n            this.onPreviousChange(\n                this.previousStack[1], this.previousStack.length - 1\n            );\n        }\n        return state;\n    },\n    \n    /**\n     * APIMethod: clear\n     * Clear history.\n     */\n    clear: function() {\n        this.previousStack = [];\n        this.previous.deactivate();\n        this.nextStack = [];\n        this.next.deactivate();\n    },\n\n    /**\n     * Method: getState\n     * Get the current state and return it.\n     *\n     * Returns:\n     * {Object} An object representing the current state.\n     */\n    getState: function() {\n        return {\n            center: this.map.getCenter(),\n            resolution: this.map.getResolution(),\n            projection: this.map.getProjectionObject(),\n            units: this.map.getProjectionObject().getUnits() || \n                this.map.units || this.map.baseLayer.units\n        };\n    },\n\n    /**\n     * Method: restore\n     * Update the state with the given object.\n     *\n     * Parameters:\n     * state - {Object} An object representing the state to restore.\n     */\n    restore: function(state) {\n        var center, zoom;\n        if (this.map.getProjectionObject() == state.projection) { \n            zoom = this.map.getZoomForResolution(state.resolution);\n            center = state.center;\n        } else {\n            center = state.center.clone();\n            center.transform(state.projection, this.map.getProjectionObject());\n            var sourceUnits = state.units;\n            var targetUnits = this.map.getProjectionObject().getUnits() || \n                this.map.units || this.map.baseLayer.units;\n            var resolutionFactor = sourceUnits && targetUnits ? \n                OpenLayers.INCHES_PER_UNIT[sourceUnits] / OpenLayers.INCHES_PER_UNIT[targetUnits] : 1;\n            zoom = this.map.getZoomForResolution(resolutionFactor*state.resolution); \n        }\n        this.map.setCenter(center, zoom);\n    },\n    \n    /**\n     * Method: setListeners\n     * Sets functions to be registered in the listeners object.\n     */\n    setListeners: function() {\n        this.listeners = {};\n        for(var type in this.registry) {\n            this.listeners[type] = OpenLayers.Function.bind(function() {\n                if(!this.restoring) {\n                    var state = this.registry[type].apply(this, arguments);\n                    this.previousStack.unshift(state);\n                    if(this.previousStack.length > 1) {\n                        this.onPreviousChange(\n                            this.previousStack[1], this.previousStack.length - 1\n                        );\n                    }\n                    if(this.previousStack.length > (this.limit + 1)) {\n                        this.previousStack.pop();\n                    }\n                    if(this.nextStack.length > 0) {\n                        this.nextStack = [];\n                        this.onNextChange(null, 0);\n                    }\n                }\n                return true;\n            }, this);\n        }\n    },\n\n    /**\n     * APIMethod: activate\n     * Activate the control.  This registers any listeners.\n     *\n     * Returns:\n     * {Boolean} Control successfully activated.\n     */\n    activate: function() {\n        var activated = false;\n        if(this.map) {\n            if(OpenLayers.Control.prototype.activate.apply(this)) {\n                if(this.listeners == null) {\n                    this.setListeners();\n                }\n                for(var type in this.listeners) {\n                    this.map.events.register(type, this, this.listeners[type]);\n                }\n                activated = true;\n                if(this.previousStack.length == 0) {\n                    this.initStack();\n                }\n            }\n        }\n        return activated;\n    },\n    \n    /**\n     * Method: initStack\n     * Called after the control is activated if the previous history stack is\n     *     empty.\n     */\n    initStack: function() {\n        if(this.map.getCenter()) {\n            this.listeners.moveend();\n        }\n    },\n    \n    /**\n     * APIMethod: deactivate\n     * Deactivate the control.  This unregisters any listeners.\n     *\n     * Returns:\n     * {Boolean} Control successfully deactivated.\n     */\n    deactivate: function() {\n        var deactivated = false;\n        if(this.map) {\n            if(OpenLayers.Control.prototype.deactivate.apply(this)) {\n                for(var type in this.listeners) {\n                    this.map.events.unregister(\n                        type, this, this.listeners[type]\n                    );\n                }\n                if(this.clearOnDeactivate) {\n                    this.clear();\n                }\n                deactivated = true;\n            }\n        }\n        return deactivated;\n    },\n    \n    CLASS_NAME: \"OpenLayers.Control.NavigationHistory\"\n});\n\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Feature/Vector.js\n */\n\n/**\n * Class: OpenLayers.Control.Measure\n * Allows for drawing of features for measurements.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.Measure = OpenLayers.Class(OpenLayers.Control, {\n\n    /**\n     * APIProperty: events\n     * {<OpenLayers.Events>} Events instance for listeners and triggering\n     *     control specific events.\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * control.events.register(type, obj, listener);\n     * (end)\n     *\n     * Supported event types (in addition to those from <OpenLayers.Control.events>):\n     * measure - Triggered when a measurement sketch is complete.  Listeners\n     *      will receive an event with measure, units, order, and geometry\n     *      properties.\n     * measurepartial - Triggered when a new point is added to the\n     *      measurement sketch or if the <immediate> property is true and the\n     *      measurement sketch is modified.  Listeners receive an event with measure,\n     *      units, order, and geometry.\n     */\n\n    /**\n     * APIProperty: handlerOptions\n     * {Object} Used to set non-default properties on the control's handler\n     */\n\n    /**\n     * Property: callbacks\n     * {Object} The functions that are sent to the handler for callback\n     */\n    callbacks: null,\n\n    /**\n     * APIProperty: displaySystem\n     * {String} Display system for output measurements.  Supported values\n     *     are 'english', 'metric', and 'geographic'.  Default is 'metric'.\n     */\n    displaySystem: 'metric',\n\n    /**\n     * APIProperty: geodesic\n     * {Boolean} Calculate geodesic metrics instead of planar metrics.  This\n     *     requires that geometries can be transformed into Geographic/WGS84\n     *     (if that is not already the map projection).  Default is false.\n     */\n    geodesic: false,\n\n    /**\n     * Property: displaySystemUnits\n     * {Object} Units for various measurement systems.  Values are arrays\n     *     of unit abbreviations (from OpenLayers.INCHES_PER_UNIT) in decreasing\n     *     order of length.\n     */\n    displaySystemUnits: {\n        geographic: ['dd'],\n        english: ['mi', 'ft', 'in'],\n        metric: ['km', 'm']\n    },\n\n    /**\n     * Property: delay\n     * {Number} Number of milliseconds between clicks before the event is\n     *     considered a double-click.  The \"measurepartial\" event will not\n     *     be triggered if the sketch is completed within this time.  This\n     *     is required for IE where creating a browser reflow (if a listener\n     *     is modifying the DOM by displaying the measurement values) messes\n     *     with the dblclick listener in the sketch handler.\n     */\n    partialDelay: 300,\n\n    /**\n     * Property: delayedTrigger\n     * {Number} Timeout id of trigger for measurepartial.\n     */\n    delayedTrigger: null,\n\n    /**\n     * APIProperty: persist\n     * {Boolean} Keep the temporary measurement sketch drawn after the\n     *     measurement is complete.  The geometry will persist until a new\n     *     measurement is started, the control is deactivated, or <cancel> is\n     *     called.\n     */\n    persist: false,\n\n    /**\n     * APIProperty: immediate\n     * {Boolean} Activates the immediate measurement so that the \"measurepartial\"\n     *     event is also fired once the measurement sketch is modified.\n     *     Default is false.\n     */\n    immediate : false,\n\n    /**\n     * Constructor: OpenLayers.Control.Measure\n     *\n     * Parameters:\n     * handler - {<OpenLayers.Handler>}\n     * options - {Object}\n     */\n    initialize: function(handler, options) {\n        OpenLayers.Control.prototype.initialize.apply(this, [options]);\n        var callbacks = {done: this.measureComplete,\n            point: this.measurePartial};\n        if (this.immediate){\n            callbacks.modify = this.measureImmediate;\n        }\n        this.callbacks = OpenLayers.Util.extend(callbacks, this.callbacks);\n\n        // let the handler options override, so old code that passes 'persist'\n        // directly to the handler does not need an update\n        this.handlerOptions = OpenLayers.Util.extend(\n            {persist: this.persist}, this.handlerOptions\n        );\n        this.handler = new handler(this, this.callbacks, this.handlerOptions);\n    },\n\n    /**\n     * APIMethod: deactivate\n     */\n    deactivate: function() {\n        this.cancelDelay();\n        return OpenLayers.Control.prototype.deactivate.apply(this, arguments);\n    },\n\n    /**\n     * APIMethod: cancel\n     * Stop the control from measuring.  If <persist> is true, the temporary\n     *     sketch will be erased.\n     */\n    cancel: function() {\n        this.cancelDelay();\n        this.handler.cancel();\n    },\n\n    /**\n     * APIMethod: setImmediate\n     * Sets the <immediate> property. Changes the activity of immediate\n     * measurement.\n     */\n    setImmediate: function(immediate) {\n        this.immediate = immediate;\n        if (this.immediate){\n            this.callbacks.modify = this.measureImmediate;\n        } else {\n            delete this.callbacks.modify;\n        }\n    },\n\n    /**\n     * Method: updateHandler\n     *\n     * Parameters:\n     * handler - {Function} One of the sketch handler constructors.\n     * options - {Object} Options for the handler.\n     */\n    updateHandler: function(handler, options) {\n        var active = this.active;\n        if(active) {\n            this.deactivate();\n        }\n        this.handler = new handler(this, this.callbacks, options);\n        if(active) {\n            this.activate();\n        }\n    },\n\n    /**\n     * Method: measureComplete\n     * Called when the measurement sketch is done.\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     */\n    measureComplete: function(geometry) {\n        this.cancelDelay();\n        this.measure(geometry, \"measure\");\n    },\n\n    /**\n     * Method: measurePartial\n     * Called each time a new point is added to the measurement sketch.\n     *\n     * Parameters:\n     * point - {<OpenLayers.Geometry.Point>} The last point added.\n     * geometry - {<OpenLayers.Geometry>} The sketch geometry.\n     */\n    measurePartial: function(point, geometry) {\n        this.cancelDelay();\n        geometry = geometry.clone();\n        // when we're wating for a dblclick, we have to trigger measurepartial\n        // after some delay to deal with reflow issues in IE\n        if (this.handler.freehandMode(this.handler.evt)) {\n            // no dblclick in freehand mode\n            this.measure(geometry, \"measurepartial\");\n        } else {\n            this.delayedTrigger = window.setTimeout(\n                OpenLayers.Function.bind(function() {\n                    this.delayedTrigger = null;\n                    this.measure(geometry, \"measurepartial\");\n                }, this),\n                this.partialDelay\n            );\n        }\n    },\n\n    /**\n     * Method: measureImmediate\n     * Called each time the measurement sketch is modified.\n     *\n     * Parameters:\n     * point - {<OpenLayers.Geometry.Point>} The point at the mouse position.\n     * feature - {<OpenLayers.Feature.Vector>} The sketch feature.\n     * drawing - {Boolean} Indicates whether we're currently drawing.\n     */\n    measureImmediate : function(point, feature, drawing) {\n        if (drawing && !this.handler.freehandMode(this.handler.evt)) {\n            this.cancelDelay();\n            this.measure(feature.geometry, \"measurepartial\");\n        }\n    },\n\n    /**\n     * Method: cancelDelay\n     * Cancels the delay measurement that measurePartial began.\n     */\n    cancelDelay: function() {\n        if (this.delayedTrigger !== null) {\n            window.clearTimeout(this.delayedTrigger);\n            this.delayedTrigger = null;\n        }\n    },\n\n    /**\n     * Method: measure\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     * eventType - {String}\n     */\n    measure: function(geometry, eventType) {\n        var stat, order;\n        if(geometry.CLASS_NAME.indexOf('LineString') > -1) {\n            stat = this.getBestLength(geometry);\n            order = 1;\n        } else {\n            stat = this.getBestArea(geometry);\n            order = 2;\n        }\n        this.events.triggerEvent(eventType, {\n            measure: stat[0],\n            units: stat[1],\n            order: order,\n            geometry: geometry\n        });\n    },\n\n    /**\n     * Method: getBestArea\n     * Based on the <displaySystem> returns the area of a geometry.\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     *\n     * Returns:\n     * {Array([Float, String])}  Returns a two item array containing the\n     *     area and the units abbreviation.\n     */\n    getBestArea: function(geometry) {\n        var units = this.displaySystemUnits[this.displaySystem];\n        var unit, area;\n        for(var i=0, len=units.length; i<len; ++i) {\n            unit = units[i];\n            area = this.getArea(geometry, unit);\n            if(area > 1) {\n                break;\n            }\n        }\n        return [area, unit];\n    },\n\n    /**\n     * Method: getArea\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     * units - {String} Unit abbreviation\n     *\n     * Returns:\n     * {Float} The geometry area in the given units.\n     */\n    getArea: function(geometry, units) {\n        var area, geomUnits;\n        if(this.geodesic) {\n            area = geometry.getGeodesicArea(this.map.getProjectionObject());\n            geomUnits = \"m\";\n        } else {\n            area = geometry.getArea();\n            geomUnits = this.map.getUnits();\n        }\n        var inPerDisplayUnit = OpenLayers.INCHES_PER_UNIT[units];\n        if(inPerDisplayUnit) {\n            var inPerMapUnit = OpenLayers.INCHES_PER_UNIT[geomUnits];\n            area *= Math.pow((inPerMapUnit / inPerDisplayUnit), 2);\n        }\n        return area;\n    },\n\n    /**\n     * Method: getBestLength\n     * Based on the <displaySystem> returns the length of a geometry.\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     *\n     * Returns:\n     * {Array([Float, String])}  Returns a two item array containing the\n     *     length and the units abbreviation.\n     */\n    getBestLength: function(geometry) {\n        var units = this.displaySystemUnits[this.displaySystem];\n        var unit, length;\n        for(var i=0, len=units.length; i<len; ++i) {\n            unit = units[i];\n            length = this.getLength(geometry, unit);\n            if(length > 1) {\n                break;\n            }\n        }\n        return [length, unit];\n    },\n\n    /**\n     * Method: getLength\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     * units - {String} Unit abbreviation\n     *\n     * Returns:\n     * {Float} The geometry length in the given units.\n     */\n    getLength: function(geometry, units) {\n        var length, geomUnits;\n        if(this.geodesic) {\n            length = geometry.getGeodesicLength(this.map.getProjectionObject());\n            geomUnits = \"m\";\n        } else {\n            length = geometry.getLength();\n            geomUnits = this.map.getUnits();\n        }\n        var inPerDisplayUnit = OpenLayers.INCHES_PER_UNIT[units];\n        if(inPerDisplayUnit) {\n            var inPerMapUnit = OpenLayers.INCHES_PER_UNIT[geomUnits];\n            length *= (inPerMapUnit / inPerDisplayUnit);\n        }\n        return length;\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.Measure\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Handler/Click.js\n * @requires OpenLayers/Handler/Hover.js\n * @requires OpenLayers/Request.js\n * @requires OpenLayers/Format/WMSGetFeatureInfo.js\n */\n\n/**\n * Class: OpenLayers.Control.WMSGetFeatureInfo\n * The WMSGetFeatureInfo control uses a WMS query to get information about a point on the map.  The\n * information may be in a display-friendly format such as HTML, or a machine-friendly format such\n * as GML, depending on the server's capabilities and the client's configuration.  This control\n * handles click or hover events, attempts to parse the results using an OpenLayers.Format, and\n * fires a 'getfeatureinfo' event with the click position, the raw body of the response, and an\n * array of features if it successfully read the response.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.WMSGetFeatureInfo = OpenLayers.Class(OpenLayers.Control, {\n\n   /**\n     * APIProperty: hover\n     * {Boolean} Send GetFeatureInfo requests when mouse stops moving.\n     *     Default is false.\n     */\n    hover: false,\n\n    /**\n     * APIProperty: drillDown\n     * {Boolean} Drill down over all WMS layers in the map. When\n     *     using drillDown mode, hover is not possible, and an infoFormat that\n     *     returns parseable features is required. Default is false.\n     */\n    drillDown: false,\n\n    /**\n     * APIProperty: maxFeatures\n     * {Integer} Maximum number of features to return from a WMS query. This\n     *     sets the feature_count parameter on WMS GetFeatureInfo\n     *     requests.\n     */\n    maxFeatures: 10,\n\n    /**\n     * APIProperty: clickCallback\n     * {String} The click callback to register in the\n     *     {<OpenLayers.Handler.Click>} object created when the hover\n     *     option is set to false. Default is \"click\".\n     */\n    clickCallback: \"click\",\n\n    /**\n     * APIProperty: output\n     * {String} Either \"features\" or \"object\". When triggering a getfeatureinfo\n     *     request should we pass on an array of features or an object with with\n     *     a \"features\" property and other properties (such as the url of the\n     *     WMS). Default is \"features\".\n     */\n    output: \"features\",\n\n    /**\n     * APIProperty: layers\n     * {Array(<OpenLayers.Layer.WMS>)} The layers to query for feature info.\n     *     If omitted, all map WMS layers with a url that matches this <url> or\n     *     <layerUrls> will be considered.\n     */\n    layers: null,\n\n    /**\n     * APIProperty: queryVisible\n     * {Boolean} If true, filter out hidden layers when searching the map for\n     *     layers to query.  Default is false.\n     */\n    queryVisible: false,\n\n    /**\n     * APIProperty: url\n     * {String} The URL of the WMS service to use.  If not provided, the url\n     *     of the first eligible layer will be used.\n     */\n    url: null,\n\n    /**\n     * APIProperty: layerUrls\n     * {Array(String)} Optional list of urls for layers that should be queried.\n     *     This can be used when the layer url differs from the url used for\n     *     making GetFeatureInfo requests (in the case of a layer using cached\n     *     tiles).\n     */\n    layerUrls: null,\n\n    /**\n     * APIProperty: infoFormat\n     * {String} The mimetype to request from the server. If you are using\n     *     drillDown mode and have multiple servers that do not share a common\n     *     infoFormat, you can override the control's infoFormat by providing an\n     *     INFO_FORMAT parameter in your <OpenLayers.Layer.WMS> instance(s).\n     */\n    infoFormat: 'text/html',\n\n    /**\n     * APIProperty: vendorParams\n     * {Object} Additional parameters that will be added to the request, for\n     *     WMS implementations that support them. This could e.g. look like\n     * (start code)\n     * {\n     *     radius: 5\n     * }\n     * (end)\n     */\n    vendorParams: {},\n\n    /**\n     * APIProperty: format\n     * {<OpenLayers.Format>} A format for parsing GetFeatureInfo responses.\n     *     Default is <OpenLayers.Format.WMSGetFeatureInfo>.\n     */\n    format: null,\n\n    /**\n     * APIProperty: formatOptions\n     * {Object} Optional properties to set on the format (if one is not provided\n     *     in the <format> property.\n     */\n    formatOptions: null,\n\n    /**\n     * APIProperty: handlerOptions\n     * {Object} Additional options for the handlers used by this control, e.g.\n     * (start code)\n     * {\n     *     \"click\": {delay: 100},\n     *     \"hover\": {delay: 300}\n     * }\n     * (end)\n     */\n\n    /**\n     * Property: handler\n     * {Object} Reference to the <OpenLayers.Handler> for this control\n     */\n    handler: null,\n\n    /**\n     * Property: hoverRequest\n     * {<OpenLayers.Request>} contains the currently running hover request\n     *     (if any).\n     */\n    hoverRequest: null,\n\n    /**\n     * APIProperty: events\n     * {<OpenLayers.Events>} Events instance for listeners and triggering\n     *     control specific events.\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * control.events.register(type, obj, listener);\n     * (end)\n     *\n     * Supported event types (in addition to those from <OpenLayers.Control.events>):\n     * beforegetfeatureinfo - Triggered before the request is sent.\n     *      The event object has an *xy* property with the position of the\n     *      mouse click or hover event that triggers the request.\n     * nogetfeatureinfo - no queryable layers were found.\n     * getfeatureinfo - Triggered when a GetFeatureInfo response is received.\n     *      The event object has a *text* property with the body of the\n     *      response (String), a *features* property with an array of the\n     *      parsed features, an *xy* property with the position of the mouse\n     *      click or hover event that triggered the request, and a *request*\n     *      property with the request itself. If drillDown is set to true and\n     *      multiple requests were issued to collect feature info from all\n     *      layers, *text* and *request* will only contain the response body\n     *      and request object of the last request.\n     */\n\n    /**\n     * Constructor: <OpenLayers.Control.WMSGetFeatureInfo>\n     *\n     * Parameters:\n     * options - {Object}\n     */\n    initialize: function(options) {\n        options = options || {};\n        options.handlerOptions = options.handlerOptions || {};\n\n        OpenLayers.Control.prototype.initialize.apply(this, [options]);\n\n        if(!this.format) {\n            this.format = new OpenLayers.Format.WMSGetFeatureInfo(\n                options.formatOptions\n            );\n        }\n\n        if(this.drillDown === true) {\n            this.hover = false;\n        }\n\n        if(this.hover) {\n            this.handler = new OpenLayers.Handler.Hover(\n                   this, {\n                       'move': this.cancelHover,\n                       'pause': this.getInfoForHover\n                   },\n                   OpenLayers.Util.extend(this.handlerOptions.hover || {}, {\n                       'delay': 250\n                   }));\n        } else {\n            var callbacks = {};\n            callbacks[this.clickCallback] = this.getInfoForClick;\n            this.handler = new OpenLayers.Handler.Click(\n                this, callbacks, this.handlerOptions.click || {});\n        }\n    },\n\n    /**\n     * Method: getInfoForClick\n     * Called on click\n     *\n     * Parameters:\n     * evt - {<OpenLayers.Event>}\n     */\n    getInfoForClick: function(evt) {\n        this.events.triggerEvent(\"beforegetfeatureinfo\", {xy: evt.xy});\n        // Set the cursor to \"wait\" to tell the user we're working on their\n        // click.\n        OpenLayers.Element.addClass(this.map.viewPortDiv, \"olCursorWait\");\n        this.request(evt.xy, {});\n    },\n\n    /**\n     * Method: getInfoForHover\n     * Pause callback for the hover handler\n     *\n     * Parameters:\n     * evt - {Object}\n     */\n    getInfoForHover: function(evt) {\n        this.events.triggerEvent(\"beforegetfeatureinfo\", {xy: evt.xy});\n        this.request(evt.xy, {hover: true});\n    },\n\n    /**\n     * Method: cancelHover\n     * Cancel callback for the hover handler\n     */\n    cancelHover: function() {\n        if (this.hoverRequest) {\n            this.hoverRequest.abort();\n            this.hoverRequest = null;\n        }\n    },\n\n    /**\n     * Method: findLayers\n     * Internal method to get the layers, independent of whether we are\n     *     inspecting the map or using a client-provided array\n     */\n    findLayers: function() {\n\n        var candidates = this.layers || this.map.layers;\n        var layers = [];\n        var layer, url;\n        for(var i = candidates.length - 1; i >= 0; --i) {\n            layer = candidates[i];\n            if(layer instanceof OpenLayers.Layer.WMS &&\n               (!this.queryVisible || layer.getVisibility())) {\n                url = OpenLayers.Util.isArray(layer.url) ? layer.url[0] : layer.url;\n                // if the control was not configured with a url, set it\n                // to the first layer url\n                if(this.drillDown === false && !this.url) {\n                    this.url = url;\n                }\n                if(this.drillDown === true || this.urlMatches(url)) {\n                    layers.push(layer);\n                }\n            }\n        }\n        return layers;\n    },\n\n    /**\n     * Method: urlMatches\n     * Test to see if the provided url matches either the control <url> or one\n     *     of the <layerUrls>.\n     *\n     * Parameters:\n     * url - {String} The url to test.\n     *\n     * Returns:\n     * {Boolean} The provided url matches the control <url> or one of the\n     *     <layerUrls>.\n     */\n    urlMatches: function(url) {\n        var matches = OpenLayers.Util.isEquivalentUrl(this.url, url);\n        if(!matches && this.layerUrls) {\n            for(var i=0, len=this.layerUrls.length; i<len; ++i) {\n                if(OpenLayers.Util.isEquivalentUrl(this.layerUrls[i], url)) {\n                    matches = true;\n                    break;\n                }\n            }\n        }\n        return matches;\n    },\n\n    /**\n     * Method: buildWMSOptions\n     * Build an object with the relevant WMS options for the GetFeatureInfo request\n     *\n     * Parameters:\n     * url - {String} The url to be used for sending the request\n     * layers - {Array(<OpenLayers.Layer.WMS)} An array of layers\n     * clickPosition - {<OpenLayers.Pixel>} The position on the map where the mouse\n     *     event occurred.\n     * format - {String} The format from the corresponding GetMap request\n     */\n    buildWMSOptions: function(url, layers, clickPosition, format) {\n        var layerNames = [], styleNames = [];\n        for (var i = 0, len = layers.length; i < len; i++) {\n            if (layers[i].params.LAYERS != null) {\n                layerNames = layerNames.concat(layers[i].params.LAYERS);\n                styleNames = styleNames.concat(this.getStyleNames(layers[i]));\n            }\n        }\n        var firstLayer = layers[0];\n        // use the firstLayer's projection if it matches the map projection -\n        // this assumes that all layers will be available in this projection\n        var projection = this.map.getProjection();\n        var layerProj = firstLayer.projection;\n        if (layerProj && layerProj.equals(this.map.getProjectionObject())) {\n            projection = layerProj.getCode();\n        }\n        var params = OpenLayers.Util.extend({\n            service: \"WMS\",\n            version: firstLayer.params.VERSION,\n            request: \"GetFeatureInfo\",\n            exceptions: firstLayer.params.EXCEPTIONS,\n            bbox: this.map.getExtent().toBBOX(null,\n                firstLayer.reverseAxisOrder()),\n            feature_count: this.maxFeatures,\n            height: this.map.getSize().h,\n            width: this.map.getSize().w,\n            format: format,\n            info_format: firstLayer.params.INFO_FORMAT || this.infoFormat\n        }, (parseFloat(firstLayer.params.VERSION) >= 1.3) ?\n            {\n                crs: projection,\n                i: parseInt(clickPosition.x),\n                j: parseInt(clickPosition.y)\n            } :\n            {\n                srs: projection,\n                x: parseInt(clickPosition.x),\n                y: parseInt(clickPosition.y)\n            }\n        );\n        if (layerNames.length != 0) {\n            params = OpenLayers.Util.extend({\n                layers: layerNames,\n                query_layers: layerNames,\n                styles: styleNames\n            }, params);\n        }\n        OpenLayers.Util.applyDefaults(params, this.vendorParams);\n        return {\n            url: url,\n            params: OpenLayers.Util.upperCaseObject(params),\n            callback: function(request) {\n                this.handleResponse(clickPosition, request, url);\n            },\n            scope: this\n        };\n    },\n\n    /**\n     * Method: getStyleNames\n     * Gets the STYLES parameter for the layer. Make sure the STYLES parameter\n     * matches the LAYERS parameter\n     *\n     * Parameters:\n     * layer - {<OpenLayers.Layer.WMS>}\n     *\n     * Returns:\n     * {Array(String)} The STYLES parameter\n     */\n    getStyleNames: function(layer) {\n        // in the event of a WMS layer bundling multiple layers but not\n        // specifying styles,we need the same number of commas to specify\n        // the default style for each of the layers.  We can't just leave it\n        // blank as we may be including other layers that do specify styles.\n        var styleNames;\n        if (layer.params.STYLES) {\n            styleNames = layer.params.STYLES;\n        } else {\n            if (OpenLayers.Util.isArray(layer.params.LAYERS)) {\n                styleNames = new Array(layer.params.LAYERS.length);\n            } else {\n                styleNames = layer.params.LAYERS.toString().replace(/[^,]/g, \"\");\n            }\n        }\n        return styleNames;\n    },\n\n    /**\n     * Method: request\n     * Sends a GetFeatureInfo request to the WMS\n     *\n     * Parameters:\n     * clickPosition - {<OpenLayers.Pixel>} The position on the map where the\n     *     mouse event occurred.\n     * options - {Object} additional options for this method.\n     *\n     * Valid options:\n     * - *hover* {Boolean} true if we do the request for the hover handler\n     */\n    request: function(clickPosition, options) {\n        var layers = this.findLayers();\n        if(layers.length == 0) {\n            this.events.triggerEvent(\"nogetfeatureinfo\");\n            // Reset the cursor.\n            OpenLayers.Element.removeClass(this.map.viewPortDiv, \"olCursorWait\");\n            return;\n        }\n\n        options = options || {};\n        if(this.drillDown === false) {\n            var wmsOptions = this.buildWMSOptions(this.url, layers,\n                clickPosition, layers[0].params.FORMAT);\n            var request = OpenLayers.Request.GET(wmsOptions);\n\n            if (options.hover === true) {\n                this.hoverRequest = request;\n            }\n        } else {\n            this._requestCount = 0;\n            this._numRequests = 0;\n            this.features = [];\n            // group according to service url to combine requests\n            var services = {}, url;\n            for(var i=0, len=layers.length; i<len; i++) {\n                var layer = layers[i];\n                var service, found = false;\n                url = OpenLayers.Util.isArray(layer.url) ? layer.url[0] : layer.url;\n                if(url in services) {\n                    services[url].push(layer);\n                } else {\n                    this._numRequests++;\n                    services[url] = [layer];\n                }\n            }\n            var layers;\n            for (var url in services) {\n                layers = services[url];\n                var wmsOptions = this.buildWMSOptions(url, layers,\n                    clickPosition, layers[0].params.FORMAT);\n                OpenLayers.Request.GET(wmsOptions);\n            }\n        }\n    },\n\n    /**\n     * Method: triggerGetFeatureInfo\n     * Trigger the getfeatureinfo event when all is done\n     *\n     * Parameters:\n     * request - {XMLHttpRequest} The request object\n     * xy - {<OpenLayers.Pixel>} The position on the map where the\n     *     mouse event occurred.\n     * features - {Array(<OpenLayers.Feature.Vector>)} or\n     *     {Array({Object}) when output is \"object\". The object has a url and a\n     *     features property which contains an array of features.\n     */\n    triggerGetFeatureInfo: function(request, xy, features) {\n        this.events.triggerEvent(\"getfeatureinfo\", {\n            text: request.responseText,\n            features: features,\n            request: request,\n            xy: xy\n        });\n\n        // Reset the cursor.\n        OpenLayers.Element.removeClass(this.map.viewPortDiv, \"olCursorWait\");\n    },\n\n    /**\n     * Method: handleResponse\n     * Handler for the GetFeatureInfo response.\n     *\n     * Parameters:\n     * xy - {<OpenLayers.Pixel>} The position on the map where the\n     *     mouse event occurred.\n     * request - {XMLHttpRequest} The request object.\n     * url - {String} The url which was used for this request.\n     */\n    handleResponse: function(xy, request, url) {\n\n        var doc = request.responseXML;\n        if(!doc || !doc.documentElement) {\n            doc = request.responseText;\n        }\n\n        var features = [];\n        var responseHeaders = request.getAllResponseHeaders();\n        if(responseHeaders && this.infoFormat === \"application/json\" && responseHeaders.indexOf(\"application/json\") !== -1) {\n            features = new OpenLayers.Format.GeoJSON().read(doc);\n        }\n        else {\n            features = this.format.read(doc);\n        }\n\n        if (this.drillDown === false) {\n            this.triggerGetFeatureInfo(request, xy, features);\n        } else {\n            this._requestCount++;\n            if (this.output === \"object\") {\n                this._features = (this._features || []).concat(\n                    {url: url, features: features}\n                );\n            } else {\n            this._features = (this._features || []).concat(features);\n            }\n\n            if (this._requestCount === this._numRequests) {\n                this.triggerGetFeatureInfo(request, xy, this._features.concat());\n                delete this._features;\n                delete this._requestCount;\n                delete this._numRequests;\n            }\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.WMSGetFeatureInfo\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Handler/Click.js\n * @requires OpenLayers/Handler/Hover.js\n * @requires OpenLayers/Request.js\n * @requires OpenLayers/Format/WMSGetFeatureInfo.js\n */\n\n/**\n * Class: OpenLayers.Control.WMTSGetFeatureInfo\n * The WMTSGetFeatureInfo control uses a WMTS query to get information about a \n *     point on the map.  The information may be in a display-friendly format \n *     such as HTML, or a machine-friendly format such as GML, depending on the \n *     server's capabilities and the client's configuration.  This control \n *     handles click or hover events, attempts to parse the results using an \n *     OpenLayers.Format, and fires a 'getfeatureinfo' event for each layer\n *     queried.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.WMTSGetFeatureInfo = OpenLayers.Class(OpenLayers.Control, {\n\n   /**\n     * APIProperty: hover\n     * {Boolean} Send GetFeatureInfo requests when mouse stops moving.\n     *     Default is false.\n     */\n    hover: false,\n    \n    /**\n     * Property: requestEncoding\n     * {String} One of \"KVP\" or \"REST\".  Only KVP encoding is supported at this \n     *     time.\n     */\n    requestEncoding: \"KVP\",\n\n    /**\n     * APIProperty: drillDown\n     * {Boolean} Drill down over all WMTS layers in the map. When\n     *     using drillDown mode, hover is not possible.  A getfeatureinfo event\n     *     will be fired for each layer queried.\n     */\n    drillDown: false,\n\n    /**\n     * APIProperty: maxFeatures\n     * {Integer} Maximum number of features to return from a WMTS query. This\n     *     sets the feature_count parameter on WMTS GetFeatureInfo\n     *     requests.\n     */\n    maxFeatures: 10,\n\n    /** APIProperty: clickCallback\n     *  {String} The click callback to register in the\n     *      {<OpenLayers.Handler.Click>} object created when the hover\n     *      option is set to false. Default is \"click\".\n     */\n    clickCallback: \"click\",\n    \n    /**\n     * Property: layers\n     * {Array(<OpenLayers.Layer.WMTS>)} The layers to query for feature info.\n     *     If omitted, all map WMTS layers will be considered.\n     */\n    layers: null,\n\n    /**\n     * APIProperty: queryVisible\n     * {Boolean} Filter out hidden layers when searching the map for layers to \n     *     query.  Default is true.\n     */\n    queryVisible: true,\n\n    /**\n     * Property: infoFormat\n     * {String} The mimetype to request from the server\n     */\n    infoFormat: 'text/html',\n    \n    /**\n     * Property: vendorParams\n     * {Object} Additional parameters that will be added to the request, for\n     * WMTS implementations that support them. This could e.g. look like\n     * (start code)\n     * {\n     *     radius: 5\n     * }\n     * (end)\n     */\n    vendorParams: {},\n    \n    /**\n     * Property: format\n     * {<OpenLayers.Format>} A format for parsing GetFeatureInfo responses.\n     *     Default is <OpenLayers.Format.WMSGetFeatureInfo>.\n     */\n    format: null,\n    \n    /**\n     * Property: formatOptions\n     * {Object} Optional properties to set on the format (if one is not provided\n     *     in the <format> property.\n     */\n    formatOptions: null,\n\n    /**\n     * APIProperty: handlerOptions\n     * {Object} Additional options for the handlers used by this control, e.g.\n     * (start code)\n     * {\n     *     \"click\": {delay: 100},\n     *     \"hover\": {delay: 300}\n     * }\n     * (end)\n     */\n    \n    /**\n     * Property: handler\n     * {Object} Reference to the <OpenLayers.Handler> for this control\n     */\n    handler: null,\n    \n    /**\n     * Property: hoverRequest\n     * {<OpenLayers.Request>} contains the currently running hover request\n     *     (if any).\n     */\n    hoverRequest: null,\n    \n    /** \n     * APIProperty: events\n     * {<OpenLayers.Events>} Events instance for listeners and triggering\n     *     control specific events.\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * control.events.register(type, obj, listener);\n     * (end)\n     *\n     * Supported event types (in addition to those from <OpenLayers.Control.events>):\n     * beforegetfeatureinfo - Triggered before each request is sent.\n     *      The event object has an *xy* property with the position of the \n     *      mouse click or hover event that triggers the request and a *layer*\n     *      property referencing the layer about to be queried.  If a listener\n     *      returns false, the request will not be issued.\n     * getfeatureinfo - Triggered when a GetFeatureInfo response is received.\n     *      The event object has a *text* property with the body of the\n     *      response (String), a *features* property with an array of the\n     *      parsed features, an *xy* property with the position of the mouse\n     *      click or hover event that triggered the request, a *layer* property\n     *      referencing the layer queried and a *request* property with the \n     *      request itself. If drillDown is set to true, one event will be fired\n     *      for each layer queried.\n     * exception - Triggered when a GetFeatureInfo request fails (with a \n     *      status other than 200) or whenparsing fails.  Listeners will receive \n     *      an event with *request*, *xy*, and *layer*  properties.  In the case \n     *      of a parsing error, the event will also contain an *error* property.\n     */\n    \n    /** \n     * Property: pending\n     * {Number}  The number of pending requests.\n     */\n    pending: 0,\n\n    /**\n     * Constructor: <OpenLayers.Control.WMTSGetFeatureInfo>\n     *\n     * Parameters:\n     * options - {Object} \n     */\n    initialize: function(options) {\n        options = options || {};\n        options.handlerOptions = options.handlerOptions || {};\n\n        OpenLayers.Control.prototype.initialize.apply(this, [options]);\n        \n        if (!this.format) {\n            this.format = new OpenLayers.Format.WMSGetFeatureInfo(\n                options.formatOptions\n            );\n        }\n        \n        if (this.drillDown === true) {\n            this.hover = false;\n        }\n\n        if (this.hover) {\n            this.handler = new OpenLayers.Handler.Hover(\n                this, {\n                    move: this.cancelHover,\n                    pause: this.getInfoForHover\n                },\n                OpenLayers.Util.extend(\n                    this.handlerOptions.hover || {}, {delay: 250}\n                )\n            );\n        } else {\n            var callbacks = {};\n            callbacks[this.clickCallback] = this.getInfoForClick;\n            this.handler = new OpenLayers.Handler.Click(\n                this, callbacks, this.handlerOptions.click || {}\n            );\n        }\n    },\n\n    /**\n     * Method: getInfoForClick \n     * Called on click\n     *\n     * Parameters:\n     * evt - {<OpenLayers.Event>} \n     */\n    getInfoForClick: function(evt) {\n        this.request(evt.xy, {});\n    },\n   \n    /**\n     * Method: getInfoForHover\n     * Pause callback for the hover handler\n     *\n     * Parameters:\n     * evt - {Object}\n     */\n    getInfoForHover: function(evt) {\n        this.request(evt.xy, {hover: true});\n    },\n\n    /**\n     * Method: cancelHover\n     * Cancel callback for the hover handler\n     */\n    cancelHover: function() {\n        if (this.hoverRequest) {\n            --this.pending;\n            if (this.pending <= 0) {\n                OpenLayers.Element.removeClass(this.map.viewPortDiv, \"olCursorWait\");\n                this.pending = 0;\n            }            \n            this.hoverRequest.abort();\n            this.hoverRequest = null;\n        }\n    },\n\n    /**\n     * Method: findLayers\n     * Internal method to get the layers, independent of whether we are\n     *     inspecting the map or using a client-provided array\n     */\n    findLayers: function() {\n        var candidates = this.layers || this.map.layers;\n        var layers = [];\n        var layer;\n        for (var i=candidates.length-1; i>=0; --i) {\n            layer = candidates[i];\n            if (layer instanceof OpenLayers.Layer.WMTS &&\n                layer.requestEncoding === this.requestEncoding &&\n                (!this.queryVisible || layer.getVisibility())) {\n                layers.push(layer);\n                if (!this.drillDown || this.hover) {\n                    break;\n                }\n            }\n        }\n        return layers;\n    },\n    \n    /**\n     * Method: buildRequestOptions\n     * Build an object with the relevant options for the GetFeatureInfo request.\n     *\n     * Parameters:\n     * layer - {<OpenLayers.Layer.WMTS>} A WMTS layer.\n     * xy - {<OpenLayers.Pixel>} The position on the map where the \n     *     mouse event occurred.\n     */\n    buildRequestOptions: function(layer, xy) {\n        var loc = this.map.getLonLatFromPixel(xy);\n        var getTileUrl = layer.getURL(\n            new OpenLayers.Bounds(loc.lon, loc.lat, loc.lon, loc.lat)\n        );\n        var params = OpenLayers.Util.getParameters(getTileUrl);\n        var tileInfo = layer.getTileInfo(loc);\n        OpenLayers.Util.extend(params, {\n            service: \"WMTS\",\n            version: layer.version,\n            request: \"GetFeatureInfo\",\n            infoFormat: this.infoFormat,\n            feature_count: this.maxFeatures,\n            i: tileInfo.i,\n            j: tileInfo.j\n        });\n        OpenLayers.Util.applyDefaults(params, this.vendorParams);\n        return {\n            url: OpenLayers.Util.isArray(layer.url) ? layer.url[0] : layer.url,\n            params: OpenLayers.Util.upperCaseObject(params),\n            callback: function(request) {\n                this.handleResponse(xy, request, layer);\n            },\n            scope: this\n        };\n    },\n\n    /**\n     * Method: request\n     * Sends a GetFeatureInfo request to the WMTS\n     * \n     * Parameters:\n     * xy - {<OpenLayers.Pixel>} The position on the map where the mouse event \n     *     occurred.\n     * options - {Object} additional options for this method.\n     * \n     * Valid options:\n     * - *hover* {Boolean} true if we do the request for the hover handler\n     */\n    request: function(xy, options) {\n        options = options || {};\n        var layers = this.findLayers();\n        if (layers.length > 0) {\n            var issue, layer;\n            for (var i=0, len=layers.length; i<len; i++) {\n                layer = layers[i];\n                issue = this.events.triggerEvent(\"beforegetfeatureinfo\", {\n                    xy: xy,\n                    layer: layer\n                });\n                if (issue !== false) {\n                    ++this.pending;\n                    var requestOptions = this.buildRequestOptions(layer, xy);\n                    var request = OpenLayers.Request.GET(requestOptions);\n                    if (options.hover === true) {\n                        this.hoverRequest = request;\n                    }\n                }\n            }\n            if (this.pending > 0) {\n                OpenLayers.Element.addClass(this.map.viewPortDiv, \"olCursorWait\");\n            }\n        }\n    },\n\n    /**\n     * Method: handleResponse\n     * Handler for the GetFeatureInfo response.\n     * \n     * Parameters:\n     * xy - {<OpenLayers.Pixel>} The position on the map where the mouse event \n     *     occurred.\n     * request - {XMLHttpRequest} The request object.\n     * layer - {<OpenLayers.Layer.WMTS>} The queried layer.\n     */\n    handleResponse: function(xy, request, layer) {\n        --this.pending;\n        if (this.pending <= 0) {\n            OpenLayers.Element.removeClass(this.map.viewPortDiv, \"olCursorWait\");\n            this.pending = 0;\n        }\n        if (request.status && (request.status < 200 || request.status >= 300)) {\n            this.events.triggerEvent(\"exception\", {\n                xy: xy, \n                request: request,\n                layer: layer\n            });\n        } else {\n            var doc = request.responseXML;\n            if (!doc || !doc.documentElement) {\n                doc = request.responseText;\n            }\n            var features, except;\n            try {\n                features = this.format.read(doc);\n            } catch (error) {\n                except = true;\n                this.events.triggerEvent(\"exception\", {\n                    xy: xy,\n                    request: request,\n                    error: error,\n                    layer: layer\n                });\n            }\n            if (!except) {\n                this.events.triggerEvent(\"getfeatureinfo\", {\n                    text: request.responseText,\n                    features: features,\n                    request: request,\n                    xy: xy,\n                    layer: layer\n                });\n            }\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.WMTSGetFeatureInfo\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Lang.js\n * @requires OpenLayers/Rule.js\n * @requires OpenLayers/StyleMap.js\n * @requires OpenLayers/Layer/Vector.js\n */\n\n/**\n * Class: OpenLayers.Control.Graticule\n * The Graticule displays a grid of latitude/longitude lines reprojected on\n * the map.\n * The grid is specified by a list of widths in degrees (with height the same as\n * the width). The grid height can be specified as a multiple of the width.\n * This allows making the grid more regular in specific regions of some\n * projections. The grid can also be specified by lists of both widths and\n * heights. This allows matching externally-defined grid systems.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n *\n */\nOpenLayers.Control.Graticule = OpenLayers.Class(OpenLayers.Control, {\n\n    /**\n     * APIProperty: autoActivate\n     * {Boolean} Activate the control when it is added to a map. Default is\n     *     true.\n     */\n    autoActivate: true,\n\n    /**\n     * APIProperty: intervals\n     * {Array(Float)} A list of possible graticule widths in degrees.\n     */\n    intervals: [90, 45, 30, 20, 10, 5, 2, 1,\n        0.5, 0.2, 0.1, 0.05, 0.01,\n        0.005, 0.002, 0.001\n    ],\n\n    /**\n     * APIProperty: intervalHeights\n     * {Array(Float)} A list of possible graticule heights in degrees.\n     * Length must match intervals array.\n     * Default is null (same as widths).\n     */\n    intervalHeights: null,\n\n    /**\n     * Property: intervalHeightFactor\n     * {Number} Factor to compute graticule height from the width.\n     * Can be used to match existing grid systems, or improve regularity of\n     * grid. Default is 1.\n     * Ignored if intervalHeights are set explicitly.\n     */\n    intervalHeightFactor: 1,\n\n    /**\n     * APIProperty: displayInLayerSwitcher\n     * {Boolean} Allows the Graticule control to be switched on and off by\n     *     LayerSwitcher control. Defaults is true.\n     */\n    displayInLayerSwitcher: true,\n\n    /**\n     * APIProperty: visible\n     * {Boolean} should the graticule be initially visible (default=true)\n     */\n    visible: true,\n\n    /**\n     * APIProperty: numPoints\n     * {Integer} The number of points to use in each graticule line.  Higher\n     * numbers result in a smoother curve for projected maps.\n     * *Deprecated*. The number of points is now determined by adaptive\n     * quantization.\n     */\n    numPoints: 50,\n\n    /**\n     * APIProperty: targetSize\n     * {Integer} The maximum size of the grid in pixels on the map\n     */\n    targetSize: 200,\n\n    /**\n     * APIProperty: layerName\n     * {String} The name to be displayed in the layer switcher, default is set\n     *     by {<OpenLayers.Lang>}.\n     */\n    layerName: null,\n\n    /**\n     * APIProperty: labelled\n     * {Boolean} Should the graticule lines be labelled?. default=true\n     */\n    labelled: true,\n\n    /**\n     * APIProperty: labelFormat\n     * {String} the format of the labels, default = 'dm'. See\n     * <OpenLayers.Util.getFormattedLonLat> for other options.\n     */\n    labelFormat: 'dm',\n\n    /**\n     * APIProperty: labelLonYOffset\n     * {Integer} the offset of the longitude (X) label from the bottom of the\n     * map.\n     */\n    labelLonYOffset: 2,\n\n    /**\n     * APIProperty: labelLatXOffset\n     * {Integer} the offset of the latitude (Y) label from the right of the map.\n     */\n    labelLatXOffset: -2,\n\n    /**\n     * APIProperty: lineSymbolizer\n     * {symbolizer} the symbolizer used to render lines\n     */\n    lineSymbolizer: {\n        strokeColor: \"#333\",\n        strokeWidth: 1,\n        strokeOpacity: 0.5\n    },\n\n    /**\n     * APIProperty: labelSymbolizer\n     * {symbolizer} the symbolizer used to render labels\n     */\n    labelSymbolizer: null,\n\n    /**\n     * Property: gratLayer\n     * {<OpenLayers.Layer.Vector>} vector layer used to draw the graticule on\n     */\n    gratLayer: null,\n\n    /**\n     * Property: epsg4326Projection\n     * {OpenLayers.Projection}\n     */\n    epsg4326Projection: null,\n\n    /**\n     * Property: projection\n     * {OpenLayers.Projection} The projection of the graticule.\n     */\n    projection: null,\n\n    /**\n     * Property: projectionCenterLonLat\n     * {OpenLayers.LonLat} The center of the projection's validity extent.\n     */\n    projectionCenterLonLat: null,\n\n    /**\n     * Property: maxLat\n     * {number}\n     */\n    maxLat: Infinity,\n\n    /**\n     * Propety: maxLon\n     * {number}\n     */\n    maxLon: Infinity,\n\n    /**\n     * Property: minLat\n     * {number}\n     */\n    minLat: -Infinity,\n\n    /**\n     * Property: minLon\n     * {number}\n     */\n    minLon: -Infinity,\n\n    /**\n     * Property: meridians\n     * {Array.<OpenLayers.Feature.Vector>}\n     */\n    meridians: null,\n\n    /**\n     * Property. parallels\n     * {Array.<OpenLayers.Feature.Vector>}\n     */\n    parallels: null,\n\n    /**\n     * Constructor: OpenLayers.Control.Graticule\n     * Create a new graticule control to display a grid of latitude longitude\n     * lines.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be used\n     *     to extend the control.\n     */\n    initialize: function(options) {\n        options = options || {};\n        options.layerName = options.layerName || OpenLayers.i18n(\"Graticule\");\n        OpenLayers.Control.prototype.initialize.apply(this, [options]);\n\n        this.labelSymbolizer = {\n            stroke: false,\n            fill: false,\n            label: \"${label}\",\n            labelAlign: \"${labelAlign}\",\n            labelXOffset: \"${xOffset}\",\n            labelYOffset: \"${yOffset}\"\n        };\n\n        this.epsg4326Projection = new OpenLayers.Projection('EPSG:4326');\n        this.parallels = [];\n        this.meridians = [];\n    },\n\n    /**\n     * APIMethod: destroy\n     */\n    destroy: function() {\n        this.deactivate();\n        OpenLayers.Control.prototype.destroy.apply(this, arguments);\n        if (this.gratLayer) {\n            this.gratLayer.destroy();\n            this.gratLayer = null;\n        }\n    },\n\n    /**\n     * Method: draw\n     *\n     * initializes the graticule layer and does the initial update\n     *\n     * Returns:\n     * {DOMElement}\n     */\n    draw: function() {\n        OpenLayers.Control.prototype.draw.apply(this, arguments);\n        if (!this.gratLayer) {\n            var gratStyle = new OpenLayers.Style({}, {\n                rules: [new OpenLayers.Rule({\n                    'symbolizer': {\n                        \"Point\": this.labelSymbolizer,\n                        \"Line\": this.lineSymbolizer\n                    }\n                })]\n            });\n            this.gratLayer = new OpenLayers.Layer.Vector(this.layerName, {\n                styleMap: new OpenLayers.StyleMap({\n                    'default': gratStyle\n                }),\n                visibility: this.visible,\n                displayInLayerSwitcher: this.displayInLayerSwitcher,\n                // Prefer the canvas renderer to avoid coordinate range issues\n                // with graticule lines\n                renderers: ['Canvas', 'VML', 'SVG']\n            });\n        }\n        return this.div;\n    },\n\n    /**\n     * APIMethod: activate\n     */\n    activate: function() {\n        if (OpenLayers.Control.prototype.activate.apply(this, arguments)) {\n            this.map.addLayer(this.gratLayer);\n            this.map.events.register('moveend', this, this.update);\n            this.update();\n            return true;\n        } else {\n            return false;\n        }\n    },\n\n    /**\n     * APIMethod: deactivate\n     */\n    deactivate: function() {\n        if (OpenLayers.Control.prototype.deactivate.apply(this, arguments)) {\n            this.map.events.unregister('moveend', this, this.update);\n            this.map.removeLayer(this.gratLayer);\n            return true;\n        } else {\n            return false;\n        }\n    },\n\n    /**\n     * Method: update\n     *\n     * calculates the grid to be displayed and actually draws it\n     *\n     * Returns:\n     * {DOMElement}\n     */\n    update: function() {\n        var map = this.map;\n        //wait for the map to be initialized before proceeding\n        var extent = this.map.getExtent();\n        if (!extent) {\n            return;\n        }\n        var center = map.getCenter();\n        var projection = map.getProjectionObject();\n        var resolution = map.getResolution();\n        var squaredTolerance = resolution * resolution / 4;\n\n        var updateProjectionInfo = !this.projection || !this.projection.equals(projection);\n\n        if (updateProjectionInfo) {\n            this.updateProjectionInfo(projection);\n        }\n\n        this.createGraticule(extent, center, resolution, squaredTolerance);\n\n        // Draw the lines\n        this.gratLayer.destroyFeatures();\n        this.gratLayer.addFeatures(this.meridians);\n        this.gratLayer.addFeatures(this.parallels);\n\n        // Draw the labels\n        if (this.labelled) {\n            var left = new OpenLayers.Geometry.LineString([\n                new OpenLayers.Geometry.Point(extent.left, extent.bottom),\n                new OpenLayers.Geometry.Point(extent.left, extent.top)\n            ]);\n            var top = new OpenLayers.Geometry.LineString([\n                new OpenLayers.Geometry.Point(extent.left, extent.top),\n                new OpenLayers.Geometry.Point(extent.right, extent.top)\n            ]);\n            var labels = [];\n            var i, ii, line, labelPoint, split, labelAlign;\n            for (i = 0, ii = this.meridians.length; i < ii; ++i) {\n                line = this.meridians[i];\n                labelPoint = line.attributes.labelPoint;\n                labelAlign = 'cb';\n                // If there is no intersection with the bottom of the viewport,\n                // intersect with the left.\n                if (!labelPoint) {\n                    split = line.geometry.split(left);\n                    if (split) {\n                        labelPoint = split[0].components[1];\n                        labelAlign = 'lt';\n                    }\n                }\n                if (labelPoint) {\n                    labels.push(new OpenLayers.Feature.Vector(labelPoint, {\n                        value: line.attributes.lon,\n                        label: OpenLayers.Util.getFormattedLonLat(\n                            line.attributes.lon, 'lon', this.labelFormat),\n                        labelAlign: labelAlign,\n                        xOffset: 0,\n                        yOffset: this.labelLonYOffset\n                    }));\n                }\n            }\n            for (i = 0, ii = this.parallels.length; i < ii; ++i) {\n                line = this.parallels[i];\n                labelPoint = line.attributes.labelPoint;\n                labelAlign = 'rb';\n                // If there is no intersection with the right of the viewport,\n                // intersect with the top.\n                if (!labelPoint) {\n                    split = line.geometry.split(top);\n                    if (split) {\n                        labelPoint = split[0].components[1];\n                        labelAlign = 'ct';\n                    }\n                }\n                if (labelPoint) {\n                    labels.push(new OpenLayers.Feature.Vector(labelPoint, {\n                        value: line.attributes.lat,\n                        label: OpenLayers.Util.getFormattedLonLat(\n                            line.attributes.lat, 'lat', this.labelFormat),\n                        labelAlign: labelAlign,\n                        xOffset: this.labelLatXOffset,\n                        yOffset: 2\n                    }));\n                }\n            }\n            this.gratLayer.addFeatures(labels);\n        }\n    },\n\n    /**\n     * Method: createGraticule\n     *\n     * Parameters:\n     * extent - {OpenLayers.Bounds} Extent.\n     * center - {OpenLayers.LonLat} Center.\n     * resolution - {number} Resolution.\n     * squaredTolerance - {number} Squared tolerance.\n     */\n    createGraticule: function(extent, center, resolution, squaredTolerance) {\n        var centerLonLat = center.clone().transform(\n            this.projection, this.epsg4326Projection);\n        // If centerLonLat could not be transformed (e.g. [0, 0] in polar\n        // projections), we shift the center a bit to get a result.\n        if (isNaN(centerLonLat.lon) || isNaN(centerLonLat.lat)) {\n            centerLonLat = center.add(0.000000001, 0.000000001).transform(\n                this.projection, this.epsg4326Projection);\n        }\n        var extentGeom = extent.toGeometry();\n        var extent4326 = extent.clone()\n            .transform(this.projection, this.epsg4326Projection);\n\n        // Optimize the length of graticule lines: Instead of always calculating\n        // and rendering them from one end of the world to the other, we only\n        // want to create them for the visible map viewport. To make sure that\n        // our graticule lines are long enough (even in polar projections), we\n        // only make this optimization under certain conditions:\n        // * When we look at a small subset of the world\n        // * When coordinates increase south -> north and west -> east\n        // * When the projection center is not inside the extent.\n        // With these conditions, a valid grid will be available for all\n        // projections within their validity extent. Outside the validity\n        // extent, partial grid lines may occur.\n        var minLon, minLat, maxLon, maxLat;\n        var pixelSize = this.map.getGeodesicPixelSize();\n        if (pixelSize.w < 0.5 && pixelSize.h < 0.5 &&\n                extent4326.right > extent4326.left &&\n                extent4326.top > extent4326.bottom &&\n                Math.abs(extent4326.bottom) / extent4326.bottom ==\n                Math.abs(extent4326.top) / extent4326.top &&\n                Math.abs(extent4326.left) / extent4326.left ==\n                Math.abs(extent4326.right) / extent4326.right) {\n            minLon = Math.max(extent4326.left, this.minLon);\n            minLat = Math.max(extent4326.bottom, this.minLat);\n            maxLon = Math.min(extent4326.right, this.maxLon);\n            maxLat = Math.min(extent4326.top, this.maxLat);\n        } else {\n            minLon = this.minLon;\n            minLat = this.minLat;\n            maxLon = this.maxLon;\n            maxLat = this.maxLat;\n        }\n\n        var size = this.map.getSize();\n        var idx, prevIdx, lon, lat, visibleIntervals, interval, intervalIndex;\n        var centerLon, centerLat;\n\n        // Create meridians\n\n        // Start with the coarsest interval, then refine until we reach the\n        // desired targetSize\n        visibleIntervals = Math.ceil(size.w / this.targetSize);\n        intervalIndex = 0;\n        do {\n            interval = this.intervals[intervalIndex++];\n            centerLon = Math.floor(centerLonLat.lon / interval) * interval;\n\n            lon = Math.max(centerLon, this.minLon);\n            lon = Math.min(lon, this.maxLon);\n\n            idx = this.addMeridian(\n                lon, minLat, maxLat, squaredTolerance, extentGeom, 0);\n\n            while (lon != this.minLon) {\n                lon = Math.max(lon - interval, this.minLon);\n                prevIdx = idx;\n                idx = this.addMeridian(\n                    lon, minLat, maxLat, squaredTolerance, extentGeom, idx);\n                if (prevIdx == idx) {\n                    // bail out if we're producing lines that are not visible\n                    break;\n                }\n            }\n\n            lon = Math.max(centerLon, this.minLon);\n            lon = Math.min(lon, this.maxLon);\n\n            while (lon != this.maxLon) {\n                lon = Math.min(lon + interval, this.maxLon);\n                prevIdx = idx;\n                idx = this.addMeridian(\n                    lon, minLat, maxLat, squaredTolerance, extentGeom, idx);\n                if (prevIdx == idx) {\n                    // bail out if we're producing lines that are not visible\n                    break;\n                }\n            }\n        } while (intervalIndex < this.intervals.length &&\n            idx <= visibleIntervals);\n\n        this.meridians.length = idx;\n\n        // Create parallels\n\n        // Start with the coarsest interval, then refine until we reach the\n        // desired targetSize\n        visibleIntervals = Math.ceil(size.h / this.targetSize);\n        intervalIndex = 0;\n        do {\n            interval = this.intervalHeights ?\n                this.intervalHeights[intervalIndex++] :\n                this.intervals[intervalIndex++] * this.intervalHeightFactor;\n            centerLat = Math.floor(centerLonLat.lat / interval) * interval;\n\n            lat = Math.max(centerLat, this.minLat);\n            lat = Math.min(lat, this.maxLat);\n\n            idx = this.addParallel(\n                lat, minLon, maxLon, squaredTolerance, extentGeom, 0);\n\n            while (lat != this.minLat) {\n                lat = Math.max(lat - interval, this.minLat);\n                prevIdx = idx;\n                idx = this.addParallel(\n                    lat, minLon, maxLon, squaredTolerance, extentGeom, idx);\n                if (prevIdx == idx) {\n                    // bail out if we're producing lines that are not visible\n                    break;\n                }\n            }\n\n            lat = Math.max(centerLat, this.minLat);\n            lat = Math.min(lat, this.maxLat);\n\n            while (lat != this.maxLat) {\n                lat = Math.min(lat + interval, this.maxLat);\n                prevIdx = idx;\n                idx = this.addParallel(\n                    lat, minLon, maxLon, squaredTolerance, extentGeom, idx);\n                if (prevIdx == idx) {\n                    // bail out if we're producing lines that are not visible\n                    break;\n                }\n            }\n\n        } while (intervalIndex < this.intervals.length &&\n            idx <= visibleIntervals);\n\n        this.parallels.length = idx;\n    },\n\n    /**\n     * Method: updateProjectionInfo\n     *\n     * Parameters:\n     * projection - {OpenLayers.Projection} Projection.\n     */\n    updateProjectionInfo: function(projection) {\n        var defaults = OpenLayers.Projection.defaults[projection.getCode()];\n        var extent = defaults && defaults.maxExtent ?\n            OpenLayers.Bounds.fromArray(defaults.maxExtent) :\n            this.map.getMaxExtent();\n        var worldExtent = defaults && defaults.worldExtent ?\n            defaults.worldExtent : [-180, -90, 180, 90];\n\n        this.maxLat = worldExtent[3];\n        this.maxLon = worldExtent[2];\n        this.minLat = worldExtent[1];\n        this.minLon = worldExtent[0];\n\n        // Use the center of the transformed projection extent rather than the\n        // transformed center of the projection extent. This way we avoid issues\n        // with polar projections where [0, 0] cannot be transformed.\n        this.projectionCenterLonLat = extent.clone().transform(\n            projection, this.epsg4326Projection).getCenterLonLat();\n\n        this.projection = projection;\n    },\n\n    /**\n     * Method: addMeridian\n     *\n     * Parameters:\n     * lon - {number} Longitude.\n     * minLat - {number} Minimum latitude.\n     * maxLat - {number} Maximum latitude.\n     * squaredTolerance - {number} Squared tolerance.\n     * extentGeom - {OpenLayers.Geometry.Polygon} Extent.\n     * index {number} Index.\n     *\n     * Returns:\n     * {number} Index.\n     */\n    addMeridian: function(\n            lon, minLat, maxLat, squaredTolerance, extentGeom, index) {\n        var lineString = OpenLayers.Geometry.LineString.geodesicMeridian(\n            lon, minLat, maxLat, this.projection, squaredTolerance);\n        var split = lineString.split(new OpenLayers.Geometry.LineString(\n            extentGeom.components[0].components.slice(0, 2)));\n        if (split || extentGeom.intersects(lineString)) {\n            this.meridians[index++] =\n                new OpenLayers.Feature.Vector(lineString, {\n                    lon: lon,\n                    labelPoint: split ? split[0].components[1] : undefined\n                });\n        }\n        return index;\n    },\n\n    /**\n     * Method: addParallel\n     *\n     * Parameters:\n     * lat - {number} Latitude.\n     * minLon - {number} Minimum longitude.\n     * maxLon - {number} Maximum longitude.\n     * squaredTolerance - {number} Squared tolerance.\n     * extentGeom - {OpenLayers.Geometry.Polygon} Extent.\n     * index - {number} Index.\n     *\n     * Returns:\n     * {number} Index.\n     */\n    addParallel: function(\n            lat, minLon, maxLon, squaredTolerance, extentGeom, index) {\n        var lineString = OpenLayers.Geometry.LineString.geodesicParallel(\n            lat, minLon, maxLon, this.projection, squaredTolerance);\n        var split = lineString.split(new OpenLayers.Geometry.LineString(\n            extentGeom.components[0].components.slice(1, 3)));\n        if (split || extentGeom.intersects(lineString)) {\n            this.parallels[index++] =\n                new OpenLayers.Feature.Vector(lineString, {\n                    lat: lat,\n                    labelPoint: split ? split[0].components[1] : undefined\n                });\n        }\n        return index;\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.Graticule\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Control/DragFeature.js\n * @requires OpenLayers/Feature/Vector.js\n * @requires OpenLayers/Geometry/LineString.js\n * @requires OpenLayers/Geometry/Point.js\n */\n\n/**\n * Class: OpenLayers.Control.TransformFeature\n * Control to transform features with a standard transformation box.\n *\n * Inherits From:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.TransformFeature = OpenLayers.Class(OpenLayers.Control, {\n\n    /** \n     * APIProperty: events\n     * {<OpenLayers.Events>} Events instance for listeners and triggering\n     *     control specific events.\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * control.events.register(type, obj, listener);\n     * (end)\n     *\n     * Supported event types (in addition to those from <OpenLayers.Control.events>):\n     * beforesetfeature - Triggered before a feature is set for\n     *     tranformation. The feature will not be set if a listener returns\n     *     false. Listeners receive a *feature* property, with the feature\n     *     that will be set for transformation. Listeners are allowed to\n     *     set the control's *scale*, *ratio* and *rotation* properties,\n     *     which will set the initial scale, ratio and rotation of the\n     *     feature, like the <setFeature> method's initialParams argument.\n     * setfeature - Triggered when a feature is set for tranformation.\n     *     Listeners receive a *feature* property, with the feature that\n     *     is now set for transformation.\n     * beforetransform - Triggered while dragging, before a feature is\n     *     transformed. The feature will not be transformed if a listener\n     *     returns false (but the box still will). Listeners receive one or\n     *     more of *center*, *scale*, *ratio* and *rotation*. The *center*\n     *     property is an <OpenLayers.Geometry.Point> object with the new\n     *     center of the transformed feature, the others are Floats with the\n     *     scale, ratio or rotation change since the last transformation.\n     * transform - Triggered while dragging, when a feature is transformed.\n     *     Listeners receive an event object with one or more of *center*,\n     *     scale*, *ratio* and *rotation*. The *center* property is an\n     *     <OpenLayers.Geometry.Point> object with the new center of the\n     *     transformed feature, the others are Floats with the scale, ratio\n     *     or rotation change of the feature since the last transformation.\n     * transformcomplete - Triggered after dragging. Listeners receive\n     *     an event object with the transformed *feature*.\n     */\n\n    /**\n     * APIProperty: geometryTypes\n     * {Array(String)} To restrict transformation to a limited set of geometry\n     *     types, send a list of strings corresponding to the geometry class\n     *     names.\n     */\n    geometryTypes: null,\n\n    /**\n     * Property: layer\n     * {<OpenLayers.Layer.Vector>}\n     */\n    layer: null,\n    \n    /**\n     * APIProperty: preserveAspectRatio\n     * {Boolean} set to true to not change the feature's aspect ratio.\n     */\n    preserveAspectRatio: false,\n    \n    /**\n     * APIProperty: rotate\n     * {Boolean} set to false if rotation should be disabled. Default is true.\n     *     To be passed with the constructor or set when the control is not\n     *     active.\n     */\n    rotate: true,\n    \n    /**\n     * APIProperty: feature\n     * {<OpenLayers.Feature.Vector>} Feature currently available for\n     *     transformation. Read-only, use <setFeature> to set it manually.\n     */\n    feature: null,\n    \n    /**\n     * APIProperty: renderIntent\n     * {String|Object} Render intent for the transformation box and\n     *     handles. A symbolizer object can also be provided here.\n     */\n    renderIntent: \"temporary\",\n    \n    /**\n     * APIProperty: rotationHandleSymbolizer\n     * {Object|String} Optional. A custom symbolizer for the rotation handles.\n     *     A render intent can also be provided here. Defaults to\n     *     (code)\n     *     {\n     *         stroke: false,\n     *         pointRadius: 10,\n     *         fillOpacity: 0,\n     *         cursor: \"pointer\"\n     *     }\n     *     (end)\n     */\n    rotationHandleSymbolizer: null,\n    \n    /**\n     * APIProperty: box\n     * {<OpenLayers.Feature.Vector>} The transformation box rectangle.\n     *     Read-only.\n     */\n    box: null,\n    \n    /**\n     * APIProperty: center\n     * {<OpenLayers.Geometry.Point>} The center of the feature bounds.\n     * Read-only.\n     */\n    center: null,\n    \n    /**\n     * APIProperty: scale\n     * {Float} The scale of the feature, relative to the scale the time the\n     *     feature was set. Read-only, except for *beforesetfeature*\n     *     listeners.\n     */\n    scale: 1,\n    \n    /**\n     * APIProperty: ratio\n     * {Float} The ratio of the feature relative to the ratio the time the\n     *     feature was set. Read-only, except for *beforesetfeature*\n     *     listeners.\n     */\n    ratio: 1,\n    \n    /**\n     * Property: rotation\n     * {Integer} the current rotation angle of the box. Read-only, except for\n     *     *beforesetfeature* listeners.\n     */\n    rotation: 0,\n    \n    /**\n     * APIProperty: handles\n     * {Array(<OpenLayers.Feature.Vector>)} The 8 handles currently available\n     *     for scaling/resizing. Numbered counterclockwise, starting from the\n     *     southwest corner. Read-only.\n     */\n    handles: null,\n    \n    /**\n     * APIProperty: rotationHandles\n     * {Array(<OpenLayers.Feature.Vector>)} The 4 rotation handles currently\n     *     available for rotating. Numbered counterclockwise, starting from\n     *     the southwest corner. Read-only.\n     */\n    rotationHandles: null,\n    \n    /**\n     * Property: dragControl\n     * {<OpenLayers.Control.DragFeature>}\n     */\n    dragControl: null,\n    \n    /**\n     * APIProperty: irregular\n     * {Boolean} Make scaling/resizing work irregularly. If true then\n     *     dragging a handle causes the feature to resize in the direction\n     *     of movement. If false then the feature resizes symmetrically\n     *     about it's center.\n     */\n    irregular: false,\n    \n    /**\n     * Constructor: OpenLayers.Control.TransformFeature\n     * Create a new transform feature control.\n     *\n     * Parameters:\n     * layer - {<OpenLayers.Layer.Vector>} Layer that contains features that\n     *     will be transformed.\n     * options - {Object} Optional object whose properties will be set on the\n     *     control.\n     */\n    initialize: function(layer, options) {\n        OpenLayers.Control.prototype.initialize.apply(this, [options]);\n\n        this.layer = layer;\n\n        if(!this.rotationHandleSymbolizer) {\n            this.rotationHandleSymbolizer = {\n                stroke: false,\n                pointRadius: 10,\n                fillOpacity: 0,\n                cursor: \"pointer\"\n            };\n        }\n\n        this.createBox();\n        this.createControl();        \n    },\n    \n    /**\n     * APIMethod: activate\n     * Activates the control.\n     */\n    activate: function() {\n        var activated = false;\n        if(OpenLayers.Control.prototype.activate.apply(this, arguments)) {\n            this.dragControl.activate();\n            this.layer.addFeatures([this.box]);\n            this.rotate && this.layer.addFeatures(this.rotationHandles);\n            this.layer.addFeatures(this.handles);        \n            activated = true;\n        }\n        return activated;\n    },\n    \n    /**\n     * APIMethod: deactivate\n     * Deactivates the control.\n     */\n    deactivate: function() {\n        var deactivated = false;\n        if(OpenLayers.Control.prototype.deactivate.apply(this, arguments)) {\n            this.layer.removeFeatures(this.handles);\n            this.rotate && this.layer.removeFeatures(this.rotationHandles);\n            this.layer.removeFeatures([this.box]);\n            this.dragControl.deactivate();\n            deactivated = true;\n        }\n        return deactivated;\n    },\n    \n    /**\n     * Method: setMap\n     * \n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    setMap: function(map) {\n        this.dragControl.setMap(map);\n        OpenLayers.Control.prototype.setMap.apply(this, arguments);\n    },\n\n    /**\n     * APIMethod: setFeature\n     * Place the transformation box on a feature and start transforming it.\n     * If the control is not active, it will be activated.\n     * \n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     * initialParams - {Object} Initial values for rotation, scale or ratio.\n     *     Setting a rotation value here will cause the transformation box to\n     *     start rotated. Setting a scale or ratio will not affect the\n     *     transormation box, but applications may use this to keep track of\n     *     scale and ratio of a feature across multiple transforms.\n     */\n    setFeature: function(feature, initialParams) {\n        initialParams = OpenLayers.Util.applyDefaults(initialParams, {\n            rotation: 0,\n            scale: 1,\n            ratio: 1\n        });\n\n        var oldRotation = this.rotation;\n        var oldCenter = this.center;\n        OpenLayers.Util.extend(this, initialParams);\n\n        var cont = this.events.triggerEvent(\"beforesetfeature\",\n            {feature: feature}\n        );\n        if (cont === false) {\n            return;\n        }\n\n        this.feature = feature;\n        this.activate();\n\n        this._setfeature = true;\n\n        var featureBounds = this.feature.geometry.getBounds();\n        this.box.move(featureBounds.getCenterLonLat());\n        this.box.geometry.rotate(-oldRotation, oldCenter);\n        this._angle = 0;\n\n        var ll;\n        if(this.rotation) {\n            var geom = feature.geometry.clone();\n            geom.rotate(-this.rotation, this.center);\n            var box = new OpenLayers.Feature.Vector(\n                geom.getBounds().toGeometry());\n            box.geometry.rotate(this.rotation, this.center);\n            this.box.geometry.rotate(this.rotation, this.center);\n            this.box.move(box.geometry.getBounds().getCenterLonLat());\n            var llGeom = box.geometry.components[0].components[0];\n            ll = llGeom.getBounds().getCenterLonLat();\n        } else {\n            ll = new OpenLayers.LonLat(featureBounds.left, featureBounds.bottom);\n        }\n        this.handles[0].move(ll);\n        \n        delete this._setfeature;\n\n        this.events.triggerEvent(\"setfeature\", {feature: feature});\n    },\n    \n    /**\n     * APIMethod: unsetFeature\n     * Remove the transformation box off any feature.\n     * If the control is active, it will be deactivated first.\n     */\n    unsetFeature: function() {\n        if (this.active) {\n            this.deactivate();\n        } else {\n            this.feature = null;\n            this.rotation = 0;\n            this.scale = 1;\n            this.ratio = 1;\n        }\n    },\n    \n    /**\n     * Method: createBox\n     * Creates the box with all handles and transformation handles.\n     */\n    createBox: function() {\n        var control = this;\n        \n        this.center = new OpenLayers.Geometry.Point(0, 0);\n        this.box = new OpenLayers.Feature.Vector(\n            new OpenLayers.Geometry.LineString([\n                new OpenLayers.Geometry.Point(-1, -1),\n                new OpenLayers.Geometry.Point(0, -1),\n                new OpenLayers.Geometry.Point(1, -1),\n                new OpenLayers.Geometry.Point(1, 0),\n                new OpenLayers.Geometry.Point(1, 1),\n                new OpenLayers.Geometry.Point(0, 1),\n                new OpenLayers.Geometry.Point(-1, 1),\n                new OpenLayers.Geometry.Point(-1, 0),\n                new OpenLayers.Geometry.Point(-1, -1)\n            ]), null,\n            typeof this.renderIntent == \"string\" ? null : this.renderIntent\n        );\n        \n        // Override for box move - make sure that the center gets updated\n        this.box.geometry.move = function(x, y) {\n            control._moving = true;\n            OpenLayers.Geometry.LineString.prototype.move.apply(this, arguments);\n            control.center.move(x, y);\n            delete control._moving;\n        };\n\n        // Overrides for vertex move, resize and rotate - make sure that\n        // handle and rotationHandle geometries are also moved, resized and\n        // rotated.\n        var vertexMoveFn = function(x, y) {\n            OpenLayers.Geometry.Point.prototype.move.apply(this, arguments);\n            this._rotationHandle && this._rotationHandle.geometry.move(x, y);\n            this._handle.geometry.move(x, y);\n        };\n        var vertexResizeFn = function(scale, center, ratio) {\n            OpenLayers.Geometry.Point.prototype.resize.apply(this, arguments);\n            this._rotationHandle && this._rotationHandle.geometry.resize(\n                scale, center, ratio);\n            this._handle.geometry.resize(scale, center, ratio);\n        };\n        var vertexRotateFn = function(angle, center) {\n            OpenLayers.Geometry.Point.prototype.rotate.apply(this, arguments);\n            this._rotationHandle && this._rotationHandle.geometry.rotate(\n                angle, center);\n            this._handle.geometry.rotate(angle, center);\n        };\n        \n        // Override for handle move - make sure that the box and other handles\n        // are updated, and finally transform the feature.\n        var handleMoveFn = function(x, y) {\n            var oldX = this.x, oldY = this.y;\n            OpenLayers.Geometry.Point.prototype.move.call(this, x, y);\n            if(control._moving) {\n                return;\n            }\n            var evt = control.dragControl.handlers.drag.evt;\n            var preserveAspectRatio = !control._setfeature &&\n                control.preserveAspectRatio;\n            var reshape = !preserveAspectRatio && !(evt && evt.shiftKey);\n            var oldGeom = new OpenLayers.Geometry.Point(oldX, oldY);\n            var centerGeometry = control.center;\n            this.rotate(-control.rotation, centerGeometry);\n            oldGeom.rotate(-control.rotation, centerGeometry);\n            var dx1 = this.x - centerGeometry.x;\n            var dy1 = this.y - centerGeometry.y;\n            var dx0 = dx1 - (this.x - oldGeom.x);\n            var dy0 = dy1 - (this.y - oldGeom.y);\n            if (control.irregular && !control._setfeature) {\n               dx1 -= (this.x - oldGeom.x) / 2;\n               dy1 -= (this.y - oldGeom.y) / 2;\n            }\n            this.x = oldX;\n            this.y = oldY;\n            var scale, ratio = 1;\n            if (reshape) {\n                scale = Math.abs(dy0) < 0.00001 ? 1 : dy1 / dy0;\n                ratio = (Math.abs(dx0) < 0.00001 ? 1 : (dx1 / dx0)) / scale;\n            } else {\n                var l0 = Math.sqrt((dx0 * dx0) + (dy0 * dy0));\n                var l1 = Math.sqrt((dx1 * dx1) + (dy1 * dy1));\n                scale = l1 / l0;\n            }\n\n            // rotate the box to 0 before resizing - saves us some\n            // calculations and is inexpensive because we don't drawFeature.\n            control._moving = true;\n            control.box.geometry.rotate(-control.rotation, centerGeometry);\n            delete control._moving;\n\n            control.box.geometry.resize(scale, centerGeometry, ratio);\n            control.box.geometry.rotate(control.rotation, centerGeometry);\n            control.transformFeature({scale: scale, ratio: ratio});\n            if (control.irregular && !control._setfeature) {\n               var newCenter = centerGeometry.clone();\n               newCenter.x += Math.abs(oldX - centerGeometry.x) < 0.00001 ? 0 : (this.x - oldX);\n               newCenter.y += Math.abs(oldY - centerGeometry.y) < 0.00001 ? 0 : (this.y - oldY);\n               control.box.geometry.move(this.x - oldX, this.y - oldY);\n               control.transformFeature({center: newCenter});\n            }\n        };\n        \n        // Override for rotation handle move - make sure that the box and\n        // other handles are updated, and finally transform the feature.\n        var rotationHandleMoveFn = function(x, y){\n            var oldX = this.x, oldY = this.y;\n            OpenLayers.Geometry.Point.prototype.move.call(this, x, y);\n            if(control._moving) {\n                return;\n            }\n            var evt = control.dragControl.handlers.drag.evt;\n            var constrain = (evt && evt.shiftKey) ? 45 : 1;\n            var centerGeometry = control.center;\n            var dx1 = this.x - centerGeometry.x;\n            var dy1 = this.y - centerGeometry.y;\n            var dx0 = dx1 - x;\n            var dy0 = dy1 - y;\n            this.x = oldX;\n            this.y = oldY;\n            var a0 = Math.atan2(dy0, dx0);\n            var a1 = Math.atan2(dy1, dx1);\n            var angle = a1 - a0;\n            angle *= 180 / Math.PI;\n            control._angle = (control._angle + angle) % 360;\n            var diff = control.rotation % constrain;\n            if(Math.abs(control._angle) >= constrain || diff !== 0) {\n                angle = Math.round(control._angle / constrain) * constrain -\n                    diff;\n                control._angle = 0;\n                control.box.geometry.rotate(angle, centerGeometry);\n                control.transformFeature({rotation: angle});\n            } \n        };\n\n        var handles = new Array(8);\n        var rotationHandles = new Array(4);\n        var geom, handle, rotationHandle;\n        var positions = [\"sw\", \"s\", \"se\", \"e\", \"ne\", \"n\", \"nw\", \"w\"];\n        for(var i=0; i<8; ++i) {\n            geom = this.box.geometry.components[i];\n            handle = new OpenLayers.Feature.Vector(geom.clone(), {\n                role: positions[i] + \"-resize\"\n            }, typeof this.renderIntent == \"string\" ? null :\n                this.renderIntent);\n            if(i % 2 == 0) {\n                rotationHandle = new OpenLayers.Feature.Vector(geom.clone(), {\n                    role: positions[i] + \"-rotate\"\n                }, typeof this.rotationHandleSymbolizer == \"string\" ?\n                    null : this.rotationHandleSymbolizer);\n                rotationHandle.geometry.move = rotationHandleMoveFn;\n                geom._rotationHandle = rotationHandle;\n                rotationHandles[i/2] = rotationHandle;\n            }\n            geom.move = vertexMoveFn;\n            geom.resize = vertexResizeFn;\n            geom.rotate = vertexRotateFn;\n            handle.geometry.move = handleMoveFn;\n            geom._handle = handle;\n            handles[i] = handle;\n        }\n        \n        this.rotationHandles = rotationHandles;\n        this.handles = handles;\n    },\n    \n    /**\n     * Method: createControl\n     * Creates a DragFeature control for this control.\n     */\n    createControl: function() {\n        var control = this;\n        this.dragControl = new OpenLayers.Control.DragFeature(this.layer, {\n            documentDrag: true,\n            // avoid moving the feature itself - move the box instead\n            moveFeature: function(pixel) {\n                if(this.feature === control.feature) {\n                    this.feature = control.box;\n                }\n                OpenLayers.Control.DragFeature.prototype.moveFeature.apply(this,\n                    arguments);\n            },\n            // transform while dragging\n            onDrag: function(feature, pixel) {\n                if(feature === control.box) {\n                    control.transformFeature({center: control.center});\n                }\n            },\n            // set a new feature\n            onStart: function(feature, pixel) {\n                var eligible = !control.geometryTypes ||\n                    OpenLayers.Util.indexOf(control.geometryTypes,\n                        feature.geometry.CLASS_NAME) !== -1;\n                var i = OpenLayers.Util.indexOf(control.handles, feature);\n                i += OpenLayers.Util.indexOf(control.rotationHandles,\n                    feature);\n                if(feature !== control.feature && feature !== control.box &&\n                                                        i == -2 && eligible) {\n                    control.setFeature(feature);\n                }\n            },\n            onComplete: function(feature, pixel) {\n                control.events.triggerEvent(\"transformcomplete\",\n                    {feature: control.feature});\n            }\n        });\n    },\n    \n    /**\n     * Method: drawHandles\n     * Draws the handles to match the box.\n     */\n    drawHandles: function() {\n        var layer = this.layer;\n        for(var i=0; i<8; ++i) {\n            if(this.rotate && i % 2 === 0) {\n                layer.drawFeature(this.rotationHandles[i/2],\n                    this.rotationHandleSymbolizer);\n            }\n            layer.drawFeature(this.handles[i], this.renderIntent);\n        }\n    },\n    \n    /**\n     * Method: transformFeature\n     * Transforms the feature.\n     * \n     * Parameters:\n     * mods - {Object} An object with optional scale, ratio, rotation and\n     *     center properties.\n     */\n    transformFeature: function(mods) {\n        if(!this._setfeature) {\n            this.scale *= (mods.scale || 1);\n            this.ratio *= (mods.ratio || 1);\n            var oldRotation = this.rotation;\n            this.rotation = (this.rotation + (mods.rotation || 0)) % 360;\n            \n            if(this.events.triggerEvent(\"beforetransform\", mods) !== false) {\n                var feature = this.feature;\n                var geom = feature.geometry;\n                var center = this.center;\n                geom.rotate(-oldRotation, center);\n                if(mods.scale || mods.ratio) {\n                    geom.resize(mods.scale, center, mods.ratio);\n                } else if(mods.center) {\n                    feature.move(mods.center.getBounds().getCenterLonLat());\n                }\n                geom.rotate(this.rotation, center);\n                this.layer.drawFeature(feature);\n                feature.toState(OpenLayers.State.UPDATE);\n                this.events.triggerEvent(\"transform\", mods);\n            }\n        }\n        this.layer.drawFeature(this.box, this.renderIntent);\n        this.drawHandles();\n    },\n        \n    /**\n     * APIMethod: destroy\n     * Take care of things that are not handled in superclass.\n     */\n    destroy: function() {\n        var geom;\n        for(var i=0; i<8; ++i) {\n            geom = this.box.geometry.components[i];\n            geom._handle.destroy();\n            geom._handle = null;\n            geom._rotationHandle && geom._rotationHandle.destroy();\n            geom._rotationHandle = null;\n        }\n        this.center = null;\n        this.feature = null;\n        this.handles = null;\n        this.rotationHandleSymbolizer = null;\n        this.rotationHandles = null;\n        this.box.destroy();\n        this.box = null;\n        this.layer = null;\n        this.dragControl.destroy();\n        this.dragControl = null;\n        OpenLayers.Control.prototype.destroy.apply(this, arguments);\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.TransformFeature\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Handler/Hover.js\n * @requires OpenLayers/Handler/Click.js\n */\n\n/**\n * Class: OpenLayers.Control.UTFGrid\n *\n * This Control provides behavior associated with UTFGrid Layers.\n * These 'hit grids' provide underlying feature attributes without\n * calling the server (again). This control allows Mousemove, Hovering \n * and Click events to trigger callbacks that use the attributes in \n * whatever way you need. \n *\n * The most common example may be a UTFGrid layer containing feature\n * attributes that are displayed in a div as you mouseover.\n *\n * Example Code:\n *\n * (start code)\n * var world_utfgrid = new OpenLayers.Layer.UTFGrid( \n *     'UTFGrid Layer', \n *     \"http://tiles/world_utfgrid/${z}/${x}/${y}.json\"\n * );\n * map.addLayer(world_utfgrid);\n * \n * var control = new OpenLayers.Control.UTFGrid({\n *     layers: [world_utfgrid],\n *     handlerMode: 'move',\n *     callback: function(infoLookup) {\n *         // do something with returned data\n *\n *     }\n * })\n * (end code)\n *\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.UTFGrid = OpenLayers.Class(OpenLayers.Control, {\n    \n    /**\n     * APIProperty: autoActivate\n     * {Boolean} Activate the control when it is added to a map.  Default is\n     *     true.\n     */\n    autoActivate: true,\n\n    /** \n     * APIProperty: Layers\n     * List of layers to consider. Must be Layer.UTFGrids\n     * `null` is the default indicating all UTFGrid Layers are queried.\n     * {Array} <OpenLayers.Layer.UTFGrid> \n     */\n    layers: null,\n\n    /* Property: defaultHandlerOptions\n     * The default opts passed to the handler constructors\n     */\n    defaultHandlerOptions: {\n        'delay': 300,\n        'pixelTolerance': 4,\n        'stopMove': false,\n        'single': true,\n        'double': false,\n        'stopSingle': false,\n        'stopDouble': false\n    },\n\n    /* APIProperty: handlerMode\n     * Defaults to 'click'. Can be 'hover' or 'move'.\n     */\n    handlerMode: 'click',\n\n    /**\n     * APIMethod: setHandler\n     * sets this.handlerMode and calls resetHandler()\n     *\n     * Parameters:\n     * hm - {String} Handler Mode string; 'click', 'hover' or 'move'.\n     */\n    setHandler: function(hm) {\n        this.handlerMode = hm;\n        this.resetHandler();\n    },\n\n    /**\n     * Method: resetHandler\n     * Deactivates the old hanlder and creates a new\n     * <OpenLayers.Handler> based on the mode specified in\n     * this.handlerMode\n     *\n     */\n    resetHandler: function() {\n        if (this.handler) {\n            this.handler.deactivate();\n            this.handler.destroy();\n            this.handler = null;\n        }\n   \n        if (this.handlerMode == 'hover') {\n            // Handle this event on hover\n            this.handler = new OpenLayers.Handler.Hover(\n                this,\n                {'pause': this.handleEvent, 'move': this.reset},\n                this.handlerOptions\n            );\n        } else if (this.handlerMode == 'click') {\n            // Handle this event on click\n            this.handler = new OpenLayers.Handler.Click(\n                this, {\n                    'click': this.handleEvent\n                }, this.handlerOptions\n            );\n        } else if (this.handlerMode == 'move') {\n            this.handler = new OpenLayers.Handler.Hover(\n                this,\n                // Handle this event while hovering OR moving\n                {'pause': this.handleEvent, 'move': this.handleEvent},\n                this.handlerOptions\n            );\n        }\n        if (this.handler) {\n            return true;\n        } else {\n            return false;\n        }\n    },\n\n    /**\n     * Constructor: <OpenLayers.Control.UTFGrid>\n     *\n     * Parameters:\n     * options - {Object} \n     */\n    initialize: function(options) {\n        options = options || {};\n        options.handlerOptions = options.handlerOptions || this.defaultHandlerOptions;\n        OpenLayers.Control.prototype.initialize.apply(this, [options]);\n        this.resetHandler();\n    }, \n\n    /**\n     * Method: handleEvent\n     * Internal method called when specified event is triggered.\n     * \n     * This method does several things:\n     *\n     * Gets the lonLat of the event.\n     *\n     * Loops through the appropriate hit grid layers and gathers the attributes.\n     *\n     * Passes the attributes to the callback\n     *\n     * Parameters:\n     * evt - {<OpenLayers.Event>} \n     */\n    handleEvent: function(evt) {\n        if (evt == null) {\n            this.reset();\n            return;\n        }\n\n        var lonLat = this.map.getLonLatFromPixel(evt.xy);\n        if (!lonLat) { \n            return;\n        }    \n        \n        var layers = this.findLayers();\n        if (layers.length > 0) {\n            var infoLookup = {};\n            var layer, idx;\n            for (var i=0, len=layers.length; i<len; i++) {\n                layer = layers[i];\n                idx = OpenLayers.Util.indexOf(this.map.layers, layer);\n                infoLookup[idx] = layer.getFeatureInfo(lonLat);\n            }\n            this.callback(infoLookup, lonLat, evt.xy);\n        }\n    },\n\n    /**\n     * APIMethod: callback\n     * Function to be called when a mouse event corresponds with a location that\n     *     includes data in one of the configured UTFGrid layers.\n     *\n     * Parameters:\n     * infoLookup - {Object} Keys of this object are layer indexes and can be\n     *     used to resolve a layer in the map.layers array.  The structure of\n     *     the property values depend on the data included in the underlying\n     *     UTFGrid and may be any valid JSON type.  \n     */\n    callback: function(infoLookup) {\n        // to be provided in the constructor\n    },\n\n    /**\n     * Method: reset\n     * Calls the callback with null.\n     */\n    reset: function(evt) {\n        this.callback(null);\n    },\n\n    /**\n     * Method: findLayers\n     * Internal method to get the layers, independent of whether we are\n     *     inspecting the map or using a client-provided array\n     *\n     * The default value of this.layers is null; this causes the \n     * findLayers method to return ALL UTFGrid layers encountered.\n     *\n     * Parameters:\n     * None\n     *\n     * Returns:\n     * {Array} Layers to handle on each event\n     */\n    findLayers: function() {\n        var candidates = this.layers || this.map.layers;\n        var layers = [];\n        var layer;\n        for (var i=candidates.length-1; i>=0; --i) {\n            layer = candidates[i];\n            if (layer instanceof OpenLayers.Layer.UTFGrid ) { \n                layers.push(layer);\n            }\n        }\n        return layers;\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.UTFGrid\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Layer/WMS.js\n * @requires OpenLayers/Handler/RegularPolygon.js\n * @requires OpenLayers/Handler/Polygon.js\n * @requires OpenLayers/Handler/Path.js\n * @requires OpenLayers/Handler/Click.js\n * @requires OpenLayers/Filter/Spatial.js\n * @requires OpenLayers/Format/SLD/v1_0_0.js\n */\n\n/**\n * Class: OpenLayers.Control.SLDSelect\n * Perform selections on WMS layers using Styled Layer Descriptor (SLD)\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.SLDSelect = OpenLayers.Class(OpenLayers.Control, {\n\n    /** \n     * APIProperty: events\n     * {<OpenLayers.Events>} Events instance for listeners and triggering\n     *     control specific events.\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * control.events.register(type, obj, listener);\n     * (end)\n     *\n     * Supported event types (in addition to those from <OpenLayers.Control.events>):\n     * selected - Triggered when a selection occurs.  Listeners receive an \n     *     event with *filters* and *layer* properties.  Filters will be an \n     *     array of OpenLayers.Filter objects created in order to perform \n     *     the particular selection.\n     */\n\n    /**\n     * APIProperty: clearOnDeactivate\n     * {Boolean} Should the selection be cleared when the control is \n     *     deactivated. Default value is false.\n     */\n    clearOnDeactivate: false,\n\n    /**\n     * APIProperty: layers\n     * {Array(<OpenLayers.Layer.WMS>)} The WMS layers this control will work \n     *     on.\n     */\n    layers: null,\n\n    /**\n     * Property: callbacks\n     * {Object} The functions that are sent to the handler for callback\n     */\n    callbacks: null,\n\n    /**\n     * APIProperty: selectionSymbolizer\n     * {Object} Determines the styling of the selected objects. Default is\n     *     a selection in red.\n     */\n    selectionSymbolizer: {\n        'Polygon': {fillColor: '#FF0000', stroke: false},\n        'Line': {strokeColor: '#FF0000', strokeWidth: 2},\n        'Point': {graphicName: 'square', fillColor: '#FF0000', pointRadius: 5}\n    },\n\n    /**\n     * APIProperty: layerOptions\n     * {Object} The options to apply to the selection layer, by default the\n     *     selection layer will be kept out of the layer switcher.\n     */\n    layerOptions: null,\n\n    /**\n     * APIProperty: handlerOptions\n     * {Object} Used to set non-default properties on the control's handler\n     */\n\n    /**\n     * APIProperty: sketchStyle\n     * {<OpenLayers.Style>|Object} Style or symbolizer to use for the sketch\n     * handler. The recommended way of styling the sketch layer, however, is\n     * to configure an <OpenLayers.StyleMap> in the layerOptions of the\n     * <handlerOptions>:\n     * \n     * (code)\n     * new OpenLayers.Control.SLDSelect(OpenLayers.Handler.Path, {\n     *     handlerOptions: {\n     *         layerOptions: {\n     *             styleMap: new OpenLayers.StyleMap({\n     *                 \"default\": {strokeColor: \"yellow\"}\n     *             })\n     *         }\n     *     }\n     * });\n     * (end)\n     */\n    sketchStyle: null,\n\n    /**\n     * APIProperty: wfsCache\n     * {Object} Cache to use for storing parsed results from\n     *     <OpenLayers.Format.WFSDescribeFeatureType.read>. If not provided,\n     *     these will be cached on the prototype.\n     */\n    wfsCache: {},\n\n    /**\n     * APIProperty: layerCache\n     * {Object} Cache to use for storing references to the selection layers.\n     *     Normally each source layer will have exactly 1 selection layer of\n     *     type OpenLayers.Layer.WMS. If not provided, layers will\n     *     be cached on the prototype. Note that if <clearOnDeactivate> is\n     *     true, the layer will no longer be cached after deactivating the\n     *     control.\n     */\n    layerCache: {},\n\n    /**\n     * Constructor: OpenLayers.Control.SLDSelect\n     * Create a new control for selecting features in WMS layers using\n     *     Styled Layer Descriptor (SLD).\n     *\n     * Parameters:\n     * handler - {<OpenLayers.Class>} A sketch handler class. This determines\n     *     the type of selection, e.g. box (<OpenLayers.Handler.Box>), point\n     *     (<OpenLayers.Handler.Point>), path (<OpenLayers.Handler.Path>) or\n     *     polygon (<OpenLayers.Handler.Polygon>) selection. To use circle\n     *     type selection, use <OpenLayers.Handler.RegularPolygon> and pass\n     *     the number of desired sides (e.g. 40) as \"sides\" property to the\n     *     <handlerOptions>.\n     * options - {Object} An object containing all configuration properties for\n     *     the control.\n     *\n     * Valid options:\n     * layers - Array({<OpenLayers.Layer.WMS>}) The layers to perform the\n     *     selection on.\n     */\n    initialize: function(handler, options) {\n        OpenLayers.Control.prototype.initialize.apply(this, [options]);\n\n        this.callbacks = OpenLayers.Util.extend({done: this.select, \n            click: this.select}, this.callbacks);\n        this.handlerOptions = this.handlerOptions || {};\n        this.layerOptions = OpenLayers.Util.applyDefaults(this.layerOptions, {\n            displayInLayerSwitcher: false,\n            tileOptions: {maxGetUrlLength: 2048}\n        });\n        if (this.sketchStyle) {\n            this.handlerOptions.layerOptions = OpenLayers.Util.applyDefaults(\n                this.handlerOptions.layerOptions,\n                {styleMap: new OpenLayers.StyleMap({\"default\": this.sketchStyle})}\n            );\n        }\n        this.handler = new handler(this, this.callbacks, this.handlerOptions);\n    },\n\n    /**\n     * APIMethod: destroy\n     * Take care of things that are not handled in superclass.\n     */\n    destroy: function() {\n        for (var key in this.layerCache) {\n            delete this.layerCache[key];\n        }\n        for (var key in this.wfsCache) {\n            delete this.wfsCache[key];\n        }\n        OpenLayers.Control.prototype.destroy.apply(this, arguments);\n    },\n\n    /**\n     * Method: coupleLayerVisiblity\n     * Couple the selection layer and the source layer with respect to\n     *     layer visibility. So if the source layer is turned off, the\n     *     selection layer is also turned off.\n     *\n     * Context: \n     * - {<OpenLayers.Layer>}\n     *\n     * Parameters:\n     * evt - {Object}\n     */\n    coupleLayerVisiblity: function(evt) {\n        this.setVisibility(evt.object.getVisibility());\n    },\n\n    /**\n     * Method: createSelectionLayer\n     * Creates a \"clone\" from the source layer in which the selection can\n     * be drawn. This ensures both the source layer and the selection are \n     * visible and not only the selection.\n     *\n     * Parameters:\n     * source - {<OpenLayers.Layer.WMS>} The source layer on which the selection\n     *     is performed.\n     *\n     * Returns:\n     * {<OpenLayers.Layer.WMS>} A WMS layer with maxGetUrlLength configured to 2048\n     *     since SLD selections can easily get quite long.\n     */\n    createSelectionLayer: function(source) {\n        // check if we already have a selection layer for the source layer\n        var selectionLayer;\n        if (!this.layerCache[source.id]) {\n            selectionLayer = new OpenLayers.Layer.WMS(source.name, \n                source.url, source.params, \n                OpenLayers.Util.applyDefaults(\n                    this.layerOptions,\n                    source.getOptions())\n            );\n            this.layerCache[source.id] = selectionLayer;\n            // make sure the layers are coupled wrt visibility, but only\n            // if they are not displayed in the layer switcher, because in\n            // that case the user cannot control visibility.\n            if (this.layerOptions.displayInLayerSwitcher === false) {\n                source.events.on({\n                    \"visibilitychanged\": this.coupleLayerVisiblity,\n                    scope: selectionLayer});\n            }\n            this.map.addLayer(selectionLayer);\n        } else {\n            selectionLayer = this.layerCache[source.id];\n        }\n        return selectionLayer;\n    },\n\n    /**\n     * Method: createSLD\n     * Create the SLD document for the layer using the supplied filters.\n     *\n     * Parameters:\n     * layer - {<OpenLayers.Layer.WMS>}\n     * filters - Array({<OpenLayers.Filter>}) The filters to be applied.\n     * geometryAttributes - Array({Object}) The geometry attributes of the \n     *     layer.\n     *\n     * Returns:\n     * {String} The SLD document generated as a string.\n     */\n    createSLD: function(layer, filters, geometryAttributes) {\n        var sld = {version: \"1.0.0\", namedLayers: {}};\n        var layerNames = [layer.params.LAYERS].join(\",\").split(\",\");\n        for (var i=0, len=layerNames.length; i<len; i++) { \n            var name = layerNames[i];\n            sld.namedLayers[name] = {name: name, userStyles: []};\n            var symbolizer = this.selectionSymbolizer;\n            var geometryAttribute = geometryAttributes[i];\n            if (geometryAttribute.type.indexOf('Polygon') >= 0) {\n                symbolizer = {Polygon: this.selectionSymbolizer['Polygon']};\n            } else if (geometryAttribute.type.indexOf('LineString') >= 0) {\n                symbolizer = {Line: this.selectionSymbolizer['Line']};\n            } else if (geometryAttribute.type.indexOf('Point') >= 0) {\n                symbolizer = {Point: this.selectionSymbolizer['Point']};\n            }\n            var filter = filters[i];\n            sld.namedLayers[name].userStyles.push({name: 'default', rules: [\n                new OpenLayers.Rule({symbolizer: symbolizer, \n                    filter: filter, \n                    maxScaleDenominator: layer.options.minScale})\n            ]});\n        }\n        return new OpenLayers.Format.SLD({srsName: this.map.getProjection()}).write(sld);\n    },\n\n    /**\n     * Method: parseDescribeLayer\n     * Parse the SLD WMS DescribeLayer response and issue the corresponding\n     *     WFS DescribeFeatureType request\n     *\n     * request - {XMLHttpRequest} The request object.\n     */\n    parseDescribeLayer: function(request) {\n        var format = new OpenLayers.Format.WMSDescribeLayer();\n        var doc = request.responseXML;\n        if(!doc || !doc.documentElement) {\n            doc = request.responseText;\n        }\n        var describeLayer = format.read(doc);\n        var typeNames = [];\n        var url = null;\n        for (var i=0, len=describeLayer.length; i<len; i++) {\n            // perform a WFS DescribeFeatureType request\n            if (describeLayer[i].owsType == \"WFS\") {\n                typeNames.push(describeLayer[i].typeName);\n                url = describeLayer[i].owsURL;\n            }\n        }\n        var options = {\n            url: url,\n            params: {\n                SERVICE: \"WFS\",\n                TYPENAME: typeNames.toString(),\n                REQUEST: \"DescribeFeatureType\",\n                VERSION: \"1.0.0\"\n            },\n            callback: function(request) {\n                var format = new OpenLayers.Format.WFSDescribeFeatureType();\n                var doc = request.responseXML;\n                if(!doc || !doc.documentElement) {\n                    doc = request.responseText;\n                }\n                var describeFeatureType = format.read(doc);\n                this.control.wfsCache[this.layer.id] = describeFeatureType;\n                this.control._queue && this.control.applySelection();\n            },\n            scope: this\n        };\n        OpenLayers.Request.GET(options);\n    },\n\n   /**\n    * Method: getGeometryAttributes\n    * Look up the geometry attributes from the WFS DescribeFeatureType response\n    *\n    * Parameters:\n    * layer - {<OpenLayers.Layer.WMS>} The layer for which to look up the \n    *     geometry attributes.\n    *\n    * Returns:\n    * Array({Object}) Array of geometry attributes\n    */ \n   getGeometryAttributes: function(layer) {\n        var result = [];\n        var cache = this.wfsCache[layer.id];\n        for (var i=0, len=cache.featureTypes.length; i<len; i++) {\n            var typeName = cache.featureTypes[i];\n            var properties = typeName.properties;\n            for (var j=0, lenj=properties.length; j < lenj; j++) {\n                var property = properties[j];\n                var type = property.type;\n                if ((type.indexOf('LineString') >= 0) ||\n                    (type.indexOf('GeometryAssociationType') >=0) ||\n                    (type.indexOf('GeometryPropertyType') >= 0) ||\n                    (type.indexOf('Point') >= 0) ||\n                    (type.indexOf('Polygon') >= 0) ) {\n                        result.push(property);\n                }\n            }\n        }\n        return result;\n    },\n\n    /**\n     * APIMethod: activate\n     * Activate the control. Activating the control will perform a SLD WMS\n     *     DescribeLayer request followed by a WFS DescribeFeatureType request\n     *     so that the proper symbolizers can be chosen based on the geometry\n     *     type.\n     */\n    activate: function() {\n        var activated = OpenLayers.Control.prototype.activate.call(this);\n        if(activated) {\n            for (var i=0, len=this.layers.length; i<len; i++) {\n                var layer = this.layers[i];\n                if (layer && !this.wfsCache[layer.id]) {\n                    var options = {\n                        url: layer.url,\n                        params: {\n                            SERVICE: \"WMS\",\n                            VERSION: layer.params.VERSION,\n                            LAYERS: layer.params.LAYERS,\n                            REQUEST: \"DescribeLayer\"\n                        },\n                        callback: this.parseDescribeLayer,\n                        scope: {layer: layer, control: this}\n                    };\n                    OpenLayers.Request.GET(options);\n                }\n            }\n        }\n        return activated;\n    },\n\n    /**\n     * APIMethod: deactivate\n     * Deactivate the control. If clearOnDeactivate is true, remove the\n     *     selection layer(s).\n     */\n    deactivate: function() {\n        var deactivated = OpenLayers.Control.prototype.deactivate.call(this);\n        if(deactivated) {\n            for (var i=0, len=this.layers.length; i<len; i++) {\n                var layer = this.layers[i];\n                if (layer && this.clearOnDeactivate === true) {\n                    var layerCache = this.layerCache;\n                    var selectionLayer = layerCache[layer.id];\n                    if (selectionLayer) {\n                        layer.events.un({\n                            \"visibilitychanged\": this.coupleLayerVisiblity,\n                            scope: selectionLayer});\n                        selectionLayer.destroy();\n                        delete layerCache[layer.id];\n                    }\n                }\n            }\n        }\n        return deactivated;\n    },\n\n    /**\n     * APIMethod: setLayers\n     * Set the layers on which the selection should be performed.  Call the \n     *     setLayers method if the layer(s) to be used change and the same \n     *     control should be used on a new set of layers.\n     *     If the control is already active, it will be active after the new\n     *     set of layers is set.\n     *\n     * Parameters:\n     * layers - {Array(<OpenLayers.Layer.WMS>)}  The new set of layers on which \n     *     the selection should be performed.\n     */\n    setLayers: function(layers) {\n        if(this.active) {\n            this.deactivate();\n            this.layers = layers;\n            this.activate();\n        } else {\n            this.layers = layers;\n        }\n    },\n\n    /**\n     * Function: createFilter\n     * Create the filter to be used in the SLD.\n     *\n     * Parameters:\n     * geometryAttribute - {Object} Used to get the name of the geometry \n     *     attribute which is needed for constructing the spatial filter.\n     * geometry - {<OpenLayers.Geometry>} The geometry to use.\n     *\n     * Returns:\n     * {<OpenLayers.Filter.Spatial>} The spatial filter created.\n     */\n    createFilter: function(geometryAttribute, geometry) {\n        var filter = null;\n        if (this.handler instanceof OpenLayers.Handler.RegularPolygon) {\n            // box\n            if (this.handler.irregular === true) {\n                filter = new OpenLayers.Filter.Spatial({\n                    type: OpenLayers.Filter.Spatial.BBOX,\n                    property: geometryAttribute.name,\n                    value: geometry.getBounds()}\n                );\n            } else {\n                filter = new OpenLayers.Filter.Spatial({\n                    type: OpenLayers.Filter.Spatial.INTERSECTS,\n                    property: geometryAttribute.name,\n                    value: geometry}\n                );\n            }\n        } else if (this.handler instanceof OpenLayers.Handler.Polygon) {\n            filter = new OpenLayers.Filter.Spatial({\n                type: OpenLayers.Filter.Spatial.INTERSECTS,\n                property: geometryAttribute.name,\n                value: geometry}\n            );\n        } else if (this.handler instanceof OpenLayers.Handler.Path) {\n            // if source layer is point based, use DWITHIN instead\n            if (geometryAttribute.type.indexOf('Point') >= 0) {\n                filter = new OpenLayers.Filter.Spatial({\n                    type: OpenLayers.Filter.Spatial.DWITHIN,\n                    property: geometryAttribute.name,\n                    distance: this.map.getExtent().getWidth()*0.01 ,\n                    distanceUnits: this.map.getUnits(),\n                    value: geometry}\n                );\n            } else {\n                filter = new OpenLayers.Filter.Spatial({\n                    type: OpenLayers.Filter.Spatial.INTERSECTS,\n                    property: geometryAttribute.name,\n                    value: geometry}\n                );\n            }\n        } else if (this.handler instanceof OpenLayers.Handler.Click) {\n            if (geometryAttribute.type.indexOf('Polygon') >= 0) {\n                filter = new OpenLayers.Filter.Spatial({\n                    type: OpenLayers.Filter.Spatial.INTERSECTS,\n                    property: geometryAttribute.name,\n                    value: geometry}\n                );\n            } else {\n                filter = new OpenLayers.Filter.Spatial({\n                    type: OpenLayers.Filter.Spatial.DWITHIN,\n                    property: geometryAttribute.name,\n                    distance: this.map.getExtent().getWidth()*0.01 ,\n                    distanceUnits: this.map.getUnits(),\n                    value: geometry}\n                );\n            }\n        }\n        return filter;\n    },\n\n    /**\n     * Method: select\n     * When the handler is done, use SLD_BODY on the selection layer to\n     *     display the selection in the map.\n     *\n     * Parameters:\n     * geometry - {Object} or {<OpenLayers.Geometry>}\n     */\n    select: function(geometry) {\n        this._queue = function() {\n            for (var i=0, len=this.layers.length; i<len; i++) {\n                var layer = this.layers[i];\n                var geometryAttributes = this.getGeometryAttributes(layer);\n                var filters = [];\n                for (var j=0, lenj=geometryAttributes.length; j<lenj; j++) {\n                    var geometryAttribute = geometryAttributes[j];\n                    if (geometryAttribute !== null) {\n                        // from the click handler we will not get an actual \n                        // geometry so transform\n                        if (!(geometry instanceof OpenLayers.Geometry)) {\n                            var point = this.map.getLonLatFromPixel(\n                                geometry.xy);\n                            geometry = new OpenLayers.Geometry.Point(\n                                point.lon, point.lat);\n                        }\n                        var filter = this.createFilter(geometryAttribute,\n                        geometry);\n                        if (filter !== null) {\n                            filters.push(filter);\n                        }\n                    }\n                }\n    \n                var selectionLayer = this.createSelectionLayer(layer);\n    \n                this.events.triggerEvent(\"selected\", {\n                    layer: layer,\n                    filters: filters\n                });\n\n                var sld = this.createSLD(layer, filters, geometryAttributes);\n    \n                selectionLayer.mergeNewParams({SLD_BODY: sld});\n                delete this._queue;\n            }\n        };\n        this.applySelection();\n    },\n    \n    /**\n     * Method: applySelection\n     * Checks if all required wfs data is cached, and applies the selection\n     */\n    applySelection: function() {\n        var canApply = true;\n        for (var i=0, len=this.layers.length; i<len; i++) {\n            if(!this.wfsCache[this.layers[i].id]) {\n                canApply = false;\n                break;\n            }\n        }\n        canApply && this._queue.call(this);\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.SLDSelect\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Events/buttonclick.js\n */\n\n/**\n * Class: OpenLayers.Control.Zoom\n * The Zoom control is a pair of +/- links for zooming in and out.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.Zoom = OpenLayers.Class(OpenLayers.Control, {\n    \n    /**\n     * APIProperty: zoomInText\n     * {String}\n     * Text for zoom-in link.  Default is \"+\".\n     */\n    zoomInText: \"+\",\n\n    /**\n     * APIProperty: zoomInId\n     * {String}\n     * Instead of having the control create a zoom in link, you can provide \n     *     the identifier for an anchor element already added to the document.\n     *     By default, an element with id \"olZoomInLink\" will be searched for\n     *     and used if it exists.\n     */\n    zoomInId: \"olZoomInLink\",\n\n    /**\n     * APIProperty: zoomOutText\n     * {String}\n     * Text for zoom-out link.  Default is \"\\u2212\".\n     */\n    zoomOutText: \"\\u2212\",\n\n    /**\n     * APIProperty: zoomOutId\n     * {String}\n     * Instead of having the control create a zoom out link, you can provide \n     *     the identifier for an anchor element already added to the document.\n     *     By default, an element with id \"olZoomOutLink\" will be searched for\n     *     and used if it exists.\n     */\n    zoomOutId: \"olZoomOutLink\",\n\n    /**\n     * Method: draw\n     *\n     * Returns:\n     * {DOMElement} A reference to the DOMElement containing the zoom links.\n     */\n    draw: function() {\n        var div = OpenLayers.Control.prototype.draw.apply(this),\n            links = this.getOrCreateLinks(div),\n            zoomIn = links.zoomIn,\n            zoomOut = links.zoomOut,\n            eventsInstance = this.map.events;\n        \n        if (zoomOut.parentNode !== div) {\n            eventsInstance = this.events;\n            eventsInstance.attachToElement(zoomOut.parentNode);\n        }\n        eventsInstance.register(\"buttonclick\", this, this.onZoomClick);\n        \n        this.zoomInLink = zoomIn;\n        this.zoomOutLink = zoomOut;\n        return div;\n    },\n    \n    /**\n     * Method: getOrCreateLinks\n     * \n     * Parameters:\n     * el - {DOMElement}\n     *\n     * Return: \n     * {Object} Object with zoomIn and zoomOut properties referencing links.\n     */\n    getOrCreateLinks: function(el) {\n        var zoomIn = document.getElementById(this.zoomInId),\n            zoomOut = document.getElementById(this.zoomOutId);\n        if (!zoomIn) {\n            zoomIn = document.createElement(\"a\");\n            zoomIn.href = \"#zoomIn\";\n            zoomIn.appendChild(document.createTextNode(this.zoomInText));\n            zoomIn.className = \"olControlZoomIn\";\n            el.appendChild(zoomIn);\n        }\n        OpenLayers.Element.addClass(zoomIn, \"olButton\");\n        if (!zoomOut) {\n            zoomOut = document.createElement(\"a\");\n            zoomOut.href = \"#zoomOut\";\n            zoomOut.appendChild(document.createTextNode(this.zoomOutText));\n            zoomOut.className = \"olControlZoomOut\";\n            el.appendChild(zoomOut);\n        }\n        OpenLayers.Element.addClass(zoomOut, \"olButton\");\n        return {\n            zoomIn: zoomIn, zoomOut: zoomOut\n        };\n    },\n    \n    /**\n     * Method: onZoomClick\n     * Called when zoomin/out link is clicked.\n     */\n    onZoomClick: function(evt) {\n        var button = evt.buttonElement;\n        if (button === this.zoomInLink) {\n            this.map.zoomIn();\n        } else if (button === this.zoomOutLink) {\n            this.map.zoomOut();\n        }\n    },\n\n    /** \n     * Method: destroy\n     * Clean up.\n     */\n    destroy: function() {\n        if (this.map) {\n            this.map.events.unregister(\"buttonclick\", this, this.onZoomClick);\n        }\n        delete this.zoomInLink;\n        delete this.zoomOutLink;\n        OpenLayers.Control.prototype.destroy.apply(this);\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.Zoom\"\n});\n", "/* Copyright (c) 2006-2012 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control/Panel.js\n */\n\n/**\n * Class: OpenLayers.Control.TextButtonPanel\n * The TextButtonPanel is a panel designed primarily to hold TextButton\n * controls.  By default it has a displayClass of olControlTextButtonPanel,\n * which hooks it to a set of text-appropriate styles in the default stylesheet.\n *\n * Inherits from:\n *  - <OpenLayers.Control.Panel>\n */\nOpenLayers.Control.TextButtonPanel = OpenLayers.Class(\n  OpenLayers.Control.Panel, {\n\n    /**\n     * APIProperty: vertical\n     * {Boolean} Whether the button strip should appear vertically on the map.\n     */\n    vertical: false,\n\n    /**\n     * APIProperty: additionalClass\n     * {String} An additional class to be applied in addition to\n     * .olControlTextButtonPanel to allow for non-default positioning.\n     */\n    additionalClass: null,\n\n    /**\n     * Constructor: OpenLayers.Control.TextButtonPanel\n     * Create a panel for holding text-based button controls\n     *\n     * Parameters:\n     * options - {Object}\n     */\n\n    /**\n     * Method: draw\n     * Overrides the draw method in <OpenLayers.Control.Panel> by applying\n     * up to two additional CSS classes\n     * Returns:\n     * {DOMElement}\n     */\n    draw: function() {\n        OpenLayers.Control.Panel.prototype.draw.apply(this, arguments);\n        this.setOrientationClass();\n        this.setAdditionalClass();\n        return this.div;\n    },\n\n    /**\n     * Method: redraw\n     * Overrides the redraw method in <OpenLayers.Control.Panel> by setting\n     * the orientation class.\n     */\n    redraw: function() {\n        OpenLayers.Control.Panel.prototype.redraw.apply(this, arguments);\n        this.setOrientationClass();\n    },\n\n    /**\n     * Method: setOrientationClass\n     * Adds the \"vertical\" class if this TextButtonPanel should have a vertical,\n     * rather than horizontal, layout.\n     */\n    setOrientationClass: function() {\n        if (this.vertical) {\n            OpenLayers.Element.addClass(this.div, \"vertical\");\n        }\n        else {\n            OpenLayers.Element.removeClass(this.div, \"vertical\");\n        }\n    },\n    \n    /**\n     * APIMethod: setAdditionalClass\n     * Sets an additional CSS class for this TextButtonPanel\n     * (for example, to override the default placement).  This\n     * allows more than one TextButtonPanel to exist on the map\n     * at once.\n     */\n    setAdditionalClass: function() {\n        if (!!this.additionalClass) {\n            OpenLayers.Element.addClass(this.div, this.additionalClass);\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.TextButtonPanel\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n \n/**\n * @requires OpenLayers/BaseTypes/Class.js\n */\n\n/**\n * Class: OpenLayers.Geometry\n * A Geometry is a description of a geographic object.  Create an instance of\n * this class with the <OpenLayers.Geometry> constructor.  This is a base class,\n * typical geometry types are described by subclasses of this class.\n *\n * Note that if you use the <OpenLayers.Geometry.fromWKT> method, you must\n * explicitly include the OpenLayers.Format.WKT in your build.\n */\nOpenLayers.Geometry = OpenLayers.Class({\n\n    /**\n     * Property: id\n     * {String} A unique identifier for this geometry.\n     */\n    id: null,\n\n    /**\n     * Property: parent\n     * {<OpenLayers.Geometry>}This is set when a Geometry is added as component\n     * of another geometry\n     */\n    parent: null,\n\n    /**\n     * Property: bounds \n     * {<OpenLayers.Bounds>} The bounds of this geometry\n     */\n    bounds: null,\n\n    /**\n     * Constructor: OpenLayers.Geometry\n     * Creates a geometry object.  \n     */\n    initialize: function() {\n        this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME+ \"_\");\n    },\n    \n    /**\n     * Method: destroy\n     * Destroy this geometry.\n     */\n    destroy: function() {\n        this.id = null;\n        this.bounds = null;\n    },\n    \n    /**\n     * APIMethod: clone\n     * Create a clone of this geometry.  Does not set any non-standard\n     *     properties of the cloned geometry.\n     * \n     * Returns:\n     * {<OpenLayers.Geometry>} An exact clone of this geometry.\n     */\n    clone: function() {\n        return new OpenLayers.Geometry();\n    },\n    \n    /**\n     * Method: setBounds\n     * Set the bounds for this Geometry.\n     * \n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>} \n     */\n    setBounds: function(bounds) {\n        if (bounds) {\n            this.bounds = bounds.clone();\n        }\n    },\n    \n    /**\n     * Method: clearBounds\n     * Nullify this components bounds and that of its parent as well.\n     */\n    clearBounds: function() {\n        this.bounds = null;\n        if (this.parent) {\n            this.parent.clearBounds();\n        }    \n    },\n    \n    /**\n     * Method: extendBounds\n     * Extend the existing bounds to include the new bounds. \n     * If geometry's bounds is not yet set, then set a new Bounds.\n     * \n     * Parameters:\n     * newBounds - {<OpenLayers.Bounds>} \n     */\n    extendBounds: function(newBounds){\n        var bounds = this.getBounds();\n        if (!bounds) {\n            this.setBounds(newBounds);\n        } else {\n            this.bounds.extend(newBounds);\n        }\n    },\n    \n    /**\n     * APIMethod: getBounds\n     * Get the bounds for this Geometry. If bounds is not set, it \n     * is calculated again, this makes queries faster.\n     * \n     * Returns:\n     * {<OpenLayers.Bounds>}\n     */\n    getBounds: function() {\n        if (this.bounds == null) {\n            this.calculateBounds();\n        }\n        return this.bounds;\n    },\n    \n    /** \n     * APIMethod: calculateBounds\n     * Recalculate the bounds for the geometry. \n     */\n    calculateBounds: function() {\n        //\n        // This should be overridden by subclasses.\n        //\n    },\n    \n    /**\n     * APIMethod: distanceTo\n     * Calculate the closest distance between two geometries (on the x-y plane).\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} The target geometry.\n     * options - {Object} Optional properties for configuring the distance\n     *     calculation.\n     *\n     * Valid options depend on the specific geometry type.\n     * \n     * Returns:\n     * {Number | Object} The distance between this geometry and the target.\n     *     If details is true, the return will be an object with distance,\n     *     x0, y0, x1, and x2 properties.  The x0 and y0 properties represent\n     *     the coordinates of the closest point on this geometry. The x1 and y1\n     *     properties represent the coordinates of the closest point on the\n     *     target geometry.\n     */\n    distanceTo: function(geometry, options) {\n    },\n    \n    /**\n     * APIMethod: getVertices\n     * Return a list of all points in this geometry.\n     *\n     * Parameters:\n     * nodes - {Boolean} For lines, only return vertices that are\n     *     endpoints.  If false, for lines, only vertices that are not\n     *     endpoints will be returned.  If not provided, all vertices will\n     *     be returned.\n     *\n     * Returns:\n     * {Array} A list of all vertices in the geometry.\n     */\n    getVertices: function(nodes) {\n    },\n\n    /**\n     * Method: atPoint\n     * Note - This is only an approximation based on the bounds of the \n     * geometry.\n     * \n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>|Object} OpenLayers.LonLat or an\n     *     object with a 'lon' and 'lat' properties.\n     * toleranceLon - {float} Optional tolerance in Geometric Coords\n     * toleranceLat - {float} Optional tolerance in Geographic Coords\n     * \n     * Returns:\n     * {Boolean} Whether or not the geometry is at the specified location\n     */\n    atPoint: function(lonlat, toleranceLon, toleranceLat) {\n        var atPoint = false;\n        var bounds = this.getBounds();\n        if ((bounds != null) && (lonlat != null)) {\n\n            var dX = (toleranceLon != null) ? toleranceLon : 0;\n            var dY = (toleranceLat != null) ? toleranceLat : 0;\n    \n            var toleranceBounds = \n                new OpenLayers.Bounds(this.bounds.left - dX,\n                                      this.bounds.bottom - dY,\n                                      this.bounds.right + dX,\n                                      this.bounds.top + dY);\n\n            atPoint = toleranceBounds.containsLonLat(lonlat);\n        }\n        return atPoint;\n    },\n    \n    /**\n     * Method: getLength\n     * Calculate the length of this geometry. This method is defined in\n     * subclasses.\n     * \n     * Returns:\n     * {Float} The length of the collection by summing its parts\n     */\n    getLength: function() {\n        //to be overridden by geometries that actually have a length\n        //\n        return 0.0;\n    },\n\n    /**\n     * Method: getArea\n     * Calculate the area of this geometry. This method is defined in subclasses.\n     * \n     * Returns:\n     * {Float} The area of the collection by summing its parts\n     */\n    getArea: function() {\n        //to be overridden by geometries that actually have an area\n        //\n        return 0.0;\n    },\n    \n    /**\n     * APIMethod: getCentroid\n     * Calculate the centroid of this geometry. This method is defined in subclasses.\n     *\n     * Returns:\n     * {<OpenLayers.Geometry.Point>} The centroid of the collection\n     */\n    getCentroid: function() {\n        return null;\n    },\n\n    /**\n     * Method: toString\n     * Returns a text representation of the geometry.  If the WKT format is\n     *     included in a build, this will be the Well-Known Text \n     *     representation.\n     *\n     * Returns:\n     * {String} String representation of this geometry.\n     */\n    toString: function() {\n        var string;\n        if (OpenLayers.Format && OpenLayers.Format.WKT) {\n            string = OpenLayers.Format.WKT.prototype.write(\n                new OpenLayers.Feature.Vector(this)\n            );\n        } else {\n            string = Object.prototype.toString.call(this);\n        }\n        return string;\n    },\n\n    CLASS_NAME: \"OpenLayers.Geometry\"\n});\n\n/**\n * Function: OpenLayers.Geometry.fromWKT\n * Generate a geometry given a Well-Known Text string.  For this method to\n *     work, you must include the OpenLayers.Format.WKT in your build \n *     explicitly.\n *\n * Parameters:\n * wkt - {String} A string representing the geometry in Well-Known Text.\n *\n * Returns:\n * {<OpenLayers.Geometry>} A geometry of the appropriate class.\n */\nOpenLayers.Geometry.fromWKT = function(wkt) {\n    var geom;\n    if (OpenLayers.Format && OpenLayers.Format.WKT) {\n        var format = OpenLayers.Geometry.fromWKT.format;\n        if (!format) {\n            format = new OpenLayers.Format.WKT();\n            OpenLayers.Geometry.fromWKT.format = format;\n        }\n        var result = format.read(wkt);\n        if (result instanceof OpenLayers.Feature.Vector) {\n            geom = result.geometry;\n        } else if (OpenLayers.Util.isArray(result)) {\n            var len = result.length;\n            var components = new Array(len);\n            for (var i=0; i<len; ++i) {\n                components[i] = result[i].geometry;\n            }\n            geom = new OpenLayers.Geometry.Collection(components);\n        }\n    }\n    return geom;\n};\n    \n/**\n * Method: OpenLayers.Geometry.segmentsIntersect\n * Determine whether two line segments intersect.  Optionally calculates\n *     and returns the intersection point.  This function is optimized for\n *     cases where seg1.x2 >= seg2.x1 || seg2.x2 >= seg1.x1.  In those\n *     obvious cases where there is no intersection, the function should\n *     not be called.\n *\n * Parameters:\n * seg1 - {Object} Object representing a segment with properties x1, y1, x2,\n *     and y2.  The start point is represented by x1 and y1.  The end point\n *     is represented by x2 and y2.  Start and end are ordered so that x1 < x2.\n * seg2 - {Object} Object representing a segment with properties x1, y1, x2,\n *     and y2.  The start point is represented by x1 and y1.  The end point\n *     is represented by x2 and y2.  Start and end are ordered so that x1 < x2.\n * options - {Object} Optional properties for calculating the intersection.\n *\n * Valid options:\n * point - {Boolean} Return the intersection point.  If false, the actual\n *     intersection point will not be calculated.  If true and the segments\n *     intersect, the intersection point will be returned.  If true and\n *     the segments do not intersect, false will be returned.  If true and\n *     the segments are coincident, true will be returned.\n * tolerance - {Number} If a non-null value is provided, if the segments are\n *     within the tolerance distance, this will be considered an intersection.\n *     In addition, if the point option is true and the calculated intersection\n *     is within the tolerance distance of an end point, the endpoint will be\n *     returned instead of the calculated intersection.  Further, if the\n *     intersection is within the tolerance of endpoints on both segments, or\n *     if two segment endpoints are within the tolerance distance of eachother\n *     (but no intersection is otherwise calculated), an endpoint on the\n *     first segment provided will be returned.\n *\n * Returns:\n * {Boolean | <OpenLayers.Geometry.Point>}  The two segments intersect.\n *     If the point argument is true, the return will be the intersection\n *     point or false if none exists.  If point is true and the segments\n *     are coincident, return will be true (and the instersection is equal\n *     to the shorter segment).\n */\nOpenLayers.Geometry.segmentsIntersect = function(seg1, seg2, options) {\n    var point = options && options.point;\n    var tolerance = options && options.tolerance;\n    var intersection = false;\n    var x11_21 = seg1.x1 - seg2.x1;\n    var y11_21 = seg1.y1 - seg2.y1;\n    var x12_11 = seg1.x2 - seg1.x1;\n    var y12_11 = seg1.y2 - seg1.y1;\n    var y22_21 = seg2.y2 - seg2.y1;\n    var x22_21 = seg2.x2 - seg2.x1;\n    var d = (y22_21 * x12_11) - (x22_21 * y12_11);\n    var n1 = (x22_21 * y11_21) - (y22_21 * x11_21);\n    var n2 = (x12_11 * y11_21) - (y12_11 * x11_21);\n    if(d == 0) {\n        // parallel\n        if(n1 == 0 && n2 == 0) {\n            // coincident\n            intersection = true;\n        }\n    } else {\n        var along1 = n1 / d;\n        var along2 = n2 / d;\n        if(along1 >= 0 && along1 <= 1 && along2 >=0 && along2 <= 1) {\n            // intersect\n            if(!point) {\n                intersection = true;\n            } else {\n                // calculate the intersection point\n                var x = seg1.x1 + (along1 * x12_11);\n                var y = seg1.y1 + (along1 * y12_11);\n                intersection = new OpenLayers.Geometry.Point(x, y);\n            }\n        }\n    }\n    if(tolerance) {\n        var dist;\n        if(intersection) {\n            if(point) {\n                var segs = [seg1, seg2];\n                var seg, x, y;\n                // check segment endpoints for proximity to intersection\n                // set intersection to first endpoint within the tolerance\n                outer: for(var i=0; i<2; ++i) {\n                    seg = segs[i];\n                    for(var j=1; j<3; ++j) {\n                        x = seg[\"x\" + j];\n                        y = seg[\"y\" + j];\n                        dist = Math.sqrt(\n                            Math.pow(x - intersection.x, 2) +\n                            Math.pow(y - intersection.y, 2)\n                        );\n                        if(dist < tolerance) {\n                            intersection.x = x;\n                            intersection.y = y;\n                            break outer;\n                        }\n                    }\n                }\n                \n            }\n        } else {\n            // no calculated intersection, but segments could be within\n            // the tolerance of one another\n            var segs = [seg1, seg2];\n            var source, target, x, y, p, result;\n            // check segment endpoints for proximity to intersection\n            // set intersection to first endpoint within the tolerance\n            outer: for(var i=0; i<2; ++i) {\n                source = segs[i];\n                target = segs[(i+1)%2];\n                for(var j=1; j<3; ++j) {\n                    p = {x: source[\"x\"+j], y: source[\"y\"+j]};\n                    result = OpenLayers.Geometry.distanceToSegment(p, target);\n                    if(result.distance < tolerance) {\n                        if(point) {\n                            intersection = new OpenLayers.Geometry.Point(p.x, p.y);\n                        } else {\n                            intersection = true;\n                        }\n                        break outer;\n                    }\n                }\n            }\n        }\n    }\n    return intersection;\n};\n\n/**\n * Function: OpenLayers.Geometry.distanceToSegment\n *\n * Parameters:\n * point - {Object} An object with x and y properties representing the\n *     point coordinates.\n * segment - {Object} An object with x1, y1, x2, and y2 properties\n *     representing endpoint coordinates.\n *\n * Returns:\n * {Object} An object with distance, along, x, and y properties.  The distance\n *     will be the shortest distance between the input point and segment.\n *     The x and y properties represent the coordinates along the segment\n *     where the shortest distance meets the segment. The along attribute\n *     describes how far between the two segment points the given point is.\n */\nOpenLayers.Geometry.distanceToSegment = function(point, segment) {\n    var result = OpenLayers.Geometry.distanceSquaredToSegment(point, segment);\n    result.distance = Math.sqrt(result.distance);\n    return result;\n};\n\n/**\n * Function: OpenLayers.Geometry.distanceSquaredToSegment\n *\n * Usually the distanceToSegment function should be used. This variant however\n * can be used for comparisons where the exact distance is not important.\n *\n * Parameters:\n * point - {Object} An object with x and y properties representing the\n *     point coordinates.\n * segment - {Object} An object with x1, y1, x2, and y2 properties\n *     representing endpoint coordinates.\n *\n * Returns:\n * {Object} An object with squared distance, along, x, and y properties.\n *     The distance will be the shortest distance between the input point and\n *     segment. The x and y properties represent the coordinates along the\n *     segment where the shortest distance meets the segment. The along\n *     attribute describes how far between the two segment points the given\n *     point is.\n */\nOpenLayers.Geometry.distanceSquaredToSegment = function(point, segment) {\n    var x0 = point.x;\n    var y0 = point.y;\n    var x1 = segment.x1;\n    var y1 = segment.y1;\n    var x2 = segment.x2;\n    var y2 = segment.y2;\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    var along = (dx == 0 && dy == 0) ? 0 : ((dx * (x0 - x1)) + (dy * (y0 - y1))) /\n                (Math.pow(dx, 2) + Math.pow(dy, 2));\n    var x, y;\n    if(along <= 0.0) {\n        x = x1;\n        y = y1;\n    } else if(along >= 1.0) {\n        x = x2;\n        y = y2;\n    } else {\n        x = x1 + along * dx;\n        y = y1 + along * dy;\n    }\n    return {\n        distance: Math.pow(x - x0, 2) + Math.pow(y - y0, 2),\n        x: x, y: y,\n        along: along\n    };\n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Geometry.js\n */\n\n/**\n * Class: OpenLayers.Geometry.Collection\n * A Collection is exactly what it sounds like: A collection of different \n * Geometries. These are stored in the local parameter <components> (which\n * can be passed as a parameter to the constructor). \n * \n * As new geometries are added to the collection, they are NOT cloned. \n * When removing geometries, they need to be specified by reference (ie you \n * have to pass in the *exact* geometry to be removed).\n * \n * The <getArea> and <getLength> functions here merely iterate through\n * the components, summing their respective areas and lengths.\n *\n * Create a new instance with the <OpenLayers.Geometry.Collection> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Geometry> \n */\nOpenLayers.Geometry.Collection = OpenLayers.Class(OpenLayers.Geometry, {\n\n    /**\n     * APIProperty: components\n     * {Array(<OpenLayers.Geometry>)} The component parts of this geometry\n     */\n    components: null,\n    \n    /**\n     * Property: componentTypes\n     * {Array(String)} An array of class names representing the types of\n     * components that the collection can include.  A null value means the\n     * component types are not restricted.\n     */\n    componentTypes: null,\n\n    /**\n     * Constructor: OpenLayers.Geometry.Collection\n     * Creates a Geometry Collection -- a list of geoms.\n     *\n     * Parameters: \n     * components - {Array(<OpenLayers.Geometry>)} Optional array of geometries\n     *\n     */\n    initialize: function (components) {\n        OpenLayers.Geometry.prototype.initialize.apply(this, arguments);\n        this.components = [];\n        if (components != null) {\n            this.addComponents(components);\n        }\n    },\n\n    /**\n     * APIMethod: destroy\n     * Destroy this geometry.\n     */\n    destroy: function () {\n        this.components.length = 0;\n        this.components = null;\n        OpenLayers.Geometry.prototype.destroy.apply(this, arguments);\n    },\n\n    /**\n     * APIMethod: clone\n     * Clone this geometry.\n     *\n     * Returns:\n     * {<OpenLayers.Geometry.Collection>} An exact clone of this collection\n     */\n    clone: function() {\n        var Constructor = OpenLayers.Util.getConstructor(this.CLASS_NAME);\n        var geometry = new Constructor();\n        for(var i=0, len=this.components.length; i<len; i++) {\n            geometry.addComponent(this.components[i].clone());\n        }\n        \n        // catch any randomly tagged-on properties\n        OpenLayers.Util.applyDefaults(geometry, this);\n        \n        return geometry;\n    },\n\n    /**\n     * Method: getComponentsString\n     * Get a string representing the components for this collection\n     * \n     * Returns:\n     * {String} A string representation of the components of this geometry\n     */\n    getComponentsString: function(){\n        var strings = [];\n        for(var i=0, len=this.components.length; i<len; i++) {\n            strings.push(this.components[i].toShortString()); \n        }\n        return strings.join(\",\");\n    },\n\n    /**\n     * APIMethod: calculateBounds\n     * Recalculate the bounds by iterating through the components and \n     * calling calling extendBounds() on each item.\n     */\n    calculateBounds: function() {\n        this.bounds = null;\n        var bounds = new OpenLayers.Bounds();\n        var components = this.components;\n        if (components) {\n            for (var i=0, len=components.length; i<len; i++) {\n                bounds.extend(components[i].getBounds());\n            }\n        }\n        // to preserve old behavior, we only set bounds if non-null\n        // in the future, we could add bounds.isEmpty()\n        if (bounds.left != null && bounds.bottom != null && \n            bounds.right != null && bounds.top != null) {\n            this.setBounds(bounds);\n        }\n    },\n\n    /**\n     * APIMethod: addComponents\n     * Add components to this geometry.\n     *\n     * Parameters:\n     * components - {Array(<OpenLayers.Geometry>)} An array of geometries to add\n     */\n    addComponents: function(components){\n        if(!(OpenLayers.Util.isArray(components))) {\n            components = [components];\n        }\n        for(var i=0, len=components.length; i<len; i++) {\n            this.addComponent(components[i]);\n        }\n    },\n\n    /**\n     * Method: addComponent\n     * Add a new component (geometry) to the collection.  If this.componentTypes\n     * is set, then the component class name must be in the componentTypes array.\n     *\n     * The bounds cache is reset.\n     * \n     * Parameters:\n     * component - {<OpenLayers.Geometry>} A geometry to add\n     * index - {int} Optional index into the array to insert the component\n     *\n     * Returns:\n     * {Boolean} The component geometry was successfully added\n     */    \n    addComponent: function(component, index) {\n        var added = false;\n        if(component) {\n            if(this.componentTypes == null ||\n               (OpenLayers.Util.indexOf(this.componentTypes,\n                                        component.CLASS_NAME) > -1)) {\n\n                if(index != null && (index < this.components.length)) {\n                    var components1 = this.components.slice(0, index);\n                    var components2 = this.components.slice(index, \n                                                           this.components.length);\n                    components1.push(component);\n                    this.components = components1.concat(components2);\n                } else {\n                    this.components.push(component);\n                }\n                component.parent = this;\n                this.clearBounds();\n                added = true;\n            }\n        }\n        return added;\n    },\n    \n    /**\n     * APIMethod: removeComponents\n     * Remove components from this geometry.\n     *\n     * Parameters:\n     * components - {Array(<OpenLayers.Geometry>)} The components to be removed\n     *\n     * Returns: \n     * {Boolean} A component was removed.\n     */\n    removeComponents: function(components) {\n        var removed = false;\n\n        if(!(OpenLayers.Util.isArray(components))) {\n            components = [components];\n        }\n        for(var i=components.length-1; i>=0; --i) {\n            removed = this.removeComponent(components[i]) || removed;\n        }\n        return removed;\n    },\n    \n    /**\n     * Method: removeComponent\n     * Remove a component from this geometry.\n     *\n     * Parameters:\n     * component - {<OpenLayers.Geometry>} \n     *\n     * Returns: \n     * {Boolean} The component was removed.\n     */\n    removeComponent: function(component) {\n        \n        OpenLayers.Util.removeItem(this.components, component);\n        \n        // clearBounds() so that it gets recalculated on the next call\n        // to this.getBounds();\n        this.clearBounds();\n        return true;\n    },\n\n    /**\n     * APIMethod: getLength\n     * Calculate the length of this geometry\n     *\n     * Returns:\n     * {Float} The length of the geometry\n     */\n    getLength: function() {\n        var length = 0.0;\n        for (var i=0, len=this.components.length; i<len; i++) {\n            length += this.components[i].getLength();\n        }\n        return length;\n    },\n    \n    /**\n     * APIMethod: getArea\n     * Calculate the area of this geometry. Note how this function is overridden\n     * in <OpenLayers.Geometry.Polygon>.\n     *\n     * Returns:\n     * {Float} The area of the collection by summing its parts\n     */\n    getArea: function() {\n        var area = 0.0;\n        for (var i=0, len=this.components.length; i<len; i++) {\n            area += this.components[i].getArea();\n        }\n        return area;\n    },\n\n    /** \n     * APIMethod: getGeodesicArea\n     * Calculate the approximate area of the polygon were it projected onto\n     *     the earth.\n     *\n     * Parameters:\n     * projection - {<OpenLayers.Projection>} The spatial reference system\n     *     for the geometry coordinates.  If not provided, Geographic/WGS84 is\n     *     assumed.\n     * \n     * Reference:\n     * Robert. G. Chamberlain and William H. Duquette, \"Some Algorithms for\n     *     Polygons on a Sphere\", JPL Publication 07-03, Jet Propulsion\n     *     Laboratory, Pasadena, CA, June 2007 http://trs-new.jpl.nasa.gov/dspace/handle/2014/40409\n     *\n     * Returns:\n     * {float} The approximate geodesic area of the geometry in square meters.\n     */\n    getGeodesicArea: function(projection) {\n        var area = 0.0;\n        for(var i=0, len=this.components.length; i<len; i++) {\n            area += this.components[i].getGeodesicArea(projection);\n        }\n        return area;\n    },\n    \n    /**\n     * APIMethod: getCentroid\n     *\n     * Compute the centroid for this geometry collection.\n     *\n     * Parameters:\n     * weighted - {Boolean} Perform the getCentroid computation recursively,\n     * returning an area weighted average of all geometries in this collection.\n     *\n     * Returns:\n     * {<OpenLayers.Geometry.Point>} The centroid of the collection\n     */\n    getCentroid: function(weighted) {\n        if (!weighted) {\n            return this.components.length && this.components[0].getCentroid();\n        }\n        var len = this.components.length;\n        if (!len) {\n            return false;\n        }\n        \n        var areas = [];\n        var centroids = [];\n        var areaSum = 0;\n        var minArea = Number.MAX_VALUE;\n        var component;\n        for (var i=0; i<len; ++i) {\n            component = this.components[i];\n            var area = component.getArea();\n            var centroid = component.getCentroid(true);\n            if (isNaN(area) || isNaN(centroid.x) || isNaN(centroid.y)) {\n                continue;\n            }\n            areas.push(area);\n            areaSum += area;\n            minArea = (area < minArea && area > 0) ? area : minArea;\n            centroids.push(centroid);\n        }\n        len = areas.length;\n        if (areaSum === 0) {\n            // all the components in this collection have 0 area\n            // probably a collection of points -- weight all the points the same\n            for (var i=0; i<len; ++i) {\n                areas[i] = 1;\n            }\n            areaSum = areas.length;\n        } else {\n            // normalize all the areas where the smallest area will get\n            // a value of 1\n            for (var i=0; i<len; ++i) {\n                areas[i] /= minArea;\n            }\n            areaSum /= minArea;\n        }\n        \n        var xSum = 0, ySum = 0, centroid, area;\n        for (var i=0; i<len; ++i) {\n            centroid = centroids[i];\n            area = areas[i];\n            xSum += centroid.x * area;\n            ySum += centroid.y * area;\n        }\n        \n        return new OpenLayers.Geometry.Point(xSum/areaSum, ySum/areaSum);\n    },\n\n    /**\n     * APIMethod: getGeodesicLength\n     * Calculate the approximate length of the geometry were it projected onto\n     *     the earth.\n     *\n     * projection - {<OpenLayers.Projection>} The spatial reference system\n     *     for the geometry coordinates.  If not provided, Geographic/WGS84 is\n     *     assumed.\n     * \n     * Returns:\n     * {Float} The appoximate geodesic length of the geometry in meters.\n     */\n    getGeodesicLength: function(projection) {\n        var length = 0.0;\n        for(var i=0, len=this.components.length; i<len; i++) {\n            length += this.components[i].getGeodesicLength(projection);\n        }\n        return length;\n    },\n\n    /**\n     * APIMethod: move\n     * Moves a geometry by the given displacement along positive x and y axes.\n     *     This modifies the position of the geometry and clears the cached\n     *     bounds.\n     *\n     * Parameters:\n     * x - {Float} Distance to move geometry in positive x direction. \n     * y - {Float} Distance to move geometry in positive y direction.\n     */\n    move: function(x, y) {\n        for(var i=0, len=this.components.length; i<len; i++) {\n            this.components[i].move(x, y);\n        }\n    },\n\n    /**\n     * APIMethod: rotate\n     * Rotate a geometry around some origin\n     *\n     * Parameters:\n     * angle - {Float} Rotation angle in degrees (measured counterclockwise\n     *                 from the positive x-axis)\n     * origin - {<OpenLayers.Geometry.Point>} Center point for the rotation\n     */\n    rotate: function(angle, origin) {\n        for(var i=0, len=this.components.length; i<len; ++i) {\n            this.components[i].rotate(angle, origin);\n        }\n    },\n\n    /**\n     * APIMethod: resize\n     * Resize a geometry relative to some origin.  Use this method to apply\n     *     a uniform scaling to a geometry.\n     *\n     * Parameters:\n     * scale - {Float} Factor by which to scale the geometry.  A scale of 2\n     *                 doubles the size of the geometry in each dimension\n     *                 (lines, for example, will be twice as long, and polygons\n     *                 will have four times the area).\n     * origin - {<OpenLayers.Geometry.Point>} Point of origin for resizing\n     * ratio - {Float} Optional x:y ratio for resizing.  Default ratio is 1.\n     * \n     * Returns:\n     * {<OpenLayers.Geometry>} - The current geometry. \n     */\n    resize: function(scale, origin, ratio) {\n        for(var i=0; i<this.components.length; ++i) {\n            this.components[i].resize(scale, origin, ratio);\n        }\n        return this;\n    },\n\n    /**\n     * APIMethod: distanceTo\n     * Calculate the closest distance between two geometries (on the x-y plane).\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} The target geometry.\n     * options - {Object} Optional properties for configuring the distance\n     *     calculation.\n     *\n     * Valid options:\n     * details - {Boolean} Return details from the distance calculation.\n     *     Default is false.\n     * edge - {Boolean} Calculate the distance from this geometry to the\n     *     nearest edge of the target geometry.  Default is true.  If true,\n     *     calling distanceTo from a geometry that is wholly contained within\n     *     the target will result in a non-zero distance.  If false, whenever\n     *     geometries intersect, calling distanceTo will return 0.  If false,\n     *     details cannot be returned.\n     *\n     * Returns:\n     * {Number | Object} The distance between this geometry and the target.\n     *     If details is true, the return will be an object with distance,\n     *     x0, y0, x1, and y1 properties.  The x0 and y0 properties represent\n     *     the coordinates of the closest point on this geometry. The x1 and y1\n     *     properties represent the coordinates of the closest point on the\n     *     target geometry.\n     */\n    distanceTo: function(geometry, options) {\n        var edge = !(options && options.edge === false);\n        var details = edge && options && options.details;\n        var result, best, distance;\n        var min = Number.POSITIVE_INFINITY;\n        for(var i=0, len=this.components.length; i<len; ++i) {\n            result = this.components[i].distanceTo(geometry, options);\n            distance = details ? result.distance : result;\n            if(distance < min) {\n                min = distance;\n                best = result;\n                if(min == 0) {\n                    break;\n                }\n            }\n        }\n        return best;\n    },\n\n    /** \n     * APIMethod: equals\n     * Determine whether another geometry is equivalent to this one.  Geometries\n     *     are considered equivalent if all components have the same coordinates.\n     * \n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} The geometry to test. \n     *\n     * Returns:\n     * {Boolean} The supplied geometry is equivalent to this geometry.\n     */\n    equals: function(geometry) {\n        var equivalent = true;\n        if(!geometry || !geometry.CLASS_NAME ||\n           (this.CLASS_NAME != geometry.CLASS_NAME)) {\n            equivalent = false;\n        } else if(!(OpenLayers.Util.isArray(geometry.components)) ||\n                  (geometry.components.length != this.components.length)) {\n            equivalent = false;\n        } else {\n            for(var i=0, len=this.components.length; i<len; ++i) {\n                if(!this.components[i].equals(geometry.components[i])) {\n                    equivalent = false;\n                    break;\n                }\n            }\n        }\n        return equivalent;\n    },\n\n    /**\n     * APIMethod: transform\n     * Reproject the components geometry from source to dest.\n     * \n     * Parameters:\n     * source - {<OpenLayers.Projection>} \n     * dest - {<OpenLayers.Projection>}\n     * \n     * Returns:\n     * {<OpenLayers.Geometry>} \n     */\n    transform: function(source, dest) {\n        if (source && dest) {\n            for (var i=0, len=this.components.length; i<len; i++) {  \n                var component = this.components[i];\n                component.transform(source, dest);\n            }\n            this.bounds = null;\n        }\n        return this;\n    },\n\n    /**\n     * APIMethod: intersects\n     * Determine if the input geometry intersects this one.\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} Any type of geometry.\n     *\n     * Returns:\n     * {Boolean} The input geometry intersects this one.\n     */\n    intersects: function(geometry) {\n        var intersect = false;\n        for(var i=0, len=this.components.length; i<len; ++ i) {\n            intersect = geometry.intersects(this.components[i]);\n            if(intersect) {\n                break;\n            }\n        }\n        return intersect;\n    },\n\n    /**\n     * APIMethod: getVertices\n     * Return a list of all points in this geometry.\n     *\n     * Parameters:\n     * nodes - {Boolean} For lines, only return vertices that are\n     *     endpoints.  If false, for lines, only vertices that are not\n     *     endpoints will be returned.  If not provided, all vertices will\n     *     be returned.\n     *\n     * Returns:\n     * {Array} A list of all vertices in the geometry.\n     */\n    getVertices: function(nodes) {\n        var vertices = [];\n        for(var i=0, len=this.components.length; i<len; ++i) {\n            Array.prototype.push.apply(\n                vertices, this.components[i].getVertices(nodes)\n            );\n        }\n        return vertices;\n    },\n\n\n    CLASS_NAME: \"OpenLayers.Geometry.Collection\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Geometry.js\n */\n\n/**\n * Class: OpenLayers.Geometry.Point\n * Point geometry class. \n * \n * Inherits from:\n *  - <OpenLayers.Geometry> \n */\nOpenLayers.Geometry.Point = OpenLayers.Class(OpenLayers.Geometry, {\n\n    /** \n     * APIProperty: x \n     * {float} \n     */\n    x: null,\n\n    /** \n     * APIProperty: y \n     * {float} \n     */\n    y: null,\n\n    /**\n     * Constructor: OpenLayers.Geometry.Point\n     * Construct a point geometry.\n     *\n     * Parameters:\n     * x - {float} \n     * y - {float}\n     * \n     */\n    initialize: function(x, y) {\n        OpenLayers.Geometry.prototype.initialize.apply(this, arguments);\n        \n        this.x = parseFloat(x);\n        this.y = parseFloat(y);\n    },\n\n    /**\n     * APIMethod: clone\n     * \n     * Returns:\n     * {<OpenLayers.Geometry.Point>} An exact clone of this OpenLayers.Geometry.Point\n     */\n    clone: function(obj) {\n        if (obj == null) {\n            obj = new OpenLayers.Geometry.Point(this.x, this.y);\n        }\n\n        // catch any randomly tagged-on properties\n        OpenLayers.Util.applyDefaults(obj, this);\n\n        return obj;\n    },\n\n    /** \n     * Method: calculateBounds\n     * Create a new Bounds based on the lon/lat\n     */\n    calculateBounds: function () {\n        this.bounds = new OpenLayers.Bounds(this.x, this.y,\n                                            this.x, this.y);\n    },\n\n    /**\n     * APIMethod: distanceTo\n     * Calculate the closest distance between two geometries (on the x-y plane).\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} The target geometry.\n     * options - {Object} Optional properties for configuring the distance\n     *     calculation.\n     *\n     * Valid options:\n     * details - {Boolean} Return details from the distance calculation.\n     *     Default is false.\n     * edge - {Boolean} Calculate the distance from this geometry to the\n     *     nearest edge of the target geometry.  Default is true.  If true,\n     *     calling distanceTo from a geometry that is wholly contained within\n     *     the target will result in a non-zero distance.  If false, whenever\n     *     geometries intersect, calling distanceTo will return 0.  If false,\n     *     details cannot be returned.\n     *\n     * Returns:\n     * {Number | Object} The distance between this geometry and the target.\n     *     If details is true, the return will be an object with distance,\n     *     x0, y0, x1, and x2 properties.  The x0 and y0 properties represent\n     *     the coordinates of the closest point on this geometry. The x1 and y1\n     *     properties represent the coordinates of the closest point on the\n     *     target geometry.\n     */\n    distanceTo: function(geometry, options) {\n        var edge = !(options && options.edge === false);\n        var details = edge && options && options.details;\n        var distance, x0, y0, x1, y1, result;\n        if(geometry instanceof OpenLayers.Geometry.Point) {\n            x0 = this.x;\n            y0 = this.y;\n            x1 = geometry.x;\n            y1 = geometry.y;\n            distance = Math.sqrt(Math.pow(x0 - x1, 2) + Math.pow(y0 - y1, 2));\n            result = !details ?\n                distance : {x0: x0, y0: y0, x1: x1, y1: y1, distance: distance};\n        } else {\n            result = geometry.distanceTo(this, options);\n            if(details) {\n                // switch coord order since this geom is target\n                result = {\n                    x0: result.x1, y0: result.y1,\n                    x1: result.x0, y1: result.y0,\n                    distance: result.distance\n                };\n            }\n        }\n        return result;\n    },\n    \n    /** \n     * APIMethod: equals\n     * Determine whether another geometry is equivalent to this one.  Geometries\n     *     are considered equivalent if all components have the same coordinates.\n     * \n     * Parameters:\n     * geom - {<OpenLayers.Geometry.Point>} The geometry to test. \n     *\n     * Returns:\n     * {Boolean} The supplied geometry is equivalent to this geometry.\n     */\n    equals: function(geom) {\n        var equals = false;\n        if (geom != null) {\n            equals = ((this.x == geom.x && this.y == geom.y) ||\n                      (isNaN(this.x) && isNaN(this.y) && isNaN(geom.x) && isNaN(geom.y)));\n        }\n        return equals;\n    },\n    \n    /**\n     * Method: toShortString\n     *\n     * Returns:\n     * {String} Shortened String representation of Point object. \n     *         (ex. <i>\"5, 42\"</i>)\n     */\n    toShortString: function() {\n        return (this.x + \", \" + this.y);\n    },\n    \n    /**\n     * APIMethod: move\n     * Moves a geometry by the given displacement along positive x and y axes.\n     *     This modifies the position of the geometry and clears the cached\n     *     bounds.\n     *\n     * Parameters:\n     * x - {Float} Distance to move geometry in positive x direction. \n     * y - {Float} Distance to move geometry in positive y direction.\n     */\n    move: function(x, y) {\n        this.x = this.x + x;\n        this.y = this.y + y;\n        this.clearBounds();\n    },\n\n    /**\n     * APIMethod: rotate\n     * Rotate a point around another.\n     *\n     * Parameters:\n     * angle - {Float} Rotation angle in degrees (measured counterclockwise\n     *                 from the positive x-axis)\n     * origin - {<OpenLayers.Geometry.Point>} Center point for the rotation\n     */\n    rotate: function(angle, origin) {\n        angle *= Math.PI / 180;\n        var radius = this.distanceTo(origin);\n        var theta = angle + Math.atan2(this.y - origin.y, this.x - origin.x);\n        this.x = origin.x + (radius * Math.cos(theta));\n        this.y = origin.y + (radius * Math.sin(theta));\n        this.clearBounds();\n    },\n    \n    /**\n     * APIMethod: getCentroid\n     *\n     * Returns:\n     * {<OpenLayers.Geometry.Point>} The centroid of the collection\n     */\n    getCentroid: function() {\n        return new OpenLayers.Geometry.Point(this.x, this.y);\n    },\n\n    /**\n     * APIMethod: resize\n     * Resize a point relative to some origin.  For points, this has the effect\n     *     of scaling a vector (from the origin to the point).  This method is\n     *     more useful on geometry collection subclasses.\n     *\n     * Parameters:\n     * scale - {Float} Ratio of the new distance from the origin to the old\n     *                 distance from the origin.  A scale of 2 doubles the\n     *                 distance between the point and origin.\n     * origin - {<OpenLayers.Geometry.Point>} Point of origin for resizing\n     * ratio - {Float} Optional x:y ratio for resizing.  Default ratio is 1.\n     * \n     * Returns:\n     * {<OpenLayers.Geometry>} - The current geometry. \n     */\n    resize: function(scale, origin, ratio) {\n        ratio = (ratio == undefined) ? 1 : ratio;\n        this.x = origin.x + (scale * ratio * (this.x - origin.x));\n        this.y = origin.y + (scale * (this.y - origin.y));\n        this.clearBounds();\n        return this;\n    },\n    \n    /**\n     * APIMethod: intersects\n     * Determine if the input geometry intersects this one.\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} Any type of geometry.\n     *\n     * Returns:\n     * {Boolean} The input geometry intersects this one.\n     */\n    intersects: function(geometry) {\n        var intersect = false;\n        if(geometry.CLASS_NAME == \"OpenLayers.Geometry.Point\") {\n            intersect = this.equals(geometry);\n        } else {\n            intersect = geometry.intersects(this);\n        }\n        return intersect;\n    },\n    \n    /**\n     * APIMethod: transform\n     * Translate the x,y properties of the point from source to dest.\n     * \n     * Parameters:\n     * source - {<OpenLayers.Projection>} \n     * dest - {<OpenLayers.Projection>}\n     * \n     * Returns:\n     * {<OpenLayers.Geometry>} \n     */\n    transform: function(source, dest) {\n        if ((source && dest)) {\n            OpenLayers.Projection.transform(\n                this, source, dest); \n            this.bounds = null;\n        }       \n        return this;\n    },\n\n    /**\n     * APIMethod: getVertices\n     * Return a list of all points in this geometry.\n     *\n     * Parameters:\n     * nodes - {Boolean} For lines, only return vertices that are\n     *     endpoints.  If false, for lines, only vertices that are not\n     *     endpoints will be returned.  If not provided, all vertices will\n     *     be returned.\n     *\n     * Returns:\n     * {Array} A list of all vertices in the geometry.\n     */\n    getVertices: function(nodes) {\n        return [this];\n    },\n\n    CLASS_NAME: \"OpenLayers.Geometry.Point\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Geometry/Collection.js\n * @requires OpenLayers/Geometry/Point.js\n */\n\n/**\n * Class: OpenLayers.Geometry.MultiPoint\n * MultiPoint is a collection of Points.  Create a new instance with the\n * <OpenLayers.Geometry.MultiPoint> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Geometry.Collection>\n *  - <OpenLayers.Geometry>\n */\nOpenLayers.Geometry.MultiPoint = OpenLayers.Class(\n  OpenLayers.Geometry.Collection, {\n\n    /**\n     * Property: componentTypes\n     * {Array(String)} An array of class names representing the types of\n     * components that the collection can include.  A null value means the\n     * component types are not restricted.\n     */\n    componentTypes: [\"OpenLayers.Geometry.Point\"],\n\n    /**\n     * Constructor: OpenLayers.Geometry.MultiPoint\n     * Create a new MultiPoint Geometry\n     *\n     * Parameters:\n     * components - {Array(<OpenLayers.Geometry.Point>)} \n     *\n     * Returns:\n     * {<OpenLayers.Geometry.MultiPoint>}\n     */\n\n    /**\n     * APIMethod: addPoint\n     * Wrapper for <OpenLayers.Geometry.Collection.addComponent>\n     *\n     * Parameters:\n     * point - {<OpenLayers.Geometry.Point>} Point to be added\n     * index - {Integer} Optional index\n     */\n    addPoint: function(point, index) {\n        this.addComponent(point, index);\n    },\n    \n    /**\n     * APIMethod: removePoint\n     * Wrapper for <OpenLayers.Geometry.Collection.removeComponent>\n     *\n     * Parameters:\n     * point - {<OpenLayers.Geometry.Point>} Point to be removed\n     */\n    removePoint: function(point){\n        this.removeComponent(point);\n    },\n\n    CLASS_NAME: \"OpenLayers.Geometry.MultiPoint\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Geometry/MultiPoint.js\n */\n\n/**\n * Class: OpenLayers.Geometry.Curve\n * A Curve is a MultiPoint, whose points are assumed to be connected. To \n * this end, we provide a \"getLength()\" function, which iterates through \n * the points, summing the distances between them. \n * \n * Inherits: \n *  - <OpenLayers.Geometry.MultiPoint>\n */\nOpenLayers.Geometry.Curve = OpenLayers.Class(OpenLayers.Geometry.MultiPoint, {\n\n    /**\n     * Property: componentTypes\n     * {Array(String)} An array of class names representing the types of \n     *                 components that the collection can include.  A null \n     *                 value means the component types are not restricted.\n     */\n    componentTypes: [\"OpenLayers.Geometry.Point\"],\n\n    /**\n     * Constructor: OpenLayers.Geometry.Curve\n     * \n     * Parameters:\n     * point - {Array(<OpenLayers.Geometry.Point>)}\n     */\n    \n    /**\n     * APIMethod: getLength\n     * \n     * Returns:\n     * {Float} The length of the curve\n     */\n    getLength: function() {\n        var length = 0.0;\n        if ( this.components && (this.components.length > 1)) {\n            for(var i=1, len=this.components.length; i<len; i++) {\n                length += this.components[i-1].distanceTo(this.components[i]);\n            }\n        }\n        return length;\n    },\n\n    /**\n     * APIMethod: getGeodesicLength\n     * Calculate the approximate length of the geometry were it projected onto\n     *     the earth.\n     *\n     * projection - {<OpenLayers.Projection>} The spatial reference system\n     *     for the geometry coordinates.  If not provided, Geographic/WGS84 is\n     *     assumed.\n     * \n     * Returns:\n     * {Float} The appoximate geodesic length of the geometry in meters.\n     */\n    getGeodesicLength: function(projection) {\n        var geom = this;  // so we can work with a clone if needed\n        if(projection) {\n            var gg = new OpenLayers.Projection(\"EPSG:4326\");\n            if(!gg.equals(projection)) {\n                geom = this.clone().transform(projection, gg);\n            }\n        }\n        var length = 0.0;\n        if(geom.components && (geom.components.length > 1)) {\n            var p1, p2;\n            for(var i=1, len=geom.components.length; i<len; i++) {\n                p1 = geom.components[i-1];\n                p2 = geom.components[i];\n                // this returns km and requires lon/lat properties\n                length += OpenLayers.Util.distVincenty(\n                    {lon: p1.x, lat: p1.y}, {lon: p2.x, lat: p2.y}\n                );\n            }\n        }\n        // convert to m\n        return length * 1000;\n    },\n\n    CLASS_NAME: \"OpenLayers.Geometry.Curve\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Geometry/Curve.js\n */\n\n/**\n * Class: OpenLayers.Geometry.LineString\n * A LineString is a Curve which, once two points have been added to it, can \n * never be less than two points long.\n * \n * Inherits from:\n *  - <OpenLayers.Geometry.Curve>\n */\nOpenLayers.Geometry.LineString = OpenLayers.Class(OpenLayers.Geometry.Curve, {\n\n    /**\n     * Constructor: OpenLayers.Geometry.LineString\n     * Create a new LineString geometry\n     *\n     * Parameters:\n     * points - {Array(<OpenLayers.Geometry.Point>)} An array of points used to\n     *          generate the linestring\n     *\n     */\n\n    /**\n     * APIMethod: removeComponent\n     * Only allows removal of a point if there are three or more points in \n     * the linestring. (otherwise the result would be just a single point)\n     *\n     * Parameters: \n     * point - {<OpenLayers.Geometry.Point>} The point to be removed\n     *\n     * Returns: \n     * {Boolean} The component was removed.\n     */\n    removeComponent: function(point) {\n        var removed = this.components && (this.components.length > 2);\n        if (removed) {\n            OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this, \n                                                                  arguments);\n        }\n        return removed;\n    },\n    \n    /**\n     * APIMethod: intersects\n     * Test for instersection between two geometries.  This is a cheapo\n     *     implementation of the Bently-Ottmann algorigithm.  It doesn't\n     *     really keep track of a sweep line data structure.  It is closer\n     *     to the brute force method, except that segments are sorted and\n     *     potential intersections are only calculated when bounding boxes\n     *     intersect.\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     *\n     * Returns:\n     * {Boolean} The input geometry intersects this geometry.\n     */\n    intersects: function(geometry) {\n        var intersect = false;\n        var type = geometry.CLASS_NAME;\n        if(type == \"OpenLayers.Geometry.LineString\" ||\n           type == \"OpenLayers.Geometry.LinearRing\" ||\n           type == \"OpenLayers.Geometry.Point\") {\n            var segs1 = this.getSortedSegments();\n            var segs2;\n            if(type == \"OpenLayers.Geometry.Point\") {\n                segs2 = [{\n                    x1: geometry.x, y1: geometry.y,\n                    x2: geometry.x, y2: geometry.y\n                }];\n            } else {\n                segs2 = geometry.getSortedSegments();\n            }\n            var seg1, seg1x1, seg1x2, seg1y1, seg1y2,\n                seg2, seg2y1, seg2y2;\n            // sweep right\n            outer: for(var i=0, len=segs1.length; i<len; ++i) {\n                seg1 = segs1[i];\n                seg1x1 = seg1.x1;\n                seg1x2 = seg1.x2;\n                seg1y1 = seg1.y1;\n                seg1y2 = seg1.y2;\n                inner: for(var j=0, jlen=segs2.length; j<jlen; ++j) {\n                    seg2 = segs2[j];\n                    if(seg2.x1 > seg1x2) {\n                        // seg1 still left of seg2\n                        break;\n                    }\n                    if(seg2.x2 < seg1x1) {\n                        // seg2 still left of seg1\n                        continue;\n                    }\n                    seg2y1 = seg2.y1;\n                    seg2y2 = seg2.y2;\n                    if(Math.min(seg2y1, seg2y2) > Math.max(seg1y1, seg1y2)) {\n                        // seg2 above seg1\n                        continue;\n                    }\n                    if(Math.max(seg2y1, seg2y2) < Math.min(seg1y1, seg1y2)) {\n                        // seg2 below seg1\n                        continue;\n                    }\n                    if(OpenLayers.Geometry.segmentsIntersect(seg1, seg2)) {\n                        intersect = true;\n                        break outer;\n                    }\n                }\n            }\n        } else {\n            intersect = geometry.intersects(this);\n        }\n        return intersect;\n    },\n    \n    /**\n     * Method: getSortedSegments\n     *\n     * Returns:\n     * {Array} An array of segment objects.  Segment objects have properties\n     *     x1, y1, x2, and y2.  The start point is represented by x1 and y1.\n     *     The end point is represented by x2 and y2.  Start and end are\n     *     ordered so that x1 < x2.\n     */\n    getSortedSegments: function() {\n        var numSeg = this.components.length - 1;\n        var segments = new Array(numSeg), point1, point2;\n        for(var i=0; i<numSeg; ++i) {\n            point1 = this.components[i];\n            point2 = this.components[i + 1];\n            if(point1.x < point2.x) {\n                segments[i] = {\n                    x1: point1.x,\n                    y1: point1.y,\n                    x2: point2.x,\n                    y2: point2.y\n                };\n            } else {\n                segments[i] = {\n                    x1: point2.x,\n                    y1: point2.y,\n                    x2: point1.x,\n                    y2: point1.y\n                };\n            }\n        }\n        // more efficient to define this somewhere static\n        function byX1(seg1, seg2) {\n            return seg1.x1 - seg2.x1;\n        }\n        return segments.sort(byX1);\n    },\n    \n    /**\n     * Method: splitWithSegment\n     * Split this geometry with the given segment.\n     *\n     * Parameters:\n     * seg - {Object} An object with x1, y1, x2, and y2 properties referencing\n     *     segment endpoint coordinates.\n     * options - {Object} Properties of this object will be used to determine\n     *     how the split is conducted.\n     *\n     * Valid options:\n     * edge - {Boolean} Allow splitting when only edges intersect.  Default is\n     *     true.  If false, a vertex on the source segment must be within the\n     *     tolerance distance of the intersection to be considered a split.\n     * tolerance - {Number} If a non-null value is provided, intersections\n     *     within the tolerance distance of one of the source segment's\n     *     endpoints will be assumed to occur at the endpoint.\n     *\n     * Returns:\n     * {Object} An object with *lines* and *points* properties.  If the given\n     *     segment intersects this linestring, the lines array will reference\n     *     geometries that result from the split.  The points array will contain\n     *     all intersection points.  Intersection points are sorted along the\n     *     segment (in order from x1,y1 to x2,y2).\n     */\n    splitWithSegment: function(seg, options) {\n        var edge = !(options && options.edge === false);\n        var tolerance = options && options.tolerance;\n        var lines = [];\n        var verts = this.getVertices();\n        var points = [];\n        var intersections = [];\n        var split = false;\n        var vert1, vert2, point;\n        var node, vertex, target;\n        var interOptions = {point: true, tolerance: tolerance};\n        var result = null;\n        for(var i=0, stop=verts.length-2; i<=stop; ++i) {\n            vert1 = verts[i];\n            points.push(vert1.clone());\n            vert2 = verts[i+1];\n            target = {x1: vert1.x, y1: vert1.y, x2: vert2.x, y2: vert2.y};\n            point = OpenLayers.Geometry.segmentsIntersect(\n                seg, target, interOptions\n            );\n            if(point instanceof OpenLayers.Geometry.Point) {\n                if((point.x === seg.x1 && point.y === seg.y1) ||\n                   (point.x === seg.x2 && point.y === seg.y2) ||\n                   point.equals(vert1) || point.equals(vert2)) {\n                    vertex = true;\n                } else {\n                    vertex = false;\n                }\n                if(vertex || edge) {\n                    // push intersections different than the previous\n                    if(!point.equals(intersections[intersections.length-1])) {\n                        intersections.push(point.clone());\n                    }\n                    if(i === 0) {\n                        if(point.equals(vert1)) {\n                            continue;\n                        }\n                    }\n                    if(point.equals(vert2)) {\n                        continue;\n                    }\n                    split = true;\n                    if(!point.equals(vert1)) {\n                        points.push(point);\n                    }\n                    lines.push(new OpenLayers.Geometry.LineString(points));\n                    points = [point.clone()];\n                }\n            }\n        }\n        if(split) {\n            points.push(vert2.clone());\n            lines.push(new OpenLayers.Geometry.LineString(points));\n        }\n        if(intersections.length > 0) {\n            // sort intersections along segment\n            var xDir = seg.x1 < seg.x2 ? 1 : -1;\n            var yDir = seg.y1 < seg.y2 ? 1 : -1;\n            result = {\n                lines: lines,\n                points: intersections.sort(function(p1, p2) {\n                    return (xDir * p1.x - xDir * p2.x) || (yDir * p1.y - yDir * p2.y);\n                })\n            };\n        }\n        return result;\n    },\n\n    /**\n     * Method: split\n     * Use this geometry (the source) to attempt to split a target geometry.\n     * \n     * Parameters:\n     * target - {<OpenLayers.Geometry>} The target geometry.\n     * options - {Object} Properties of this object will be used to determine\n     *     how the split is conducted.\n     *\n     * Valid options:\n     * mutual - {Boolean} Split the source geometry in addition to the target\n     *     geometry.  Default is false.\n     * edge - {Boolean} Allow splitting when only edges intersect.  Default is\n     *     true.  If false, a vertex on the source must be within the tolerance\n     *     distance of the intersection to be considered a split.\n     * tolerance - {Number} If a non-null value is provided, intersections\n     *     within the tolerance distance of an existing vertex on the source\n     *     will be assumed to occur at the vertex.\n     * \n     * Returns:\n     * {Array} A list of geometries (of this same type as the target) that\n     *     result from splitting the target with the source geometry.  The\n     *     source and target geometry will remain unmodified.  If no split\n     *     results, null will be returned.  If mutual is true and a split\n     *     results, return will be an array of two arrays - the first will be\n     *     all geometries that result from splitting the source geometry and\n     *     the second will be all geometries that result from splitting the\n     *     target geometry.\n     */\n    split: function(target, options) {\n        var results = null;\n        var mutual = options && options.mutual;\n        var sourceSplit, targetSplit, sourceParts, targetParts;\n        if(target instanceof OpenLayers.Geometry.LineString) {\n            var verts = this.getVertices();\n            var vert1, vert2, seg, splits, lines, point;\n            var points = [];\n            sourceParts = [];\n            for(var i=0, stop=verts.length-2; i<=stop; ++i) {\n                vert1 = verts[i];\n                vert2 = verts[i+1];\n                seg = {\n                    x1: vert1.x, y1: vert1.y,\n                    x2: vert2.x, y2: vert2.y\n                };\n                targetParts = targetParts || [target];\n                if(mutual) {\n                    points.push(vert1.clone());\n                }\n                for(var j=0; j<targetParts.length; ++j) {\n                    splits = targetParts[j].splitWithSegment(seg, options);\n                    if(splits) {\n                        // splice in new features\n                        lines = splits.lines;\n                        if(lines.length > 0) {\n                            lines.unshift(j, 1);\n                            Array.prototype.splice.apply(targetParts, lines);\n                            j += lines.length - 2;\n                        }\n                        if(mutual) {\n                            for(var k=0, len=splits.points.length; k<len; ++k) {\n                                point = splits.points[k];\n                                if(!point.equals(vert1)) {\n                                    points.push(point);\n                                    sourceParts.push(new OpenLayers.Geometry.LineString(points));\n                                    if(point.equals(vert2)) {\n                                        points = [];\n                                    } else {\n                                        points = [point.clone()];\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            if(mutual && sourceParts.length > 0 && points.length > 0) {\n                points.push(vert2.clone());\n                sourceParts.push(new OpenLayers.Geometry.LineString(points));\n            }\n        } else {\n            results = target.splitWith(this, options);\n        }\n        if(targetParts && targetParts.length > 1) {\n            targetSplit = true;\n        } else {\n            targetParts = [];\n        }\n        if(sourceParts && sourceParts.length > 1) {\n            sourceSplit = true;\n        } else {\n            sourceParts = [];\n        }\n        if(targetSplit || sourceSplit) {\n            if(mutual) {\n                results = [sourceParts, targetParts];\n            } else {\n                results = targetParts;\n            }\n        }\n        return results;\n    },\n\n    /**\n     * Method: splitWith\n     * Split this geometry (the target) with the given geometry (the source).\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} A geometry used to split this\n     *     geometry (the source).\n     * options - {Object} Properties of this object will be used to determine\n     *     how the split is conducted.\n     *\n     * Valid options:\n     * mutual - {Boolean} Split the source geometry in addition to the target\n     *     geometry.  Default is false.\n     * edge - {Boolean} Allow splitting when only edges intersect.  Default is\n     *     true.  If false, a vertex on the source must be within the tolerance\n     *     distance of the intersection to be considered a split.\n     * tolerance - {Number} If a non-null value is provided, intersections\n     *     within the tolerance distance of an existing vertex on the source\n     *     will be assumed to occur at the vertex.\n     * \n     * Returns:\n     * {Array} A list of geometries (of this same type as the target) that\n     *     result from splitting the target with the source geometry.  The\n     *     source and target geometry will remain unmodified.  If no split\n     *     results, null will be returned.  If mutual is true and a split\n     *     results, return will be an array of two arrays - the first will be\n     *     all geometries that result from splitting the source geometry and\n     *     the second will be all geometries that result from splitting the\n     *     target geometry.\n     */\n    splitWith: function(geometry, options) {\n        return geometry.split(this, options);\n\n    },\n\n    /**\n     * APIMethod: getVertices\n     * Return a list of all points in this geometry.\n     *\n     * Parameters:\n     * nodes - {Boolean} For lines, only return vertices that are\n     *     endpoints.  If false, for lines, only vertices that are not\n     *     endpoints will be returned.  If not provided, all vertices will\n     *     be returned.\n     *\n     * Returns:\n     * {Array} A list of all vertices in the geometry.\n     */\n    getVertices: function(nodes) {\n        var vertices;\n        if(nodes === true) {\n            vertices = [\n                this.components[0],\n                this.components[this.components.length-1]\n            ];\n        } else if (nodes === false) {\n            vertices = this.components.slice(1, this.components.length-1);\n        } else {\n            vertices = this.components.slice();\n        }\n        return vertices;\n    },\n\n    /**\n     * APIMethod: distanceTo\n     * Calculate the closest distance between two geometries (on the x-y plane).\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} The target geometry.\n     * options - {Object} Optional properties for configuring the distance\n     *     calculation.\n     *\n     * Valid options:\n     * details - {Boolean} Return details from the distance calculation.\n     *     Default is false.\n     * edge - {Boolean} Calculate the distance from this geometry to the\n     *     nearest edge of the target geometry.  Default is true.  If true,\n     *     calling distanceTo from a geometry that is wholly contained within\n     *     the target will result in a non-zero distance.  If false, whenever\n     *     geometries intersect, calling distanceTo will return 0.  If false,\n     *     details cannot be returned.\n     *\n     * Returns:\n     * {Number | Object} The distance between this geometry and the target.\n     *     If details is true, the return will be an object with distance,\n     *     x0, y0, x1, and x2 properties.  The x0 and y0 properties represent\n     *     the coordinates of the closest point on this geometry. The x1 and y1\n     *     properties represent the coordinates of the closest point on the\n     *     target geometry.\n     */\n    distanceTo: function(geometry, options) {\n        var edge = !(options && options.edge === false);\n        var details = edge && options && options.details;\n        var result, best = {};\n        var min = Number.POSITIVE_INFINITY;\n        if(geometry instanceof OpenLayers.Geometry.Point) {\n            var segs = this.getSortedSegments();\n            var x = geometry.x;\n            var y = geometry.y;\n            var seg;\n            for(var i=0, len=segs.length; i<len; ++i) {\n                seg = segs[i];\n                result = OpenLayers.Geometry.distanceToSegment(geometry, seg);\n                if(result.distance < min) {\n                    min = result.distance;\n                    if(details) {\n                        best = {\n                            distance: min,\n                            x0: result.x, y0: result.y,\n                            x1: x, y1: y,\n                            index: i,\n                            indexDistance: new OpenLayers.Geometry.Point(seg.x1, seg.y1).distanceTo(geometry)\n                        };\n                    } else {\n                        best = min;\n                    }\n                    if(min === 0) {\n                        break;\n                    }\n                }\n            }\n        } else if(geometry instanceof OpenLayers.Geometry.LineString) { \n            var segs0 = this.getSortedSegments();\n            var segs1 = geometry.getSortedSegments();\n            var seg0, seg1, intersection, x0, y0;\n            var len1 = segs1.length;\n            var interOptions = {point: true};\n            outer: for(var i=0, len=segs0.length; i<len; ++i) {\n                seg0 = segs0[i];\n                x0 = seg0.x1;\n                y0 = seg0.y1;\n                for(var j=0; j<len1; ++j) {\n                    seg1 = segs1[j];\n                    intersection = OpenLayers.Geometry.segmentsIntersect(seg0, seg1, interOptions);\n                    if(intersection) {\n                        min = 0;\n                        best = {\n                            distance: 0,\n                            x0: intersection.x, y0: intersection.y,\n                            x1: intersection.x, y1: intersection.y\n                        };\n                        break outer;\n                    } else {\n                        result = OpenLayers.Geometry.distanceToSegment({x: x0, y: y0}, seg1);\n                        if(result.distance < min) {\n                            min = result.distance;\n                            best = {\n                                distance: min,\n                                x0: x0, y0: y0,\n                                x1: result.x, y1: result.y\n                            };\n                        }\n                    }\n                }\n            }\n            if(!details) {\n                best = best.distance;\n            }\n            if(min !== 0) {\n                // check the final vertex in this line's sorted segments\n                if(seg0) {\n                    result = geometry.distanceTo(\n                        new OpenLayers.Geometry.Point(seg0.x2, seg0.y2),\n                        options\n                    );\n                    var dist = details ? result.distance : result;\n                    if(dist < min) {\n                        if(details) {\n                            best = {\n                                distance: min,\n                                x0: result.x1, y0: result.y1,\n                                x1: result.x0, y1: result.y0\n                            };\n                        } else {\n                            best = dist;\n                        }\n                    }\n                }\n            }\n        } else {\n            best = geometry.distanceTo(this, options);\n            // swap since target comes from this line\n            if(details) {\n                best = {\n                    distance: best.distance,\n                    x0: best.x1, y0: best.y1,\n                    x1: best.x0, y1: best.y0\n                };\n            }\n        }\n        return best;\n    },\n    \n    /**\n     * APIMethod: simplify\n     * This function will return a simplified LineString.\n     * Simplification is based on the Douglas-Peucker algorithm.\n     *\n     *\n     * Parameters:\n     * tolerance - {number} threshold for simplification in map units\n     *\n     * Returns:\n     * {OpenLayers.Geometry.LineString} the simplified LineString\n     */\n    simplify: function(tolerance){\n        if (this && this !== null) {\n            var points = this.getVertices();\n            if (points.length < 3) {\n                return this;\n            }\n    \n            var compareNumbers = function(a, b){\n                return (a-b);\n            };\n    \n            /**\n             * Private function doing the Douglas-Peucker reduction\n             */\n            var douglasPeuckerReduction = function(points, firstPoint, lastPoint, tolerance){\n                var maxDistance = 0;\n                var indexFarthest = 0;\n    \n                for (var index = firstPoint, distance; index < lastPoint; index++) {\n                    distance = perpendicularDistance(points[firstPoint], points[lastPoint], points[index]);\n                    if (distance > maxDistance) {\n                        maxDistance = distance;\n                        indexFarthest = index;\n                    }\n                }\n    \n                if (maxDistance > tolerance && indexFarthest != firstPoint) {\n                    //Add the largest point that exceeds the tolerance\n                    pointIndexsToKeep.push(indexFarthest);\n                    douglasPeuckerReduction(points, firstPoint, indexFarthest, tolerance);\n                    douglasPeuckerReduction(points, indexFarthest, lastPoint, tolerance);\n                }\n            };\n    \n            /**\n             * Private function calculating the perpendicular distance\n             * TODO: check whether OpenLayers.Geometry.LineString::distanceTo() is faster or slower\n             */\n            var perpendicularDistance = function(point1, point2, point){\n                //Area = |(1/2)(x1y2 + x2y3 + x3y1 - x2y1 - x3y2 - x1y3)|   *Area of triangle\n                //Base = v((x1-x2)\u00B2+(x1-x2)\u00B2)                               *Base of Triangle*\n                //Area = .5*Base*H                                          *Solve for height\n                //Height = Area/.5/Base\n    \n                var area = Math.abs(0.5 * (point1.x * point2.y + point2.x * point.y + point.x * point1.y - point2.x * point1.y - point.x * point2.y - point1.x * point.y));\n                var bottom = Math.sqrt(Math.pow(point1.x - point2.x, 2) + Math.pow(point1.y - point2.y, 2));\n                var height = area / bottom * 2;\n    \n                return height;\n            };\n    \n            var firstPoint = 0;\n            var lastPoint = points.length - 1;\n            var pointIndexsToKeep = [];\n    \n            //Add the first and last index to the keepers\n            pointIndexsToKeep.push(firstPoint);\n            pointIndexsToKeep.push(lastPoint);\n    \n            //The first and the last point cannot be the same\n            while (points[firstPoint].equals(points[lastPoint])) {\n                lastPoint--;\n                //Addition: the first point not equal to first point in the LineString is kept as well\n                pointIndexsToKeep.push(lastPoint);\n            }\n    \n            douglasPeuckerReduction(points, firstPoint, lastPoint, tolerance);\n            var returnPoints = [];\n            pointIndexsToKeep.sort(compareNumbers);\n            for (var index = 0; index < pointIndexsToKeep.length; index++) {\n                returnPoints.push(points[pointIndexsToKeep[index]]);\n            }\n            return new OpenLayers.Geometry.LineString(returnPoints);\n    \n        }\n        else {\n            return this;\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Geometry.LineString\"\n});\n\n\n/**\n * Function: OpenLayers.Geometry.LineString.geodesic\n *\n * Parameters:\n * interpolate - {function(number): OpenLayers.Geometry.Point} Interpolate\n *     function.\n * transform - {function(OpenLayers.Geometry.Point): OpenLayers.Geometry.Point}\n *     Transform from longitude/latitude to projected coordinates.\n * squaredTolerance - {number} Squared tolerance.\n *\n * Returns:\n * {OpenLayers.Geometry.LineString}\n */\nOpenLayers.Geometry.LineString.geodesic =\n        function(interpolate, transform, squaredTolerance) {\n    // FIXME reduce garbage generation\n    // FIXME optimize stack operations\n\n    var components = [];\n\n    var geoA = interpolate(0);\n    var geoB = interpolate(1);\n\n    var a = transform(geoA);\n    var b = transform(geoB);\n\n    var geoStack = [geoB, geoA];\n    var stack = [b, a];\n    var fractionStack = [1, 0];\n\n    var fractions = {};\n\n    var maxIterations = 1e5;\n    var geoM, m, fracA, fracB, fracM, key;\n\n    while (--maxIterations > 0 && fractionStack.length > 0) {\n        // Pop the a coordinate off the stack\n        fracA = fractionStack.pop();\n        geoA = geoStack.pop();\n        a = stack.pop();\n        // Add the a coordinate if it has not been added yet\n        key = fracA.toString();\n        if (!(key in fractions)) {\n            components.push(a);\n            fractions[key] = true;\n        }\n        // Pop the b coordinate off the stack\n        fracB = fractionStack.pop();\n        geoB = geoStack.pop();\n        b = stack.pop();\n        // Find the m point between the a and b coordinates\n        fracM = (fracA + fracB) / 2;\n        geoM = interpolate(fracM);\n        m = transform(geoM);\n        if (OpenLayers.Geometry.distanceSquaredToSegment(m, {x1: a.x, y1: a.y,\n                x2: b.x, y2: b.y}).distance < squaredTolerance) {\n            // If the m point is sufficiently close to the straight line, then\n            // we discard it. Just use the b coordinate and move on to the next\n            // line segment.\n            components.push(b);\n            key = fracB.toString();\n            fractions[key] = true;\n        } else {\n            // Otherwise, we need to subdivide the current line segment.\n            // Split it into two and push the two line segments onto the stack.\n            fractionStack.push(fracB, fracM, fracM, fracA);\n            stack.push(b, m, m, a);\n            geoStack.push(geoB, geoM, geoM, geoA);\n        }\n    }\n\n    return new OpenLayers.Geometry.LineString(components);\n};\n\n\n/**\n * Function: OpenLayers.Geometry.LineString.geodesicMeridian\n * Generate a meridian (line at constant longitude).\n *\n * Parameters:\n * lon - {number} Longitude.\n * lat1 - {number} Latitude 1.\n * lat2 - {number} Latitude 2.\n * projection - {OpenLayers.Projection} Projection.\n * squaredTolerance - {number} Squared tolerance.\n *\n * Returns:\n * {OpenLayers.Geometry.LineString} Line geometry for the meridian at <lon>.\n */\nOpenLayers.Geometry.LineString.geodesicMeridian =\n        function(lon, lat1, lat2, projection, squaredTolerance) {\n    var epsg4326Projection = new OpenLayers.Projection('EPSG:4326');\n    return OpenLayers.Geometry.LineString.geodesic(\n        function(frac) {\n            return new OpenLayers.Geometry.Point(\n                    lon, lat1 + ((lat2 - lat1) * frac));\n        },\n        function(point) {\n            return point.transform(epsg4326Projection, projection);\n        },\n        squaredTolerance\n  );\n};\n\n\n/**\n * Function: OpenLayers.Geometry.LineString.geodesicParallel\n * Generate a parallel (line at constant latitude).\n *\n * Parameters:\n * lat - {number} Latitude.\n * lon1 - {number} Longitude 1.\n * lon2 - {number} Longitude 2.\n * projection {OpenLayers.Projection} Projection.\n * squaredTolerance - {number} Squared tolerance.\n *\n * Returns:\n * {OpenLayers.Geometry.LineString} Line geometry for the parallel at <lat>.\n */\nOpenLayers.Geometry.LineString.geodesicParallel =\n        function(lat, lon1, lon2, projection, squaredTolerance) {\n    var epsg4326Projection = new OpenLayers.Projection('EPSG:4326');\n    return OpenLayers.Geometry.LineString.geodesic(\n        function(frac) {\n            return new OpenLayers.Geometry.Point(\n                    lon1 + ((lon2 - lon1) * frac), lat);\n        },\n        function(point) {\n            return point.transform(epsg4326Projection, projection);\n        },\n        squaredTolerance\n    );\n};\n\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Geometry/LineString.js\n */\n\n/**\n * Class: OpenLayers.Geometry.LinearRing\n * \n * A Linear Ring is a special LineString which is closed. It closes itself \n * automatically on every addPoint/removePoint by adding a copy of the first\n * point as the last point. \n * \n * Also, as it is the first in the line family to close itself, a getArea()\n * function is defined to calculate the enclosed area of the linearRing\n * \n * Inherits:\n *  - <OpenLayers.Geometry.LineString>\n */\nOpenLayers.Geometry.LinearRing = OpenLayers.Class(\n  OpenLayers.Geometry.LineString, {\n\n    /**\n     * Property: componentTypes\n     * {Array(String)} An array of class names representing the types of \n     *                 components that the collection can include.  A null \n     *                 value means the component types are not restricted.\n     */\n    componentTypes: [\"OpenLayers.Geometry.Point\"],\n\n    /**\n     * Constructor: OpenLayers.Geometry.LinearRing\n     * Linear rings are constructed with an array of points.  This array\n     *     can represent a closed or open ring.  If the ring is open (the last\n     *     point does not equal the first point), the constructor will close\n     *     the ring.  If the ring is already closed (the last point does equal\n     *     the first point), it will be left closed.\n     * \n     * Parameters:\n     * points - {Array(<OpenLayers.Geometry.Point>)} points\n     */\n\n    /**\n     * APIMethod: addComponent\n     * Adds a point to geometry components.  If the point is to be added to\n     *     the end of the components array and it is the same as the last point\n     *     already in that array, the duplicate point is not added.  This has \n     *     the effect of closing the ring if it is not already closed, and \n     *     doing the right thing if it is already closed.  This behavior can \n     *     be overridden by calling the method with a non-null index as the \n     *     second argument.\n     *\n     * Parameters:\n     * point - {<OpenLayers.Geometry.Point>}\n     * index - {Integer} Index into the array to insert the component\n     * \n     * Returns:\n     * {Boolean} Was the Point successfully added?\n     */\n    addComponent: function(point, index) {\n        var added = false;\n\n        //remove last point\n        var lastPoint = this.components.pop();\n\n        // given an index, add the point\n        // without an index only add non-duplicate points\n        if(index != null || !point.equals(lastPoint)) {\n            added = OpenLayers.Geometry.Collection.prototype.addComponent.apply(this, \n                                                                    arguments);\n        }\n\n        //append copy of first point\n        var firstPoint = this.components[0];\n        OpenLayers.Geometry.Collection.prototype.addComponent.apply(this, \n                                                                [firstPoint]);\n        \n        return added;\n    },\n    \n    /**\n     * APIMethod: removeComponent\n     * Removes a point from geometry components.\n     *\n     * Parameters:\n     * point - {<OpenLayers.Geometry.Point>}\n     *\n     * Returns: \n     * {Boolean} The component was removed.\n     */\n    removeComponent: function(point) {\n        var removed = this.components && (this.components.length > 3);\n        if (removed) {\n            //remove last point\n            this.components.pop();\n            \n            //remove our point\n            OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this, \n                                                                    arguments);\n            //append copy of first point\n            var firstPoint = this.components[0];\n            OpenLayers.Geometry.Collection.prototype.addComponent.apply(this, \n                                                                [firstPoint]);\n        }\n        return removed;\n    },\n    \n    /**\n     * APIMethod: move\n     * Moves a geometry by the given displacement along positive x and y axes.\n     *     This modifies the position of the geometry and clears the cached\n     *     bounds.\n     *\n     * Parameters:\n     * x - {Float} Distance to move geometry in positive x direction. \n     * y - {Float} Distance to move geometry in positive y direction.\n     */\n    move: function(x, y) {\n        for(var i = 0, len=this.components.length; i<len - 1; i++) {\n            this.components[i].move(x, y);\n        }\n    },\n\n    /**\n     * APIMethod: rotate\n     * Rotate a geometry around some origin\n     *\n     * Parameters:\n     * angle - {Float} Rotation angle in degrees (measured counterclockwise\n     *                 from the positive x-axis)\n     * origin - {<OpenLayers.Geometry.Point>} Center point for the rotation\n     */\n    rotate: function(angle, origin) {\n        for(var i=0, len=this.components.length; i<len - 1; ++i) {\n            this.components[i].rotate(angle, origin);\n        }\n    },\n\n    /**\n     * APIMethod: resize\n     * Resize a geometry relative to some origin.  Use this method to apply\n     *     a uniform scaling to a geometry.\n     *\n     * Parameters:\n     * scale - {Float} Factor by which to scale the geometry.  A scale of 2\n     *                 doubles the size of the geometry in each dimension\n     *                 (lines, for example, will be twice as long, and polygons\n     *                 will have four times the area).\n     * origin - {<OpenLayers.Geometry.Point>} Point of origin for resizing\n     * ratio - {Float} Optional x:y ratio for resizing.  Default ratio is 1.\n     * \n     * Returns:\n     * {<OpenLayers.Geometry>} - The current geometry. \n     */\n    resize: function(scale, origin, ratio) {\n        for(var i=0, len=this.components.length; i<len - 1; ++i) {\n            this.components[i].resize(scale, origin, ratio);\n        }\n        return this;\n    },\n    \n    /**\n     * APIMethod: transform\n     * Reproject the components geometry from source to dest.\n     *\n     * Parameters:\n     * source - {<OpenLayers.Projection>}\n     * dest - {<OpenLayers.Projection>}\n     * \n     * Returns:\n     * {<OpenLayers.Geometry>} \n     */\n    transform: function(source, dest) {\n        if (source && dest) {\n            for (var i=0, len=this.components.length; i<len - 1; i++) {\n                var component = this.components[i];\n                component.transform(source, dest);\n            }\n            this.bounds = null;\n        }\n        return this;\n    },\n    \n    /**\n     * APIMethod: getCentroid\n     *\n     * Returns:\n     * {<OpenLayers.Geometry.Point>} The centroid of the collection\n     */\n    getCentroid: function() {\n        if (this.components) {\n            var len = this.components.length;\n            if (len > 0 && len <= 2) {\n                return this.components[0].clone();\n            } else if (len > 2) {\n                var sumX = 0.0;\n                var sumY = 0.0;\n                var x0 = this.components[0].x;\n                var y0 = this.components[0].y;\n                var area = -1 * this.getArea();\n                if (area != 0) {\n                    for (var i = 0; i < len - 1; i++) {\n                        var b = this.components[i];\n                        var c = this.components[i+1];\n                        sumX += (b.x + c.x - 2 * x0) * ((b.x - x0) * (c.y - y0) - (c.x - x0) * (b.y - y0));\n                        sumY += (b.y + c.y - 2 * y0) * ((b.x - x0) * (c.y - y0) - (c.x - x0) * (b.y - y0));\n                    }\n                    var x = x0 + sumX / (6 * area);\n                    var y = y0 + sumY / (6 * area);\n                } else {\n                    for (var i = 0; i < len - 1; i++) {\n                        sumX += this.components[i].x;\n                        sumY += this.components[i].y;\n                    }\n                    var x = sumX / (len - 1);\n                    var y = sumY / (len - 1);\n                }\n                return new OpenLayers.Geometry.Point(x, y);\n            } else {\n                return null;\n            }\n        }\n    },\n\n    /**\n     * APIMethod: getArea\n     * Note - The area is positive if the ring is oriented CW, otherwise\n     *         it will be negative.\n     * \n     * Returns:\n     * {Float} The signed area for a ring.\n     */\n    getArea: function() {\n        var area = 0.0;\n        if ( this.components && (this.components.length > 2)) {\n            var sum = 0.0;\n            for (var i=0, len=this.components.length; i<len - 1; i++) {\n                var b = this.components[i];\n                var c = this.components[i+1];\n                sum += (b.x + c.x) * (c.y - b.y);\n            }\n            area = - sum / 2.0;\n        }\n        return area;\n    },\n    \n    /**\n     * APIMethod: getGeodesicArea\n     * Calculate the approximate area of the polygon were it projected onto\n     *     the earth.  Note that this area will be positive if ring is oriented\n     *     clockwise, otherwise it will be negative.\n     *\n     * Parameters:\n     * projection - {<OpenLayers.Projection>} The spatial reference system\n     *     for the geometry coordinates.  If not provided, Geographic/WGS84 is\n     *     assumed.\n     * \n     * Reference:\n     * Robert. G. Chamberlain and William H. Duquette, \"Some Algorithms for\n     *     Polygons on a Sphere\", JPL Publication 07-03, Jet Propulsion\n     *     Laboratory, Pasadena, CA, June 2007 http://trs-new.jpl.nasa.gov/dspace/handle/2014/40409\n     *\n     * Returns:\n     * {float} The approximate signed geodesic area of the polygon in square\n     *     meters.\n     */\n    getGeodesicArea: function(projection) {\n        var ring = this;  // so we can work with a clone if needed\n        if(projection) {\n            var gg = new OpenLayers.Projection(\"EPSG:4326\");\n            if(!gg.equals(projection)) {\n                ring = this.clone().transform(projection, gg);\n            }\n        }\n        var area = 0.0;\n        var len = ring.components && ring.components.length;\n        if(len > 2) {\n            var p1, p2;\n            for(var i=0; i<len-1; i++) {\n                p1 = ring.components[i];\n                p2 = ring.components[i+1];\n                area += OpenLayers.Util.rad(p2.x - p1.x) *\n                        (2 + Math.sin(OpenLayers.Util.rad(p1.y)) +\n                        Math.sin(OpenLayers.Util.rad(p2.y)));\n            }\n            area = area * OpenLayers.Util.VincentyConstants.a * OpenLayers.Util.VincentyConstants.a / 2.0;\n        }\n        return area;\n    },\n    \n    /**\n     * Method: containsPoint\n     * Test if a point is inside a linear ring.  For the case where a point\n     *     is coincident with a linear ring edge, returns 1.  Otherwise,\n     *     returns boolean.\n     *\n     * Parameters:\n     * point - {<OpenLayers.Geometry.Point>}\n     *\n     * Returns:\n     * {Boolean | Number} The point is inside the linear ring.  Returns 1 if\n     *     the point is coincident with an edge.  Returns boolean otherwise.\n     */\n    containsPoint: function(point) {\n        var approx = OpenLayers.Number.limitSigDigs;\n        var digs = 14;\n        var px = approx(point.x, digs);\n        var py = approx(point.y, digs);\n        function getX(y, x1, y1, x2, y2) {\n            return (y - y2) * ((x2 - x1) / (y2 - y1)) + x2;\n        }\n        var numSeg = this.components.length - 1;\n        var start, end, x1, y1, x2, y2, cx, cy;\n        var crosses = 0;\n        for(var i=0; i<numSeg; ++i) {\n            start = this.components[i];\n            x1 = approx(start.x, digs);\n            y1 = approx(start.y, digs);\n            end = this.components[i + 1];\n            x2 = approx(end.x, digs);\n            y2 = approx(end.y, digs);\n            \n            /**\n             * The following conditions enforce five edge-crossing rules:\n             *    1. points coincident with edges are considered contained;\n             *    2. an upward edge includes its starting endpoint, and\n             *    excludes its final endpoint;\n             *    3. a downward edge excludes its starting endpoint, and\n             *    includes its final endpoint;\n             *    4. horizontal edges are excluded; and\n             *    5. the edge-ray intersection point must be strictly right\n             *    of the point P.\n             */\n            if(y1 == y2) {\n                // horizontal edge\n                if(py == y1) {\n                    // point on horizontal line\n                    if(x1 <= x2 && (px >= x1 && px <= x2) || // right or vert\n                       x1 >= x2 && (px <= x1 && px >= x2)) { // left or vert\n                        // point on edge\n                        crosses = -1;\n                        break;\n                    }\n                }\n                // ignore other horizontal edges\n                continue;\n            }\n            cx = approx(getX(py, x1, y1, x2, y2), digs);\n            if(cx == px) {\n                // point on line\n                if(y1 < y2 && (py >= y1 && py <= y2) || // upward\n                   y1 > y2 && (py <= y1 && py >= y2)) { // downward\n                    // point on edge\n                    crosses = -1;\n                    break;\n                }\n            }\n            if(cx <= px) {\n                // no crossing to the right\n                continue;\n            }\n            if(x1 != x2 && (cx < Math.min(x1, x2) || cx > Math.max(x1, x2))) {\n                // no crossing\n                continue;\n            }\n            if(y1 < y2 && (py >= y1 && py < y2) || // upward\n               y1 > y2 && (py < y1 && py >= y2)) { // downward\n                ++crosses;\n            }\n        }\n        var contained = (crosses == -1) ?\n            // on edge\n            1 :\n            // even (out) or odd (in)\n            !!(crosses & 1);\n\n        return contained;\n    },\n\n    /**\n     * APIMethod: intersects\n     * Determine if the input geometry intersects this one.\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} Any type of geometry.\n     *\n     * Returns:\n     * {Boolean} The input geometry intersects this one.\n     */\n    intersects: function(geometry) {\n        var intersect = false;\n        if(geometry.CLASS_NAME == \"OpenLayers.Geometry.Point\") {\n            intersect = this.containsPoint(geometry);\n        } else if(geometry.CLASS_NAME == \"OpenLayers.Geometry.LineString\") {\n            intersect = geometry.intersects(this);\n        } else if(geometry.CLASS_NAME == \"OpenLayers.Geometry.LinearRing\") {\n            intersect = OpenLayers.Geometry.LineString.prototype.intersects.apply(\n                this, [geometry]\n            );\n        } else {\n            // check for component intersections\n            for(var i=0, len=geometry.components.length; i<len; ++ i) {\n                intersect = geometry.components[i].intersects(this);\n                if(intersect) {\n                    break;\n                }\n            }\n        }\n        return intersect;\n    },\n\n    /**\n     * APIMethod: getVertices\n     * Return a list of all points in this geometry.\n     *\n     * Parameters:\n     * nodes - {Boolean} For lines, only return vertices that are\n     *     endpoints.  If false, for lines, only vertices that are not\n     *     endpoints will be returned.  If not provided, all vertices will\n     *     be returned.\n     *\n     * Returns:\n     * {Array} A list of all vertices in the geometry.\n     */\n    getVertices: function(nodes) {\n        return (nodes === true) ? [] : this.components.slice(0, this.components.length-1);\n    },\n\n    CLASS_NAME: \"OpenLayers.Geometry.LinearRing\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Geometry/Collection.js\n * @requires OpenLayers/Geometry/LinearRing.js\n */\n\n/**\n * Class: OpenLayers.Geometry.Polygon \n * Polygon is a collection of Geometry.LinearRings. \n * \n * Inherits from:\n *  - <OpenLayers.Geometry.Collection> \n *  - <OpenLayers.Geometry> \n */\nOpenLayers.Geometry.Polygon = OpenLayers.Class(\n  OpenLayers.Geometry.Collection, {\n\n    /**\n     * Property: componentTypes\n     * {Array(String)} An array of class names representing the types of\n     * components that the collection can include.  A null value means the\n     * component types are not restricted.\n     */\n    componentTypes: [\"OpenLayers.Geometry.LinearRing\"],\n\n    /**\n     * Constructor: OpenLayers.Geometry.Polygon\n     * Constructor for a Polygon geometry. \n     * The first ring (this.component[0])is the outer bounds of the polygon and \n     * all subsequent rings (this.component[1-n]) are internal holes.\n     *\n     *\n     * Parameters:\n     * components - {Array(<OpenLayers.Geometry.LinearRing>)} \n     */\n\n    /** \n     * APIMethod: getArea\n     * Calculated by subtracting the areas of the internal holes from the \n     *   area of the outer hole.\n     * \n     * Returns:\n     * {float} The area of the geometry\n     */\n    getArea: function() {\n        var area = 0.0;\n        if ( this.components && (this.components.length > 0)) {\n            area += Math.abs(this.components[0].getArea());\n            for (var i=1, len=this.components.length; i<len; i++) {\n                area -= Math.abs(this.components[i].getArea());\n            }\n        }\n        return area;\n    },\n\n    /** \n     * APIMethod: getGeodesicArea\n     * Calculate the approximate area of the polygon were it projected onto\n     *     the earth.\n     *\n     * Parameters:\n     * projection - {<OpenLayers.Projection>} The spatial reference system\n     *     for the geometry coordinates.  If not provided, Geographic/WGS84 is\n     *     assumed.\n     * \n     * Reference:\n     * Robert. G. Chamberlain and William H. Duquette, \"Some Algorithms for\n     *     Polygons on a Sphere\", JPL Publication 07-03, Jet Propulsion\n     *     Laboratory, Pasadena, CA, June 2007 http://trs-new.jpl.nasa.gov/dspace/handle/2014/40409\n     *\n     * Returns:\n     * {float} The approximate geodesic area of the polygon in square meters.\n     */\n    getGeodesicArea: function(projection) {\n        var area = 0.0;\n        if(this.components && (this.components.length > 0)) {\n            area += Math.abs(this.components[0].getGeodesicArea(projection));\n            for(var i=1, len=this.components.length; i<len; i++) {\n                area -= Math.abs(this.components[i].getGeodesicArea(projection));\n            }\n        }\n        return area;\n    },\n\n    /**\n     * Method: containsPoint\n     * Test if a point is inside a polygon.  Points on a polygon edge are\n     *     considered inside.\n     *\n     * Parameters:\n     * point - {<OpenLayers.Geometry.Point>}\n     *\n     * Returns:\n     * {Boolean | Number} The point is inside the polygon.  Returns 1 if the\n     *     point is on an edge.  Returns boolean otherwise.\n     */\n    containsPoint: function(point) {\n        var numRings = this.components.length;\n        var contained = false;\n        if(numRings > 0) {\n            // check exterior ring - 1 means on edge, boolean otherwise\n            contained = this.components[0].containsPoint(point);\n            if(contained !== 1) {\n                if(contained && numRings > 1) {\n                    // check interior rings\n                    var hole;\n                    for(var i=1; i<numRings; ++i) {\n                        hole = this.components[i].containsPoint(point);\n                        if(hole) {\n                            if(hole === 1) {\n                                // on edge\n                                contained = 1;\n                            } else {\n                                // in hole\n                                contained = false;\n                            }                            \n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return contained;\n    },\n\n    /**\n     * APIMethod: intersects\n     * Determine if the input geometry intersects this one.\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} Any type of geometry.\n     *\n     * Returns:\n     * {Boolean} The input geometry intersects this one.\n     */\n    intersects: function(geometry) {\n        var intersect = false;\n        var i, len;\n        if(geometry.CLASS_NAME == \"OpenLayers.Geometry.Point\") {\n            intersect = this.containsPoint(geometry);\n        } else if(geometry.CLASS_NAME == \"OpenLayers.Geometry.LineString\" ||\n                  geometry.CLASS_NAME == \"OpenLayers.Geometry.LinearRing\") {\n            // check if rings/linestrings intersect\n            for(i=0, len=this.components.length; i<len; ++i) {\n                intersect = geometry.intersects(this.components[i]);\n                if(intersect) {\n                    break;\n                }\n            }\n            if(!intersect) {\n                // check if this poly contains points of the ring/linestring\n                for(i=0, len=geometry.components.length; i<len; ++i) {\n                    intersect = this.containsPoint(geometry.components[i]);\n                    if(intersect) {\n                        break;\n                    }\n                }\n            }\n        } else {\n            for(i=0, len=geometry.components.length; i<len; ++ i) {\n                intersect = this.intersects(geometry.components[i]);\n                if(intersect) {\n                    break;\n                }\n            }\n        }\n        // check case where this poly is wholly contained by another\n        if(!intersect && geometry.CLASS_NAME == \"OpenLayers.Geometry.Polygon\") {\n            // exterior ring points will be contained in the other geometry\n            var ring = this.components[0];\n            for(i=0, len=ring.components.length; i<len; ++i) {\n                intersect = geometry.containsPoint(ring.components[i]);\n                if(intersect) {\n                    break;\n                }\n            }\n        }\n        return intersect;\n    },\n\n    /**\n     * APIMethod: distanceTo\n     * Calculate the closest distance between two geometries (on the x-y plane).\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} The target geometry.\n     * options - {Object} Optional properties for configuring the distance\n     *     calculation.\n     *\n     * Valid options:\n     * details - {Boolean} Return details from the distance calculation.\n     *     Default is false.\n     * edge - {Boolean} Calculate the distance from this geometry to the\n     *     nearest edge of the target geometry.  Default is true.  If true,\n     *     calling distanceTo from a geometry that is wholly contained within\n     *     the target will result in a non-zero distance.  If false, whenever\n     *     geometries intersect, calling distanceTo will return 0.  If false,\n     *     details cannot be returned.\n     *\n     * Returns:\n     * {Number | Object} The distance between this geometry and the target.\n     *     If details is true, the return will be an object with distance,\n     *     x0, y0, x1, and y1 properties.  The x0 and y0 properties represent\n     *     the coordinates of the closest point on this geometry. The x1 and y1\n     *     properties represent the coordinates of the closest point on the\n     *     target geometry.\n     */\n    distanceTo: function(geometry, options) {\n        var edge = !(options && options.edge === false);\n        var result;\n        // this is the case where we might not be looking for distance to edge\n        if(!edge && this.intersects(geometry)) {\n            result = 0;\n        } else {\n            result = OpenLayers.Geometry.Collection.prototype.distanceTo.apply(\n                this, [geometry, options]\n            );\n        }\n        return result;\n    },\n\n    CLASS_NAME: \"OpenLayers.Geometry.Polygon\"\n});\n\n/**\n * APIMethod: createRegularPolygon\n * Create a regular polygon around a radius. Useful for creating circles \n * and the like.\n *\n * Parameters:\n * origin - {<OpenLayers.Geometry.Point>} center of polygon.\n * radius - {Float} distance to vertex, in map units.\n * sides - {Integer} Number of sides. 20 approximates a circle.\n * rotation - {Float} original angle of rotation, in degrees.\n */\nOpenLayers.Geometry.Polygon.createRegularPolygon = function(origin, radius, sides, rotation) {  \n    var angle = Math.PI * ((1/sides) - (1/2));\n    if(rotation) {\n        angle += (rotation / 180) * Math.PI;\n    }\n    var rotatedAngle, x, y;\n    var points = [];\n    for(var i=0; i<sides; ++i) {\n        rotatedAngle = angle + (i * 2 * Math.PI / sides);\n        x = origin.x + (radius * Math.cos(rotatedAngle));\n        y = origin.y + (radius * Math.sin(rotatedAngle));\n        points.push(new OpenLayers.Geometry.Point(x, y));\n    }\n    var ring = new OpenLayers.Geometry.LinearRing(points);\n    return new OpenLayers.Geometry.Polygon([ring]);\n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Geometry/Collection.js\n * @requires OpenLayers/Geometry/LineString.js\n */\n\n/**\n * Class: OpenLayers.Geometry.MultiLineString\n * A MultiLineString is a geometry with multiple <OpenLayers.Geometry.LineString>\n * components.\n * \n * Inherits from:\n *  - <OpenLayers.Geometry.Collection>\n *  - <OpenLayers.Geometry> \n */\nOpenLayers.Geometry.MultiLineString = OpenLayers.Class(\n  OpenLayers.Geometry.Collection, {\n\n    /**\n     * Property: componentTypes\n     * {Array(String)} An array of class names representing the types of\n     * components that the collection can include.  A null value means the\n     * component types are not restricted.\n     */\n    componentTypes: [\"OpenLayers.Geometry.LineString\"],\n\n    /**\n     * Constructor: OpenLayers.Geometry.MultiLineString\n     * Constructor for a MultiLineString Geometry.\n     *\n     * Parameters: \n     * components - {Array(<OpenLayers.Geometry.LineString>)} \n     *\n     */\n    \n    /**\n     * Method: split\n     * Use this geometry (the source) to attempt to split a target geometry.\n     * \n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} The target geometry.\n     * options - {Object} Properties of this object will be used to determine\n     *     how the split is conducted.\n     *\n     * Valid options:\n     * mutual - {Boolean} Split the source geometry in addition to the target\n     *     geometry.  Default is false.\n     * edge - {Boolean} Allow splitting when only edges intersect.  Default is\n     *     true.  If false, a vertex on the source must be within the tolerance\n     *     distance of the intersection to be considered a split.\n     * tolerance - {Number} If a non-null value is provided, intersections\n     *     within the tolerance distance of an existing vertex on the source\n     *     will be assumed to occur at the vertex.\n     * \n     * Returns:\n     * {Array} A list of geometries (of this same type as the target) that\n     *     result from splitting the target with the source geometry.  The\n     *     source and target geometry will remain unmodified.  If no split\n     *     results, null will be returned.  If mutual is true and a split\n     *     results, return will be an array of two arrays - the first will be\n     *     all geometries that result from splitting the source geometry and\n     *     the second will be all geometries that result from splitting the\n     *     target geometry.\n     */\n    split: function(geometry, options) {\n        var results = null;\n        var mutual = options && options.mutual;\n        var splits, sourceLine, sourceLines, sourceSplit, targetSplit;\n        var sourceParts = [];\n        var targetParts = [geometry];\n        for(var i=0, len=this.components.length; i<len; ++i) {\n            sourceLine = this.components[i];\n            sourceSplit = false;\n            for(var j=0; j < targetParts.length; ++j) { \n                splits = sourceLine.split(targetParts[j], options);\n                if(splits) {\n                    if(mutual) {\n                        sourceLines = splits[0];\n                        for(var k=0, klen=sourceLines.length; k<klen; ++k) {\n                            if(k===0 && sourceParts.length) {\n                                sourceParts[sourceParts.length-1].addComponent(\n                                    sourceLines[k]\n                                );\n                            } else {\n                                sourceParts.push(\n                                    new OpenLayers.Geometry.MultiLineString([\n                                        sourceLines[k]\n                                    ])\n                                );\n                            }\n                        }\n                        sourceSplit = true;\n                        splits = splits[1];\n                    }\n                    if(splits.length) {\n                        // splice in new target parts\n                        splits.unshift(j, 1);\n                        Array.prototype.splice.apply(targetParts, splits);\n                        break;\n                    }\n                }\n            }\n            if(!sourceSplit) {\n                // source line was not hit\n                if(sourceParts.length) {\n                    // add line to existing multi\n                    sourceParts[sourceParts.length-1].addComponent(\n                        sourceLine.clone()\n                    );\n                } else {\n                    // create a fresh multi\n                    sourceParts = [\n                        new OpenLayers.Geometry.MultiLineString(\n                            sourceLine.clone()\n                        )\n                    ];\n                }\n            }\n        }\n        if(sourceParts && sourceParts.length > 1) {\n            sourceSplit = true;\n        } else {\n            sourceParts = [];\n        }\n        if(targetParts && targetParts.length > 1) {\n            targetSplit = true;\n        } else {\n            targetParts = [];\n        }\n        if(sourceSplit || targetSplit) {\n            if(mutual) {\n                results = [sourceParts, targetParts];\n            } else {\n                results = targetParts;\n            }\n        }\n        return results;\n    },\n    \n    /**\n     * Method: splitWith\n     * Split this geometry (the target) with the given geometry (the source).\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} A geometry used to split this\n     *     geometry (the source).\n     * options - {Object} Properties of this object will be used to determine\n     *     how the split is conducted.\n     *\n     * Valid options:\n     * mutual - {Boolean} Split the source geometry in addition to the target\n     *     geometry.  Default is false.\n     * edge - {Boolean} Allow splitting when only edges intersect.  Default is\n     *     true.  If false, a vertex on the source must be within the tolerance\n     *     distance of the intersection to be considered a split.\n     * tolerance - {Number} If a non-null value is provided, intersections\n     *     within the tolerance distance of an existing vertex on the source\n     *     will be assumed to occur at the vertex.\n     * \n     * Returns:\n     * {Array} A list of geometries (of this same type as the target) that\n     *     result from splitting the target with the source geometry.  The\n     *     source and target geometry will remain unmodified.  If no split\n     *     results, null will be returned.  If mutual is true and a split\n     *     results, return will be an array of two arrays - the first will be\n     *     all geometries that result from splitting the source geometry and\n     *     the second will be all geometries that result from splitting the\n     *     target geometry.\n     */\n    splitWith: function(geometry, options) {\n        var results = null;\n        var mutual = options && options.mutual;\n        var splits, targetLine, sourceLines, sourceSplit, targetSplit, sourceParts, targetParts;\n        if(geometry instanceof OpenLayers.Geometry.LineString) {\n            targetParts = [];\n            sourceParts = [geometry];\n            for(var i=0, len=this.components.length; i<len; ++i) {\n                targetSplit = false;\n                targetLine = this.components[i];\n                for(var j=0; j<sourceParts.length; ++j) {\n                    splits = sourceParts[j].split(targetLine, options);\n                    if(splits) {\n                        if(mutual) {\n                            sourceLines = splits[0];\n                            if(sourceLines.length) {\n                                // splice in new source parts\n                                sourceLines.unshift(j, 1);\n                                Array.prototype.splice.apply(sourceParts, sourceLines);\n                                j += sourceLines.length - 2;\n                            }\n                            splits = splits[1];\n                            if(splits.length === 0) {\n                                splits = [targetLine.clone()];\n                            }\n                        }\n                        for(var k=0, klen=splits.length; k<klen; ++k) {\n                            if(k===0 && targetParts.length) {\n                                targetParts[targetParts.length-1].addComponent(\n                                    splits[k]\n                                );\n                            } else {\n                                targetParts.push(\n                                    new OpenLayers.Geometry.MultiLineString([\n                                        splits[k]\n                                    ])\n                                );\n                            }\n                        }\n                        targetSplit = true;                    \n                    }\n                }\n                if(!targetSplit) {\n                    // target component was not hit\n                    if(targetParts.length) {\n                        // add it to any existing multi-line\n                        targetParts[targetParts.length-1].addComponent(\n                            targetLine.clone()\n                        );\n                    } else {\n                        // or start with a fresh multi-line\n                        targetParts = [\n                            new OpenLayers.Geometry.MultiLineString([\n                                targetLine.clone()\n                            ])\n                        ];\n                    }\n                    \n                }\n            }\n        } else {\n            results = geometry.split(this);\n        }\n        if(sourceParts && sourceParts.length > 1) {\n            sourceSplit = true;\n        } else {\n            sourceParts = [];\n        }\n        if(targetParts && targetParts.length > 1) {\n            targetSplit = true;\n        } else {\n            targetParts = [];\n        }\n        if(sourceSplit || targetSplit) {\n            if(mutual) {\n                results = [sourceParts, targetParts];\n            } else {\n                results = targetParts;\n            }\n        }\n        return results;\n    },\n\n    CLASS_NAME: \"OpenLayers.Geometry.MultiLineString\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Geometry/Collection.js\n * @requires OpenLayers/Geometry/Polygon.js\n */\n\n/**\n * Class: OpenLayers.Geometry.MultiPolygon\n * MultiPolygon is a geometry with multiple <OpenLayers.Geometry.Polygon>\n * components.  Create a new instance with the <OpenLayers.Geometry.MultiPolygon>\n * constructor.\n * \n * Inherits from:\n *  - <OpenLayers.Geometry.Collection>\n */\nOpenLayers.Geometry.MultiPolygon = OpenLayers.Class(\n  OpenLayers.Geometry.Collection, {\n\n    /**\n     * Property: componentTypes\n     * {Array(String)} An array of class names representing the types of\n     * components that the collection can include.  A null value means the\n     * component types are not restricted.\n     */\n    componentTypes: [\"OpenLayers.Geometry.Polygon\"],\n\n    /**\n     * Constructor: OpenLayers.Geometry.MultiPolygon\n     * Create a new MultiPolygon geometry\n     *\n     * Parameters:\n     * components - {Array(<OpenLayers.Geometry.Polygon>)} An array of polygons\n     *              used to generate the MultiPolygon\n     *\n     */\n\n    CLASS_NAME: \"OpenLayers.Geometry.MultiPolygon\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n */\n\n/**\n * Class: OpenLayers.Renderer \n * This is the base class for all renderers.\n *\n * This is based on a merger code written by Paul Spencer and Bertil Chapuis.\n * It is largely composed of virtual functions that are to be implemented\n * in technology-specific subclasses, but there is some generic code too.\n * \n * The functions that *are* implemented here merely deal with the maintenance\n *  of the size and extent variables, as well as the cached 'resolution' \n *  value. \n * \n * A note to the user that all subclasses should use getResolution() instead\n *  of directly accessing this.resolution in order to correctly use the \n *  caching system.\n *\n */\nOpenLayers.Renderer = OpenLayers.Class({\n\n    /** \n     * Property: container\n     * {DOMElement} \n     */\n    container: null,\n    \n    /**\n     * Property: root\n     * {DOMElement}\n     */\n    root: null,\n\n    /** \n     * Property: extent\n     * {<OpenLayers.Bounds>}\n     */\n    extent: null,\n\n    /**\n     * Property: locked\n     * {Boolean} If the renderer is currently in a state where many things\n     *     are changing, the 'locked' property is set to true. This means \n     *     that renderers can expect at least one more drawFeature event to be\n     *     called with the 'locked' property set to 'true': In some renderers,\n     *     this might make sense to use as a 'only update local information'\n     *     flag. \n     */  \n    locked: false,\n    \n    /** \n     * Property: size\n     * {<OpenLayers.Size>} \n     */\n    size: null,\n    \n    /**\n     * Property: resolution\n     * {Float} cache of current map resolution\n     */\n    resolution: null,\n    \n    /**\n     * Property: map  \n     * {<OpenLayers.Map>} Reference to the map -- this is set in Vector's setMap()\n     */\n    map: null,\n    \n    /**\n     * Property: featureDx\n     * {Number} Feature offset in x direction. Will be calculated for and\n     * applied to the current feature while rendering (see\n     * <calculateFeatureDx>).\n     */\n    featureDx: 0,\n    \n    /**\n     * Constructor: OpenLayers.Renderer \n     *\n     * Parameters:\n     * containerID - {<String>} \n     * options - {Object} options for this renderer. See sublcasses for\n     *     supported options.\n     */\n    initialize: function(containerID, options) {\n        this.container = OpenLayers.Util.getElement(containerID);\n        OpenLayers.Util.extend(this, options);\n    },\n    \n    /**\n     * APIMethod: destroy\n     */\n    destroy: function() {\n        this.container = null;\n        this.extent = null;\n        this.size =  null;\n        this.resolution = null;\n        this.map = null;\n    },\n\n    /**\n     * APIMethod: supported\n     * This should be overridden by specific subclasses\n     * \n     * Returns:\n     * {Boolean} Whether or not the browser supports the renderer class\n     */\n    supported: function() {\n        return false;\n    },    \n    \n    /**\n     * Method: setExtent\n     * Set the visible part of the layer.\n     *\n     * Resolution has probably changed, so we nullify the resolution \n     * cache (this.resolution) -- this way it will be re-computed when \n     * next it is needed.\n     * We nullify the resolution cache (this.resolution) if resolutionChanged\n     * is set to true - this way it will be re-computed on the next\n     * getResolution() request.\n     *\n     * Parameters:\n     * extent - {<OpenLayers.Bounds>}\n     * resolutionChanged - {Boolean}\n     *\n     * Returns:\n     * {Boolean} true to notify the layer that the new extent does not exceed\n     *     the coordinate range, and the features will not need to be redrawn.\n     *     False otherwise.\n     */\n    setExtent: function(extent, resolutionChanged) {\n        this.extent = extent.clone();\n        if (this.map.baseLayer && this.map.baseLayer.wrapDateLine) {\n            var ratio = extent.getWidth() / this.map.getExtent().getWidth(),\n                extent = extent.scale(1 / ratio);\n            this.extent = extent.wrapDateLine(this.map.getMaxExtent()).scale(ratio);\n        }\n        if (resolutionChanged) {\n            this.resolution = null;\n        }\n        return true;\n    },\n    \n    /**\n     * Method: setSize\n     * Sets the size of the drawing surface.\n     * \n     * Resolution has probably changed, so we nullify the resolution \n     * cache (this.resolution) -- this way it will be re-computed when \n     * next it is needed.\n     *\n     * Parameters:\n     * size - {<OpenLayers.Size>} \n     */\n    setSize: function(size) {\n        this.size = size.clone();\n        this.resolution = null;\n    },\n    \n    /** \n     * Method: getResolution\n     * Uses cached copy of resolution if available to minimize computing\n     * \n     * Returns:\n     * {Float} The current map's resolution\n     */\n    getResolution: function() {\n        this.resolution = this.resolution || this.map.getResolution();\n        return this.resolution;\n    },\n    \n    /**\n     * Method: drawFeature\n     * Draw the feature.  The optional style argument can be used\n     * to override the feature's own style.  This method should only\n     * be called from layer.drawFeature().\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} \n     * style - {<Object>}\n     * \n     * Returns:\n     * {Boolean} true if the feature has been drawn completely, false if not,\n     *     undefined if the feature had no geometry\n     */\n    drawFeature: function(feature, style) {\n        if(style == null) {\n            style = feature.style;\n        }\n        if (feature.geometry) {\n            var bounds = feature.geometry.getBounds();\n            if(bounds) {\n                var worldBounds;\n                if (this.map.baseLayer && this.map.baseLayer.wrapDateLine) {\n                    worldBounds = this.map.getMaxExtent();\n                }\n                if (!bounds.intersectsBounds(this.extent, {worldBounds: worldBounds})) {\n                    style = {display: \"none\"};\n                } else {\n                    this.calculateFeatureDx(bounds, worldBounds);\n                }\n                var rendered = this.drawGeometry(feature.geometry, style, feature.id);\n                if(style.display != \"none\" && style.label && rendered !== false) {\n\n                    var location = feature.geometry.getCentroid(); \n                    if(style.labelXOffset || style.labelYOffset) {\n                        var xOffset = isNaN(style.labelXOffset) ? 0 : style.labelXOffset;\n                        var yOffset = isNaN(style.labelYOffset) ? 0 : style.labelYOffset;\n                        var res = this.getResolution();\n                        location.move(xOffset*res, yOffset*res);\n                    }\n                    this.drawText(feature.id, style, location);\n                } else {\n                    this.removeText(feature.id);\n                }\n                return rendered;\n            }\n        }\n    },\n\n    /**\n     * Method: calculateFeatureDx\n     * {Number} Calculates the feature offset in x direction. Looking at the\n     * center of the feature bounds and the renderer extent, we calculate how\n     * many world widths the two are away from each other. This distance is\n     * used to shift the feature as close as possible to the center of the\n     * current enderer extent, which ensures that the feature is visible in the\n     * current viewport.\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>} Bounds of the feature\n     * worldBounds - {<OpenLayers.Bounds>} Bounds of the world\n     */\n    calculateFeatureDx: function(bounds, worldBounds) {\n        this.featureDx = 0;\n        if (worldBounds) {\n            var worldWidth = worldBounds.getWidth(),\n                rendererCenterX = (this.extent.left + this.extent.right) / 2,\n                featureCenterX = (bounds.left + bounds.right) / 2,\n                worldsAway = Math.round((featureCenterX - rendererCenterX) / worldWidth);\n            this.featureDx = worldsAway * worldWidth;\n        }\n    },\n\n    /** \n     * Method: drawGeometry\n     * \n     * Draw a geometry.  This should only be called from the renderer itself.\n     * Use layer.drawFeature() from outside the renderer.\n     * virtual function\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} \n     * style - {Object} \n     * featureId - {<String>} \n     */\n    drawGeometry: function(geometry, style, featureId) {},\n        \n    /**\n     * Method: drawText\n     * Function for drawing text labels.\n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * featureId - {String}\n     * style -\n     * location - {<OpenLayers.Geometry.Point>}\n     */\n    drawText: function(featureId, style, location) {},\n\n    /**\n     * Method: removeText\n     * Function for removing text labels.\n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * featureId - {String}\n     */\n    removeText: function(featureId) {},\n    \n    /**\n     * Method: clear\n     * Clear all vectors from the renderer.\n     * virtual function.\n     */    \n    clear: function() {},\n\n    /**\n     * Method: getFeatureIdFromEvent\n     * Returns a feature id from an event on the renderer.  \n     * How this happens is specific to the renderer.  This should be\n     * called from layer.getFeatureFromEvent().\n     * Virtual function.\n     * \n     * Parameters:\n     * evt - {<OpenLayers.Event>} \n     *\n     * Returns:\n     * {String} A feature id or undefined.\n     */\n    getFeatureIdFromEvent: function(evt) {},\n    \n    /**\n     * Method: eraseFeatures \n     * This is called by the layer to erase features\n     * \n     * Parameters:\n     * features - {Array(<OpenLayers.Feature.Vector>)} \n     */\n    eraseFeatures: function(features) {\n        if(!(OpenLayers.Util.isArray(features))) {\n            features = [features];\n        }\n        for(var i=0, len=features.length; i<len; ++i) {\n            var feature = features[i];\n            this.eraseGeometry(feature.geometry, feature.id);\n            this.removeText(feature.id);\n        }\n    },\n    \n    /**\n     * Method: eraseGeometry\n     * Remove a geometry from the renderer (by id).\n     * virtual function.\n     * \n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} \n     * featureId - {String}\n     */\n    eraseGeometry: function(geometry, featureId) {},\n    \n    /**\n     * Method: moveRoot\n     * moves this renderer's root to a (different) renderer.\n     * To be implemented by subclasses that require a common renderer root for\n     * feature selection.\n     * \n     * Parameters:\n     * renderer - {<OpenLayers.Renderer>} target renderer for the moved root\n     */\n    moveRoot: function(renderer) {},\n\n    /**\n     * Method: getRenderLayerId\n     * Gets the layer that this renderer's output appears on. If moveRoot was\n     * used, this will be different from the id of the layer containing the\n     * features rendered by this renderer.\n     * \n     * Returns:\n     * {String} the id of the output layer.\n     */\n    getRenderLayerId: function() {\n        return this.container.id;\n    },\n    \n    /**\n     * Method: applyDefaultSymbolizer\n     * \n     * Parameters:\n     * symbolizer - {Object}\n     * \n     * Returns:\n     * {Object}\n     */\n    applyDefaultSymbolizer: function(symbolizer) {\n        var result = OpenLayers.Util.extend({},\n            OpenLayers.Renderer.defaultSymbolizer);\n        if(symbolizer.stroke === false) {\n            delete result.strokeWidth;\n            delete result.strokeColor;\n        }\n        if(symbolizer.fill === false) {\n            delete result.fillColor;\n        }\n        OpenLayers.Util.extend(result, symbolizer);\n        return result;\n    },\n\n    CLASS_NAME: \"OpenLayers.Renderer\"\n});\n\n/**\n * Constant: OpenLayers.Renderer.defaultSymbolizer\n * {Object} Properties from this symbolizer will be applied to symbolizers\n *     with missing properties. This can also be used to set a global\n *     symbolizer default in OpenLayers. To be SLD 1.x compliant, add the\n *     following code before rendering any vector features:\n * (code)\n * OpenLayers.Renderer.defaultSymbolizer = {\n *     fillColor: \"#808080\",\n *     fillOpacity: 1,\n *     strokeColor: \"#000000\",\n *     strokeOpacity: 1,\n *     strokeWidth: 1,\n *     pointRadius: 3,\n *     graphicName: \"square\"\n * };\n * (end)\n */\nOpenLayers.Renderer.defaultSymbolizer = {\n    fillColor: \"#000000\",\n    strokeColor: \"#000000\",\n    strokeWidth: 2,\n    fillOpacity: 1,\n    strokeOpacity: 1,\n    pointRadius: 0,\n    labelAlign: 'cm'\n};\n    \n\n\n/**\n * Constant: OpenLayers.Renderer.symbol\n * Coordinate arrays for well known (named) symbols.\n */\nOpenLayers.Renderer.symbol = {\n    \"star\": [350,75, 379,161, 469,161, 397,215, 423,301, 350,250, 277,301,\n            303,215, 231,161, 321,161, 350,75],\n    \"cross\": [4,0, 6,0, 6,4, 10,4, 10,6, 6,6, 6,10, 4,10, 4,6, 0,6, 0,4, 4,4,\n            4,0],\n    \"x\": [0,0, 25,0, 50,35, 75,0, 100,0, 65,50, 100,100, 75,100, 50,65, 25,100, 0,100, 35,50, 0,0],\n    \"square\": [0,0, 0,1, 1,1, 1,0, 0,0],\n    \"triangle\": [0,10, 10,10, 5,0, 0,10]\n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Renderer.js\n */\n\n/**\n * Class: OpenLayers.ElementsIndexer\n * This class takes care of figuring out which order elements should be\n *     placed in the DOM based on given indexing methods. \n */\nOpenLayers.ElementsIndexer = OpenLayers.Class({\n   \n    /**\n     * Property: maxZIndex\n     * {Integer} This is the largest-most z-index value for a node\n     *     contained within the indexer.\n     */\n    maxZIndex: null,\n    \n    /**\n     * Property: order\n     * {Array<String>} This is an array of node id's stored in the\n     *     order that they should show up on screen. Id's higher up in the\n     *     array (higher array index) represent nodes with higher z-indeces.\n     */\n    order: null, \n    \n    /**\n     * Property: indices\n     * {Object} This is a hash that maps node ids to their z-index value\n     *     stored in the indexer. This is done to make finding a nodes z-index \n     *     value O(1).\n     */\n    indices: null,\n    \n    /**\n     * Property: compare\n     * {Function} This is the function used to determine placement of\n     *     of a new node within the indexer. If null, this defaults to to\n     *     the Z_ORDER_DRAWING_ORDER comparison method.\n     */\n    compare: null,\n    \n    /**\n     * APIMethod: initialize\n     * Create a new indexer with \n     * \n     * Parameters:\n     * yOrdering - {Boolean} Whether to use y-ordering.\n     */\n    initialize: function(yOrdering) {\n\n        this.compare = yOrdering ? \n            OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_Y_ORDER :\n            OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_DRAWING_ORDER;\n\n        this.clear();\n    },\n    \n    /**\n     * APIMethod: insert\n     * Insert a new node into the indexer. In order to find the correct \n     *     positioning for the node to be inserted, this method uses a binary \n     *     search. This makes inserting O(log(n)). \n     * \n     * Parameters:\n     * newNode - {DOMElement} The new node to be inserted.\n     * \n     * Returns\n     * {DOMElement} the node before which we should insert our newNode, or\n     *     null if newNode can just be appended.\n     */\n    insert: function(newNode) {\n        // If the node is known to the indexer, remove it so we can\n        // recalculate where it should go.\n        if (this.exists(newNode)) {\n            this.remove(newNode);\n        }\n        \n        var nodeId = newNode.id;\n        \n        this.determineZIndex(newNode);       \n\n        var leftIndex = -1;\n        var rightIndex = this.order.length;\n        var middle;\n\n        while (rightIndex - leftIndex > 1) {\n            middle = parseInt((leftIndex + rightIndex) / 2);\n            \n            var placement = this.compare(this, newNode,\n                OpenLayers.Util.getElement(this.order[middle]));\n            \n            if (placement > 0) {\n                leftIndex = middle;\n            } else {\n                rightIndex = middle;\n            } \n        }\n        \n        this.order.splice(rightIndex, 0, nodeId);\n        this.indices[nodeId] = this.getZIndex(newNode);\n        \n        // If the new node should be before another in the index\n        // order, return the node before which we have to insert the new one;\n        // else, return null to indicate that the new node can be appended.\n        return this.getNextElement(rightIndex);\n    },\n    \n    /**\n     * APIMethod: remove\n     * \n     * Parameters:\n     * node - {DOMElement} The node to be removed.\n     */\n    remove: function(node) {\n        var nodeId = node.id;\n        var arrayIndex = OpenLayers.Util.indexOf(this.order, nodeId);\n        if (arrayIndex >= 0) {\n            // Remove it from the order array, as well as deleting the node\n            // from the indeces hash.\n            this.order.splice(arrayIndex, 1);\n            delete this.indices[nodeId];\n            \n            // Reset the maxium z-index based on the last item in the \n            // order array.\n            if (this.order.length > 0) {\n                var lastId = this.order[this.order.length - 1];\n                this.maxZIndex = this.indices[lastId];\n            } else {\n                this.maxZIndex = 0;\n            }\n        }\n    },\n    \n    /**\n     * APIMethod: clear\n     */\n    clear: function() {\n        this.order = [];\n        this.indices = {};\n        this.maxZIndex = 0;\n    },\n    \n    /**\n     * APIMethod: exists\n     *\n     * Parameters:\n     * node - {DOMElement} The node to test for existence.\n     *\n     * Returns:\n     * {Boolean} Whether or not the node exists in the indexer?\n     */\n    exists: function(node) {\n        return (this.indices[node.id] != null);\n    },\n\n    /**\n     * APIMethod: getZIndex\n     * Get the z-index value for the current node from the node data itself.\n     * \n     * Parameters:\n     * node - {DOMElement} The node whose z-index to get.\n     * \n     * Returns:\n     * {Integer} The z-index value for the specified node (from the node \n     *     data itself).\n     */\n    getZIndex: function(node) {\n        return node._style.graphicZIndex;  \n    },\n    \n    /**\n     * Method: determineZIndex\n     * Determine the z-index for the current node if there isn't one, \n     *     and set the maximum value if we've found a new maximum.\n     * \n     * Parameters:\n     * node - {DOMElement} \n     */\n    determineZIndex: function(node) {\n        var zIndex = node._style.graphicZIndex;\n        \n        // Everything must have a zIndex. If none is specified,\n        // this means the user *must* (hint: assumption) want this\n        // node to succomb to drawing order. To enforce drawing order\n        // over all indexing methods, we'll create a new z-index that's\n        // greater than any currently in the indexer.\n        if (zIndex == null) {\n            zIndex = this.maxZIndex;\n            node._style.graphicZIndex = zIndex; \n        } else if (zIndex > this.maxZIndex) {\n            this.maxZIndex = zIndex;\n        }\n    },\n\n    /**\n     * APIMethod: getNextElement\n     * Get the next element in the order stack.\n     * \n     * Parameters:\n     * index - {Integer} The index of the current node in this.order.\n     * \n     * Returns:\n     * {DOMElement} the node following the index passed in, or\n     *     null.\n     */\n    getNextElement: function(index) {\n        for (var nextIndex = index + 1, nextElement = undefined;\n            (nextIndex < this.order.length) && (nextElement == undefined);\n            nextIndex++) {\n            nextElement = OpenLayers.Util.getElement(this.order[nextIndex]);\n        }\n        \n        return nextElement || null;\n    },\n    \n    CLASS_NAME: \"OpenLayers.ElementsIndexer\"\n});\n\n/**\n * Namespace: OpenLayers.ElementsIndexer.IndexingMethods\n * These are the compare methods for figuring out where a new node should be \n *     placed within the indexer. These methods are very similar to general \n *     sorting methods in that they return -1, 0, and 1 to specify the \n *     direction in which new nodes fall in the ordering.\n */\nOpenLayers.ElementsIndexer.IndexingMethods = {\n    \n    /**\n     * Method: Z_ORDER\n     * This compare method is used by other comparison methods.\n     *     It can be used individually for ordering, but is not recommended,\n     *     because it doesn't subscribe to drawing order.\n     * \n     * Parameters:\n     * indexer - {<OpenLayers.ElementsIndexer>}\n     * newNode - {DOMElement}\n     * nextNode - {DOMElement}\n     * \n     * Returns:\n     * {Integer}\n     */\n    Z_ORDER: function(indexer, newNode, nextNode) {\n        var newZIndex = indexer.getZIndex(newNode);\n\n        var returnVal = 0;\n        if (nextNode) {\n            var nextZIndex = indexer.getZIndex(nextNode);\n            returnVal = newZIndex - nextZIndex; \n        }\n        \n        return returnVal;\n    },\n\n    /**\n     * APIMethod: Z_ORDER_DRAWING_ORDER\n     * This method orders nodes by their z-index, but does so in a way\n     *     that, if there are other nodes with the same z-index, the newest \n     *     drawn will be the front most within that z-index. This is the \n     *     default indexing method.\n     * \n     * Parameters:\n     * indexer - {<OpenLayers.ElementsIndexer>}\n     * newNode - {DOMElement}\n     * nextNode - {DOMElement}\n     * \n     * Returns:\n     * {Integer}\n     */\n    Z_ORDER_DRAWING_ORDER: function(indexer, newNode, nextNode) {\n        var returnVal = OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER(\n            indexer, \n            newNode, \n            nextNode\n        );\n        \n        // Make Z_ORDER subscribe to drawing order by pushing it above\n        // all of the other nodes with the same z-index.\n        if (nextNode && returnVal == 0) {\n            returnVal = 1;\n        }\n        \n        return returnVal;\n    },\n\n    /**\n     * APIMethod: Z_ORDER_Y_ORDER\n     * This one should really be called Z_ORDER_Y_ORDER_DRAWING_ORDER, as it\n     *     best describes which ordering methods have precedence (though, the \n     *     name would be too long). This method orders nodes by their z-index, \n     *     but does so in a way that, if there are other nodes with the same \n     *     z-index, the nodes with the lower y position will be \"closer\" than \n     *     those with a higher y position. If two nodes have the exact same y \n     *     position, however, then this method will revert to using drawing  \n     *     order to decide placement.\n     * \n     * Parameters:\n     * indexer - {<OpenLayers.ElementsIndexer>}\n     * newNode - {DOMElement}\n     * nextNode - {DOMElement}\n     * \n     * Returns:\n     * {Integer}\n     */\n    Z_ORDER_Y_ORDER: function(indexer, newNode, nextNode) {\n        var returnVal = OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER(\n            indexer, \n            newNode, \n            nextNode\n        );\n        \n        if (nextNode && returnVal === 0) {            \n            var result = nextNode._boundsBottom - newNode._boundsBottom;\n            returnVal = (result === 0) ? 1 : result;\n        }\n        \n        return returnVal;       \n    }\n};\n\n/**\n * Class: OpenLayers.Renderer.Elements\n * This is another virtual class in that it should never be instantiated by \n *  itself as a Renderer. It exists because there is *tons* of shared \n *  functionality between different vector libraries which use nodes/elements\n *  as a base for rendering vectors. \n * \n * The highlevel bits of code that are implemented here are the adding and \n *  removing of geometries, which is essentially the same for any \n *  element-based renderer. The details of creating each node and drawing the\n *  paths are of course different, but the machinery is the same. \n * \n * Inherits:\n *  - <OpenLayers.Renderer>\n */\nOpenLayers.Renderer.Elements = OpenLayers.Class(OpenLayers.Renderer, {\n\n    /**\n     * Property: rendererRoot\n     * {DOMElement}\n     */\n    rendererRoot: null,\n    \n    /**\n     * Property: root\n     * {DOMElement}\n     */\n    root: null,\n    \n    /**\n     * Property: vectorRoot\n     * {DOMElement}\n     */\n    vectorRoot: null,\n\n    /**\n     * Property: textRoot\n     * {DOMElement}\n     */\n    textRoot: null,\n\n    /**\n     * Property: xmlns\n     * {String}\n     */    \n    xmlns: null,\n    \n    /**\n     * Property: xOffset\n     * {Number} Offset to apply to the renderer viewport translation in x\n     * direction. If the renderer extent's center is on the right of the\n     * dateline (i.e. exceeds the world bounds), we shift the viewport to the\n     * left by one world width. This avoids that features disappear from the\n     * map viewport. Because our dateline handling logic in other places\n     * ensures that extents crossing the dateline always have a center\n     * exceeding the world bounds on the left, we need this offset to make sure\n     * that the same is true for the renderer extent in pixel space as well.\n     */\n    xOffset: 0,\n    \n    /**\n     * Property: rightOfDateLine\n     * {Boolean} Keeps track of the location of the map extent relative to the\n     * date line. The <setExtent> method compares this value (which is the one\n     * from the previous <setExtent> call) with the current position of the map\n     * extent relative to the date line and updates the xOffset when the extent\n     * has moved from one side of the date line to the other.\n     */\n    \n    /**\n     * Property: Indexer\n     * {<OpenLayers.ElementIndexer>} An instance of OpenLayers.ElementsIndexer \n     *     created upon initialization if the zIndexing or yOrdering options\n     *     passed to this renderer's constructor are set to true.\n     */\n    indexer: null, \n    \n    /**\n     * Constant: BACKGROUND_ID_SUFFIX\n     * {String}\n     */\n    BACKGROUND_ID_SUFFIX: \"_background\",\n    \n    /**\n     * Constant: LABEL_ID_SUFFIX\n     * {String}\n     */\n    LABEL_ID_SUFFIX: \"_label\",\n    \n    /**\n     * Constant: LABEL_OUTLINE_SUFFIX\n     * {String}\n     */\n    LABEL_OUTLINE_SUFFIX: \"_outline\",\n\n    /**\n     * Constructor: OpenLayers.Renderer.Elements\n     * \n     * Parameters:\n     * containerID - {String}\n     * options - {Object} options for this renderer. \n     *\n     * Supported options are:\n     *     yOrdering - {Boolean} Whether to use y-ordering\n     *     zIndexing - {Boolean} Whether to use z-indexing. Will be ignored\n     *         if yOrdering is set to true.\n     */\n    initialize: function(containerID, options) {\n        OpenLayers.Renderer.prototype.initialize.apply(this, arguments);\n\n        this.rendererRoot = this.createRenderRoot();\n        this.root = this.createRoot(\"_root\");\n        this.vectorRoot = this.createRoot(\"_vroot\");\n        this.textRoot = this.createRoot(\"_troot\");\n        \n        this.root.appendChild(this.vectorRoot);\n        this.root.appendChild(this.textRoot);\n        \n        this.rendererRoot.appendChild(this.root);\n        this.container.appendChild(this.rendererRoot);\n        \n        if(options && (options.zIndexing || options.yOrdering)) {\n            this.indexer = new OpenLayers.ElementsIndexer(options.yOrdering);\n        }\n    },\n    \n    /**\n     * Method: destroy\n     */\n    destroy: function() {\n\n        this.clear(); \n\n        this.rendererRoot = null;\n        this.root = null;\n        this.xmlns = null;\n\n        OpenLayers.Renderer.prototype.destroy.apply(this, arguments);\n    },\n    \n    /**\n     * Method: clear\n     * Remove all the elements from the root\n     */    \n    clear: function() {\n        var child;\n        var root = this.vectorRoot;\n        if (root) {\n            while (child = root.firstChild) {\n                root.removeChild(child);\n            }\n        }\n        root = this.textRoot;\n        if (root) {\n            while (child = root.firstChild) {\n                root.removeChild(child);\n            }\n        }\n        if (this.indexer) {\n            this.indexer.clear();\n        }\n    },\n    \n    /**\n     * Method: setExtent\n     * Set the visible part of the layer.\n     *\n     * Parameters:\n     * extent - {<OpenLayers.Bounds>}\n     * resolutionChanged - {Boolean}\n     *\n     * Returns:\n     * {Boolean} true to notify the layer that the new extent does not exceed\n     *     the coordinate range, and the features will not need to be redrawn.\n     *     False otherwise.\n     */\n    setExtent: function(extent, resolutionChanged) {\n        var coordSysUnchanged = OpenLayers.Renderer.prototype.setExtent.apply(this, arguments);\n        var resolution = this.getResolution();\n        if (this.map.baseLayer && this.map.baseLayer.wrapDateLine) {\n            var rightOfDateLine,\n                ratio = extent.getWidth() / this.map.getExtent().getWidth(),\n                extent = extent.scale(1 / ratio),\n                world = this.map.getMaxExtent();\n            if (world.right > extent.left && world.right < extent.right) {\n                rightOfDateLine = true;\n            } else if (world.left > extent.left && world.left < extent.right) {\n                rightOfDateLine = false;\n            }\n            if (rightOfDateLine !== this.rightOfDateLine || resolutionChanged) {\n                coordSysUnchanged = false;\n                this.xOffset = rightOfDateLine === true ?\n                    world.getWidth() / resolution : 0;\n            }\n            this.rightOfDateLine = rightOfDateLine;\n        }\n        return coordSysUnchanged;\n    },\n\n    /** \n     * Method: getNodeType\n     * This function is in charge of asking the specific renderer which type\n     *     of node to create for the given geometry and style. All geometries\n     *     in an Elements-based renderer consist of one node and some\n     *     attributes. We have the nodeFactory() function which creates a node\n     *     for us, but it takes a 'type' as input, and that is precisely what\n     *     this function tells us.  \n     *  \n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     * style - {Object}\n     * \n     * Returns:\n     * {String} The corresponding node type for the specified geometry\n     */\n    getNodeType: function(geometry, style) { },\n\n    /** \n     * Method: drawGeometry \n     * Draw the geometry, creating new nodes, setting paths, setting style,\n     *     setting featureId on the node.  This method should only be called\n     *     by the renderer itself.\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     * style - {Object}\n     * featureId - {String}\n     * \n     * Returns:\n     * {Boolean} true if the geometry has been drawn completely; null if\n     *     incomplete; false otherwise\n     */\n    drawGeometry: function(geometry, style, featureId) {\n        var className = geometry.CLASS_NAME;\n        var rendered = true;\n        if ((className == \"OpenLayers.Geometry.Collection\") ||\n            (className == \"OpenLayers.Geometry.MultiPoint\") ||\n            (className == \"OpenLayers.Geometry.MultiLineString\") ||\n            (className == \"OpenLayers.Geometry.MultiPolygon\")) {\n            for (var i = 0, len=geometry.components.length; i<len; i++) {\n                rendered = this.drawGeometry(\n                    geometry.components[i], style, featureId) && rendered;\n            }\n            return rendered;\n        }\n\n        rendered = false;\n        var removeBackground = false;\n        if (style.display != \"none\") {\n            if (style.backgroundGraphic) {\n                this.redrawBackgroundNode(geometry.id, geometry, style,\n                    featureId);\n            } else {\n                removeBackground = true;\n            }\n            rendered = this.redrawNode(geometry.id, geometry, style,\n                featureId);\n        }\n        if (rendered == false) {\n            var node = document.getElementById(geometry.id);\n            if (node) {\n                if (node._style.backgroundGraphic) {\n                    removeBackground = true;\n                }\n                node.parentNode.removeChild(node);\n            }\n        }\n        if (removeBackground) {\n            var node = document.getElementById(\n                geometry.id + this.BACKGROUND_ID_SUFFIX);\n            if (node) {\n                node.parentNode.removeChild(node);\n            }\n        }\n        return rendered;\n    },\n    \n    /**\n     * Method: redrawNode\n     * \n     * Parameters:\n     * id - {String}\n     * geometry - {<OpenLayers.Geometry>}\n     * style - {Object}\n     * featureId - {String}\n     * \n     * Returns:\n     * {Boolean} true if the complete geometry could be drawn, null if parts of\n     *     the geometry could not be drawn, false otherwise\n     */\n    redrawNode: function(id, geometry, style, featureId) {\n        style = this.applyDefaultSymbolizer(style);\n        // Get the node if it's already on the map.\n        var node = this.nodeFactory(id, this.getNodeType(geometry, style));\n        \n        // Set the data for the node, then draw it.\n        node._featureId = featureId;\n        node._boundsBottom = geometry.getBounds().bottom;\n        node._geometryClass = geometry.CLASS_NAME;\n        node._style = style;\n\n        var drawResult = this.drawGeometryNode(node, geometry, style);\n        if(drawResult === false) {\n            return false;\n        }\n         \n        node = drawResult.node;\n        \n        // Insert the node into the indexer so it can show us where to\n        // place it. Note that this operation is O(log(n)). If there's a\n        // performance problem (when dragging, for instance) this is\n        // likely where it would be.\n        if (this.indexer) {\n            var insert = this.indexer.insert(node);\n            if (insert) {\n                this.vectorRoot.insertBefore(node, insert);\n            } else {\n                this.vectorRoot.appendChild(node);\n            }\n        } else {\n            // if there's no indexer, simply append the node to root,\n            // but only if the node is a new one\n            if (node.parentNode !== this.vectorRoot){ \n                this.vectorRoot.appendChild(node);\n            }\n        }\n        \n        this.postDraw(node);\n        \n        return drawResult.complete;\n    },\n    \n    /**\n     * Method: redrawBackgroundNode\n     * Redraws the node using special 'background' style properties. Basically\n     *     just calls redrawNode(), but instead of directly using the \n     *     'externalGraphic', 'graphicXOffset', 'graphicYOffset', and \n     *     'graphicZIndex' properties directly from the specified 'style' \n     *     parameter, we create a new style object and set those properties \n     *     from the corresponding 'background'-prefixed properties from \n     *     specified 'style' parameter.\n     * \n     * Parameters:\n     * id - {String}\n     * geometry - {<OpenLayers.Geometry>}\n     * style - {Object}\n     * featureId - {String}\n     * \n     * Returns:\n     * {Boolean} true if the complete geometry could be drawn, null if parts of\n     *     the geometry could not be drawn, false otherwise\n     */\n    redrawBackgroundNode: function(id, geometry, style, featureId) {\n        var backgroundStyle = OpenLayers.Util.extend({}, style);\n        \n        // Set regular style attributes to apply to the background styles.\n        backgroundStyle.externalGraphic = backgroundStyle.backgroundGraphic;\n        backgroundStyle.graphicXOffset = backgroundStyle.backgroundXOffset;\n        backgroundStyle.graphicYOffset = backgroundStyle.backgroundYOffset;\n        backgroundStyle.graphicZIndex = backgroundStyle.backgroundGraphicZIndex;\n        backgroundStyle.graphicWidth = backgroundStyle.backgroundWidth || backgroundStyle.graphicWidth;\n        backgroundStyle.graphicHeight = backgroundStyle.backgroundHeight || backgroundStyle.graphicHeight;\n        \n        // Erase background styles.\n        backgroundStyle.backgroundGraphic = null;\n        backgroundStyle.backgroundXOffset = null;\n        backgroundStyle.backgroundYOffset = null;\n        backgroundStyle.backgroundGraphicZIndex = null;\n        \n        return this.redrawNode(\n            id + this.BACKGROUND_ID_SUFFIX, \n            geometry, \n            backgroundStyle, \n            null\n        );\n    },\n\n    /**\n     * Method: drawGeometryNode\n     * Given a node, draw a geometry on the specified layer.\n     *     node and geometry are required arguments, style is optional.\n     *     This method is only called by the render itself.\n     *\n     * Parameters:\n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * style - {Object}\n     * \n     * Returns:\n     * {Object} a hash with properties \"node\" (the drawn node) and \"complete\"\n     *     (null if parts of the geometry could not be drawn, false if nothing\n     *     could be drawn)\n     */\n    drawGeometryNode: function(node, geometry, style) {\n        style = style || node._style;\n\n        var options = {\n            'isFilled': style.fill === undefined ?\n                true :\n                style.fill,\n            'isStroked': style.stroke === undefined ?\n                !!style.strokeWidth :\n                style.stroke\n        };\n        var drawn;\n        switch (geometry.CLASS_NAME) {\n            case \"OpenLayers.Geometry.Point\":\n                if(style.graphic === false) {\n                    options.isFilled = false;\n                    options.isStroked = false;\n                }\n                drawn = this.drawPoint(node, geometry);\n                break;\n            case \"OpenLayers.Geometry.LineString\":\n                options.isFilled = false;\n                drawn = this.drawLineString(node, geometry);\n                break;\n            case \"OpenLayers.Geometry.LinearRing\":\n                drawn = this.drawLinearRing(node, geometry);\n                break;\n            case \"OpenLayers.Geometry.Polygon\":\n                drawn = this.drawPolygon(node, geometry);\n                break;\n            case \"OpenLayers.Geometry.Rectangle\":\n                drawn = this.drawRectangle(node, geometry);\n                break;\n            default:\n                break;\n        }\n\n        node._options = options; \n\n        //set style\n        //TBD simplify this\n        if (drawn != false) {\n            return {\n                node: this.setStyle(node, style, options, geometry),\n                complete: drawn\n            };\n        } else {\n            return false;\n        }\n    },\n    \n    /**\n     * Method: postDraw\n     * Things that have do be done after the geometry node is appended\n     *     to its parent node. To be overridden by subclasses.\n     * \n     * Parameters:\n     * node - {DOMElement}\n     */\n    postDraw: function(node) {},\n    \n    /**\n     * Method: drawPoint\n     * Virtual function for drawing Point Geometry. \n     *     Should be implemented by subclasses.\n     *     This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement} or false if the renderer could not draw the point\n     */ \n    drawPoint: function(node, geometry) {},\n\n    /**\n     * Method: drawLineString\n     * Virtual function for drawing LineString Geometry. \n     *     Should be implemented by subclasses.\n     *     This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement} or null if the renderer could not draw all components of\n     *     the linestring, or false if nothing could be drawn\n     */ \n    drawLineString: function(node, geometry) {},\n\n    /**\n     * Method: drawLinearRing\n     * Virtual function for drawing LinearRing Geometry. \n     *     Should be implemented by subclasses.\n     *     This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement} or null if the renderer could not draw all components\n     *     of the linear ring, or false if nothing could be drawn\n     */ \n    drawLinearRing: function(node, geometry) {},\n\n    /**\n     * Method: drawPolygon\n     * Virtual function for drawing Polygon Geometry. \n     *    Should be implemented by subclasses.\n     *    This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement} or null if the renderer could not draw all components\n     *     of the polygon, or false if nothing could be drawn\n     */ \n    drawPolygon: function(node, geometry) {},\n\n    /**\n     * Method: drawRectangle\n     * Virtual function for drawing Rectangle Geometry. \n     *     Should be implemented by subclasses.\n     *     This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement} or false if the renderer could not draw the rectangle\n     */ \n    drawRectangle: function(node, geometry) {},\n\n    /**\n     * Method: drawCircle\n     * Virtual function for drawing Circle Geometry. \n     *     Should be implemented by subclasses.\n     *     This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement} or false if the renderer could not draw the circle\n     */ \n    drawCircle: function(node, geometry) {},\n\n    /**\n     * Method: removeText\n     * Removes a label\n     * \n     * Parameters:\n     * featureId - {String}\n     */\n    removeText: function(featureId) {\n        var label = document.getElementById(featureId + this.LABEL_ID_SUFFIX);\n        if (label) {\n            this.textRoot.removeChild(label);\n        }\n        var outline = document.getElementById(featureId + this.LABEL_OUTLINE_SUFFIX);\n        if (outline) {\n            this.textRoot.removeChild(outline);\n        }\n    },\n\n    /**\n     * Method: getFeatureIdFromEvent\n     * \n     * Parameters:\n     * evt - {Object} An <OpenLayers.Event> object\n     *\n     * Returns:\n     * {String} A feature id or undefined.\n     */\n    getFeatureIdFromEvent: function(evt) {\n        var target = evt.target;\n        var useElement = target && target.correspondingUseElement;\n        var node = useElement ? useElement : (target || evt.srcElement);\n        return node._featureId;\n    },\n\n    /** \n     * Method: eraseGeometry\n     * Erase a geometry from the renderer. In the case of a multi-geometry, \n     *     we cycle through and recurse on ourselves. Otherwise, we look for a \n     *     node with the geometry.id, destroy its geometry, and remove it from\n     *     the DOM.\n     * \n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     * featureId - {String}\n     */\n    eraseGeometry: function(geometry, featureId) {\n        if ((geometry.CLASS_NAME == \"OpenLayers.Geometry.MultiPoint\") ||\n            (geometry.CLASS_NAME == \"OpenLayers.Geometry.MultiLineString\") ||\n            (geometry.CLASS_NAME == \"OpenLayers.Geometry.MultiPolygon\") ||\n            (geometry.CLASS_NAME == \"OpenLayers.Geometry.Collection\")) {\n            for (var i=0, len=geometry.components.length; i<len; i++) {\n                this.eraseGeometry(geometry.components[i], featureId);\n            }\n        } else {    \n            var element = OpenLayers.Util.getElement(geometry.id);\n            if (element && element.parentNode) {\n                if (element.geometry) {\n                    element.geometry.destroy();\n                    element.geometry = null;\n                }\n                element.parentNode.removeChild(element);\n\n                if (this.indexer) {\n                    this.indexer.remove(element);\n                }\n                \n                if (element._style.backgroundGraphic) {\n                    var backgroundId = geometry.id + this.BACKGROUND_ID_SUFFIX;\n                    var bElem = OpenLayers.Util.getElement(backgroundId);\n                    if (bElem && bElem.parentNode) {\n                        // No need to destroy the geometry since the element and the background\n                        // node share the same geometry.\n                        bElem.parentNode.removeChild(bElem);\n                    }\n                }\n            }\n        }\n    },\n\n    /** \n     * Method: nodeFactory\n     * Create new node of the specified type, with the (optional) specified id.\n     * \n     * If node already exists with same ID and a different type, we remove it\n     *     and then call ourselves again to recreate it.\n     * \n     * Parameters:\n     * id - {String}\n     * type - {String} type Kind of node to draw.\n     * \n     * Returns:\n     * {DOMElement} A new node of the given type and id.\n     */\n    nodeFactory: function(id, type) {\n        var node = OpenLayers.Util.getElement(id);\n        if (node) {\n            if (!this.nodeTypeCompare(node, type)) {\n                node.parentNode.removeChild(node);\n                node = this.nodeFactory(id, type);\n            }\n        } else {\n            node = this.createNode(type, id);\n        }\n        return node;\n    },\n    \n    /** \n     * Method: nodeTypeCompare\n     * \n     * Parameters:\n     * node - {DOMElement}\n     * type - {String} Kind of node\n     * \n     * Returns:\n     * {Boolean} Whether or not the specified node is of the specified type\n     *     This function must be overridden by subclasses.\n     */\n    nodeTypeCompare: function(node, type) {},\n    \n    /** \n     * Method: createNode\n     * \n     * Parameters:\n     * type - {String} Kind of node to draw.\n     * id - {String} Id for node.\n     * \n     * Returns:\n     * {DOMElement} A new node of the given type and id.\n     *     This function must be overridden by subclasses.\n     */\n    createNode: function(type, id) {},\n\n    /**\n     * Method: moveRoot\n     * moves this renderer's root to a different renderer.\n     * \n     * Parameters:\n     * renderer - {<OpenLayers.Renderer>} target renderer for the moved root\n     */\n    moveRoot: function(renderer) {\n        var root = this.root;\n        if(renderer.root.parentNode == this.rendererRoot) {\n            root = renderer.root;\n        }\n        root.parentNode.removeChild(root);\n        renderer.rendererRoot.appendChild(root);\n    },\n    \n    /**\n     * Method: getRenderLayerId\n     * Gets the layer that this renderer's output appears on. If moveRoot was\n     * used, this will be different from the id of the layer containing the\n     * features rendered by this renderer.\n     * \n     * Returns:\n     * {String} the id of the output layer.\n     */\n    getRenderLayerId: function() {\n        return this.root.parentNode.parentNode.id;\n    },\n    \n    /**\n     * Method: isComplexSymbol\n     * Determines if a symbol cannot be rendered using drawCircle\n     * \n     * Parameters:\n     * graphicName - {String}\n     * \n     * Returns\n     * {Boolean} true if the symbol is complex, false if not\n     */\n    isComplexSymbol: function(graphicName) {\n        return (graphicName != \"circle\") && !!graphicName;\n    },\n\n    CLASS_NAME: \"OpenLayers.Renderer.Elements\"\n});\n\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Renderer/Elements.js\n */\n\n/**\n * Class: OpenLayers.Renderer.SVG\n * \n * Inherits:\n *  - <OpenLayers.Renderer.Elements>\n */\nOpenLayers.Renderer.SVG = OpenLayers.Class(OpenLayers.Renderer.Elements, {\n\n    /** \n     * Property: xmlns\n     * {String}\n     */\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \n    /**\n     * Property: xlinkns\n     * {String}\n     */\n    xlinkns: \"http://www.w3.org/1999/xlink\",\n\n    /**\n     * Constant: MAX_PIXEL\n     * {Integer} Firefox has a limitation where values larger or smaller than  \n     *           about 15000 in an SVG document lock the browser up. This \n     *           works around it.\n     */\n    MAX_PIXEL: 15000,\n\n    /**\n     * Property: translationParameters\n     * {Object} Hash with \"x\" and \"y\" properties\n     */\n    translationParameters: null,\n    \n    /**\n     * Property: symbolMetrics\n     * {Object} Cache for symbol metrics according to their svg coordinate\n     *     space. This is an object keyed by the symbol's id, and values are\n     *     an array of [width, centerX, centerY].\n     */\n    symbolMetrics: null,\n    \n    /**\n     * Constructor: OpenLayers.Renderer.SVG\n     * \n     * Parameters:\n     * containerID - {String}\n     */\n    initialize: function(containerID) {\n        if (!this.supported()) { \n            return; \n        }\n        OpenLayers.Renderer.Elements.prototype.initialize.apply(this, \n                                                                arguments);\n        this.translationParameters = {x: 0, y: 0};\n        \n        this.symbolMetrics = {};\n    },\n\n    /**\n     * APIMethod: supported\n     * \n     * Returns:\n     * {Boolean} Whether or not the browser supports the SVG renderer\n     */\n    supported: function() {\n        var svgFeature = \"http://www.w3.org/TR/SVG11/feature#\";\n        return (document.implementation && \n           (document.implementation.hasFeature(\"org.w3c.svg\", \"1.0\") || \n            document.implementation.hasFeature(svgFeature + \"SVG\", \"1.1\") || \n            document.implementation.hasFeature(svgFeature + \"BasicStructure\", \"1.1\") ));\n    },    \n\n    /**\n     * Method: inValidRange\n     * See #669 for more information\n     *\n     * Parameters:\n     * x      - {Integer}\n     * y      - {Integer}\n     * xyOnly - {Boolean} whether or not to just check for x and y, which means\n     *     to not take the current translation parameters into account if true.\n     * \n     * Returns:\n     * {Boolean} Whether or not the 'x' and 'y' coordinates are in the  \n     *           valid range.\n     */ \n    inValidRange: function(x, y, xyOnly) {\n        var left = x + (xyOnly ? 0 : this.translationParameters.x);\n        var top = y + (xyOnly ? 0 : this.translationParameters.y);\n        return (left >= -this.MAX_PIXEL && left <= this.MAX_PIXEL &&\n                top >= -this.MAX_PIXEL && top <= this.MAX_PIXEL);\n    },\n\n    /**\n     * Method: setExtent\n     * \n     * Parameters:\n     * extent - {<OpenLayers.Bounds>}\n     * resolutionChanged - {Boolean}\n     * \n     * Returns:\n     * {Boolean} true to notify the layer that the new extent does not exceed\n     *     the coordinate range, and the features will not need to be redrawn.\n     *     False otherwise.\n     */\n    setExtent: function(extent, resolutionChanged) {\n        var coordSysUnchanged = OpenLayers.Renderer.Elements.prototype.setExtent.apply(this, arguments);\n        \n        var resolution = this.getResolution(),\n            left = -extent.left / resolution,\n            top = extent.top / resolution;\n\n        // If the resolution has changed, start over changing the corner, because\n        // the features will redraw.\n        if (resolutionChanged) {\n            this.left = left;\n            this.top = top;\n            // Set the viewbox\n            var extentString = \"0 0 \" + this.size.w + \" \" + this.size.h;\n\n            this.rendererRoot.setAttributeNS(null, \"viewBox\", extentString);\n            this.translate(this.xOffset, 0);\n            return true;\n        } else {\n            var inRange = this.translate(left - this.left + this.xOffset, top - this.top);\n            if (!inRange) {\n                // recenter the coordinate system\n                this.setExtent(extent, true);\n            }\n            return coordSysUnchanged && inRange;\n        }\n    },\n    \n    /**\n     * Method: translate\n     * Transforms the SVG coordinate system\n     * \n     * Parameters:\n     * x - {Float}\n     * y - {Float}\n     * \n     * Returns:\n     * {Boolean} true if the translation parameters are in the valid coordinates\n     *     range, false otherwise.\n     */\n    translate: function(x, y) {\n        if (!this.inValidRange(x, y, true)) {\n            return false;\n        } else {\n            var transformString = \"\";\n            if (x || y) {\n                transformString = \"translate(\" + x + \",\" + y + \")\";\n            }\n            this.root.setAttributeNS(null, \"transform\", transformString);\n            this.translationParameters = {x: x, y: y};\n            return true;\n        }\n    },\n\n    /**\n     * Method: setSize\n     * Sets the size of the drawing surface.\n     * \n     * Parameters:\n     * size - {<OpenLayers.Size>} The size of the drawing surface\n     */\n    setSize: function(size) {\n        OpenLayers.Renderer.prototype.setSize.apply(this, arguments);\n        \n        this.rendererRoot.setAttributeNS(null, \"width\", this.size.w);\n        this.rendererRoot.setAttributeNS(null, \"height\", this.size.h);\n    },\n\n    /** \n     * Method: getNodeType \n     * \n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     * style - {Object}\n     * \n     * Returns:\n     * {String} The corresponding node type for the specified geometry\n     */\n    getNodeType: function(geometry, style) {\n        var nodeType = null;\n        switch (geometry.CLASS_NAME) {\n            case \"OpenLayers.Geometry.Point\":\n                if (style.externalGraphic) {\n                    nodeType = \"image\";\n                } else if (this.isComplexSymbol(style.graphicName)) {\n                    nodeType = \"svg\";\n                } else {\n                    nodeType = \"circle\";\n                }\n                break;\n            case \"OpenLayers.Geometry.Rectangle\":\n                nodeType = \"rect\";\n                break;\n            case \"OpenLayers.Geometry.LineString\":\n                nodeType = \"polyline\";\n                break;\n            case \"OpenLayers.Geometry.LinearRing\":\n                nodeType = \"polygon\";\n                break;\n            case \"OpenLayers.Geometry.Polygon\":\n            case \"OpenLayers.Geometry.Curve\":\n                nodeType = \"path\";\n                break;\n            default:\n                break;\n        }\n        return nodeType;\n    },\n\n    /** \n     * Method: setStyle\n     * Use to set all the style attributes to a SVG node.\n     * \n     * Takes care to adjust stroke width and point radius to be\n     * resolution-relative\n     *\n     * Parameters:\n     * node - {SVGDomElement} An SVG element to decorate\n     * style - {Object}\n     * options - {Object} Currently supported options include \n     *                              'isFilled' {Boolean} and\n     *                              'isStroked' {Boolean}\n     */\n    setStyle: function(node, style, options) {\n        style = style  || node._style;\n        options = options || node._options;\n\n        var title = style.title || style.graphicTitle;\n        if (title) {\n            node.setAttributeNS(null, \"title\", title);\n            //Standards-conformant SVG\n            // Prevent duplicate nodes. See issue https://github.com/openlayers/ol2/issues/92 \n            var titleNode = node.getElementsByTagName(\"title\");\n            if (titleNode.length > 0) {\n                titleNode[0].firstChild.textContent = title;\n            } else {\n                var label = this.nodeFactory(null, \"title\");\n                label.textContent = title;\n                node.appendChild(label);\n            }\n        }\n\n        var r = parseFloat(node.getAttributeNS(null, \"r\"));\n        var widthFactor = 1;\n        var pos;\n        if (node._geometryClass == \"OpenLayers.Geometry.Point\" && r) {\n            node.style.visibility = \"\";\n            if (style.graphic === false) {\n                node.style.visibility = \"hidden\";\n            } else if (style.externalGraphic) {\n                pos = this.getPosition(node);\n                if (style.graphicWidth && style.graphicHeight) {\n                  node.setAttributeNS(null, \"preserveAspectRatio\", \"none\");\n                }\n                var width = style.graphicWidth || style.graphicHeight;\n                var height = style.graphicHeight || style.graphicWidth;\n                width = width ? width : style.pointRadius*2;\n                height = height ? height : style.pointRadius*2;\n                var xOffset = (style.graphicXOffset != undefined) ?\n                    style.graphicXOffset : -(0.5 * width);\n                var yOffset = (style.graphicYOffset != undefined) ?\n                    style.graphicYOffset : -(0.5 * height);\n\n                var opacity = style.graphicOpacity || style.fillOpacity;\n                \n                node.setAttributeNS(null, \"x\", (pos.x + xOffset).toFixed());\n                node.setAttributeNS(null, \"y\", (pos.y + yOffset).toFixed());\n                node.setAttributeNS(null, \"width\", width);\n                node.setAttributeNS(null, \"height\", height);\n                node.setAttributeNS(this.xlinkns, \"xlink:href\", style.externalGraphic);\n                node.setAttributeNS(null, \"style\", \"opacity: \"+opacity);\n                node.onclick = OpenLayers.Event.preventDefault;\n            } else if (this.isComplexSymbol(style.graphicName)) {\n                // the symbol viewBox is three times as large as the symbol\n                var offset = style.pointRadius * 3;\n                var size = offset * 2;\n                var src = this.importSymbol(style.graphicName);\n                pos = this.getPosition(node);\n                widthFactor = this.symbolMetrics[src.id][0] * 3 / size;\n                \n                // remove the node from the dom before we modify it. This\n                // prevents various rendering issues in Safari and FF\n                var parent = node.parentNode;\n                var nextSibling = node.nextSibling;\n                if(parent) {\n                    parent.removeChild(node);\n                }\n                \n                // The more appropriate way to implement this would be use/defs,\n                // but due to various issues in several browsers, it is safer to\n                // copy the symbols instead of referencing them. \n                // See e.g. ticket http://trac.osgeo.org/openlayers/ticket/2985 \n                // and this email thread\n                // http://osgeo-org.1803224.n2.nabble.com/Select-Control-Ctrl-click-on-Feature-with-a-graphicName-opens-new-browser-window-tc5846039.html\n                node.firstChild && node.removeChild(node.firstChild);\n                node.appendChild(src.firstChild.cloneNode(true));\n                node.setAttributeNS(null, \"viewBox\", src.getAttributeNS(null, \"viewBox\"));\n                \n                node.setAttributeNS(null, \"width\", size);\n                node.setAttributeNS(null, \"height\", size);\n                node.setAttributeNS(null, \"x\", pos.x - offset);\n                node.setAttributeNS(null, \"y\", pos.y - offset);\n                \n                // now that the node has all its new properties, insert it\n                // back into the dom where it was\n                if(nextSibling) {\n                    parent.insertBefore(node, nextSibling);\n                } else if(parent) {\n                    parent.appendChild(node);\n                }\n            } else {\n                node.setAttributeNS(null, \"r\", style.pointRadius);\n            }\n\n            var rotation = style.rotation;\n            \n            if ((rotation !== undefined || node._rotation !== undefined) && pos) {\n                node._rotation = rotation;\n                rotation |= 0;\n                if (node.nodeName !== \"svg\") { \n                    node.setAttributeNS(null, \"transform\", \n                        \"rotate(\" + rotation + \" \" + pos.x + \" \" + \n                        pos.y + \")\"); \n                } else {\n                    var metrics = this.symbolMetrics[src.id];\n                    node.firstChild.setAttributeNS(null, \"transform\", \"rotate(\" \n                        + rotation + \" \" \n                        + metrics[1] + \" \"\n                        + metrics[2] + \")\");\n                }\n            }\n        }\n        \n        if (options.isFilled) {\n            node.setAttributeNS(null, \"fill\", style.fillColor);\n            node.setAttributeNS(null, \"fill-opacity\", style.fillOpacity);\n        } else {\n            node.setAttributeNS(null, \"fill\", \"none\");\n        }\n\n        if (options.isStroked) {\n            node.setAttributeNS(null, \"stroke\", style.strokeColor);\n            node.setAttributeNS(null, \"stroke-opacity\", style.strokeOpacity);\n            node.setAttributeNS(null, \"stroke-width\", style.strokeWidth * widthFactor);\n            node.setAttributeNS(null, \"stroke-linecap\", style.strokeLinecap || \"round\");\n            // Hard-coded linejoin for now, to make it look the same as in VML.\n            // There is no strokeLinejoin property yet for symbolizers.\n            node.setAttributeNS(null, \"stroke-linejoin\", \"round\");\n            style.strokeDashstyle && node.setAttributeNS(null,\n                \"stroke-dasharray\", this.dashStyle(style, widthFactor));\n        } else {\n            node.setAttributeNS(null, \"stroke\", \"none\");\n        }\n        \n        if (style.pointerEvents) {\n            node.setAttributeNS(null, \"pointer-events\", style.pointerEvents);\n        }\n                \n        if (style.cursor != null) {\n            node.setAttributeNS(null, \"cursor\", style.cursor);\n        }\n        \n        return node;\n    },\n\n    /** \n     * Method: dashStyle\n     * \n     * Parameters:\n     * style - {Object}\n     * widthFactor - {Number}\n     * \n     * Returns:\n     * {String} A SVG compliant 'stroke-dasharray' value\n     */\n    dashStyle: function(style, widthFactor) {\n        var w = style.strokeWidth * widthFactor;\n        var str = style.strokeDashstyle;\n        switch (str) {\n            case 'solid':\n                return 'none';\n            case 'dot':\n                return [1, 4 * w].join();\n            case 'dash':\n                return [4 * w, 4 * w].join();\n            case 'dashdot':\n                return [4 * w, 4 * w, 1, 4 * w].join();\n            case 'longdash':\n                return [8 * w, 4 * w].join();\n            case 'longdashdot':\n                return [8 * w, 4 * w, 1, 4 * w].join();\n            default:\n                return OpenLayers.String.trim(str).replace(/\\s+/g, \",\");\n        }\n    },\n    \n    /** \n     * Method: createNode\n     * \n     * Parameters:\n     * type - {String} Kind of node to draw\n     * id - {String} Id for node\n     * \n     * Returns:\n     * {DOMElement} A new node of the given type and id\n     */\n    createNode: function(type, id) {\n        var node = document.createElementNS(this.xmlns, type);\n        if (id) {\n            node.setAttributeNS(null, \"id\", id);\n        }\n        return node;    \n    },\n    \n    /** \n     * Method: nodeTypeCompare\n     * \n     * Parameters:\n     * node - {SVGDomElement} An SVG element\n     * type - {String} Kind of node\n     * \n     * Returns:\n     * {Boolean} Whether or not the specified node is of the specified type\n     */\n    nodeTypeCompare: function(node, type) {\n        return (type == node.nodeName);\n    },\n   \n    /**\n     * Method: createRenderRoot\n     * \n     * Returns:\n     * {DOMElement} The specific render engine's root element\n     */\n    createRenderRoot: function() {\n        var svg = this.nodeFactory(this.container.id + \"_svgRoot\", \"svg\");\n        svg.style.display = \"block\";\n        return svg;\n    },\n\n    /**\n     * Method: createRoot\n     * \n     * Parameters:\n     * suffix - {String} suffix to append to the id\n     * \n     * Returns:\n     * {DOMElement}\n     */\n    createRoot: function(suffix) {\n        return this.nodeFactory(this.container.id + suffix, \"g\");\n    },\n\n    /**\n     * Method: createDefs\n     *\n     * Returns:\n     * {DOMElement} The element to which we'll add the symbol definitions\n     */\n    createDefs: function() {\n        var defs = this.nodeFactory(this.container.id + \"_defs\", \"defs\");\n        this.rendererRoot.appendChild(defs);\n        return defs;\n    },\n\n    /**************************************\n     *                                    *\n     *     GEOMETRY DRAWING FUNCTIONS     *\n     *                                    *\n     **************************************/\n\n    /**\n     * Method: drawPoint\n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement} or false if the renderer could not draw the point\n     */ \n    drawPoint: function(node, geometry) {\n        return this.drawCircle(node, geometry, 1);\n    },\n\n    /**\n     * Method: drawCircle\n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * radius - {Float}\n     * \n     * Returns:\n     * {DOMElement} or false if the renderer could not draw the circle\n     */\n    drawCircle: function(node, geometry, radius) {\n        var resolution = this.getResolution();\n        var x = ((geometry.x - this.featureDx) / resolution + this.left);\n        var y = (this.top - geometry.y / resolution);\n\n        if (this.inValidRange(x, y)) { \n            node.setAttributeNS(null, \"cx\", x);\n            node.setAttributeNS(null, \"cy\", y);\n            node.setAttributeNS(null, \"r\", radius);\n            return node;\n        } else {\n            return false;\n        }    \n            \n    },\n    \n    /**\n     * Method: drawLineString\n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement} or null if the renderer could not draw all components of\n     *     the linestring, or false if nothing could be drawn\n     */ \n    drawLineString: function(node, geometry) {\n        var componentsResult = this.getComponentsString(geometry.components);\n        if (componentsResult.path) {\n            node.setAttributeNS(null, \"points\", componentsResult.path);\n            return (componentsResult.complete ? node : null);  \n        } else {\n            return false;\n        }\n    },\n    \n    /**\n     * Method: drawLinearRing\n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement} or null if the renderer could not draw all components\n     *     of the linear ring, or false if nothing could be drawn\n     */ \n    drawLinearRing: function(node, geometry) {\n        var componentsResult = this.getComponentsString(geometry.components);\n        if (componentsResult.path) {\n            node.setAttributeNS(null, \"points\", componentsResult.path);\n            return (componentsResult.complete ? node : null);  \n        } else {\n            return false;\n        }\n    },\n    \n    /**\n     * Method: drawPolygon\n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement} or null if the renderer could not draw all components\n     *     of the polygon, or false if nothing could be drawn\n     */ \n    drawPolygon: function(node, geometry) {\n        var d = \"\";\n        var draw = true;\n        var complete = true;\n        var linearRingResult, path;\n        for (var j=0, len=geometry.components.length; j<len; j++) {\n            d += \" M\";\n            linearRingResult = this.getComponentsString(\n                geometry.components[j].components, \" \");\n            path = linearRingResult.path;\n            if (path) {\n                d += \" \" + path;\n                complete = linearRingResult.complete && complete;\n            } else {\n                draw = false;\n            }\n        }\n        d += \" z\";\n        if (draw) {\n            node.setAttributeNS(null, \"d\", d);\n            node.setAttributeNS(null, \"fill-rule\", \"evenodd\");\n            return complete ? node : null;\n        } else {\n            return false;\n        }    \n    },\n    \n    /**\n     * Method: drawRectangle\n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement} or false if the renderer could not draw the rectangle\n     */ \n    drawRectangle: function(node, geometry) {\n        var resolution = this.getResolution();\n        var x = ((geometry.x - this.featureDx) / resolution + this.left);\n        var y = (this.top - geometry.y / resolution);\n\n        if (this.inValidRange(x, y)) { \n            node.setAttributeNS(null, \"x\", x);\n            node.setAttributeNS(null, \"y\", y);\n            node.setAttributeNS(null, \"width\", geometry.width / resolution);\n            node.setAttributeNS(null, \"height\", geometry.height / resolution);\n            return node;\n        } else {\n            return false;\n        }\n    },\n    \n    /**\n     * Method: drawText\n     * This method is only called by the renderer itself.\n     *\n     * Parameters:\n     * featureId - {String}\n     * style -\n     * location - {<OpenLayers.Geometry.Point>}\n     */\n    drawText: function(featureId, style, location) {\n        var drawOutline = (!!style.labelOutlineWidth);\n        // First draw text in halo color and size and overlay the\n        // normal text afterwards\n        if (drawOutline) {\n            var outlineStyle = OpenLayers.Util.extend({}, style);\n            outlineStyle.fontColor = outlineStyle.labelOutlineColor;\n            outlineStyle.fontStrokeColor = outlineStyle.labelOutlineColor;\n            outlineStyle.fontStrokeWidth = style.labelOutlineWidth;\n            if (style.labelOutlineOpacity) {\n                outlineStyle.fontOpacity = style.labelOutlineOpacity;\n            }\n            delete outlineStyle.labelOutlineWidth;\n            this.drawText(featureId, outlineStyle, location);\n        }\n\n        var resolution = this.getResolution();\n\n        var x = ((location.x - this.featureDx) / resolution + this.left);\n        var y = (location.y / resolution - this.top);\n\n        var suffix = (drawOutline)?this.LABEL_OUTLINE_SUFFIX:this.LABEL_ID_SUFFIX;\n        var label = this.nodeFactory(featureId + suffix, \"text\");\n\n        label.setAttributeNS(null, \"x\", x);\n        label.setAttributeNS(null, \"y\", -y);\n\n        if (style.fontColor) {\n            label.setAttributeNS(null, \"fill\", style.fontColor);\n        }\n        if (style.fontStrokeColor) {\n            label.setAttributeNS(null, \"stroke\", style.fontStrokeColor);\n        }\n        if (style.fontStrokeWidth) {\n            label.setAttributeNS(null, \"stroke-width\", style.fontStrokeWidth);\n        }\n        if (style.fontOpacity) {\n            label.setAttributeNS(null, \"opacity\", style.fontOpacity);\n        }\n        if (style.fontFamily) {\n            label.setAttributeNS(null, \"font-family\", style.fontFamily);\n        }\n        if (style.fontSize) {\n            label.setAttributeNS(null, \"font-size\", style.fontSize);\n        }\n        if (style.fontWeight) {\n            label.setAttributeNS(null, \"font-weight\", style.fontWeight);\n        }\n        if (style.fontStyle) {\n            label.setAttributeNS(null, \"font-style\", style.fontStyle);\n        }\n        if (style.labelSelect === true) {\n            label.setAttributeNS(null, \"pointer-events\", \"visible\");\n            label._featureId = featureId;\n        } else {\n            label.setAttributeNS(null, \"pointer-events\", \"none\");\n        }\n        var align = style.labelAlign || OpenLayers.Renderer.defaultSymbolizer.labelAlign;\n        label.setAttributeNS(null, \"text-anchor\",\n            OpenLayers.Renderer.SVG.LABEL_ALIGN[align[0]] || \"middle\");\n\n        if (OpenLayers.IS_GECKO === true) {\n            label.setAttributeNS(null, \"dominant-baseline\",\n                OpenLayers.Renderer.SVG.LABEL_ALIGN[align[1]] || \"central\");\n        }\n\n        var labelRows = style.label.split('\\n');\n        var numRows = labelRows.length;\n        while (label.childNodes.length > numRows) {\n            label.removeChild(label.lastChild);\n        }\n        for (var i = 0; i < numRows; i++) {\n            var tspan = this.nodeFactory(featureId + suffix + \"_tspan_\" + i, \"tspan\");\n            if (style.labelSelect === true) {\n                tspan._featureId = featureId;\n                tspan._geometry = location;\n                tspan._geometryClass = location.CLASS_NAME;\n            }\n            if (OpenLayers.IS_GECKO === false) {\n                tspan.setAttributeNS(null, \"baseline-shift\",\n                    OpenLayers.Renderer.SVG.LABEL_VSHIFT[align[1]] || \"-35%\");\n            }\n            tspan.setAttribute(\"x\", x);\n            if (i == 0) {\n                var vfactor = OpenLayers.Renderer.SVG.LABEL_VFACTOR[align[1]];\n                if (vfactor == null) {\n                     vfactor = -.5;\n                }\n                tspan.setAttribute(\"dy\", (vfactor*(numRows-1)) + \"em\");\n            } else {\n                tspan.setAttribute(\"dy\", \"1em\");\n            }\n            tspan.textContent = (labelRows[i] === '') ? ' ' : labelRows[i];\n            if (!tspan.parentNode) {\n                label.appendChild(tspan);\n            }\n        }\n\n        if (!label.parentNode) {\n            this.textRoot.appendChild(label);\n        }\n    },\n    \n    /** \n     * Method: getComponentString\n     * \n     * Parameters:\n     * components - {Array(<OpenLayers.Geometry.Point>)} Array of points\n     * separator - {String} character between coordinate pairs. Defaults to \",\"\n     * \n     * Returns:\n     * {Object} hash with properties \"path\" (the string created from the\n     *     components and \"complete\" (false if the renderer was unable to\n     *     draw all components)\n     */\n    getComponentsString: function(components, separator) {\n        var renderCmp = [];\n        var complete = true;\n        var len = components.length;\n        var strings = [];\n        var str, component;\n        for(var i=0; i<len; i++) {\n            component = components[i];\n            renderCmp.push(component);\n            str = this.getShortString(component);\n            if (str) {\n                strings.push(str);\n            } else {\n                // The current component is outside the valid range. Let's\n                // see if the previous or next component is inside the range.\n                // If so, add the coordinate of the intersection with the\n                // valid range bounds.\n                if (i > 0) {\n                    if (this.getShortString(components[i - 1])) {\n                        strings.push(this.clipLine(components[i],\n                            components[i-1]));\n                    }\n                }\n                if (i < len - 1) {\n                    if (this.getShortString(components[i + 1])) {\n                        strings.push(this.clipLine(components[i],\n                            components[i+1]));\n                    }\n                }\n                complete = false;\n            }\n        }\n\n        return {\n            path: strings.join(separator || \",\"),\n            complete: complete\n        };\n    },\n    \n    /**\n     * Method: clipLine\n     * Given two points (one inside the valid range, and one outside),\n     * clips the line betweeen the two points so that the new points are both\n     * inside the valid range.\n     * \n     * Parameters:\n     * badComponent - {<OpenLayers.Geometry.Point>} original geometry of the\n     *     invalid point\n     * goodComponent - {<OpenLayers.Geometry.Point>} original geometry of the\n     *     valid point\n     * Returns\n     * {String} the SVG coordinate pair of the clipped point (like\n     *     getShortString), or an empty string if both passed componets are at\n     *     the same point.\n     */\n    clipLine: function(badComponent, goodComponent) {\n        if (goodComponent.equals(badComponent)) {\n            return \"\";\n        }\n        var resolution = this.getResolution();\n        var maxX = this.MAX_PIXEL - this.translationParameters.x;\n        var maxY = this.MAX_PIXEL - this.translationParameters.y;\n        var x1 = (goodComponent.x - this.featureDx) / resolution + this.left;\n        var y1 = this.top - goodComponent.y / resolution;\n        var x2 = (badComponent.x - this.featureDx) / resolution + this.left;\n        var y2 = this.top - badComponent.y / resolution;\n        var k;\n        if (x2 < -maxX || x2 > maxX) {\n            k = (y2 - y1) / (x2 - x1);\n            x2 = x2 < 0 ? -maxX : maxX;\n            y2 = y1 + (x2 - x1) * k;\n        }\n        if (y2 < -maxY || y2 > maxY) {\n            k = (x2 - x1) / (y2 - y1);\n            y2 = y2 < 0 ? -maxY : maxY;\n            x2 = x1 + (y2 - y1) * k;\n        }\n        return x2 + \",\" + y2;\n    },\n\n    /** \n     * Method: getShortString\n     * \n     * Parameters:\n     * point - {<OpenLayers.Geometry.Point>}\n     * \n     * Returns:\n     * {String} or false if point is outside the valid range\n     */\n    getShortString: function(point) {\n        var resolution = this.getResolution();\n        var x = ((point.x - this.featureDx) / resolution + this.left);\n        var y = (this.top - point.y / resolution);\n\n        if (this.inValidRange(x, y)) { \n            return x + \",\" + y;\n        } else {\n            return false;\n        }\n    },\n    \n    /**\n     * Method: getPosition\n     * Finds the position of an svg node.\n     * \n     * Parameters:\n     * node - {DOMElement}\n     * \n     * Returns:\n     * {Object} hash with x and y properties, representing the coordinates\n     *     within the svg coordinate system\n     */\n    getPosition: function(node) {\n        return({\n            x: parseFloat(node.getAttributeNS(null, \"cx\")),\n            y: parseFloat(node.getAttributeNS(null, \"cy\"))\n        });\n    },\n\n    /**\n     * Method: importSymbol\n     * add a new symbol definition from the rendererer's symbol hash\n     * \n     * Parameters:\n     * graphicName - {String} name of the symbol to import\n     * \n     * Returns:\n     * {DOMElement} - the imported symbol\n     */      \n    importSymbol: function (graphicName)  {\n        if (!this.defs) {\n            // create svg defs tag\n            this.defs = this.createDefs();\n        }\n        var id = this.container.id + \"-\" + graphicName;\n        \n        // check if symbol already exists in the defs\n        var existing = document.getElementById(id);\n        if (existing != null) {\n            return existing;\n        }\n        \n        var symbol = OpenLayers.Renderer.symbol[graphicName];\n        if (!symbol) {\n            throw new Error(graphicName + ' is not a valid symbol name');\n        }\n\n        var symbolNode = this.nodeFactory(id, \"symbol\");\n        var node = this.nodeFactory(null, \"polygon\");\n        symbolNode.appendChild(node);\n        var symbolExtent = new OpenLayers.Bounds(\n                                    Number.MAX_VALUE, Number.MAX_VALUE, 0, 0);\n\n        var points = [];\n        var x,y;\n        for (var i=0; i<symbol.length; i=i+2) {\n            x = symbol[i];\n            y = symbol[i+1];\n            symbolExtent.left = Math.min(symbolExtent.left, x);\n            symbolExtent.bottom = Math.min(symbolExtent.bottom, y);\n            symbolExtent.right = Math.max(symbolExtent.right, x);\n            symbolExtent.top = Math.max(symbolExtent.top, y);\n            points.push(x, \",\", y);\n        }\n        \n        node.setAttributeNS(null, \"points\", points.join(\" \"));\n        \n        var width = symbolExtent.getWidth();\n        var height = symbolExtent.getHeight();\n        // create a viewBox three times as large as the symbol itself,\n        // to allow for strokeWidth being displayed correctly at the corners.\n        var viewBox = [symbolExtent.left - width,\n                        symbolExtent.bottom - height, width * 3, height * 3];\n        symbolNode.setAttributeNS(null, \"viewBox\", viewBox.join(\" \"));\n        this.symbolMetrics[id] = [\n            Math.max(width, height),\n            symbolExtent.getCenterLonLat().lon,\n            symbolExtent.getCenterLonLat().lat\n        ];\n        \n        this.defs.appendChild(symbolNode);\n        return symbolNode;\n    },\n    \n    /**\n     * Method: getFeatureIdFromEvent\n     * \n     * Parameters:\n     * evt - {Object} An <OpenLayers.Event> object\n     *\n     * Returns:\n     * {String} A feature id or undefined.\n     */\n    getFeatureIdFromEvent: function(evt) {\n        var featureId = OpenLayers.Renderer.Elements.prototype.getFeatureIdFromEvent.apply(this, arguments);\n        if(!featureId) {\n            var target = evt.target;\n            featureId = target.parentNode && target != this.rendererRoot ?\n                target.parentNode._featureId : undefined;\n        }\n        return featureId;\n    },\n\n    CLASS_NAME: \"OpenLayers.Renderer.SVG\"\n});\n\n/**\n * Constant: OpenLayers.Renderer.SVG.LABEL_ALIGN\n * {Object}\n */\nOpenLayers.Renderer.SVG.LABEL_ALIGN = {\n    \"l\": \"start\",\n    \"r\": \"end\",\n    \"b\": \"bottom\",\n    \"t\": \"hanging\"\n};\n\n/**\n * Constant: OpenLayers.Renderer.SVG.LABEL_VSHIFT\n * {Object}\n */\nOpenLayers.Renderer.SVG.LABEL_VSHIFT = {\n    // according to\n    // http://www.w3.org/Graphics/SVG/Test/20061213/htmlObjectHarness/full-text-align-02-b.html\n    // a baseline-shift of -70% shifts the text exactly from the\n    // bottom to the top of the baseline, so -35% moves the text to\n    // the center of the baseline.\n    \"t\": \"-70%\",\n    \"b\": \"0\"    \n};\n\n/**\n * Constant: OpenLayers.Renderer.SVG.LABEL_VFACTOR\n * {Object}\n */\nOpenLayers.Renderer.SVG.LABEL_VFACTOR = {\n    \"t\": 0,\n    \"b\": -1\n};\n\n/**\n * Function: OpenLayers.Renderer.SVG.preventDefault\n * *Deprecated*.  Use <OpenLayers.Event.preventDefault> method instead.\n * Used to prevent default events (especially opening images in a new tab on\n * ctrl-click) from being executed for externalGraphic symbols\n */\nOpenLayers.Renderer.SVG.preventDefault = function(e) {\n    OpenLayers.Event.preventDefault(e);\n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Renderer.js\n */\n\n/**\n * Class: OpenLayers.Renderer.Canvas \n * A renderer based on the 2D 'canvas' drawing element.\n * \n * Inherits:\n *  - <OpenLayers.Renderer>\n */\nOpenLayers.Renderer.Canvas = OpenLayers.Class(OpenLayers.Renderer, {\n    \n    /**\n     * APIProperty: hitDetection\n     * {Boolean} Allow for hit detection of features.  Default is true.\n     */\n    hitDetection: true,\n    \n    /**\n     * Property: hitOverflow\n     * {Number} The method for converting feature identifiers to color values\n     *     supports 16777215 sequential values.  Two features cannot be \n     *     predictably detected if their identifiers differ by more than this\n     *     value.  The hitOverflow allows for bigger numbers (but the \n     *     difference in values is still limited).\n     */\n    hitOverflow: 0,\n\n    /**\n     * Property: canvas\n     * {Canvas} The canvas context object.\n     */\n    canvas: null, \n    \n    /**\n     * Property: features\n     * {Object} Internal object of feature/style pairs for use in redrawing the layer.\n     */\n    features: null,\n    \n    /**\n     * Property: pendingRedraw\n     * {Boolean} The renderer needs a redraw call to render features added while\n     *     the renderer was locked.\n     */\n    pendingRedraw: false,\n    \n    /**\n     * Property: cachedSymbolBounds\n     * {Object} Internal cache of calculated symbol extents.\n     */\n    cachedSymbolBounds: {},\n    \n    /**\n     * Constructor: OpenLayers.Renderer.Canvas\n     *\n     * Parameters:\n     * containerID - {<String>}\n     * options - {Object} Optional properties to be set on the renderer.\n     */\n    initialize: function(containerID, options) {\n        OpenLayers.Renderer.prototype.initialize.apply(this, arguments);\n        this.root = document.createElement(\"canvas\");\n        this.container.appendChild(this.root);\n        this.canvas = this.root.getContext(\"2d\");\n        this._clearRectId = OpenLayers.Util.createUniqueID();\n        this.features = {};\n        if (this.hitDetection) {\n            this.hitCanvas = document.createElement(\"canvas\");\n            this.hitContext = this.hitCanvas.getContext(\"2d\");\n        }\n    },\n    \n    /**\n     * Method: setExtent\n     * Set the visible part of the layer.\n     *\n     * Parameters:\n     * extent - {<OpenLayers.Bounds>}\n     * resolutionChanged - {Boolean}\n     *\n     * Returns:\n     * {Boolean} true to notify the layer that the new extent does not exceed\n     *     the coordinate range, and the features will not need to be redrawn.\n     *     False otherwise.\n     */\n    setExtent: function() {\n        OpenLayers.Renderer.prototype.setExtent.apply(this, arguments);\n        // always redraw features\n        return false;\n    },\n    \n    /** \n     * Method: eraseGeometry\n     * Erase a geometry from the renderer. Because the Canvas renderer has\n     *     'memory' of the features that it has drawn, we have to remove the\n     *     feature so it doesn't redraw.   \n     * \n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     * featureId - {String}\n     */\n    eraseGeometry: function(geometry, featureId) {\n        this.eraseFeatures(this.features[featureId][0]);\n    },\n\n    /**\n     * APIMethod: supported\n     * \n     * Returns:\n     * {Boolean} Whether or not the browser supports the renderer class\n     */\n    supported: function() {\n        return OpenLayers.CANVAS_SUPPORTED;\n    },    \n    \n    /**\n     * Method: setSize\n     * Sets the size of the drawing surface.\n     *\n     * Once the size is updated, redraw the canvas.\n     *\n     * Parameters:\n     * size - {<OpenLayers.Size>} \n     */\n    setSize: function(size) {\n        this.size = size.clone();\n        var root = this.root;\n        root.style.width = size.w + \"px\";\n        root.style.height = size.h + \"px\";\n        root.width = size.w;\n        root.height = size.h;\n        this.resolution = null;\n        if (this.hitDetection) {\n            var hitCanvas = this.hitCanvas;\n            hitCanvas.style.width = size.w + \"px\";\n            hitCanvas.style.height = size.h + \"px\";\n            hitCanvas.width = size.w;\n            hitCanvas.height = size.h;\n        }\n    },\n    \n    /**\n     * Method: drawFeature\n     * Draw the feature. Stores the feature in the features list,\n     * then redraws the layer. \n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} \n     * style - {<Object>} \n     *\n     * Returns:\n     * {Boolean} The feature has been drawn completely.  If the feature has no\n     *     geometry, undefined will be returned.  If the feature is not rendered\n     *     for other reasons, false will be returned.\n     */\n    drawFeature: function(feature, style) {\n        var rendered;\n        if (feature.geometry) {\n            style = this.applyDefaultSymbolizer(style || feature.style);\n            // don't render if display none or feature outside extent\n            var bounds = feature.geometry.getBounds();\n\n            var worldBounds;\n            if (this.map.baseLayer && this.map.baseLayer.wrapDateLine) {\n                worldBounds = this.map.getMaxExtent();\n            }\n\n            var intersects = bounds && bounds.intersectsBounds(this.extent, {worldBounds: worldBounds});\n\n            rendered = (style.display !== \"none\") && !!bounds && intersects;\n            if (rendered) {\n                // keep track of what we have rendered for redraw\n                this.features[feature.id] = [feature, style];\n            }\n            else {\n                // remove from features tracked for redraw\n                delete(this.features[feature.id]);\n            }\n            this.pendingRedraw = true;\n        }\n        if (this.pendingRedraw && !this.locked) {\n            this.redraw();\n            this.pendingRedraw = false;\n        }\n        return rendered;\n    },\n\n    /** \n     * Method: drawGeometry\n     * Used when looping (in redraw) over the features; draws\n     * the canvas. \n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} \n     * style - {Object} \n     */\n    drawGeometry: function(geometry, style, featureId) {\n        var className = geometry.CLASS_NAME;\n        if ((className == \"OpenLayers.Geometry.Collection\") ||\n            (className == \"OpenLayers.Geometry.MultiPoint\") ||\n            (className == \"OpenLayers.Geometry.MultiLineString\") ||\n            (className == \"OpenLayers.Geometry.MultiPolygon\")) {\n            var worldBounds = (this.map.baseLayer && this.map.baseLayer.wrapDateLine) && this.map.getMaxExtent();\n            for (var i = 0; i < geometry.components.length; i++) {\n                this.calculateFeatureDx(geometry.components[i].getBounds(), worldBounds);\n                this.drawGeometry(geometry.components[i], style, featureId);\n            }\n            return;\n        }\n        switch (geometry.CLASS_NAME) {\n            case \"OpenLayers.Geometry.Point\":\n                this.drawPoint(geometry, style, featureId);\n                break;\n            case \"OpenLayers.Geometry.LineString\":\n                this.drawLineString(geometry, style, featureId);\n                break;\n            case \"OpenLayers.Geometry.LinearRing\":\n                this.drawLinearRing(geometry, style, featureId);\n                break;\n            case \"OpenLayers.Geometry.Polygon\":\n                this.drawPolygon(geometry, style, featureId);\n                break;\n            default:\n                break;\n        }\n    },\n\n    /**\n     * Method: drawExternalGraphic\n     * Called to draw External graphics. \n     * \n     * Parameters: \n     * geometry - {<OpenLayers.Geometry>}\n     * style    - {Object}\n     * featureId - {String}\n     */ \n    drawExternalGraphic: function(geometry, style, featureId) {\n        var img = new Image();\n\n        var title = style.title || style.graphicTitle;        \n        if (title) {\n            img.title = title;           \n        }\n\n        var width = style.graphicWidth || style.graphicHeight;\n        var height = style.graphicHeight || style.graphicWidth;\n        width = width ? width : style.pointRadius * 2;\n        height = height ? height : style.pointRadius * 2;\n        var xOffset = (style.graphicXOffset != undefined) ?\n           style.graphicXOffset : -(0.5 * width);\n        var yOffset = (style.graphicYOffset != undefined) ?\n           style.graphicYOffset : -(0.5 * height);\n        var _clearRectId = this._clearRectId;\n\n        var opacity = style.graphicOpacity || style.fillOpacity;\n        \n        var onLoad = function() {\n            if(!this.features[featureId] ||\n                                     _clearRectId !== this._clearRectId) {\n                return;\n            }\n            var pt = this.getLocalXY(geometry);\n            var p0 = pt[0];\n            var p1 = pt[1];\n            if(!isNaN(p0) && !isNaN(p1)) {\n                var x = (p0 + xOffset) | 0;\n                var y = (p1 + yOffset) | 0;\n                var canvas = this.canvas;\n                canvas.globalAlpha = opacity;\n                var factor = OpenLayers.Renderer.Canvas.drawImageScaleFactor ||\n                    (OpenLayers.Renderer.Canvas.drawImageScaleFactor =\n                        /android 2.1/.test(navigator.userAgent.toLowerCase()) ?\n                            // 320 is the screen width of the G1 phone, for\n                            // which drawImage works out of the box.\n                            320 / window.screen.width : 1\n                    );\n                canvas.drawImage(\n                    img, x*factor, y*factor, width*factor, height*factor\n                );\n                if (this.hitDetection) {\n                    this.setHitContextStyle(\"fill\", featureId);\n                    this.hitContext.fillRect(x, y, width, height);\n                }\n            }\n        };\n        img.onload = OpenLayers.Function.bind(onLoad, this);\n        img.src = style.externalGraphic;\n        if (img.complete) {\n            img.onload();\n            img.onload = null;\n        }\n    },\n\n    /**\n     * Method: drawNamedSymbol\n     * Called to draw Well Known Graphic Symbol Name. \n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * geometry - {<OpenLayers.Geometry>}\n     * style    - {Object}\n     * featureId - {String}\n     */ \n    drawNamedSymbol: function(geometry, style, featureId) {\n        var x, y, cx, cy, i, symbolBounds, scaling, angle;\n        var unscaledStrokeWidth;\n        var deg2rad = Math.PI / 180.0;\n        \n        var symbol = OpenLayers.Renderer.symbol[style.graphicName];\n         \n        if (!symbol) {\n            throw new Error(style.graphicName + ' is not a valid symbol name');\n        }\n        \n        if (!symbol.length || symbol.length < 2) return;\n        \n        var pt = this.getLocalXY(geometry);\n        var p0 = pt[0];\n        var p1 = pt[1];\n       \n        if (isNaN(p0) || isNaN(p1)) return;\n        \n        // Use rounded line caps\n        this.canvas.lineCap = \"round\";\n        this.canvas.lineJoin = \"round\";\n        \n        if (this.hitDetection) {\n            this.hitContext.lineCap = \"round\";\n            this.hitContext.lineJoin = \"round\";\n        }\n        \n        // Scale and rotate symbols, using precalculated bounds whenever possible.\n        if (style.graphicName in this.cachedSymbolBounds) {\n            symbolBounds = this.cachedSymbolBounds[style.graphicName];\n        } else {\n            symbolBounds = new OpenLayers.Bounds();\n            for(i = 0; i < symbol.length; i+=2) {\n                symbolBounds.extend(new OpenLayers.LonLat(symbol[i], symbol[i+1]));\n            }\n            this.cachedSymbolBounds[style.graphicName] = symbolBounds;\n        }\n        \n        // Push symbol scaling, translation and rotation onto the transformation stack in reverse order.\n        // Don't forget to apply all canvas transformations to the hitContext canvas as well(!)\n        this.canvas.save();\n        if (this.hitDetection) { this.hitContext.save(); }\n        \n        // Step 3: place symbol at the desired location\n        this.canvas.translate(p0,p1);\n        if (this.hitDetection) { this.hitContext.translate(p0,p1); }\n        \n        // Step 2a. rotate the symbol if necessary\n        angle = deg2rad * style.rotation; // will be NaN when style.rotation is undefined.\n        if (!isNaN(angle)) {\n            this.canvas.rotate(angle);\n            if (this.hitDetection) { this.hitContext.rotate(angle); }\n        }\n                \n        // // Step 2: scale symbol such that pointRadius equals half the maximum symbol dimension.\n        scaling = 2.0 * style.pointRadius / Math.max(symbolBounds.getWidth(), symbolBounds.getHeight());\n        this.canvas.scale(scaling,scaling);\n        if (this.hitDetection) { this.hitContext.scale(scaling,scaling); }\n        \n        // Step 1: center the symbol at the origin        \n        cx = symbolBounds.getCenterLonLat().lon;\n        cy = symbolBounds.getCenterLonLat().lat;\n        this.canvas.translate(-cx,-cy);\n        if (this.hitDetection) { this.hitContext.translate(-cx,-cy); }        \n\n        // Don't forget to scale stroke widths, because they are affected by canvas scale transformations as well(!)\n        // Alternative: scale symbol coordinates manually, so stroke width scaling is not needed anymore.\n        unscaledStrokeWidth = style.strokeWidth;\n        style.strokeWidth = unscaledStrokeWidth / scaling;\n            \n        if (style.fill !== false) {\n            this.setCanvasStyle(\"fill\", style);\n            this.canvas.beginPath();\n            for (i=0; i<symbol.length; i=i+2) {\n                x = symbol[i];\n                y = symbol[i+1];\n                if (i == 0) this.canvas.moveTo(x,y);\n                this.canvas.lineTo(x,y);\n            }\n            this.canvas.closePath();\n            this.canvas.fill();\n\n            if (this.hitDetection) {\n                this.setHitContextStyle(\"fill\", featureId, style);\n                this.hitContext.beginPath();\n                for (i=0; i<symbol.length; i=i+2) {\n                    x = symbol[i];\n                    y = symbol[i+1];\n                    if (i == 0) this.canvas.moveTo(x,y);\n                    this.hitContext.lineTo(x,y);\n                }\n                this.hitContext.closePath();\n                this.hitContext.fill();\n            }\n        }  \n        \n        if (style.stroke !== false) {\n            this.setCanvasStyle(\"stroke\", style);\n            this.canvas.beginPath();\n            for (i=0; i<symbol.length; i=i+2) {\n                x = symbol[i];\n                y = symbol[i+1];\n                if (i == 0) this.canvas.moveTo(x,y);\n                this.canvas.lineTo(x,y);\n            }\n            this.canvas.closePath();\n            this.canvas.stroke();\n            \n            \n            if (this.hitDetection) {\n                this.setHitContextStyle(\"stroke\", featureId, style, scaling);\n                this.hitContext.beginPath();\n                for (i=0; i<symbol.length; i=i+2) {\n                    x = symbol[i];\n                    y = symbol[i+1];\n                    if (i == 0) this.hitContext.moveTo(x,y);\n                    this.hitContext.lineTo(x,y);\n                }\n                this.hitContext.closePath();\n                this.hitContext.stroke();\n            }\n            \n        }\n        \n        style.strokeWidth = unscaledStrokeWidth;\n        this.canvas.restore();\n        if (this.hitDetection) { this.hitContext.restore(); }\n        this.setCanvasStyle(\"reset\");  \n    },\n\n    /**\n     * Method: setCanvasStyle\n     * Prepare the canvas for drawing by setting various global settings.\n     *\n     * Parameters:\n     * type - {String} one of 'stroke', 'fill', or 'reset'\n     * style - {Object} Symbolizer hash\n     */\n    setCanvasStyle: function(type, style) {\n        if (type === \"fill\") {     \n            this.canvas.globalAlpha = style['fillOpacity'];\n            this.canvas.fillStyle = style['fillColor'];\n        } else if (type === \"stroke\") {  \n            this.canvas.globalAlpha = style['strokeOpacity'];\n            this.canvas.strokeStyle = style['strokeColor'];\n            this.canvas.lineWidth = style['strokeWidth'];\n        } else {\n            this.canvas.globalAlpha = 0;\n            this.canvas.lineWidth = 1;\n        }\n    },\n    \n    /**\n     * Method: featureIdToHex\n     * Convert a feature ID string into an RGB hex string.\n     *\n     * Parameters:\n     * featureId - {String} Feature id\n     *\n     * Returns:\n     * {String} RGB hex string.\n     */\n    featureIdToHex: function(featureId) {\n        var id = Number(featureId.split(\"_\").pop()) + 1; // zero for no feature\n        if (id >= 16777216) {\n            this.hitOverflow = id - 16777215;\n            id = id % 16777216 + 1;\n        }\n        var hex = \"000000\" + id.toString(16);\n        var len = hex.length;\n        hex = \"#\" + hex.substring(len-6, len);\n        return hex;\n    },\n    \n    /**\n     * Method: setHitContextStyle\n     * Prepare the hit canvas for drawing by setting various global settings.\n     *\n     * Parameters:\n     * type - {String} one of 'stroke', 'fill', or 'reset'\n     * featureId - {String} The feature id.\n     * symbolizer - {<OpenLayers.Symbolizer>} The symbolizer.\n     */\n    setHitContextStyle: function(type, featureId, symbolizer, strokeScaling) {\n        var hex = this.featureIdToHex(featureId);\n        if (type == \"fill\") {\n            this.hitContext.globalAlpha = 1.0;\n            this.hitContext.fillStyle = hex;\n        } else if (type == \"stroke\") {  \n            this.hitContext.globalAlpha = 1.0;\n            this.hitContext.strokeStyle = hex;\n            // bump up stroke width to deal with antialiasing. If strokeScaling is defined, we're rendering a symbol \n            // on a transformed canvas, so the antialias width bump has to scale as well.\n            if (typeof strokeScaling === \"undefined\") {\n                this.hitContext.lineWidth = symbolizer.strokeWidth + 2;\n            } else {\n                if (!isNaN(strokeScaling)) { this.hitContext.lineWidth = symbolizer.strokeWidth + 2.0 / strokeScaling; }\n            }\n        } else {\n            this.hitContext.globalAlpha = 0;\n            this.hitContext.lineWidth = 1;\n        }\n    },\n\n    /**\n     * Method: drawPoint\n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * geometry - {<OpenLayers.Geometry>}\n     * style    - {Object}\n     * featureId - {String}\n     */ \n    drawPoint: function(geometry, style, featureId) {\n        if(style.graphic !== false) {\n            if(style.externalGraphic) {\n                this.drawExternalGraphic(geometry, style, featureId);\n            } else if (style.graphicName && (style.graphicName != \"circle\")) {\n                this.drawNamedSymbol(geometry, style, featureId);\n            } else {\n                var pt = this.getLocalXY(geometry);\n                var p0 = pt[0];\n                var p1 = pt[1];\n                if(!isNaN(p0) && !isNaN(p1)) {\n                    var twoPi = Math.PI*2;\n                    var radius = style.pointRadius;\n                    if(style.fill !== false) {\n                        this.setCanvasStyle(\"fill\", style);\n                        this.canvas.beginPath();\n                        this.canvas.arc(p0, p1, radius, 0, twoPi, true);\n                        this.canvas.fill();\n                        if (this.hitDetection) {\n                            this.setHitContextStyle(\"fill\", featureId, style);\n                            this.hitContext.beginPath();\n                            this.hitContext.arc(p0, p1, radius, 0, twoPi, true);\n                            this.hitContext.fill();\n                        }\n                    }\n\n                    if(style.stroke !== false) {\n                        this.setCanvasStyle(\"stroke\", style);\n                        this.canvas.beginPath();\n                        this.canvas.arc(p0, p1, radius, 0, twoPi, true);\n                        this.canvas.stroke();\n                        if (this.hitDetection) {\n                            this.setHitContextStyle(\"stroke\", featureId, style);\n                            this.hitContext.beginPath();\n                            this.hitContext.arc(p0, p1, radius, 0, twoPi, true);\n                            this.hitContext.stroke();\n                        }\n                        this.setCanvasStyle(\"reset\");\n                    }\n                }\n            }\n        }\n    },\n    \n    /**\n     * Method: drawLineString\n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * geometry - {<OpenLayers.Geometry>}\n     * style    - {Object}\n     * featureId - {String}\n     */ \n    drawLineString: function(geometry, style, featureId) {\n        style = OpenLayers.Util.applyDefaults({fill: false}, style);\n        this.drawLinearRing(geometry, style, featureId);\n    },    \n    \n    /**\n     * Method: drawLinearRing\n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * geometry - {<OpenLayers.Geometry>}\n     * style    - {Object}\n     * featureId - {String}\n     */ \n    drawLinearRing: function(geometry, style, featureId) {\n        if (style.fill !== false) {\n            this.setCanvasStyle(\"fill\", style);\n            this.renderPath(this.canvas, geometry, style, featureId, \"fill\");\n            if (this.hitDetection) {\n                this.setHitContextStyle(\"fill\", featureId, style);\n                this.renderPath(this.hitContext, geometry, style, featureId, \"fill\");\n            }\n        }\n        if (style.stroke !== false) {\n            this.setCanvasStyle(\"stroke\", style);\n            this.renderPath(this.canvas, geometry, style, featureId, \"stroke\");\n            if (this.hitDetection) {\n                this.setHitContextStyle(\"stroke\", featureId, style);\n                this.renderPath(this.hitContext, geometry, style, featureId, \"stroke\");\n            }\n        }\n        this.setCanvasStyle(\"reset\");\n    },\n    \n    /**\n     * Method: renderPath\n     * Render a path with stroke and optional fill.\n     */\n    renderPath: function(context, geometry, style, featureId, type) {\n        var components = geometry.components;\n        var len = components.length;\n        context.beginPath();\n        var start = this.getLocalXY(components[0]);\n        var x = start[0];\n        var y = start[1];\n        if (!isNaN(x) && !isNaN(y)) {\n            context.moveTo(start[0], start[1]);\n            for (var i=1; i<len; ++i) {\n                var pt = this.getLocalXY(components[i]);\n                context.lineTo(pt[0], pt[1]);\n            }\n            if (type === \"fill\") {\n                context.fill();\n            } else {\n                context.stroke();\n            }\n        }\n    },\n    \n    /**\n     * Method: drawPolygon\n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * geometry - {<OpenLayers.Geometry>}\n     * style    - {Object}\n     * featureId - {String}\n     */ \n    drawPolygon: function(geometry, style, featureId) {\n        var components = geometry.components;\n        var len = components.length;\n        this.drawLinearRing(components[0], style, featureId);\n        // erase inner rings\n        for (var i=1; i<len; ++i) {\n            /** \n             * Note that this is overly aggressive.  Here we punch holes through \n             * all previously rendered features on the same canvas.  A better \n             * solution for polygons with interior rings would be to draw the \n             * polygon on a sketch canvas first.  We could erase all holes \n             * there and then copy the drawing to the layer canvas. \n             * TODO: http://trac.osgeo.org/openlayers/ticket/3130 \n             */\n            this.canvas.globalCompositeOperation = \"destination-out\";\n            if (this.hitDetection) {\n                this.hitContext.globalCompositeOperation = \"destination-out\";\n            }\n            this.drawLinearRing(\n                components[i], \n                OpenLayers.Util.applyDefaults({stroke: false, fillOpacity: 1.0}, style),\n                featureId\n            );\n            this.canvas.globalCompositeOperation = \"source-over\";\n            if (this.hitDetection) {\n                this.hitContext.globalCompositeOperation = \"source-over\";\n            }\n            this.drawLinearRing(\n                components[i], \n                OpenLayers.Util.applyDefaults({fill: false}, style),\n                featureId\n            );\n        }\n    },\n    \n    /**\n     * Method: drawText\n     * This method is only called by the renderer itself.\n     *\n     * Parameters:\n     * location - {<OpenLayers.Point>}\n     * style    - {Object}\n     */\n    drawText: function(location, style) {\n        var pt = this.getLocalXY(location);\n\n        this.setCanvasStyle(\"reset\");\n        this.canvas.fillStyle = style.fontColor;\n        this.canvas.globalAlpha = style.fontOpacity || 1.0;\n        var fontStyle = [style.fontStyle ? style.fontStyle : \"normal\",\n                         \"normal\", // \"font-variant\" not supported\n                         style.fontWeight ? style.fontWeight : \"normal\",\n                         style.fontSize ? style.fontSize : \"1em\",\n                         style.fontFamily ? style.fontFamily : \"sans-serif\"].join(\" \");\n        var labelRows = style.label.split('\\n');\n        var numRows = labelRows.length;\n        if (this.canvas.fillText) {\n            // HTML5\n            this.canvas.font = fontStyle;\n            this.canvas.textAlign =\n                OpenLayers.Renderer.Canvas.LABEL_ALIGN[style.labelAlign[0]] ||\n                \"center\";\n            this.canvas.textBaseline =\n                OpenLayers.Renderer.Canvas.LABEL_ALIGN[style.labelAlign[1]] ||\n                \"middle\";\n            var vfactor =\n                OpenLayers.Renderer.Canvas.LABEL_FACTOR[style.labelAlign[1]];\n            if (vfactor == null) {\n                vfactor = -.5;\n            }\n            var lineHeight =\n                this.canvas.measureText('Mg').height ||\n                this.canvas.measureText('xx').width;\n            pt[1] += lineHeight*vfactor*(numRows-1);\n            for (var i = 0; i < numRows; i++) {\n                if (style.labelOutlineWidth) {\n                    this.canvas.save();\n                    this.canvas.globalAlpha = style.labelOutlineOpacity || style.fontOpacity || 1.0;\n                    this.canvas.strokeStyle = style.labelOutlineColor;\n                    this.canvas.lineWidth = style.labelOutlineWidth;\n                    this.canvas.strokeText(labelRows[i], pt[0], pt[1] + (lineHeight*i) + 1);\n                    this.canvas.restore();\n                }\n                this.canvas.fillText(labelRows[i], pt[0], pt[1] + (lineHeight*i));\n            }\n        } else if (this.canvas.mozDrawText) {\n            // Mozilla pre-Gecko1.9.1 (<FF3.1)\n            this.canvas.mozTextStyle = fontStyle;\n            // No built-in text alignment, so we measure and adjust the position\n            var hfactor =\n                OpenLayers.Renderer.Canvas.LABEL_FACTOR[style.labelAlign[0]];\n            if (hfactor == null) {\n                hfactor = -.5;\n            }\n            var vfactor =\n                OpenLayers.Renderer.Canvas.LABEL_FACTOR[style.labelAlign[1]];\n            if (vfactor == null) {\n                vfactor = -.5;\n            }\n            var lineHeight = this.canvas.mozMeasureText('xx');\n            pt[1] += lineHeight*(1 + (vfactor*numRows));\n            for (var i = 0; i < numRows; i++) {\n                var x = pt[0] + (hfactor*this.canvas.mozMeasureText(labelRows[i]));\n                var y = pt[1] + (i*lineHeight);\n                this.canvas.translate(x, y);\n                this.canvas.mozDrawText(labelRows[i]);\n                this.canvas.translate(-x, -y);\n            }\n        }\n        this.setCanvasStyle(\"reset\");\n    },\n    \n    /**\n     * Method: getLocalXY\n     * transform geographic xy into pixel xy\n     *\n     * Parameters: \n     * point - {<OpenLayers.Geometry.Point>}\n     */\n    getLocalXY: function(point) {\n        var resolution = this.getResolution();\n        var extent = this.extent;\n        var x = ((point.x - this.featureDx) / resolution + (-extent.left / resolution));\n        var y = ((extent.top / resolution) - point.y / resolution);\n        return [x, y];\n    },\n\n    /**\n     * Method: clear\n     * Clear all vectors from the renderer.\n     */    \n    clear: function() {\n        this.clearCanvas();\n        this.features = {};\n    },\n\n    /**\n     * Method: clearCanvas\n     * Clear the canvas element of the renderer.\n     */    \n    clearCanvas: function() {\n        var height = this.root.height;\n        var width = this.root.width;\n        this.canvas.clearRect(0, 0, width, height);\n        this._clearRectId = OpenLayers.Util.createUniqueID();\n        if (this.hitDetection) {\n            this.hitContext.clearRect(0, 0, width, height);\n        }\n    },\n\n    /**\n     * Method: getFeatureIdFromEvent\n     * Returns a feature id from an event on the renderer.  \n     * \n     * Parameters:\n     * evt - {<OpenLayers.Event>} \n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector} A feature or undefined.  This method returns a \n     *     feature instead of a feature id to avoid an unnecessary lookup on the\n     *     layer.\n     */\n    getFeatureIdFromEvent: function(evt) {\n        var featureId, feature;\n        \n        if (this.hitDetection && this.root.style.display !== \"none\") {\n            // this dragging check should go in the feature handler\n            if (!this.map.dragging) {\n                var xy = evt.xy;\n                var x = xy.x | 0;\n                var y = xy.y | 0;\n                var data = this.hitContext.getImageData(x, y, 1, 1).data;\n                if (data[3] === 255) { // antialiased\n                    var id = data[2] + (256 * (data[1] + (256 * data[0])));\n                    if (id) {\n                        featureId = \"OpenLayers_Feature_Vector_\" + (id - 1 + this.hitOverflow);\n                        try {\n                            feature = this.features[featureId][0];\n                        } catch(err) {\n                            // Because of antialiasing on the canvas, when the hit location is at a point where the edge of\n                            // one symbol intersects the interior of another symbol, a wrong hit color (and therefore id) results.\n                            // todo: set Antialiasing = 'off' on the hitContext as soon as browsers allow it.\n                        }\n                    }\n                }\n            }\n        }\n        return feature;\n    },\n    \n    /**\n     * Method: eraseFeatures \n     * This is called by the layer to erase features; removes the feature from\n     *     the list, then redraws the layer.\n     * \n     * Parameters:\n     * features - {Array(<OpenLayers.Feature.Vector>)} \n     */\n    eraseFeatures: function(features) {\n        if(!(OpenLayers.Util.isArray(features))) {\n            features = [features];\n        }\n        for(var i=0; i<features.length; ++i) {\n            delete this.features[features[i].id];\n        }\n        this.redraw();\n    },\n\n    /**\n     * Method: redraw\n     * The real 'meat' of the function: any time things have changed,\n     *     redraw() can be called to loop over all the data and (you guessed\n     *     it) redraw it.  Unlike Elements-based Renderers, we can't interact\n     *     with things once they're drawn, to remove them, for example, so\n     *     instead we have to just clear everything and draw from scratch.\n     */\n    redraw: function() {\n        if (!this.locked) {\n            this.clearCanvas();\n            var labelMap = [];\n            var feature, geometry, style;\n            var worldBounds = (this.map.baseLayer && this.map.baseLayer.wrapDateLine) && this.map.getMaxExtent();\n            for (var id in this.features) {\n                if (!this.features.hasOwnProperty(id)) { continue; }\n                feature = this.features[id][0];\n                geometry = feature.geometry;\n                this.calculateFeatureDx(geometry.getBounds(), worldBounds);\n                style = this.features[id][1];\n                this.drawGeometry(geometry, style, feature.id);\n                if(style.label) {\n                    labelMap.push([feature, style]);\n                }\n            }\n            var item;\n            for (var i=0, len=labelMap.length; i<len; ++i) {\n                item = labelMap[i];\n                this.drawText(item[0].geometry.getCentroid(), item[1]);\n            }\n        }    \n    },\n\n    CLASS_NAME: \"OpenLayers.Renderer.Canvas\"\n});\n\n/**\n * Constant: OpenLayers.Renderer.Canvas.LABEL_ALIGN\n * {Object}\n */\nOpenLayers.Renderer.Canvas.LABEL_ALIGN = {\n    \"l\": \"left\",\n    \"r\": \"right\",\n    \"t\": \"top\",\n    \"b\": \"bottom\"\n};\n\n/**\n * Constant: OpenLayers.Renderer.Canvas.LABEL_FACTOR\n * {Object}\n */\nOpenLayers.Renderer.Canvas.LABEL_FACTOR = {\n    \"l\": 0,\n    \"r\": -1,\n    \"t\": 0,\n    \"b\": -1\n};\n\n/**\n * Constant: OpenLayers.Renderer.Canvas.drawImageScaleFactor\n * {Number} Scale factor to apply to the canvas drawImage arguments. This\n *     is always 1 except for Android 2.1 devices, to work around\n *     http://code.google.com/p/android/issues/detail?id=5141.\n */\nOpenLayers.Renderer.Canvas.drawImageScaleFactor = null;\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Renderer/Elements.js\n */\n\n/**\n * Class: OpenLayers.Renderer.VML\n * Render vector features in browsers with VML capability.  Construct a new\n * VML renderer with the <OpenLayers.Renderer.VML> constructor.\n * \n * Note that for all calculations in this class, we use (num | 0) to truncate a \n * float value to an integer. This is done because it seems that VML doesn't \n * support float values.\n *\n * Inherits from:\n *  - <OpenLayers.Renderer.Elements>\n */\nOpenLayers.Renderer.VML = OpenLayers.Class(OpenLayers.Renderer.Elements, {\n\n    /**\n     * Property: xmlns\n     * {String} XML Namespace URN\n     */\n    xmlns: \"urn:schemas-microsoft-com:vml\",\n    \n    /**\n     * Property: symbolCache\n     * {DOMElement} node holding symbols. This hash is keyed by symbol name,\n     *     and each value is a hash with a \"path\" and an \"extent\" property.\n     */\n    symbolCache: {},\n\n    /**\n     * Property: offset\n     * {Object} Hash with \"x\" and \"y\" properties\n     */\n    offset: null,\n    \n    /**\n     * Constructor: OpenLayers.Renderer.VML\n     * Create a new VML renderer.\n     *\n     * Parameters:\n     * containerID - {String} The id for the element that contains the renderer\n     */\n    initialize: function(containerID) {\n        if (!this.supported()) { \n            return; \n        }\n        if (!document.namespaces.olv) {\n            document.namespaces.add(\"olv\", this.xmlns);\n            var style = document.createStyleSheet();\n            var shapes = ['shape','rect', 'oval', 'fill', 'stroke', 'imagedata', 'group','textbox']; \n            for (var i = 0, len = shapes.length; i < len; i++) {\n\n                style.addRule('olv\\\\:' + shapes[i], \"behavior: url(#default#VML); \" +\n                              \"position: absolute; display: inline-block;\");\n            }                  \n        }\n        \n        OpenLayers.Renderer.Elements.prototype.initialize.apply(this, \n                                                                arguments);\n    },\n\n    /**\n     * APIMethod: supported\n     * Determine whether a browser supports this renderer.\n     *\n     * Returns:\n     * {Boolean} The browser supports the VML renderer\n     */\n    supported: function() {\n        return !!(document.namespaces);\n    },    \n\n    /**\n     * Method: setExtent\n     * Set the renderer's extent\n     *\n     * Parameters:\n     * extent - {<OpenLayers.Bounds>}\n     * resolutionChanged - {Boolean}\n     * \n     * Returns:\n     * {Boolean} true to notify the layer that the new extent does not exceed\n     *     the coordinate range, and the features will not need to be redrawn.\n     */\n    setExtent: function(extent, resolutionChanged) {\n        var coordSysUnchanged = OpenLayers.Renderer.Elements.prototype.setExtent.apply(this, arguments);\n        var resolution = this.getResolution();\n    \n        var left = (extent.left/resolution) | 0;\n        var top = (extent.top/resolution - this.size.h) | 0;\n        if (resolutionChanged || !this.offset) {\n            this.offset = {x: left, y: top};\n            left = 0;\n            top = 0;\n        } else {\n            left = left - this.offset.x;\n            top = top - this.offset.y;\n        }\n\n        \n        var org = (left - this.xOffset) + \" \" + top;\n        this.root.coordorigin = org;\n        var roots = [this.root, this.vectorRoot, this.textRoot];\n        var root;\n        for(var i=0, len=roots.length; i<len; ++i) {\n            root = roots[i];\n\n            var size = this.size.w + \" \" + this.size.h;\n            root.coordsize = size;\n            \n        }\n        // flip the VML display Y axis upside down so it \n        // matches the display Y axis of the map\n        this.root.style.flip = \"y\";\n        \n        return coordSysUnchanged;\n    },\n\n\n    /**\n     * Method: setSize\n     * Set the size of the drawing surface\n     *\n     * Parameters:\n     * size - {<OpenLayers.Size>} the size of the drawing surface\n     */\n    setSize: function(size) {\n        OpenLayers.Renderer.prototype.setSize.apply(this, arguments);\n        \n        // setting width and height on all roots to avoid flicker which we\n        // would get with 100% width and height on child roots\n        var roots = [\n            this.rendererRoot,\n            this.root,\n            this.vectorRoot,\n            this.textRoot\n        ];\n        var w = this.size.w + \"px\";\n        var h = this.size.h + \"px\";\n        var root;\n        for(var i=0, len=roots.length; i<len; ++i) {\n            root = roots[i];\n            root.style.width = w;\n            root.style.height = h;\n        }\n    },\n\n    /**\n     * Method: getNodeType\n     * Get the node type for a geometry and style\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     * style - {Object}\n     *\n     * Returns:\n     * {String} The corresponding node type for the specified geometry\n     */\n    getNodeType: function(geometry, style) {\n        var nodeType = null;\n        switch (geometry.CLASS_NAME) {\n            case \"OpenLayers.Geometry.Point\":\n                if (style.externalGraphic) {\n                    nodeType = \"olv:rect\";\n                } else if (this.isComplexSymbol(style.graphicName)) {\n                    nodeType = \"olv:shape\";\n                } else {\n                    nodeType = \"olv:oval\";\n                }\n                break;\n            case \"OpenLayers.Geometry.Rectangle\":\n                nodeType = \"olv:rect\";\n                break;\n            case \"OpenLayers.Geometry.LineString\":\n            case \"OpenLayers.Geometry.LinearRing\":\n            case \"OpenLayers.Geometry.Polygon\":\n            case \"OpenLayers.Geometry.Curve\":\n                nodeType = \"olv:shape\";\n                break;\n            default:\n                break;\n        }\n        return nodeType;\n    },\n\n    /**\n     * Method: setStyle\n     * Use to set all the style attributes to a VML node.\n     *\n     * Parameters:\n     * node - {DOMElement} An VML element to decorate\n     * style - {Object}\n     * options - {Object} Currently supported options include \n     *                              'isFilled' {Boolean} and\n     *                              'isStroked' {Boolean}\n     * geometry - {<OpenLayers.Geometry>}\n     */\n    setStyle: function(node, style, options, geometry) {\n        style = style  || node._style;\n        options = options || node._options;\n        var fillColor = style.fillColor;\n\n        var title = style.title || style.graphicTitle;\n        if (title) {\n            node.title = title;\n        } \n\n        if (node._geometryClass === \"OpenLayers.Geometry.Point\") {\n            if (style.externalGraphic) {\n                options.isFilled = true;\n                var width = style.graphicWidth || style.graphicHeight;\n                var height = style.graphicHeight || style.graphicWidth;\n                width = width ? width : style.pointRadius*2;\n                height = height ? height : style.pointRadius*2;\n\n                var resolution = this.getResolution();\n                var xOffset = (style.graphicXOffset != undefined) ?\n                    style.graphicXOffset : -(0.5 * width);\n                var yOffset = (style.graphicYOffset != undefined) ?\n                    style.graphicYOffset : -(0.5 * height);\n                \n                node.style.left = ((((geometry.x - this.featureDx)/resolution - this.offset.x)+xOffset) | 0) + \"px\";\n                node.style.top = (((geometry.y/resolution - this.offset.y)-(yOffset+height)) | 0) + \"px\";\n                node.style.width = width + \"px\";\n                node.style.height = height + \"px\";\n                node.style.flip = \"y\";\n                \n                // modify fillColor and options for stroke styling below\n                fillColor = \"none\";\n                options.isStroked = false;\n            } else if (this.isComplexSymbol(style.graphicName)) {\n                var cache = this.importSymbol(style.graphicName);\n                node.path = cache.path;\n                node.coordorigin = cache.left + \",\" + cache.bottom;\n                var size = cache.size;\n                node.coordsize = size + \",\" + size;        \n                this.drawCircle(node, geometry, style.pointRadius);\n                node.style.flip = \"y\";\n            } else {\n                this.drawCircle(node, geometry, style.pointRadius);\n            }\n        }\n\n        // fill \n        if (options.isFilled) { \n            node.fillcolor = fillColor; \n        } else { \n            node.filled = \"false\"; \n        }\n        var fills = node.getElementsByTagName(\"fill\");\n        var fill = (fills.length == 0) ? null : fills[0];\n        if (!options.isFilled) {\n            if (fill) {\n                node.removeChild(fill);\n            }\n        } else {\n            if (!fill) {\n                fill = this.createNode('olv:fill', node.id + \"_fill\");\n            }\n            fill.opacity = style.fillOpacity;\n\n            if (node._geometryClass === \"OpenLayers.Geometry.Point\" &&\n                    style.externalGraphic) {\n\n                // override fillOpacity\n                if (style.graphicOpacity) {\n                    fill.opacity = style.graphicOpacity;\n                }\n                \n                fill.src = style.externalGraphic;\n                fill.type = \"frame\";\n                \n                if (!(style.graphicWidth && style.graphicHeight)) {\n                  fill.aspect = \"atmost\";\n                }                \n            }\n            if (fill.parentNode != node) {\n                node.appendChild(fill);\n            }\n        }\n\n        // additional rendering for rotated graphics or symbols\n        var rotation = style.rotation;\n        if ((rotation !== undefined || node._rotation !== undefined)) {\n            node._rotation = rotation;\n            if (style.externalGraphic) {\n                this.graphicRotate(node, xOffset, yOffset, style);\n                // make the fill fully transparent, because we now have\n                // the graphic as imagedata element. We cannot just remove\n                // the fill, because this is part of the hack described\n                // in graphicRotate\n                fill.opacity = 0;\n            } else if(node._geometryClass === \"OpenLayers.Geometry.Point\") {\n                node.style.rotation = rotation || 0;\n            }\n        }\n\n        // stroke \n        var strokes = node.getElementsByTagName(\"stroke\");\n        var stroke = (strokes.length == 0) ? null : strokes[0];\n        if (!options.isStroked) {\n            node.stroked = false;\n            if (stroke) {\n                stroke.on = false;\n            }\n        } else {\n            if (!stroke) {\n                stroke = this.createNode('olv:stroke', node.id + \"_stroke\");\n                node.appendChild(stroke);\n            }\n            stroke.on = true;\n            stroke.color = style.strokeColor; \n            stroke.weight = style.strokeWidth + \"px\"; \n            stroke.opacity = style.strokeOpacity;\n            stroke.endcap = style.strokeLinecap == 'butt' ? 'flat' :\n                (style.strokeLinecap || 'round');\n            if (style.strokeDashstyle) {\n                stroke.dashstyle = this.dashStyle(style);\n            }\n        }\n        \n        if (style.cursor != \"inherit\" && style.cursor != null) {\n            node.style.cursor = style.cursor;\n        }\n        return node;\n    },\n\n    /**\n     * Method: graphicRotate\n     * If a point is to be styled with externalGraphic and rotation, VML fills\n     * cannot be used to display the graphic, because rotation of graphic\n     * fills is not supported by the VML implementation of Internet Explorer.\n     * This method creates a olv:imagedata element inside the VML node,\n     * DXImageTransform.Matrix and BasicImage filters for rotation and\n     * opacity, and a 3-step hack to remove rendering artefacts from the\n     * graphic and preserve the ability of graphics to trigger events.\n     * Finally, OpenLayers methods are used to determine the correct\n     * insertion point of the rotated image, because DXImageTransform.Matrix\n     * does the rotation without the ability to specify a rotation center\n     * point.\n     * \n     * Parameters:\n     * node    - {DOMElement}\n     * xOffset - {Number} rotation center relative to image, x coordinate\n     * yOffset - {Number} rotation center relative to image, y coordinate\n     * style   - {Object}\n     */\n    graphicRotate: function(node, xOffset, yOffset, style) {\n        var style = style || node._style;\n        var rotation = style.rotation || 0;\n        \n        var aspectRatio, size;\n        if (!(style.graphicWidth && style.graphicHeight)) {\n            // load the image to determine its size\n            var img = new Image();\n            img.onreadystatechange = OpenLayers.Function.bind(function() {\n                if(img.readyState == \"complete\" ||\n                        img.readyState == \"interactive\") {\n                    aspectRatio = img.width / img.height;\n                    size = Math.max(style.pointRadius * 2, \n                        style.graphicWidth || 0,\n                        style.graphicHeight || 0);\n                    xOffset = xOffset * aspectRatio;\n                    style.graphicWidth = size * aspectRatio;\n                    style.graphicHeight = size;\n                    this.graphicRotate(node, xOffset, yOffset, style);\n                }\n            }, this);\n            img.src = style.externalGraphic;\n            \n            // will be called again by the onreadystate handler\n            return;\n        } else {\n            size = Math.max(style.graphicWidth, style.graphicHeight);\n            aspectRatio = style.graphicWidth / style.graphicHeight;\n        }\n        \n        var width = Math.round(style.graphicWidth || size * aspectRatio);\n        var height = Math.round(style.graphicHeight || size);\n        node.style.width = width + \"px\";\n        node.style.height = height + \"px\";\n        \n        // Three steps are required to remove artefacts for images with\n        // transparent backgrounds (resulting from using DXImageTransform\n        // filters on svg objects), while preserving awareness for browser\n        // events on images:\n        // - Use the fill as usual (like for unrotated images) to handle\n        //   events\n        // - specify an imagedata element with the same src as the fill\n        // - style the imagedata element with an AlphaImageLoader filter\n        //   with empty src\n        var image = document.getElementById(node.id + \"_image\");\n        if (!image) {\n            image = this.createNode(\"olv:imagedata\", node.id + \"_image\");\n            node.appendChild(image);\n        }\n        image.style.width = width + \"px\";\n        image.style.height = height + \"px\";\n        image.src = style.externalGraphic;\n        image.style.filter =\n            \"progid:DXImageTransform.Microsoft.AlphaImageLoader(\" + \n            \"src='', sizingMethod='scale')\";\n\n        var rot = rotation * Math.PI / 180;\n        var sintheta = Math.sin(rot);\n        var costheta = Math.cos(rot);\n\n        // do the rotation on the image\n        var filter =\n            \"progid:DXImageTransform.Microsoft.Matrix(M11=\" + costheta +\n            \",M12=\" + (-sintheta) + \",M21=\" + sintheta + \",M22=\" + costheta +\n            \",SizingMethod='auto expand')\\n\";\n\n        // set the opacity (needed for the imagedata)\n        var opacity = style.graphicOpacity || style.fillOpacity;\n        if (opacity && opacity != 1) {\n            filter += \n                \"progid:DXImageTransform.Microsoft.BasicImage(opacity=\" + \n                opacity+\")\\n\";\n        }\n        node.style.filter = filter;\n\n        // do the rotation again on a box, so we know the insertion point\n        var centerPoint = new OpenLayers.Geometry.Point(-xOffset, -yOffset);\n        var imgBox = new OpenLayers.Bounds(0, 0, width, height).toGeometry();\n        imgBox.rotate(style.rotation, centerPoint);\n        var imgBounds = imgBox.getBounds();\n\n        node.style.left = Math.round(\n            parseInt(node.style.left) + imgBounds.left) + \"px\";\n        node.style.top = Math.round(\n            parseInt(node.style.top) - imgBounds.bottom) + \"px\";\n    },\n\n    /**\n     * Method: postDraw\n     * Does some node postprocessing to work around browser issues:\n     * - Some versions of Internet Explorer seem to be unable to set fillcolor\n     *   and strokecolor to \"none\" correctly before the fill node is appended\n     *   to a visible vml node. This method takes care of that and sets\n     *   fillcolor and strokecolor again if needed.\n     * - In some cases, a node won't become visible after being drawn. Setting\n     *   style.visibility to \"visible\" works around that.\n     * \n     * Parameters:\n     * node - {DOMElement}\n     */\n    postDraw: function(node) {\n        node.style.visibility = \"visible\";\n        var fillColor = node._style.fillColor;\n        var strokeColor = node._style.strokeColor;\n        if (fillColor == \"none\" &&\n                node.fillcolor != fillColor) {\n            node.fillcolor = fillColor;\n        }\n        if (strokeColor == \"none\" &&\n                node.strokecolor != strokeColor) {\n            node.strokecolor = strokeColor;\n        }\n    },\n\n\n    /**\n     * Method: setNodeDimension\n     * Get the geometry's bounds, convert it to our vml coordinate system, \n     * then set the node's position, size, and local coordinate system.\n     *   \n     * Parameters:\n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     */\n    setNodeDimension: function(node, geometry) {\n\n        var bbox = geometry.getBounds();\n        if(bbox) {\n            var resolution = this.getResolution();\n        \n            var scaledBox = \n                new OpenLayers.Bounds(((bbox.left - this.featureDx)/resolution - this.offset.x) | 0,\n                                      (bbox.bottom/resolution - this.offset.y) | 0,\n                                      ((bbox.right - this.featureDx)/resolution - this.offset.x) | 0,\n                                      (bbox.top/resolution - this.offset.y) | 0);\n            \n            // Set the internal coordinate system to draw the path\n            node.style.left = scaledBox.left + \"px\";\n            node.style.top = scaledBox.top + \"px\";\n            node.style.width = scaledBox.getWidth() + \"px\";\n            node.style.height = scaledBox.getHeight() + \"px\";\n    \n            node.coordorigin = scaledBox.left + \" \" + scaledBox.top;\n            node.coordsize = scaledBox.getWidth()+ \" \" + scaledBox.getHeight();\n        }\n    },\n    \n    /** \n     * Method: dashStyle\n     * \n     * Parameters:\n     * style - {Object}\n     * \n     * Returns:\n     * {String} A VML compliant 'stroke-dasharray' value\n     */\n    dashStyle: function(style) {\n        var dash = style.strokeDashstyle;\n        switch (dash) {\n            case 'solid':\n            case 'dot':\n            case 'dash':\n            case 'dashdot':\n            case 'longdash':\n            case 'longdashdot':\n                return dash;\n            default:\n                // very basic guessing of dash style patterns\n                var parts = dash.split(/[ ,]/);\n                if (parts.length == 2) {\n                    if (1*parts[0] >= 2*parts[1]) {\n                        return \"longdash\";\n                    }\n                    return (parts[0] == 1 || parts[1] == 1) ? \"dot\" : \"dash\";\n                } else if (parts.length == 4) {\n                    return (1*parts[0] >= 2*parts[1]) ? \"longdashdot\" :\n                        \"dashdot\";\n                }\n                return \"solid\";\n        }\n    },\n\n    /**\n     * Method: createNode\n     * Create a new node\n     *\n     * Parameters:\n     * type - {String} Kind of node to draw\n     * id - {String} Id for node\n     *\n     * Returns:\n     * {DOMElement} A new node of the given type and id\n     */\n    createNode: function(type, id) {\n        var node = document.createElement(type);\n        if (id) {\n            node.id = id;\n        }\n        \n        // IE hack to make elements unselectable, to prevent 'blue flash'\n        // while dragging vectors; #1410\n        node.unselectable = 'on';\n        node.onselectstart = OpenLayers.Function.False;\n        \n        return node;    \n    },\n    \n    /**\n     * Method: nodeTypeCompare\n     * Determine whether a node is of a given type\n     *\n     * Parameters:\n     * node - {DOMElement} An VML element\n     * type - {String} Kind of node\n     *\n     * Returns:\n     * {Boolean} Whether or not the specified node is of the specified type\n     */\n    nodeTypeCompare: function(node, type) {\n\n        //split type\n        var subType = type;\n        var splitIndex = subType.indexOf(\":\");\n        if (splitIndex != -1) {\n            subType = subType.substr(splitIndex+1);\n        }\n\n        //split nodeName\n        var nodeName = node.nodeName;\n        splitIndex = nodeName.indexOf(\":\");\n        if (splitIndex != -1) {\n            nodeName = nodeName.substr(splitIndex+1);\n        }\n\n        return (subType == nodeName);\n    },\n\n    /**\n     * Method: createRenderRoot\n     * Create the renderer root\n     *\n     * Returns:\n     * {DOMElement} The specific render engine's root element\n     */\n    createRenderRoot: function() {\n        return this.nodeFactory(this.container.id + \"_vmlRoot\", \"div\");\n    },\n\n    /**\n     * Method: createRoot\n     * Create the main root element\n     * \n     * Parameters:\n     * suffix - {String} suffix to append to the id\n     *\n     * Returns:\n     * {DOMElement}\n     */\n    createRoot: function(suffix) {\n        return this.nodeFactory(this.container.id + suffix, \"olv:group\");\n    },\n    \n    /**************************************\n     *                                    *\n     *     GEOMETRY DRAWING FUNCTIONS     *\n     *                                    *\n     **************************************/\n    \n    /**\n     * Method: drawPoint\n     * Render a point\n     * \n     * Parameters:\n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement} or false if the point could not be drawn\n     */\n    drawPoint: function(node, geometry) {\n        return this.drawCircle(node, geometry, 1);\n    },\n\n    /**\n     * Method: drawCircle\n     * Render a circle.\n     * Size and Center a circle given geometry (x,y center) and radius\n     * \n     * Parameters:\n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * radius - {float}\n     * \n     * Returns:\n     * {DOMElement} or false if the circle could not ne drawn\n     */\n    drawCircle: function(node, geometry, radius) {\n        if(!isNaN(geometry.x)&& !isNaN(geometry.y)) {\n            var resolution = this.getResolution();\n\n            node.style.left = ((((geometry.x - this.featureDx) /resolution - this.offset.x) | 0) - radius) + \"px\";\n            node.style.top = (((geometry.y /resolution - this.offset.y) | 0) - radius) + \"px\";\n    \n            var diameter = radius * 2;\n            \n            node.style.width = diameter + \"px\";\n            node.style.height = diameter + \"px\";\n            return node;\n        }\n        return false;\n    },\n\n\n    /**\n     * Method: drawLineString\n     * Render a linestring.\n     * \n     * Parameters:\n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement}\n     */\n    drawLineString: function(node, geometry) {\n        return this.drawLine(node, geometry, false);\n    },\n\n    /**\n     * Method: drawLinearRing\n     * Render a linearring\n     * \n     * Parameters:\n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement}\n     */\n    drawLinearRing: function(node, geometry) {\n        return this.drawLine(node, geometry, true);\n    },\n\n    /**\n     * Method: DrawLine\n     * Render a line.\n     * \n     * Parameters:\n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * closeLine - {Boolean} Close the line? (make it a ring?)\n     * \n     * Returns:\n     * {DOMElement}\n     */\n    drawLine: function(node, geometry, closeLine) {\n\n        this.setNodeDimension(node, geometry);\n\n        var resolution = this.getResolution();\n        var numComponents = geometry.components.length;\n        var parts = new Array(numComponents);\n\n        var comp, x, y;\n        for (var i = 0; i < numComponents; i++) {\n            comp = geometry.components[i];\n            x = ((comp.x - this.featureDx)/resolution - this.offset.x) | 0;\n            y = (comp.y/resolution - this.offset.y) | 0;\n            parts[i] = \" \" + x + \",\" + y + \" l \";\n        }\n        var end = (closeLine) ? \" x e\" : \" e\";\n        node.path = \"m\" + parts.join(\"\") + end;\n        return node;\n    },\n\n    /**\n     * Method: drawPolygon\n     * Render a polygon\n     * \n     * Parameters:\n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement}\n     */\n    drawPolygon: function(node, geometry) {\n        this.setNodeDimension(node, geometry);\n\n        var resolution = this.getResolution();\n    \n        var path = [];\n        var j, jj, points, area, first, second, i, ii, comp, pathComp, x, y;\n        for (j=0, jj=geometry.components.length; j<jj; j++) {\n            path.push(\"m\");\n            points = geometry.components[j].components;\n            // we only close paths of interior rings with area\n            area = (j === 0);\n            first = null;\n            second = null;\n            for (i=0, ii=points.length; i<ii; i++) {\n                comp = points[i];\n                x = ((comp.x - this.featureDx) / resolution - this.offset.x) | 0;\n                y = (comp.y / resolution - this.offset.y) | 0;\n                pathComp = \" \" + x + \",\" + y;\n                path.push(pathComp);\n                if (i==0) {\n                    path.push(\" l\");\n                }\n                if (!area) {\n                    // IE improperly renders sub-paths that have no area.\n                    // Instead of checking the area of every ring, we confirm\n                    // the ring has at least three distinct points.  This does\n                    // not catch all non-zero area cases, but it greatly improves\n                    // interior ring digitizing and is a minor performance hit\n                    // when rendering rings with many points.\n                    if (!first) {\n                        first = pathComp;\n                    } else if (first != pathComp) {\n                        if (!second) {\n                            second = pathComp;\n                        } else if (second != pathComp) {\n                            // stop looking\n                            area = true;\n                        }\n                    }\n                }\n            }\n            path.push(area ? \" x \" : \" \");\n        }\n        path.push(\"e\");\n        node.path = path.join(\"\");\n        return node;\n    },\n\n    /**\n     * Method: drawRectangle\n     * Render a rectangle\n     * \n     * Parameters:\n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement}\n     */\n    drawRectangle: function(node, geometry) {\n        var resolution = this.getResolution();\n    \n        node.style.left = (((geometry.x - this.featureDx)/resolution - this.offset.x) | 0) + \"px\";\n        node.style.top = ((geometry.y/resolution - this.offset.y) | 0) + \"px\";\n        node.style.width = ((geometry.width/resolution) | 0) + \"px\";\n        node.style.height = ((geometry.height/resolution) | 0) + \"px\";\n        \n        return node;\n    },\n    \n    /**\n     * Method: drawText\n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * featureId - {String}\n     * style -\n     * location - {<OpenLayers.Geometry.Point>}\n     */\n    drawText: function(featureId, style, location) {\n        var label = this.nodeFactory(featureId + this.LABEL_ID_SUFFIX, \"olv:rect\");\n        var textbox = this.nodeFactory(featureId + this.LABEL_ID_SUFFIX + \"_textbox\", \"olv:textbox\");\n        \n        var resolution = this.getResolution();\n        label.style.left = (((location.x - this.featureDx)/resolution - this.offset.x) | 0) + \"px\";\n        label.style.top = ((location.y/resolution - this.offset.y) | 0) + \"px\";\n        label.style.flip = \"y\";\n\n        textbox.innerText = style.label;\n\n        if (style.cursor != \"inherit\" && style.cursor != null) {\n            textbox.style.cursor = style.cursor;\n        }\n        if (style.fontColor) {\n            textbox.style.color = style.fontColor;\n        }\n        if (style.fontOpacity) {\n            textbox.style.filter = 'alpha(opacity=' + (style.fontOpacity * 100) + ')';\n        }\n        if (style.fontFamily) {\n            textbox.style.fontFamily = style.fontFamily;\n        }\n        if (style.fontSize) {\n            textbox.style.fontSize = style.fontSize;\n        }\n        if (style.fontWeight) {\n            textbox.style.fontWeight = style.fontWeight;\n        }\n        if (style.fontStyle) {\n            textbox.style.fontStyle = style.fontStyle;\n        }\n        if(style.labelSelect === true) {\n            label._featureId = featureId;\n            textbox._featureId = featureId;\n            textbox._geometry = location;\n            textbox._geometryClass = location.CLASS_NAME;\n        }\n        textbox.style.whiteSpace = \"nowrap\";\n        // fun with IE: IE7 in standards compliant mode does not display any\n        // text with a left inset of 0. So we set this to 1px and subtract one\n        // pixel later when we set label.style.left\n        textbox.inset = \"1px,0px,0px,0px\";\n\n        if(!label.parentNode) {\n            label.appendChild(textbox);\n            this.textRoot.appendChild(label);\n        }\n\n        var align = style.labelAlign || \"cm\";\n        if (align.length == 1) {\n            align += \"m\";\n        }\n        var xshift = textbox.clientWidth *\n            (OpenLayers.Renderer.VML.LABEL_SHIFT[align.substr(0,1)]);\n        var yshift = textbox.clientHeight *\n            (OpenLayers.Renderer.VML.LABEL_SHIFT[align.substr(1,1)]);\n        label.style.left = parseInt(label.style.left)-xshift-1+\"px\";\n        label.style.top = parseInt(label.style.top)+yshift+\"px\";\n        \n    },\n    \n    /**\n     * Method: moveRoot\n     * moves this renderer's root to a different renderer.\n     * \n     * Parameters:\n     * renderer - {<OpenLayers.Renderer>} target renderer for the moved root\n     * root - {DOMElement} optional root node. To be used when this renderer\n     *     holds roots from multiple layers to tell this method which one to\n     *     detach\n     * \n     * Returns:\n     * {Boolean} true if successful, false otherwise\n     */\n    moveRoot: function(renderer) {\n        var layer = this.map.getLayer(renderer.container.id);\n        if(layer instanceof OpenLayers.Layer.Vector.RootContainer) {\n            layer = this.map.getLayer(this.container.id);\n        }\n        layer && layer.renderer.clear();\n        OpenLayers.Renderer.Elements.prototype.moveRoot.apply(this, arguments);\n        layer && layer.redraw();\n    },\n    \n    /**\n     * Method: importSymbol\n     * add a new symbol definition from the rendererer's symbol hash\n     * \n     * Parameters:\n     * graphicName - {String} name of the symbol to import\n     * \n     * Returns:\n     * {Object} - hash of {DOMElement} \"symbol\" and {Number} \"size\"\n     */      \n    importSymbol: function (graphicName)  {\n        var id = this.container.id + \"-\" + graphicName;\n        \n        // check if symbol already exists in the cache\n        var cache = this.symbolCache[id];\n        if (cache) {\n            return cache;\n        }\n        \n        var symbol = OpenLayers.Renderer.symbol[graphicName];\n        if (!symbol) {\n            throw new Error(graphicName + ' is not a valid symbol name');\n        }\n\n        var symbolExtent = new OpenLayers.Bounds(\n                                    Number.MAX_VALUE, Number.MAX_VALUE, 0, 0);\n        \n        var pathitems = [\"m\"];\n        for (var i=0; i<symbol.length; i=i+2) {\n            var x = symbol[i];\n            var y = symbol[i+1];\n            symbolExtent.left = Math.min(symbolExtent.left, x);\n            symbolExtent.bottom = Math.min(symbolExtent.bottom, y);\n            symbolExtent.right = Math.max(symbolExtent.right, x);\n            symbolExtent.top = Math.max(symbolExtent.top, y);\n\n            pathitems.push(x);\n            pathitems.push(y);\n            if (i == 0) {\n                pathitems.push(\"l\");\n            }\n        }\n        pathitems.push(\"x e\");\n        var path = pathitems.join(\" \");\n\n        var diff = (symbolExtent.getWidth() - symbolExtent.getHeight()) / 2;\n        if(diff > 0) {\n            symbolExtent.bottom = symbolExtent.bottom - diff;\n            symbolExtent.top = symbolExtent.top + diff;\n        } else {\n            symbolExtent.left = symbolExtent.left + diff;\n            symbolExtent.right = symbolExtent.right - diff;\n        }\n        \n        cache = {\n            path: path,\n            size: symbolExtent.getWidth(), // equals getHeight() now\n            left: symbolExtent.left,\n            bottom: symbolExtent.bottom\n        };\n        this.symbolCache[id] = cache;\n        \n        return cache;\n    },\n    \n    CLASS_NAME: \"OpenLayers.Renderer.VML\"\n});\n\n/**\n * Constant: OpenLayers.Renderer.VML.LABEL_SHIFT\n * {Object}\n */\nOpenLayers.Renderer.VML.LABEL_SHIFT = {\n    \"l\": 0,\n    \"c\": .5,\n    \"r\": 1,\n    \"t\": 0,\n    \"m\": .5,\n    \"b\": 1\n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Layer.js\n * @requires OpenLayers/Renderer.js\n * @requires OpenLayers/StyleMap.js\n * @requires OpenLayers/Feature/Vector.js\n * @requires OpenLayers/Console.js\n * @requires OpenLayers/Lang.js\n */\n\n/**\n * Class: OpenLayers.Layer.Vector\n * Instances of OpenLayers.Layer.Vector are used to render vector data from\n *     a variety of sources. Create a new vector layer with the\n *     <OpenLayers.Layer.Vector> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Layer>\n */\nOpenLayers.Layer.Vector = OpenLayers.Class(OpenLayers.Layer, {\n\n    /**\n     * APIProperty: events\n     * {<OpenLayers.Events>}\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * layer.events.register(type, obj, listener);\n     * (end)\n     *\n     * Listeners will be called with a reference to an event object.  The\n     *     properties of this event depends on exactly what happened.\n     *\n     * All event objects have at least the following properties:\n     * object - {Object} A reference to layer.events.object.\n     * element - {DOMElement} A reference to layer.events.element.\n     *\n     * Supported map event types (in addition to those from <OpenLayers.Layer.events>):\n     * beforefeatureadded - Triggered before a feature is added.  Listeners\n     *      will receive an object with a *feature* property referencing the\n     *      feature to be added.  To stop the feature from being added, a\n     *      listener should return false.\n     * beforefeaturesadded - Triggered before an array of features is added.\n     *      Listeners will receive an object with a *features* property\n     *      referencing the feature to be added. To stop the features from\n     *      being added, a listener should return false.\n     * featureadded - Triggered after a feature is added.  The event\n     *      object passed to listeners will have a *feature* property with a\n     *      reference to the added feature.\n     * featuresadded - Triggered after features are added.  The event\n     *      object passed to listeners will have a *features* property with a\n     *      reference to an array of added features.\n     * beforefeatureremoved - Triggered before a feature is removed. Listeners\n     *      will receive an object with a *feature* property referencing the\n     *      feature to be removed.\n     * beforefeaturesremoved - Triggered before multiple features are removed. \n     *      Listeners will receive an object with a *features* property\n     *      referencing the features to be removed.\n     * featureremoved - Triggered after a feature is removed. The event\n     *      object passed to listeners will have a *feature* property with a\n     *      reference to the removed feature.\n     * featuresremoved - Triggered after features are removed. The event\n     *      object passed to listeners will have a *features* property with a\n     *      reference to an array of removed features.\n     * beforefeatureselected - Triggered before a feature is selected.  Listeners\n     *      will receive an object with a *feature* property referencing the\n     *      feature to be selected. To stop the feature from being selectd, a\n     *      listener should return false.\n     * featureselected - Triggered after a feature is selected.  Listeners\n     *      will receive an object with a *feature* property referencing the\n     *      selected feature.\n     * featureunselected - Triggered after a feature is unselected.\n     *      Listeners will receive an object with a *feature* property\n     *      referencing the unselected feature.\n     * beforefeaturemodified - Triggered when a feature is selected to \n     *      be modified.  Listeners will receive an object with a *feature* \n     *      property referencing the selected feature.\n     * featuremodified - Triggered when a feature has been modified.\n     *      Listeners will receive an object with a *feature* property referencing \n     *      the modified feature.\n     * afterfeaturemodified - Triggered when a feature is finished being modified.\n     *      Listeners will receive an object with a *feature* property referencing \n     *      the modified feature.\n     * vertexmodified - Triggered when a vertex within any feature geometry\n     *      has been modified.  Listeners will receive an object with a\n     *      *feature* property referencing the modified feature, a *vertex*\n     *      property referencing the vertex modified (always a point geometry),\n     *      and a *pixel* property referencing the pixel location of the\n     *      modification.\n     * vertexremoved - Triggered when a vertex within any feature geometry\n     *      has been deleted.  Listeners will receive an object with a\n     *      *feature* property referencing the modified feature, a *vertex*\n     *      property referencing the vertex modified (always a point geometry),\n     *      and a *pixel* property referencing the pixel location of the\n     *      removal.\n     * sketchstarted - Triggered when a feature sketch bound for this layer\n     *      is started.  Listeners will receive an object with a *feature*\n     *      property referencing the new sketch feature and a *vertex* property\n     *      referencing the creation point.\n     * sketchmodified - Triggered when a feature sketch bound for this layer\n     *      is modified.  Listeners will receive an object with a *vertex*\n     *      property referencing the modified vertex and a *feature* property\n     *      referencing the sketch feature.\n     * sketchcomplete - Triggered when a feature sketch bound for this layer\n     *      is complete.  Listeners will receive an object with a *feature*\n     *      property referencing the sketch feature.  By returning false, a\n     *      listener can stop the sketch feature from being added to the layer.\n     * refresh - Triggered when something wants a strategy to ask the protocol\n     *      for a new set of features.\n     */\n\n    /**\n     * APIProperty: isBaseLayer\n     * {Boolean} The layer is a base layer.  Default is false.  Set this property\n     * in the layer options.\n     */\n    isBaseLayer: false,\n\n    /** \n     * APIProperty: isFixed\n     * {Boolean} Whether the layer remains in one place while dragging the\n     * map. Note that setting this to true will move the layer to the bottom\n     * of the layer stack.\n     */\n    isFixed: false,\n\n    /** \n     * APIProperty: features\n     * {Array(<OpenLayers.Feature.Vector>)} \n     */\n    features: null,\n    \n    /** \n     * Property: filter\n     * {<OpenLayers.Filter>} The filter set in this layer,\n     *     a strategy launching read requests can combined\n     *     this filter with its own filter.\n     */\n    filter: null,\n    \n    /** \n     * Property: selectedFeatures\n     * {Array(<OpenLayers.Feature.Vector>)} \n     */\n    selectedFeatures: null,\n    \n    /**\n     * Property: unrenderedFeatures\n     * {Object} hash of features, keyed by feature.id, that the renderer\n     *     failed to draw\n     */\n    unrenderedFeatures: null,\n\n    /**\n     * APIProperty: reportError\n     * {Boolean} report friendly error message when loading of renderer\n     * fails.\n     */\n    reportError: true, \n\n    /** \n     * APIProperty: style\n     * {Object} Default style for the layer\n     */\n    style: null,\n    \n    /**\n     * Property: styleMap\n     * {<OpenLayers.StyleMap>}\n     */\n    styleMap: null,\n    \n    /**\n     * Property: strategies\n     * {Array(<OpenLayers.Strategy>})} Optional list of strategies for the layer.\n     */\n    strategies: null,\n    \n    /**\n     * Property: protocol\n     * {<OpenLayers.Protocol>} Optional protocol for the layer.\n     */\n    protocol: null,\n    \n    /**\n     * Property: renderers\n     * {Array(String)} List of supported Renderer classes. Add to this list to\n     * add support for additional renderers. This list is ordered:\n     * the first renderer which returns true for the  'supported()'\n     * method will be used, if not defined in the 'renderer' option.\n     */\n    renderers: ['SVG', 'VML', 'Canvas'],\n    \n    /** \n     * Property: renderer\n     * {<OpenLayers.Renderer>}\n     */\n    renderer: null,\n    \n    /**\n     * APIProperty: rendererOptions\n     * {Object} Options for the renderer. See {<OpenLayers.Renderer>} for\n     *     supported options.\n     */\n    rendererOptions: null,\n    \n    /** \n     * APIProperty: geometryType\n     * {String} geometryType allows you to limit the types of geometries this\n     * layer supports. This should be set to something like\n     * \"OpenLayers.Geometry.Point\" to limit types.\n     */\n    geometryType: null,\n\n    /** \n     * Property: drawn\n     * {Boolean} Whether the Vector Layer features have been drawn yet.\n     */\n    drawn: false,\n    \n    /** \n     * APIProperty: ratio\n     * {Float} This specifies the ratio of the size of the visiblity of the Vector Layer features to the size of the map.\n     */   \n    ratio: 1,\n\n    /**\n     * Constructor: OpenLayers.Layer.Vector\n     * Create a new vector layer\n     *\n     * Parameters:\n     * name - {String} A name for the layer\n     * options - {Object} Optional object with non-default properties to set on\n     *           the layer.\n     *\n     * Returns:\n     * {<OpenLayers.Layer.Vector>} A new vector layer\n     */\n    initialize: function(name, options) {\n        OpenLayers.Layer.prototype.initialize.apply(this, arguments);\n\n        // allow user-set renderer, otherwise assign one\n        if (!this.renderer || !this.renderer.supported()) {  \n            this.assignRenderer();\n        }\n\n        // if no valid renderer found, display error\n        if (!this.renderer || !this.renderer.supported()) {\n            this.renderer = null;\n            this.displayError();\n        } \n\n        if (!this.styleMap) {\n            this.styleMap = new OpenLayers.StyleMap();\n        }\n\n        this.features = [];\n        this.selectedFeatures = [];\n        this.unrenderedFeatures = {};\n        \n        // Allow for custom layer behavior\n        if(this.strategies){\n            for(var i=0, len=this.strategies.length; i<len; i++) {\n                this.strategies[i].setLayer(this);\n            }\n        }\n\n    },\n\n    /**\n     * APIMethod: destroy\n     * Destroy this layer\n     */\n    destroy: function() {\n        if (this.strategies) {\n            var strategy, i, len;\n            for(i=0, len=this.strategies.length; i<len; i++) {\n                strategy = this.strategies[i];\n                if(strategy.autoDestroy) {\n                    strategy.destroy();\n                }\n            }\n            this.strategies = null;\n        }\n        if (this.protocol) {\n            if(this.protocol.autoDestroy) {\n                this.protocol.destroy();\n            }\n            this.protocol = null;\n        }\n        this.destroyFeatures();\n        this.features = null;\n        this.selectedFeatures = null;\n        this.unrenderedFeatures = null;\n        if (this.renderer) {\n            this.renderer.destroy();\n        }\n        this.renderer = null;\n        this.geometryType = null;\n        this.drawn = null;\n        OpenLayers.Layer.prototype.destroy.apply(this, arguments);  \n    },\n\n    /**\n     * Method: clone\n     * Create a clone of this layer.\n     * \n     * Note: Features of the layer are also cloned.\n     *\n     * Returns:\n     * {<OpenLayers.Layer.Vector>} An exact clone of this layer\n     */\n    clone: function (obj) {\n        \n        if (obj == null) {\n            obj = new OpenLayers.Layer.Vector(this.name, this.getOptions());\n        }\n\n        //get all additions from superclasses\n        obj = OpenLayers.Layer.prototype.clone.apply(this, [obj]);\n\n        // copy/set any non-init, non-simple values here\n        var features = this.features;\n        var len = features.length;\n        var clonedFeatures = new Array(len);\n        for(var i=0; i<len; ++i) {\n            clonedFeatures[i] = features[i].clone();\n        }\n        obj.features = clonedFeatures;\n\n        return obj;\n    },    \n    \n    /**\n     * Method: refresh\n     * Ask the layer to request features again and redraw them.  Triggers\n     *     the refresh event if the layer is in range and visible.\n     *\n     * Parameters:\n     * obj - {Object} Optional object with properties for any listener of\n     *     the refresh event.\n     */\n    refresh: function(obj) {\n        if(this.calculateInRange() && this.visibility) {\n            this.events.triggerEvent(\"refresh\", obj);\n        }\n    },\n\n    /** \n     * Method: assignRenderer\n     * Iterates through the available renderer implementations and selects \n     * and assigns the first one whose \"supported()\" function returns true.\n     */    \n    assignRenderer: function()  {\n        for (var i=0, len=this.renderers.length; i<len; i++) {\n            var rendererClass = this.renderers[i];\n            var renderer = (typeof rendererClass == \"function\") ?\n                rendererClass :\n                OpenLayers.Renderer[rendererClass];\n            if (renderer && renderer.prototype.supported()) {\n                this.renderer = new renderer(this.div, this.rendererOptions);\n                break;\n            }  \n        }  \n    },\n\n    /** \n     * Method: displayError \n     * Let the user know their browser isn't supported.\n     */\n    displayError: function() {\n        if (this.reportError) {\n            OpenLayers.Console.userError(OpenLayers.i18n(\"browserNotSupported\", \n                                     {renderers: this. renderers.join('\\n')}));\n        }    \n    },\n\n    /** \n     * Method: setMap\n     * The layer has been added to the map. \n     * \n     * If there is no renderer set, the layer can't be used. Remove it.\n     * Otherwise, give the renderer a reference to the map and set its size.\n     * \n     * Parameters:\n     * map - {<OpenLayers.Map>} \n     */\n    setMap: function(map) {        \n        OpenLayers.Layer.prototype.setMap.apply(this, arguments);\n\n        if (!this.renderer) {\n            this.map.removeLayer(this);\n        } else {\n            this.renderer.map = this.map;\n\n            var newSize = this.map.getSize();\n            newSize.w = newSize.w * this.ratio;\n            newSize.h = newSize.h * this.ratio;\n            this.renderer.setSize(newSize);\n        }\n    },\n\n    /**\n     * Method: afterAdd\n     * Called at the end of the map.addLayer sequence.  At this point, the map\n     *     will have a base layer.  Any autoActivate strategies will be\n     *     activated here.\n     */\n    afterAdd: function() {\n        if(this.strategies) {\n            var strategy, i, len;\n            for(i=0, len=this.strategies.length; i<len; i++) {\n                strategy = this.strategies[i];\n                if(strategy.autoActivate) {\n                    strategy.activate();\n                }\n            }\n        }\n    },\n\n    /**\n     * Method: removeMap\n     * The layer has been removed from the map.\n     *\n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    removeMap: function(map) {\n        this.drawn = false;\n        if(this.strategies) {\n            var strategy, i, len;\n            for(i=0, len=this.strategies.length; i<len; i++) {\n                strategy = this.strategies[i];\n                if(strategy.autoActivate) {\n                    strategy.deactivate();\n                }\n            }\n        }\n    },\n    \n    /**\n     * Method: onMapResize\n     * Notify the renderer of the change in size. \n     * \n     */\n    onMapResize: function() {\n        OpenLayers.Layer.prototype.onMapResize.apply(this, arguments);\n        \n        var newSize = this.map.getSize();\n        newSize.w = newSize.w * this.ratio;\n        newSize.h = newSize.h * this.ratio;\n        this.renderer.setSize(newSize);\n    },\n\n    /**\n     * Method: moveTo\n     *  Reset the vector layer's div so that it once again is lined up with \n     *   the map. Notify the renderer of the change of extent, and in the\n     *   case of a change of zoom level (resolution), have the \n     *   renderer redraw features.\n     * \n     *  If the layer has not yet been drawn, cycle through the layer's \n     *   features and draw each one.\n     * \n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>} \n     * zoomChanged - {Boolean} \n     * dragging - {Boolean} \n     */\n    moveTo: function(bounds, zoomChanged, dragging) {\n        OpenLayers.Layer.prototype.moveTo.apply(this, arguments);\n        \n        var coordSysUnchanged = true;\n        if (!dragging) {\n            this.renderer.root.style.visibility = 'hidden';\n\n            var viewSize = this.map.getSize(),\n                viewWidth = viewSize.w,\n                viewHeight = viewSize.h,\n                offsetLeft = (viewWidth / 2 * this.ratio) - viewWidth / 2,\n                offsetTop = (viewHeight / 2 * this.ratio) - viewHeight / 2;\n            offsetLeft += this.map.layerContainerOriginPx.x;\n            offsetLeft = -Math.round(offsetLeft);\n            offsetTop += this.map.layerContainerOriginPx.y;\n            offsetTop = -Math.round(offsetTop);\n\n            this.div.style.left = offsetLeft + 'px';\n            this.div.style.top = offsetTop + 'px';\n\n            var extent = this.map.getExtent().scale(this.ratio);\n            coordSysUnchanged = this.renderer.setExtent(extent, zoomChanged);\n\n            this.renderer.root.style.visibility = 'visible';\n\n            // Force a reflow on gecko based browsers to prevent jump/flicker.\n            // This seems to happen on only certain configurations; it was originally\n            // noticed in FF 2.0 and Linux.\n            if (OpenLayers.IS_GECKO === true) {\n                this.div.scrollLeft = this.div.scrollLeft;\n            }\n            \n            if (!zoomChanged && coordSysUnchanged) {\n                for (var i in this.unrenderedFeatures) {\n                    var feature = this.unrenderedFeatures[i];\n                    this.drawFeature(feature);\n                }\n            }\n        }\n        if (!this.drawn || zoomChanged || !coordSysUnchanged) {\n            this.drawn = true;\n            var feature;\n            for(var i=0, len=this.features.length; i<len; i++) {\n                this.renderer.locked = (i !== (len - 1));\n                feature = this.features[i];\n                this.drawFeature(feature);\n            }\n        }    \n    },\n    \n    /** \n     * APIMethod: display\n     * Hide or show the Layer\n     * \n     * Parameters:\n     * display - {Boolean}\n     */\n    display: function(display) {\n        OpenLayers.Layer.prototype.display.apply(this, arguments);\n        // we need to set the display style of the root in case it is attached\n        // to a foreign layer\n        var currentDisplay = this.div.style.display;\n        if(currentDisplay != this.renderer.root.style.display) {\n            this.renderer.root.style.display = currentDisplay;\n        }\n    },\n\n    /**\n     * APIMethod: addFeatures\n     * Add Features to the layer.\n     *\n     * Parameters:\n     * features - {Array(<OpenLayers.Feature.Vector>)} \n     * options - {Object}\n     */\n    addFeatures: function(features, options) {\n        if (!(OpenLayers.Util.isArray(features))) {\n            features = [features];\n        }\n        \n        var notify = !options || !options.silent;\n        if(notify) {\n            var event = {features: features};\n            var ret = this.events.triggerEvent(\"beforefeaturesadded\", event);\n            if(ret === false) {\n                return;\n            }\n            features = event.features;\n        }\n        \n        // Track successfully added features for featuresadded event, since\n        // beforefeatureadded can veto single features.\n        var featuresAdded = [];\n        for (var i=0, len=features.length; i<len; i++) {\n            if (i != (features.length - 1)) {\n                this.renderer.locked = true;\n            } else {\n                this.renderer.locked = false;\n            }    \n            var feature = features[i];\n            \n            if (this.geometryType &&\n              !(feature.geometry instanceof this.geometryType)) {\n                throw new TypeError('addFeatures: component should be an ' +\n                                    this.geometryType.prototype.CLASS_NAME);\n              }\n\n            //give feature reference to its layer\n            feature.layer = this;\n\n            if (!feature.style && this.style) {\n                feature.style = OpenLayers.Util.extend({}, this.style);\n            }\n\n            if (notify) {\n                if(this.events.triggerEvent(\"beforefeatureadded\",\n                                            {feature: feature}) === false) {\n                    continue;\n                }\n                this.preFeatureInsert(feature);\n            }\n\n            featuresAdded.push(feature);\n            this.features.push(feature);\n            this.drawFeature(feature);\n            \n            if (notify) {\n                this.events.triggerEvent(\"featureadded\", {\n                    feature: feature\n                });\n                this.onFeatureInsert(feature);\n            }\n        }\n        \n        if(notify) {\n            this.events.triggerEvent(\"featuresadded\", {features: featuresAdded});\n        }\n    },\n\n\n    /**\n     * APIMethod: removeFeatures\n     * Remove features from the layer.  This erases any drawn features and\n     *     removes them from the layer's control.  The beforefeatureremoved\n     *     and featureremoved events will be triggered for each feature.  The\n     *     featuresremoved event will be triggered after all features have\n     *     been removed.  To suppress event triggering, use the silent option.\n     * \n     * Parameters:\n     * features - {Array(<OpenLayers.Feature.Vector>)} List of features to be\n     *     removed.\n     * options - {Object} Optional properties for changing behavior of the\n     *     removal.\n     *\n     * Valid options:\n     * silent - {Boolean} Suppress event triggering.  Default is false.\n     */\n    removeFeatures: function(features, options) {\n        if(!features || features.length === 0) {\n            return;\n        }\n        if (features === this.features) {\n            return this.removeAllFeatures(options);\n        }\n        if (!(OpenLayers.Util.isArray(features))) {\n            features = [features];\n        }\n        if (features === this.selectedFeatures) {\n            features = features.slice();\n        }\n\n        var notify = !options || !options.silent;\n        \n        if (notify) {\n            this.events.triggerEvent(\n                \"beforefeaturesremoved\", {features: features}\n            );\n        }\n\n        for (var i = features.length - 1; i >= 0; i--) {\n            // We remain locked so long as we're not at 0\n            // and the 'next' feature has a geometry. We do the geometry check\n            // because if all the features after the current one are 'null', we\n            // won't call eraseGeometry, so we break the 'renderer functions\n            // will always be called with locked=false *last*' rule. The end result\n            // is a possible gratiutious unlocking to save a loop through the rest \n            // of the list checking the remaining features every time. So long as\n            // null geoms are rare, this is probably okay.    \n            if (i != 0 && features[i-1].geometry) {\n                this.renderer.locked = true;\n            } else {\n                this.renderer.locked = false;\n            }\n    \n            var feature = features[i];\n            delete this.unrenderedFeatures[feature.id];\n\n            if (notify) {\n                this.events.triggerEvent(\"beforefeatureremoved\", {\n                    feature: feature\n                });\n            }\n\n            this.features = OpenLayers.Util.removeItem(this.features, feature);\n            // feature has no layer at this point\n            feature.layer = null;\n\n            if (feature.geometry) {\n                this.renderer.eraseFeatures(feature);\n            }\n                    \n            //in the case that this feature is one of the selected features, \n            // remove it from that array as well.\n            if (OpenLayers.Util.indexOf(this.selectedFeatures, feature) != -1){\n                OpenLayers.Util.removeItem(this.selectedFeatures, feature);\n            }\n\n            if (notify) {\n                this.events.triggerEvent(\"featureremoved\", {\n                    feature: feature\n                });\n            }\n        }\n\n        if (notify) {\n            this.events.triggerEvent(\"featuresremoved\", {features: features});\n        }\n    },\n    \n    /** \n     * APIMethod: removeAllFeatures\n     * Remove all features from the layer.\n     *\n     * Parameters:\n     * options - {Object} Optional properties for changing behavior of the\n     *     removal.\n     *\n     * Valid options:\n     * silent - {Boolean} Suppress event triggering.  Default is false.\n     */\n    removeAllFeatures: function(options) {\n        var notify = !options || !options.silent;\n        var features = this.features;\n        if (notify) {\n            this.events.triggerEvent(\n                \"beforefeaturesremoved\", {features: features}\n            );\n        }\n        var feature;\n        for (var i = features.length-1; i >= 0; i--) {\n            feature = features[i];\n            if (notify) {\n                this.events.triggerEvent(\"beforefeatureremoved\", {\n                    feature: feature\n                });\n            }\n            feature.layer = null;\n            if (notify) {\n                this.events.triggerEvent(\"featureremoved\", {\n                    feature: feature\n                });\n            }\n        }\n        this.renderer.clear();\n        this.features = [];\n        this.unrenderedFeatures = {};\n        this.selectedFeatures = [];\n        if (notify) {\n            this.events.triggerEvent(\"featuresremoved\", {features: features});\n        }\n    },\n\n    /**\n     * APIMethod: destroyFeatures\n     * Erase and destroy features on the layer.\n     *\n     * Parameters:\n     * features - {Array(<OpenLayers.Feature.Vector>)} An optional array of\n     *     features to destroy.  If not supplied, all features on the layer\n     *     will be destroyed.\n     * options - {Object}\n     */\n    destroyFeatures: function(features, options) {\n        var all = (features == undefined); // evaluates to true if\n                                           // features is null\n        if(all) {\n            features = this.features;\n        }\n        if(features) {\n            this.removeFeatures(features, options);\n            for(var i=features.length-1; i>=0; i--) {\n                features[i].destroy();\n            }\n        }\n    },\n\n    /**\n     * APIMethod: drawFeature\n     * Draw (or redraw) a feature on the layer.  If the optional style argument\n     * is included, this style will be used.  If no style is included, the\n     * feature's style will be used.  If the feature doesn't have a style,\n     * the layer's style will be used.\n     * \n     * This function is not designed to be used when adding features to \n     * the layer (use addFeatures instead). It is meant to be used when\n     * the style of a feature has changed, or in some other way needs to \n     * visually updated *after* it has already been added to a layer. You\n     * must add the feature to the layer for most layer-related events to \n     * happen.\n     *\n     * Parameters: \n     * feature - {<OpenLayers.Feature.Vector>} \n     * style - {String | Object} Named render intent or full symbolizer object.\n     */\n    drawFeature: function(feature, style) {\n        // don't try to draw the feature with the renderer if the layer is not \n        // drawn itself\n        if (!this.drawn) {\n            return;\n        }\n        if (typeof style != \"object\") {\n            if(!style && feature.state === OpenLayers.State.DELETE) {\n                style = \"delete\";\n            }\n            var renderIntent = style || feature.renderIntent;\n            style = feature.style || this.style;\n            if (!style) {\n                style = this.styleMap.createSymbolizer(feature, renderIntent);\n            }\n        }\n        \n        var drawn = this.renderer.drawFeature(feature, style);\n        //TODO remove the check for null when we get rid of Renderer.SVG\n        if (drawn === false || drawn === null) {\n            this.unrenderedFeatures[feature.id] = feature;\n        } else {\n            delete this.unrenderedFeatures[feature.id];\n        }\n    },\n    \n    /**\n     * Method: eraseFeatures\n     * Erase features from the layer.\n     *\n     * Parameters:\n     * features - {Array(<OpenLayers.Feature.Vector>)} \n     */\n    eraseFeatures: function(features) {\n        this.renderer.eraseFeatures(features);\n    },\n\n    /**\n     * Method: getFeatureFromEvent\n     * Given an event, return a feature if the event occurred over one.\n     * Otherwise, return null.\n     *\n     * Parameters:\n     * evt - {Event} \n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector>} A feature if one was under the event.\n     */\n    getFeatureFromEvent: function(evt) {\n        if (!this.renderer) {\n            throw new Error('getFeatureFromEvent called on layer with no ' +\n                            'renderer. This usually means you destroyed a ' +\n                            'layer, but not some handler which is associated ' +\n                            'with it.');\n        }\n        var feature = null;\n        var featureId = this.renderer.getFeatureIdFromEvent(evt);\n        if (featureId) {\n            if (typeof featureId === \"string\") {\n                feature = this.getFeatureById(featureId);\n            } else {\n                feature = featureId;\n            }\n        }\n        return feature;\n    },\n\n    /**\n     * APIMethod: getFeatureBy\n     * Given a property value, return the feature if it exists in the features array\n     *\n     * Parameters:\n     * property - {String}\n     * value - {String}\n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector>} A feature corresponding to the given\n     * property value or null if there is no such feature.\n     */\n    getFeatureBy: function(property, value) {\n        //TBD - would it be more efficient to use a hash for this.features?\n        var feature = null;\n        for(var i=0, len=this.features.length; i<len; ++i) {\n            if(this.features[i][property] == value) {\n                feature = this.features[i];\n                break;\n            }\n        }\n        return feature;\n    },\n\n    /**\n     * APIMethod: getFeatureById\n     * Given a feature id, return the feature if it exists in the features array\n     *\n     * Parameters:\n     * featureId - {String}\n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector>} A feature corresponding to the given\n     * featureId or null if there is no such feature.\n     */\n    getFeatureById: function(featureId) {\n        return this.getFeatureBy('id', featureId);\n    },\n\n    /**\n     * APIMethod: getFeatureByFid\n     * Given a feature fid, return the feature if it exists in the features array\n     *\n     * Parameters:\n     * featureFid - {String}\n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector>} A feature corresponding to the given\n     * featureFid or null if there is no such feature.\n     */\n    getFeatureByFid: function(featureFid) {\n        return this.getFeatureBy('fid', featureFid);\n    },\n    \n    /**\n     * APIMethod: getFeaturesByAttribute\n     * Returns an array of features that have the given attribute key set to the\n     * given value. Comparison of attribute values takes care of datatypes, e.g.\n     * the string '1234' is not equal to the number 1234.\n     *\n     * Parameters:\n     * attrName - {String}\n     * attrValue - {Mixed}\n     *\n     * Returns:\n     * Array({<OpenLayers.Feature.Vector>}) An array of features that have the \n     * passed named attribute set to the given value.\n     */\n    getFeaturesByAttribute: function(attrName, attrValue) {\n        var i,\n            feature,    \n            len = this.features.length,\n            foundFeatures = [];\n        for(i = 0; i < len; i++) {            \n            feature = this.features[i];\n            if(feature && feature.attributes) {\n                if (feature.attributes[attrName] === attrValue) {\n                    foundFeatures.push(feature);\n                }\n            }\n        }\n        return foundFeatures;\n    },\n\n    /**\n     * Unselect the selected features\n     * i.e. clears the featureSelection array\n     * change the style back\n    clearSelection: function() {\n\n       var vectorLayer = this.map.vectorLayer;\n        for (var i = 0; i < this.map.featureSelection.length; i++) {\n            var featureSelection = this.map.featureSelection[i];\n            vectorLayer.drawFeature(featureSelection, vectorLayer.style);\n        }\n        this.map.featureSelection = [];\n    },\n     */\n\n\n    /**\n     * APIMethod: onFeatureInsert\n     * method called after a feature is inserted.\n     * Does nothing by default. Override this if you\n     * need to do something on feature updates.\n     *\n     * Parameters: \n     * feature - {<OpenLayers.Feature.Vector>} \n     */\n    onFeatureInsert: function(feature) {\n    },\n    \n    /**\n     * APIMethod: preFeatureInsert\n     * method called before a feature is inserted.\n     * Does nothing by default. Override this if you\n     * need to do something when features are first added to the\n     * layer, but before they are drawn, such as adjust the style.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} \n     */\n    preFeatureInsert: function(feature) {\n    },\n\n    /** \n     * APIMethod: getDataExtent\n     * Calculates the max extent which includes all of the features.\n     * \n     * Returns:\n     * {<OpenLayers.Bounds>} or null if the layer has no features with\n     * geometries.\n     */\n    getDataExtent: function () {\n        var maxExtent = null;\n        var features = this.features;\n        if(features && (features.length > 0)) {\n            var geometry = null;\n            for(var i=0, len=features.length; i<len; i++) {\n                geometry = features[i].geometry;\n                if (geometry) {\n                    if (maxExtent === null) {\n                        maxExtent = new OpenLayers.Bounds();\n                    }\n                    maxExtent.extend(geometry.getBounds());\n                }\n            }\n        }\n        return maxExtent;\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.Vector\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Layer/Vector.js\n * @requires OpenLayers/Geometry/Polygon.js\n */\n\n/**\n * Class: OpenLayers.Layer.PointGrid\n * A point grid layer dynamically generates a regularly spaced grid of point\n *     features.  This is a specialty layer for cases where an application needs\n *     a regular grid of points.  It can be used, for example, in an editing\n *     environment to snap to a grid.\n *\n * Create a new vector layer with the <OpenLayers.Layer.PointGrid> constructor.\n * (code)\n * // create a grid with points spaced at 10 map units\n * var points = new OpenLayers.Layer.PointGrid({dx: 10, dy: 10});\n *\n * // create a grid with different x/y spacing rotated 15 degrees clockwise.\n * var points = new OpenLayers.Layer.PointGrid({dx: 5, dy: 10, rotation: 15});\n * (end)\n *\n * Inherits from:\n *  - <OpenLayers.Layer.Vector>\n */\nOpenLayers.Layer.PointGrid = OpenLayers.Class(OpenLayers.Layer.Vector, {\n\n    /**\n     * APIProperty: dx\n     * {Number} Point grid spacing in the x-axis direction (map units).  \n     * Read-only.  Use the <setSpacing> method to modify this value.\n     */\n    dx: null,\n\n    /**\n     * APIProperty: dy\n     * {Number} Point grid spacing in the y-axis direction (map units).  \n     * Read-only.  Use the <setSpacing> method to modify this value.\n     */\n    dy: null,\n\n    /**\n     * APIProperty: ratio\n     * {Number} Ratio of the desired grid size to the map viewport size.  \n     * Default is 1.5.  Larger ratios mean the grid is recalculated less often \n     * while panning.  The <maxFeatures> setting has precedence when determining\n     * grid size.  Read-only.  Use the <setRatio> method to modify this value.\n     */\n    ratio: 1.5,\n\n    /**\n     * APIProperty: maxFeatures\n     * {Number} The maximum number of points to generate in the grid.  Default\n     * is 250.  Read-only.  Use the <setMaxFeatures> method to modify this value.\n     */\n    maxFeatures: 250,\n\n    /**\n     * APIProperty: rotation\n     * {Number} Grid rotation (in degrees clockwise from the positive x-axis).\n     * Default is 0.  Read-only.  Use the <setRotation> method to modify this\n     * value.\n     */\n    rotation: 0,\n\n    /**\n     * APIProperty: origin\n     * {<OpenLayers.LonLat>} Grid origin.  The grid lattice will be aligned with \n     * the origin.  If not set at construction, the center of the map's maximum \n     * extent is used.  Read-only.  Use the <setOrigin> method to modify this \n     * value.\n     */\n    origin: null,\n\n    /**\n     * Property: gridBounds\n     * {<OpenLayers.Bounds>}  Internally cached grid bounds (with optional \n     * rotation applied).\n     */\n    gridBounds: null,\n\n    /**\n     * Constructor: OpenLayers.Layer.PointGrid\n     * Creates a new point grid layer.\n     *\n     * Parameters:\n     * config - {Object} An object containing all configuration properties for\n     *     the layer.  The <dx> and <dy> properties are required to be set at \n     *     construction.  Any other layer properties may be set in this object.\n     */\n    initialize: function(config) {\n        config = config || {};\n        OpenLayers.Layer.Vector.prototype.initialize.apply(this, [config.name, config]);\n    },\n    \n    /** \n     * Method: setMap\n     * The layer has been added to the map. \n     * \n     * Parameters:\n     * map - {<OpenLayers.Map>} \n     */\n    setMap: function(map) {        \n        OpenLayers.Layer.Vector.prototype.setMap.apply(this, arguments);\n        map.events.register(\"moveend\", this, this.onMoveEnd);\n    },\n\n    /**\n     * Method: removeMap\n     * The layer has been removed from the map.\n     *\n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    removeMap: function(map) {\n        map.events.unregister(\"moveend\", this, this.onMoveEnd);\n        OpenLayers.Layer.Vector.prototype.removeMap.apply(this, arguments);\n    },\n    \n    /**\n     * APIMethod: setRatio\n     * Set the grid <ratio> property and update the grid.  Can only be called\n     *     after the layer has been added to a map with a center/extent.\n     *\n     * Parameters:\n     * ratio - {Number}\n     */\n    setRatio: function(ratio) {\n        this.ratio = ratio;\n        this.updateGrid(true);\n    },\n    \n    /**\n     * APIMethod: setMaxFeatures\n     * Set the grid <maxFeatures> property and update the grid.  Can only be \n     *     called after the layer has been added to a map with a center/extent.\n     *\n     * Parameters:\n     * maxFeatures - {Number}\n     */\n    setMaxFeatures: function(maxFeatures) {\n        this.maxFeatures = maxFeatures;\n        this.updateGrid(true);\n    },\n\n    /**\n     * APIMethod: setSpacing\n     * Set the grid <dx> and <dy> properties and update the grid.  If only one\n     *     argument is provided, it will be set as <dx> and <dy>.  Can only be \n     *     called after the layer has been added to a map with a center/extent.\n     *\n     * Parameters:\n     * dx - {Number}\n     * dy - {Number}\n     */\n    setSpacing: function(dx, dy) {\n        this.dx = dx;\n        this.dy = dy || dx;\n        this.updateGrid(true);\n    },\n    \n    /**\n     * APIMethod: setOrigin\n     * Set the grid <origin> property and update the grid.  Can only be called\n     *     after the layer has been added to a map with a center/extent.\n     *\n     * Parameters:\n     * origin - {<OpenLayers.LonLat>}\n     */\n    setOrigin: function(origin) {\n        this.origin = origin;\n        this.updateGrid(true);\n    },\n    \n    /**\n     * APIMethod: getOrigin\n     * Get the grid <origin> property.\n     *\n     * Returns:\n     * {<OpenLayers.LonLat>} The grid origin.\n     */\n    getOrigin: function() {\n        if (!this.origin) {\n            this.origin = this.map.getExtent().getCenterLonLat();\n        }\n        return this.origin;\n    },\n    \n    /**\n     * APIMethod: setRotation\n     * Set the grid <rotation> property and update the grid.  Rotation values\n     *     are in degrees clockwise from the positive x-axis (negative values\n     *     for counter-clockwise rotation).  Can only be called after the layer \n     *     has been added to a map with a center/extent.\n     *\n     * Parameters:\n     * rotation - {Number} Degrees clockwise from the positive x-axis.\n     */\n    setRotation: function(rotation) {\n        this.rotation = rotation;\n        this.updateGrid(true);\n    },\n    \n    /**\n     * Method: onMoveEnd\n     * Listener for map \"moveend\" events.\n     */\n    onMoveEnd: function() {\n        this.updateGrid();\n    },\n    \n    /**\n     * Method: getViewBounds\n     * Gets the (potentially rotated) view bounds for grid calculations.\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>}\n     */\n    getViewBounds: function() {\n        var bounds = this.map.getExtent();\n        if (this.rotation) {\n            var origin = this.getOrigin();\n            var rotationOrigin = new OpenLayers.Geometry.Point(origin.lon, origin.lat);\n            var rect = bounds.toGeometry();\n            rect.rotate(-this.rotation, rotationOrigin);\n            bounds = rect.getBounds();\n        }\n        return bounds;\n    },\n    \n    /**\n     * Method: updateGrid\n     * Update the grid.\n     *\n     * Parameters:\n     * force - {Boolean} Update the grid even if the previous bounds are still\n     *     valid.\n     */\n    updateGrid: function(force) {\n        if (force || this.invalidBounds()) {\n            var viewBounds = this.getViewBounds();\n            var origin = this.getOrigin();\n            var rotationOrigin = new OpenLayers.Geometry.Point(origin.lon, origin.lat);\n            var viewBoundsWidth = viewBounds.getWidth();\n            var viewBoundsHeight = viewBounds.getHeight();\n            var aspectRatio = viewBoundsWidth / viewBoundsHeight;\n            var maxHeight = Math.sqrt(this.dx * this.dy * this.maxFeatures / aspectRatio);\n            var maxWidth = maxHeight * aspectRatio; \n            var gridWidth = Math.min(viewBoundsWidth * this.ratio, maxWidth);\n            var gridHeight = Math.min(viewBoundsHeight * this.ratio, maxHeight);\n            var center = viewBounds.getCenterLonLat();\n            this.gridBounds = new OpenLayers.Bounds(\n                center.lon - (gridWidth / 2),\n                center.lat - (gridHeight / 2),\n                center.lon + (gridWidth / 2),\n                center.lat + (gridHeight / 2)\n            );\n            var rows = Math.floor(gridHeight / this.dy);\n            var cols = Math.floor(gridWidth / this.dx);\n            var gridLeft = origin.lon + (this.dx * Math.ceil((this.gridBounds.left - origin.lon) / this.dx));\n            var gridBottom = origin.lat + (this.dy * Math.ceil((this.gridBounds.bottom - origin.lat) / this.dy));\n            var features = new Array(rows * cols);\n            var x, y, point;\n            for (var i=0; i<cols; ++i) {\n                x = gridLeft + (i * this.dx);\n                for (var j=0; j<rows; ++j) {\n                    y = gridBottom + (j * this.dy);\n                    point = new OpenLayers.Geometry.Point(x, y);\n                    if (this.rotation) {\n                        point.rotate(this.rotation, rotationOrigin);\n                    }\n                    features[(i*rows)+j] = new OpenLayers.Feature.Vector(point);\n                }\n            }\n            this.destroyFeatures(this.features, {silent: true});\n            this.addFeatures(features, {silent: true});\n        }\n    },\n\n    /**\n     * Method: invalidBounds\n     * Determine whether the previously generated point grid is invalid. \n     *     This occurs when the map bounds extends beyond the previously \n     *     generated grid bounds.\n     *\n     * Returns:\n     * {Boolean} \n     */\n    invalidBounds: function() {\n        return !this.gridBounds || !this.gridBounds.containsBounds(this.getViewBounds());\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.PointGrid\"\n    \n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Layer/Vector.js\n */\n\n/**\n * Class: OpenLayers.Layer.Vector.RootContainer\n * A special layer type to combine multiple vector layers inside a single\n *     renderer root container. This class is not supposed to be instantiated\n *     from user space, it is a helper class for controls that require event\n *     processing for multiple vector layers.\n *\n * Inherits from:\n *  - <OpenLayers.Layer.Vector>\n */\nOpenLayers.Layer.Vector.RootContainer = OpenLayers.Class(OpenLayers.Layer.Vector, {\n    \n    /**\n     * Property: displayInLayerSwitcher\n     * Set to false for this layer type\n     */\n    displayInLayerSwitcher: false,\n    \n    /**\n     * APIProperty: layers\n     * Layers that are attached to this container. Required config option.\n     */\n    layers: null,\n    \n    /**\n     * Constructor: OpenLayers.Layer.Vector.RootContainer\n     * Create a new root container for multiple vector layer. This constructor\n     * is not supposed to be used from user space, it is only to be used by\n     * controls that need feature selection across multiple vector layers.\n     *\n     * Parameters:\n     * name - {String} A name for the layer\n     * options - {Object} Optional object with non-default properties to set on\n     *           the layer.\n     * \n     * Required options properties:\n     * layers - {Array(<OpenLayers.Layer.Vector>)} The layers managed by this\n     *     container\n     *\n     * Returns:\n     * {<OpenLayers.Layer.Vector.RootContainer>} A new vector layer root\n     *     container\n     */\n    \n    /**\n     * Method: display\n     */\n    display: function() {},\n    \n    /**\n     * Method: getFeatureFromEvent\n     * walk through the layers to find the feature returned by the event\n     * \n     * Parameters:\n     * evt - {Object} event object with a feature property\n     * \n     * Returns:\n     * {<OpenLayers.Feature.Vector>}\n     */\n    getFeatureFromEvent: function(evt) {\n        var layers = this.layers;\n        var feature;\n        for(var i=0; i<layers.length; i++) {\n            feature = layers[i].getFeatureFromEvent(evt);\n            if(feature) {\n                return feature;\n            }\n        }\n    },\n    \n    /**\n     * Method: setMap\n     * \n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    setMap: function(map) {\n        OpenLayers.Layer.Vector.prototype.setMap.apply(this, arguments);\n        this.collectRoots();\n        map.events.register(\"changelayer\", this, this.handleChangeLayer);\n    },\n    \n    /**\n     * Method: removeMap\n     * \n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    removeMap: function(map) {\n        map.events.unregister(\"changelayer\", this, this.handleChangeLayer);\n        this.resetRoots();\n        OpenLayers.Layer.Vector.prototype.removeMap.apply(this, arguments);\n    },\n    \n    /**\n     * Method: collectRoots\n     * Collects the root nodes of all layers this control is configured with\n     * and moveswien the nodes to this control's layer\n     */\n    collectRoots: function() {\n        var layer;\n        // walk through all map layers, because we want to keep the order\n        for(var i=0; i<this.map.layers.length; ++i) {\n            layer = this.map.layers[i];\n            if(OpenLayers.Util.indexOf(this.layers, layer) != -1) {\n                layer.renderer.moveRoot(this.renderer);\n            }\n        }\n    },\n    \n    /**\n     * Method: resetRoots\n     * Resets the root nodes back into the layers they belong to.\n     */\n    resetRoots: function() {\n        var layer;\n        for(var i=0; i<this.layers.length; ++i) {\n            layer = this.layers[i];\n            if(this.renderer && layer.renderer.getRenderLayerId() == this.id) {\n                this.renderer.moveRoot(layer.renderer);\n            }\n        }\n    },\n    \n    /**\n     * Method: handleChangeLayer\n     * Event handler for the map's changelayer event. We need to rebuild\n     * this container's layer dom if order of one of its layers changes.\n     * This handler is added with the setMap method, and removed with the\n     * removeMap method.\n     * \n     * Parameters:\n     * evt - {Object}\n     */\n    handleChangeLayer: function(evt) {\n        var layer = evt.layer;\n        if(evt.property == \"order\" &&\n                        OpenLayers.Util.indexOf(this.layers, layer) != -1) {\n            this.resetRoots();\n            this.collectRoots();\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.Vector.RootContainer\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n */\n\n/**\n * Class: OpenLayers.Strategy\n * Abstract vector layer strategy class.  Not to be instantiated directly.  Use\n *     one of the strategy subclasses instead.\n */\nOpenLayers.Strategy = OpenLayers.Class({\n    \n    /**\n     * Property: layer\n     * {<OpenLayers.Layer.Vector>} The layer this strategy belongs to.\n     */\n    layer: null,\n    \n    /**\n     * Property: options\n     * {Object} Any options sent to the constructor.\n     */\n    options: null,\n\n    /** \n     * Property: active \n     * {Boolean} The control is active.\n     */\n    active: null,\n\n    /**\n     * Property: autoActivate\n     * {Boolean} The creator of the strategy can set autoActivate to false\n     *      to fully control when the protocol is activated and deactivated.\n     *      Defaults to true.\n     */\n    autoActivate: true,\n\n    /**\n     * Property: autoDestroy\n     * {Boolean} The creator of the strategy can set autoDestroy to false\n     *      to fully control when the strategy is destroyed. Defaults to\n     *      true.\n     */\n    autoDestroy: true,\n\n    /**\n     * Constructor: OpenLayers.Strategy\n     * Abstract class for vector strategies.  Create instances of a subclass.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     */\n    initialize: function(options) {\n        OpenLayers.Util.extend(this, options);\n        this.options = options;\n        // set the active property here, so that user cannot override it\n        this.active = false;\n    },\n    \n    /**\n     * APIMethod: destroy\n     * Clean up the strategy.\n     */\n    destroy: function() {\n        this.deactivate();\n        this.layer = null;\n        this.options = null;\n    },\n\n    /**\n     * Method: setLayer\n     * Called to set the <layer> property.\n     *\n     * Parameters:\n     * layer - {<OpenLayers.Layer.Vector>}\n     */\n    setLayer: function(layer) {\n        this.layer = layer;\n    },\n    \n    /**\n     * Method: activate\n     * Activate the strategy.  Register any listeners, do appropriate setup.\n     *\n     * Returns:\n     * {Boolean} True if the strategy was successfully activated or false if\n     *      the strategy was already active.\n     */\n    activate: function() {\n        if (!this.active) {\n            this.active = true;\n            return true;\n        }\n        return false;\n    },\n    \n    /**\n     * Method: deactivate\n     * Deactivate the strategy.  Unregister any listeners, do appropriate\n     *     tear-down.\n     *\n     * Returns:\n     * {Boolean} True if the strategy was successfully deactivated or false if\n     *      the strategy was already inactive.\n     */\n    deactivate: function() {\n        if (this.active) {\n            this.active = false;\n            return true;\n        }\n        return false;\n    },\n   \n    CLASS_NAME: \"OpenLayers.Strategy\" \n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Strategy.js\n * @requires OpenLayers/Filter.js\n */\n\n/**\n * Class: OpenLayers.Strategy.Filter\n * Strategy for limiting features that get added to a layer by \n *     evaluating a filter.  The strategy maintains a cache of\n *     all features until removeFeatures is called on the layer.\n *\n * Inherits from:\n *  - <OpenLayers.Strategy>\n */\nOpenLayers.Strategy.Filter = OpenLayers.Class(OpenLayers.Strategy, {\n    \n    /**\n     * APIProperty: filter\n     * {<OpenLayers.Filter>}  Filter for limiting features sent to the layer.\n     *     Use the <setFilter> method to update this filter after construction.\n     */\n    filter: null,\n    \n    /**\n     * Property: cache\n     * {Array(<OpenLayers.Feature.Vector>)} List of currently cached\n     *     features.\n     */\n    cache: null,\n    \n    /**\n     * Property: caching\n     * {Boolean} The filter is currently caching features.\n     */\n    caching: false,\n    \n    /**\n     * Constructor: OpenLayers.Strategy.Filter\n     * Create a new filter strategy.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     */\n\n    /**\n     * APIMethod: activate\n     * Activate the strategy.  Register any listeners, do appropriate setup.\n     *     By default, this strategy automatically activates itself when a layer\n     *     is added to a map.\n     *\n     * Returns:\n     * {Boolean} True if the strategy was successfully activated or false if\n     *      the strategy was already active.\n     */\n    activate: function() {\n        var activated = OpenLayers.Strategy.prototype.activate.apply(this, arguments);\n        if (activated) {\n            this.cache = [];\n            this.layer.events.on({\n                \"beforefeaturesadded\": this.handleAdd,\n                \"beforefeaturesremoved\": this.handleRemove,\n                scope: this\n            });\n        }\n        return activated;\n    },\n    \n    /**\n     * APIMethod: deactivate\n     * Deactivate the strategy.  Clear the feature cache.\n     *\n     * Returns:\n     * {Boolean} True if the strategy was successfully deactivated or false if\n     *      the strategy was already inactive.\n     */\n    deactivate: function() {\n        this.cache = null;\n        if (this.layer && this.layer.events) {\n            this.layer.events.un({\n                \"beforefeaturesadded\": this.handleAdd,\n                \"beforefeaturesremoved\": this.handleRemove,\n                scope: this\n            });            \n        }\n        return OpenLayers.Strategy.prototype.deactivate.apply(this, arguments);\n    },\n    \n    /**\n     * Method: handleAdd\n     */\n    handleAdd: function(event) {\n        if (!this.caching && this.filter) {\n            var features = event.features;\n            event.features = [];\n            var feature;\n            for (var i=0, ii=features.length; i<ii; ++i) {\n                feature = features[i];\n                if (this.filter.evaluate(feature)) {\n                    event.features.push(feature);\n                } else {\n                    this.cache.push(feature);\n                }\n            }\n        }\n    },\n    \n    /**\n     * Method: handleRemove\n     */\n    handleRemove: function(event) {\n        if (!this.caching) {\n            this.cache = [];\n        }\n    },\n\n    /** \n     * APIMethod: setFilter\n     * Update the filter for this strategy.  This will re-evaluate\n     *     any features on the layer and in the cache.  Only features\n     *     for which filter.evaluate(feature) returns true will be\n     *     added to the layer.  Others will be cached by the strategy.\n     *\n     * Parameters:\n     * filter - {<OpenLayers.Filter>} A filter for evaluating features.\n     */\n    setFilter: function(filter) {\n        this.filter = filter;\n        var previousCache = this.cache;\n        this.cache = [];\n        // look through layer for features to remove from layer\n        this.handleAdd({features: this.layer.features});\n        // cache now contains features to remove from layer\n        if (this.cache.length > 0) {\n            this.caching = true;\n            this.layer.removeFeatures(this.cache.slice());\n            this.caching = false;\n        }\n        // now look through previous cache for features to add to layer\n        if (previousCache.length > 0) {\n            var event = {features: previousCache};\n            this.handleAdd(event);\n            if (event.features.length > 0) {\n                // event has features to add to layer\n                this.caching = true;\n                this.layer.addFeatures(event.features);\n                this.caching = false;\n            }\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Strategy.Filter\"\n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Strategy.js\n */\n\n/**\n * Class: OpenLayers.Strategy.Fixed\n * A simple strategy that requests features once and never requests new data.\n *\n * Inherits from:\n *  - <OpenLayers.Strategy>\n */\nOpenLayers.Strategy.Fixed = OpenLayers.Class(OpenLayers.Strategy, {\n    \n    /**\n     * APIProperty: preload\n     * {Boolean} Load data before layer made visible. Enabling this may result\n     *   in considerable overhead if your application loads many data layers\n     *   that are not visible by default. Default is false.\n     */\n    preload: false,\n\n    /**\n     * Constructor: OpenLayers.Strategy.Fixed\n     * Create a new Fixed strategy.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     */\n\n    /**\n     * Method: activate\n     * Activate the strategy: load data or add listener to load when visible\n     *\n     * Returns:\n     * {Boolean} True if the strategy was successfully activated or false if\n     *      the strategy was already active.\n     */\n    activate: function() {\n        var activated = OpenLayers.Strategy.prototype.activate.apply(this, arguments);\n        if(activated) {\n            this.layer.events.on({\n                \"refresh\": this.load,\n                scope: this\n            });\n            if(this.layer.visibility == true || this.preload) {\n                this.load();\n            } else {\n                this.layer.events.on({\n                    \"visibilitychanged\": this.load,\n                    scope: this\n                });\n            }\n        }\n        return activated;\n    },\n    \n    /**\n     * Method: deactivate\n     * Deactivate the strategy.  Undo what is done in <activate>.\n     * \n     * Returns:\n     * {Boolean} The strategy was successfully deactivated.\n     */\n    deactivate: function() {\n        var deactivated = OpenLayers.Strategy.prototype.deactivate.call(this);\n        if(deactivated) {\n            this.layer.events.un({\n                \"refresh\": this.load,\n                \"visibilitychanged\": this.load,\n                scope: this\n            });\n        }\n        return deactivated;\n    },\n\n    /**\n     * Method: load\n     * Tells protocol to load data and unhooks the visibilitychanged event\n     *\n     * Parameters:\n     * options - {Object} options to pass to protocol read.\n     */\n    load: function(options) {\n        var layer = this.layer;\n        layer.events.triggerEvent(\"loadstart\", {filter: layer.filter});\n        layer.protocol.read(OpenLayers.Util.applyDefaults({\n            callback: this.merge,\n            filter: layer.filter,\n            scope: this\n        }, options));\n        layer.events.un({\n            \"visibilitychanged\": this.load,\n            scope: this\n        });\n    },\n\n    /**\n     * Method: merge\n     * Add all features to the layer.\n     *     If the layer projection differs from the map projection, features\n     *     will be transformed from the layer projection to the map projection.\n     *\n     * Parameters:\n     * resp - {<OpenLayers.Protocol.Response>} The response object passed\n     *      by the protocol.\n     */\n    merge: function(resp) {\n        var layer = this.layer;\n        layer.destroyFeatures();\n        var features = resp.features;\n        if (features && features.length > 0) {\n            var remote = layer.projection;\n            var local = layer.map.getProjectionObject();\n            if(!local.equals(remote)) {\n                var geom;\n                for(var i=0, len=features.length; i<len; ++i) {\n                    geom = features[i].geometry;\n                    if(geom) {\n                        geom.transform(remote, local);\n                    }\n                }\n            }\n            layer.addFeatures(features);\n        }\n        layer.events.triggerEvent(\"loadend\", {response: resp});\n    },\n\n    CLASS_NAME: \"OpenLayers.Strategy.Fixed\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Strategy.js\n */\n\n/**\n * Class: OpenLayers.Strategy.Cluster\n * Strategy for vector feature clustering.\n *\n * Inherits from:\n *  - <OpenLayers.Strategy>\n */\nOpenLayers.Strategy.Cluster = OpenLayers.Class(OpenLayers.Strategy, {\n    \n    /**\n     * APIProperty: distance\n     * {Integer} Pixel distance between features that should be considered a\n     *     single cluster.  Default is 20 pixels.\n     */\n    distance: 20,\n    \n    /**\n     * APIProperty: threshold\n     * {Integer} Optional threshold below which original features will be\n     *     added to the layer instead of clusters.  For example, a threshold\n     *     of 3 would mean that any time there are 2 or fewer features in\n     *     a cluster, those features will be added directly to the layer instead\n     *     of a cluster representing those features.  Default is null (which is\n     *     equivalent to 1 - meaning that clusters may contain just one feature).\n     */\n    threshold: null,\n    \n    /**\n     * Property: features\n     * {Array(<OpenLayers.Feature.Vector>)} Cached features.\n     */\n    features: null,\n    \n    /**\n     * Property: clusters\n     * {Array(<OpenLayers.Feature.Vector>)} Calculated clusters.\n     */\n    clusters: null,\n    \n    /**\n     * Property: clustering\n     * {Boolean} The strategy is currently clustering features.\n     */\n    clustering: false,\n    \n    /**\n     * Property: resolution\n     * {Float} The resolution (map units per pixel) of the current cluster set.\n     */\n    resolution: null,\n\n    /**\n     * Constructor: OpenLayers.Strategy.Cluster\n     * Create a new clustering strategy.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     */\n    \n    /**\n     * APIMethod: activate\n     * Activate the strategy.  Register any listeners, do appropriate setup.\n     * \n     * Returns:\n     * {Boolean} The strategy was successfully activated.\n     */\n    activate: function() {\n        var activated = OpenLayers.Strategy.prototype.activate.call(this);\n        if(activated) {\n            this.layer.events.on({\n                \"beforefeaturesadded\": this.cacheFeatures,\n                \"featuresremoved\": this.clearCache,\n                \"moveend\": this.cluster,\n                scope: this\n            });\n        }\n        return activated;\n    },\n    \n    /**\n     * APIMethod: deactivate\n     * Deactivate the strategy.  Unregister any listeners, do appropriate\n     *     tear-down.\n     * \n     * Returns:\n     * {Boolean} The strategy was successfully deactivated.\n     */\n    deactivate: function() {\n        var deactivated = OpenLayers.Strategy.prototype.deactivate.call(this);\n        if(deactivated) {\n            this.clearCache();\n            this.layer.events.un({\n                \"beforefeaturesadded\": this.cacheFeatures,\n                \"featuresremoved\": this.clearCache,\n                \"moveend\": this.cluster,\n                scope: this\n            });\n        }\n        return deactivated;\n    },\n    \n    /**\n     * Method: cacheFeatures\n     * Cache features before they are added to the layer.\n     *\n     * Parameters:\n     * event - {Object} The event that this was listening for.  This will come\n     *     with a batch of features to be clustered.\n     *     \n     * Returns:\n     * {Boolean} False to stop features from being added to the layer.\n     */\n    cacheFeatures: function(event) {\n        var propagate = true;\n        if(!this.clustering) {\n            this.clearCache();\n            this.features = event.features;\n            this.cluster();\n            propagate = false;\n        }\n        return propagate;\n    },\n    \n    /**\n     * Method: clearCache\n     * Clear out the cached features.\n     */\n    clearCache: function() {\n        if(!this.clustering) {\n            this.features = null;\n        }\n    },\n    \n    /**\n     * Method: cluster\n     * Cluster features based on some threshold distance.\n     *\n     * Parameters:\n     * event - {Object} The event received when cluster is called as a\n     *     result of a moveend event.\n     */\n    cluster: function(event) {\n        if((!event || event.zoomChanged) && this.features) {\n            var resolution = this.layer.map.getResolution();\n            if(resolution != this.resolution || !this.clustersExist()) {\n                this.resolution = resolution;\n                var clusters = [];\n                var feature, clustered, cluster;\n                for(var i=0; i<this.features.length; ++i) {\n                    feature = this.features[i];\n                    if(feature.geometry) {\n                        clustered = false;\n                        for(var j=clusters.length-1; j>=0; --j) {\n                            cluster = clusters[j];\n                            if(this.shouldCluster(cluster, feature)) {\n                                this.addToCluster(cluster, feature);\n                                clustered = true;\n                                break;\n                            }\n                        }\n                        if(!clustered) {\n                            clusters.push(this.createCluster(this.features[i]));\n                        }\n                    }\n                }\n                this.clustering = true;\n                this.layer.removeAllFeatures();\n                this.clustering = false;\n                if(clusters.length > 0) {\n                    if(this.threshold > 1) {\n                        var clone = clusters.slice();\n                        clusters = [];\n                        var candidate;\n                        for(var i=0, len=clone.length; i<len; ++i) {\n                            candidate = clone[i];\n                            if(candidate.attributes.count < this.threshold) {\n                                Array.prototype.push.apply(clusters, candidate.cluster);\n                            } else {\n                                clusters.push(candidate);\n                            }\n                        }\n                    }\n                    this.clustering = true;\n                    // A legitimate feature addition could occur during this\n                    // addFeatures call.  For clustering to behave well, features\n                    // should be removed from a layer before requesting a new batch.\n                    this.layer.addFeatures(clusters);\n                    this.clustering = false;\n                }\n                this.clusters = clusters;\n            }\n        }\n    },\n    \n    /**\n     * Method: clustersExist\n     * Determine whether calculated clusters are already on the layer.\n     *\n     * Returns:\n     * {Boolean} The calculated clusters are already on the layer.\n     */\n    clustersExist: function() {\n        var exist = false;\n        if(this.clusters && this.clusters.length > 0 &&\n           this.clusters.length == this.layer.features.length) {\n            exist = true;\n            for(var i=0; i<this.clusters.length; ++i) {\n                if(this.clusters[i] != this.layer.features[i]) {\n                    exist = false;\n                    break;\n                }\n            }\n        }\n        return exist;\n    },\n    \n    /**\n     * Method: shouldCluster\n     * Determine whether to include a feature in a given cluster.\n     *\n     * Parameters:\n     * cluster - {<OpenLayers.Feature.Vector>} A cluster.\n     * feature - {<OpenLayers.Feature.Vector>} A feature.\n     *\n     * Returns:\n     * {Boolean} The feature should be included in the cluster.\n     */\n    shouldCluster: function(cluster, feature) {\n        var cc = cluster.geometry.getBounds().getCenterLonLat();\n        var fc = feature.geometry.getBounds().getCenterLonLat();\n        var distance = (\n            Math.sqrt(\n                Math.pow((cc.lon - fc.lon), 2) + Math.pow((cc.lat - fc.lat), 2)\n            ) / this.resolution\n        );\n        return (distance <= this.distance);\n    },\n    \n    /**\n     * Method: addToCluster\n     * Add a feature to a cluster.\n     *\n     * Parameters:\n     * cluster - {<OpenLayers.Feature.Vector>} A cluster.\n     * feature - {<OpenLayers.Feature.Vector>} A feature.\n     */\n    addToCluster: function(cluster, feature) {\n        cluster.cluster.push(feature);\n        cluster.attributes.count += 1;\n    },\n    \n    /**\n     * Method: createCluster\n     * Given a feature, create a cluster.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector>} A cluster.\n     */\n    createCluster: function(feature) {\n        var center = feature.geometry.getBounds().getCenterLonLat();\n        var cluster = new OpenLayers.Feature.Vector(\n            new OpenLayers.Geometry.Point(center.lon, center.lat),\n            {count: 1}\n        );\n        cluster.cluster = [feature];\n        return cluster;\n    },\n\n    CLASS_NAME: \"OpenLayers.Strategy.Cluster\" \n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Strategy.js\n */\n\n/**\n * Class: OpenLayers.Strategy.Paging\n * Strategy for vector feature paging\n *\n * Inherits from:\n *  - <OpenLayers.Strategy>\n */\nOpenLayers.Strategy.Paging = OpenLayers.Class(OpenLayers.Strategy, {\n    \n    /**\n     * Property: features\n     * {Array(<OpenLayers.Feature.Vector>)} Cached features.\n     */\n    features: null,\n    \n    /**\n     * Property: length\n     * {Integer} Number of features per page.  Default is 10.\n     */\n    length: 10,\n    \n    /**\n     * Property: num\n     * {Integer} The currently displayed page number.\n     */\n    num: null,\n    \n    /**\n     * Property: paging\n     * {Boolean} The strategy is currently changing pages.\n     */\n    paging: false,\n\n    /**\n     * Constructor: OpenLayers.Strategy.Paging\n     * Create a new paging strategy.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     */\n    \n    /**\n     * APIMethod: activate\n     * Activate the strategy.  Register any listeners, do appropriate setup.\n     * \n     * Returns:\n     * {Boolean} The strategy was successfully activated.\n     */\n    activate: function() {\n        var activated = OpenLayers.Strategy.prototype.activate.call(this);\n        if(activated) {\n            this.layer.events.on({\n                \"beforefeaturesadded\": this.cacheFeatures,\n                scope: this\n            });\n        }\n        return activated;\n    },\n    \n    /**\n     * APIMethod: deactivate\n     * Deactivate the strategy.  Unregister any listeners, do appropriate\n     *     tear-down.\n     * \n     * Returns:\n     * {Boolean} The strategy was successfully deactivated.\n     */\n    deactivate: function() {\n        var deactivated = OpenLayers.Strategy.prototype.deactivate.call(this);\n        if(deactivated) {\n            this.clearCache();\n            this.layer.events.un({\n                \"beforefeaturesadded\": this.cacheFeatures,\n                scope: this\n            });\n        }\n        return deactivated;\n    },\n    \n    /**\n     * Method: cacheFeatures\n     * Cache features before they are added to the layer.\n     *\n     * Parameters:\n     * event - {Object} The event that this was listening for.  This will come\n     *     with a batch of features to be paged.\n     */\n    cacheFeatures: function(event) {\n        if(!this.paging) {\n            this.clearCache();\n            this.features = event.features;\n            this.pageNext(event);\n        }\n    },\n    \n    /**\n     * Method: clearCache\n     * Clear out the cached features.  This destroys features, assuming\n     *     nothing else has a reference.\n     */\n    clearCache: function() {\n        if(this.features) {\n            for(var i=0; i<this.features.length; ++i) {\n                this.features[i].destroy();\n            }\n        }\n        this.features = null;\n        this.num = null;\n    },\n    \n    /**\n     * APIMethod: pageCount\n     * Get the total count of pages given the current cache of features.\n     *\n     * Returns:\n     * {Integer} The page count.\n     */\n    pageCount: function() {\n        var numFeatures = this.features ? this.features.length : 0;\n        return Math.ceil(numFeatures / this.length);\n    },\n\n    /**\n     * APIMethod: pageNum\n     * Get the zero based page number.\n     *\n     * Returns:\n     * {Integer} The current page number being displayed.\n     */\n    pageNum: function() {\n        return this.num;\n    },\n\n    /**\n     * APIMethod: pageLength\n     * Gets or sets page length.\n     *\n     * Parameters:\n     * newLength - {Integer} Optional length to be set.\n     *\n     * Returns:\n     * {Integer} The length of a page (number of features per page).\n     */\n    pageLength: function(newLength) {\n        if(newLength && newLength > 0) {\n            this.length = newLength;\n        }\n        return this.length;\n    },\n\n    /**\n     * APIMethod: pageNext\n     * Display the next page of features.\n     *\n     * Returns:\n     * {Boolean} A new page was displayed.\n     */\n    pageNext: function(event) {\n        var changed = false;\n        if(this.features) {\n            if(this.num === null) {\n                this.num = -1;\n            }\n            var start = (this.num + 1) * this.length;\n            changed = this.page(start, event);\n        }\n        return changed;\n    },\n\n    /**\n     * APIMethod: pagePrevious\n     * Display the previous page of features.\n     *\n     * Returns:\n     * {Boolean} A new page was displayed.\n     */\n    pagePrevious: function() {\n        var changed = false;\n        if(this.features) {\n            if(this.num === null) {\n                this.num = this.pageCount();\n            }\n            var start = (this.num - 1) * this.length;\n            changed = this.page(start);\n        }\n        return changed;\n    },\n    \n    /**\n     * Method: page\n     * Display the page starting at the given index from the cache.\n     *\n     * Returns:\n     * {Boolean} A new page was displayed.\n     */\n    page: function(start, event) {\n        var changed = false;\n        if(this.features) {\n            if(start >= 0 && start < this.features.length) {\n                var num = Math.floor(start / this.length);\n                if(num != this.num) {\n                    this.paging = true;\n                    var features = this.features.slice(start, start + this.length);\n                    this.layer.removeFeatures(this.layer.features);\n                    this.num = num;\n                    // modify the event if any\n                    if(event && event.features) {\n                        // this.was called by an event listener\n                        event.features = features;\n                    } else {\n                        // this was called directly on the strategy\n                        this.layer.addFeatures(features);\n                    }\n                    this.paging = false;\n                    changed = true;\n                }\n            }\n        }\n        return changed;\n    },\n    \n    CLASS_NAME: \"OpenLayers.Strategy.Paging\" \n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Strategy.js\n * @requires OpenLayers/Filter/Spatial.js\n */\n\n/**\n * Class: OpenLayers.Strategy.BBOX\n * A simple strategy that reads new features when the viewport invalidates\n *     some bounds.\n *\n * Inherits from:\n *  - <OpenLayers.Strategy>\n */\nOpenLayers.Strategy.BBOX = OpenLayers.Class(OpenLayers.Strategy, {\n    \n    /**\n     * Property: bounds\n     * {<OpenLayers.Bounds>} The current data bounds (in the same projection\n     *     as the layer - not always the same projection as the map).\n     */\n    bounds: null,\n    \n    /** \n     * Property: resolution \n     * {Float} The current data resolution. \n     */ \n    resolution: null, \n           \n    /**\n     * APIProperty: ratio\n     * {Float} The ratio of the data bounds to the viewport bounds (in each\n     *     dimension).  Default is 2.\n     */\n    ratio: 2,\n\n    /** \n     * Property: resFactor \n     * {Float} Optional factor used to determine when previously requested \n     *     features are invalid.  If set, the resFactor will be compared to the\n     *     resolution of the previous request to the current map resolution.\n     *     If resFactor > (old / new) and 1/resFactor < (old / new).  If you\n     *     set a resFactor of 1, data will be requested every time the\n     *     resolution changes.  If you set a resFactor of 3, data will be\n     *     requested if the old resolution is 3 times the new, or if the new is\n     *     3 times the old.  If the old bounds do not contain the new bounds\n     *     new data will always be requested (with or without considering\n     *     resFactor). \n     */ \n    resFactor: null, \n    \n    /**\n     * Property: response\n     * {<OpenLayers.Protocol.Response>} The protocol response object returned\n     *      by the layer protocol.\n     */\n    response: null,\n\n    /**\n     * Constructor: OpenLayers.Strategy.BBOX\n     * Create a new BBOX strategy.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     */\n    \n    /**\n     * Method: activate\n     * Set up strategy with regard to reading new batches of remote data.\n     * \n     * Returns:\n     * {Boolean} The strategy was successfully activated.\n     */\n    activate: function() {\n        var activated = OpenLayers.Strategy.prototype.activate.call(this);\n        if(activated) {\n            this.layer.events.on({\n                \"moveend\": this.update,\n                \"refresh\": this.update,\n                \"visibilitychanged\": this.update,\n                scope: this\n            });\n            this.update();\n        }\n        return activated;\n    },\n    \n    /**\n     * Method: deactivate\n     * Tear down strategy with regard to reading new batches of remote data.\n     * \n     * Returns:\n     * {Boolean} The strategy was successfully deactivated.\n     */\n    deactivate: function() {\n        var deactivated = OpenLayers.Strategy.prototype.deactivate.call(this);\n        if(deactivated) {\n            this.layer.events.un({\n                \"moveend\": this.update,\n                \"refresh\": this.update,\n                \"visibilitychanged\": this.update,\n                scope: this\n            });\n        }\n        return deactivated;\n    },\n\n    /**\n     * Method: update\n     * Callback function called on \"moveend\" or \"refresh\" layer events.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will determine\n     *     the behaviour of this Strategy\n     *\n     * Valid options include:\n     * force - {Boolean} if true, new data must be unconditionally read.\n     * noAbort - {Boolean} if true, do not abort previous requests.\n     */\n    update: function(options) {\n        var mapBounds = this.getMapBounds();\n        if (mapBounds !== null && ((options && options.force) ||\n          (this.layer.visibility && this.layer.calculateInRange() && this.invalidBounds(mapBounds)))) {\n            this.calculateBounds(mapBounds);\n            this.resolution = this.layer.map.getResolution(); \n            this.triggerRead(options);\n        }\n    },\n    \n    /**\n     * Method: getMapBounds\n     * Get the map bounds expressed in the same projection as this layer.\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>} Map bounds in the projection of the layer.\n     */\n    getMapBounds: function() {\n        if (this.layer.map === null) {\n            return null;\n        }\n        var bounds = this.layer.map.getExtent();\n        if (bounds && this.layer.projection && !this.layer.projection.equals(\n                this.layer.map.getProjectionObject())) {\n            bounds = bounds.clone().transform(\n                this.layer.map.getProjectionObject(), this.layer.projection\n            );\n        }\n        return bounds;\n    },\n\n    /**\n     * Method: invalidBounds\n     * Determine whether the previously requested set of features is invalid. \n     *     This occurs when the new map bounds do not contain the previously \n     *     requested bounds.  In addition, if <resFactor> is set, it will be \n     *     considered.\n     *\n     * Parameters:\n     * mapBounds - {<OpenLayers.Bounds>} the current map extent, will be\n     *      retrieved from the map object if not provided\n     *\n     * Returns:\n     * {Boolean} \n     */\n    invalidBounds: function(mapBounds) {\n        if(!mapBounds) {\n            mapBounds = this.getMapBounds();\n        }\n        var invalid = !this.bounds || !this.bounds.containsBounds(mapBounds);\n        if(!invalid && this.resFactor) {\n            var ratio = this.resolution / this.layer.map.getResolution();\n            invalid = (ratio >= this.resFactor || ratio <= (1 / this.resFactor));\n        }\n        return invalid;\n    },\n \n    /**\n     * Method: calculateBounds\n     *\n     * Parameters:\n     * mapBounds - {<OpenLayers.Bounds>} the current map extent, will be\n     *      retrieved from the map object if not provided\n     */\n    calculateBounds: function(mapBounds) {\n        if(!mapBounds) {\n            mapBounds = this.getMapBounds();\n        }\n        var center = mapBounds.getCenterLonLat();\n        var dataWidth = mapBounds.getWidth() * this.ratio;\n        var dataHeight = mapBounds.getHeight() * this.ratio;\n        this.bounds = new OpenLayers.Bounds(\n            center.lon - (dataWidth / 2),\n            center.lat - (dataHeight / 2),\n            center.lon + (dataWidth / 2),\n            center.lat + (dataHeight / 2)\n        );\n    },\n    \n    /**\n     * Method: triggerRead\n     *\n     * Parameters:\n     * options - {Object} Additional options for the protocol's read method \n     *     (optional)\n     *\n     * Returns:\n     * {<OpenLayers.Protocol.Response>} The protocol response object\n     *      returned by the layer protocol.\n     */\n    triggerRead: function(options) {\n        if (this.response && !(options && options.noAbort === true)) {\n            this.layer.protocol.abort(this.response);\n            this.layer.events.triggerEvent(\"loadend\");\n        }\n        var evt = {filter: this.createFilter()};\n        this.layer.events.triggerEvent(\"loadstart\", evt);\n        this.response = this.layer.protocol.read(\n            OpenLayers.Util.applyDefaults({\n                filter: evt.filter,\n                callback: this.merge,\n                scope: this\n        }, options));\n    },\n \n    /**\n     * Method: createFilter\n     * Creates a spatial BBOX filter. If the layer that this strategy belongs\n     * to has a filter property, this filter will be combined with the BBOX \n     * filter.\n     * \n     * Returns\n     * {<OpenLayers.Filter>} The filter object.\n     */\n    createFilter: function() {\n        var filter = new OpenLayers.Filter.Spatial({\n            type: OpenLayers.Filter.Spatial.BBOX,\n            value: this.bounds,\n            projection: this.layer.projection\n        });\n        if (this.layer.filter) {\n            filter = new OpenLayers.Filter.Logical({\n                type: OpenLayers.Filter.Logical.AND,\n                filters: [this.layer.filter, filter]\n            });\n        }\n        return filter;\n    },\n   \n    /**\n     * Method: merge\n     * Given a list of features, determine which ones to add to the layer.\n     *     If the layer projection differs from the map projection, features\n     *     will be transformed from the layer projection to the map projection.\n     *\n     * Parameters:\n     * resp - {<OpenLayers.Protocol.Response>} The response object passed\n     *      by the protocol.\n     */\n    merge: function(resp) {\n        this.layer.destroyFeatures();\n        if (resp.success()) {\n            var features = resp.features;\n            if(features && features.length > 0) {\n                var remote = this.layer.projection;\n                var local = this.layer.map.getProjectionObject();\n                if(remote && local && !local.equals(remote)) {\n                    var geom;\n                    for(var i=0, len=features.length; i<len; ++i) {\n                        geom = features[i].geometry;\n                        if(geom) {\n                            geom.transform(remote, local);\n                        }\n                    }\n                }\n                this.layer.addFeatures(features);\n            }\n        } else {\n            this.bounds = null;\n        }\n        this.response = null;\n        this.layer.events.triggerEvent(\"loadend\", {response: resp});\n    },\n   \n    CLASS_NAME: \"OpenLayers.Strategy.BBOX\" \n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Strategy.js\n */\n\n/**\n * Class: OpenLayers.Strategy.Save\n * A strategy that commits newly created or modified features.  By default\n *     the strategy waits for a call to <save> before persisting changes.  By\n *     configuring the strategy with the <auto> option, changes can be saved\n *     automatically.\n *\n * Inherits from:\n *  - <OpenLayers.Strategy>\n */\nOpenLayers.Strategy.Save = OpenLayers.Class(OpenLayers.Strategy, {\n    \n    /**\n     * APIProperty: events\n     * {<OpenLayers.Events>} An events object that handles all \n     *     events on the strategy object.\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * strategy.events.register(type, obj, listener);\n     * (end)\n     *\n     * Supported event types:\n     * start - Triggered before saving\n     * success - Triggered after a successful transaction\n     * fail - Triggered after a failed transaction\n     * \n     */\n \n    /** \n     * Property: events\n     * {<OpenLayers.Events>} Events instance for triggering this protocol\n     *    events.\n     */\n    events: null,\n    \n    /**\n     * APIProperty: auto\n     * {Boolean | Number} Auto-save.  Default is false.  If true, features will be\n     *     saved immediately after being added to the layer and with each\n     *     modification or deletion.  If auto is a number, features will be\n     *     saved on an interval provided by the value (in seconds).\n     */\n    auto: false,\n    \n    /**\n     * Property: timer\n     * {Number} The id of the timer.\n     */\n    timer: null,\n\n    /**\n     * Constructor: OpenLayers.Strategy.Save\n     * Create a new Save strategy.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     */\n    initialize: function(options) {\n        OpenLayers.Strategy.prototype.initialize.apply(this, [options]);\n        this.events = new OpenLayers.Events(this);\n    },\n   \n    /**\n     * APIMethod: activate\n     * Activate the strategy.  Register any listeners, do appropriate setup.\n     * \n     * Returns:\n     * {Boolean} The strategy was successfully activated.\n     */\n    activate: function() {\n        var activated = OpenLayers.Strategy.prototype.activate.call(this);\n        if(activated) {\n            if(this.auto) {\n                if(typeof this.auto === \"number\") {\n                    this.timer = window.setInterval(\n                        OpenLayers.Function.bind(this.save, this),\n                        this.auto * 1000\n                    );\n                } else {\n                    this.layer.events.on({\n                        \"featureadded\": this.triggerSave,\n                        \"afterfeaturemodified\": this.triggerSave,\n                        scope: this\n                    });\n                }\n            }\n        }\n        return activated;\n    },\n    \n    /**\n     * APIMethod: deactivate\n     * Deactivate the strategy.  Unregister any listeners, do appropriate\n     *     tear-down.\n     * \n     * Returns:\n     * {Boolean} The strategy was successfully deactivated.\n     */\n    deactivate: function() {\n        var deactivated = OpenLayers.Strategy.prototype.deactivate.call(this);\n        if(deactivated) {\n            if(this.auto) {\n                if(typeof this.auto === \"number\") {\n                    window.clearInterval(this.timer);\n                } else {\n                    this.layer.events.un({\n                        \"featureadded\": this.triggerSave,\n                        \"afterfeaturemodified\": this.triggerSave,\n                        scope: this\n                    });\n                }\n            }\n        }\n        return deactivated;\n    },\n    \n    /**\n     * Method: triggerSave\n     * Registered as a listener.  Calls save if a feature has insert, update,\n     *     or delete state.\n     *\n     * Parameters:\n     * event - {Object} The event this function is listening for.\n     */\n    triggerSave: function(event) {\n        var feature = event.feature;\n        if(feature.state === OpenLayers.State.INSERT ||\n           feature.state === OpenLayers.State.UPDATE ||\n           feature.state === OpenLayers.State.DELETE) {\n            this.save([event.feature]);\n        }\n    },\n    \n    /**\n     * APIMethod: save\n     * Tell the layer protocol to commit unsaved features.  If the layer\n     *     projection differs from the map projection, features will be\n     *     transformed into the layer projection before being committed.\n     *\n     * Parameters:\n     * features - {Array} Features to be saved.  If null, then default is all\n     *     features in the layer.  Features are assumed to be in the map\n     *     projection.\n     */\n    save: function(features) {\n        if(!features) {\n            features = this.layer.features;\n        }\n        this.events.triggerEvent(\"start\", {features:features});\n        var remote = this.layer.projection;\n        var local = this.layer.map.getProjectionObject();\n        if(!local.equals(remote)) {\n            var len = features.length;\n            var clones = new Array(len);\n            var orig, clone;\n            for(var i=0; i<len; ++i) {\n                orig = features[i];\n                clone = orig.clone();\n                clone.fid = orig.fid;\n                clone.state = orig.state;\n                if(orig.url) {\n                    clone.url = orig.url;\n                }\n                clone._original = orig;\n                clone.geometry.transform(local, remote);\n                clones[i] = clone;\n            }\n            features = clones;\n        }\n        this.layer.protocol.commit(features, {\n            callback: this.onCommit,\n            scope: this\n        });\n    },\n    \n    /**\n     * Method: onCommit\n     * Called after protocol commit.\n     *\n     * Parameters:\n     * response - {<OpenLayers.Protocol.Response>} A response object.\n     */\n    onCommit: function(response) {\n        var evt = {\"response\": response};\n        if(response.success()) {\n            var features = response.reqFeatures;\n            // deal with inserts, updates, and deletes\n            var state, feature;\n            var destroys = [];\n            var insertIds = response.insertIds || [];\n            var j = 0;\n            for(var i=0, len=features.length; i<len; ++i) {\n                feature = features[i];\n                // if projection was different, we may be dealing with clones\n                feature = feature._original || feature;\n                state = feature.state;\n                if(state) {\n                    if(state == OpenLayers.State.DELETE) {\n                        destroys.push(feature);\n                    } else if(state == OpenLayers.State.INSERT) {\n                        feature.fid = insertIds[j];\n                        ++j;\n                    }\n                    feature.state = null;\n                }\n            }\n\n            if(destroys.length > 0) {\n                this.layer.destroyFeatures(destroys);\n            }\n\n            this.events.triggerEvent(\"success\", evt);\n\n        } else {\n            this.events.triggerEvent(\"fail\", evt);\n        }\n    },\n   \n    CLASS_NAME: \"OpenLayers.Strategy.Save\" \n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Strategy.js\n */\n\n/**\n * Class: OpenLayers.Strategy.Refresh\n * A strategy that refreshes the layer. By default the strategy waits for a\n *     call to <refresh> before refreshing.  By configuring the strategy with \n *     the <interval> option, refreshing can take place automatically.\n *\n * Inherits from:\n *  - <OpenLayers.Strategy>\n */\nOpenLayers.Strategy.Refresh = OpenLayers.Class(OpenLayers.Strategy, {\n    \n    /**\n     * Property: force\n     * {Boolean} Force a refresh on the layer. Default is false.\n     */\n    force: false,\n\n    /**\n     * Property: interval\n     * {Number} Auto-refresh. Default is 0.  If > 0, layer will be refreshed \n     *     every N milliseconds.\n     */\n    interval: 0,\n    \n    /**\n     * Property: timer\n     * {Number} The id of the timer.\n     */\n    timer: null,\n\n    /**\n     * Constructor: OpenLayers.Strategy.Refresh\n     * Create a new Refresh strategy.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     */\n   \n    /**\n     * APIMethod: activate\n     * Activate the strategy. Register any listeners, do appropriate setup.\n     * \n     * Returns:\n     * {Boolean} True if the strategy was successfully activated.\n     */\n    activate: function() {\n        var activated = OpenLayers.Strategy.prototype.activate.call(this);\n        if(activated) {\n            if(this.layer.visibility === true) {\n                this.start();\n            } \n            this.layer.events.on({\n                \"visibilitychanged\": this.reset,\n                scope: this\n            });\n        }\n        return activated;\n    },\n    \n    /**\n     * APIMethod: deactivate\n     * Deactivate the strategy. Unregister any listeners, do appropriate\n     *     tear-down.\n     * \n     * Returns:\n     * {Boolean} True if the strategy was successfully deactivated.\n     */\n    deactivate: function() {\n        var deactivated = OpenLayers.Strategy.prototype.deactivate.call(this);\n        if(deactivated) {\n            this.stop();\n            this.layer.events.un({\n                \"visibilitychanged\": this.reset,\n                scope: this\n            });\n        }\n        return deactivated;\n    },\n    \n    /**\n     * Method: reset\n     * Start or cancel the refresh interval depending on the visibility of \n     *     the layer.\n     */\n    reset: function() {\n        if(this.layer.visibility === true) {\n            this.start();\n        } else {\n            this.stop();\n        }\n    },\n    \n    /**\n     * Method: start\n     * Start the refresh interval. \n     */\n    start: function() {\n        if(this.interval && typeof this.interval === \"number\" && \n            this.interval > 0) {\n\n            this.timer = window.setInterval(\n                OpenLayers.Function.bind(this.refresh, this),\n                this.interval);\n        }\n    },\n    \n    /**\n     * APIMethod: refresh\n     * Tell the strategy to refresh which will refresh the layer.\n     */\n    refresh: function() {\n        if (this.layer && this.layer.refresh && \n            typeof this.layer.refresh == \"function\") {\n\n            this.layer.refresh({force: this.force});\n        }\n    },\n   \n    /**\n     * Method: stop\n     * Cancels the refresh interval. \n     */\n    stop: function() {\n        if(this.timer !== null) {\n            window.clearInterval(this.timer);\n            this.timer = null;\n        }\n    },\n    \n    CLASS_NAME: \"OpenLayers.Strategy.Refresh\" \n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Util.js\n * @requires OpenLayers/Style.js\n */\n\n/**\n * Class: OpenLayers.Filter\n * This class represents an OGC Filter.\n */\nOpenLayers.Filter = OpenLayers.Class({\n    \n    /** \n     * Constructor: OpenLayers.Filter\n     * This class represents a generic filter.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     * \n     * Returns:\n     * {<OpenLayers.Filter>}\n     */\n    initialize: function(options) {\n        OpenLayers.Util.extend(this, options);\n    },\n\n    /** \n     * APIMethod: destroy\n     * Remove reference to anything added.\n     */\n    destroy: function() {\n    },\n\n    /**\n     * APIMethod: evaluate\n     * Evaluates this filter in a specific context.  Instances or subclasses\n     * are supposed to override this method.\n     * \n     * Parameters:\n     * context - {Object} Context to use in evaluating the filter.  If a vector\n     *     feature is provided, the feature.attributes will be used as context.\n     * \n     * Returns:\n     * {Boolean} The filter applies.\n     */\n    evaluate: function(context) {\n        return true;\n    },\n    \n    /**\n     * APIMethod: clone\n     * Clones this filter. Should be implemented by subclasses.\n     * \n     * Returns:\n     * {<OpenLayers.Filter>} Clone of this filter.\n     */\n    clone: function() {\n        return null;\n    },\n    \n    /**\n     * APIMethod: toString\n     *\n     * Returns:\n     * {String} Include <OpenLayers.Format.CQL> in your build to get a CQL\n     *     representation of the filter returned. Otherwise \"[Object object]\"\n     *     will be returned.\n     */\n    toString: function() {\n        var string;\n        if (OpenLayers.Format && OpenLayers.Format.CQL) {\n            string = OpenLayers.Format.CQL.prototype.write(this);\n        } else {\n            string = Object.prototype.toString.call(this);\n        }\n        return string;\n    },\n    \n    CLASS_NAME: \"OpenLayers.Filter\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Filter.js\n */\n\n/**\n * Class: OpenLayers.Filter.FeatureId\n * This class represents a ogc:FeatureId Filter, as being used for rule-based SLD\n * styling\n * \n * Inherits from:\n * - <OpenLayers.Filter>\n */\nOpenLayers.Filter.FeatureId = OpenLayers.Class(OpenLayers.Filter, {\n\n    /** \n     * APIProperty: fids\n     * {Array(String)} Feature Ids to evaluate this rule against. \n     *     To be passed inside the params object.\n     */\n    fids: null,\n    \n    /** \n     * Property: type\n     * {String} Type to identify this filter.\n     */\n    type: \"FID\",\n    \n    /** \n     * Constructor: OpenLayers.Filter.FeatureId\n     * Creates an ogc:FeatureId rule.\n     *\n     * Parameters:\n     * options - {Object} An optional object with properties to set on the\n     *           rule\n     * \n     * Returns:\n     * {<OpenLayers.Filter.FeatureId>}\n     */\n    initialize: function(options) {\n        this.fids = [];\n        OpenLayers.Filter.prototype.initialize.apply(this, [options]);\n    },\n\n    /**\n     * APIMethod: evaluate\n     * evaluates this rule for a specific feature\n     * \n     * Parameters:\n     * feature - {<OpenLayers.Feature>} feature to apply the rule to.\n     *           For vector features, the check is run against the fid,\n     *           for plain features against the id.\n     * \n     * Returns:\n     * {Boolean} true if the rule applies, false if it does not\n     */\n    evaluate: function(feature) {\n        for (var i=0, len=this.fids.length; i<len; i++) {\n            var fid = feature.fid || feature.id;\n            if (fid == this.fids[i]) {\n                return true;\n            }\n        }\n        return false;\n    },\n    \n    /**\n     * APIMethod: clone\n     * Clones this filter.\n     * \n     * Returns:\n     * {<OpenLayers.Filter.FeatureId>} Clone of this filter.\n     */\n    clone: function() {\n        var filter = new OpenLayers.Filter.FeatureId();\n        OpenLayers.Util.extend(filter, this);\n        filter.fids = this.fids.slice();\n        return filter;\n    },\n    \n    CLASS_NAME: \"OpenLayers.Filter.FeatureId\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Filter.js\n */\n\n/**\n * Class: OpenLayers.Filter.Logical\n * This class represents ogc:And, ogc:Or and ogc:Not rules.\n * \n * Inherits from:\n * - <OpenLayers.Filter>\n */\nOpenLayers.Filter.Logical = OpenLayers.Class(OpenLayers.Filter, {\n\n    /**\n     * APIProperty: filters\n     * {Array(<OpenLayers.Filter>)} Child filters for this filter.\n     */\n    filters: null, \n     \n    /**\n     * APIProperty: type\n     * {String} type of logical operator. Available types are:\n     * - OpenLayers.Filter.Logical.AND = \"&&\";\n     * - OpenLayers.Filter.Logical.OR  = \"||\";\n     * - OpenLayers.Filter.Logical.NOT = \"!\";\n     */\n    type: null,\n\n    /** \n     * Constructor: OpenLayers.Filter.Logical\n     * Creates a logical filter (And, Or, Not).\n     *\n     * Parameters:\n     * options - {Object} An optional object with properties to set on the\n     *     filter.\n     * \n     * Returns:\n     * {<OpenLayers.Filter.Logical>}\n     */\n    initialize: function(options) {\n        this.filters = [];\n        OpenLayers.Filter.prototype.initialize.apply(this, [options]);\n    },\n    \n    /** \n     * APIMethod: destroy\n     * Remove reference to child filters.\n     */\n    destroy: function() {\n        this.filters = null;\n        OpenLayers.Filter.prototype.destroy.apply(this);\n    },\n\n    /**\n     * APIMethod: evaluate\n     * Evaluates this filter in a specific context.\n     * \n     * Parameters:\n     * context - {Object} Context to use in evaluating the filter.  A vector\n     *     feature may also be provided to evaluate feature attributes in \n     *     comparison filters or geometries in spatial filters.\n     * \n     * Returns:\n     * {Boolean} The filter applies.\n     */\n    evaluate: function(context) {\n        var i, len;\n        switch(this.type) {\n            case OpenLayers.Filter.Logical.AND:\n                for (i=0, len=this.filters.length; i<len; i++) {\n                    if (this.filters[i].evaluate(context) == false) {\n                        return false;\n                    }\n                }\n                return true;\n                \n            case OpenLayers.Filter.Logical.OR:\n                for (i=0, len=this.filters.length; i<len; i++) {\n                    if (this.filters[i].evaluate(context) == true) {\n                        return true;\n                    }\n                }\n                return false;\n            \n            case OpenLayers.Filter.Logical.NOT:\n                return (!this.filters[0].evaluate(context));\n        }\n        return undefined;\n    },\n    \n    /**\n     * APIMethod: clone\n     * Clones this filter.\n     * \n     * Returns:\n     * {<OpenLayers.Filter.Logical>} Clone of this filter.\n     */\n    clone: function() {\n        var filters = [];        \n        for(var i=0, len=this.filters.length; i<len; ++i) {\n            filters.push(this.filters[i].clone());\n        }\n        return new OpenLayers.Filter.Logical({\n            type: this.type,\n            filters: filters\n        });\n    },\n    \n    CLASS_NAME: \"OpenLayers.Filter.Logical\"\n});\n\n\nOpenLayers.Filter.Logical.AND = \"&&\";\nOpenLayers.Filter.Logical.OR  = \"||\";\nOpenLayers.Filter.Logical.NOT = \"!\";\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Filter.js\n */\n\n/**\n * Class: OpenLayers.Filter.Comparison\n * This class represents a comparison filter.\n * \n * Inherits from:\n * - <OpenLayers.Filter>\n */\nOpenLayers.Filter.Comparison = OpenLayers.Class(OpenLayers.Filter, {\n\n    /**\n     * APIProperty: type\n     * {String} type: type of the comparison. This is one of\n     * - OpenLayers.Filter.Comparison.EQUAL_TO                 = \"==\";\n     * - OpenLayers.Filter.Comparison.NOT_EQUAL_TO             = \"!=\";\n     * - OpenLayers.Filter.Comparison.LESS_THAN                = \"<\";\n     * - OpenLayers.Filter.Comparison.GREATER_THAN             = \">\";\n     * - OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO    = \"<=\";\n     * - OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO = \">=\";\n     * - OpenLayers.Filter.Comparison.BETWEEN                  = \"..\";\n     * - OpenLayers.Filter.Comparison.LIKE                     = \"~\";\n     * - OpenLayers.Filter.Comparison.IS_NULL                  = \"NULL\";\n     */\n    type: null,\n    \n    /**\n     * APIProperty: property\n     * {String}\n     * name of the context property to compare\n     */\n    property: null,\n    \n    /**\n     * APIProperty: value\n     * {Number} or {String}\n     * comparison value for binary comparisons. In the case of a String, this\n     * can be a combination of text and propertyNames in the form\n     * \"literal ${propertyName}\"\n     */\n    value: null,\n    \n    /**\n     * Property: matchCase\n     * {Boolean} Force case sensitive searches for EQUAL_TO and NOT_EQUAL_TO\n     *     comparisons.  The Filter Encoding 1.1 specification added a matchCase\n     *     attribute to ogc:PropertyIsEqualTo and ogc:PropertyIsNotEqualTo\n     *     elements.  This property will be serialized with those elements only\n     *     if using the v1.1.0 filter format. However, when evaluating filters\n     *     here, the matchCase property will always be respected (for EQUAL_TO\n     *     and NOT_EQUAL_TO).  Default is true. \n     */\n    matchCase: true,\n    \n    /**\n     * APIProperty: lowerBoundary\n     * {Number} or {String}\n     * lower boundary for between comparisons. In the case of a String, this\n     * can be a combination of text and propertyNames in the form\n     * \"literal ${propertyName}\"\n     */\n    lowerBoundary: null,\n    \n    /**\n     * APIProperty: upperBoundary\n     * {Number} or {String}\n     * upper boundary for between comparisons. In the case of a String, this\n     * can be a combination of text and propertyNames in the form\n     * \"literal ${propertyName}\"\n     */\n    upperBoundary: null,\n\n    /** \n     * Constructor: OpenLayers.Filter.Comparison\n     * Creates a comparison rule.\n     *\n     * Parameters:\n     * options - {Object} An optional object with properties to set on the\n     *           rule\n     * \n     * Returns:\n     * {<OpenLayers.Filter.Comparison>}\n     */\n    initialize: function(options) {\n        OpenLayers.Filter.prototype.initialize.apply(this, [options]);\n        // since matchCase on PropertyIsLike is not schema compliant, we only\n        // want to use this if explicitly asked for\n        if (this.type === OpenLayers.Filter.Comparison.LIKE \n            && options.matchCase === undefined) {\n                this.matchCase = null;\n        }\n    },\n\n    /**\n     * APIMethod: evaluate\n     * Evaluates this filter in a specific context.\n     * \n     * Parameters:\n     * context - {Object} Context to use in evaluating the filter.  If a vector\n     *     feature is provided, the feature.attributes will be used as context.\n     * \n     * Returns:\n     * {Boolean} The filter applies.\n     */\n    evaluate: function(context) {\n        if (context instanceof OpenLayers.Feature.Vector) {\n            context = context.attributes;\n        }\n        var result = false;\n        var got = context[this.property];\n        if (got === undefined) {\n            return false;\n        }\n        var exp;\n        switch(this.type) {\n            case OpenLayers.Filter.Comparison.EQUAL_TO:\n                exp = this.value;\n                if(!this.matchCase &&\n                   typeof got == \"string\" && typeof exp == \"string\") {\n                    result = (got.toUpperCase() == exp.toUpperCase());\n                } else {\n                    result = (got == exp);\n                }\n                break;\n            case OpenLayers.Filter.Comparison.NOT_EQUAL_TO:\n                exp = this.value;\n                if(!this.matchCase &&\n                   typeof got == \"string\" && typeof exp == \"string\") {\n                    result = (got.toUpperCase() != exp.toUpperCase());\n                } else {\n                    result = (got != exp);\n                }\n                break;\n            case OpenLayers.Filter.Comparison.LESS_THAN:\n                result = got < this.value;\n                break;\n            case OpenLayers.Filter.Comparison.GREATER_THAN:\n                result = got > this.value;\n                break;\n            case OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO:\n                result = got <= this.value;\n                break;\n            case OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO:\n                result = got >= this.value;\n                break;\n            case OpenLayers.Filter.Comparison.BETWEEN:\n                result = (got >= this.lowerBoundary) &&\n                    (got <= this.upperBoundary);\n                break;\n            case OpenLayers.Filter.Comparison.LIKE:\n                var regexp = new RegExp(this.value, \"gi\");\n                result = regexp.test(got);\n                break;\n            case OpenLayers.Filter.Comparison.IS_NULL:\n                result = (got === null);\n                break;\n        }\n        return result;\n    },\n    \n    /**\n     * APIMethod: value2regex\n     * Converts the value of this rule into a regular expression string,\n     * according to the wildcard characters specified. This method has to\n     * be called after instantiation of this class, if the value is not a\n     * regular expression already.\n     * \n     * Parameters:\n     * wildCard   - {Char} wildcard character in the above value, default\n     *              is \"*\"\n     * singleChar - {Char} single-character wildcard in the above value\n     *              default is \".\"\n     * escapeChar - {Char} escape character in the above value, default is\n     *              \"!\"\n     * \n     * Returns:\n     * {String} regular expression string\n     */\n    value2regex: function(wildCard, singleChar, escapeChar) {\n        if (wildCard == \".\") {\n            throw new Error(\"'.' is an unsupported wildCard character for \" +\n                            \"OpenLayers.Filter.Comparison\");\n        }\n        \n\n        // set UMN MapServer defaults for unspecified parameters\n        wildCard = wildCard ? wildCard : \"*\";\n        singleChar = singleChar ? singleChar : \".\";\n        escapeChar = escapeChar ? escapeChar : \"!\";\n        \n        this.value = this.value.replace(\n                new RegExp(\"\\\\\"+escapeChar+\"(.|$)\", \"g\"), \"\\\\$1\");\n        this.value = this.value.replace(\n                new RegExp(\"\\\\\"+singleChar, \"g\"), \".\");\n        this.value = this.value.replace(\n                new RegExp(\"\\\\\"+wildCard, \"g\"), \".*\");\n        this.value = this.value.replace(\n                new RegExp(\"\\\\\\\\.\\\\*\", \"g\"), \"\\\\\"+wildCard);\n        this.value = this.value.replace(\n                new RegExp(\"\\\\\\\\\\\\.\", \"g\"), \"\\\\\"+singleChar);\n        \n        return this.value;\n    },\n    \n    /**\n     * Method: regex2value\n     * Convert the value of this rule from a regular expression string into an\n     *     ogc literal string using a wildCard of *, a singleChar of ., and an\n     *     escape of !.  Leaves the <value> property unmodified.\n     * \n     * Returns:\n     * {String} A string value.\n     */\n    regex2value: function() {\n        \n        var value = this.value;\n        \n        // replace ! with !!\n        value = value.replace(/!/g, \"!!\");\n\n        // replace \\. with !. (watching out for \\\\.)\n        value = value.replace(/(\\\\)?\\\\\\./g, function($0, $1) {\n            return $1 ? $0 : \"!.\";\n        });\n        \n        // replace \\* with #* (watching out for \\\\*)\n        value = value.replace(/(\\\\)?\\\\\\*/g, function($0, $1) {\n            return $1 ? $0 : \"!*\";\n        });\n        \n        // replace \\\\ with \\\n        value = value.replace(/\\\\\\\\/g, \"\\\\\");\n\n        // convert .* to * (the sequence #.* is not allowed)\n        value = value.replace(/\\.\\*/g, \"*\");\n        \n        return value;\n    },\n    \n    /**\n     * APIMethod: clone\n     * Clones this filter.\n     * \n     * Returns:\n     * {<OpenLayers.Filter.Comparison>} Clone of this filter.\n     */\n    clone: function() {\n        return OpenLayers.Util.extend(new OpenLayers.Filter.Comparison(), this);\n    },\n    \n    CLASS_NAME: \"OpenLayers.Filter.Comparison\"\n});\n\n\nOpenLayers.Filter.Comparison.EQUAL_TO                 = \"==\";\nOpenLayers.Filter.Comparison.NOT_EQUAL_TO             = \"!=\";\nOpenLayers.Filter.Comparison.LESS_THAN                = \"<\";\nOpenLayers.Filter.Comparison.GREATER_THAN             = \">\";\nOpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO    = \"<=\";\nOpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO = \">=\";\nOpenLayers.Filter.Comparison.BETWEEN                  = \"..\";\nOpenLayers.Filter.Comparison.LIKE                     = \"~\";\nOpenLayers.Filter.Comparison.IS_NULL                  = \"NULL\";\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Filter.js\n */\n\n/**\n * Class: OpenLayers.Filter.Spatial\n * This class represents a spatial filter.\n * Currently implemented: BBOX, DWithin and Intersects\n * \n * Inherits from:\n * - <OpenLayers.Filter>\n */\nOpenLayers.Filter.Spatial = OpenLayers.Class(OpenLayers.Filter, {\n\n    /**\n     * APIProperty: type\n     * {String} Type of spatial filter.\n     *\n     * The type should be one of:\n     * - OpenLayers.Filter.Spatial.BBOX\n     * - OpenLayers.Filter.Spatial.INTERSECTS\n     * - OpenLayers.Filter.Spatial.DWITHIN\n     * - OpenLayers.Filter.Spatial.WITHIN\n     * - OpenLayers.Filter.Spatial.CONTAINS\n     */\n    type: null,\n    \n    /**\n     * APIProperty: property\n     * {String} Name of the context property to compare.\n     */\n    property: null,\n    \n    /**\n     * APIProperty: value\n     * {<OpenLayers.Bounds> || <OpenLayers.Geometry>} The bounds or geometry\n     *     to be used by the filter.  Use bounds for BBOX filters and geometry\n     *     for INTERSECTS or DWITHIN filters.\n     */\n    value: null,\n\n    /**\n     * APIProperty: distance\n     * {Number} The distance to use in a DWithin spatial filter.\n     */\n    distance: null,\n\n    /**\n     * APIProperty: distanceUnits\n     * {String} The units to use for the distance, e.g. 'm'.\n     */\n    distanceUnits: null,\n    \n    /** \n     * Constructor: OpenLayers.Filter.Spatial\n     * Creates a spatial filter.\n     *\n     * Parameters:\n     * options - {Object} An optional object with properties to set on the\n     *     filter.\n     * \n     * Returns:\n     * {<OpenLayers.Filter.Spatial>}\n     */\n\n   /**\n    * Method: evaluate\n    * Evaluates this filter for a specific feature.\n    * \n    * Parameters:\n    * feature - {<OpenLayers.Feature.Vector>} feature to apply the filter to.\n    * \n    * Returns:\n    * {Boolean} The feature meets filter criteria.\n    */\n    evaluate: function(feature) {\n        var intersect = false;\n        switch(this.type) {\n            case OpenLayers.Filter.Spatial.BBOX:\n            case OpenLayers.Filter.Spatial.INTERSECTS:\n                if(feature.geometry) {\n                    var geom = this.value;\n                    if(this.value.CLASS_NAME == \"OpenLayers.Bounds\") {\n                        geom = this.value.toGeometry();\n                    }\n                    if(feature.geometry.intersects(geom)) {\n                        intersect = true;\n                    }\n                }\n                break;\n            default:\n                throw new Error('evaluate is not implemented for this filter type.');\n        }\n        return intersect;\n    },\n\n    /**\n     * APIMethod: clone\n     * Clones this filter.\n     * \n     * Returns:\n     * {<OpenLayers.Filter.Spatial>} Clone of this filter.\n     */\n    clone: function() {\n        var options = OpenLayers.Util.applyDefaults({\n            value: this.value && this.value.clone && this.value.clone()\n        }, this);\n        return new OpenLayers.Filter.Spatial(options);\n    },\n    CLASS_NAME: \"OpenLayers.Filter.Spatial\"\n});\n\nOpenLayers.Filter.Spatial.BBOX = \"BBOX\";\nOpenLayers.Filter.Spatial.INTERSECTS = \"INTERSECTS\";\nOpenLayers.Filter.Spatial.DWITHIN = \"DWITHIN\";\nOpenLayers.Filter.Spatial.WITHIN = \"WITHIN\";\nOpenLayers.Filter.Spatial.CONTAINS = \"CONTAINS\";\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Filter.js\n */\n\n/**\n * Class: OpenLayers.Filter.Function\n * This class represents a filter function.\n * We are using this class for creation of complex \n * filters that can contain filter functions as values.\n * Nesting function as other functions parameter is supported.\n * \n * Inherits from:\n * - <OpenLayers.Filter>\n */\nOpenLayers.Filter.Function = OpenLayers.Class(OpenLayers.Filter, {\n\n    /**\n     * APIProperty: name\n     * {String} Name of the function.\n     */\n    name: null,\n    \n    /**\n     * APIProperty: params\n     * {Array(<OpenLayers.Filter.Function> || String || Number)} Function parameters\n     * For now support only other Functions, String or Number\n     */\n    params: null,  \n    \n    /** \n     * Constructor: OpenLayers.Filter.Function\n     * Creates a filter function.\n     *\n     * Parameters:\n     * options - {Object} An optional object with properties to set on the\n     *     function.\n     * \n     * Returns:\n     * {<OpenLayers.Filter.Function>}\n     */\n\n    CLASS_NAME: \"OpenLayers.Filter.Function\"\n});\n\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n */\n\n/**\n * Class: OpenLayers.Protocol\n * Abstract vector layer protocol class.  Not to be instantiated directly.  Use\n *     one of the protocol subclasses instead.\n */\nOpenLayers.Protocol = OpenLayers.Class({\n    \n    /**\n     * Property: format\n     * {<OpenLayers.Format>} The format used by this protocol.\n     */\n    format: null,\n    \n    /**\n     * Property: options\n     * {Object} Any options sent to the constructor.\n     */\n    options: null,\n\n    /**\n     * Property: autoDestroy\n     * {Boolean} The creator of the protocol can set autoDestroy to false\n     *      to fully control when the protocol is destroyed. Defaults to\n     *      true.\n     */\n    autoDestroy: true,\n   \n    /**\n     * Property: defaultFilter\n     * {<OpenLayers.Filter>} Optional default filter to read requests\n     */\n    defaultFilter: null,\n    \n    /**\n     * Constructor: OpenLayers.Protocol\n     * Abstract class for vector protocols.  Create instances of a subclass.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     */\n    initialize: function(options) {\n        options = options || {};\n        OpenLayers.Util.extend(this, options);\n        this.options = options;\n    },\n\n    /**\n     * Method: mergeWithDefaultFilter\n     * Merge filter passed to the read method with the default one\n     *\n     * Parameters:\n     * filter - {<OpenLayers.Filter>}\n     */\n    mergeWithDefaultFilter: function(filter) {\n        var merged;\n        if (filter && this.defaultFilter) {\n            merged = new OpenLayers.Filter.Logical({\n                type: OpenLayers.Filter.Logical.AND,\n                filters: [this.defaultFilter, filter]\n            });\n        } else {\n            merged = filter || this.defaultFilter || undefined;\n        }\n        return merged;\n    },\n\n    /**\n     * APIMethod: destroy\n     * Clean up the protocol.\n     */\n    destroy: function() {\n        this.options = null;\n        this.format = null;\n    },\n    \n    /**\n     * APIMethod: read\n     * Construct a request for reading new features.\n     *\n     * Parameters:\n     * options - {Object} Optional object for configuring the request.\n     *\n     * Returns:\n     * {<OpenLayers.Protocol.Response>} An <OpenLayers.Protocol.Response>\n     * object, the same object will be passed to the callback function passed\n     * if one exists in the options object.\n     */\n    read: function(options) {\n        options = options || {};\n        options.filter = this.mergeWithDefaultFilter(options.filter);\n    },\n    \n    \n    /**\n     * APIMethod: create\n     * Construct a request for writing newly created features.\n     *\n     * Parameters:\n     * features - {Array({<OpenLayers.Feature.Vector>})} or\n     *            {<OpenLayers.Feature.Vector>}\n     * options - {Object} Optional object for configuring the request.\n     *\n     * Returns:\n     * {<OpenLayers.Protocol.Response>} An <OpenLayers.Protocol.Response>\n     * object, the same object will be passed to the callback function passed\n     * if one exists in the options object.\n     */\n    create: function() {\n    },\n    \n    /**\n     * APIMethod: update\n     * Construct a request updating modified features.\n     *\n     * Parameters:\n     * features - {Array({<OpenLayers.Feature.Vector>})} or\n     *            {<OpenLayers.Feature.Vector>}\n     * options - {Object} Optional object for configuring the request.\n     *\n     * Returns:\n     * {<OpenLayers.Protocol.Response>} An <OpenLayers.Protocol.Response>\n     * object, the same object will be passed to the callback function passed\n     * if one exists in the options object.\n     */\n    update: function() {\n    },\n    \n    /**\n     * APIMethod: delete\n     * Construct a request deleting a removed feature.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     * options - {Object} Optional object for configuring the request.\n     *\n     * Returns:\n     * {<OpenLayers.Protocol.Response>} An <OpenLayers.Protocol.Response>\n     * object, the same object will be passed to the callback function passed\n     * if one exists in the options object.\n     */\n    \"delete\": function() {\n    },\n\n    /**\n     * APIMethod: commit\n     * Go over the features and for each take action\n     * based on the feature state. Possible actions are create,\n     * update and delete.\n     *\n     * Parameters:\n     * features - {Array({<OpenLayers.Feature.Vector>})}\n     * options - {Object} Object whose possible keys are \"create\", \"update\",\n     *      \"delete\", \"callback\" and \"scope\", the values referenced by the\n     *      first three are objects as passed to the \"create\", \"update\", and\n     *      \"delete\" methods, the value referenced by the \"callback\" key is\n     *      a function which is called when the commit operation is complete\n     *      using the scope referenced by the \"scope\" key.\n     *\n     * Returns:\n     * {Array({<OpenLayers.Protocol.Response>})} An array of\n     * <OpenLayers.Protocol.Response> objects.\n     */\n    commit: function() {\n    },\n\n    /**\n     * Method: abort\n     * Abort an ongoing request.\n     *\n     * Parameters:\n     * response - {<OpenLayers.Protocol.Response>}\n     */\n    abort: function(response) {\n    },\n   \n    /**\n     * Method: createCallback\n     * Returns a function that applies the given public method with resp and\n     *     options arguments.\n     *\n     * Parameters:\n     * method - {Function} The method to be applied by the callback.\n     * response - {<OpenLayers.Protocol.Response>} The protocol response object.\n     * options - {Object} Options sent to the protocol method\n     */\n    createCallback: function(method, response, options) {\n        return OpenLayers.Function.bind(function() {\n            method.apply(this, [response, options]);\n        }, this);\n    },\n   \n    CLASS_NAME: \"OpenLayers.Protocol\" \n});\n\n/**\n * Class: OpenLayers.Protocol.Response\n * Protocols return Response objects to their users.\n */\nOpenLayers.Protocol.Response = OpenLayers.Class({\n    /**\n     * Property: code\n     * {Number} - OpenLayers.Protocol.Response.SUCCESS or\n     *            OpenLayers.Protocol.Response.FAILURE\n     */\n    code: null,\n\n    /**\n     * Property: requestType\n     * {String} The type of request this response corresponds to. Either\n     *      \"create\", \"read\", \"update\" or \"delete\".\n     */\n    requestType: null,\n\n    /**\n     * Property: last\n     * {Boolean} - true if this is the last response expected in a commit,\n     * false otherwise, defaults to true.\n     */\n    last: true,\n\n    /**\n     * Property: features\n     * {Array({<OpenLayers.Feature.Vector>})} or {<OpenLayers.Feature.Vector>}\n     * The features returned in the response by the server. Depending on the \n     * protocol's read payload, either features or data will be populated.\n     */\n    features: null,\n\n    /**\n     * Property: data\n     * {Object}\n     * The data returned in the response by the server. Depending on the \n     * protocol's read payload, either features or data will be populated.\n     */\n    data: null,\n\n    /**\n     * Property: reqFeatures\n     * {Array({<OpenLayers.Feature.Vector>})} or {<OpenLayers.Feature.Vector>}\n     * The features provided by the user and placed in the request by the\n     *      protocol.\n     */\n    reqFeatures: null,\n\n    /**\n     * Property: priv\n     */\n    priv: null,\n\n    /**\n     * Property: error\n     * {Object} The error object in case a service exception was encountered.\n     */\n    error: null,\n\n    /**\n     * Constructor: OpenLayers.Protocol.Response\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     */\n    initialize: function(options) {\n        OpenLayers.Util.extend(this, options);\n    },\n\n    /**\n     * Method: success\n     *\n     * Returns:\n     * {Boolean} - true on success, false otherwise\n     */\n    success: function() {\n        return this.code > 0;\n    },\n\n    CLASS_NAME: \"OpenLayers.Protocol.Response\"\n});\n\nOpenLayers.Protocol.Response.SUCCESS = 1;\nOpenLayers.Protocol.Response.FAILURE = 0;\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Protocol.js\n * @requires OpenLayers/Request/XMLHttpRequest.js\n */\n\n/**\n * if application uses the query string, for example, for BBOX parameters,\n * OpenLayers/Format/QueryStringFilter.js should be included in the build config file\n */\n\n/**\n * Class: OpenLayers.Protocol.HTTP\n * A basic HTTP protocol for vector layers.  Create a new instance with the\n *     <OpenLayers.Protocol.HTTP> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Protocol>\n */\nOpenLayers.Protocol.HTTP = OpenLayers.Class(OpenLayers.Protocol, {\n\n    /**\n     * Property: url\n     * {String} Service URL, read-only, set through the options\n     *     passed to constructor.\n     */\n    url: null,\n\n    /**\n     * Property: headers\n     * {Object} HTTP request headers, read-only, set through the options\n     *     passed to the constructor,\n     *     Example: {'Content-Type': 'plain/text'}\n     */\n    headers: null,\n\n    /**\n     * Property: params\n     * {Object} Parameters of GET requests, read-only, set through the options\n     *     passed to the constructor,\n     *     Example: {'bbox': '5,5,5,5'}\n     */\n    params: null,\n    \n    /**\n     * Property: callback\n     * {Object} Function to be called when the <read>, <create>,\n     *     <update>, <delete> or <commit> operation completes, read-only,\n     *     set through the options passed to the constructor.\n     */\n    callback: null,\n\n    /**\n     * Property: scope\n     * {Object} Callback execution scope, read-only, set through the\n     *     options passed to the constructor.\n     */\n    scope: null,\n\n    /**\n     * APIProperty: readWithPOST\n     * {Boolean} true if read operations are done with POST requests\n     *     instead of GET, defaults to false.\n     */\n    readWithPOST: false,\n\n    /**\n     * APIProperty: updateWithPOST\n     * {Boolean} true if update operations are done with POST requests\n     *     defaults to false.\n     */\n    updateWithPOST: false,\n    \n    /**\n     * APIProperty: deleteWithPOST\n     * {Boolean} true if delete operations are done with POST requests\n     *     defaults to false.\n     *     if true, POST data is set to output of format.write().\n     */\n    deleteWithPOST: false,\n\n    /**\n     * Property: wildcarded.\n     * {Boolean} If true percent signs are added around values\n     *     read from LIKE filters, for example if the protocol\n     *     read method is passed a LIKE filter whose property\n     *     is \"foo\" and whose value is \"bar\" the string\n     *     \"foo__ilike=%bar%\" will be sent in the query string;\n     *     defaults to false.\n     */\n    wildcarded: false,\n\n    /**\n     * APIProperty: srsInBBOX\n     * {Boolean} Include the SRS identifier in BBOX query string parameter.  \n     *     Default is false.  If true and the layer has a projection object set,\n     *     any BBOX filter will be serialized with a fifth item identifying the\n     *     projection.  E.g. bbox=-1000,-1000,1000,1000,EPSG:900913\n     */\n    srsInBBOX: false,\n\n    /**\n     * Constructor: OpenLayers.Protocol.HTTP\n     * A class for giving layers generic HTTP protocol.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     *\n     * Valid options include:\n     * url - {String}\n     * headers - {Object} \n     * params - {Object} URL parameters for GET requests\n     * format - {<OpenLayers.Format>}\n     * callback - {Function}\n     * scope - {Object}\n     */\n    initialize: function(options) {\n        options = options || {};\n        this.params = {};\n        this.headers = {};\n        OpenLayers.Protocol.prototype.initialize.apply(this, arguments);\n\n        if (!this.filterToParams && OpenLayers.Format.QueryStringFilter) {\n            var format = new OpenLayers.Format.QueryStringFilter({\n                wildcarded: this.wildcarded,\n                srsInBBOX: this.srsInBBOX\n            });\n            this.filterToParams = function(filter, params) {\n                return format.write(filter, params);\n            };\n        }\n    },\n    \n    /**\n     * APIMethod: destroy\n     * Clean up the protocol.\n     */\n    destroy: function() {\n        this.params = null;\n        this.headers = null;\n        OpenLayers.Protocol.prototype.destroy.apply(this);\n    },\n\n    /**\n     * APIMethod: filterToParams\n     * Optional method to translate an <OpenLayers.Filter> object into an object\n     *     that can be serialized as request query string provided.  If a custom\n     *     method is not provided, the filter will be serialized using the \n     *     <OpenLayers.Format.QueryStringFilter> class.\n     *\n     * Parameters:\n     * filter - {<OpenLayers.Filter>} filter to convert.\n     * params - {Object} The parameters object.\n     *\n     * Returns:\n     * {Object} The resulting parameters object.\n     */\n    \n    /**\n     * APIMethod: read\n     * Construct a request for reading new features.\n     *\n     * Parameters:\n     * options - {Object} Optional object for configuring the request.\n     *     This object is modified and should not be reused.\n     *\n     * Valid options:\n     * url - {String} Url for the request.\n     * params - {Object} Parameters to get serialized as a query string.\n     * headers - {Object} Headers to be set on the request.\n     * filter - {<OpenLayers.Filter>} Filter to get serialized as a\n     *     query string.\n     * readWithPOST - {Boolean} If the request should be done with POST.\n     *\n     * Returns:\n     * {<OpenLayers.Protocol.Response>} A response object, whose \"priv\" property\n     *     references the HTTP request, this object is also passed to the\n     *     callback function when the request completes, its \"features\" property\n     *     is then populated with the features received from the server.\n     */\n    read: function(options) {\n        OpenLayers.Protocol.prototype.read.apply(this, arguments);\n        options = options || {};\n        options.params = OpenLayers.Util.applyDefaults(\n            options.params, this.options.params);\n        options = OpenLayers.Util.applyDefaults(options, this.options);\n        if (options.filter && this.filterToParams) {\n            options.params = this.filterToParams(\n                options.filter, options.params\n            );\n        }\n        var readWithPOST = (options.readWithPOST !== undefined) ?\n                           options.readWithPOST : this.readWithPOST;\n        var resp = new OpenLayers.Protocol.Response({requestType: \"read\"});\n        if(readWithPOST) {\n            var headers = options.headers || {};\n            headers[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\n            resp.priv = OpenLayers.Request.POST({\n                url: options.url,\n                callback: this.createCallback(this.handleRead, resp, options),\n                data: OpenLayers.Util.getParameterString(options.params),\n                headers: headers\n            });\n        } else {\n            resp.priv = OpenLayers.Request.GET({\n                url: options.url,\n                callback: this.createCallback(this.handleRead, resp, options),\n                params: options.params,\n                headers: options.headers\n            });\n        }\n        return resp;\n    },\n\n    /**\n     * Method: handleRead\n     * Individual callbacks are created for read, create and update, should\n     *     a subclass need to override each one separately.\n     *\n     * Parameters:\n     * resp - {<OpenLayers.Protocol.Response>} The response object to pass to\n     *     the user callback.\n     * options - {Object} The user options passed to the read call.\n     */\n    handleRead: function(resp, options) {\n        this.handleResponse(resp, options);\n    },\n\n    /**\n     * APIMethod: create\n     * Construct a request for writing newly created features.\n     *\n     * Parameters:\n     * features - {Array({<OpenLayers.Feature.Vector>})} or\n     *     {<OpenLayers.Feature.Vector>}\n     * options - {Object} Optional object for configuring the request.\n     *     This object is modified and should not be reused.\n     *\n     * Returns:\n     * {<OpenLayers.Protocol.Response>} An <OpenLayers.Protocol.Response>\n     *     object, whose \"priv\" property references the HTTP request, this \n     *     object is also passed to the callback function when the request\n     *     completes, its \"features\" property is then populated with the\n     *     the features received from the server.\n     */\n    create: function(features, options) {\n        options = OpenLayers.Util.applyDefaults(options, this.options);\n\n        var resp = new OpenLayers.Protocol.Response({\n            reqFeatures: features,\n            requestType: \"create\"\n        });\n\n        resp.priv = OpenLayers.Request.POST({\n            url: options.url,\n            callback: this.createCallback(this.handleCreate, resp, options),\n            headers: options.headers,\n            data: this.format.write(features)\n        });\n\n        return resp;\n    },\n\n    /**\n     * Method: handleCreate\n     * Called the the request issued by <create> is complete.  May be overridden\n     *     by subclasses.\n     *\n     * Parameters:\n     * resp - {<OpenLayers.Protocol.Response>} The response object to pass to\n     *     any user callback.\n     * options - {Object} The user options passed to the create call.\n     */\n    handleCreate: function(resp, options) {\n        this.handleResponse(resp, options);\n    },\n\n    /**\n     * APIMethod: update\n     * Construct a request updating modified feature.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     * options - {Object} Optional object for configuring the request.\n     *     This object is modified and should not be reused.\n     *\n     * Returns:\n     * {<OpenLayers.Protocol.Response>} An <OpenLayers.Protocol.Response>\n     *     object, whose \"priv\" property references the HTTP request, this \n     *     object is also passed to the callback function when the request\n     *     completes, its \"features\" property is then populated with the\n     *     the feature received from the server.\n     */\n    update: function(feature, options) {\n        options = options || {};\n        var url = options.url ||\n                  feature.url ||\n                  this.options.url + \"/\" + feature.fid;\n        options = OpenLayers.Util.applyDefaults(options, this.options);\n\n        var resp = new OpenLayers.Protocol.Response({\n            reqFeatures: feature,\n            requestType: \"update\"\n        });\n\n        var method = this.updateWithPOST ? \"POST\" : \"PUT\";\n        resp.priv = OpenLayers.Request[method]({\n            url: url,\n            callback: this.createCallback(this.handleUpdate, resp, options),\n            headers: options.headers,\n            data: this.format.write(feature)\n        });\n\n        return resp;\n    },\n\n    /**\n     * Method: handleUpdate\n     * Called the the request issued by <update> is complete.  May be overridden\n     *     by subclasses.\n     *\n     * Parameters:\n     * resp - {<OpenLayers.Protocol.Response>} The response object to pass to\n     *     any user callback.\n     * options - {Object} The user options passed to the update call.\n     */\n    handleUpdate: function(resp, options) {\n        this.handleResponse(resp, options);\n    },\n\n    /**\n     * APIMethod: delete\n     * Construct a request deleting a removed feature.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     * options - {Object} Optional object for configuring the request.\n     *     This object is modified and should not be reused.\n     *\n     * Returns:\n     * {<OpenLayers.Protocol.Response>} An <OpenLayers.Protocol.Response>\n     *     object, whose \"priv\" property references the HTTP request, this \n     *     object is also passed to the callback function when the request\n     *     completes.\n     */\n    \"delete\": function(feature, options) {\n        options = options || {};\n        var url = options.url ||\n                  feature.url ||\n                  this.options.url + \"/\" + feature.fid;\n        options = OpenLayers.Util.applyDefaults(options, this.options);\n\n        var resp = new OpenLayers.Protocol.Response({\n            reqFeatures: feature,\n            requestType: \"delete\"\n        });\n\n        var method = this.deleteWithPOST ? \"POST\" : \"DELETE\";\n        var requestOptions = {\n            url: url,\n            callback: this.createCallback(this.handleDelete, resp, options),\n            headers: options.headers\n        };\n        if (this.deleteWithPOST) {\n            requestOptions.data = this.format.write(feature);\n        }\n        resp.priv = OpenLayers.Request[method](requestOptions);\n\n        return resp;\n    },\n\n    /**\n     * Method: handleDelete\n     * Called the the request issued by <delete> is complete.  May be overridden\n     *     by subclasses.\n     *\n     * Parameters:\n     * resp - {<OpenLayers.Protocol.Response>} The response object to pass to\n     *     any user callback.\n     * options - {Object} The user options passed to the delete call.\n     */\n    handleDelete: function(resp, options) {\n        this.handleResponse(resp, options);\n    },\n\n    /**\n     * Method: handleResponse\n     * Called by CRUD specific handlers.\n     *\n     * Parameters:\n     * resp - {<OpenLayers.Protocol.Response>} The response object to pass to\n     *     any user callback.\n     * options - {Object} The user options passed to the create, read, update,\n     *     or delete call.\n     */\n    handleResponse: function(resp, options) {\n        var request = resp.priv;\n        if(options.callback) {\n            if(request.status >= 200 && request.status < 300) {\n                // success\n                if(resp.requestType != \"delete\") {\n                    resp.features = this.parseFeatures(request);\n                }\n                resp.code = OpenLayers.Protocol.Response.SUCCESS;\n            } else {\n                // failure\n                resp.code = OpenLayers.Protocol.Response.FAILURE;\n            }\n            options.callback.call(options.scope, resp);\n        }\n    },\n\n    /**\n     * Method: parseFeatures\n     * Read HTTP response body and return features.\n     *\n     * Parameters:\n     * request - {XMLHttpRequest} The request object\n     *\n     * Returns:\n     * {Array({<OpenLayers.Feature.Vector>})} or\n     *     {<OpenLayers.Feature.Vector>} Array of features or a single feature.\n     */\n    parseFeatures: function(request) {\n        var doc = request.responseXML;\n        if (!doc || !doc.documentElement) {\n            doc = request.responseText;\n        }\n        if (!doc || doc.length <= 0) {\n            return null;\n        }\n        return this.format.read(doc);\n    },\n\n    /**\n     * APIMethod: commit\n     * Iterate over each feature and take action based on the feature state.\n     *     Possible actions are create, update and delete.\n     *\n     * Parameters:\n     * features - {Array({<OpenLayers.Feature.Vector>})}\n     * options - {Object} Optional object for setting up intermediate commit\n     *     callbacks.\n     *\n     * Valid options:\n     * create - {Object} Optional object to be passed to the <create> method.\n     * update - {Object} Optional object to be passed to the <update> method.\n     * delete - {Object} Optional object to be passed to the <delete> method.\n     * callback - {Function} Optional function to be called when the commit\n     *     is complete.\n     * scope - {Object} Optional object to be set as the scope of the callback.\n     *\n     * Returns:\n     * {Array(<OpenLayers.Protocol.Response>)} An array of response objects,\n     *     one per request made to the server, each object's \"priv\" property\n     *     references the corresponding HTTP request.\n     */\n    commit: function(features, options) {\n        options = OpenLayers.Util.applyDefaults(options, this.options);\n        var resp = [], nResponses = 0;\n        \n        // Divide up features before issuing any requests.  This properly\n        // counts requests in the event that any responses come in before\n        // all requests have been issued.\n        var types = {};\n        types[OpenLayers.State.INSERT] = [];\n        types[OpenLayers.State.UPDATE] = [];\n        types[OpenLayers.State.DELETE] = [];\n        var feature, list, requestFeatures = [];\n        for(var i=0, len=features.length; i<len; ++i) {\n            feature = features[i];\n            list = types[feature.state];\n            if(list) {\n                list.push(feature);\n                requestFeatures.push(feature); \n            }\n        }\n        // tally up number of requests\n        var nRequests = (types[OpenLayers.State.INSERT].length > 0 ? 1 : 0) +\n            types[OpenLayers.State.UPDATE].length +\n            types[OpenLayers.State.DELETE].length;\n        \n        // This response will be sent to the final callback after all the others\n        // have been fired.\n        var success = true;\n        var finalResponse = new OpenLayers.Protocol.Response({\n            reqFeatures: requestFeatures        \n        });\n        \n        function insertCallback(response) {\n            var len = response.features ? response.features.length : 0;\n            var fids = new Array(len);\n            for(var i=0; i<len; ++i) {\n                fids[i] = response.features[i].fid;\n            }   \n            finalResponse.insertIds = fids;\n            callback.apply(this, [response]);\n        }\n \n        function callback(response) {\n            this.callUserCallback(response, options);\n            success = success && response.success();\n            nResponses++;\n            if (nResponses >= nRequests) {\n                if (options.callback) {\n                    finalResponse.code = success ? \n                        OpenLayers.Protocol.Response.SUCCESS :\n                        OpenLayers.Protocol.Response.FAILURE;\n                    options.callback.apply(options.scope, [finalResponse]);\n                }    \n            }\n        }\n\n        // start issuing requests\n        var queue = types[OpenLayers.State.INSERT];\n        if(queue.length > 0) {\n            resp.push(this.create(\n                queue, OpenLayers.Util.applyDefaults(\n                    {callback: insertCallback, scope: this}, options.create\n                )\n            ));\n        }\n        queue = types[OpenLayers.State.UPDATE];\n        for(var i=queue.length-1; i>=0; --i) {\n            resp.push(this.update(\n                queue[i], OpenLayers.Util.applyDefaults(\n                    {callback: callback, scope: this}, options.update\n                ))\n            );\n        }\n        queue = types[OpenLayers.State.DELETE];\n        for(var i=queue.length-1; i>=0; --i) {\n            resp.push(this[\"delete\"](\n                queue[i], OpenLayers.Util.applyDefaults(\n                    {callback: callback, scope: this}, options[\"delete\"]\n                ))\n            );\n        }\n        return resp;\n    },\n\n    /**\n     * APIMethod: abort\n     * Abort an ongoing request, the response object passed to\n     * this method must come from this HTTP protocol (as a result\n     * of a create, read, update, delete or commit operation).\n     *\n     * Parameters:\n     * response - {<OpenLayers.Protocol.Response>}\n     */\n    abort: function(response) {\n        if (response) {\n            response.priv.abort();\n        }\n    },\n\n    /**\n     * Method: callUserCallback\n     * This method is used from within the commit method each time an\n     *     an HTTP response is received from the server, it is responsible\n     *     for calling the user-supplied callbacks.\n     *\n     * Parameters:\n     * resp - {<OpenLayers.Protocol.Response>}\n     * options - {Object} The map of options passed to the commit call.\n     */\n    callUserCallback: function(resp, options) {\n        var opt = options[resp.requestType];\n        if(opt && opt.callback) {\n            opt.callback.call(opt.scope, resp);\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Protocol.HTTP\" \n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Protocol.js\n */\n\n/**\n * Class: OpenLayers.Protocol.WFS\n * Used to create a versioned WFS protocol.  Default version is 1.0.0.\n *\n * Returns:\n * {<OpenLayers.Protocol>} A WFS protocol of the given version.\n *\n * Example:\n * (code)\n *     var protocol = new OpenLayers.Protocol.WFS({\n *         version: \"1.1.0\",\n *         url:  \"http://demo.opengeo.org/geoserver/wfs\",\n *         featureType: \"tasmania_roads\",\n *         featureNS: \"http://www.openplans.org/topp\",\n *         geometryName: \"the_geom\"\n *     });\n * (end)\n *\n * See the protocols for specific WFS versions for more detail.\n */\nOpenLayers.Protocol.WFS = function(options) {\n    options = OpenLayers.Util.applyDefaults(\n        options, OpenLayers.Protocol.WFS.DEFAULTS\n    );\n    var cls = OpenLayers.Protocol.WFS[\"v\"+options.version.replace(/\\./g, \"_\")];\n    if(!cls) {\n        throw \"Unsupported WFS version: \" + options.version;\n    }\n    return new cls(options);\n};\n\n/**\n * Function: fromWMSLayer\n * Convenience function to create a WFS protocol from a WMS layer.  This makes\n *     the assumption that a WFS requests can be issued at the same URL as\n *     WMS requests and that a WFS featureType exists with the same name as the\n *     WMS layer.\n *     \n * This function is designed to auto-configure <url>, <featureType>,\n *     <featurePrefix> and <srsName> for WFS <version> 1.1.0. Note that\n *     srsName matching with the WMS layer will not work with WFS 1.0.0.\n * \n * Parameters:\n * layer - {<OpenLayers.Layer.WMS>} WMS layer that has a matching WFS\n *     FeatureType at the same server url with the same typename.\n * options - {Object} Default properties to be set on the protocol.\n *\n * Returns:\n * {<OpenLayers.Protocol.WFS>}\n */\nOpenLayers.Protocol.WFS.fromWMSLayer = function(layer, options) {\n    var typeName, featurePrefix;\n    var param = layer.params[\"LAYERS\"];\n    var parts = (OpenLayers.Util.isArray(param) ? param[0] : param).split(\":\");\n    if(parts.length > 1) {\n        featurePrefix = parts[0];\n    }\n    typeName = parts.pop();\n    var protocolOptions = {\n        url: layer.url,\n        featureType: typeName,\n        featurePrefix: featurePrefix,\n        srsName: layer.projection && layer.projection.getCode() ||\n                 layer.map && layer.map.getProjectionObject().getCode(),\n        version: \"1.1.0\"\n    };\n    return new OpenLayers.Protocol.WFS(OpenLayers.Util.applyDefaults(\n        options, protocolOptions\n    ));\n};\n\n/**\n * Constant: OpenLayers.Protocol.WFS.DEFAULTS\n */\nOpenLayers.Protocol.WFS.DEFAULTS = {\n    \"version\": \"1.0.0\"\n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Protocol/WFS.js\n */\n\n/**\n * Class: OpenLayers.Protocol.WFS.v1\n * Abstract class for for v1.0.0 and v1.1.0 protocol.\n *\n * Inherits from:\n *  - <OpenLayers.Protocol>\n */\nOpenLayers.Protocol.WFS.v1 = OpenLayers.Class(OpenLayers.Protocol, {\n    \n    /**\n     * Property: version\n     * {String} WFS version number.\n     */\n    version: null,\n    \n    /**\n     * Property: srsName\n     * {String} Name of spatial reference system.  Default is \"EPSG:4326\".\n     */\n    srsName: \"EPSG:4326\",\n    \n    /**\n     * Property: featureType\n     * {String} Local feature typeName.\n     */\n    featureType: null,\n    \n    /**\n     * Property: featureNS\n     * {String} Feature namespace.\n     */\n    featureNS: null,\n    \n    /**\n     * Property: geometryName\n     * {String} Name of the geometry attribute for features.  Default is\n     *     \"the_geom\" for WFS <version> 1.0, and null for higher versions.\n     */\n    geometryName: \"the_geom\",\n\n    /**\n     * Property: maxFeatures\n     * {Integer} Optional maximum number of features to retrieve.\n     */\n    \n    /**\n     * Property: schema\n     * {String} Optional schema location that will be included in the\n     *     schemaLocation attribute value.  Note that the feature type schema\n     *     is required for a strict XML validator (on transactions with an\n     *     insert for example), but is *not* required by the WFS specification\n     *     (since the server is supposed to know about feature type schemas).\n     */\n    schema: null,\n\n    /**\n     * Property: featurePrefix\n     * {String} Namespace alias for feature type.  Default is \"feature\".\n     */\n    featurePrefix: \"feature\",\n    \n    /**\n     * Property: formatOptions\n     * {Object} Optional options for the format.  If a format is not provided,\n     *     this property can be used to extend the default format options.\n     */\n    formatOptions: null,\n\n    /** \n     * Property: readFormat \n     * {<OpenLayers.Format>} For WFS requests it is possible to get a  \n     *     different output format than GML. In that case, we cannot parse  \n     *     the response with the default format (WFST) and we need a different \n     *     format for reading. \n     */ \n    readFormat: null,\n    \n    /**\n     * Property: readOptions\n     * {Object} Optional object to pass to format's read.\n     */\n    readOptions: null,\n    \n    /**\n     * Constructor: OpenLayers.Protocol.WFS\n     * A class for giving layers WFS protocol.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     *\n     * Valid options properties:\n     * url - {String} URL to send requests to (required).\n     * featureType - {String} Local (without prefix) feature typeName (required).\n     * featureNS - {String} Feature namespace (required, but can be autodetected\n     *     during the first query if GML is used as readFormat and\n     *     featurePrefix is provided and matches the prefix used by the server\n     *     for this featureType).\n     * featurePrefix - {String} Feature namespace alias (optional - only used\n     *     for writing if featureNS is provided).  Default is 'feature'.\n     * geometryName - {String} Name of geometry attribute.  The default is\n     *     'the_geom' for WFS <version> 1.0, and null for higher versions. If\n     *     null, it will be set to the name of the first geometry found in the\n     *     first read operation.\n     * multi - {Boolean} If set to true, geometries will be casted to Multi\n     *     geometries before they are written in a transaction. No casting will\n     *     be done when reading features.\n     */\n    initialize: function(options) {\n        OpenLayers.Protocol.prototype.initialize.apply(this, [options]);\n        if(!options.format) {\n            this.format = OpenLayers.Format.WFST(OpenLayers.Util.extend({\n                version: this.version,\n                featureType: this.featureType,\n                featureNS: this.featureNS,\n                featurePrefix: this.featurePrefix,\n                geometryName: this.geometryName,\n                srsName: this.srsName,\n                schema: this.schema\n            }, this.formatOptions));\n        }\n        if (!options.geometryName && parseFloat(this.format.version) > 1.0) {\n            this.setGeometryName(null);\n        }\n    },\n    \n    /**\n     * APIMethod: destroy\n     * Clean up the protocol.\n     */\n    destroy: function() {\n        if(this.options && !this.options.format) {\n            this.format.destroy();\n        }\n        this.format = null;\n        OpenLayers.Protocol.prototype.destroy.apply(this);\n    },\n\n    /**\n     * APIMethod: read\n     * Construct a request for reading new features.  Since WFS splits the\n     *     basic CRUD operations into GetFeature requests (for read) and\n     *     Transactions (for all others), this method does not make use of the\n     *     format's read method (that is only about reading transaction\n     *     responses).\n     *\n     * Parameters:\n     * options - {Object} Options for the read operation, in addition to the\n     *     options set on the instance (options set here will take precedence).\n     *\n     * To use a configured protocol to get e.g. a WFS hit count, applications\n     * could do the following:\n     *\n     * (code)\n     * protocol.read({\n     *     readOptions: {output: \"object\"},\n     *     resultType: \"hits\",\n     *     maxFeatures: null,\n     *     callback: function(resp) {\n     *         // process resp.numberOfFeatures here\n     *     }\n     * });\n     * (end)\n     *\n     * To use a configured protocol to use WFS paging (if supported by the\n     * server), applications could do the following:\n     *\n     * (code)\n     * protocol.read({\n     *     startIndex: 0,\n     *     count: 50\n     * });\n     * (end)\n     *\n     * To limit the attributes returned by the GetFeature request, applications\n     * can use the propertyNames option to specify the properties to include in\n     * the response:\n     *\n     * (code)\n     * protocol.read({\n     *     propertyNames: [\"DURATION\", \"INTENSITY\"]\n     * });\n     * (end)\n     */\n    read: function(options) {\n        OpenLayers.Protocol.prototype.read.apply(this, arguments);\n        options = OpenLayers.Util.extend({}, options);\n        OpenLayers.Util.applyDefaults(options, this.options || {});\n        var response = new OpenLayers.Protocol.Response({requestType: \"read\"});\n        \n        var data = OpenLayers.Format.XML.prototype.write.apply(\n            this.format, [this.format.writeNode(\"wfs:GetFeature\", options)]\n        );\n\n        response.priv = OpenLayers.Request.POST({\n            url: options.url,\n            callback: this.createCallback(this.handleRead, response, options),\n            params: options.params,\n            headers: options.headers,\n            data: data\n        });\n\n        return response;\n    },\n\n    /**\n     * APIMethod: setFeatureType\n     * Change the feature type on the fly.\n     *\n     * Parameters:\n     * featureType - {String} Local (without prefix) feature typeName.\n     */\n    setFeatureType: function(featureType) {\n        this.featureType = featureType;\n        this.format.featureType = featureType;\n    },\n \n    /**\n     * APIMethod: setGeometryName\n     * Sets the geometryName option after instantiation.\n     *\n     * Parameters:\n     * geometryName - {String} Name of geometry attribute.\n     */\n    setGeometryName: function(geometryName) {\n        this.geometryName = geometryName;\n        this.format.geometryName = geometryName;\n    },\n    \n    /**\n     * Method: handleRead\n     * Deal with response from the read request.\n     *\n     * Parameters:\n     * response - {<OpenLayers.Protocol.Response>} The response object to pass\n     *     to the user callback.\n     * options - {Object} The user options passed to the read call.\n     */\n    handleRead: function(response, options) {\n        options = OpenLayers.Util.extend({}, options);\n        OpenLayers.Util.applyDefaults(options, this.options);\n\n        if(options.callback) {\n            var request = response.priv;\n            if(request.status >= 200 && request.status < 300) {\n                // success\n                var result = this.parseResponse(request, options.readOptions);\n                if (result && result.success !== false) { \n                    if (options.readOptions && options.readOptions.output == \"object\") {\n                        OpenLayers.Util.extend(response, result);\n                    } else {\n                        response.features = result;\n                    }\n                    response.code = OpenLayers.Protocol.Response.SUCCESS;\n                } else {\n                    // failure (service exception)\n                    response.code = OpenLayers.Protocol.Response.FAILURE;\n                    response.error = result;\n                }\n            } else {\n                // failure\n                response.code = OpenLayers.Protocol.Response.FAILURE;\n            }\n            options.callback.call(options.scope, response);\n        }\n    },\n\n    /**\n     * Method: parseResponse\n     * Read HTTP response body and return features\n     *\n     * Parameters:\n     * request - {XMLHttpRequest} The request object\n     * options - {Object} Optional object to pass to format's read\n     *\n     * Returns:\n     * {Object} or {Array({<OpenLayers.Feature.Vector>})} or\n     *     {<OpenLayers.Feature.Vector>} \n     * An object with a features property, an array of features or a single \n     * feature.\n     */\n    parseResponse: function(request, options) {\n        var doc = request.responseXML;\n        if(!doc || !doc.documentElement) {\n            doc = request.responseText;\n        }\n        if(!doc || doc.length <= 0) {\n            return null;\n        }\n        var result = (this.readFormat !== null) ? this.readFormat.read(doc) : \n            this.format.read(doc, options);\n        if (!this.featureNS) {\n            var format = this.readFormat || this.format;\n            this.featureNS = format.featureNS;\n            // no need to auto-configure again on subsequent reads\n            format.autoConfig = false;\n            if (!this.geometryName) {\n                this.setGeometryName(format.geometryName);\n            }\n        }\n        return result;\n    },\n\n    /**\n     * Method: commit\n     * Given a list of feature, assemble a batch request for update, create,\n     *     and delete transactions.  A commit call on the prototype amounts\n     *     to writing a WFS transaction - so the write method on the format\n     *     is used.\n     *\n     * Parameters:\n     * features - {Array(<OpenLayers.Feature.Vector>)}\n     * options - {Object}\n     *\n     * Valid options properties:\n     * nativeElements - {Array({Object})} Array of objects with information for writing\n     * out <Native> elements, these objects have vendorId, safeToIgnore and\n     * value properties. The <Native> element is intended to allow access to \n     * vendor specific capabilities of any particular web feature server or \n     * datastore.\n     *\n     * Returns:\n     * {<OpenLayers.Protocol.Response>} A response object with a features\n     *     property containing any insertIds and a priv property referencing\n     *     the XMLHttpRequest object.\n     */\n    commit: function(features, options) {\n\n        options = OpenLayers.Util.extend({}, options);\n        OpenLayers.Util.applyDefaults(options, this.options);\n        \n        var response = new OpenLayers.Protocol.Response({\n            requestType: \"commit\",\n            reqFeatures: features\n        });\n        response.priv = OpenLayers.Request.POST({\n            url: options.url,\n            headers: options.headers,\n            data: this.format.write(features, options),\n            callback: this.createCallback(this.handleCommit, response, options)\n        });\n        \n        return response;\n    },\n    \n    /**\n     * Method: handleCommit\n     * Called when the commit request returns.\n     * \n     * Parameters:\n     * response - {<OpenLayers.Protocol.Response>} The response object to pass\n     *     to the user callback.\n     * options - {Object} The user options passed to the commit call.\n     */\n    handleCommit: function(response, options) {\n        if(options.callback) {\n            var request = response.priv;\n\n            // ensure that we have an xml doc\n            var data = request.responseXML;\n            if(!data || !data.documentElement) {\n                data = request.responseText;\n            }\n            \n            var obj = this.format.read(data) || {};\n            \n            response.insertIds = obj.insertIds || [];\n            if (obj.success) {\n                response.code = OpenLayers.Protocol.Response.SUCCESS;\n            } else {\n                response.code = OpenLayers.Protocol.Response.FAILURE;\n                response.error = obj;\n            }\n            options.callback.call(options.scope, response);\n        }\n    },\n    \n    /**\n     * Method: filterDelete\n     * Send a request that deletes all features by their filter.\n     * \n     * Parameters:\n     * filter - {<OpenLayers.Filter>} filter\n     */\n    filterDelete: function(filter, options) {\n        options = OpenLayers.Util.extend({}, options);\n        OpenLayers.Util.applyDefaults(options, this.options);    \n        \n        var response = new OpenLayers.Protocol.Response({\n            requestType: \"commit\"\n        });    \n        \n        var root = this.format.createElementNSPlus(\"wfs:Transaction\", {\n            attributes: {\n                service: \"WFS\",\n                version: this.version\n            }\n        });\n        \n        var deleteNode = this.format.createElementNSPlus(\"wfs:Delete\", {\n            attributes: {\n                typeName: (options.featureNS ? this.featurePrefix + \":\" : \"\") +\n                    options.featureType\n            }\n        });       \n        \n        if(options.featureNS) {\n            deleteNode.setAttribute(\"xmlns:\" + this.featurePrefix, options.featureNS);\n        }\n        var filterNode = this.format.writeNode(\"ogc:Filter\", filter);\n        \n        deleteNode.appendChild(filterNode);\n        \n        root.appendChild(deleteNode);\n        \n        var data = OpenLayers.Format.XML.prototype.write.apply(\n            this.format, [root]\n        );\n        \n        return OpenLayers.Request.POST({\n            url: this.url,\n            callback : options.callback || function(){},\n            data: data\n        });   \n        \n    },\n\n    /**\n     * Method: abort\n     * Abort an ongoing request, the response object passed to\n     * this method must come from this protocol (as a result\n     * of a read, or commit operation).\n     *\n     * Parameters:\n     * response - {<OpenLayers.Protocol.Response>}\n     */\n    abort: function(response) {\n        if (response) {\n            response.priv.abort();\n        }\n    },\n  \n    CLASS_NAME: \"OpenLayers.Protocol.WFS.v1\" \n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Protocol/WFS/v1.js\n * @requires OpenLayers/Format/WFST/v1_0_0.js\n */\n\n/**\n * Class: OpenLayers.Protocol.WFS.v1_0_0\n * A WFS v1.0.0 protocol for vector layers.  Create a new instance with the\n *     <OpenLayers.Protocol.WFS.v1_0_0> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Protocol.WFS.v1>\n */\nOpenLayers.Protocol.WFS.v1_0_0 = OpenLayers.Class(OpenLayers.Protocol.WFS.v1, {\n    \n    /**\n     * Property: version\n     * {String} WFS version number.\n     */\n    version: \"1.0.0\",\n    \n    /**\n     * Constructor: OpenLayers.Protocol.WFS.v1_0_0\n     * A class for giving layers WFS v1.0.0 protocol.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     *\n     * Valid options properties:\n     * featureType - {String} Local (without prefix) feature typeName (required).\n     * featureNS - {String} Feature namespace (optional).\n     * featurePrefix - {String} Feature namespace alias (optional - only used\n     *     if featureNS is provided).  Default is 'feature'.\n     * geometryName - {String} Name of geometry attribute.  Default is 'the_geom'.\n     */\n   \n    CLASS_NAME: \"OpenLayers.Protocol.WFS.v1_0_0\" \n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Protocol/WFS/v1.js\n * @requires OpenLayers/Format/WFST/v1_1_0.js\n */\n\n/**\n * Class: OpenLayers.Protocol.WFS.v1_1_0\n * A WFS v1.1.0 protocol for vector layers.  Create a new instance with the\n *     <OpenLayers.Protocol.WFS.v1_1_0> constructor.\n *\n * Differences from the v1.0.0 protocol:\n *  - uses Filter Encoding 1.1.0 instead of 1.0.0\n *  - uses GML 3 instead of 2 if no format is provided\n *  \n * Inherits from:\n *  - <OpenLayers.Protocol.WFS.v1>\n */\nOpenLayers.Protocol.WFS.v1_1_0 = OpenLayers.Class(OpenLayers.Protocol.WFS.v1, {\n    \n    /**\n     * Property: version\n     * {String} WFS version number.\n     */\n    version: \"1.1.0\",\n    \n    /**\n     * Constructor: OpenLayers.Protocol.WFS.v1_1_0\n     * A class for giving layers WFS v1.1.0 protocol.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     *\n     * Valid options properties:\n     * featureType - {String} Local (without prefix) feature typeName (required).\n     * featureNS - {String} Feature namespace (optional).\n     * featurePrefix - {String} Feature namespace alias (optional - only used\n     *     if featureNS is provided).  Default is 'feature'.\n     * geometryName - {String} Name of geometry attribute.  Default is 'the_geom'.\n     * outputFormat - {String} Optional output format to use for WFS GetFeature\n     *     requests. This can be any format advertized by the WFS's\n     *     GetCapabilities response. If set, an appropriate readFormat also\n     *     has to be provided, unless outputFormat is GML3, GML2 or JSON.\n     * readFormat - {<OpenLayers.Format>} An appropriate format parser if\n     *     outputFormat is none of GML3, GML2 or JSON.\n     */\n    initialize: function(options) {\n        OpenLayers.Protocol.WFS.v1.prototype.initialize.apply(this, arguments);\n        if (this.outputFormat && !this.readFormat) {\n            if (this.outputFormat.toLowerCase() == \"gml2\") {\n                this.readFormat = new OpenLayers.Format.GML.v2({\n                    featureType: this.featureType,\n                    featureNS: this.featureNS,\n                    geometryName: this.geometryName\n                });\n            } else if (this.outputFormat.toLowerCase() == \"json\") {\n                this.readFormat = new OpenLayers.Format.GeoJSON();\n            }\n        }\n    },\n   \n    CLASS_NAME: \"OpenLayers.Protocol.WFS.v1_1_0\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Protocol/WFS/v1.js\n * @requires OpenLayers/Format/WFST/v2_0_0.js\n */\n\n/**\n * Class: OpenLayers.Protocol.WFS.v2_0_0\n * A WFS v2.0.0 protocol for vector layers.  Create a new instance with the\n *     <OpenLayers.Protocol.WFS.v2_0_0> constructor.\n *\n * Differences from the v1.0.0 protocol:\n *  - uses Filter Encoding 1.1.0 instead of 1.0.0\n *  - uses GML 3 instead of 2 if no format is provided\n *  \n * Inherits from:\n *  - <OpenLayers.Protocol.WFS.v1>\n */\nOpenLayers.Protocol.WFS.v2_0_0 = OpenLayers.Class(OpenLayers.Protocol.WFS.v1, {\n    \n    /**\n     * Property: version\n     * {String} WFS version number.\n     */\n    version: \"2.0.0\",\n    \n    /**\n     * Constructor: OpenLayers.Protocol.WFS.v2_0_0\n     * A class for giving layers WFS v2.0.0 protocol.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     *\n     * Valid options properties:\n     * featureType - {String} Local (without prefix) feature typeName (required).\n     * featureNS - {String} Feature namespace (optional).\n     * featurePrefix - {String} Feature namespace alias (optional - only used\n     *     if featureNS is provided).  Default is 'feature'.\n     * geometryName - {String} Name of geometry attribute.  Default is 'the_geom'.\n     * outputFormat - {String} Optional output format to use for WFS GetFeature\n     *     requests. This can be any format advertized by the WFS's\n     *     GetCapabilities response. If set, an appropriate readFormat also\n     *     has to be provided, unless outputFormat is GML3, GML2 or JSON.\n     * readFormat - {<OpenLayers.Format>} An appropriate format parser if\n     *     outputFormat is none of GML3, GML2 or JSON.\n     */\n    initialize: function(options) {\n        OpenLayers.Protocol.WFS.v1.prototype.initialize.apply(this, arguments);\n        if (this.outputFormat && !this.readFormat) {\n            if (this.outputFormat.toLowerCase() == \"gml3\") {\n                this.readFormat = new OpenLayers.Format.GML.v3({\n                    featureType: this.featureType,\n                    featureNS: this.featureNS,\n                    geometryName: this.geometryName\n                });\n            } else if (this.outputFormat.toLowerCase() == \"json\") {\n                this.readFormat = new OpenLayers.Format.GeoJSON();\n            }\n        }\n    },\n   \n    CLASS_NAME: \"OpenLayers.Protocol.WFS.v2_0_0\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Protocol.js\n */\n\n/**\n * Class: OpenLayers.Protocol.CSW\n * Used to create a versioned CSW protocol. Default version is 2.0.2.\n */\nOpenLayers.Protocol.CSW = function(options) {\n    options = OpenLayers.Util.applyDefaults(\n        options, OpenLayers.Protocol.CSW.DEFAULTS\n    );\n    var cls = OpenLayers.Protocol.CSW[\"v\"+options.version.replace(/\\./g, \"_\")];\n    if(!cls) {\n        throw \"Unsupported CSW version: \" + options.version;\n    }\n    return new cls(options);\n};\n\n/**\n * Constant: OpenLayers.Protocol.CSW.DEFAULTS\n */\nOpenLayers.Protocol.CSW.DEFAULTS = {\n    \"version\": \"2.0.2\"\n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Protocol/CSW.js\n * @requires OpenLayers/Format/CSWGetRecords/v2_0_2.js\n */\n\n/**\n * Class: OpenLayers.Protocol.CSW.v2_0_2\n * CS-W (Catalogue services for the Web) version 2.0.2 protocol.\n *\n * Inherits from:\n *  - <OpenLayers.Protocol>\n */\nOpenLayers.Protocol.CSW.v2_0_2 = OpenLayers.Class(OpenLayers.Protocol, {\n\n    /**\n     * Property: formatOptions\n     * {Object} Optional options for the format.  If a format is not provided,\n     *     this property can be used to extend the default format options.\n     */\n    formatOptions: null,\n\n    /**\n     * Constructor: OpenLayers.Protocol.CSW.v2_0_2\n     * A class for CSW version 2.0.2 protocol management.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     */\n    initialize: function(options) {\n        OpenLayers.Protocol.prototype.initialize.apply(this, [options]);\n        if(!options.format) {\n            this.format = new OpenLayers.Format.CSWGetRecords.v2_0_2(OpenLayers.Util.extend({\n            }, this.formatOptions));\n        }\n    },\n\n    /**\n     * APIMethod: destroy\n     * Clean up the protocol.\n     */\n    destroy: function() {\n        if(this.options && !this.options.format) {\n            this.format.destroy();\n        }\n        this.format = null;\n        OpenLayers.Protocol.prototype.destroy.apply(this);\n    },\n\n    /**\n     * Method: read\n     * Construct a request for reading new records from the Catalogue.\n     */\n    read: function(options) {\n        options = OpenLayers.Util.extend({}, options);\n        OpenLayers.Util.applyDefaults(options, this.options || {});\n        var response = new OpenLayers.Protocol.Response({requestType: \"read\"});\n\n        var data = this.format.write(options.params || options);\n\n        response.priv = OpenLayers.Request.POST({\n            url: options.url,\n            callback: this.createCallback(this.handleRead, response, options),\n            params: options.params,\n            headers: options.headers,\n            data: data\n        });\n\n        return response;\n    },\n\n    /**\n     * Method: handleRead\n     * Deal with response from the read request.\n     *\n     * Parameters:\n     * response - {<OpenLayers.Protocol.Response>} The response object to pass\n     *     to the user callback.\n     *     This response is given a code property, and optionally a data property.\n     *     The latter represents the CSW records as returned by the call to\n     *     the CSW format read method.\n     * options - {Object} The user options passed to the read call.\n     */\n    handleRead: function(response, options) {\n        if(options.callback) {\n            var request = response.priv;\n            if(request.status >= 200 && request.status < 300) {\n                // success\n                response.data = this.parseData(request);\n                response.code = OpenLayers.Protocol.Response.SUCCESS;\n            } else {\n                // failure\n                response.code = OpenLayers.Protocol.Response.FAILURE;\n            }\n            options.callback.call(options.scope, response);\n        }\n    },\n\n    /**\n     * Method: parseData\n     * Read HTTP response body and return records\n     *\n     * Parameters:\n     * request - {XMLHttpRequest} The request object\n     *\n     * Returns:\n     * {Object} The CSW records as returned by the call to the format read method.\n     */\n    parseData: function(request) {\n        var doc = request.responseXML;\n        if(!doc || !doc.documentElement) {\n            doc = request.responseText;\n        }\n        if(!doc || doc.length <= 0) {\n            return null;\n        }\n        return this.format.read(doc);\n    },\n\n    CLASS_NAME: \"OpenLayers.Protocol.CSW.v2_0_2\"\n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Protocol.js\n * @requires OpenLayers/Feature/Vector.js\n * @requires OpenLayers/Format/GeoJSON.js\n */\n\n/**\n * if application uses the query string, for example, for BBOX parameters,\n * OpenLayers/Format/QueryStringFilter.js should be included in the build config file\n */\n\n/**\n * Class: OpenLayers.Protocol.Script\n * A basic Script protocol for vector layers.  Create a new instance with the\n *     <OpenLayers.Protocol.Script> constructor.  A script protocol is used to\n *     get around the same origin policy.  It works with services that return\n *     JSONP - that is, JSON wrapped in a client-specified callback.  The\n *     protocol handles fetching and parsing of feature data and sends parsed\n *     features to the <callback> configured with the protocol.  The protocol\n *     expects features serialized as GeoJSON by default, but can be configured\n *     to work with other formats by setting the <format> property.\n *\n * Inherits from:\n *  - <OpenLayers.Protocol>\n */\nOpenLayers.Protocol.Script = OpenLayers.Class(OpenLayers.Protocol, {\n\n    /**\n     * APIProperty: url\n     * {String} Service URL.  The service is expected to return serialized \n     *     features wrapped in a named callback (where the callback name is\n     *     generated by this protocol).\n     *     Read-only, set through the options passed to the constructor.\n     */\n    url: null,\n\n    /**\n     * APIProperty: params\n     * {Object} Query string parameters to be appended to the URL.\n     *     Read-only, set through the options passed to the constructor.\n     *     Example: {maxFeatures: 50}\n     */\n    params: null,\n    \n    /**\n     * APIProperty: callback\n     * {Object} Function to be called when the <read> operation completes.\n     */\n    callback: null,\n\n    /**\n     * APIProperty: callbackTemplate\n     * {String} Template for creating a unique callback function name\n     * for the registry. Should include ${id}.  The ${id} variable will be\n     * replaced with a string identifier prefixed with a \"c\" (e.g. c1, c2).\n     * Default is \"OpenLayers.Protocol.Script.registry.${id}\".\n     */\n    callbackTemplate: \"OpenLayers.Protocol.Script.registry.${id}\",\n\n    /**\n     * APIProperty: callbackKey\n     * {String} The name of the query string parameter that the service \n     *     recognizes as the callback identifier.  Default is \"callback\".\n     *     This key is used to generate the URL for the script.  For example\n     *     setting <callbackKey> to \"myCallback\" would result in a URL like \n     *     http://example.com/?myCallback=...\n     */\n    callbackKey: \"callback\",\n\n    /**\n     * APIProperty: callbackPrefix\n     * {String} Where a service requires that the callback query string \n     *     parameter value is prefixed by some string, this value may be set.\n     *     For example, setting <callbackPrefix> to \"foo:\" would result in a\n     *     URL like http://example.com/?callback=foo:...  Default is \"\".\n     */\n    callbackPrefix: \"\",\n\n    /**\n     * APIProperty: scope\n     * {Object} Optional ``this`` object for the callback. Read-only, set \n     *     through the options passed to the constructor.\n     */\n    scope: null,\n\n    /**\n     * APIProperty: format\n     * {<OpenLayers.Format>} Format for parsing features.  Default is an \n     *     <OpenLayers.Format.GeoJSON> format.  If an alternative is provided,\n     *     the format's read method must take an object and return an array\n     *     of features.\n     */\n    format: null,\n\n    /**\n     * Property: pendingRequests\n     * {Object} References all pending requests.  Property names are script \n     *     identifiers and property values are script elements.\n     */\n    pendingRequests: null,\n\n    /**\n     * APIProperty: srsInBBOX\n     * {Boolean} Include the SRS identifier in BBOX query string parameter.\n     *     Setting this property has no effect if a custom filterToParams method\n     *     is provided.   Default is false.  If true and the layer has a \n     *     projection object set, any BBOX filter will be serialized with a \n     *     fifth item identifying the projection.  \n     *     E.g. bbox=-1000,-1000,1000,1000,EPSG:900913\n     */\n    srsInBBOX: false,\n\n    /**\n     * Constructor: OpenLayers.Protocol.Script\n     * A class for giving layers generic Script protocol.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     *\n     * Valid options include:\n     * url - {String}\n     * params - {Object}\n     * callback - {Function}\n     * scope - {Object}\n     */\n    initialize: function(options) {\n        options = options || {};\n        this.params = {};\n        this.pendingRequests = {};\n        OpenLayers.Protocol.prototype.initialize.apply(this, arguments);\n        if (!this.format) {\n            this.format = new OpenLayers.Format.GeoJSON();\n        }\n\n        if (!this.filterToParams && OpenLayers.Format.QueryStringFilter) {\n            var format = new OpenLayers.Format.QueryStringFilter({\n                srsInBBOX: this.srsInBBOX\n            });\n            this.filterToParams = function(filter, params) {\n                return format.write(filter, params);\n            };\n        }\n    },\n    \n    /**\n     * APIMethod: read\n     * Construct a request for reading new features.\n     *\n     * Parameters:\n     * options - {Object} Optional object for configuring the request.\n     *     This object is modified and should not be reused.\n     *\n     * Valid options:\n     * url - {String} Url for the request.\n     * params - {Object} Parameters to get serialized as a query string.\n     * filter - {<OpenLayers.Filter>} Filter to get serialized as a\n     *     query string.\n     *\n     * Returns:\n     * {<OpenLayers.Protocol.Response>} A response object, whose \"priv\" property\n     *     references the injected script.  This object is also passed to the\n     *     callback function when the request completes, its \"features\" property\n     *     is then populated with the features received from the server.\n     */\n    read: function(options) {\n        OpenLayers.Protocol.prototype.read.apply(this, arguments);\n        options = OpenLayers.Util.applyDefaults(options, this.options);\n        options.params = OpenLayers.Util.applyDefaults(\n            options.params, this.options.params\n        );\n        if (options.filter && this.filterToParams) {\n            options.params = this.filterToParams(\n                options.filter, options.params\n            );\n        }\n        var response = new OpenLayers.Protocol.Response({requestType: \"read\"});\n        var request = this.createRequest(\n            options.url, \n            options.params, \n            OpenLayers.Function.bind(function(data) {\n                response.data = data;\n                this.handleRead(response, options);\n            }, this)\n        );\n        response.priv = request;\n        return response;\n    },\n\n    /** \n     * APIMethod: filterToParams \n     * Optional method to translate an <OpenLayers.Filter> object into an object \n     *     that can be serialized as request query string provided.  If a custom \n     *     method is not provided, any filter will not be serialized. \n     * \n     * Parameters: \n     * filter - {<OpenLayers.Filter>} filter to convert. \n     * params - {Object} The parameters object. \n     * \n     * Returns: \n     * {Object} The resulting parameters object. \n     */\n\n    /** \n     * Method: createRequest\n     * Issues a request for features by creating injecting a script in the \n     *     document head.\n     *\n     * Parameters:\n     * url - {String} Service URL.\n     * params - {Object} Query string parameters.\n     * callback - {Function} Callback to be called with resulting data.\n     *\n     * Returns:\n     * {HTMLScriptElement} The script pending execution.\n     */\n    createRequest: function(url, params, callback) {\n        var id = OpenLayers.Protocol.Script.register(callback);\n        var name = OpenLayers.String.format(this.callbackTemplate, {id: id});\n        params = OpenLayers.Util.extend({}, params);\n        params[this.callbackKey] = this.callbackPrefix + name;\n        url = OpenLayers.Util.urlAppend(\n            url, OpenLayers.Util.getParameterString(params)\n        );\n        var script = document.createElement(\"script\");\n        script.type = \"text/javascript\";\n        script.src = url;\n        script.id = \"OpenLayers_Protocol_Script_\" + id;\n        this.pendingRequests[script.id] = script;\n        var head = document.getElementsByTagName(\"head\")[0];\n        head.appendChild(script);\n        return script;\n    },\n    \n    /** \n     * Method: destroyRequest\n     * Remove a script node associated with a response from the document.  Also\n     *     unregisters the callback and removes the script from the \n     *     <pendingRequests> object.\n     *\n     * Parameters:\n     * script - {HTMLScriptElement}\n     */\n    destroyRequest: function(script) {\n        OpenLayers.Protocol.Script.unregister(script.id.split(\"_\").pop());\n        delete this.pendingRequests[script.id];\n        if (script.parentNode) {\n            script.parentNode.removeChild(script);\n        }\n    },\n\n    /**\n     * Method: handleRead\n     * Individual callbacks are created for read, create and update, should\n     *     a subclass need to override each one separately.\n     *\n     * Parameters:\n     * response - {<OpenLayers.Protocol.Response>} The response object to pass to\n     *     the user callback.\n     * options - {Object} The user options passed to the read call.\n     */\n    handleRead: function(response, options) {\n        this.handleResponse(response, options);\n    },\n\n    /**\n     * Method: handleResponse\n     * Called by CRUD specific handlers.\n     *\n     * Parameters:\n     * response - {<OpenLayers.Protocol.Response>} The response object to pass to\n     *     any user callback.\n     * options - {Object} The user options passed to the create, read, update,\n     *     or delete call.\n     */\n    handleResponse: function(response, options) {\n        if (options.callback) {\n            if (response.data) {\n                response.features = this.parseFeatures(response.data);\n                response.code = OpenLayers.Protocol.Response.SUCCESS;\n            } else {\n                response.code = OpenLayers.Protocol.Response.FAILURE;\n            }\n            this.destroyRequest(response.priv);\n            options.callback.call(options.scope, response);\n        }\n    },\n\n    /**\n     * Method: parseFeatures\n     * Read Script response body and return features.\n     *\n     * Parameters:\n     * data - {Object} The data sent to the callback function by the server.\n     *\n     * Returns:\n     * {Array({<OpenLayers.Feature.Vector>})} or\n     *     {<OpenLayers.Feature.Vector>} Array of features or a single feature.\n     */\n    parseFeatures: function(data) {\n        return this.format.read(data);\n    },\n\n    /**\n     * APIMethod: abort\n     * Abort an ongoing request.  If no response is provided, all pending \n     *     requests will be aborted.\n     *\n     * Parameters:\n     * response - {<OpenLayers.Protocol.Response>} The response object returned\n     *     from a <read> request.\n     */\n    abort: function(response) {\n        if (response) {\n            this.destroyRequest(response.priv);\n        } else {\n            for (var key in this.pendingRequests) {\n                this.destroyRequest(this.pendingRequests[key]);\n            }\n        }\n    },\n    \n    /**\n     * APIMethod: destroy\n     * Clean up the protocol.\n     */\n    destroy: function() {\n        this.abort();\n        delete this.params;\n        delete this.format;\n        OpenLayers.Protocol.prototype.destroy.apply(this);\n    },\n\n    CLASS_NAME: \"OpenLayers.Protocol.Script\" \n});\n\n(function() {\n    var o = OpenLayers.Protocol.Script;\n    var counter = 0;\n    o.registry = {};\n    \n    /**\n     * Function: OpenLayers.Protocol.Script.register\n     * Register a callback for a newly created script.\n     *\n     * Parameters:\n     * callback - {Function} The callback to be executed when the newly added\n     *     script loads.  This callback will be called with a single argument\n     *     that is the JSON returned by the service.\n     *\n     * Returns:\n     * {Number} An identifier for retrieving the registered callback.\n     */\n    o.register = function(callback) {\n        var id = \"c\"+(++counter);\n        o.registry[id] = function() {\n            callback.apply(this, arguments);\n        };\n        return id;\n    };\n    \n    /**\n     * Function: OpenLayers.Protocol.Script.unregister\n     * Unregister a callback previously registered with the register function.\n     *\n     * Parameters:\n     * id - {Number} The identifer returned by the register function.\n     */\n    o.unregister = function(id) {\n        delete o.registry[id];\n    };\n})();\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Protocol.js\n */\n\n/**\n * Function: OpenLayers.Protocol.SOS\n * Used to create a versioned SOS protocol.  Default version is 1.0.0.\n *\n * Returns:\n * {<OpenLayers.Protocol>} An SOS protocol for the given version.\n */\nOpenLayers.Protocol.SOS = function(options) {\n    options = OpenLayers.Util.applyDefaults(\n        options, OpenLayers.Protocol.SOS.DEFAULTS\n    );\n    var cls = OpenLayers.Protocol.SOS[\"v\"+options.version.replace(/\\./g, \"_\")];\n    if(!cls) {\n        throw \"Unsupported SOS version: \" + options.version;\n    }\n    return new cls(options);\n};\n\n/**\n * Constant: OpenLayers.Protocol.SOS.DEFAULTS\n */\nOpenLayers.Protocol.SOS.DEFAULTS = {\n    \"version\": \"1.0.0\"\n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Protocol/SOS.js\n * @requires OpenLayers/Format/SOSGetFeatureOfInterest.js\n */\n\n/**\n * Class: OpenLayers.Protocol.SOS.v1_0_0\n * An SOS v1.0.0 Protocol for vector layers.  Create a new instance with the\n *     <OpenLayers.Protocol.SOS.v1_0_0> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Protocol>\n */\n OpenLayers.Protocol.SOS.v1_0_0 = OpenLayers.Class(OpenLayers.Protocol, {\n\n    /**\n     * APIProperty: fois\n     * {Array(String)} Array of features of interest (foi)\n     */\n    fois: null,\n\n    /**\n     * Property: formatOptions\n     * {Object} Optional options for the format.  If a format is not provided,\n     *     this property can be used to extend the default format options.\n     */\n    formatOptions: null,\n   \n    /**\n     * Constructor: OpenLayers.Protocol.SOS\n     * A class for giving layers an SOS protocol.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     *\n     * Valid options properties:\n     * url - {String} URL to send requests to (required).\n     * fois - {Array} The features of interest (required).\n     */\n    initialize: function(options) {\n        OpenLayers.Protocol.prototype.initialize.apply(this, [options]);\n        if(!options.format) {\n            this.format = new OpenLayers.Format.SOSGetFeatureOfInterest(\n                this.formatOptions);\n        }\n    },\n   \n    /**\n     * APIMethod: destroy\n     * Clean up the protocol.\n     */\n    destroy: function() {\n        if(this.options && !this.options.format) {\n            this.format.destroy();\n        }\n        this.format = null;\n        OpenLayers.Protocol.prototype.destroy.apply(this);\n    },\n\n    /**\n     * APIMethod: read\n     * Construct a request for reading new sensor positions. This is done by\n     *     issuing one GetFeatureOfInterest request.\n     */\n    read: function(options) {\n        options = OpenLayers.Util.extend({}, options);\n        OpenLayers.Util.applyDefaults(options, this.options || {});\n        var response = new OpenLayers.Protocol.Response({requestType: \"read\"});\n        var format = this.format;\n        var data = OpenLayers.Format.XML.prototype.write.apply(format,\n            [format.writeNode(\"sos:GetFeatureOfInterest\", {fois: this.fois})]\n        );\n        response.priv = OpenLayers.Request.POST({\n            url: options.url,\n            callback: this.createCallback(this.handleRead, response, options),\n            data: data\n        });\n        return response;\n    },\n   \n    /**\n     * Method: handleRead\n     * Deal with response from the read request.\n     *\n     * Parameters:\n     * response - {<OpenLayers.Protocol.Response>} The response object to pass\n     *     to the user callback.\n     * options - {Object} The user options passed to the read call.\n     */\n    handleRead: function(response, options) {\n        if(options.callback) {\n            var request = response.priv;\n            if(request.status >= 200 && request.status < 300) {\n                // success\n                response.features = this.parseFeatures(request);\n                response.code = OpenLayers.Protocol.Response.SUCCESS;\n            } else {\n                // failure\n                response.code = OpenLayers.Protocol.Response.FAILURE;\n            }\n            options.callback.call(options.scope, response);\n        }\n    },\n\n    /**\n     * Method: parseFeatures\n     * Read HTTP response body and return features\n     *\n     * Parameters:\n     * request - {XMLHttpRequest} The request object\n     *\n     * Returns:\n     * {Array({<OpenLayers.Feature.Vector>})} Array of features\n     */\n    parseFeatures: function(request) {\n        var doc = request.responseXML;\n        if(!doc || !doc.documentElement) {\n            doc = request.responseText;\n        }\n        if(!doc || doc.length <= 0) {\n            return null;\n        }\n        return this.format.read(doc);\n    },\n\n    CLASS_NAME: \"OpenLayers.Protocol.SOS.v1_0_0\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Layer/Vector.js\n */\n\n/**\n * Class: OpenLayers.Layer.PointTrack\n * Vector layer to display ordered point features as a line, creating one\n * LineString feature for each pair of two points.\n *\n * Inherits from:\n *  - <OpenLayers.Layer.Vector> \n */\nOpenLayers.Layer.PointTrack = OpenLayers.Class(OpenLayers.Layer.Vector, {\n  \n    /**\n     * APIProperty: dataFrom\n     *     {<OpenLayers.Layer.PointTrack.TARGET_NODE>} or\n     *     {<OpenLayers.Layer.PointTrack.SOURCE_NODE>} optional. If the lines\n     *     should get the data/attributes from one of the two points it is\n     *     composed of, which one should it be?\n     */\n    dataFrom: null,\n    \n    /**\n     * APIProperty: styleFrom\n     *     {<OpenLayers.Layer.PointTrack.TARGET_NODE>} or\n     *     {<OpenLayers.Layer.PointTrack.SOURCE_NODE>} optional. If the lines\n     *     should get the style from one of the two points it is composed of,\n     *     which one should it be?\n     */\n    styleFrom: null,\n    \n    /**\n     * Constructor: OpenLayers.PointTrack\n     * Constructor for a new OpenLayers.PointTrack instance.\n     *\n     * Parameters:\n     * name     - {String} name of the layer\n     * options  - {Object} Optional object with properties to tag onto the\n     *            instance.\n     */    \n        \n    /**\n     * APIMethod: addNodes\n     * Adds point features that will be used to create lines from, using point\n     * pairs. The first point of a pair will be the source node, the second\n     * will be the target node.\n     * \n     * Parameters:\n     * pointFeatures - {Array(<OpenLayers.Feature>)}\n     * options - {Object}\n     * \n     * Supported options:\n     * silent - {Boolean} true to suppress (before)feature(s)added events\n     */\n    addNodes: function(pointFeatures, options) {\n        if (pointFeatures.length < 2) {\n            throw new Error(\"At least two point features have to be added to \" +\n                            \"create a line from\");\n        }\n        \n        var lines = new Array(pointFeatures.length-1);\n        \n        var pointFeature, startPoint, endPoint;\n        for(var i=0, len=pointFeatures.length; i<len; i++) {\n            pointFeature = pointFeatures[i];\n            endPoint = pointFeature.geometry;\n            \n            if (!endPoint) {\n              var lonlat = pointFeature.lonlat;\n              endPoint = new OpenLayers.Geometry.Point(lonlat.lon, lonlat.lat);\n            } else if(endPoint.CLASS_NAME != \"OpenLayers.Geometry.Point\") {\n                throw new TypeError(\"Only features with point geometries are supported.\");\n            }\n            \n            if(i > 0) {\n                var attributes = (this.dataFrom != null) ?\n                        (pointFeatures[i+this.dataFrom].data ||\n                                pointFeatures[i+this.dataFrom].attributes) :\n                        null;\n                var style = (this.styleFrom != null) ?\n                        (pointFeatures[i+this.styleFrom].style) :\n                        null;\n                var line = new OpenLayers.Geometry.LineString([startPoint,\n                        endPoint]);\n                        \n                lines[i-1] = new OpenLayers.Feature.Vector(line, attributes,\n                    style);\n            }\n            \n            startPoint = endPoint;\n        }\n\n        this.addFeatures(lines, options);\n    },\n    \n    CLASS_NAME: \"OpenLayers.Layer.PointTrack\"\n});\n\n/**\n * Constant: OpenLayers.Layer.PointTrack.SOURCE_NODE\n * {Number} value for <OpenLayers.Layer.PointTrack.dataFrom> and\n * <OpenLayers.Layer.PointTrack.styleFrom>\n */\nOpenLayers.Layer.PointTrack.SOURCE_NODE = -1;\n\n/**\n * Constant: OpenLayers.Layer.PointTrack.TARGET_NODE\n * {Number} value for <OpenLayers.Layer.PointTrack.dataFrom> and\n * <OpenLayers.Layer.PointTrack.styleFrom>\n */\nOpenLayers.Layer.PointTrack.TARGET_NODE = 0;\n\n/**\n * Constant: OpenLayers.Layer.PointTrack.dataFrom\n * {Object} with the following keys - *deprecated*\n * - SOURCE_NODE: take data/attributes from the source node of the line\n * - TARGET_NODE: take data/attributes from the target node of the line\n */\nOpenLayers.Layer.PointTrack.dataFrom = {'SOURCE_NODE': -1, 'TARGET_NODE': 0};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Util.js\n * @requires OpenLayers/Feature/Vector.js\n */\n\n/**\n * Class: OpenLayers.Style\n * This class represents a UserStyle obtained\n *     from a SLD, containing styling rules.\n */\nOpenLayers.Style = OpenLayers.Class({\n\n    /**\n     * Property: id\n     * {String} A unique id for this session.\n     */\n    id: null,\n    \n    /**\n     * APIProperty: name\n     * {String}\n     */\n    name: null,\n    \n    /**\n     * Property: title\n     * {String} Title of this style (set if included in SLD)\n     */\n    title: null,\n    \n    /**\n     * Property: description\n     * {String} Description of this style (set if abstract is included in SLD)\n     */\n    description: null,\n\n    /**\n     * APIProperty: layerName\n     * {<String>} name of the layer that this style belongs to, usually\n     * according to the NamedLayer attribute of an SLD document.\n     */\n    layerName: null,\n    \n    /**\n     * APIProperty: isDefault\n     * {Boolean}\n     */\n    isDefault: false,\n     \n    /** \n     * Property: rules \n     * {Array(<OpenLayers.Rule>)}\n     */\n    rules: null,\n    \n    /**\n     * APIProperty: context\n     * {Object} An optional object with properties that symbolizers' property\n     * values should be evaluated against. If no context is specified,\n     * feature.attributes will be used\n     */\n    context: null,\n\n    /**\n     * Property: defaultStyle\n     * {Object} hash of style properties to use as default for merging\n     * rule-based style symbolizers onto. If no rules are defined,\n     * createSymbolizer will return this style. If <defaultsPerSymbolizer> is set to\n     * true, the defaultStyle will only be taken into account if there are\n     * rules defined.\n     */\n    defaultStyle: null,\n    \n    /**\n     * Property: defaultsPerSymbolizer\n     * {Boolean} If set to true, the <defaultStyle> will extend the symbolizer\n     * of every rule. Properties of the <defaultStyle> will also be used to set\n     * missing symbolizer properties if the symbolizer has stroke, fill or\n     * graphic set to true. Default is false.\n     */\n    defaultsPerSymbolizer: false,\n    \n    /**\n     * Property: propertyStyles\n     * {Hash of Boolean} cache of style properties that need to be parsed for\n     * propertyNames. Property names are keys, values won't be used.\n     */\n    propertyStyles: null,\n    \n\n    /** \n     * Constructor: OpenLayers.Style\n     * Creates a UserStyle.\n     *\n     * Parameters:\n     * style        - {Object} Optional hash of style properties that will be\n     *                used as default style for this style object. This style\n     *                applies if no rules are specified. Symbolizers defined in\n     *                rules will extend this default style.\n     * options - {Object} An optional object with properties to set on the\n     *     style.\n     *\n     * Valid options:\n     * rules - {Array(<OpenLayers.Rule>)} List of rules to be added to the\n     *     style.\n     * \n     * Returns:\n     * {<OpenLayers.Style>}\n     */\n    initialize: function(style, options) {\n\n        OpenLayers.Util.extend(this, options);\n        this.rules = [];\n        if(options && options.rules) {\n            this.addRules(options.rules);\n        }\n\n        // use the default style from OpenLayers.Feature.Vector if no style\n        // was given in the constructor\n        this.setDefaultStyle(style ||\n                             OpenLayers.Feature.Vector.style[\"default\"]);\n\n        this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + \"_\");\n    },\n\n    /** \n     * APIMethod: destroy\n     * nullify references to prevent circular references and memory leaks\n     */\n    destroy: function() {\n        for (var i=0, len=this.rules.length; i<len; i++) {\n            this.rules[i].destroy();\n            this.rules[i] = null;\n        }\n        this.rules = null;\n        this.defaultStyle = null;\n    },\n    \n    /**\n     * Method: createSymbolizer\n     * creates a style by applying all feature-dependent rules to the base\n     * style.\n     * \n     * Parameters:\n     * feature - {<OpenLayers.Feature>} feature to evaluate rules for\n     * \n     * Returns:\n     * {Object} symbolizer hash\n     */\n    createSymbolizer: function(feature) {\n        var style = this.defaultsPerSymbolizer ? {} : this.createLiterals(\n            OpenLayers.Util.extend({}, this.defaultStyle), feature);\n        \n        var rules = this.rules;\n\n        var rule, context;\n        var elseRules = [];\n        var appliedRules = false;\n        for(var i=0, len=rules.length; i<len; i++) {\n            rule = rules[i];\n            // does the rule apply?\n            var applies = rule.evaluate(feature);\n            \n            if(applies) {\n                if(rule instanceof OpenLayers.Rule && rule.elseFilter) {\n                    elseRules.push(rule);\n                } else {\n                    appliedRules = true;\n                    this.applySymbolizer(rule, style, feature);\n                }\n            }\n        }\n        \n        // if no other rules apply, apply the rules with else filters\n        if(appliedRules == false && elseRules.length > 0) {\n            appliedRules = true;\n            for(var i=0, len=elseRules.length; i<len; i++) {\n                this.applySymbolizer(elseRules[i], style, feature);\n            }\n        }\n\n        // don't display if there were rules but none applied\n        if(rules.length > 0 && appliedRules == false) {\n            style.display = \"none\";\n        }\n        \n        if (style.label != null && typeof style.label !== \"string\") {\n            style.label = String(style.label);\n        }\n        \n        return style;\n    },\n    \n    /**\n     * Method: applySymbolizer\n     *\n     * Parameters:\n     * rule - {<OpenLayers.Rule>}\n     * style - {Object}\n     * feature - {<OpenLayer.Feature.Vector>}\n     *\n     * Returns:\n     * {Object} A style with new symbolizer applied.\n     */\n    applySymbolizer: function(rule, style, feature) {\n        var symbolizerPrefix = feature.geometry ?\n                this.getSymbolizerPrefix(feature.geometry) :\n                OpenLayers.Style.SYMBOLIZER_PREFIXES[0];\n\n        var symbolizer = rule.symbolizer[symbolizerPrefix] || rule.symbolizer;\n        \n        if(this.defaultsPerSymbolizer === true) {\n            var defaults = this.defaultStyle;\n            OpenLayers.Util.applyDefaults(symbolizer, {\n                pointRadius: defaults.pointRadius\n            });\n            if(symbolizer.stroke === true || symbolizer.graphic === true) {\n                OpenLayers.Util.applyDefaults(symbolizer, {\n                    strokeWidth: defaults.strokeWidth,\n                    strokeColor: defaults.strokeColor,\n                    strokeOpacity: defaults.strokeOpacity,\n                    strokeDashstyle: defaults.strokeDashstyle,\n                    strokeLinecap: defaults.strokeLinecap\n                });\n            }\n            if(symbolizer.fill === true || symbolizer.graphic === true) {\n                OpenLayers.Util.applyDefaults(symbolizer, {\n                    fillColor: defaults.fillColor,\n                    fillOpacity: defaults.fillOpacity\n                });\n            }\n            if(symbolizer.graphic === true) {\n                OpenLayers.Util.applyDefaults(symbolizer, {\n                    pointRadius: this.defaultStyle.pointRadius,\n                    externalGraphic: this.defaultStyle.externalGraphic,\n                    graphicName: this.defaultStyle.graphicName,\n                    graphicOpacity: this.defaultStyle.graphicOpacity,\n                    graphicWidth: this.defaultStyle.graphicWidth,\n                    graphicHeight: this.defaultStyle.graphicHeight,\n                    graphicXOffset: this.defaultStyle.graphicXOffset,\n                    graphicYOffset: this.defaultStyle.graphicYOffset\n                });\n            }\n        }\n\n        // merge the style with the current style\n        return this.createLiterals(\n                OpenLayers.Util.extend(style, symbolizer), feature);\n    },\n    \n    /**\n     * Method: createLiterals\n     * creates literals for all style properties that have an entry in\n     * <this.propertyStyles>.\n     * \n     * Parameters:\n     * style   - {Object} style to create literals for. Will be modified\n     *           inline.\n     * feature - {Object}\n     * \n     * Returns:\n     * {Object} the modified style\n     */\n    createLiterals: function(style, feature) {\n        var context = OpenLayers.Util.extend({}, feature.attributes || feature.data);\n        OpenLayers.Util.extend(context, this.context);\n        \n        for (var i in this.propertyStyles) {\n            style[i] = OpenLayers.Style.createLiteral(style[i], context, feature, i);\n        }\n        return style;\n    },\n    \n    /**\n     * Method: findPropertyStyles\n     * Looks into all rules for this style and the defaultStyle to collect\n     * all the style hash property names containing ${...} strings that have\n     * to be replaced using the createLiteral method before returning them.\n     * \n     * Returns:\n     * {Object} hash of property names that need createLiteral parsing. The\n     * name of the property is the key, and the value is true;\n     */\n    findPropertyStyles: function() {\n        var propertyStyles = {};\n\n        // check the default style\n        var style = this.defaultStyle;\n        this.addPropertyStyles(propertyStyles, style);\n\n        // walk through all rules to check for properties in their symbolizer\n        var rules = this.rules;\n        var symbolizer, value;\n        for (var i=0, len=rules.length; i<len; i++) {\n            symbolizer = rules[i].symbolizer;\n            for (var key in symbolizer) {\n                value = symbolizer[key];\n                if (typeof value == \"object\") {\n                    // symbolizer key is \"Point\", \"Line\" or \"Polygon\"\n                    this.addPropertyStyles(propertyStyles, value);\n                } else {\n                    // symbolizer is a hash of style properties\n                    this.addPropertyStyles(propertyStyles, symbolizer);\n                    break;\n                }\n            }\n        }\n        return propertyStyles;\n    },\n    \n    /**\n     * Method: addPropertyStyles\n     * \n     * Parameters:\n     * propertyStyles - {Object} hash to add new property styles to. Will be\n     *                  modified inline\n     * symbolizer     - {Object} search this symbolizer for property styles\n     * \n     * Returns:\n     * {Object} propertyStyles hash\n     */\n    addPropertyStyles: function(propertyStyles, symbolizer) {\n        var property;\n        for (var key in symbolizer) {\n            property = symbolizer[key];\n            if (typeof property == \"string\" &&\n                    property.match(/\\$\\{\\w+\\}/)) {\n                propertyStyles[key] = true;\n            }\n        }\n        return propertyStyles;\n    },\n    \n    /**\n     * APIMethod: addRules\n     * Adds rules to this style.\n     * \n     * Parameters:\n     * rules - {Array(<OpenLayers.Rule>)}\n     */\n    addRules: function(rules) {\n        Array.prototype.push.apply(this.rules, rules);\n        this.propertyStyles = this.findPropertyStyles();\n    },\n    \n    /**\n     * APIMethod: setDefaultStyle\n     * Sets the default style for this style object.\n     * \n     * Parameters:\n     * style - {Object} Hash of style properties\n     */\n    setDefaultStyle: function(style) {\n        this.defaultStyle = style; \n        this.propertyStyles = this.findPropertyStyles();\n    },\n        \n    /**\n     * Method: getSymbolizerPrefix\n     * Returns the correct symbolizer prefix according to the\n     * geometry type of the passed geometry\n     * \n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {String} key of the according symbolizer\n     */\n    getSymbolizerPrefix: function(geometry) {\n        var prefixes = OpenLayers.Style.SYMBOLIZER_PREFIXES;\n        for (var i=0, len=prefixes.length; i<len; i++) {\n            if (geometry.CLASS_NAME.indexOf(prefixes[i]) != -1) {\n                return prefixes[i];\n            }\n        }\n    },\n    \n    /**\n     * APIMethod: clone\n     * Clones this style.\n     * \n     * Returns:\n     * {<OpenLayers.Style>} Clone of this style.\n     */\n    clone: function() {\n        var options = OpenLayers.Util.extend({}, this);\n        // clone rules\n        if(this.rules) {\n            options.rules = [];\n            for(var i=0, len=this.rules.length; i<len; ++i) {\n                options.rules.push(this.rules[i].clone());\n            }\n        }\n        // clone context\n        options.context = this.context && OpenLayers.Util.extend({}, this.context);\n        //clone default style\n        var defaultStyle = OpenLayers.Util.extend({}, this.defaultStyle);\n        return new OpenLayers.Style(defaultStyle, options);\n    },\n    \n    CLASS_NAME: \"OpenLayers.Style\"\n});\n\n\n/**\n * Function: createLiteral\n * converts a style value holding a combination of PropertyName and Literal\n * into a Literal, taking the property values from the passed features.\n * \n * Parameters:\n * value - {String} value to parse. If this string contains a construct like\n *         \"foo ${bar}\", then \"foo \" will be taken as literal, and \"${bar}\"\n *         will be replaced by the value of the \"bar\" attribute of the passed\n *         feature.\n * context - {Object} context to take attribute values from\n * feature - {<OpenLayers.Feature.Vector>} optional feature to pass to\n *           <OpenLayers.String.format> for evaluating functions in the\n *           context.\n * property - {String} optional, name of the property for which the literal is\n *            being created for evaluating functions in the context.\n * \n * Returns:\n * {String} the parsed value. In the example of the value parameter above, the\n * result would be \"foo valueOfBar\", assuming that the passed feature has an\n * attribute named \"bar\" with the value \"valueOfBar\".\n */\nOpenLayers.Style.createLiteral = function(value, context, feature, property) {\n    if (typeof value == \"string\" && value.indexOf(\"${\") != -1) {\n        value = OpenLayers.String.format(value, context, [feature, property]);\n        value = (isNaN(value) || !value) ? value : parseFloat(value);\n    }\n    return value;\n};\n    \n/**\n * Constant: OpenLayers.Style.SYMBOLIZER_PREFIXES\n * {Array} prefixes of the sld symbolizers. These are the\n * same as the main geometry types\n */\nOpenLayers.Style.SYMBOLIZER_PREFIXES = ['Point', 'Line', 'Polygon', 'Text',\n    'Raster'];\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Rule.js\n * @requires OpenLayers/Symbolizer/Point.js\n * @requires OpenLayers/Symbolizer/Line.js\n * @requires OpenLayers/Symbolizer/Polygon.js\n * @requires OpenLayers/Symbolizer/Text.js\n * @requires OpenLayers/Symbolizer/Raster.js\n */\n\n/**\n * Class: OpenLayers.Style2\n * This class represents a collection of rules for rendering features.\n */\nOpenLayers.Style2 = OpenLayers.Class({\n\n    /**\n     * Property: id\n     * {String} A unique id for this session.\n     */\n    id: null,\n    \n    /**\n     * APIProperty: name\n     * {String} Style identifier.\n     */\n    name: null,\n    \n    /**\n     * APIProperty: title\n     * {String} Title of this style.\n     */\n    title: null,\n    \n    /**\n     * APIProperty: description\n     * {String} Description of this style.\n     */\n    description: null,\n\n    /**\n     * APIProperty: layerName\n     * {<String>} Name of the layer that this style belongs to, usually\n     *     according to the NamedLayer attribute of an SLD document.\n     */\n    layerName: null,\n    \n    /**\n     * APIProperty: isDefault\n     * {Boolean}\n     */\n    isDefault: false,\n     \n    /** \n     * APIProperty: rules \n     * {Array(<OpenLayers.Rule>)} Collection of rendering rules.\n     */\n    rules: null,\n    \n    /** \n     * Constructor: OpenLayers.Style2\n     * Creates a style representing a collection of rendering rules.\n     *\n     * Parameters:\n     * config - {Object} An object containing properties to be set on the \n     *     style.  Any documented properties may be set at construction.\n     *\n     * Returns:\n     * {<OpenLayers.Style2>} A new style object.\n     */\n    initialize: function(config) {\n        OpenLayers.Util.extend(this, config);\n        this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + \"_\");\n    },\n\n    /** \n     * APIMethod: destroy\n     * nullify references to prevent circular references and memory leaks\n     */\n    destroy: function() {\n        for (var i=0, len=this.rules.length; i<len; i++) {\n            this.rules[i].destroy();\n        }\n        delete this.rules;\n    },\n\n    /**\n     * APIMethod: clone\n     * Clones this style.\n     * \n     * Returns:\n     * {<OpenLayers.Style2>} Clone of this style.\n     */\n    clone: function() {\n        var config = OpenLayers.Util.extend({}, this);\n        // clone rules\n        if (this.rules) {\n            config.rules = [];\n            for (var i=0, len=this.rules.length; i<len; ++i) {\n                config.rules.push(this.rules[i].clone());\n            }\n        }\n        return new OpenLayers.Style2(config);\n    },\n    \n    CLASS_NAME: \"OpenLayers.Style2\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Style.js\n * @requires OpenLayers/Feature/Vector.js\n */\n \n/**\n * Class: OpenLayers.StyleMap\n */\nOpenLayers.StyleMap = OpenLayers.Class({\n    \n    /**\n     * Property: styles\n     * {Object} Hash of {<OpenLayers.Style>}, keyed by names of well known\n     * rendering intents (e.g. \"default\", \"temporary\", \"select\", \"delete\").\n     */\n    styles: null,\n    \n    /**\n     * Property: extendDefault\n     * {Boolean} if true, every render intent will extend the symbolizers\n     * specified for the \"default\" intent at rendering time. Otherwise, every\n     * rendering intent will be treated as a completely independent style.\n     */\n    extendDefault: true,\n    \n    /**\n     * Constructor: OpenLayers.StyleMap\n     * \n     * Parameters:\n     * style   - {Object} Optional. Either a style hash, or a style object, or\n     *           a hash of style objects (style hashes) keyed by rendering\n     *           intent. If just one style hash or style object is passed,\n     *           this will be used for all known render intents (default,\n     *           select, temporary)\n     * options - {Object} optional hash of additional options for this\n     *           instance\n     */\n    initialize: function (style, options) {\n        this.styles = {\n            \"default\": new OpenLayers.Style(\n                OpenLayers.Feature.Vector.style[\"default\"]),\n            \"select\": new OpenLayers.Style(\n                OpenLayers.Feature.Vector.style[\"select\"]),\n            \"temporary\": new OpenLayers.Style(\n                OpenLayers.Feature.Vector.style[\"temporary\"]),\n            \"delete\": new OpenLayers.Style(\n                OpenLayers.Feature.Vector.style[\"delete\"])\n        };\n        \n        // take whatever the user passed as style parameter and convert it\n        // into parts of stylemap.\n        if(style instanceof OpenLayers.Style) {\n            // user passed a style object\n            this.styles[\"default\"] = style;\n            this.styles[\"select\"] = style;\n            this.styles[\"temporary\"] = style;\n            this.styles[\"delete\"] = style;\n        } else if(typeof style == \"object\") {\n            for(var key in style) {\n                if(style[key] instanceof OpenLayers.Style) {\n                    // user passed a hash of style objects\n                    this.styles[key] = style[key];\n                } else if(typeof style[key] == \"object\") {\n                    // user passsed a hash of style hashes\n                    this.styles[key] = new OpenLayers.Style(style[key]);\n                } else {\n                    // user passed a style hash (i.e. symbolizer)\n                    this.styles[\"default\"] = new OpenLayers.Style(style);\n                    this.styles[\"select\"] = new OpenLayers.Style(style);\n                    this.styles[\"temporary\"] = new OpenLayers.Style(style);\n                    this.styles[\"delete\"] = new OpenLayers.Style(style);\n                    break;\n                }\n            }\n        }\n        OpenLayers.Util.extend(this, options);\n    },\n\n    /**\n     * Method: destroy\n     */\n    destroy: function() {\n        for(var key in this.styles) {\n            this.styles[key].destroy();\n        }\n        this.styles = null;\n    },\n    \n    /**\n     * Method: createSymbolizer\n     * Creates the symbolizer for a feature for a render intent.\n     * \n     * Parameters:\n     * feature - {<OpenLayers.Feature>} The feature to evaluate the rules\n     *           of the intended style against.\n     * intent  - {String} The intent determines the symbolizer that will be\n     *           used to draw the feature. Well known intents are \"default\"\n     *           (for just drawing the features), \"select\" (for selected\n     *           features) and \"temporary\" (for drawing features).\n     * \n     * Returns:\n     * {Object} symbolizer hash\n     */\n    createSymbolizer: function(feature, intent) {\n        if(!feature) {\n            feature = new OpenLayers.Feature.Vector();\n        }\n        if(!this.styles[intent]) {\n            intent = \"default\";\n        }\n        feature.renderIntent = intent;\n        var defaultSymbolizer = {};\n        if(this.extendDefault && intent != \"default\") {\n            defaultSymbolizer = this.styles[\"default\"].createSymbolizer(feature);\n        }\n        return OpenLayers.Util.extend(defaultSymbolizer,\n            this.styles[intent].createSymbolizer(feature));\n    },\n    \n    /**\n     * Method: addUniqueValueRules\n     * Convenience method to create comparison rules for unique values of a\n     * property. The rules will be added to the style object for a specified\n     * rendering intent. This method is a shortcut for creating something like\n     * the \"unique value legends\" familiar from well known desktop GIS systems\n     * \n     * Parameters:\n     * renderIntent - {String} rendering intent to add the rules to\n     * property     - {String} values of feature attributes to create the\n     *                rules for\n     * symbolizers  - {Object} Hash of symbolizers, keyed by the desired\n     *                property values \n     * context      - {Object} An optional object with properties that\n     *                symbolizers' property values should be evaluated\n     *                against. If no context is specified, feature.attributes\n     *                will be used\n     */\n    addUniqueValueRules: function(renderIntent, property, symbolizers, context) {\n        var rules = [];\n        for (var value in symbolizers) {\n            rules.push(new OpenLayers.Rule({\n                symbolizer: symbolizers[value],\n                context: context,\n                filter: new OpenLayers.Filter.Comparison({\n                    type: OpenLayers.Filter.Comparison.EQUAL_TO,\n                    property: property,\n                    value: value\n                })\n            }));\n        }\n        this.styles[renderIntent].addRules(rules);\n    },\n\n    CLASS_NAME: \"OpenLayers.StyleMap\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Util.js\n * @requires OpenLayers/Style.js\n */\n\n/**\n * Class: OpenLayers.Rule\n * This class represents an SLD Rule, as being used for rule-based SLD styling.\n */\nOpenLayers.Rule = OpenLayers.Class({\n    \n    /**\n     * Property: id\n     * {String} A unique id for this session.\n     */\n    id: null,\n    \n    /**\n     * APIProperty: name\n     * {String} name of this rule\n     */\n    name: null,\n    \n    /**\n     * Property: title\n     * {String} Title of this rule (set if included in SLD)\n     */\n    title: null,\n    \n    /**\n     * Property: description\n     * {String} Description of this rule (set if abstract is included in SLD)\n     */\n    description: null,\n\n    /**\n     * Property: context\n     * {Object} An optional object with properties that the rule should be\n     * evaluated against. If no context is specified, feature.attributes will\n     * be used.\n     */\n    context: null,\n    \n    /**\n     * Property: filter\n     * {<OpenLayers.Filter>} Optional filter for the rule.\n     */\n    filter: null,\n\n    /**\n     * Property: elseFilter\n     * {Boolean} Determines whether this rule is only to be applied only if\n     * no other rules match (ElseFilter according to the SLD specification). \n     * Default is false.  For instances of OpenLayers.Rule, if elseFilter is\n     * false, the rule will always apply.  For subclasses, the else property is \n     * ignored.\n     */\n    elseFilter: false,\n    \n    /**\n     * Property: symbolizer\n     * {Object} Symbolizer or hash of symbolizers for this rule. If hash of\n     * symbolizers, keys are one or more of [\"Point\", \"Line\", \"Polygon\"]. The\n     * latter if useful if it is required to style e.g. vertices of a line\n     * with a point symbolizer. Note, however, that this is not implemented\n     * yet in OpenLayers, but it is the way how symbolizers are defined in\n     * SLD.\n     */\n    symbolizer: null,\n    \n    /**\n     * Property: symbolizers\n     * {Array} Collection of symbolizers associated with this rule.  If \n     *     provided at construction, the symbolizers array has precedence\n     *     over the deprecated symbolizer property.  Note that multiple \n     *     symbolizers are not currently supported by the vector renderers.\n     *     Rules with multiple symbolizers are currently only useful for\n     *     maintaining elements in an SLD document.\n     */\n    symbolizers: null,\n    \n    /**\n     * APIProperty: minScaleDenominator\n     * {Number} or {String} minimum scale at which to draw the feature.\n     * In the case of a String, this can be a combination of text and\n     * propertyNames in the form \"literal ${propertyName}\"\n     */\n    minScaleDenominator: null,\n\n    /**\n     * APIProperty: maxScaleDenominator\n     * {Number} or {String} maximum scale at which to draw the feature.\n     * In the case of a String, this can be a combination of text and\n     * propertyNames in the form \"literal ${propertyName}\"\n     */\n    maxScaleDenominator: null,\n    \n    /** \n     * Constructor: OpenLayers.Rule\n     * Creates a Rule.\n     *\n     * Parameters:\n     * options - {Object} An optional object with properties to set on the\n     *           rule\n     * \n     * Returns:\n     * {<OpenLayers.Rule>}\n     */\n    initialize: function(options) {\n        this.symbolizer = {};\n        OpenLayers.Util.extend(this, options);\n        if (this.symbolizers) {\n            delete this.symbolizer;\n        }\n        this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + \"_\");\n    },\n\n    /** \n     * APIMethod: destroy\n     * nullify references to prevent circular references and memory leaks\n     */\n    destroy: function() {\n        for (var i in this.symbolizer) {\n            this.symbolizer[i] = null;\n        }\n        this.symbolizer = null;\n        delete this.symbolizers;\n    },\n    \n    /**\n     * APIMethod: evaluate\n     * evaluates this rule for a specific feature\n     * \n     * Parameters:\n     * feature - {<OpenLayers.Feature>} feature to apply the rule to.\n     * \n     * Returns:\n     * {Boolean} true if the rule applies, false if it does not.\n     * This rule is the default rule and always returns true.\n     */\n    evaluate: function(feature) {\n        var context = this.getContext(feature);\n        var applies = true;\n\n        if (this.minScaleDenominator || this.maxScaleDenominator) {\n            var scale = feature.layer.map.getScale();\n        }\n        \n        // check if within minScale/maxScale bounds\n        if (this.minScaleDenominator) {\n            applies = scale >= OpenLayers.Style.createLiteral(\n                    this.minScaleDenominator, context);\n        }\n        if (applies && this.maxScaleDenominator) {\n            applies = scale < OpenLayers.Style.createLiteral(\n                    this.maxScaleDenominator, context);\n        }\n        \n        // check if optional filter applies\n        if(applies && this.filter) {\n            // feature id filters get the feature, others get the context\n            if(this.filter.CLASS_NAME == \"OpenLayers.Filter.FeatureId\") {\n                applies = this.filter.evaluate(feature);\n            } else {\n                applies = this.filter.evaluate(context);\n            }\n        }\n\n        return applies;\n    },\n    \n    /**\n     * Method: getContext\n     * Gets the context for evaluating this rule\n     * \n     * Parameters:\n     * feature - {<OpenLayers.Feature>} feature to take the context from if\n     *           none is specified.\n     */\n    getContext: function(feature) {\n        var context = this.context;\n        if (!context) {\n            context = feature.attributes || feature.data;\n        }\n        if (typeof this.context == \"function\") {\n            context = this.context(feature);\n        }\n        return context;\n    },\n    \n    /**\n     * APIMethod: clone\n     * Clones this rule.\n     * \n     * Returns:\n     * {<OpenLayers.Rule>} Clone of this rule.\n     */\n    clone: function() {\n        var options = OpenLayers.Util.extend({}, this);\n        if (this.symbolizers) {\n            // clone symbolizers\n            var len = this.symbolizers.length;\n            options.symbolizers = new Array(len);\n            for (var i=0; i<len; ++i) {\n                options.symbolizers[i] = this.symbolizers[i].clone();\n            }\n        } else {\n            // clone symbolizer\n            options.symbolizer = {};\n            var value, type;\n            for(var key in this.symbolizer) {\n                value = this.symbolizer[key];\n                type = typeof value;\n                if(type === \"object\") {\n                    options.symbolizer[key] = OpenLayers.Util.extend({}, value);\n                } else if(type === \"string\") {\n                    options.symbolizer[key] = value;\n                }\n            }\n        }\n        // clone filter\n        options.filter = this.filter && this.filter.clone();\n        // clone context\n        options.context = this.context && OpenLayers.Util.extend({}, this.context);\n        return new OpenLayers.Rule(options);\n    },\n        \n    CLASS_NAME: \"OpenLayers.Rule\"\n});", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Util.js\n */\n\n/**\n * Class: OpenLayers.Format\n * Base class for format reading/writing a variety of formats.  Subclasses\n *     of OpenLayers.Format are expected to have read and write methods.\n */\nOpenLayers.Format = OpenLayers.Class({\n    \n    /**\n     * Property: options\n     * {Object} A reference to options passed to the constructor.\n     */\n    options: null,\n    \n    /**\n     * APIProperty: externalProjection\n     * {<OpenLayers.Projection>} When passed a externalProjection and\n     *     internalProjection, the format will reproject the geometries it\n     *     reads or writes. The externalProjection is the projection used by\n     *     the content which is passed into read or which comes out of write.\n     *     In order to reproject, a projection transformation function for the\n     *     specified projections must be available. This support may be \n     *     provided via proj4js or via a custom transformation function. See\n     *     {<OpenLayers.Projection.addTransform>} for more information on\n     *     custom transformations.\n     */\n    externalProjection: null,\n\n    /**\n     * APIProperty: internalProjection\n     * {<OpenLayers.Projection>} When passed a externalProjection and\n     *     internalProjection, the format will reproject the geometries it\n     *     reads or writes. The internalProjection is the projection used by\n     *     the geometries which are returned by read or which are passed into\n     *     write.  In order to reproject, a projection transformation function\n     *     for the specified projections must be available. This support may be\n     *     provided via proj4js or via a custom transformation function. See\n     *     {<OpenLayers.Projection.addTransform>} for more information on\n     *     custom transformations.\n     */\n    internalProjection: null,\n\n    /**\n     * APIProperty: data\n     * {Object} When <keepData> is true, this is the parsed string sent to\n     *     <read>.\n     */\n    data: null,\n\n    /**\n     * APIProperty: keepData\n     * {Object} Maintain a reference (<data>) to the most recently read data.\n     *     Default is false.\n     */\n    keepData: false,\n\n    /**\n     * Constructor: OpenLayers.Format\n     * Instances of this class are not useful.  See one of the subclasses.\n     *\n     * Parameters:\n     * options - {Object} An optional object with properties to set on the\n     *           format\n     *\n     * Valid options:\n     * keepData - {Boolean} If true, upon <read>, the data property will be\n     *     set to the parsed object (e.g. the json or xml object).\n     *\n     * Returns:\n     * An instance of OpenLayers.Format\n     */\n    initialize: function(options) {\n        OpenLayers.Util.extend(this, options);\n        this.options = options;\n    },\n    \n    /**\n     * APIMethod: destroy\n     * Clean up.\n     */\n    destroy: function() {\n    },\n\n    /**\n     * Method: read\n     * Read data from a string, and return an object whose type depends on the\n     * subclass. \n     * \n     * Parameters:\n     * data - {string} Data to read/parse.\n     *\n     * Returns:\n     * Depends on the subclass\n     */\n    read: function(data) {\n        throw new Error('Read not implemented.');\n    },\n    \n    /**\n     * Method: write\n     * Accept an object, and return a string. \n     *\n     * Parameters:\n     * object - {Object} Object to be serialized\n     *\n     * Returns:\n     * {String} A string representation of the object.\n     */\n    write: function(object) {\n        throw new Error('Write not implemented.');\n    },\n\n    CLASS_NAME: \"OpenLayers.Format\"\n});     \n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Console.js\n * @requires OpenLayers/Format.js\n * @requires OpenLayers/Filter/Spatial.js\n * @requires OpenLayers/Filter/Comparison.js\n * @requires OpenLayers/Filter/Logical.js\n */\n\n/**\n * Class: OpenLayers.Format.QueryStringFilter\n * Parser for reading a query string and creating a simple filter.\n *\n * Inherits from:\n *  - <OpenLayers.Format>\n */\nOpenLayers.Format.QueryStringFilter = (function() {\n\n    /** \n     * Map the OpenLayers.Filter.Comparison types to the operation strings of \n     * the protocol.\n     */\n    var cmpToStr = {};\n    cmpToStr[OpenLayers.Filter.Comparison.EQUAL_TO] = \"eq\";\n    cmpToStr[OpenLayers.Filter.Comparison.NOT_EQUAL_TO] = \"ne\";\n    cmpToStr[OpenLayers.Filter.Comparison.LESS_THAN] = \"lt\";\n    cmpToStr[OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO] = \"lte\";\n    cmpToStr[OpenLayers.Filter.Comparison.GREATER_THAN] = \"gt\";\n    cmpToStr[OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO] = \"gte\";\n    cmpToStr[OpenLayers.Filter.Comparison.LIKE] = \"ilike\";\n\n    /**\n     * Function: regex2value\n     * Convert the value from a regular expression string to a LIKE/ILIKE\n     * string known to the web service.\n     *\n     * Parameters:\n     * value - {String} The regex string.\n     *\n     * Returns:\n     * {String} The converted string.\n     */\n    function regex2value(value) {\n\n        // highly sensitive!! Do not change this without running the\n        // Protocol/HTTP.html unit tests\n\n        // convert % to \\%\n        value = value.replace(/%/g, \"\\\\%\");\n\n        // convert \\\\. to \\\\_ (\\\\.* occurrences converted later)\n        value = value.replace(/\\\\\\\\\\.(\\*)?/g, function($0, $1) {\n            return $1 ? $0 : \"\\\\\\\\_\";\n        });\n\n        // convert \\\\.* to \\\\%\n        value = value.replace(/\\\\\\\\\\.\\*/g, \"\\\\\\\\%\");\n\n        // convert . to _ (\\. and .* occurrences converted later)\n        value = value.replace(/(\\\\)?\\.(\\*)?/g, function($0, $1, $2) {\n            return $1 || $2 ? $0 : \"_\";\n        });\n\n        // convert .* to % (\\.* occurnces converted later)\n        value = value.replace(/(\\\\)?\\.\\*/g, function($0, $1) {\n            return $1 ? $0 : \"%\";\n        });\n\n        // convert \\. to .\n        value = value.replace(/\\\\\\./g, \".\");\n\n        // replace \\* with * (watching out for \\\\*)\n        value = value.replace(/(\\\\)?\\\\\\*/g, function($0, $1) {\n            return $1 ? $0 : \"*\";\n        });\n\n        return value;\n    }\n    \n    return OpenLayers.Class(OpenLayers.Format, {\n        \n        /**\n         * Property: wildcarded.\n         * {Boolean} If true percent signs are added around values\n         *     read from LIKE filters, for example if the protocol\n         *     read method is passed a LIKE filter whose property\n         *     is \"foo\" and whose value is \"bar\" the string\n         *     \"foo__ilike=%bar%\" will be sent in the query string;\n         *     defaults to false.\n         */\n        wildcarded: false,\n\n        /**\n         * APIProperty: srsInBBOX\n         * {Boolean} Include the SRS identifier in BBOX query string parameter.  \n         *     Default is false.  If true and the layer has a projection object set,\n         *     any BBOX filter will be serialized with a fifth item identifying the\n         *     projection.  E.g. bbox=-1000,-1000,1000,1000,EPSG:900913\n         */\n        srsInBBOX: false,\n\n        /**\n         * APIMethod: write\n         * Serialize an <OpenLayers.Filter> objects using the \"simple\" filter syntax for \n         *     query string parameters.  This function must be called as a method of\n         *     a protocol instance.\n         *\n         * Parameters:\n         * filter - {<OpenLayers.Filter>} filter to convert.\n         * params - {Object} The parameters object.\n         *\n         * Returns:\n         * {Object} The resulting parameters object.\n         */\n        write: function(filter, params) {\n            params = params || {};\n            var className = filter.CLASS_NAME;\n            var filterType = className.substring(className.lastIndexOf(\".\") + 1);\n            switch (filterType) {\n                case \"Spatial\":\n                    switch (filter.type) {\n                        case OpenLayers.Filter.Spatial.BBOX:\n                            params.bbox = filter.value.toArray();\n                            if (this.srsInBBOX && filter.projection) {\n                                params.bbox.push(filter.projection.getCode());\n                            }\n                            break;\n                        case OpenLayers.Filter.Spatial.DWITHIN:\n                            params.tolerance = filter.distance;\n                            // no break here\n                        case OpenLayers.Filter.Spatial.WITHIN:\n                            params.lon = filter.value.x;\n                            params.lat = filter.value.y;\n                            break;\n                        default:\n                            OpenLayers.Console.warn(\n                                \"Unknown spatial filter type \" + filter.type);\n                    }\n                    break;\n                case \"Comparison\":\n                    var op = cmpToStr[filter.type];\n                    if (op !== undefined) {\n                        var value = filter.value;\n                        if (filter.type == OpenLayers.Filter.Comparison.LIKE) {\n                            value = regex2value(value);\n                            if (this.wildcarded) {\n                                value = \"%\" + value + \"%\";\n                            }\n                        }\n                        params[filter.property + \"__\" + op] = value;\n                        params.queryable = params.queryable || [];\n                        params.queryable.push(filter.property);\n                    } else {\n                        OpenLayers.Console.warn(\n                            \"Unknown comparison filter type \" + filter.type);\n                    }\n                    break;\n                case \"Logical\":\n                    if (filter.type === OpenLayers.Filter.Logical.AND) {\n                        for (var i=0,len=filter.filters.length; i<len; i++) {\n                            params = this.write(filter.filters[i], params);\n                        }\n                    } else {\n                        OpenLayers.Console.warn(\n                            \"Unsupported logical filter type \" + filter.type);\n                    }\n                    break;\n                default:\n                    OpenLayers.Console.warn(\"Unknown filter type \" + filterType);\n            }\n            return params;\n        },\n        \n        CLASS_NAME: \"OpenLayers.Format.QueryStringFilter\"\n        \n    });\n\n\n})();\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format.js\n */\n\n/**\n * Class: OpenLayers.Format.XML\n * Read and write XML.  For cross-browser XML generation, use methods on an\n *     instance of the XML format class instead of on <code>document<end>.\n *     The DOM creation and traversing methods exposed here all mimic the\n *     W3C XML DOM methods.  Create a new parser with the\n *     <OpenLayers.Format.XML> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Format>\n */\nOpenLayers.Format.XML = OpenLayers.Class(OpenLayers.Format, {\n    \n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.  Properties\n     *     of this object should not be set individually.  Read-only.  All\n     *     XML subclasses should have their own namespaces object.  Use\n     *     <setNamespace> to add or set a namespace alias after construction.\n     */\n    namespaces: null,\n    \n    /**\n     * Property: namespaceAlias\n     * {Object} Mapping of namespace URI to namespace alias.  This object\n     *     is read-only.  Use <setNamespace> to add or set a namespace alias.\n     */\n    namespaceAlias: null,\n    \n    /**\n     * Property: defaultPrefix\n     * {String} The default namespace alias for creating element nodes.\n     */\n    defaultPrefix: null,\n    \n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {},\n    \n    /**\n     * Property: writers\n     * As a compliment to the <readers> property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: {},\n\n    /**\n     * Property: xmldom\n     * {XMLDom} If this browser uses ActiveX, this will be set to a XMLDOM\n     *     object.  It is not intended to be a browser sniffing property.\n     *     Instead, the xmldom property is used instead of <code>document<end>\n     *     where namespaced node creation methods are not supported. In all\n     *     other browsers, this remains null.\n     */\n    xmldom: null,\n\n    /**\n     * Constructor: OpenLayers.Format.XML\n     * Construct an XML parser.  The parser is used to read and write XML.\n     *     Reading XML from a string returns a DOM element.  Writing XML from\n     *     a DOM element returns a string.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on\n     *     the object.\n     */\n    initialize: function(options) {\n        if (OpenLayers.Format.XML.supportActiveX) {\n            this.xmldom = new ActiveXObject(\"Microsoft.XMLDOM\");\n        }\n        OpenLayers.Format.prototype.initialize.apply(this, [options]);\n        // clone the namespace object and set all namespace aliases\n        this.namespaces = OpenLayers.Util.extend({}, this.namespaces);\n        this.namespaceAlias = {};\n        for(var alias in this.namespaces) {\n            this.namespaceAlias[this.namespaces[alias]] = alias;\n        }\n    },\n    \n    /**\n     * APIMethod: destroy\n     * Clean up.\n     */\n    destroy: function() {\n        this.xmldom = null;\n        OpenLayers.Format.prototype.destroy.apply(this, arguments);\n    },\n    \n    /**\n     * Method: setNamespace\n     * Set a namespace alias and URI for the format.\n     *\n     * Parameters:\n     * alias - {String} The namespace alias (prefix).\n     * uri - {String} The namespace URI.\n     */\n    setNamespace: function(alias, uri) {\n        this.namespaces[alias] = uri;\n        this.namespaceAlias[uri] = alias;\n    },\n\n    /**\n     * APIMethod: read\n     * Deserialize a XML string and return a DOM node.\n     *\n     * Parameters:\n     * text - {String} A XML string\n     \n     * Returns:\n     * {DOMElement} A DOM node\n     */\n    read: function(text) {\n        var index = text.indexOf('<');\n        if(index > 0) {\n            text = text.substring(index);\n        }\n        var node = OpenLayers.Util.Try(\n            OpenLayers.Function.bind((\n                function() {\n                    var xmldom;\n                    /**\n                     * Since we want to be able to call this method on the prototype\n                     * itself, this.xmldom may not exist even if in IE.\n                     */\n                    if (OpenLayers.Format.XML.supportActiveX && !this.xmldom) {\n                        xmldom = new ActiveXObject(\"Microsoft.XMLDOM\");\n                    } else {\n                        xmldom = this.xmldom;\n                        \n                    }\n                    xmldom.loadXML(text);\n                    return xmldom;\n                }\n            ), this),\n            function() {\n                return new DOMParser().parseFromString(text, 'text/xml');\n            },\n            function() {\n                var req = new XMLHttpRequest();\n                req.open(\"GET\", \"data:\" + \"text/xml\" +\n                         \";charset=utf-8,\" + encodeURIComponent(text), false);\n                if(req.overrideMimeType) {\n                    req.overrideMimeType(\"text/xml\");\n                }\n                req.send(null);\n                return req.responseXML;\n            }\n        );\n\n        if(this.keepData) {\n            this.data = node;\n        }\n\n        return node;\n    },\n\n    /**\n     * APIMethod: write\n     * Serialize a DOM node into a XML string.\n     * \n     * Parameters:\n     * node - {DOMElement} A DOM node.\n     *\n     * Returns:\n     * {String} The XML string representation of the input node.\n     */\n    write: function(node) {\n        var data;\n        if(this.xmldom) {\n            data = node.xml;\n        } else {\n            var serializer = new XMLSerializer();\n            if (node.nodeType == 1) {\n                // Add nodes to a document before serializing. Everything else\n                // is serialized as is. This may need more work. See #1218 .\n                var doc = document.implementation.createDocument(\"\", \"\", null);\n                if (doc.importNode) {\n                    node = doc.importNode(node, true);\n                }\n                doc.appendChild(node);\n                data = serializer.serializeToString(doc);\n            } else {\n                data = serializer.serializeToString(node);\n            }\n        }\n        return data;\n    },\n\n    /**\n     * APIMethod: createElementNS\n     * Create a new element with namespace.  This node can be appended to\n     *     another node with the standard node.appendChild method.  For\n     *     cross-browser support, this method must be used instead of\n     *     document.createElementNS.\n     *\n     * Parameters:\n     * uri - {String} Namespace URI for the element.\n     * name - {String} The qualified name of the element (prefix:localname).\n     * \n     * Returns:\n     * {Element} A DOM element with namespace.\n     */\n    createElementNS: function(uri, name) {\n        var element;\n        if(this.xmldom) {\n            if(typeof uri == \"string\") {\n                element = this.xmldom.createNode(1, name, uri);\n            } else {\n                element = this.xmldom.createNode(1, name, \"\");\n            }\n        } else {\n            element = document.createElementNS(uri, name);\n        }\n        return element;\n    },\n\n    /**\n     * APIMethod: createDocumentFragment\n     * Create a document fragment node that can be appended to another node\n     *     created by createElementNS.  This will call \n     *     document.createDocumentFragment outside of IE.  In IE, the ActiveX\n     *     object's createDocumentFragment method is used.\n     *\n     * Returns:\n     * {Element} A document fragment.\n     */\n    createDocumentFragment: function() {\n        var element;\n        if (this.xmldom) {\n            element = this.xmldom.createDocumentFragment();\n        } else {\n            element = document.createDocumentFragment();\n        }\n        return element;\n    },\n\n    /**\n     * APIMethod: createTextNode\n     * Create a text node.  This node can be appended to another node with\n     *     the standard node.appendChild method.  For cross-browser support,\n     *     this method must be used instead of document.createTextNode.\n     * \n     * Parameters:\n     * text - {String} The text of the node.\n     * \n     * Returns: \n     * {DOMElement} A DOM text node.\n     */\n    createTextNode: function(text) {\n        var node;\n        if (typeof text !== \"string\") {\n            text = String(text);\n        }\n        if(this.xmldom) {\n            node = this.xmldom.createTextNode(text);\n        } else {\n            node = document.createTextNode(text);\n        }\n        return node;\n    },\n\n    /**\n     * APIMethod: getElementsByTagNameNS\n     * Get a list of elements on a node given the namespace URI and local name.\n     *     To return all nodes in a given namespace, use '*' for the name\n     *     argument.  To return all nodes of a given (local) name, regardless\n     *     of namespace, use '*' for the uri argument.\n     * \n     * Parameters:\n     * node - {Element} Node on which to search for other nodes.\n     * uri - {String} Namespace URI.\n     * name - {String} Local name of the tag (without the prefix).\n     * \n     * Returns:\n     * {NodeList} A node list or array of elements.\n     */\n    getElementsByTagNameNS: function(node, uri, name) {\n        var elements = [];\n        if(node.getElementsByTagNameNS) {\n            elements = node.getElementsByTagNameNS(uri, name);\n        } else {\n            // brute force method\n            var allNodes = node.getElementsByTagName(\"*\");\n            var potentialNode, fullName;\n            for(var i=0, len=allNodes.length; i<len; ++i) {\n                potentialNode = allNodes[i];\n                fullName = (potentialNode.prefix) ?\n                           (potentialNode.prefix + \":\" + name) : name;\n                if((name == \"*\") || (fullName == potentialNode.nodeName)) {\n                    if((uri == \"*\") || (uri == potentialNode.namespaceURI)) {\n                        elements.push(potentialNode);\n                    }\n                }\n            }\n        }\n        return elements;\n    },\n\n    /**\n     * APIMethod: getAttributeNodeNS\n     * Get an attribute node given the namespace URI and local name.\n     * \n     * Parameters:\n     * node - {Element} Node on which to search for attribute nodes.\n     * uri - {String} Namespace URI.\n     * name - {String} Local name of the attribute (without the prefix).\n     * \n     * Returns:\n     * {DOMElement} An attribute node or null if none found.\n     */\n    getAttributeNodeNS: function(node, uri, name) {\n        var attributeNode = null;\n        if(node.getAttributeNodeNS) {\n            attributeNode = node.getAttributeNodeNS(uri, name);\n        } else {\n            var attributes = node.attributes;\n            var potentialNode, fullName;\n            for(var i=0, len=attributes.length; i<len; ++i) {\n                potentialNode = attributes[i];\n                if(potentialNode.namespaceURI == uri) {\n                    fullName = (potentialNode.prefix) ?\n                               (potentialNode.prefix + \":\" + name) : name;\n                    if(fullName == potentialNode.nodeName) {\n                        attributeNode = potentialNode;\n                        break;\n                    }\n                }\n            }\n        }\n        return attributeNode;\n    },\n\n    /**\n     * APIMethod: getAttributeNS\n     * Get an attribute value given the namespace URI and local name.\n     * \n     * Parameters:\n     * node - {Element} Node on which to search for an attribute.\n     * uri - {String} Namespace URI.\n     * name - {String} Local name of the attribute (without the prefix).\n     * \n     * Returns:\n     * {String} An attribute value or and empty string if none found.\n     */\n    getAttributeNS: function(node, uri, name) {\n        var attributeValue = \"\";\n        if(node.getAttributeNS) {\n            attributeValue = node.getAttributeNS(uri, name) || \"\";\n        } else {\n            var attributeNode = this.getAttributeNodeNS(node, uri, name);\n            if(attributeNode) {\n                attributeValue = attributeNode.nodeValue;\n            }\n        }\n        return attributeValue;\n    },\n    \n    /**\n     * APIMethod: getChildValue\n     * Get the textual value of the node if it exists, or return an\n     *     optional default string.  Returns an empty string if no first child\n     *     exists and no default value is supplied.\n     *\n     * Parameters:\n     * node - {DOMElement} The element used to look for a first child value.\n     * def - {String} Optional string to return in the event that no\n     *     first child value exists.\n     *\n     * Returns:\n     * {String} The value of the first child of the given node.\n     */\n    getChildValue: function(node, def) {\n        var value = def || \"\";\n        if(node) {\n            for(var child=node.firstChild; child; child=child.nextSibling) {\n                switch(child.nodeType) {\n                    case 3: // text node\n                    case 4: // cdata section\n                        value += child.nodeValue;\n                }\n            }\n        }\n        return value;\n    },\n\n    /**\n     * APIMethod: isSimpleContent\n     * Test if the given node has only simple content (i.e. no child element\n     *     nodes).\n     *\n     * Parameters:\n     * node - {DOMElement} An element node.\n     *\n     * Returns:\n     * {Boolean} The node has no child element nodes (nodes of type 1). \n     */\n    isSimpleContent: function(node) {\n        var simple = true;\n        for(var child=node.firstChild; child; child=child.nextSibling) {\n            if(child.nodeType === 1) {\n                simple = false;\n                break;\n            }\n        }\n        return simple;\n    },\n    \n    /**\n     * APIMethod: contentType\n     * Determine the content type for a given node.\n     *\n     * Parameters:\n     * node - {DOMElement}\n     *\n     * Returns:\n     * {Integer} One of OpenLayers.Format.XML.CONTENT_TYPE.{EMPTY,SIMPLE,COMPLEX,MIXED}\n     *     if the node has no, simple, complex, or mixed content.\n     */\n    contentType: function(node) {\n        var simple = false,\n            complex = false;\n            \n        var type = OpenLayers.Format.XML.CONTENT_TYPE.EMPTY;\n\n        for(var child=node.firstChild; child; child=child.nextSibling) {\n            switch(child.nodeType) {\n                case 1: // element\n                    complex = true;\n                    break;\n                case 8: // comment\n                    break;\n                default:\n                    simple = true;\n            }\n            if(complex && simple) {\n                break;\n            }\n        }\n        \n        if(complex && simple) {\n            type = OpenLayers.Format.XML.CONTENT_TYPE.MIXED;\n        } else if(complex) {\n            return OpenLayers.Format.XML.CONTENT_TYPE.COMPLEX;\n        } else if(simple) {\n            return OpenLayers.Format.XML.CONTENT_TYPE.SIMPLE;\n        }\n        return type;\n    },\n\n    /**\n     * APIMethod: hasAttributeNS\n     * Determine whether a node has a particular attribute matching the given\n     *     name and namespace.\n     * \n     * Parameters:\n     * node - {Element} Node on which to search for an attribute.\n     * uri - {String} Namespace URI.\n     * name - {String} Local name of the attribute (without the prefix).\n     * \n     * Returns:\n     * {Boolean} The node has an attribute matching the name and namespace.\n     */\n    hasAttributeNS: function(node, uri, name) {\n        var found = false;\n        if(node.hasAttributeNS) {\n            found = node.hasAttributeNS(uri, name);\n        } else {\n            found = !!this.getAttributeNodeNS(node, uri, name);\n        }\n        return found;\n    },\n    \n    /**\n     * APIMethod: setAttributeNS\n     * Adds a new attribute or changes the value of an attribute with the given\n     *     namespace and name.\n     *\n     * Parameters:\n     * node - {Element} Element node on which to set the attribute.\n     * uri - {String} Namespace URI for the attribute.\n     * name - {String} Qualified name (prefix:localname) for the attribute.\n     * value - {String} Attribute value.\n     */\n    setAttributeNS: function(node, uri, name, value) {\n        if(node.setAttributeNS) {\n            node.setAttributeNS(uri, name, value);\n        } else {\n            if(this.xmldom) {\n                if(uri) {\n                    var attribute = node.ownerDocument.createNode(\n                        2, name, uri\n                    );\n                    attribute.nodeValue = value;\n                    node.setAttributeNode(attribute);\n                } else {\n                    node.setAttribute(name, value);\n                }\n            } else {\n                throw \"setAttributeNS not implemented\";\n            }\n        }\n    },\n\n    /**\n     * Method: createElementNSPlus\n     * Shorthand for creating namespaced elements with optional attributes and\n     *     child text nodes.\n     *\n     * Parameters:\n     * name - {String} The qualified node name.\n     * options - {Object} Optional object for node configuration.\n     *\n     * Valid options:\n     * uri - {String} Optional namespace uri for the element - supply a prefix\n     *     instead if the namespace uri is a property of the format's namespace\n     *     object.\n     * attributes - {Object} Optional attributes to be set using the\n     *     <setAttributes> method.\n     * value - {String} Optional text to be appended as a text node.\n     *\n     * Returns:\n     * {Element} An element node.\n     */\n    createElementNSPlus: function(name, options) {\n        options = options || {};\n        // order of prefix preference\n        // 1. in the uri option\n        // 2. in the prefix option\n        // 3. in the qualified name\n        // 4. from the defaultPrefix\n        var uri = options.uri || this.namespaces[options.prefix];\n        if(!uri) {\n            var loc = name.indexOf(\":\");\n            uri = this.namespaces[name.substring(0, loc)];\n        }\n        if(!uri) {\n            uri = this.namespaces[this.defaultPrefix];\n        }\n        var node = this.createElementNS(uri, name);\n        if(options.attributes) {\n            this.setAttributes(node, options.attributes);\n        }\n        var value = options.value;\n        if(value != null) {\n            node.appendChild(this.createTextNode(value));\n        }\n        return node;\n    },\n    \n    /**\n     * Method: setAttributes\n     * Set multiple attributes given key value pairs from an object.\n     *\n     * Parameters:\n     * node - {Element} An element node.\n     * obj - {Object || Array} An object whose properties represent attribute\n     *     names and values represent attribute values.  If an attribute name\n     *     is a qualified name (\"prefix:local\"), the prefix will be looked up\n     *     in the parsers {namespaces} object.  If the prefix is found,\n     *     setAttributeNS will be used instead of setAttribute.\n     */\n    setAttributes: function(node, obj) {\n        var value, uri;\n        for(var name in obj) {\n            if(obj[name] != null && obj[name].toString) {\n                value = obj[name].toString();\n                // check for qualified attribute name (\"prefix:local\")\n                uri = this.namespaces[name.substring(0, name.indexOf(\":\"))] || null;\n                this.setAttributeNS(node, uri, name, value);\n            }\n        }\n    },\n\n    /**\n     * Method: getFirstElementChild\n     * Implementation of firstElementChild attribute that works on ie7 and ie8.\n     *\n     * Parameters:\n     * node - {DOMElement} The parent node (required).\n     *\n     * Returns:\n     * {DOMElement} The first child element.\n     */\n    getFirstElementChild: function(node) {\n        if (node.firstElementChild) {\n            return node.firstElementChild;\n        }\n        else {\n            var child = node.firstChild;\n            while (child.nodeType != 1 && (child = child.nextSibling)) {}\n            return child;\n        }\n    },\n\n    /**\n     * Method: readNode\n     * Shorthand for applying one of the named readers given the node\n     *     namespace and local name.  Readers take two args (node, obj) and\n     *     generally extend or modify the second.\n     *\n     * Parameters:\n     * node - {DOMElement} The node to be read (required).\n     * obj - {Object} The object to be modified (optional).\n     *\n     * Returns:\n     * {Object} The input object, modified (or a new one if none was provided).\n     */\n    readNode: function(node, obj) {\n        if(!obj) {\n            obj = {};\n        }\n        var group = this.readers[node.namespaceURI ? this.namespaceAlias[node.namespaceURI]: this.defaultPrefix];\n        if(group) {\n            var local = node.localName || node.nodeName.split(\":\").pop();\n            var reader = group[local] || group[\"*\"];\n            if(reader) {\n                reader.apply(this, [node, obj]);\n            }\n        }\n        return obj;\n    },\n\n    /**\n     * Method: readChildNodes\n     * Shorthand for applying the named readers to all children of a node.\n     *     For each child of type 1 (element), <readSelf> is called.\n     *\n     * Parameters:\n     * node - {DOMElement} The node to be read (required).\n     * obj - {Object} The object to be modified (optional).\n     *\n     * Returns:\n     * {Object} The input object, modified.\n     */\n    readChildNodes: function(node, obj) {\n        if(!obj) {\n            obj = {};\n        }\n        var children = node.childNodes;\n        var child;\n        for(var i=0, len=children.length; i<len; ++i) {\n            child = children[i];\n            if(child.nodeType == 1) {\n                this.readNode(child, obj);\n            }\n        }\n        return obj;\n    },\n\n    /**\n     * Method: writeNode\n     * Shorthand for applying one of the named writers and appending the\n     *     results to a node.  If a qualified name is not provided for the\n     *     second argument (and a local name is used instead), the namespace\n     *     of the parent node will be assumed.\n     *\n     * Parameters:\n     * name - {String} The name of a node to generate.  If a qualified name\n     *     (e.g. \"pre:Name\") is used, the namespace prefix is assumed to be\n     *     in the <writers> group.  If a local name is used (e.g. \"Name\") then\n     *     the namespace of the parent is assumed.  If a local name is used\n     *     and no parent is supplied, then the default namespace is assumed.\n     * obj - {Object} Structure containing data for the writer.\n     * parent - {DOMElement} Result will be appended to this node.  If no parent\n     *     is supplied, the node will not be appended to anything.\n     *\n     * Returns:\n     * {DOMElement} The child node.\n     */\n    writeNode: function(name, obj, parent) {\n        var prefix, local;\n        var split = name.indexOf(\":\");\n        if(split > 0) {\n            prefix = name.substring(0, split);\n            local = name.substring(split + 1);\n        } else {\n            if(parent) {\n                prefix = this.namespaceAlias[parent.namespaceURI];\n            } else {\n                prefix = this.defaultPrefix;\n            }\n            local = name;\n        }\n        var child = this.writers[prefix][local].apply(this, [obj]);\n        if(parent) {\n            parent.appendChild(child);\n        }\n        return child;\n    },\n\n    /**\n     * APIMethod: getChildEl\n     * Get the first child element.  Optionally only return the first child\n     *     if it matches the given name and namespace URI.\n     *\n     * Parameters:\n     * node - {DOMElement} The parent node.\n     * name - {String} Optional node name (local) to search for.\n     * uri - {String} Optional namespace URI to search for.\n     *\n     * Returns:\n     * {DOMElement} The first child.  Returns null if no element is found, if\n     *     something significant besides an element is found, or if the element\n     *     found does not match the optional name and uri.\n     */\n    getChildEl: function(node, name, uri) {\n        return node && this.getThisOrNextEl(node.firstChild, name, uri);\n    },\n    \n    /**\n     * APIMethod: getNextEl\n     * Get the next sibling element.  Optionally get the first sibling only\n     *     if it matches the given local name and namespace URI.\n     *\n     * Parameters:\n     * node - {DOMElement} The node.\n     * name - {String} Optional local name of the sibling to search for.\n     * uri - {String} Optional namespace URI of the sibling to search for.\n     *\n     * Returns:\n     * {DOMElement} The next sibling element.  Returns null if no element is\n     *     found, something significant besides an element is found, or the\n     *     found element does not match the optional name and uri.\n     */\n    getNextEl: function(node, name, uri) {\n        return node && this.getThisOrNextEl(node.nextSibling, name, uri);\n    },\n    \n    /**\n     * Method: getThisOrNextEl\n     * Return this node or the next element node.  Optionally get the first\n     *     sibling with the given local name or namespace URI.\n     *\n     * Parameters:\n     * node - {DOMElement} The node.\n     * name - {String} Optional local name of the sibling to search for.\n     * uri - {String} Optional namespace URI of the sibling to search for.\n     *\n     * Returns:\n     * {DOMElement} The next sibling element.  Returns null if no element is\n     *     found, something significant besides an element is found, or the\n     *     found element does not match the query.\n     */\n    getThisOrNextEl: function(node, name, uri) {\n        outer: for(var sibling=node; sibling; sibling=sibling.nextSibling) {\n            switch(sibling.nodeType) {\n                case 1: // Element\n                    if((!name || name === (sibling.localName || sibling.nodeName.split(\":\").pop())) &&\n                       (!uri || uri === sibling.namespaceURI)) {\n                        // matches\n                        break outer;\n                    }\n                    sibling = null;\n                    break outer;\n                case 3: // Text\n                    if(/^\\s*$/.test(sibling.nodeValue)) {\n                        break;\n                    }\n                case 4: // CDATA\n                case 6: // ENTITY_NODE\n                case 12: // NOTATION_NODE\n                case 10: // DOCUMENT_TYPE_NODE\n                case 11: // DOCUMENT_FRAGMENT_NODE\n                    sibling = null;\n                    break outer;\n            } // ignore comments and processing instructions\n        }\n        return sibling || null;\n    },\n    \n    /**\n     * APIMethod: lookupNamespaceURI\n     * Takes a prefix and returns the namespace URI associated with it on the given\n     *     node if found (and null if not). Supplying null for the prefix will\n     *     return the default namespace.\n     *\n     * For browsers that support it, this calls the native lookupNamesapceURI\n     *     function.  In other browsers, this is an implementation of\n     *     http://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-lookupNamespaceURI.\n     *\n     * For browsers that don't support the attribute.ownerElement property, this\n     *     method cannot be called on attribute nodes.\n     *     \n     * Parameters:\n     * node - {DOMElement} The node from which to start looking.\n     * prefix - {String} The prefix to lookup or null to lookup the default namespace.\n     * \n     * Returns:\n     * {String} The namespace URI for the given prefix.  Returns null if the prefix\n     *     cannot be found or the node is the wrong type.\n     */\n    lookupNamespaceURI: function(node, prefix) {\n        var uri = null;\n        if(node) {\n            if(node.lookupNamespaceURI) {\n                uri = node.lookupNamespaceURI(prefix);\n            } else {\n                outer: switch(node.nodeType) {\n                    case 1: // ELEMENT_NODE\n                        if(node.namespaceURI !== null && node.prefix === prefix) {\n                            uri = node.namespaceURI;\n                            break outer;\n                        }\n                        var len = node.attributes.length;\n                        if(len) {\n                            var attr;\n                            for(var i=0; i<len; ++i) {\n                                attr = node.attributes[i];\n                                if(attr.prefix === \"xmlns\" && attr.name === \"xmlns:\" + prefix) {\n                                    uri = attr.value || null;\n                                    break outer;\n                                } else if(attr.name === \"xmlns\" && prefix === null) {\n                                    uri = attr.value || null;\n                                    break outer;\n                                }\n                            }\n                        }\n                        uri = this.lookupNamespaceURI(node.parentNode, prefix);\n                        break outer;\n                    case 2: // ATTRIBUTE_NODE\n                        uri = this.lookupNamespaceURI(node.ownerElement, prefix);\n                        break outer;\n                    case 9: // DOCUMENT_NODE\n                        uri = this.lookupNamespaceURI(node.documentElement, prefix);\n                        break outer;\n                    case 6: // ENTITY_NODE\n                    case 12: // NOTATION_NODE\n                    case 10: // DOCUMENT_TYPE_NODE\n                    case 11: // DOCUMENT_FRAGMENT_NODE\n                        break outer;\n                    default: \n                        // TEXT_NODE (3), CDATA_SECTION_NODE (4), ENTITY_REFERENCE_NODE (5),\n                        // PROCESSING_INSTRUCTION_NODE (7), COMMENT_NODE (8)\n                        uri =  this.lookupNamespaceURI(node.parentNode, prefix);\n                        break outer;\n                }\n            }\n        }\n        return uri;\n    },\n    \n    /**\n     * Method: getXMLDoc\n     * Get an XML document for nodes that are not supported in HTML (e.g.\n     * createCDATASection). On IE, this will either return an existing or\n     * create a new <xmldom> on the instance. On other browsers, this will\n     * either return an existing or create a new shared document (see\n     * <OpenLayers.Format.XML.document>).\n     *\n     * Returns:\n     * {XMLDocument}\n     */\n    getXMLDoc: function() {\n        if (!OpenLayers.Format.XML.document && !this.xmldom) {\n            if (document.implementation && document.implementation.createDocument) {\n                OpenLayers.Format.XML.document =\n                    document.implementation.createDocument(\"\", \"\", null);\n            } else if (!this.xmldom && OpenLayers.Format.XML.supportActiveX) {\n                this.xmldom = new ActiveXObject(\"Microsoft.XMLDOM\");\n            }\n        }\n        return OpenLayers.Format.XML.document || this.xmldom;\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.XML\" \n\n});     \n\nOpenLayers.Format.XML.CONTENT_TYPE = {EMPTY: 0, SIMPLE: 1, COMPLEX: 2, MIXED: 3};\n\n/**\n * APIFunction: OpenLayers.Format.XML.lookupNamespaceURI\n * Takes a prefix and returns the namespace URI associated with it on the given\n *     node if found (and null if not). Supplying null for the prefix will\n *     return the default namespace.\n *\n * For browsers that support it, this calls the native lookupNamesapceURI\n *     function.  In other browsers, this is an implementation of\n *     http://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-lookupNamespaceURI.\n *\n * For browsers that don't support the attribute.ownerElement property, this\n *     method cannot be called on attribute nodes.\n *     \n * Parameters:\n * node - {DOMElement} The node from which to start looking.\n * prefix - {String} The prefix to lookup or null to lookup the default namespace.\n * \n * Returns:\n * {String} The namespace URI for the given prefix.  Returns null if the prefix\n *     cannot be found or the node is the wrong type.\n */\nOpenLayers.Format.XML.lookupNamespaceURI = OpenLayers.Function.bind(\n    OpenLayers.Format.XML.prototype.lookupNamespaceURI,\n    OpenLayers.Format.XML.prototype\n);\n\n/**\n * Property: OpenLayers.Format.XML.document\n * {XMLDocument} XML document to reuse for creating non-HTML compliant nodes,\n * like document.createCDATASection.\n */\nOpenLayers.Format.XML.document = null;\n\n/**\n * APIFunction: OpenLayers.Format.XML.supportActiveX\n * Returns a poolean flag to check if this browser uses ActiveX.\n */\nOpenLayers.Format.XML.supportActiveX = (function () {\n    return (Object.getOwnPropertyDescriptor &&\n            Object.getOwnPropertyDescriptor(window, \"ActiveXObject\")) ||\n            (\"ActiveXObject\" in window);\n})();\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML.js\n * @requires OpenLayers/Format/OGCExceptionReport.js\n */\n\n/**\n * Class: OpenLayers.Format.XML.VersionedOGC\n * Base class for versioned formats, i.e. a format which supports multiple\n * versions.\n *\n * To enable checking if parsing succeeded, you will need to define a property\n * called errorProperty on the parser you want to check. The parser will then\n * check the returned object to see if that property is present. If it is, it\n * assumes the parsing was successful. If it is not present (or is null), it will\n * pass the document through an OGCExceptionReport parser.\n * \n * If errorProperty is undefined for the parser, this error checking mechanism\n * will be disabled.\n *\n *\n * \n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.XML.VersionedOGC = OpenLayers.Class(OpenLayers.Format.XML, {\n    \n    /**\n     * APIProperty: defaultVersion\n     * {String} Version number to assume if none found.\n     */\n    defaultVersion: null,\n    \n    /**\n     * APIProperty: version\n     * {String} Specify a version string if one is known.\n     */\n    version: null,\n\n    /**\n     * APIProperty: profile\n     * {String} If provided, use a custom profile.\n     */\n    profile: null,\n\n    /**\n     * APIProperty: allowFallback\n     * {Boolean} If a profiled parser cannot be found for the returned version,\n     * use a non-profiled parser as the fallback. Application code using this\n     * should take into account that the return object structure might be\n     * missing the specifics of the profile. Defaults to false.\n     */\n    allowFallback: false,\n\n    /**\n     * Property: name\n     * {String} The name of this parser, this is the part of the CLASS_NAME\n     * except for \"OpenLayers.Format.\"\n     */\n    name: null,\n\n    /**\n     * APIProperty: stringifyOutput\n     * {Boolean} If true, write will return a string otherwise a DOMElement.\n     * Default is false.\n     */\n    stringifyOutput: false,\n\n    /**\n     * Property: parser\n     * {Object} Instance of the versioned parser.  Cached for multiple read and\n     *     write calls of the same version.\n     */\n    parser: null,\n\n    /**\n     * Constructor: OpenLayers.Format.XML.VersionedOGC.\n     * Constructor.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on\n     *     the object.\n     */\n    initialize: function(options) {\n        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);\n        var className = this.CLASS_NAME;\n        this.name = className.substring(className.lastIndexOf(\".\")+1);\n    },\n\n    /**\n     * Method: getVersion\n     * Returns the version to use. Subclasses can override this function\n     * if a different version detection is needed.\n     *\n     * Parameters:\n     * root - {DOMElement}\n     * options - {Object} Optional configuration object.\n     *\n     * Returns:\n     * {String} The version to use.\n     */\n    getVersion: function(root, options) {\n        var version;\n        // read\n        if (root) {\n            version = this.version;\n            if(!version) {\n                version = root.getAttribute(\"version\");\n                if(!version) {\n                    version = this.defaultVersion;\n                }\n            }\n        } else { // write\n            version = (options && options.version) || \n                this.version || this.defaultVersion;\n        }\n        return version;\n    },\n\n    /**\n     * Method: getParser\n     * Get an instance of the cached parser if available, otherwise create one.\n     *\n     * Parameters:\n     * version - {String}\n     *\n     * Returns:\n     * {<OpenLayers.Format>}\n     */\n    getParser: function(version) {\n        version = version || this.defaultVersion;\n        var profile = this.profile ? \"_\" + this.profile : \"\";\n        if(!this.parser || this.parser.VERSION != version) {\n            var format = OpenLayers.Format[this.name][\n                \"v\" + version.replace(/\\./g, \"_\") + profile\n            ];\n            if(!format) {\n                if (profile !== \"\" && this.allowFallback) {\n                    // fallback to the non-profiled version of the parser\n                    profile = \"\";\n                    format = OpenLayers.Format[this.name][\n                        \"v\" + version.replace(/\\./g, \"_\")\n                    ];\n                }\n                if (!format) {\n                    throw \"Can't find a \" + this.name + \" parser for version \" +\n                          version + profile;\n                }\n            }\n            this.parser = new format(this.options);\n        }\n        return this.parser;\n    },\n\n    /**\n     * APIMethod: write\n     * Write a document.\n     *\n     * Parameters:\n     * obj - {Object} An object representing the document.\n     * options - {Object} Optional configuration object.\n     *\n     * Returns:\n     * {String} The document as a string\n     */\n    write: function(obj, options) {\n        var version = this.getVersion(null, options);\n        this.parser = this.getParser(version);\n        var root = this.parser.write(obj, options);\n        if (this.stringifyOutput === false) {\n            return root;\n        } else {\n            return OpenLayers.Format.XML.prototype.write.apply(this, [root]);\n        }\n    },\n\n    /**\n     * APIMethod: read\n     * Read a doc and return an object representing the document.\n     *\n     * Parameters:\n     * data - {String | DOMElement} Data to read.\n     * options - {Object} Options for the reader.\n     *\n     * Returns:\n     * {Object} An object representing the document.\n     */\n    read: function(data, options) {\n        if(typeof data == \"string\") {\n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n        var root = data.documentElement;\n        var version = this.getVersion(root);\n        this.parser = this.getParser(version);          // Select the parser\n        var obj = this.parser.read(data, options);      // Parse the data\n\n        var errorProperty = this.parser.errorProperty || null;\n        if (errorProperty !== null && obj[errorProperty] === undefined) {\n            // an error must have happened, so parse it and report back\n            var format = new OpenLayers.Format.OGCExceptionReport();\n            obj.error = format.read(data);\n        }\n        obj.version = version;\n        obj.requestType = this.name;\n        return obj;\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.XML.VersionedOGC\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML/VersionedOGC.js\n */\n\n/**\n * Class: OpenLayers.Format.Context\n * Base class for both Format.WMC and Format.OWSContext\n *\n * Inherits from:\n *  - <OpenLayers.Format.XML.VersionedOGC>\n */\nOpenLayers.Format.Context = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {\n\n    /**\n     * Property: layerOptions\n     * {Object} Default options for layers created by the parser. These\n     *     options are overridden by the options which are read from the\n     *     capabilities document.\n     */\n    layerOptions: null,\n\n    /**\n     * Property: layerParams\n     * {Object} Default parameters for layers created by the parser. This\n     *     can be used e.g. to override DEFAULT_PARAMS for \n     *     OpenLayers.Layer.WMS.\n     */\n    layerParams: null,\n\n    /**\n     * Constructor: OpenLayers.Format.Context\n     * Create a new parser for Context documents.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * APIMethod: read\n     * Read Context data from a string, and return an object with map\n     *     properties and a list of layers.\n     *\n     * Parameters:\n     * data - {String} or {DOMElement} data to read/parse.\n     * options - {Object} The options object must contain a map property.  If\n     *     the map property is a string, it must be the id of a dom element\n     *     where the new map will be placed.  If the map property is an\n     *     <OpenLayers.Map>, the layers from the context document will be added\n     *     to the map.\n     *\n     * Returns:\n     * {<OpenLayers.Map>} A map based on the context.\n     */\n    read: function(data, options) {\n        var context = OpenLayers.Format.XML.VersionedOGC.prototype.read.apply(this, \n            arguments);\n        var map;\n        if(options && options.map) {\n            this.context = context;\n            if(options.map instanceof OpenLayers.Map) {\n                map = this.mergeContextToMap(context, options.map);\n            } else {\n                var mapOptions = options.map;\n                if(OpenLayers.Util.isElement(mapOptions) ||\n                   typeof mapOptions == \"string\") {\n                    // we assume mapOptions references a div\n                    // element\n                    mapOptions = {div: mapOptions};\n                }\n                map = this.contextToMap(context, mapOptions);\n            }\n        } else {\n            // not documented as part of the API, provided as a non-API option\n            map = context;\n        }\n        return map;\n    },\n\n    /**\n     * Method: getLayerFromContext\n     * Create a WMS layer from a layerContext object.\n     *\n     * Parameters:\n     * layerContext - {Object} An object representing a WMS layer.\n     *\n     * Returns:\n     * {<OpenLayers.Layer.WMS>} A WMS layer.\n     */\n    getLayerFromContext: function(layerContext) {\n        var i, len;\n        // fill initial options object from layerContext\n        var options = {\n            queryable: layerContext.queryable, //keep queryable for api compatibility\n            visibility: layerContext.visibility,\n            maxExtent: layerContext.maxExtent,\n            metadata: OpenLayers.Util.applyDefaults(layerContext.metadata, \n            {styles: layerContext.styles,\n             formats: layerContext.formats,\n             \"abstract\": layerContext[\"abstract\"],\n             dataURL: layerContext.dataURL\n            }),\n            numZoomLevels: layerContext.numZoomLevels,\n            units: layerContext.units,\n            isBaseLayer: layerContext.isBaseLayer,\n            opacity: layerContext.opacity,\n            gutter: layerContext.gutter,\n            displayInLayerSwitcher: layerContext.displayInLayerSwitcher,\n            singleTile: layerContext.singleTile,\n            tileSize: (layerContext.tileSize) ? \n                new OpenLayers.Size(\n                    layerContext.tileSize.width, \n                    layerContext.tileSize.height\n                ) : undefined,\n            minScale: layerContext.minScale || layerContext.maxScaleDenominator,\n            maxScale: layerContext.maxScale || layerContext.minScaleDenominator,\n            srs: layerContext.srs,\n            dimensions: layerContext.dimensions,\n            metadataURL: layerContext.metadataURL,\n            attribution: layerContext.attribution\n        };\n        if (this.layerOptions) {\n            OpenLayers.Util.applyDefaults(options, this.layerOptions);\n        }\n\n        var params = {\n            layers: layerContext.name,\n            transparent: layerContext.transparent,\n            version: layerContext.version\n        };\n        if (layerContext.formats && layerContext.formats.length>0) {\n            // set default value for params if current attribute is not positionned\n            params.format = layerContext.formats[0].value;\n            for (i=0, len=layerContext.formats.length; i<len; i++) {\n                var format = layerContext.formats[i];\n                if (format.current == true) {\n                    params.format = format.value;\n                    break;\n                }\n            }\n        }\n        if (layerContext.styles && layerContext.styles.length>0) {\n            for (i=0, len=layerContext.styles.length; i<len; i++) {\n                var style = layerContext.styles[i];\n                if (style.current == true) {\n                    // three style types to consider\n                    // 1) linked SLD\n                    // 2) inline SLD\n                    // 3) named style\n                    if(style.href) {\n                        params.sld = style.href;\n                    } else if(style.body) {\n                        params.sld_body = style.body;\n                    } else {\n                        params.styles = style.name;\n                    }\n                    break;\n                }\n            }\n        }\n        if (this.layerParams) {\n            OpenLayers.Util.applyDefaults(params, this.layerParams);\n        }\n\n        var layer = null;\n        var service = layerContext.service;\n        if (service == OpenLayers.Format.Context.serviceTypes.WFS) {\n            options.strategies = [new OpenLayers.Strategy.BBOX()];\n            options.protocol = new OpenLayers.Protocol.WFS({\n                url: layerContext.url,\n                // since we do not know featureNS, let the protocol\n                // determine it automagically using featurePrefix\n                featurePrefix: layerContext.name.split(\":\")[0],\n                featureType: layerContext.name.split(\":\").pop()\n            });\n            layer = new OpenLayers.Layer.Vector(\n                layerContext.title || layerContext.name,\n                options\n            );\n        } else if (service == OpenLayers.Format.Context.serviceTypes.KML) {\n            // use a vector layer with an HTTP Protcol and a Fixed strategy\n            options.strategies = [new OpenLayers.Strategy.Fixed()];\n            options.protocol = new OpenLayers.Protocol.HTTP({\n                url: layerContext.url, \n                format: new OpenLayers.Format.KML()\n            });\n            layer = new OpenLayers.Layer.Vector(\n                layerContext.title || layerContext.name,\n                options\n            );\n        } else if (service == OpenLayers.Format.Context.serviceTypes.GML) {\n            // use a vector layer with a HTTP Protocol and a Fixed strategy\n            options.strategies = [new OpenLayers.Strategy.Fixed()];\n            options.protocol = new OpenLayers.Protocol.HTTP({\n                url: layerContext.url, \n                format: new OpenLayers.Format.GML()\n            });\n            layer = new OpenLayers.Layer.Vector(\n                layerContext.title || layerContext.name,\n                options\n            );\n        } else if (layerContext.features) {\n            // inline GML or KML features\n            layer = new OpenLayers.Layer.Vector(\n                layerContext.title || layerContext.name,\n                options\n            );\n            layer.addFeatures(layerContext.features);\n        } else if (layerContext.categoryLayer !== true) {\n            layer = new OpenLayers.Layer.WMS(\n                layerContext.title || layerContext.name,\n                layerContext.url,\n                params,\n                options\n            );\n        }\n        return layer;\n    },\n\n    /**\n     * Method: getLayersFromContext\n     * Create an array of layers from an array of layerContext objects.\n     *\n     * Parameters:\n     * layersContext - {Array(Object)} An array of objects representing layers.\n     *\n     * Returns:\n     * {Array(<OpenLayers.Layer>)} An array of layers.\n     */\n    getLayersFromContext: function(layersContext) {\n        var layers = [];\n        for (var i=0, len=layersContext.length; i<len; i++) {\n            var layer = this.getLayerFromContext(layersContext[i]);\n            if (layer !== null) {\n                layers.push(layer);\n            }\n        }\n        return layers;\n    },\n\n    /**\n     * Method: contextToMap\n     * Create a map given a context object.\n     *\n     * Parameters:\n     * context - {Object} The context object.\n     * options - {Object} Default map options.\n     *\n     * Returns:\n     * {<OpenLayers.Map>} A map based on the context object.\n     */\n    contextToMap: function(context, options) {\n        options = OpenLayers.Util.applyDefaults({\n            maxExtent:  context.maxExtent,\n            projection: context.projection,\n            units:      context.units\n        }, options);\n\n        if (options.maxExtent) {\n            options.maxResolution = \n                options.maxExtent.getWidth() / OpenLayers.Map.TILE_WIDTH;\n        }\n\n        var metadata = {\n            contactInformation: context.contactInformation,\n            \"abstract\":         context[\"abstract\"],\n            keywords:           context.keywords,\n            logo:               context.logo,\n            descriptionURL:     context.descriptionURL\n        };\n\n        options.metadata = metadata;\n\n        var map = new OpenLayers.Map(options);\n        map.addLayers(this.getLayersFromContext(context.layersContext));\n        map.setCenter(\n            context.bounds.getCenterLonLat(),\n            map.getZoomForExtent(context.bounds, true)\n        );\n        return map;\n    },\n\n    /**\n     * Method: mergeContextToMap\n     * Add layers from a context object to a map.\n     *\n     * Parameters:\n     * context - {Object} The context object.\n     * map - {<OpenLayers.Map>} The map.\n     *\n     * Returns:\n     * {<OpenLayers.Map>} The same map with layers added.\n     */\n    mergeContextToMap: function(context, map) {\n        map.addLayers(this.getLayersFromContext(context.layersContext));\n        return map;\n    },\n\n    /**\n     * APIMethod: write\n     * Write a context document given a map.\n     *\n     * Parameters:\n     * obj - {<OpenLayers.Map> | Object} A map or context object.\n     * options - {Object} Optional configuration object.\n     *\n     * Returns:\n     * {String} A context document string.\n     */\n    write: function(obj, options) {\n        obj = this.toContext(obj);\n        return OpenLayers.Format.XML.VersionedOGC.prototype.write.apply(this,\n            arguments);\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.Context\"\n});\n\n/**\n * Constant: OpenLayers.Format.Context.serviceTypes\n * Enumeration for service types\n */\nOpenLayers.Format.Context.serviceTypes = {\n    \"WMS\": \"urn:ogc:serviceType:WMS\",\n    \"WFS\": \"urn:ogc:serviceType:WFS\",\n    \"WCS\": \"urn:ogc:serviceType:WCS\",\n    \"GML\": \"urn:ogc:serviceType:GML\",\n    \"SLD\": \"urn:ogc:serviceType:SLD\",\n    \"FES\": \"urn:ogc:serviceType:FES\",\n    \"KML\": \"urn:ogc:serviceType:KML\"\n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML.js\n * @requires OpenLayers/Geometry/Polygon.js\n * @requires OpenLayers/Geometry/Point.js\n * @requires OpenLayers/Geometry/MultiPolygon.js\n * @requires OpenLayers/Geometry/LinearRing.js\n */\n\n/**\n * Class: OpenLayers.Format.ArcXML\n * Read/Write ArcXML. Create a new instance with the <OpenLayers.Format.ArcXML>\n *     constructor.\n * \n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.ArcXML = OpenLayers.Class(OpenLayers.Format.XML, {\n\n    /**\n     * Property: fontStyleKeys\n     * {Array} List of keys used in font styling.\n     */\n    fontStyleKeys: [\n        'antialiasing', 'blockout', 'font', 'fontcolor','fontsize', 'fontstyle',\n        'glowing', 'interval', 'outline', 'printmode', 'shadow', 'transparency'\n    ],\n\n    /**\n     * Property: request\n     * A get_image request destined for an ArcIMS server.\n     */\n    request: null,\n    \n    /**\n     * Property: response\n     * A parsed response from an ArcIMS server.\n     */\n    response: null,\n\n    /**\n     * Constructor: OpenLayers.Format.ArcXML\n     * Create a new parser/writer for ArcXML.  Create an instance of this class\n     *    to begin authoring a request to an ArcIMS service.  This is used\n     *    primarily by the ArcIMS layer, but could be used to do other wild\n     *    stuff, like geocoding.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    initialize: function(options) {\n        this.request = new OpenLayers.Format.ArcXML.Request();\n        this.response = new OpenLayers.Format.ArcXML.Response();\n\n        if (options) {\n            if (options.requesttype == \"feature\") {\n                this.request.get_image = null;\n            \n                var qry = this.request.get_feature.query;\n                this.addCoordSys(qry.featurecoordsys, options.featureCoordSys);\n                this.addCoordSys(qry.filtercoordsys, options.filterCoordSys);\n            \n                if (options.polygon) {\n                    qry.isspatial = true;\n                    qry.spatialfilter.polygon = options.polygon;\n                } else if (options.envelope) {\n                    qry.isspatial = true;\n                    qry.spatialfilter.envelope = {minx:0, miny:0, maxx:0, maxy:0};\n                    this.parseEnvelope(qry.spatialfilter.envelope, options.envelope);\n                }\n            } else if (options.requesttype == \"image\") {\n                this.request.get_feature = null;\n            \n                var props = this.request.get_image.properties;\n                this.parseEnvelope(props.envelope, options.envelope);\n            \n                this.addLayers(props.layerlist, options.layers);\n                this.addImageSize(props.imagesize, options.tileSize);\n                this.addCoordSys(props.featurecoordsys, options.featureCoordSys);\n                this.addCoordSys(props.filtercoordsys, options.filterCoordSys);\n            } else {\n                // if an arcxml object is being created with no request type, it is\n                // probably going to consume a response, so do not throw an error if\n                // the requesttype is not defined\n                this.request = null;\n            }\n        }\n        \n        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);\n    },\n    \n    /**\n     * Method: parseEnvelope\n     * Parse an array of coordinates into an ArcXML envelope structure.\n     *\n     * Parameters:\n     * env - {Object} An envelope object that will contain the parsed coordinates.\n     * arr - {Array(double)} An array of coordinates in the order: [ minx, miny, maxx, maxy ]\n     */\n    parseEnvelope: function(env, arr) {\n        if (arr && arr.length == 4) {          \n            env.minx = arr[0];\n            env.miny = arr[1];\n            env.maxx = arr[2];\n            env.maxy = arr[3];\n        }\n    },\n    \n    /** \n     * Method: addLayers\n     * Add a collection of layers to another collection of layers. Each layer in the list is tuple of\n     * { id, visible }.  These layer collections represent the \n     * /ARCXML/REQUEST/get_image/PROPERTIES/LAYERLIST/LAYERDEF items in ArcXML\n     *\n     * TODO: Add support for dynamic layer rendering.\n     *\n     * Parameters:\n     * ll - {Array({id,visible})} A list of layer definitions.\n     * lyrs - {Array({id,visible})} A list of layer definitions.\n     */\n    addLayers: function(ll, lyrs) {\n        for(var lind = 0, len=lyrs.length; lind < len; lind++) {\n            ll.push(lyrs[lind]);\n        }\n    },\n    \n    /**\n     * Method: addImageSize\n     * Set the size of the requested image.\n     *\n     * Parameters:\n     * imsize - {Object} An ArcXML imagesize object.\n     * olsize - {<OpenLayers.Size>} The image size to set.\n     */\n    addImageSize: function(imsize, olsize) {\n        if (olsize !== null) {\n            imsize.width = olsize.w;\n            imsize.height = olsize.h;\n            imsize.printwidth = olsize.w;\n            imsize.printheight = olsize.h;\n        }\n    },\n\n    /**\n     * Method: addCoordSys\n     * Add the coordinate system information to an object. The object may be \n     *\n     * Parameters:\n     * featOrFilt - {Object} A featurecoordsys or filtercoordsys ArcXML structure.\n     * fsys - {String} or {<OpenLayers.Projection>} or {filtercoordsys} or \n     * {featurecoordsys} A projection representation. If it's a {String}, \n     * the value is assumed to be the SRID.  If it's a {OpenLayers.Projection} \n     * AND Proj4js is available, the projection number and name are extracted \n     * from there.  If it's a filter or feature ArcXML structure, it is copied.\n     */\n    addCoordSys: function(featOrFilt, fsys) {\n        if (typeof fsys == \"string\") {\n            featOrFilt.id = parseInt(fsys);\n            featOrFilt.string = fsys;\n        }\n        // is this a proj4js instance?\n        else if (typeof fsys == \"object\" && fsys.proj !== null){\n            featOrFilt.id = fsys.proj.srsProjNumber;\n            featOrFilt.string = fsys.proj.srsCode;\n        } else {\n            featOrFilt = fsys;\n        }\n    },\n\n    /**\n     * APIMethod: iserror\n     * Check to see if the response from the server was an error.\n     *\n     * Parameters:\n     * data - {String} or {DOMElement} data to read/parse. If nothing is supplied,\n     * the current response is examined.\n     *\n     * Returns:\n     * {Boolean} true if the response was an error.\n     */\n    iserror: function(data) {\n        var ret = null; \n        \n        if (!data) {\n            ret = (this.response.error !== '');\n        } else {\n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n            var errorNodes = data.documentElement.getElementsByTagName(\"ERROR\");\n            ret = (errorNodes !== null && errorNodes.length > 0);\n        }\n\n        return ret;\n    },\n\n    /**\n     * APIMethod: read\n     * Read data from a string, and return an response. \n     * \n     * Parameters:\n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {<OpenLayers.Format.ArcXML.Response>} An ArcXML response. Note that this response\n     *     data may change in the future. \n     */\n    read: function(data) {\n        if(typeof data == \"string\") {\n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n        \n        var arcNode = null;\n        if (data && data.documentElement) {\n            if(data.documentElement.nodeName == \"ARCXML\") {\n                arcNode = data.documentElement;\n            } else {\n                arcNode = data.documentElement.getElementsByTagName(\"ARCXML\")[0];\n            }\n        }\n          \n        // in Safari, arcNode will be there but will have a child named \n        // parsererror\n        if (!arcNode || arcNode.firstChild.nodeName === 'parsererror') {\n            var error, source;\n            try {\n                error = data.firstChild.nodeValue;\n                source = data.firstChild.childNodes[1].firstChild.nodeValue;\n            } catch (err) {\n                // pass\n            }\n            throw {\n                message: \"Error parsing the ArcXML request\", \n                error: error,\n                source: source\n            };\n        }\n        \n        var response = this.parseResponse(arcNode);\n        return response;\n    },\n    \n    /**\n     * APIMethod: write\n     * Generate an ArcXml document string for sending to an ArcIMS server. \n     * \n     * Returns:\n     * {String} A string representing the ArcXML document request.\n     */\n    write: function(request) {       \n        if (!request) {\n            request = this.request;\n        }    \n        var root = this.createElementNS(\"\", \"ARCXML\");\n        root.setAttribute(\"version\",\"1.1\");\n\n        var reqElem = this.createElementNS(\"\", \"REQUEST\");\n        \n        if (request.get_image != null) {\n            var getElem = this.createElementNS(\"\", \"GET_IMAGE\");\n            reqElem.appendChild(getElem);\n\n            var propElem = this.createElementNS(\"\", \"PROPERTIES\");\n            getElem.appendChild(propElem);\n\n            var props = request.get_image.properties;\n            if (props.featurecoordsys != null) {\n                var feat = this.createElementNS(\"\", \"FEATURECOORDSYS\");\n                propElem.appendChild(feat);\n                \n                if (props.featurecoordsys.id === 0) {\n                    feat.setAttribute(\"string\", props.featurecoordsys['string']);\n                }\n                else {\n                    feat.setAttribute(\"id\", props.featurecoordsys.id);\n                }\n            }\n          \n            if (props.filtercoordsys != null) {\n                var filt = this.createElementNS(\"\", \"FILTERCOORDSYS\");\n                propElem.appendChild(filt);\n\n                if (props.filtercoordsys.id === 0) {\n                    filt.setAttribute(\"string\", props.filtercoordsys.string);\n                }\n                else {\n                    filt.setAttribute(\"id\", props.filtercoordsys.id);\n                }\n            }\n          \n            if (props.envelope != null) {\n                var env = this.createElementNS(\"\", \"ENVELOPE\");\n                propElem.appendChild(env);\n\n                env.setAttribute(\"minx\", props.envelope.minx);\n                env.setAttribute(\"miny\", props.envelope.miny);\n                env.setAttribute(\"maxx\", props.envelope.maxx);\n                env.setAttribute(\"maxy\", props.envelope.maxy);\n            }        \n          \n            var imagesz = this.createElementNS(\"\", \"IMAGESIZE\");\n            propElem.appendChild(imagesz);\n          \n            imagesz.setAttribute(\"height\", props.imagesize.height);\n            imagesz.setAttribute(\"width\", props.imagesize.width);\n          \n            if (props.imagesize.height != props.imagesize.printheight ||\n                 props.imagesize.width != props.imagesize.printwidth) {\n                imagesz.setAttribute(\"printheight\", props.imagesize.printheight);\n                imagesz.setArrtibute(\"printwidth\", props.imagesize.printwidth);\n            }\n          \n            if (props.background != null) {\n                var backgrnd = this.createElementNS(\"\", \"BACKGROUND\");\n                propElem.appendChild(backgrnd);\n            \n                backgrnd.setAttribute(\"color\", \n                    props.background.color.r + \",\" + \n                    props.background.color.g + \",\" + \n                    props.background.color.b);\n              \n                if (props.background.transcolor !== null) {\n                    backgrnd.setAttribute(\"transcolor\", \n                        props.background.transcolor.r + \",\" + \n                        props.background.transcolor.g + \",\" + \n                        props.background.transcolor.b);\n                }\n            }\n          \n            if (props.layerlist != null && props.layerlist.length > 0) {\n                var layerlst = this.createElementNS(\"\", \"LAYERLIST\");\n                propElem.appendChild(layerlst);\n            \n                for (var ld = 0; ld < props.layerlist.length; ld++) {\n                    var ldef = this.createElementNS(\"\", \"LAYERDEF\");\n                    layerlst.appendChild(ldef);\n              \n                    ldef.setAttribute(\"id\", props.layerlist[ld].id);\n                    ldef.setAttribute(\"visible\", props.layerlist[ld].visible);\n              \n                    if (typeof props.layerlist[ld].query == \"object\") {\n                        var query = props.layerlist[ld].query;\n\n                        if (query.where.length < 0) {\n                            continue;\n                        }\n                  \n                        var queryElem = null;\n                        if (typeof query.spatialfilter == \"boolean\" && query.spatialfilter) {\n                            // handle spatial filter madness\n                            queryElem = this.createElementNS(\"\", \"SPATIALQUERY\");\n                        }\n                        else {\n                            queryElem = this.createElementNS(\"\", \"QUERY\");\n                        }\n                \n                        queryElem.setAttribute(\"where\", query.where);\n                \n                        if (typeof query.accuracy == \"number\" && query.accuracy > 0) {\n                            queryElem.setAttribute(\"accuracy\", query.accuracy);\n                        }\n                        if (typeof query.featurelimit == \"number\" && query.featurelimit < 2000) {\n                            queryElem.setAttribute(\"featurelimit\", query.featurelimit);\n                        }\n                        if (typeof query.subfields == \"string\" && query.subfields != \"#ALL#\") {\n                            queryElem.setAttribute(\"subfields\", query.subfields);\n                        }\n                        if (typeof query.joinexpression == \"string\" && query.joinexpression.length > 0) {\n                            queryElem.setAttribute(\"joinexpression\", query.joinexpression);\n                        }\n                        if (typeof query.jointables == \"string\" && query.jointables.length > 0) {\n                            queryElem.setAttribute(\"jointables\", query.jointables);\n                        }\n\n                        ldef.appendChild(queryElem);\n                    }\n              \n                    if (typeof props.layerlist[ld].renderer == \"object\") {\n                        this.addRenderer(ldef, props.layerlist[ld].renderer);                  \n                    }\n                }\n            }\n        } else if (request.get_feature != null) {\n            var getElem = this.createElementNS(\"\", \"GET_FEATURES\");\n            getElem.setAttribute(\"outputmode\", \"newxml\");\n            getElem.setAttribute(\"checkesc\", \"true\");\n          \n            if (request.get_feature.geometry) {\n                getElem.setAttribute(\"geometry\", request.get_feature.geometry);\n            }\n            else {\n                getElem.setAttribute(\"geometry\", \"false\");\n            }\n          \n            if (request.get_feature.compact) {\n                getElem.setAttribute(\"compact\", request.get_feature.compact);\n            }\n          \n            if (request.get_feature.featurelimit == \"number\") {\n                getElem.setAttribute(\"featurelimit\", request.get_feature.featurelimit);\n            }\n          \n            getElem.setAttribute(\"globalenvelope\", \"true\");\n            reqElem.appendChild(getElem);\n          \n            if (request.get_feature.layer != null && request.get_feature.layer.length > 0) {\n                var lyrElem = this.createElementNS(\"\", \"LAYER\");\n                lyrElem.setAttribute(\"id\", request.get_feature.layer);\n                getElem.appendChild(lyrElem);\n            }\n          \n            var fquery = request.get_feature.query;\n            if (fquery != null) {\n                var qElem = null;\n                if (fquery.isspatial) {\n                    qElem = this.createElementNS(\"\", \"SPATIALQUERY\");\n                } else {\n                    qElem = this.createElementNS(\"\", \"QUERY\");\n                }\n                getElem.appendChild(qElem);\n                \n                if (typeof fquery.accuracy == \"number\") {\n                    qElem.setAttribute(\"accuracy\", fquery.accuracy);\n                }\n                //qElem.setAttribute(\"featurelimit\", \"5\");\n            \n                if (fquery.featurecoordsys != null) {\n                    var fcsElem1 = this.createElementNS(\"\", \"FEATURECOORDSYS\");\n              \n                    if (fquery.featurecoordsys.id == 0) {\n                        fcsElem1.setAttribute(\"string\", fquery.featurecoordsys.string);\n                    } else {\n                        fcsElem1.setAttribute(\"id\", fquery.featurecoordsys.id);\n                    }\n                    qElem.appendChild(fcsElem1);\n                }\n            \n                if (fquery.filtercoordsys != null) {\n                    var fcsElem2 = this.createElementNS(\"\", \"FILTERCOORDSYS\");\n              \n                    if (fquery.filtercoordsys.id === 0) {\n                        fcsElem2.setAttribute(\"string\", fquery.filtercoordsys.string);\n                    } else {\n                        fcsElem2.setAttribute(\"id\", fquery.filtercoordsys.id);\n                    }\n                    qElem.appendChild(fcsElem2);\n                }\n            \n                if (fquery.buffer > 0) {   \n                    var bufElem = this.createElementNS(\"\", \"BUFFER\");\n                    bufElem.setAttribute(\"distance\", fquery.buffer);\n                    qElem.appendChild(bufElem);\n                }\n            \n                if (fquery.isspatial) {\n                    var spfElem = this.createElementNS(\"\", \"SPATIALFILTER\");\n                    spfElem.setAttribute(\"relation\", fquery.spatialfilter.relation);\n                    qElem.appendChild(spfElem);\n              \n                    if (fquery.spatialfilter.envelope) {\n                        var envElem = this.createElementNS(\"\", \"ENVELOPE\"); \n                        envElem.setAttribute(\"minx\", fquery.spatialfilter.envelope.minx);\n                        envElem.setAttribute(\"miny\", fquery.spatialfilter.envelope.miny);\n                        envElem.setAttribute(\"maxx\", fquery.spatialfilter.envelope.maxx);\n                        envElem.setAttribute(\"maxy\", fquery.spatialfilter.envelope.maxy);\n                        spfElem.appendChild(envElem);\n                    } else if(typeof fquery.spatialfilter.polygon == \"object\") {\n                        spfElem.appendChild(this.writePolygonGeometry(fquery.spatialfilter.polygon));                \n                    }\n                }\n            \n                if (fquery.where != null && fquery.where.length > 0) {\n                    qElem.setAttribute(\"where\", fquery.where);\n                }\n            }\n        }\n\n        root.appendChild(reqElem);\n\n        return OpenLayers.Format.XML.prototype.write.apply(this, [root]);\n    },\n    \n    \n    addGroupRenderer: function(ldef, toprenderer) {\n        var topRelem = this.createElementNS(\"\", \"GROUPRENDERER\");\n        ldef.appendChild(topRelem);\n      \n        for (var rind = 0; rind < toprenderer.length; rind++) {\n            var renderer = toprenderer[rind];\n            this.addRenderer(topRelem, renderer);\n        }\n    },\n    \n    \n    addRenderer: function(topRelem, renderer) {\n        if (OpenLayers.Util.isArray(renderer)) {\n            this.addGroupRenderer(topRelem, renderer);\n        } else {\n            var renderElem = this.createElementNS(\"\", renderer.type.toUpperCase() + \"RENDERER\");\n            topRelem.appendChild(renderElem);\n          \n            if (renderElem.tagName == \"VALUEMAPRENDERER\") {\n                this.addValueMapRenderer(renderElem, renderer);\n            } else if (renderElem.tagName == \"VALUEMAPLABELRENDERER\") {\n                this.addValueMapLabelRenderer(renderElem, renderer);\n            } else if (renderElem.tagName == \"SIMPLELABELRENDERER\") {\n                this.addSimpleLabelRenderer(renderElem, renderer);\n            } else if (renderElem.tagName == \"SCALEDEPENDENTRENDERER\") {\n                this.addScaleDependentRenderer(renderElem, renderer);\n            }\n        }             \n    },\n    \n    \n    addScaleDependentRenderer: function(renderElem, renderer) {\n        if (typeof renderer.lower == \"string\" || typeof renderer.lower == \"number\") {\n            renderElem.setAttribute(\"lower\", renderer.lower);\n        }\n        if (typeof renderer.upper == \"string\" || typeof renderer.upper == \"number\") {\n            renderElem.setAttribute(\"upper\", renderer.upper);\n        }\n        \n        this.addRenderer(renderElem, renderer.renderer);\n    },\n    \n    \n    addValueMapLabelRenderer: function(renderElem, renderer) {\n        renderElem.setAttribute(\"lookupfield\", renderer.lookupfield);\n        renderElem.setAttribute(\"labelfield\", renderer.labelfield);\n      \n        if (typeof renderer.exacts == \"object\") {\n            for (var ext=0, extlen=renderer.exacts.length; ext<extlen; ext++) {\n                var exact = renderer.exacts[ext];\n          \n                var eelem = this.createElementNS(\"\", \"EXACT\");\n          \n                if (typeof exact.value == \"string\") {\n                    eelem.setAttribute(\"value\", exact.value);\n                }\n                if (typeof exact.label == \"string\") {\n                    eelem.setAttribute(\"label\", exact.label);\n                }\n                if (typeof exact.method == \"string\") {\n                    eelem.setAttribute(\"method\", exact.method);\n                }\n\n                renderElem.appendChild(eelem);\n            \n                if (typeof exact.symbol == \"object\") {\n                    var selem = null;\n                \n                    if (exact.symbol.type == \"text\") {\n                        selem = this.createElementNS(\"\", \"TEXTSYMBOL\");\n                    }\n                \n                    if (selem != null) {\n                        var keys = this.fontStyleKeys;\n                        for (var i = 0, len = keys.length; i < len; i++) {\n                            var key = keys[i];\n                            if (exact.symbol[key]) {\n                                selem.setAttribute(key, exact.symbol[key]);\n                            }\n                        }    \n                        eelem.appendChild(selem);\n                    }\n                }\n            } // for each exact\n        }      \n    },\n    \n    addValueMapRenderer: function(renderElem, renderer) {\n        renderElem.setAttribute(\"lookupfield\", renderer.lookupfield);\n        \n        if (typeof renderer.ranges == \"object\") {\n            for(var rng=0, rnglen=renderer.ranges.length; rng<rnglen; rng++) {\n                var range = renderer.ranges[rng];\n                \n                var relem = this.createElementNS(\"\", \"RANGE\");\n                relem.setAttribute(\"lower\", range.lower);\n                relem.setAttribute(\"upper\", range.upper);\n                \n                renderElem.appendChild(relem);\n                \n                if (typeof range.symbol == \"object\") {\n                    var selem = null;\n              \n                    if (range.symbol.type == \"simplepolygon\") {\n                        selem = this.createElementNS(\"\", \"SIMPLEPOLYGONSYMBOL\");\n                    }\n              \n                    if (selem != null) {\n                        if (typeof range.symbol.boundarycolor == \"string\") {\n                            selem.setAttribute(\"boundarycolor\", range.symbol.boundarycolor);\n                        }\n                        if (typeof range.symbol.fillcolor == \"string\") {\n                            selem.setAttribute(\"fillcolor\", range.symbol.fillcolor);\n                        }\n                        if (typeof range.symbol.filltransparency == \"number\") {\n                            selem.setAttribute(\"filltransparency\", range.symbol.filltransparency);\n                        }\n                        relem.appendChild(selem);\n                    }   \n                }\n            } // for each range\n        } else if (typeof renderer.exacts == \"object\") {\n            for (var ext=0, extlen=renderer.exacts.length; ext<extlen; ext++) {\n                var exact = renderer.exacts[ext];\n          \n                var eelem = this.createElementNS(\"\", \"EXACT\");\n                if (typeof exact.value == \"string\") {\n                    eelem.setAttribute(\"value\", exact.value);\n                }\n                if (typeof exact.label == \"string\") {\n                    eelem.setAttribute(\"label\", exact.label);\n                }\n                if (typeof exact.method == \"string\") {\n                    eelem.setAttribute(\"method\", exact.method);\n                }\n            \n                renderElem.appendChild(eelem);\n            \n                if (typeof exact.symbol == \"object\") {\n                    var selem = null;\n            \n                    if (exact.symbol.type == \"simplemarker\") {\n                        selem = this.createElementNS(\"\", \"SIMPLEMARKERSYMBOL\");\n                    }\n            \n                    if (selem != null) {\n                        if (typeof exact.symbol.antialiasing == \"string\") {\n                            selem.setAttribute(\"antialiasing\", exact.symbol.antialiasing);\n                        }\n                        if (typeof exact.symbol.color == \"string\") {\n                            selem.setAttribute(\"color\", exact.symbol.color);\n                        }\n                        if (typeof exact.symbol.outline == \"string\") {\n                            selem.setAttribute(\"outline\", exact.symbol.outline);\n                        }\n                        if (typeof exact.symbol.overlap == \"string\") {\n                            selem.setAttribute(\"overlap\", exact.symbol.overlap);\n                        }\n                        if (typeof exact.symbol.shadow == \"string\") {\n                            selem.setAttribute(\"shadow\", exact.symbol.shadow);\n                        }\n                        if (typeof exact.symbol.transparency == \"number\") {\n                            selem.setAttribute(\"transparency\", exact.symbol.transparency);\n                        }\n                        //if (typeof exact.symbol.type == \"string\")\n                        //    selem.setAttribute(\"type\", exact.symbol.type);\n                        if (typeof exact.symbol.usecentroid == \"string\") {\n                            selem.setAttribute(\"usecentroid\", exact.symbol.usecentroid);\n                        }\n                        if (typeof exact.symbol.width == \"number\") {\n                            selem.setAttribute(\"width\", exact.symbol.width);\n                        }\n                \n                        eelem.appendChild(selem);\n                    }\n                }\n            } // for each exact\n        }\n    },\n    \n    \n    addSimpleLabelRenderer: function(renderElem, renderer) {\n        renderElem.setAttribute(\"field\", renderer.field);\n        var keys = ['featureweight', 'howmanylabels', 'labelbufferratio', \n                    'labelpriorities', 'labelweight', 'linelabelposition',\n                    'rotationalangles'];\n        for (var i=0, len=keys.length; i<len; i++) {\n            var key = keys[i];\n            if (renderer[key]) {\n                renderElem.setAttribute(key, renderer[key]);\n            }\n        }     \n           \n        if (renderer.symbol.type == \"text\") {\n            var symbol = renderer.symbol;\n            var selem = this.createElementNS(\"\", \"TEXTSYMBOL\");\n            renderElem.appendChild(selem);\n          \n            var keys = this.fontStyleKeys;\n            for (var i=0, len=keys.length; i<len; i++) {\n                var key = keys[i];\n                if (symbol[key]) {\n                    selem.setAttribute(key, renderer[key]);\n                }\n            }    \n        }    \n    },\n    \n    writePolygonGeometry: function(polygon) {\n        if (!(polygon instanceof OpenLayers.Geometry.Polygon)) {\n            throw { \n                message:'Cannot write polygon geometry to ArcXML with an ' +\n                    polygon.CLASS_NAME + ' object.',\n                geometry: polygon\n            };\n        }\n        \n        var polyElem = this.createElementNS(\"\", \"POLYGON\");\n      \n        for (var ln=0, lnlen=polygon.components.length; ln<lnlen; ln++) {\n            var ring = polygon.components[ln];\n            var ringElem = this.createElementNS(\"\", \"RING\");\n        \n            for (var rn=0, rnlen=ring.components.length; rn<rnlen; rn++) {\n                var point = ring.components[rn];\n                var pointElem = this.createElementNS(\"\", \"POINT\");\n            \n                pointElem.setAttribute(\"x\", point.x);\n                pointElem.setAttribute(\"y\", point.y);\n            \n                ringElem.appendChild(pointElem);\n            }\n        \n            polyElem.appendChild(ringElem);\n        }\n      \n        return polyElem;\n    },\n    \n    /**\n     * Method: parseResponse\n     * Take an ArcXML response, and parse in into this object's internal properties.\n     *\n     * Parameters:\n     * data - {String} or {DOMElement} The ArcXML response, as either a string or the\n     * top level DOMElement of the response.\n     */\n    parseResponse: function(data) {\n        if(typeof data == \"string\") { \n            var newData = new OpenLayers.Format.XML();\n            data = newData.read(data);\n        }\n        var response = new OpenLayers.Format.ArcXML.Response();\n        \n        var errorNode = data.getElementsByTagName(\"ERROR\");\n        \n        if (errorNode != null && errorNode.length > 0) {\n            response.error = this.getChildValue(errorNode, \"Unknown error.\");\n        } else {\n            var responseNode = data.getElementsByTagName(\"RESPONSE\");\n          \n            if (responseNode == null || responseNode.length == 0) {\n                response.error = \"No RESPONSE tag found in ArcXML response.\";\n                return response;\n            }\n          \n            var rtype = responseNode[0].firstChild.nodeName;\n            if (rtype == \"#text\") {\n                rtype = responseNode[0].firstChild.nextSibling.nodeName;\n            }\n          \n            if (rtype == \"IMAGE\") {\n                var envelopeNode = data.getElementsByTagName(\"ENVELOPE\");\n                var outputNode = data.getElementsByTagName(\"OUTPUT\");\n                \n                if (envelopeNode == null || envelopeNode.length == 0) {\n                    response.error = \"No ENVELOPE tag found in ArcXML response.\";\n                } else if (outputNode == null || outputNode.length == 0) {\n                    response.error = \"No OUTPUT tag found in ArcXML response.\";\n                } else {\n                    var envAttr = this.parseAttributes(envelopeNode[0]);            \n                    var outputAttr = this.parseAttributes(outputNode[0]);\n                  \n                    if (typeof outputAttr.type == \"string\") {\n                        response.image = { \n                            envelope: envAttr, \n                            output: { \n                                type: outputAttr.type, \n                                data: this.getChildValue(outputNode[0])\n                            }\n                        };\n                    } else {\n                        response.image = { envelope: envAttr, output: outputAttr };\n                    }\n                }\n            } else if (rtype == \"FEATURES\") {\n                var features = responseNode[0].getElementsByTagName(\"FEATURES\");\n            \n                // get the feature count\n                var featureCount = features[0].getElementsByTagName(\"FEATURECOUNT\");\n                response.features.featurecount = featureCount[0].getAttribute(\"count\");\n            \n                if (response.features.featurecount > 0) {\n                    // get the feature envelope\n                    var envelope = features[0].getElementsByTagName(\"ENVELOPE\");\n                    response.features.envelope = this.parseAttributes(envelope[0], typeof(0));\n\n                    // get the field values per feature\n                    var featureList = features[0].getElementsByTagName(\"FEATURE\");\n                    for (var fn = 0; fn < featureList.length; fn++) {\n                        var feature = new OpenLayers.Feature.Vector();\n                        var fields = featureList[fn].getElementsByTagName(\"FIELD\");\n\n                        for (var fdn = 0; fdn < fields.length; fdn++) {\n                            var fieldName = fields[fdn].getAttribute(\"name\");\n                            var fieldValue = fields[fdn].getAttribute(\"value\");\n                            feature.attributes[ fieldName ] = fieldValue;\n                        }\n\n                        var geom = featureList[fn].getElementsByTagName(\"POLYGON\");\n\n                        if (geom.length > 0) {\n                            // if there is a polygon, create an openlayers polygon, and assign\n                            // it to the .geometry property of the feature\n                            var ring = geom[0].getElementsByTagName(\"RING\");\n\n                            var polys = [];\n                            for (var rn = 0; rn < ring.length; rn++) {\n                                var linearRings = [];\n                                linearRings.push(this.parsePointGeometry(ring[rn]));\n\n                                var holes = ring[rn].getElementsByTagName(\"HOLE\");\n                                for (var hn = 0; hn < holes.length; hn++) {\n                                    linearRings.push(this.parsePointGeometry(holes[hn]));\n                                }\n                                holes = null;\n                                polys.push(new OpenLayers.Geometry.Polygon(linearRings));\n                                linearRings = null;\n                            }\n                            ring = null;\n                          \n                            if (polys.length == 1) {\n                                feature.geometry = polys[0];\n                            } else\n                            {\n                                feature.geometry = new OpenLayers.Geometry.MultiPolygon(polys);\n                            }\n                        }\n\n                        response.features.feature.push(feature);\n                    }\n                }\n            } else {\n                response.error = \"Unidentified response type.\";\n            }\n        }\n        return response;\n    },\n    \n    \n    /**\n     * Method: parseAttributes\n     *\n     * Parameters:\n     * node - {<DOMElement>} An element to parse attributes from.\n     *\n     * Returns:\n     * {Object} An attributes object, with properties set to attribute values.\n     */\n    parseAttributes: function(node,type) {\n        var attributes = {};\n        for(var attr = 0; attr < node.attributes.length; attr++) {\n            if (type == \"number\") {\n                attributes[node.attributes[attr].nodeName] = parseFloat(node.attributes[attr].nodeValue);\n            } else {\n                attributes[node.attributes[attr].nodeName] = node.attributes[attr].nodeValue;\n            }\n        }\n        return attributes;\n    },\n    \n    \n    /**\n     * Method: parsePointGeometry\n     *\n     * Parameters:\n     * node - {<DOMElement>} An element to parse <COORDS> or <POINT> arcxml data from.\n     *\n     * Returns:\n     * {<OpenLayers.Geometry.LinearRing>} A linear ring represented by the node's points.\n     */\n    parsePointGeometry: function(node) {\n        var ringPoints = [];\n        var coords = node.getElementsByTagName(\"COORDS\");\n\n        if (coords.length > 0) {\n            // if coords is present, it's the only coords item\n            var coordArr = this.getChildValue(coords[0]);\n            coordArr = coordArr.split(/;/);\n            for (var cn = 0; cn < coordArr.length; cn++) {\n                var coordItems = coordArr[cn].split(/ /);\n                ringPoints.push(new OpenLayers.Geometry.Point(coordItems[0], coordItems[1]));\n            }\n            coords = null;\n        } else {\n            var point = node.getElementsByTagName(\"POINT\");\n            if (point.length > 0) {\n                for (var pn = 0; pn < point.length; pn++) {\n                    ringPoints.push(\n                        new OpenLayers.Geometry.Point(\n                            parseFloat(point[pn].getAttribute(\"x\")),\n                            parseFloat(point[pn].getAttribute(\"y\"))\n                        )\n                    );\n                }\n            }\n            point = null;\n        }\n\n        return new OpenLayers.Geometry.LinearRing(ringPoints);      \n    },\n    \n    CLASS_NAME: \"OpenLayers.Format.ArcXML\" \n});\n\nOpenLayers.Format.ArcXML.Request = OpenLayers.Class({\n    initialize: function(params) {\n        var defaults = {\n            get_image: {\n                properties: {\n                    background: null,\n                    /*{ \n                        color: { r:255, g:255, b:255 },\n                        transcolor: null\n                    },*/\n                    draw: true,\n                    envelope: {\n                        minx: 0, \n                        miny: 0, \n                        maxx: 0, \n                        maxy: 0\n                    },\n                    featurecoordsys: { \n                        id:0, \n                        string:\"\",\n                        datumtransformid:0,\n                        datumtransformstring:\"\"\n                    },\n                    filtercoordsys:{\n                        id:0,\n                        string:\"\",\n                        datumtransformid:0,\n                        datumtransformstring:\"\"\n                    },\n                    imagesize:{\n                        height:0,\n                        width:0,\n                        dpi:96,\n                        printheight:0,\n                        printwidth:0,\n                        scalesymbols:false\n                    },\n                    layerlist:[],\n                    /* no support for legends */\n                    output:{\n                        baseurl:\"\",\n                        legendbaseurl:\"\",\n                        legendname:\"\",\n                        legendpath:\"\",\n                        legendurl:\"\",\n                        name:\"\",\n                        path:\"\",\n                        type:\"jpg\",\n                        url:\"\"\n                    }\n                }\n            },\n\n            get_feature: {\n                layer: \"\",\n                query: {\n                    isspatial: false,\n                    featurecoordsys: {\n                        id:0,\n                        string:\"\",\n                        datumtransformid:0,\n                        datumtransformstring:\"\"\n                    },\n                    filtercoordsys: {\n                        id:0,\n                        string:\"\",\n                        datumtransformid:0,\n                        datumtransformstring:\"\"\n                    },\n                    buffer:0,\n                    where:\"\",\n                    spatialfilter: {\n                        relation: \"envelope_intersection\",\n                        envelope: null\n                    }\n                }\n            },\n      \n            environment: {\n                separators: {\n                    cs:\" \",\n                    ts:\";\"\n                }\n            },\n      \n            layer: [],\n            workspaces: []\n        };\n      \n        return OpenLayers.Util.extend(this, defaults);      \n    },\n  \n    CLASS_NAME: \"OpenLayers.Format.ArcXML.Request\"\n});\n\nOpenLayers.Format.ArcXML.Response = OpenLayers.Class({  \n    initialize: function(params) {\n        var defaults = {\n            image: {\n                envelope:null,\n                output:''\n            },\n      \n            features: {\n                featurecount: 0,\n                envelope: null,\n                feature: []\n            },\n      \n            error:''\n        };\n  \n        return OpenLayers.Util.extend(this, defaults);\n    },\n  \n    CLASS_NAME: \"OpenLayers.Format.ArcXML.Response\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/ArcXML.js\n */\n\n/**\n * Class: OpenLayers.Format.ArcXML.Features\n * Read/Write ArcXML features. Create a new instance with the \n *     <OpenLayers.Format.ArcXML.Features> constructor.\n * \n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.ArcXML.Features = OpenLayers.Class(OpenLayers.Format.XML, {\n\n    /**\n     * Constructor: OpenLayers.Format.ArcXML.Features\n     * Create a new parser/writer for ArcXML Features.  Create an instance of this class\n     * to get a set of features from an ArcXML response.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    \n    /**\n     * APIMethod: read\n     * Read data from a string of ArcXML, and return a set of OpenLayers features. \n     * \n     * Parameters:\n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Array(<OpenLayers.Feature.Vector>)} A collection of features.\n     */\n    read: function(data) {\n        var axl = new OpenLayers.Format.ArcXML();\n        var parsed = axl.read(data);\n        \n        return parsed.features.feature;\n    }\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML.js\n * @requires OpenLayers/Feature/Vector.js\n * @requires OpenLayers/Geometry/Point.js\n * @requires OpenLayers/Geometry/MultiPoint.js\n * @requires OpenLayers/Geometry/LineString.js\n * @requires OpenLayers/Geometry/MultiLineString.js\n * @requires OpenLayers/Geometry/Polygon.js\n * @requires OpenLayers/Geometry/MultiPolygon.js\n */\n\n/**\n * Class: OpenLayers.Format.GML\n * Read/Write GML. Create a new instance with the <OpenLayers.Format.GML>\n *     constructor.  Supports the GML simple features profile.\n * \n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.GML = OpenLayers.Class(OpenLayers.Format.XML, {\n    \n    /**\n     * APIProperty: featureNS\n     * {String} Namespace used for feature attributes.  Default is\n     *     \"http://mapserver.gis.umn.edu/mapserver\".\n     */\n    featureNS: \"http://mapserver.gis.umn.edu/mapserver\",\n    \n    /**\n     * APIProperty: featurePrefix\n     * {String} Namespace alias (or prefix) for feature nodes.  Default is\n     *     \"feature\".\n     */\n    featurePrefix: \"feature\",\n    \n    /**\n     * APIProperty: featureName\n     * {String} Element name for features. Default is \"featureMember\".\n     */\n    featureName: \"featureMember\", \n    \n    /**\n     * APIProperty: layerName\n     * {String} Name of data layer. Default is \"features\".\n     */\n    layerName: \"features\",\n    \n    /**\n     * APIProperty: geometryName\n     * {String} Name of geometry element.  Defaults to \"geometry\".\n     */\n    geometryName: \"geometry\",\n    \n    /** \n     * APIProperty: collectionName\n     * {String} Name of featureCollection element.\n     */\n    collectionName: \"FeatureCollection\",\n    \n    /**\n     * APIProperty: gmlns\n     * {String} GML Namespace.\n     */\n    gmlns: \"http://www.opengis.net/gml\",\n\n    /**\n     * APIProperty: extractAttributes\n     * {Boolean} Extract attributes from GML.\n     */\n    extractAttributes: true,\n    \n    /**\n     * APIProperty: xy\n     * {Boolean} Order of the GML coordinate true:(x,y) or false:(y,x)\n     * Changing is not recommended, a new Format should be instantiated.\n     */ \n    xy: true,\n    \n    /**\n     * Constructor: OpenLayers.Format.GML\n     * Create a new parser for GML.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    initialize: function(options) {\n        // compile regular expressions once instead of every time they are used\n        this.regExes = {\n            trimSpace: (/^\\s*|\\s*$/g),\n            removeSpace: (/\\s*/g),\n            splitSpace: (/\\s+/),\n            trimComma: (/\\s*,\\s*/g)\n        };\n        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);\n    },\n\n    /**\n     * APIMethod: read\n     * Read data from a string, and return a list of features. \n     * \n     * Parameters:\n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Array(<OpenLayers.Feature.Vector>)} An array of features.\n     */\n    read: function(data) {\n        if(typeof data == \"string\") { \n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n        var featureNodes = this.getElementsByTagNameNS(data.documentElement,\n                                                       this.gmlns,\n                                                       this.featureName);\n        var features = [];\n        for(var i=0; i<featureNodes.length; i++) {\n            var feature = this.parseFeature(featureNodes[i]);\n            if(feature) {\n                features.push(feature);\n            }\n        }\n        return features;\n    },\n    \n    /**\n     * Method: parseFeature\n     * This function is the core of the GML parsing code in OpenLayers.\n     *    It creates the geometries that are then attached to the returned\n     *    feature, and calls parseAttributes() to get attribute data out.\n     *    \n     * Parameters:\n     * node - {DOMElement} A GML feature node. \n     */\n    parseFeature: function(node) {\n        // only accept one geometry per feature - look for highest \"order\"\n        var order = [\"MultiPolygon\", \"Polygon\",\n                     \"MultiLineString\", \"LineString\",\n                     \"MultiPoint\", \"Point\", \"Envelope\"];\n        // FIXME: In case we parse a feature with no geometry, but boundedBy an Envelope,\n        // this code creates a geometry derived from the Envelope. This is not correct.\n        var type, nodeList, geometry, parser;\n        for(var i=0; i<order.length; ++i) {\n            type = order[i];\n            nodeList = this.getElementsByTagNameNS(node, this.gmlns, type);\n            if(nodeList.length > 0) {\n                // only deal with first geometry of this type\n                parser = this.parseGeometry[type.toLowerCase()];\n                if(parser) {\n                    geometry = parser.apply(this, [nodeList[0]]);\n                    if (this.internalProjection && this.externalProjection) {\n                        geometry.transform(this.externalProjection, \n                                           this.internalProjection); \n                    }                       \n                } else {\n                    throw new TypeError(\"Unsupported geometry type: \" + type);\n                }\n                // stop looking for different geometry types\n                break;\n            }\n        }\n\n        var bounds;\n        var boxNodes = this.getElementsByTagNameNS(node, this.gmlns, \"Box\");\n        for(i=0; i<boxNodes.length; ++i) {\n            var boxNode = boxNodes[i];\n            var box = this.parseGeometry[\"box\"].apply(this, [boxNode]);\n            var parentNode = boxNode.parentNode;\n            var parentName = parentNode.localName ||\n                             parentNode.nodeName.split(\":\").pop();\n            if(parentName === \"boundedBy\") {\n                bounds = box;\n            } else {\n                geometry = box.toGeometry();\n            }\n        }\n        \n        // construct feature (optionally with attributes)\n        var attributes;\n        if(this.extractAttributes) {\n            attributes = this.parseAttributes(node);\n        }\n        var feature = new OpenLayers.Feature.Vector(geometry, attributes);\n        feature.bounds = bounds;\n        \n        var firstChild = this.getFirstElementChild(node);\n        feature.gml = {\n            featureType: firstChild.nodeName.split(\":\")[1],\n            featureNS: firstChild.namespaceURI,\n            featureNSPrefix: firstChild.prefix\n        };\n        feature.type = feature.gml.featureType;\n                \n        // assign fid - this can come from a \"fid\" or \"id\" attribute\n        var childNode = node.firstChild;\n        var fid;\n        while(childNode) {\n            if(childNode.nodeType == 1) {\n                fid = childNode.getAttribute(\"fid\") ||\n                      childNode.getAttribute(\"id\");\n                if(fid) {\n                    break;\n                }\n            }\n            childNode = childNode.nextSibling;\n        }\n        feature.fid = fid;\n        return feature;\n    },\n    \n    /**\n     * Property: parseGeometry\n     * Properties of this object are the functions that parse geometries based\n     *     on their type.\n     */\n    parseGeometry: {\n        \n        /**\n         * Method: parseGeometry.point\n         * Given a GML node representing a point geometry, create an OpenLayers\n         *     point geometry.\n         *\n         * Parameters:\n         * node - {DOMElement} A GML node.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry.Point>} A point geometry.\n         */\n        point: function(node) {\n            /**\n             * Three coordinate variations to consider:\n             * 1) <gml:pos>x y z</gml:pos>\n             * 2) <gml:coordinates>x, y, z</gml:coordinates>\n             * 3) <gml:coord><gml:X>x</gml:X><gml:Y>y</gml:Y></gml:coord>\n             */\n            var nodeList, coordString;\n            var coords = [];\n\n            // look for <gml:pos>\n            var nodeList = this.getElementsByTagNameNS(node, this.gmlns, \"pos\");\n            if(nodeList.length > 0) {\n                coordString = nodeList[0].firstChild.nodeValue;\n                coordString = coordString.replace(this.regExes.trimSpace, \"\");\n                coords = coordString.split(this.regExes.splitSpace);\n            }\n\n            // look for <gml:coordinates>\n            if(coords.length == 0) {\n                nodeList = this.getElementsByTagNameNS(node, this.gmlns,\n                                                       \"coordinates\");\n                if(nodeList.length > 0) {\n                    coordString = nodeList[0].firstChild.nodeValue;\n                    coordString = coordString.replace(this.regExes.removeSpace,\n                                                      \"\");\n                    coords = coordString.split(\",\");\n                }\n            }\n\n            // look for <gml:coord>\n            if(coords.length == 0) {\n                nodeList = this.getElementsByTagNameNS(node, this.gmlns,\n                                                       \"coord\");\n                if(nodeList.length > 0) {\n                    var xList = this.getElementsByTagNameNS(nodeList[0],\n                                                            this.gmlns, \"X\");\n                    var yList = this.getElementsByTagNameNS(nodeList[0],\n                                                            this.gmlns, \"Y\");\n                    if(xList.length > 0 && yList.length > 0) {\n                        coords = [xList[0].firstChild.nodeValue,\n                                  yList[0].firstChild.nodeValue];\n                    }\n                }\n            }\n                \n            // preserve third dimension\n            if(coords.length == 2) {\n                coords[2] = null;\n            }\n            \n            if (this.xy) {\n                return new OpenLayers.Geometry.Point(coords[0], coords[1],\n                                                 coords[2]);\n            }\n            else{\n                return new OpenLayers.Geometry.Point(coords[1], coords[0],\n                                                 coords[2]);\n            }\n        },\n        \n        /**\n         * Method: parseGeometry.multipoint\n         * Given a GML node representing a multipoint geometry, create an\n         *     OpenLayers multipoint geometry.\n         *\n         * Parameters:\n         * node - {DOMElement} A GML node.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry.MultiPoint>} A multipoint geometry.\n         */\n        multipoint: function(node) {\n            var nodeList = this.getElementsByTagNameNS(node, this.gmlns,\n                                                       \"Point\");\n            var components = [];\n            if(nodeList.length > 0) {\n                var point;\n                for(var i=0; i<nodeList.length; ++i) {\n                    point = this.parseGeometry.point.apply(this, [nodeList[i]]);\n                    if(point) {\n                        components.push(point);\n                    }\n                }\n            }\n            return new OpenLayers.Geometry.MultiPoint(components);\n        },\n        \n        /**\n         * Method: parseGeometry.linestring\n         * Given a GML node representing a linestring geometry, create an\n         *     OpenLayers linestring geometry.\n         *\n         * Parameters:\n         * node - {DOMElement} A GML node.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry.LineString>} A linestring geometry.\n         */\n        linestring: function(node, ring) {\n            /**\n             * Two coordinate variations to consider:\n             * 1) <gml:posList dimension=\"d\">x0 y0 z0 x1 y1 z1</gml:posList>\n             * 2) <gml:coordinates>x0, y0, z0 x1, y1, z1</gml:coordinates>\n             */\n            var nodeList, coordString;\n            var coords = [];\n            var points = [];\n\n            // look for <gml:posList>\n            nodeList = this.getElementsByTagNameNS(node, this.gmlns, \"posList\");\n            if(nodeList.length > 0) {\n                coordString = this.getChildValue(nodeList[0]);\n                coordString = coordString.replace(this.regExes.trimSpace, \"\");\n                coords = coordString.split(this.regExes.splitSpace);\n                var dim = parseInt(nodeList[0].getAttribute(\"dimension\"));\n                var j, x, y, z;\n                for(var i=0; i<coords.length/dim; ++i) {\n                    j = i * dim;\n                    x = coords[j];\n                    y = coords[j+1];\n                    z = (dim == 2) ? null : coords[j+2];\n                    if (this.xy) {\n                        points.push(new OpenLayers.Geometry.Point(x, y, z));\n                    } else {\n                        points.push(new OpenLayers.Geometry.Point(y, x, z));\n                    }\n                }\n            }\n\n            // look for <gml:coordinates>\n            if(coords.length == 0) {\n                nodeList = this.getElementsByTagNameNS(node, this.gmlns,\n                                                       \"coordinates\");\n                if(nodeList.length > 0) {\n                    coordString = this.getChildValue(nodeList[0]);\n                    coordString = coordString.replace(this.regExes.trimSpace,\n                                                      \"\");\n                    coordString = coordString.replace(this.regExes.trimComma,\n                                                      \",\");\n                    var pointList = coordString.split(this.regExes.splitSpace);\n                    for(var i=0; i<pointList.length; ++i) {\n                        coords = pointList[i].split(\",\");\n                        if(coords.length == 2) {\n                            coords[2] = null;\n                        }\n                        if (this.xy) {\n                            points.push(new OpenLayers.Geometry.Point(coords[0],\n                                                                  coords[1],\n                                                                  coords[2]));\n                        } else {\n                            points.push(new OpenLayers.Geometry.Point(coords[1],\n                                                                  coords[0],\n                                                                  coords[2]));\n                        }\n                    }\n                }\n            }\n\n            var line = null;\n            if(points.length != 0) {\n                if(ring) {\n                    line = new OpenLayers.Geometry.LinearRing(points);\n                } else {\n                    line = new OpenLayers.Geometry.LineString(points);\n                }\n            }\n            return line;\n        },\n        \n        /**\n         * Method: parseGeometry.multilinestring\n         * Given a GML node representing a multilinestring geometry, create an\n         *     OpenLayers multilinestring geometry.\n         *\n         * Parameters:\n         * node - {DOMElement} A GML node.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry.MultiLineString>} A multilinestring geometry.\n         */\n        multilinestring: function(node) {\n            var nodeList = this.getElementsByTagNameNS(node, this.gmlns,\n                                                       \"LineString\");\n            var components = [];\n            if(nodeList.length > 0) {\n                var line;\n                for(var i=0; i<nodeList.length; ++i) {\n                    line = this.parseGeometry.linestring.apply(this,\n                                                               [nodeList[i]]);\n                    if(line) {\n                        components.push(line);\n                    }\n                }\n            }\n            return new OpenLayers.Geometry.MultiLineString(components);\n        },\n        \n        /**\n         * Method: parseGeometry.polygon\n         * Given a GML node representing a polygon geometry, create an\n         *     OpenLayers polygon geometry.\n         *\n         * Parameters:\n         * node - {DOMElement} A GML node.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry.Polygon>} A polygon geometry.\n         */\n        polygon: function(node) {\n            var nodeList = this.getElementsByTagNameNS(node, this.gmlns,\n                                                       \"LinearRing\");\n            var components = [];\n            if(nodeList.length > 0) {\n                // this assumes exterior ring first, inner rings after\n                var ring;\n                for(var i=0; i<nodeList.length; ++i) {\n                    ring = this.parseGeometry.linestring.apply(this,\n                                                        [nodeList[i], true]);\n                    if(ring) {\n                        components.push(ring);\n                    }\n                }\n            }\n            return new OpenLayers.Geometry.Polygon(components);\n        },\n        \n        /**\n         * Method: parseGeometry.multipolygon\n         * Given a GML node representing a multipolygon geometry, create an\n         *     OpenLayers multipolygon geometry.\n         *\n         * Parameters:\n         * node - {DOMElement} A GML node.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry.MultiPolygon>} A multipolygon geometry.\n         */\n        multipolygon: function(node) {\n            var nodeList = this.getElementsByTagNameNS(node, this.gmlns,\n                                                       \"Polygon\");\n            var components = [];\n            if(nodeList.length > 0) {\n                var polygon;\n                for(var i=0; i<nodeList.length; ++i) {\n                    polygon = this.parseGeometry.polygon.apply(this,\n                                                               [nodeList[i]]);\n                    if(polygon) {\n                        components.push(polygon);\n                    }\n                }\n            }\n            return new OpenLayers.Geometry.MultiPolygon(components);\n        },\n        \n        envelope: function(node) {\n            var components = [];\n            var coordString;\n            var envelope;\n            \n            var lpoint = this.getElementsByTagNameNS(node, this.gmlns, \"lowerCorner\");\n            if (lpoint.length > 0) {\n                var coords = [];\n                \n                if(lpoint.length > 0) {\n                    coordString = lpoint[0].firstChild.nodeValue;\n                    coordString = coordString.replace(this.regExes.trimSpace, \"\");\n                    coords = coordString.split(this.regExes.splitSpace);\n                }\n                \n                if(coords.length == 2) {\n                    coords[2] = null;\n                }\n                if (this.xy) {\n                    var lowerPoint = new OpenLayers.Geometry.Point(coords[0], coords[1],coords[2]);\n                } else {\n                    var lowerPoint = new OpenLayers.Geometry.Point(coords[1], coords[0],coords[2]);\n                }\n            }\n            \n            var upoint = this.getElementsByTagNameNS(node, this.gmlns, \"upperCorner\");\n            if (upoint.length > 0) {\n                var coords = [];\n                \n                if(upoint.length > 0) {\n                    coordString = upoint[0].firstChild.nodeValue;\n                    coordString = coordString.replace(this.regExes.trimSpace, \"\");\n                    coords = coordString.split(this.regExes.splitSpace);\n                }\n                \n                if(coords.length == 2) {\n                    coords[2] = null;\n                }\n                if (this.xy) {\n                    var upperPoint = new OpenLayers.Geometry.Point(coords[0], coords[1],coords[2]);\n                } else {\n                    var upperPoint = new OpenLayers.Geometry.Point(coords[1], coords[0],coords[2]);\n                }\n            }\n            \n            if (lowerPoint && upperPoint) {\n                components.push(new OpenLayers.Geometry.Point(lowerPoint.x, lowerPoint.y));\n                components.push(new OpenLayers.Geometry.Point(upperPoint.x, lowerPoint.y));\n                components.push(new OpenLayers.Geometry.Point(upperPoint.x, upperPoint.y));\n                components.push(new OpenLayers.Geometry.Point(lowerPoint.x, upperPoint.y));\n                components.push(new OpenLayers.Geometry.Point(lowerPoint.x, lowerPoint.y));\n                \n                var ring = new OpenLayers.Geometry.LinearRing(components);\n                envelope = new OpenLayers.Geometry.Polygon([ring]);\n            }\n            return envelope; \n        },\n\n        /**\n         * Method: parseGeometry.box\n         * Given a GML node representing a box geometry, create an\n         *     OpenLayers.Bounds.\n         *\n         * Parameters:\n         * node - {DOMElement} A GML node.\n         *\n         * Returns:\n         * {<OpenLayers.Bounds>} A bounds representing the box.\n         */\n        box: function(node) {\n            var nodeList = this.getElementsByTagNameNS(node, this.gmlns,\n                                                   \"coordinates\");\n            var coordString;\n            var coords, beginPoint = null, endPoint = null;\n            if (nodeList.length > 0) {\n                coordString = nodeList[0].firstChild.nodeValue;\n                coords = coordString.split(\" \");\n                if (coords.length == 2) {\n                    beginPoint = coords[0].split(\",\");\n                    endPoint = coords[1].split(\",\");\n                }\n            }\n            if (beginPoint !== null && endPoint !== null) {\n                return new OpenLayers.Bounds(parseFloat(beginPoint[0]),\n                    parseFloat(beginPoint[1]),\n                    parseFloat(endPoint[0]),\n                    parseFloat(endPoint[1]) );\n            }\n        }\n        \n    },\n    \n    /**\n     * Method: parseAttributes\n     *\n     * Parameters:\n     * node - {DOMElement}\n     *\n     * Returns:\n     * {Object} An attributes object.\n     */\n    parseAttributes: function(node) {\n        var attributes = {};\n        // assume attributes are children of the first type 1 child\n        var childNode = node.firstChild;\n        var children, i, child, grandchildren, grandchild, name, value;\n        while(childNode) {\n            if(childNode.nodeType == 1) {\n                // attributes are type 1 children with one type 3 child\n                children = childNode.childNodes;\n                for(i=0; i<children.length; ++i) {\n                    child = children[i];\n                    if(child.nodeType == 1) {\n                        grandchildren = child.childNodes;\n                        if(grandchildren.length == 1) {\n                            grandchild = grandchildren[0];\n                            if(grandchild.nodeType == 3 ||\n                               grandchild.nodeType == 4) {\n                                name = (child.prefix) ?\n                                        child.nodeName.split(\":\")[1] :\n                                        child.nodeName;\n                                value = grandchild.nodeValue.replace(\n                                                this.regExes.trimSpace, \"\");\n                                attributes[name] = value;\n                            }\n                        } else {\n                            // If child has no childNodes (grandchildren),\n                            // set an attribute with null value.\n                            // e.g. <prefix:fieldname/> becomes\n                            // {fieldname: null}\n                            attributes[child.nodeName.split(\":\").pop()] = null;\n                        }\n                    }\n                }\n                break;\n            }\n            childNode = childNode.nextSibling;\n        }\n        return attributes;\n    },\n    \n    /**\n     * APIMethod: write\n     * Generate a GML document string given a list of features. \n     * \n     * Parameters:\n     * features - {Array(<OpenLayers.Feature.Vector>)} List of features to\n     *     serialize into a string.\n     *\n     * Returns:\n     * {String} A string representing the GML document.\n     */\n    write: function(features) {\n        if(!(OpenLayers.Util.isArray(features))) {\n            features = [features];\n        }\n        var gml = this.createElementNS(\"http://www.opengis.net/wfs\",\n                                       \"wfs:\" + this.collectionName);\n        for(var i=0; i<features.length; i++) {\n            gml.appendChild(this.createFeatureXML(features[i]));\n        }\n        return OpenLayers.Format.XML.prototype.write.apply(this, [gml]);\n    },\n\n    /** \n     * Method: createFeatureXML\n     * Accept an OpenLayers.Feature.Vector, and build a GML node for it.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} The feature to be built as GML.\n     *\n     * Returns:\n     * {DOMElement} A node reprensting the feature in GML.\n     */\n    createFeatureXML: function(feature) {\n        var geometry = feature.geometry;\n        var geometryNode = this.buildGeometryNode(geometry);\n        var geomContainer = this.createElementNS(this.featureNS,\n                                                 this.featurePrefix + \":\" +\n                                                 this.geometryName);\n        geomContainer.appendChild(geometryNode);\n        var featureNode = this.createElementNS(this.gmlns,\n                                               \"gml:\" + this.featureName);\n        var featureContainer = this.createElementNS(this.featureNS,\n                                                    this.featurePrefix + \":\" +\n                                                    this.layerName);\n        var fid = feature.fid || feature.id;\n        featureContainer.setAttribute(\"fid\", fid);\n        featureContainer.appendChild(geomContainer);\n        for(var attr in feature.attributes) {\n            var attrText = this.createTextNode(feature.attributes[attr]); \n            var nodename = attr.substring(attr.lastIndexOf(\":\") + 1);\n            var attrContainer = this.createElementNS(this.featureNS,\n                                                     this.featurePrefix + \":\" +\n                                                     nodename);\n            attrContainer.appendChild(attrText);\n            featureContainer.appendChild(attrContainer);\n        }    \n        featureNode.appendChild(featureContainer);\n        return featureNode;\n    },\n    \n    /**\n     * APIMethod: buildGeometryNode\n     */\n    buildGeometryNode: function(geometry) {\n        if (this.externalProjection && this.internalProjection) {\n            geometry = geometry.clone();\n            geometry.transform(this.internalProjection, \n                               this.externalProjection);\n        }    \n        var className = geometry.CLASS_NAME;\n        var type = className.substring(className.lastIndexOf(\".\") + 1);\n        var builder = this.buildGeometry[type.toLowerCase()];\n        return builder.apply(this, [geometry]);\n    },\n\n    /**\n     * Property: buildGeometry\n     * Object containing methods to do the actual geometry node building\n     *     based on geometry type.\n     */\n    buildGeometry: {\n        // TBD retrieve the srs from layer\n        // srsName is non-standard, so not including it until it's right.\n        // gml.setAttribute(\"srsName\",\n        //                  \"http://www.opengis.net/gml/srs/epsg.xml#4326\");\n\n        /**\n         * Method: buildGeometry.point\n         * Given an OpenLayers point geometry, create a GML point.\n         *\n         * Parameters:\n         * geometry - {<OpenLayers.Geometry.Point>} A point geometry.\n         *\n         * Returns:\n         * {DOMElement} A GML point node.\n         */\n        point: function(geometry) {\n            var gml = this.createElementNS(this.gmlns, \"gml:Point\");\n            gml.appendChild(this.buildCoordinatesNode(geometry));\n            return gml;\n        },\n        \n        /**\n         * Method: buildGeometry.multipoint\n         * Given an OpenLayers multipoint geometry, create a GML multipoint.\n         *\n         * Parameters:\n         * geometry - {<OpenLayers.Geometry.MultiPoint>} A multipoint geometry.\n         *\n         * Returns:\n         * {DOMElement} A GML multipoint node.\n         */\n        multipoint: function(geometry) {\n            var gml = this.createElementNS(this.gmlns, \"gml:MultiPoint\");\n            var points = geometry.components;\n            var pointMember, pointGeom;\n            for(var i=0; i<points.length; i++) { \n                pointMember = this.createElementNS(this.gmlns,\n                                                   \"gml:pointMember\");\n                pointGeom = this.buildGeometry.point.apply(this,\n                                                               [points[i]]);\n                pointMember.appendChild(pointGeom);\n                gml.appendChild(pointMember);\n            }\n            return gml;            \n        },\n        \n        /**\n         * Method: buildGeometry.linestring\n         * Given an OpenLayers linestring geometry, create a GML linestring.\n         *\n         * Parameters:\n         * geometry - {<OpenLayers.Geometry.LineString>} A linestring geometry.\n         *\n         * Returns:\n         * {DOMElement} A GML linestring node.\n         */\n        linestring: function(geometry) {\n            var gml = this.createElementNS(this.gmlns, \"gml:LineString\");\n            gml.appendChild(this.buildCoordinatesNode(geometry));\n            return gml;\n        },\n        \n        /**\n         * Method: buildGeometry.multilinestring\n         * Given an OpenLayers multilinestring geometry, create a GML\n         *     multilinestring.\n         *\n         * Parameters:\n         * geometry - {<OpenLayers.Geometry.MultiLineString>} A multilinestring\n         *     geometry.\n         *\n         * Returns:\n         * {DOMElement} A GML multilinestring node.\n         */\n        multilinestring: function(geometry) {\n            var gml = this.createElementNS(this.gmlns, \"gml:MultiLineString\");\n            var lines = geometry.components;\n            var lineMember, lineGeom;\n            for(var i=0; i<lines.length; ++i) {\n                lineMember = this.createElementNS(this.gmlns,\n                                                  \"gml:lineStringMember\");\n                lineGeom = this.buildGeometry.linestring.apply(this,\n                                                                   [lines[i]]);\n                lineMember.appendChild(lineGeom);\n                gml.appendChild(lineMember);\n            }\n            return gml;\n        },\n        \n        /**\n         * Method: buildGeometry.linearring\n         * Given an OpenLayers linearring geometry, create a GML linearring.\n         *\n         * Parameters:\n         * geometry - {<OpenLayers.Geometry.LinearRing>} A linearring geometry.\n         *\n         * Returns:\n         * {DOMElement} A GML linearring node.\n         */\n        linearring: function(geometry) {\n            var gml = this.createElementNS(this.gmlns, \"gml:LinearRing\");\n            gml.appendChild(this.buildCoordinatesNode(geometry));\n            return gml;\n        },\n        \n        /**\n         * Method: buildGeometry.polygon\n         * Given an OpenLayers polygon geometry, create a GML polygon.\n         *\n         * Parameters:\n         * geometry - {<OpenLayers.Geometry.Polygon>} A polygon geometry.\n         *\n         * Returns:\n         * {DOMElement} A GML polygon node.\n         */\n        polygon: function(geometry) {\n            var gml = this.createElementNS(this.gmlns, \"gml:Polygon\");\n            var rings = geometry.components;\n            var ringMember, ringGeom, type;\n            for(var i=0; i<rings.length; ++i) {\n                type = (i==0) ? \"outerBoundaryIs\" : \"innerBoundaryIs\";\n                ringMember = this.createElementNS(this.gmlns,\n                                                  \"gml:\" + type);\n                ringGeom = this.buildGeometry.linearring.apply(this,\n                                                                   [rings[i]]);\n                ringMember.appendChild(ringGeom);\n                gml.appendChild(ringMember);\n            }\n            return gml;\n        },\n        \n        /**\n         * Method: buildGeometry.multipolygon\n         * Given an OpenLayers multipolygon geometry, create a GML multipolygon.\n         *\n         * Parameters:\n         * geometry - {<OpenLayers.Geometry.MultiPolygon>} A multipolygon\n         *     geometry.\n         *\n         * Returns:\n         * {DOMElement} A GML multipolygon node.\n         */\n        multipolygon: function(geometry) {\n            var gml = this.createElementNS(this.gmlns, \"gml:MultiPolygon\");\n            var polys = geometry.components;\n            var polyMember, polyGeom;\n            for(var i=0; i<polys.length; ++i) {\n                polyMember = this.createElementNS(this.gmlns,\n                                                  \"gml:polygonMember\");\n                polyGeom = this.buildGeometry.polygon.apply(this,\n                                                                [polys[i]]);\n                polyMember.appendChild(polyGeom);\n                gml.appendChild(polyMember);\n            }\n            return gml;\n\n        },\n \n        /**\n         * Method: buildGeometry.bounds\n         * Given an OpenLayers bounds, create a GML box.\n         *\n         * Parameters:\n         * bounds - {<OpenLayers.Geometry.Bounds>} A bounds object.\n         *\n         * Returns:\n         * {DOMElement} A GML box node.\n         */\n        bounds: function(bounds) {\n            var gml = this.createElementNS(this.gmlns, \"gml:Box\");\n            gml.appendChild(this.buildCoordinatesNode(bounds));\n            return gml;\n        }\n    },\n\n    /**\n     * Method: buildCoordinates\n     * builds the coordinates XmlNode\n     * (code)\n     * <gml:coordinates decimal=\".\" cs=\",\" ts=\" \">...</gml:coordinates>\n     * (end)\n     *\n     * Parameters: \n     * geometry - {<OpenLayers.Geometry>} \n     *\n     * Returns:\n     * {XmlNode} created xmlNode\n     */\n    buildCoordinatesNode: function(geometry) {\n        var coordinatesNode = this.createElementNS(this.gmlns,\n                                                   \"gml:coordinates\");\n        coordinatesNode.setAttribute(\"decimal\", \".\");\n        coordinatesNode.setAttribute(\"cs\", \",\");\n        coordinatesNode.setAttribute(\"ts\", \" \");\n\n        var parts = [];\n\n        if(geometry instanceof OpenLayers.Bounds){\n            parts.push(geometry.left + \",\" + geometry.bottom);\n            parts.push(geometry.right + \",\" + geometry.top);\n        } else {\n            var points = (geometry.components) ? geometry.components : [geometry];\n            for(var i=0; i<points.length; i++) {\n                parts.push(points[i].x + \",\" + points[i].y);                \n            }            \n        }\n\n        var txtNode = this.createTextNode(parts.join(\" \"));\n        coordinatesNode.appendChild(txtNode);\n        \n        return coordinatesNode;\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.GML\" \n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML.js\n * @requires OpenLayers/Format/GML.js\n */\n\n/**\n * Though required in the full build, if the GML format is excluded, we set\n * the namespace here.\n */\nif(!OpenLayers.Format.GML) {\n    OpenLayers.Format.GML = {};\n}\n\n/**\n * Class: OpenLayers.Format.GML.Base\n * Superclass for GML parsers.\n *\n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.GML.Base = OpenLayers.Class(OpenLayers.Format.XML, {\n\n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        gml: \"http://www.opengis.net/gml\",\n        xlink: \"http://www.w3.org/1999/xlink\",\n        xsi: \"http://www.w3.org/2001/XMLSchema-instance\",\n        wfs: \"http://www.opengis.net/wfs\" // this is a convenience for reading wfs:FeatureCollection\n    },\n\n    /**\n     * Property: defaultPrefix\n     */\n    defaultPrefix: \"gml\",\n\n    /**\n     * Property: schemaLocation\n     * {String} Schema location for a particular minor version.\n     */\n    schemaLocation: null,\n\n    /**\n     * APIProperty: featureType\n     * {Array(String) or String} The local (without prefix) feature typeName(s).\n     */\n    featureType: null,\n\n    /**\n     * APIProperty: featureNS\n     * {String} The feature namespace.  Must be set in the options at\n     *     construction.\n     */\n    featureNS: null,\n\n    /**\n     * APIProperty: featurePrefix\n     * {String} Namespace alias (or prefix) for feature nodes.  Default is\n     *     \"feature\".\n     */\n    featurePrefix: \"feature\",\n\n    /**\n     * APIProperty: geometry\n     * {String} Name of geometry element.  Defaults to \"geometry\". If null, it\n     * will be set on <read> when the first geometry is parsed.\n     */\n    geometryName: \"geometry\",\n\n    /**\n     * APIProperty: extractAttributes\n     * {Boolean} Extract attributes from GML.  Default is true.\n     */\n    extractAttributes: true,\n\n    /**\n     * APIProperty: srsName\n     * {String} URI for spatial reference system.  This is optional for\n     *     single part geometries and mandatory for collections and multis.\n     *     If set, the srsName attribute will be written for all geometries.\n     *     Default is null.\n     */\n    srsName: null,\n\n    /**\n     * APIProperty: xy\n     * {Boolean} Order of the GML coordinate true:(x,y) or false:(y,x)\n     * Changing is not recommended, a new Format should be instantiated.\n     */\n    xy: true,\n\n    /**\n     * Property: geometryTypes\n     * {Object} Maps OpenLayers geometry class names to GML element names.\n     *     Use <setGeometryTypes> before accessing this property.\n     */\n    geometryTypes: null,\n\n    /**\n     * Property: singleFeatureType\n     * {Boolean} True if there is only 1 featureType, and not an array\n     *     of featuretypes.\n     */\n    singleFeatureType: null,\n\n    /**\n     * Property: autoConfig\n     * {Boolean} Indicates if the format was configured without a <featureNS>,\n     * but auto-configured <featureNS> and <featureType> during read.\n     * Subclasses making use of <featureType> auto-configuration should make\n     * the first call to the <readNode> method (usually in the read method)\n     * with true as 3rd argument, so the auto-configured featureType can be\n     * reset and the format can be reused for subsequent reads with data from\n     * different featureTypes. Set to false after read if you want to keep the\n     * auto-configured values.\n     */\n\n    /**\n     * Property: regExes\n     * Compiled regular expressions for manipulating strings.\n     */\n    regExes: {\n        trimSpace: (/^\\s*|\\s*$/g),\n        removeSpace: (/\\s*/g),\n        splitSpace: (/\\s+/),\n        trimComma: (/\\s*,\\s*/g),\n        featureMember: (/^(.*:)?featureMembers?$/)\n    },\n\n    /**\n     * Constructor: OpenLayers.Format.GML.Base\n     * Instances of this class are not created directly.  Use the\n     *     <OpenLayers.Format.GML.v2> or <OpenLayers.Format.GML.v3> constructor\n     *     instead.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     *\n     * Valid options properties:\n     * featureType - {Array(String) or String} Local (without prefix) feature\n     *     typeName(s) (required for write).\n     * featureNS - {String} Feature namespace (required for write).\n     * geometryName - {String} Geometry element name (required for write).\n     */\n    initialize: function(options) {\n        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);\n        this.setGeometryTypes();\n        if(options && options.featureNS) {\n            this.setNamespace(this.featurePrefix, options.featureNS);\n        }\n        this.singleFeatureType = !options || (typeof options.featureType === \"string\");\n    },\n\n    /**\n     * Method: read\n     *\n     * Parameters:\n     * data - {DOMElement} A gml:featureMember element, a gml:featureMembers\n     *     element, or an element containing either of the above at any level.\n     *\n     * Returns:\n     * {Array(<OpenLayers.Feature.Vector>)} An array of features.\n     */\n    read: function(data) {\n        if(typeof data == \"string\") {\n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n        if(data && data.nodeType == 9) {\n            data = data.documentElement;\n        }\n        var features = [];\n        this.readNode(data, {features: features}, true);\n        if(features.length == 0) {\n            // look for gml:featureMember elements\n            var elements = this.getElementsByTagNameNS(\n                data, this.namespaces.gml, \"featureMember\"\n            );\n            if(elements.length) {\n                for(var i=0, len=elements.length; i<len; ++i) {\n                    this.readNode(elements[i], {features: features}, true);\n                }\n            } else {\n                // look for gml:featureMembers elements (this is v3, but does no harm here)\n                var elements = this.getElementsByTagNameNS(\n                    data, this.namespaces.gml, \"featureMembers\"\n                );\n                if(elements.length) {\n                    // there can be only one\n                    this.readNode(elements[0], {features: features}, true);\n                }\n            }\n        }\n        return features;\n    },\n\n    /**\n     * Method: readNode\n     * Shorthand for applying one of the named readers given the node\n     *     namespace and local name.  Readers take two args (node, obj) and\n     *     generally extend or modify the second.\n     *\n     * Parameters:\n     * node - {DOMElement} The node to be read (required).\n     * obj - {Object} The object to be modified (optional).\n     * first - {Boolean} Should be set to true for the first node read. This\n     *     is usually the readNode call in the read method. Without this being\n     *     set, auto-configured properties will stick on subsequent reads.\n     *\n     * Returns:\n     * {Object} The input object, modified (or a new one if none was provided).\n     */\n    readNode: function(node, obj, first) {\n        // on subsequent calls of format.read(), we want to reset auto-\n        // configured properties and auto-configure again.\n        if (first === true && this.autoConfig === true) {\n            this.featureType = null;\n            delete this.namespaceAlias[this.featureNS];\n            delete this.namespaces[\"feature\"];\n            this.featureNS = null;\n        }\n        // featureType auto-configuration\n        if (!this.featureNS && (!(node.prefix in this.namespaces) &&\n                node.parentNode.namespaceURI == this.namespaces[\"gml\"] &&\n                this.regExes.featureMember.test(node.parentNode.nodeName))) {\n            this.featureType = node.nodeName.split(\":\").pop();\n            this.setNamespace(\"feature\", node.namespaceURI);\n            this.featureNS = node.namespaceURI;\n            this.autoConfig = true;\n        }\n        return OpenLayers.Format.XML.prototype.readNode.apply(this, [node, obj]);\n    },\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"gml\": {\n            \"_inherit\": function(node, obj, container) {\n                // To be implemented by version specific parsers\n            },\n            \"featureMember\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"featureMembers\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"name\": function(node, obj) {\n                obj.name = this.getChildValue(node);\n            },\n            \"boundedBy\": function(node, obj) {\n                var container = {};\n                this.readChildNodes(node, container);\n                if(container.components && container.components.length > 0) {\n                    obj.bounds = container.components[0];\n                }\n            },\n            \"Point\": function(node, container) {\n                var obj = {points: []};\n                this.readChildNodes(node, obj);\n                if(!container.components) {\n                    container.components = [];\n                }\n                container.components.push(obj.points[0]);\n            },\n            \"coordinates\": function(node, obj) {\n                var str = this.getChildValue(node).replace(\n                    this.regExes.trimSpace, \"\"\n                );\n                str = str.replace(this.regExes.trimComma, \",\");\n                var pointList = str.split(this.regExes.splitSpace);\n                var coords;\n                var numPoints = pointList.length;\n                var points = new Array(numPoints);\n                for(var i=0; i<numPoints; ++i) {\n                    coords = pointList[i].split(\",\");\n                    if (this.xy) {\n                        points[i] = new OpenLayers.Geometry.Point(\n                            coords[0], coords[1], coords[2]\n                        );\n                    } else {\n                        points[i] = new OpenLayers.Geometry.Point(\n                            coords[1], coords[0], coords[2]\n                        );\n                    }\n                }\n                obj.points = points;\n            },\n            \"coord\": function(node, obj) {\n                var coord = {};\n                this.readChildNodes(node, coord);\n                if(!obj.points) {\n                    obj.points = [];\n                }\n                obj.points.push(new OpenLayers.Geometry.Point(\n                    coord.x, coord.y, coord.z\n                ));\n            },\n            \"X\": function(node, coord) {\n                coord.x = this.getChildValue(node);\n            },\n            \"Y\": function(node, coord) {\n                coord.y = this.getChildValue(node);\n            },\n            \"Z\": function(node, coord) {\n                coord.z = this.getChildValue(node);\n            },\n            \"MultiPoint\": function(node, container) {\n                var obj = {components: []};\n                this.readers.gml._inherit.apply(this, [node, obj, container]);\n                this.readChildNodes(node, obj);\n                container.components = [\n                    new OpenLayers.Geometry.MultiPoint(obj.components)\n                ];\n            },\n            \"pointMember\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"LineString\": function(node, container) {\n                var obj = {};\n                this.readers.gml._inherit.apply(this, [node, obj, container]);\n                this.readChildNodes(node, obj);\n                if(!container.components) {\n                    container.components = [];\n                }\n                container.components.push(\n                    new OpenLayers.Geometry.LineString(obj.points)\n                );\n            },\n            \"MultiLineString\": function(node, container) {\n                var obj = {components: []};\n                this.readers.gml._inherit.apply(this, [node, obj, container]);\n                this.readChildNodes(node, obj);\n                container.components = [\n                    new OpenLayers.Geometry.MultiLineString(obj.components)\n                ];\n            },\n            \"lineStringMember\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"Polygon\": function(node, container) {\n                var obj = {outer: null, inner: []};\n                this.readers.gml._inherit.apply(this, [node, obj, container]);\n                this.readChildNodes(node, obj);\n                obj.inner.unshift(obj.outer);\n                if(!container.components) {\n                    container.components = [];\n                }\n                container.components.push(\n                    new OpenLayers.Geometry.Polygon(obj.inner)\n                );\n            },\n            \"LinearRing\": function(node, obj) {\n                var container = {};\n                this.readers.gml._inherit.apply(this, [node, container]);\n                this.readChildNodes(node, container);\n                obj.components = [new OpenLayers.Geometry.LinearRing(\n                    container.points\n                )];\n            },\n            \"MultiPolygon\": function(node, container) {\n                var obj = {components: []};\n                this.readers.gml._inherit.apply(this, [node, obj, container]);\n                this.readChildNodes(node, obj);\n                container.components = [\n                    new OpenLayers.Geometry.MultiPolygon(obj.components)\n                ];\n            },\n            \"polygonMember\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"GeometryCollection\": function(node, container) {\n                var obj = {components: []};\n                this.readers.gml._inherit.apply(this, [node, obj, container]);\n                this.readChildNodes(node, obj);\n                container.components = [\n                    new OpenLayers.Geometry.Collection(obj.components)\n                ];\n            },\n            \"geometryMember\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            }\n        },\n        \"feature\": {\n            \"*\": function(node, obj) {\n                // The node can either be named like the featureType, or it\n                // can be a child of the feature:featureType.  Children can be\n                // geometry or attributes.\n                var name;\n                var local = node.localName || node.nodeName.split(\":\").pop();\n                // Since an attribute can have the same name as the feature type\n                // we only want to read the node as a feature if the parent\n                // node can have feature nodes as children.  In this case, the\n                // obj.features property is set.\n                if (obj.features) {\n                    if (!this.singleFeatureType &&\n                        (OpenLayers.Util.indexOf(this.featureType, local) !== -1)) {\n                        name = \"_typeName\";\n                    } else if(local === this.featureType) {\n                        name = \"_typeName\";\n                    }\n                } else {\n                    // Assume attribute elements have one child node and that the child\n                    // is a text node.  Otherwise assume it is a geometry node.\n                    if(node.childNodes.length == 0 ||\n                       (node.childNodes.length == 1 && node.firstChild.nodeType == 3)) {\n                        if(this.extractAttributes) {\n                            name = \"_attribute\";\n                        }\n                    } else {\n                        name = \"_geometry\";\n                    }\n                }\n                if(name) {\n                    this.readers.feature[name].apply(this, [node, obj]);\n                }\n            },\n            \"_typeName\": function(node, obj) {\n                var container = {components: [], attributes: {}};\n                this.readChildNodes(node, container);\n                // look for common gml namespaced elements\n                if(container.name) {\n                    container.attributes.name = container.name;\n                }\n                var feature = new OpenLayers.Feature.Vector(\n                    container.components[0], container.attributes\n                );\n                if (!this.singleFeatureType) {\n                    feature.type = node.nodeName.split(\":\").pop();\n                    feature.namespace = node.namespaceURI;\n                }\n                var fid = node.getAttribute(\"fid\") ||\n                    this.getAttributeNS(node, this.namespaces[\"gml\"], \"id\");\n                if(fid) {\n                    feature.fid = fid;\n                }\n                if(this.internalProjection && this.externalProjection &&\n                   feature.geometry) {\n                    feature.geometry.transform(\n                        this.externalProjection, this.internalProjection\n                    );\n                }\n                if(container.bounds) {\n                    feature.bounds = container.bounds;\n                }\n                obj.features.push(feature);\n            },\n            \"_geometry\": function(node, obj) {\n                if (!this.geometryName) {\n                    this.geometryName = node.nodeName.split(\":\").pop();\n                }\n                this.readChildNodes(node, obj);\n            },\n            \"_attribute\": function(node, obj) {\n                var local = node.localName || node.nodeName.split(\":\").pop();\n                var value = this.getChildValue(node);\n                obj.attributes[local] = value;\n            }\n        },\n        \"wfs\": {\n            \"FeatureCollection\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            }\n        }\n    },\n\n    /**\n     * Method: write\n     *\n     * Parameters:\n     * features - {Array(<OpenLayers.Feature.Vector>) | OpenLayers.Feature.Vector}\n     *     An array of features or a single feature.\n     *\n     * Returns:\n     * {String} Given an array of features, a doc with a gml:featureMembers\n     *     element will be returned.  Given a single feature, a doc with a\n     *     gml:featureMember element will be returned.\n     */\n    write: function(features) {\n        var name;\n        if(OpenLayers.Util.isArray(features)) {\n            name = \"featureMembers\";\n        } else {\n            name = \"featureMember\";\n        }\n        var root = this.writeNode(\"gml:\" + name, features);\n        this.setAttributeNS(\n            root, this.namespaces[\"xsi\"],\n            \"xsi:schemaLocation\", this.schemaLocation\n        );\n\n        return OpenLayers.Format.XML.prototype.write.apply(this, [root]);\n    },\n\n    /**\n     * Property: writers\n     * As a compliment to the readers property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: {\n        \"gml\": {\n            \"featureMember\": function(feature) {\n                var node = this.createElementNSPlus(\"gml:featureMember\");\n                this.writeNode(\"feature:_typeName\", feature, node);\n                return node;\n            },\n            \"MultiPoint\": function(geometry) {\n                var node = this.createElementNSPlus(\"gml:MultiPoint\");\n                var components = geometry.components || [geometry];\n                for(var i=0, ii=components.length; i<ii; ++i) {\n                    this.writeNode(\"pointMember\", components[i], node);\n                }\n                return node;\n            },\n            \"pointMember\": function(geometry) {\n                var node = this.createElementNSPlus(\"gml:pointMember\");\n                this.writeNode(\"Point\", geometry, node);\n                return node;\n            },\n            \"MultiLineString\": function(geometry) {\n                var node = this.createElementNSPlus(\"gml:MultiLineString\");\n                var components = geometry.components || [geometry];\n                for(var i=0, ii=components.length; i<ii; ++i) {\n                    this.writeNode(\"lineStringMember\", components[i], node);\n                }\n                return node;\n            },\n            \"lineStringMember\": function(geometry) {\n                var node = this.createElementNSPlus(\"gml:lineStringMember\");\n                this.writeNode(\"LineString\", geometry, node);\n                return node;\n            },\n            \"MultiPolygon\": function(geometry) {\n                var node = this.createElementNSPlus(\"gml:MultiPolygon\");\n                var components = geometry.components || [geometry];\n                for(var i=0, ii=components.length; i<ii; ++i) {\n                    this.writeNode(\n                        \"polygonMember\", components[i], node\n                    );\n                }\n                return node;\n            },\n            \"polygonMember\": function(geometry) {\n                var node = this.createElementNSPlus(\"gml:polygonMember\");\n                this.writeNode(\"Polygon\", geometry, node);\n                return node;\n            },\n            \"GeometryCollection\": function(geometry) {\n                var node = this.createElementNSPlus(\"gml:GeometryCollection\");\n                for(var i=0, len=geometry.components.length; i<len; ++i) {\n                    this.writeNode(\"geometryMember\", geometry.components[i], node);\n                }\n                return node;\n            },\n            \"geometryMember\": function(geometry) {\n                var node = this.createElementNSPlus(\"gml:geometryMember\");\n                var child = this.writeNode(\"feature:_geometry\", geometry);\n                node.appendChild(child.firstChild);\n                return node;\n            }\n        },\n        \"feature\": {\n            \"_typeName\": function(feature) {\n                var node = this.createElementNSPlus(this.featurePrefix + \":\" + this.featureType, {\n                    attributes: {fid: feature.fid}\n                });\n                if(feature.geometry) {\n                    this.writeNode(\"feature:_geometry\", feature.geometry, node);\n                }\n                for(var name in feature.attributes) {\n                    var value = feature.attributes[name];\n                    if(value != null) {\n                        this.writeNode(\n                            \"feature:_attribute\",\n                            {name: name, value: value}, node\n                        );\n                    }\n                }\n                return node;\n            },\n            \"_geometry\": function(geometry) {\n                if(this.externalProjection && this.internalProjection) {\n                    geometry = geometry.clone().transform(\n                        this.internalProjection, this.externalProjection\n                    );\n                }\n                var node = this.createElementNSPlus(\n                    this.featurePrefix + \":\" + this.geometryName\n                );\n                var type = this.geometryTypes[geometry.CLASS_NAME];\n                var child = this.writeNode(\"gml:\" + type, geometry, node);\n                if(this.srsName) {\n                    child.setAttribute(\"srsName\", this.srsName);\n                }\n                return node;\n            },\n            \"_attribute\": function(obj) {\n                return this.createElementNSPlus(this.featurePrefix + \":\" + obj.name, {\n                    value: obj.value\n                });\n            }\n        },\n        \"wfs\": {\n            \"FeatureCollection\": function(features) {\n                /**\n                 * This is only here because GML2 only describes abstract\n                 * feature collections.  Typically, you would not be using\n                 * the GML format to write wfs elements.  This just provides\n                 * some way to write out lists of features.  GML3 defines the\n                 * featureMembers element, so that is used by default instead.\n                 */\n                var node = this.createElementNSPlus(\"wfs:FeatureCollection\");\n                for(var i=0, len=features.length; i<len; ++i) {\n                    this.writeNode(\"gml:featureMember\", features[i], node);\n                }\n                return node;\n            }\n        }\n    },\n\n    /**\n     * Method: setGeometryTypes\n     * Sets the <geometryTypes> mapping.\n     */\n    setGeometryTypes: function() {\n        this.geometryTypes = {\n            \"OpenLayers.Geometry.Point\": \"Point\",\n            \"OpenLayers.Geometry.MultiPoint\": \"MultiPoint\",\n            \"OpenLayers.Geometry.LineString\": \"LineString\",\n            \"OpenLayers.Geometry.MultiLineString\": \"MultiLineString\",\n            \"OpenLayers.Geometry.Polygon\": \"Polygon\",\n            \"OpenLayers.Geometry.MultiPolygon\": \"MultiPolygon\",\n            \"OpenLayers.Geometry.Collection\": \"GeometryCollection\"\n        };\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.GML.Base\"\n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/GML/Base.js\n */\n\n/**\n * Class: OpenLayers.Format.GML.v2\n * Parses GML version 2.\n *\n * Inherits from:\n *  - <OpenLayers.Format.GML.Base>\n */\nOpenLayers.Format.GML.v2 = OpenLayers.Class(OpenLayers.Format.GML.Base, {\n    \n    /**\n     * Property: schemaLocation\n     * {String} Schema location for a particular minor version.\n     */\n    schemaLocation: \"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd\",\n\n    /**\n     * Constructor: OpenLayers.Format.GML.v2\n     * Create a parser for GML v2.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     *\n     * Valid options properties:\n     * featureType - {String} Local (without prefix) feature typeName (required).\n     * featureNS - {String} Feature namespace (required).\n     * geometryName - {String} Geometry element name.\n     */\n    initialize: function(options) {\n        OpenLayers.Format.GML.Base.prototype.initialize.apply(this, [options]);\n    },\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"gml\": OpenLayers.Util.applyDefaults({\n            \"outerBoundaryIs\": function(node, container) {\n                var obj = {};\n                this.readChildNodes(node, obj);\n                container.outer = obj.components[0];\n            },\n            \"innerBoundaryIs\": function(node, container) {\n                var obj = {};\n                this.readChildNodes(node, obj);\n                container.inner.push(obj.components[0]);\n            },\n            \"Box\": function(node, container) {\n                var obj = {};\n                this.readChildNodes(node, obj);\n                if(!container.components) {\n                    container.components = [];\n                }\n                var min = obj.points[0];\n                var max = obj.points[1];\n                container.components.push(\n                    new OpenLayers.Bounds(min.x, min.y, max.x, max.y)\n                );\n            }\n        }, OpenLayers.Format.GML.Base.prototype.readers[\"gml\"]),\n        \"feature\": OpenLayers.Format.GML.Base.prototype.readers[\"feature\"],\n        \"wfs\": OpenLayers.Format.GML.Base.prototype.readers[\"wfs\"]\n    },\n\n    /**\n     * Method: write\n     *\n     * Parameters:\n     * features - {Array(<OpenLayers.Feature.Vector>) | OpenLayers.Feature.Vector}\n     *     An array of features or a single feature.\n     *\n     * Returns:\n     * {String} Given an array of features, a doc with a gml:featureMembers\n     *     element will be returned.  Given a single feature, a doc with a\n     *     gml:featureMember element will be returned.\n     */\n    write: function(features) {\n        var name;\n        if(OpenLayers.Util.isArray(features)) {\n            // GML2 only has abstract feature collections\n            // wfs provides a feature collection from a well-known schema\n            name = \"wfs:FeatureCollection\";\n        } else {\n            name = \"gml:featureMember\";\n        }\n        var root = this.writeNode(name, features);\n        this.setAttributeNS(\n            root, this.namespaces[\"xsi\"],\n            \"xsi:schemaLocation\", this.schemaLocation\n        );\n\n        return OpenLayers.Format.XML.prototype.write.apply(this, [root]);\n    },\n\n    /**\n     * Property: writers\n     * As a compliment to the readers property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: {\n        \"gml\": OpenLayers.Util.applyDefaults({\n            \"Point\": function(geometry) {\n                var node = this.createElementNSPlus(\"gml:Point\");\n                this.writeNode(\"coordinates\", [geometry], node);\n                return node;\n            },\n            \"coordinates\": function(points) {\n                var numPoints = points.length;\n                var parts = new Array(numPoints);\n                var point;\n                for(var i=0; i<numPoints; ++i) {\n                    point = points[i];\n                    if(this.xy) {\n                        parts[i] = point.x + \",\" + point.y;\n                    } else {\n                        parts[i] = point.y + \",\" + point.x;\n                    }\n                    if(point.z != undefined) { // allow null or undefined\n                        parts[i] += \",\" + point.z;\n                    }\n                }\n                return this.createElementNSPlus(\"gml:coordinates\", {\n                    attributes: {\n                        decimal: \".\", cs: \",\", ts: \" \"\n                    },\n                    value: (numPoints == 1) ? parts[0] : parts.join(\" \")\n                });\n            },\n            \"LineString\": function(geometry) {\n                var node = this.createElementNSPlus(\"gml:LineString\");\n                this.writeNode(\"coordinates\", geometry.components, node);\n                return node;\n            },\n            \"Polygon\": function(geometry) {\n                var node = this.createElementNSPlus(\"gml:Polygon\");\n                this.writeNode(\"outerBoundaryIs\", geometry.components[0], node);\n                for(var i=1; i<geometry.components.length; ++i) {\n                    this.writeNode(\n                        \"innerBoundaryIs\", geometry.components[i], node\n                    );\n                }\n                return node;\n            },\n            \"outerBoundaryIs\": function(ring) {\n                var node = this.createElementNSPlus(\"gml:outerBoundaryIs\");\n                this.writeNode(\"LinearRing\", ring, node);\n                return node;\n            },\n            \"innerBoundaryIs\": function(ring) {\n                var node = this.createElementNSPlus(\"gml:innerBoundaryIs\");\n                this.writeNode(\"LinearRing\", ring, node);\n                return node;\n            },\n            \"LinearRing\": function(ring) {\n                var node = this.createElementNSPlus(\"gml:LinearRing\");\n                this.writeNode(\"coordinates\", ring.components, node);\n                return node;\n            },\n            \"Box\": function(bounds) {\n                var node = this.createElementNSPlus(\"gml:Box\");\n                this.writeNode(\"coordinates\", [\n                    {x: bounds.left, y: bounds.bottom},\n                    {x: bounds.right, y: bounds.top}\n                ], node);\n                // srsName attribute is optional for gml:Box\n                if(this.srsName) {\n                    node.setAttribute(\"srsName\", this.srsName);\n                }\n                return node;\n            }\n        }, OpenLayers.Format.GML.Base.prototype.writers[\"gml\"]),\n        \"feature\": OpenLayers.Format.GML.Base.prototype.writers[\"feature\"],\n        \"wfs\": OpenLayers.Format.GML.Base.prototype.writers[\"wfs\"]\n    },\n    \n    CLASS_NAME: \"OpenLayers.Format.GML.v2\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/GML/Base.js\n */\n\n/**\n * Class: OpenLayers.Format.GML.v3\n * Parses GML version 3.\n *\n * Inherits from:\n *  - <OpenLayers.Format.GML.Base>\n */\nOpenLayers.Format.GML.v3 = OpenLayers.Class(OpenLayers.Format.GML.Base, {\n    \n    /**\n     * Property: schemaLocation\n     * {String} Schema location for a particular minor version.  The writers\n     *     conform with the Simple Features Profile for GML.\n     */\n    schemaLocation: \"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd\",\n\n    /**\n     * Property: curve\n     * {Boolean} Write gml:Curve instead of gml:LineString elements.  This also\n     *     affects the elements in multi-part geometries.  Default is false.\n     *     To write gml:Curve elements instead of gml:LineString, set curve\n     *     to true in the options to the contstructor (cannot be changed after\n     *     instantiation).\n     */\n    curve: false,\n    \n    /**\n     * Property: multiCurve\n     * {Boolean} Write gml:MultiCurve instead of gml:MultiLineString.  Since\n     *     the latter is deprecated in GML 3, the default is true.  To write\n     *     gml:MultiLineString instead of gml:MultiCurve, set multiCurve to\n     *     false in the options to the constructor (cannot be changed after\n     *     instantiation).\n     */\n    multiCurve: true,\n    \n    /**\n     * Property: surface\n     * {Boolean} Write gml:Surface instead of gml:Polygon elements.  This also\n     *     affects the elements in multi-part geometries.  Default is false.\n     *     To write gml:Surface elements instead of gml:Polygon, set surface\n     *     to true in the options to the contstructor (cannot be changed after\n     *     instantiation).\n     */\n    surface: false,\n\n    /**\n     * Property: multiSurface\n     * {Boolean} Write gml:multiSurface instead of gml:MultiPolygon.  Since\n     *     the latter is deprecated in GML 3, the default is true.  To write\n     *     gml:MultiPolygon instead of gml:multiSurface, set multiSurface to\n     *     false in the options to the constructor (cannot be changed after\n     *     instantiation).\n     */\n    multiSurface: true,\n\n    /**\n     * Constructor: OpenLayers.Format.GML.v3\n     * Create a parser for GML v3.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     *\n     * Valid options properties:\n     * featureType - {String} Local (without prefix) feature typeName (required).\n     * featureNS - {String} Feature namespace (required).\n     * geometryName - {String} Geometry element name.\n     */\n    initialize: function(options) {\n        OpenLayers.Format.GML.Base.prototype.initialize.apply(this, [options]);\n    },\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"gml\": OpenLayers.Util.applyDefaults({\n            \"_inherit\": function(node, obj, container) {\n                // SRSReferenceGroup attributes\n                var dim = parseInt(node.getAttribute(\"srsDimension\"), 10) ||\n                    (container && container.srsDimension);\n                if (dim) {\n                    obj.srsDimension = dim;\n                }\n            },\n            \"featureMembers\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"Curve\": function(node, container) {\n                var obj = {points: []};\n                this.readers.gml._inherit.apply(this, [node, obj, container]);\n                this.readChildNodes(node, obj);\n                if(!container.components) {\n                    container.components = [];\n                }\n                container.components.push(\n                    new OpenLayers.Geometry.LineString(obj.points)\n                );\n            },\n            \"segments\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"LineStringSegment\": function(node, container) {\n                var obj = {};\n                this.readChildNodes(node, obj);\n                if(obj.points) {\n                    Array.prototype.push.apply(container.points, obj.points);\n                }\n            },\n            \"pos\": function(node, obj) {\n                var str = this.getChildValue(node).replace(\n                    this.regExes.trimSpace, \"\"\n                );\n                var coords = str.split(this.regExes.splitSpace);\n                var point;\n                if(this.xy) {\n                    point = new OpenLayers.Geometry.Point(\n                        coords[0], coords[1], coords[2]\n                    );\n                } else {\n                    point = new OpenLayers.Geometry.Point(\n                        coords[1], coords[0], coords[2]\n                    );\n                }\n                if(!!!obj.points) {\n                    obj.points = [];\n                }\n                obj.points.push(point);\n            },\n            \"posList\": function(node, obj) {\n                var str = this.getChildValue(node).replace(\n                    this.regExes.trimSpace, \"\"\n                );\n                var coords = str.split(this.regExes.splitSpace);\n                // The \"dimension\" attribute is from the GML 3.0.1 spec.\n                var dim = obj.srsDimension ||\n                    parseInt(node.getAttribute(\"srsDimension\") || node.getAttribute(\"dimension\"), 10) || 2;\n                var j, x, y, z;\n                var numPoints = coords.length / dim;\n                var points = new Array(numPoints);\n                for(var i=0, len=coords.length; i<len; i += dim) {\n                    x = coords[i];\n                    y = coords[i+1];\n                    z = (dim == 2) ? undefined : coords[i+2];\n                    if (this.xy) {\n                        points[i/dim] = new OpenLayers.Geometry.Point(x, y, z);\n                    } else {\n                        points[i/dim] = new OpenLayers.Geometry.Point(y, x, z);\n                    }\n                }\n                obj.points = points;\n            },\n            \"Surface\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"patches\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"PolygonPatch\": function(node, obj) {\n                this.readers.gml.Polygon.apply(this, [node, obj]);\n            },\n            \"exterior\": function(node, container) {\n                var obj = {};\n                this.readChildNodes(node, obj);\n                container.outer = obj.components[0];\n            },\n            \"interior\": function(node, container) {\n                var obj = {};\n                this.readChildNodes(node, obj);\n                container.inner.push(obj.components[0]);\n            },\n            \"MultiCurve\": function(node, container) {\n                var obj = {components: []};\n                this.readers.gml._inherit.apply(this, [node, obj, container]);\n                this.readChildNodes(node, obj);\n                if(obj.components.length > 0) {\n                    container.components = [\n                        new OpenLayers.Geometry.MultiLineString(obj.components)\n                    ];\n                }\n            },\n            \"curveMember\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"MultiSurface\": function(node, container) {\n                var obj = {components: []};\n                this.readers.gml._inherit.apply(this, [node, obj, container]);\n                this.readChildNodes(node, obj);\n                if(obj.components.length > 0) {\n                    container.components = [\n                        new OpenLayers.Geometry.MultiPolygon(obj.components)\n                    ];\n                }\n            },\n            \"surfaceMember\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"surfaceMembers\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"pointMembers\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"lineStringMembers\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"polygonMembers\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"geometryMembers\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"Envelope\": function(node, container) {\n                var obj = {points: new Array(2)};\n                this.readChildNodes(node, obj);\n                if(!container.components) {\n                    container.components = [];\n                }\n\n                var min = obj.points[0];\n                var max = obj.points[1];\n                container.components.push(\n                    new OpenLayers.Bounds(min.x, min.y, max.x, max.y)\n                );\n            },\n            \"lowerCorner\": function(node, container) {\n                var obj = {};\n                this.readers.gml.pos.apply(this, [node, obj]);\n                container.points[0] = obj.points[0];\n            },\n            \"upperCorner\": function(node, container) {\n                var obj = {};\n                this.readers.gml.pos.apply(this, [node, obj]);\n                container.points[1] = obj.points[0];\n            }\n        }, OpenLayers.Format.GML.Base.prototype.readers[\"gml\"]),            \n        \"feature\": OpenLayers.Format.GML.Base.prototype.readers[\"feature\"],\n        \"wfs\": OpenLayers.Format.GML.Base.prototype.readers[\"wfs\"]\n    },\n    \n    /**\n     * Method: write\n     *\n     * Parameters:\n     * features - {Array(<OpenLayers.Feature.Vector>) | OpenLayers.Feature.Vector}\n     *     An array of features or a single feature.\n     *\n     * Returns:\n     * {String} Given an array of features, a doc with a gml:featureMembers\n     *     element will be returned.  Given a single feature, a doc with a\n     *     gml:featureMember element will be returned.\n     */\n    write: function(features) {\n        var name;\n        if(OpenLayers.Util.isArray(features)) {\n            name = \"featureMembers\";\n        } else {\n            name = \"featureMember\";\n        }\n        var root = this.writeNode(\"gml:\" + name, features);\n        this.setAttributeNS(\n            root, this.namespaces[\"xsi\"],\n            \"xsi:schemaLocation\", this.schemaLocation\n        );\n\n        return OpenLayers.Format.XML.prototype.write.apply(this, [root]);\n    },\n\n    /**\n     * Property: writers\n     * As a compliment to the readers property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: {\n        \"gml\": OpenLayers.Util.applyDefaults({\n            \"featureMembers\": function(features) {\n                var node = this.createElementNSPlus(\"gml:featureMembers\");\n                for(var i=0, len=features.length; i<len; ++i) {\n                    this.writeNode(\"feature:_typeName\", features[i], node);\n                }\n                return node;\n            },\n            \"Point\": function(geometry) {\n                var node = this.createElementNSPlus(\"gml:Point\");\n                this.writeNode(\"pos\", geometry, node);\n                return node;\n            },\n            \"pos\": function(point) {\n                // only 2d for simple features profile\n                var pos = (this.xy) ?\n                    (point.x + \" \" + point.y) : (point.y + \" \" + point.x);\n                return this.createElementNSPlus(\"gml:pos\", {\n                    value: pos\n                });\n            },\n            \"LineString\": function(geometry) {\n                var node = this.createElementNSPlus(\"gml:LineString\");\n                this.writeNode(\"posList\", geometry.components, node);\n                return node;\n            },\n            \"Curve\": function(geometry) {\n                var node = this.createElementNSPlus(\"gml:Curve\");\n                this.writeNode(\"segments\", geometry, node);\n                return node;\n            },\n            \"segments\": function(geometry) {\n                var node = this.createElementNSPlus(\"gml:segments\");\n                this.writeNode(\"LineStringSegment\", geometry, node);\n                return node;\n            },\n            \"LineStringSegment\": function(geometry) {\n                var node = this.createElementNSPlus(\"gml:LineStringSegment\");\n                this.writeNode(\"posList\", geometry.components, node);\n                return node;\n            },\n            \"posList\": function(points) {\n                // only 2d for simple features profile\n                var len = points.length;\n                var parts = new Array(len);\n                var point;\n                for(var i=0; i<len; ++i) {\n                    point = points[i];\n                    if(this.xy) {\n                        parts[i] = point.x + \" \" + point.y;\n                    } else {\n                        parts[i] = point.y + \" \" + point.x;\n                    }\n                }\n                return this.createElementNSPlus(\"gml:posList\", {\n                    value: parts.join(\" \")\n                }); \n            },\n            \"Surface\": function(geometry) {\n                var node = this.createElementNSPlus(\"gml:Surface\");\n                this.writeNode(\"patches\", geometry, node);\n                return node;\n            },\n            \"patches\": function(geometry) {\n                var node = this.createElementNSPlus(\"gml:patches\");\n                this.writeNode(\"PolygonPatch\", geometry, node);\n                return node;\n            },\n            \"PolygonPatch\": function(geometry) {\n                var node = this.createElementNSPlus(\"gml:PolygonPatch\", {\n                    attributes: {interpolation: \"planar\"}\n                });\n                this.writeNode(\"exterior\", geometry.components[0], node);\n                for(var i=1, len=geometry.components.length; i<len; ++i) {\n                    this.writeNode(\n                        \"interior\", geometry.components[i], node\n                    );\n                }\n                return node;\n            },\n            \"Polygon\": function(geometry) {\n                var node = this.createElementNSPlus(\"gml:Polygon\");\n                this.writeNode(\"exterior\", geometry.components[0], node);\n                for(var i=1, len=geometry.components.length; i<len; ++i) {\n                    this.writeNode(\n                        \"interior\", geometry.components[i], node\n                    );\n                }\n                return node;\n            },\n            \"exterior\": function(ring) {\n                var node = this.createElementNSPlus(\"gml:exterior\");\n                this.writeNode(\"LinearRing\", ring, node);\n                return node;\n            },\n            \"interior\": function(ring) {\n                var node = this.createElementNSPlus(\"gml:interior\");\n                this.writeNode(\"LinearRing\", ring, node);\n                return node;\n            },\n            \"LinearRing\": function(ring) {\n                var node = this.createElementNSPlus(\"gml:LinearRing\");\n                this.writeNode(\"posList\", ring.components, node);\n                return node;\n            },\n            \"MultiCurve\": function(geometry) {\n                var node = this.createElementNSPlus(\"gml:MultiCurve\");\n                var components = geometry.components || [geometry];\n                for(var i=0, len=components.length; i<len; ++i) {\n                    this.writeNode(\"curveMember\", components[i], node);\n                }\n                return node;\n            },\n            \"curveMember\": function(geometry) {\n                var node = this.createElementNSPlus(\"gml:curveMember\");\n                if(this.curve) {\n                    this.writeNode(\"Curve\", geometry, node);\n                } else {\n                    this.writeNode(\"LineString\", geometry, node);\n                }\n                return node;\n            },\n            \"MultiSurface\": function(geometry) {\n                var node = this.createElementNSPlus(\"gml:MultiSurface\");\n                var components = geometry.components || [geometry];\n                for(var i=0, len=components.length; i<len; ++i) {\n                    this.writeNode(\"surfaceMember\", components[i], node);\n                }\n                return node;\n            },\n            \"surfaceMember\": function(polygon) {\n                var node = this.createElementNSPlus(\"gml:surfaceMember\");\n                if(this.surface) {\n                    this.writeNode(\"Surface\", polygon, node);\n                } else {\n                    this.writeNode(\"Polygon\", polygon, node);\n                }\n                return node;\n            },\n            \"Envelope\": function(bounds) {\n                var node = this.createElementNSPlus(\"gml:Envelope\");\n                this.writeNode(\"lowerCorner\", bounds, node);\n                this.writeNode(\"upperCorner\", bounds, node);\n                // srsName attribute is required for gml:Envelope\n                if(this.srsName) {\n                    node.setAttribute(\"srsName\", this.srsName);\n                }\n                return node;\n            },\n            \"lowerCorner\": function(bounds) {\n                // only 2d for simple features profile\n                var pos = (this.xy) ?\n                    (bounds.left + \" \" + bounds.bottom) :\n                    (bounds.bottom + \" \" + bounds.left);\n                return this.createElementNSPlus(\"gml:lowerCorner\", {\n                    value: pos\n                });\n            },\n            \"upperCorner\": function(bounds) {\n                // only 2d for simple features profile\n                var pos = (this.xy) ?\n                    (bounds.right + \" \" + bounds.top) :\n                    (bounds.top + \" \" + bounds.right);\n                return this.createElementNSPlus(\"gml:upperCorner\", {\n                    value: pos\n                });\n            }\n        }, OpenLayers.Format.GML.Base.prototype.writers[\"gml\"]),\n        \"feature\": OpenLayers.Format.GML.Base.prototype.writers[\"feature\"],\n        \"wfs\": OpenLayers.Format.GML.Base.prototype.writers[\"wfs\"]\n    },\n\n    /**\n     * Method: setGeometryTypes\n     * Sets the <geometryTypes> mapping.\n     */\n    setGeometryTypes: function() {\n        this.geometryTypes = {\n            \"OpenLayers.Geometry.Point\": \"Point\",\n            \"OpenLayers.Geometry.MultiPoint\": \"MultiPoint\",\n            \"OpenLayers.Geometry.LineString\": (this.curve === true) ? \"Curve\": \"LineString\",\n            \"OpenLayers.Geometry.MultiLineString\": (this.multiCurve === false) ? \"MultiLineString\" : \"MultiCurve\",\n            \"OpenLayers.Geometry.Polygon\": (this.surface === true) ? \"Surface\" : \"Polygon\",\n            \"OpenLayers.Geometry.MultiPolygon\": (this.multiSurface === false) ? \"MultiPolygon\" : \"MultiSurface\",\n            \"OpenLayers.Geometry.Collection\": \"GeometryCollection\"\n        };\n    },\n    \n    CLASS_NAME: \"OpenLayers.Format.GML.v3\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML.js\n * @requires OpenLayers/Format/GML/v3.js\n * @requires OpenLayers/Feature/Vector.js\n */\n\n/**\n * Class: OpenLayers.Format.Atom\n * Read/write Atom feeds. Create a new instance with the\n *     <OpenLayers.Format.AtomFeed> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.Atom = OpenLayers.Class(OpenLayers.Format.XML, {\n    \n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.  Properties\n     *     of this object should not be set individually.  Read-only.  All\n     *     XML subclasses should have their own namespaces object.  Use\n     *     <setNamespace> to add or set a namespace alias after construction.\n     */\n    namespaces: {\n        atom: \"http://www.w3.org/2005/Atom\",\n        georss: \"http://www.georss.org/georss\"\n    },\n    \n    /**\n     * APIProperty: feedTitle\n     * {String} Atom feed elements require a title.  Default is \"untitled\".\n     */\n    feedTitle: \"untitled\",\n\n    /**\n     * APIProperty: defaultEntryTitle\n     * {String} Atom entry elements require a title.  In cases where one is\n     *     not provided in the feature attributes, this will be used.  Default\n     *     is \"untitled\".\n     */\n    defaultEntryTitle: \"untitled\",\n\n    /**\n     * Property: gmlParse\n     * {Object} GML Format object for parsing features\n     * Non-API and only created if necessary\n     */\n    gmlParser: null,\n    \n    /**\n     * APIProperty: xy\n     * {Boolean} Order of the GML coordinate: true:(x,y) or false:(y,x)\n     * For GeoRSS the default is (y,x), therefore: false\n     */\n    xy: false,\n    \n    /**\n     * Constructor: OpenLayers.Format.AtomEntry\n     * Create a new parser for Atom.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    \n    /**\n     * APIMethod: read\n     * Return a list of features from an Atom feed or entry document.\n     \n     * Parameters:\n     * doc - {Element} or {String}\n     *\n     * Returns:\n     * Array({<OpenLayers.Feature.Vector>})\n     */\n    read: function(doc) {\n        if (typeof doc == \"string\") {\n            doc = OpenLayers.Format.XML.prototype.read.apply(this, [doc]);\n        }\n        return this.parseFeatures(doc);\n    },\n    \n    /**\n     * APIMethod: write\n     * Serialize or more feature nodes to Atom documents.\n     *\n     * Parameters:\n     * features - {<OpenLayers.Feature.Vector>} or Array({<OpenLayers.Feature.Vector>})\n     *\n     * Returns:\n     * {String} an Atom entry document if passed one feature node, or a feed\n     * document if passed an array of feature nodes.\n     */\n    write: function(features) {\n        var doc;\n        if (OpenLayers.Util.isArray(features)) {\n            doc = this.createElementNSPlus(\"atom:feed\");\n            doc.appendChild(\n                this.createElementNSPlus(\"atom:title\", {\n                    value: this.feedTitle\n                })\n            );\n            for (var i=0, ii=features.length; i<ii; i++) {\n                doc.appendChild(this.buildEntryNode(features[i]));\n            }\n        }\n        else {\n            doc = this.buildEntryNode(features);\n        }\n        return OpenLayers.Format.XML.prototype.write.apply(this, [doc]);\n    },\n    \n    /**\n     * Method: buildContentNode\n     *\n     * Parameters:\n     * content - {Object}\n     *\n     * Returns:\n     * {DOMElement} an Atom content node.\n     *\n     * TODO: types other than text.\n     */\n    buildContentNode: function(content) {\n        var node = this.createElementNSPlus(\"atom:content\", {\n            attributes: {\n                type: content.type || null\n            }\n        });\n        if (content.src) {\n            node.setAttribute(\"src\", content.src);\n        } else {\n            if (content.type == \"text\" || content.type == null) {\n                node.appendChild(\n                    this.createTextNode(content.value)\n                );\n            } else if (content.type == \"html\") {\n                if (typeof content.value != \"string\") {\n                    throw \"HTML content must be in form of an escaped string\";\n                }\n                node.appendChild(\n                    this.createTextNode(content.value)\n                );\n            } else if (content.type == \"xhtml\") {\n                node.appendChild(content.value);\n            } else if (content.type == \"xhtml\" ||\n                           content.type.match(/(\\+|\\/)xml$/)) {\n                node.appendChild(content.value);\n            }\n            else { // MUST be a valid Base64 encoding\n                node.appendChild(\n                    this.createTextNode(content.value)\n                );\n            }\n        }\n        return node;\n    },\n    \n    /**\n     * Method: buildEntryNode\n     * Build an Atom entry node from a feature object.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     *\n     * Returns:\n     * {DOMElement} an Atom entry node.\n     *\n     * These entries are geared for publication using AtomPub.\n     *\n     * TODO: support extension elements\n     */\n    buildEntryNode: function(feature) {\n        var attrib = feature.attributes;\n        var atomAttrib = attrib.atom || {};\n        var entryNode = this.createElementNSPlus(\"atom:entry\");\n        \n        // atom:author\n        if (atomAttrib.authors) {\n            var authors = OpenLayers.Util.isArray(atomAttrib.authors) ?\n                atomAttrib.authors : [atomAttrib.authors];\n            for (var i=0, ii=authors.length; i<ii; i++) {\n                entryNode.appendChild(\n                    this.buildPersonConstructNode(\n                        \"author\", authors[i]\n                    )\n                );\n            }\n        }\n        \n        // atom:category\n        if (atomAttrib.categories) {\n            var categories = OpenLayers.Util.isArray(atomAttrib.categories) ?\n                atomAttrib.categories : [atomAttrib.categories];\n            var category;\n            for (var i=0, ii=categories.length; i<ii; i++) {\n                category = categories[i];\n                entryNode.appendChild(\n                    this.createElementNSPlus(\"atom:category\", {\n                        attributes: {\n                            term: category.term,\n                            scheme: category.scheme || null,\n                            label: category.label || null\n                        }\n                    })\n                );\n            }\n        }\n        \n        // atom:content\n        if (atomAttrib.content) {\n            entryNode.appendChild(this.buildContentNode(atomAttrib.content));\n        }\n        \n        // atom:contributor\n        if (atomAttrib.contributors) {\n            var contributors = OpenLayers.Util.isArray(atomAttrib.contributors) ?\n                atomAttrib.contributors : [atomAttrib.contributors];\n            for (var i=0, ii=contributors.length; i<ii; i++) {\n                entryNode.appendChild(\n                    this.buildPersonConstructNode(\n                        \"contributor\",\n                        contributors[i]\n                        )\n                    );\n            }\n        }\n        \n        // atom:id\n        if (feature.fid) {\n            entryNode.appendChild(\n                this.createElementNSPlus(\"atom:id\", {\n                    value: feature.fid\n                })\n            );\n        }\n        \n        // atom:link\n        if (atomAttrib.links) {\n            var links = OpenLayers.Util.isArray(atomAttrib.links) ?\n                atomAttrib.links : [atomAttrib.links];\n            var link;\n            for (var i=0, ii=links.length; i<ii; i++) {\n                link = links[i];\n                entryNode.appendChild(\n                    this.createElementNSPlus(\"atom:link\", {\n                        attributes: {\n                            href: link.href,\n                            rel: link.rel || null,\n                            type: link.type || null,\n                            hreflang: link.hreflang || null,\n                            title: link.title || null,\n                            length: link.length || null\n                        }\n                    })\n                );\n            }\n        }\n        \n        // atom:published\n        if (atomAttrib.published) {\n            entryNode.appendChild(\n                this.createElementNSPlus(\"atom:published\", {\n                    value: atomAttrib.published\n                })\n            );\n        }\n        \n        // atom:rights\n        if (atomAttrib.rights) {\n            entryNode.appendChild(\n                this.createElementNSPlus(\"atom:rights\", {\n                    value: atomAttrib.rights\n                })\n            );\n        }\n        \n        // atom:source not implemented\n        \n        // atom:summary\n        if (atomAttrib.summary || attrib.description) {\n            entryNode.appendChild(\n                this.createElementNSPlus(\"atom:summary\", {\n                    value: atomAttrib.summary || attrib.description\n                })\n            );\n        }\n        \n        // atom:title\n        entryNode.appendChild(\n            this.createElementNSPlus(\"atom:title\", {\n                value: atomAttrib.title || attrib.title || this.defaultEntryTitle\n            })\n        );\n        \n        // atom:updated\n        if (atomAttrib.updated) {\n            entryNode.appendChild(\n                this.createElementNSPlus(\"atom:updated\", {\n                    value: atomAttrib.updated\n                })\n            );\n        }\n        \n        // georss:where\n        if (feature.geometry) {\n            var whereNode = this.createElementNSPlus(\"georss:where\");\n            whereNode.appendChild(\n                this.buildGeometryNode(feature.geometry)\n            );\n            entryNode.appendChild(whereNode);\n        }\n        \n        return entryNode;\n    },\n    \n    /**\n     * Method: initGmlParser\n     * Creates a GML parser.\n     */\n    initGmlParser: function() {\n        this.gmlParser = new OpenLayers.Format.GML.v3({\n            xy: this.xy,\n            featureNS: \"http://example.com#feature\",\n            internalProjection: this.internalProjection,\n            externalProjection: this.externalProjection\n        });\n    },\n    \n    /**\n     * Method: buildGeometryNode\n     * builds a GeoRSS node with a given geometry\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     *\n     * Returns:\n     * {DOMElement} A gml node.\n     */\n    buildGeometryNode: function(geometry) {\n        if (!this.gmlParser) {\n            this.initGmlParser();\n        }\n        var node = this.gmlParser.writeNode(\"feature:_geometry\", geometry);\n        return node.firstChild;\n    },\n    \n    /**\n     * Method: buildPersonConstructNode\n     *\n     * Parameters:\n     * name - {String}\n     * value - {Object}\n     *\n     * Returns:\n     * {DOMElement} an Atom person construct node.\n     *\n     * Example:\n     * >>> buildPersonConstructNode(\"author\", {name: \"John Smith\"})\n     * {<author><name>John Smith</name></author>}\n     *\n     * TODO: how to specify extension elements? Add to the oNames array?\n     */\n    buildPersonConstructNode: function(name, value) {\n        var oNames = [\"uri\", \"email\"];\n        var personNode = this.createElementNSPlus(\"atom:\" + name);\n        personNode.appendChild(\n            this.createElementNSPlus(\"atom:name\", {\n                value: value.name\n            })\n        );\n        for (var i=0, ii=oNames.length; i<ii; i++) {\n            if (value[oNames[i]]) {\n                personNode.appendChild(\n                    this.createElementNSPlus(\"atom:\" + oNames[i], {\n                        value: value[oNames[i]]\n                    })\n                );\n            }\n        }\n        return personNode;\n    },\n    \n    /**\n     * Method: getFirstChildValue\n     *\n     * Parameters:\n     * node - {DOMElement}\n     * nsuri - {String} Child node namespace uri (\"*\" for any).\n     * name - {String} Child node name.\n     * def - {String} Optional string default to return if no child found.\n     *\n     * Returns:\n     * {String} The value of the first child with the given tag name.  Returns\n     *     default value or empty string if none found.\n     */\n    getFirstChildValue: function(node, nsuri, name, def) {\n        var value;\n        var nodes = this.getElementsByTagNameNS(node, nsuri, name);\n        if (nodes && nodes.length > 0) {\n            value = this.getChildValue(nodes[0], def);\n        } else {\n            value = def;\n        }\n        return value;\n    },\n    \n    /**\n     * Method: parseFeature\n     * Parse feature from an Atom entry node..\n     *\n     * Parameters:\n     * node - {DOMElement} An Atom entry or feed node.\n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector>}\n     */\n    parseFeature: function(node) {\n        var atomAttrib = {};\n        var value = null;\n        var nodes = null;\n        var attval = null;\n        var atomns = this.namespaces.atom;\n        \n        // atomAuthor*\n        this.parsePersonConstructs(node, \"author\", atomAttrib);\n        \n        // atomCategory*\n        nodes = this.getElementsByTagNameNS(node, atomns, \"category\");\n        if (nodes.length > 0) {\n            atomAttrib.categories = [];\n        }\n        for (var i=0, ii=nodes.length; i<ii; i++) {\n            value = {};\n            value.term = nodes[i].getAttribute(\"term\");\n            attval = nodes[i].getAttribute(\"scheme\");\n            if (attval) { value.scheme = attval; }\n            attval = nodes[i].getAttribute(\"label\");\n            if (attval) { value.label = attval; }\n            atomAttrib.categories.push(value);\n        }\n        \n        // atomContent?\n        nodes = this.getElementsByTagNameNS(node, atomns, \"content\");\n        if (nodes.length > 0) {\n            value = {};\n            attval = nodes[0].getAttribute(\"type\");\n            if (attval) {\n                value.type = attval;\n            }\n            attval = nodes[0].getAttribute(\"src\");\n            if (attval) {\n                value.src = attval;\n            } else {\n                if (value.type == \"text\" || \n                    value.type == \"html\" || \n                    value.type == null ) {\n                    value.value = this.getFirstChildValue(\n                                        node,\n                                        atomns,\n                                        \"content\",\n                                        null\n                                        );\n                } else if (value.type == \"xhtml\" ||\n                           value.type.match(/(\\+|\\/)xml$/)) {\n                    value.value = this.getChildEl(nodes[0]);\n                } else { // MUST be base64 encoded\n                    value.value = this.getFirstChildValue(\n                                        node,\n                                        atomns,\n                                        \"content\",\n                                        null\n                                        );\n                }\n                atomAttrib.content = value;\n            }\n        }\n        \n        // atomContributor*\n        this.parsePersonConstructs(node, \"contributor\", atomAttrib);\n        \n        // atomId\n        atomAttrib.id = this.getFirstChildValue(node, atomns, \"id\", null);\n        \n        // atomLink*\n        nodes = this.getElementsByTagNameNS(node, atomns, \"link\");\n        if (nodes.length > 0) {\n            atomAttrib.links = new Array(nodes.length);\n        }\n        var oAtts = [\"rel\", \"type\", \"hreflang\", \"title\", \"length\"];\n        for (var i=0, ii=nodes.length; i<ii; i++) {\n            value = {};\n            value.href = nodes[i].getAttribute(\"href\");\n            for (var j=0, jj=oAtts.length; j<jj; j++) {\n                attval = nodes[i].getAttribute(oAtts[j]);\n                if (attval) {\n                    value[oAtts[j]] = attval;\n                }\n            }\n            atomAttrib.links[i] = value;\n        }\n        \n        // atomPublished?\n        value = this.getFirstChildValue(node, atomns, \"published\", null);\n        if (value) {\n            atomAttrib.published = value;\n        }\n        \n        // atomRights?\n        value = this.getFirstChildValue(node, atomns, \"rights\", null);\n        if (value) {\n            atomAttrib.rights = value;\n        }\n        \n        // atomSource? -- not implemented\n        \n        // atomSummary?\n        value = this.getFirstChildValue(node, atomns, \"summary\", null);\n        if (value) {\n            atomAttrib.summary = value;\n        }\n        \n        // atomTitle\n        atomAttrib.title = this.getFirstChildValue(\n                                node, atomns, \"title\", null\n                                );\n        \n        // atomUpdated\n        atomAttrib.updated = this.getFirstChildValue(\n                                node, atomns, \"updated\", null\n                                );\n        \n        var featureAttrib = {\n            title: atomAttrib.title,\n            description: atomAttrib.summary,\n            atom: atomAttrib\n        };\n        var geometry = this.parseLocations(node)[0];\n        var feature = new OpenLayers.Feature.Vector(geometry, featureAttrib);\n        feature.fid = atomAttrib.id;\n        return feature;\n    },\n    \n    /**\n     * Method: parseFeatures\n     * Return features from an Atom entry or feed.\n     *\n     * Parameters:\n     * node - {DOMElement} An Atom entry or feed node.\n     *\n     * Returns:\n     * Array({<OpenLayers.Feature.Vector>})\n     */\n    parseFeatures: function(node) {\n        var features = [];\n        var entries = this.getElementsByTagNameNS(\n            node, this.namespaces.atom, \"entry\"\n        );\n        if (entries.length == 0) {\n            entries = [node];\n        }\n        for (var i=0, ii=entries.length; i<ii; i++) {\n            features.push(this.parseFeature(entries[i]));\n        }\n        return features;\n    },\n    \n    /**\n     * Method: parseLocations\n     * Parse the locations from an Atom entry or feed.\n     *\n     * Parameters:\n     * node - {DOMElement} An Atom entry or feed node.\n     *\n     * Returns:\n     * Array({<OpenLayers.Geometry>})\n     */\n    parseLocations: function(node) {\n        var georssns = this.namespaces.georss;\n\n        var locations = {components: []};\n        var where = this.getElementsByTagNameNS(node, georssns, \"where\");\n        if (where && where.length > 0) {\n            if (!this.gmlParser) {\n                this.initGmlParser();\n            }\n            for (var i=0, ii=where.length; i<ii; i++) {\n                this.gmlParser.readChildNodes(where[i], locations);\n            }\n        }\n        \n        var components = locations.components;\n        var point = this.getElementsByTagNameNS(node, georssns, \"point\");\n        if (point && point.length > 0) {\n            for (var i=0, ii=point.length; i<ii; i++) {\n                var xy = OpenLayers.String.trim(\n                            point[i].firstChild.nodeValue\n                            ).split(/\\s+/);\n                if (xy.length !=2) {\n                    xy = OpenLayers.String.trim(\n                                point[i].firstChild.nodeValue\n                                ).split(/\\s*,\\s*/);\n                }\n                components.push(new OpenLayers.Geometry.Point(xy[1], xy[0]));\n            }\n        }\n\n        var line = this.getElementsByTagNameNS(node, georssns, \"line\");\n        if (line && line.length > 0) {\n            var coords;\n            var p;\n            var points;\n            for (var i=0, ii=line.length; i<ii; i++) {\n                coords = OpenLayers.String.trim(\n                                line[i].firstChild.nodeValue\n                                ).split(/\\s+/);\n                points = [];\n                for (var j=0, jj=coords.length; j<jj; j+=2) {\n                    p = new OpenLayers.Geometry.Point(coords[j+1], coords[j]);\n                    points.push(p);\n                }\n                components.push(\n                    new OpenLayers.Geometry.LineString(points)\n                );\n            }\n        }        \n\n        var polygon = this.getElementsByTagNameNS(node, georssns, \"polygon\");\n        if (polygon && polygon.length > 0) {\n            var coords;\n            var p;\n            var points;\n            for (var i=0, ii=polygon.length; i<ii; i++) {\n                coords = OpenLayers.String.trim(\n                            polygon[i].firstChild.nodeValue\n                            ).split(/\\s+/);\n                points = [];\n                for (var j=0, jj=coords.length; j<jj; j+=2) {\n                    p = new OpenLayers.Geometry.Point(coords[j+1], coords[j]);\n                    points.push(p);\n                }\n                components.push(\n                    new OpenLayers.Geometry.Polygon(\n                        [new OpenLayers.Geometry.LinearRing(points)]\n                    )\n                );\n            }\n        }\n        \n        if (this.internalProjection && this.externalProjection) {\n            for (var i=0, ii=components.length; i<ii; i++) {\n                if (components[i]) {\n                    components[i].transform(\n                        this.externalProjection,\n                        this.internalProjection\n                    );\n                }\n            }\n        }\n        \n        return components;\n    },\n    \n    /**\n     * Method: parsePersonConstruct\n     * Parse Atom person constructs from an Atom entry node.\n     *\n     * Parameters:\n     * node - {DOMElement} An Atom entry or feed node.\n     * name - {String} Construcy name (\"author\" or \"contributor\")\n     * data = {Object} Object in which to put parsed persons.\n     *\n     * Returns:\n     * An {Object}.\n     */\n    parsePersonConstructs: function(node, name, data) {\n        var persons = [];\n        var atomns = this.namespaces.atom;\n        var nodes = this.getElementsByTagNameNS(node, atomns, name);\n        var oAtts = [\"uri\", \"email\"];\n        for (var i=0, ii=nodes.length; i<ii; i++) {\n            var value = {};\n            value.name = this.getFirstChildValue(\n                            nodes[i],\n                            atomns,\n                            \"name\",\n                            null\n                            );\n            for (var j=0, jj=oAtts.length; j<jj; j++) {\n                var attval = this.getFirstChildValue(\n                            nodes[i],\n                            atomns,\n                            oAtts[j],\n                            null);\n                if (attval) {\n                    value[oAtts[j]] = attval;\n                }\n            }\n            persons.push(value);\n        }\n        if (persons.length > 0) {\n            data[name + \"s\"] = persons;\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.Atom\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format.js\n * @requires OpenLayers/Feature/Vector.js\n */\n\n/**\n * Class: OpenLayers.Format.EncodedPolyline\n * Class for reading and writing encoded polylines.  Create a new instance\n * with the <OpenLayers.Format.EncodedPolyline> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Format>\n */\nOpenLayers.Format.EncodedPolyline = OpenLayers.Class(OpenLayers.Format, {\n\n    /**\n     * APIProperty: geometryType\n     * {String} Geometry type to output. One of: linestring (default),\n     *     linearring, point, multipoint or polygon. If the geometryType is\n     *     point, only the first point of the string is returned.\n     */\n    geometryType: \"linestring\",\n\n    /**\n     * Constructor: OpenLayers.Format.EncodedPolyline\n     * Create a new parser for encoded polylines\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *           this instance\n     *\n     * Returns:\n     * {<OpenLayers.Format.EncodedPolyline>} A new encoded polylines parser.\n     */\n    initialize: function(options) {\n        OpenLayers.Format.prototype.initialize.apply(this, [options]);\n    },\n\n    /**\n     * APIMethod: read\n     * Deserialize an encoded polyline string and return a vector feature.\n     *\n     * Parameters:\n     * encoded - {String} An encoded polyline string\n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector>} A vector feature with a linestring.\n     */\n    read: function(encoded) {\n        var geomType;\n        if (this.geometryType == \"linestring\")\n            geomType = OpenLayers.Geometry.LineString;\n        else if (this.geometryType == \"linearring\")\n            geomType = OpenLayers.Geometry.LinearRing;\n        else if (this.geometryType == \"multipoint\")\n            geomType = OpenLayers.Geometry.MultiPoint;\n        else if (this.geometryType != \"point\" && this.geometryType != \"polygon\")\n            return null;\n\n        var flatPoints = this.decodeDeltas(encoded, 2);\n        var flatPointsLength = flatPoints.length;\n\n        var pointGeometries = [];\n        for (var i = 0; i + 1 < flatPointsLength;) {\n            var y = flatPoints[i++], x = flatPoints[i++];\n            pointGeometries.push(new OpenLayers.Geometry.Point(x, y));\n        }\n\n\n        if (this.geometryType == \"point\")\n            return new OpenLayers.Feature.Vector(\n                pointGeometries[0]\n            );\n\n        if (this.geometryType == \"polygon\")\n            return new OpenLayers.Feature.Vector(\n                new OpenLayers.Geometry.Polygon([\n                    new OpenLayers.Geometry.LinearRing(pointGeometries)\n                ])\n            );\n\n        return new OpenLayers.Feature.Vector(\n            new geomType(pointGeometries)\n        );\n    },\n\n    /**\n     * APIMethod: decode\n     * Deserialize an encoded string and return an array of n-dimensional\n     * points.\n     *\n     * Parameters:\n     * encoded - {String} An encoded string\n     * dims - {int} The dimension of the points that are returned\n     *\n     * Returns:\n     * {Array(Array(int))} An array containing n-dimensional arrays of\n     *     coordinates.\n     */\n    decode: function(encoded, dims, opt_factor) {\n        var factor = opt_factor || 1e5;\n        var flatPoints = this.decodeDeltas(encoded, dims, factor);\n        var flatPointsLength = flatPoints.length;\n\n        var points = [];\n        for (var i = 0; i + (dims - 1) < flatPointsLength;) {\n            var point = [];\n\n            for (var dim = 0; dim < dims; ++dim) {\n                point.push(flatPoints[i++])\n            }\n\n            points.push(point);\n        }\n\n        return points;\n    },\n\n    /**\n     * APIMethod: write\n     * Serialize a feature or array of features into a WKT string.\n     *\n     * Parameters:\n     * features - {<OpenLayers.Feature.Vector>|Array} A feature or array of\n     *            features\n     *\n     * Returns:\n     * {String} The WKT string representation of the input geometries\n     */\n    write: function(features) {\n        var feature;\n        if (features.constructor == Array)\n            feature = features[0];\n        else\n            feature = features;\n\n        var geometry = feature.geometry;\n        var type = geometry.CLASS_NAME.split('.')[2].toLowerCase();\n\n        var pointGeometries;\n        if (type == \"point\")\n            pointGeometries = new Array(geometry);\n        else if (type == \"linestring\" ||\n                 type == \"linearring\" ||\n                 type == \"multipoint\")\n            pointGeometries = geometry.components;\n        else if (type == \"polygon\")\n            pointGeometries = geometry.components[0].components;\n        else\n            return null;\n\n        var flatPoints = [];\n\n        var pointGeometriesLength = pointGeometries.length;\n        for (var i = 0; i < pointGeometriesLength; ++i) {\n            var pointGeometry = pointGeometries[i];\n            flatPoints.push(pointGeometry.y);\n            flatPoints.push(pointGeometry.x);\n        }\n\n        return this.encodeDeltas(flatPoints, 2);\n    },\n\n    /**\n     * APIMethod: encode\n     * Serialize an array of n-dimensional points and return an encoded string\n     *\n     * Parameters:\n     * points - {Array(Array(int))} An array containing n-dimensional\n     *          arrays of coordinates\n     * dims - {int} The dimension of the points that should be read\n     *\n     * Returns:\n     * {String} An encoded string\n     */\n    encode: function (points, dims, opt_factor) {\n        var factor = opt_factor || 1e5;\n        var flatPoints = [];\n\n        var pointsLength = points.length;\n        for (var i = 0; i < pointsLength; ++i) {\n            var point = points[i];\n\n            for (var dim = 0; dim < dims; ++dim) {\n                flatPoints.push(point[dim]);\n            }\n        }\n\n        return this.encodeDeltas(flatPoints, dims, factor);\n    },\n\n    /**\n     * APIMethod: encodeDeltas\n     * Encode a list of n-dimensional points and return an encoded string\n     *\n     * Attention: This function will modify the passed array!\n     *\n     * Parameters:\n     * numbers - {Array.<number>} A list of n-dimensional points.\n     * dimension - {number} The dimension of the points in the list.\n     * opt_factor - {number=} The factor by which the numbers will be\n     * multiplied. The remaining decimal places will get rounded away.\n     *\n     * Returns:\n     * {string} The encoded string.\n     */\n    encodeDeltas: function(numbers, dimension, opt_factor) {\n      var factor = opt_factor || 1e5;\n      var d;\n\n      var lastNumbers = new Array(dimension);\n      for (d = 0; d < dimension; ++d) {\n        lastNumbers[d] = 0;\n      }\n\n      var numbersLength = numbers.length;\n      for (var i = 0; i < numbersLength;) {\n        for (d = 0; d < dimension; ++d, ++i) {\n          var num = numbers[i];\n          var delta = num - lastNumbers[d];\n          lastNumbers[d] = num;\n\n          numbers[i] = delta;\n        }\n      }\n\n      return this.encodeFloats(numbers, factor);\n    },\n\n\n    /**\n     * APIMethod: decodeDeltas\n     * Decode a list of n-dimensional points from an encoded string\n     *\n     * Parameters:\n     * encoded - {string} An encoded string.\n     * dimension - {number} The dimension of the points in the encoded string.\n     * opt_factor - {number=} The factor by which the resulting numbers will\n     * be divided.\n     *\n     * Returns:\n     * {Array.<number>} A list of n-dimensional points.\n     */\n    decodeDeltas: function(encoded, dimension, opt_factor) {\n      var factor = opt_factor || 1e5;\n      var d;\n\n      var lastNumbers = new Array(dimension);\n      for (d = 0; d < dimension; ++d) {\n        lastNumbers[d] = 0;\n      }\n\n      var numbers = this.decodeFloats(encoded, factor);\n\n      var numbersLength = numbers.length;\n      for (var i = 0; i < numbersLength;) {\n        for (d = 0; d < dimension; ++d, ++i) {\n          lastNumbers[d] += numbers[i];\n\n          numbers[i] = lastNumbers[d];\n        }\n      }\n\n      return numbers;\n    },\n\n\n    /**\n     * APIMethod: encodeFloats\n     * Encode a list of floating point numbers and return an encoded string\n     *\n     * Attention: This function will modify the passed array!\n     *\n     * Parameters:\n     * numbers - {Array.<number>} A list of floating point numbers.\n     * opt_factor - {number=} The factor by which the numbers will be\n     * multiplied. The remaining decimal places will get rounded away.\n     *\n     * Returns:\n     * {string} The encoded string.\n     */\n    encodeFloats: function(numbers, opt_factor) {\n      var factor = opt_factor || 1e5;\n\n      var numbersLength = numbers.length;\n      for (var i = 0; i < numbersLength; ++i) {\n        numbers[i] = Math.round(numbers[i] * factor);\n      }\n\n      return this.encodeSignedIntegers(numbers);\n    },\n\n\n    /**\n     * APIMethod: decodeFloats\n     * Decode a list of floating point numbers from an encoded string\n     *\n     * Parameters:\n     * encoded - {string} An encoded string.\n     * opt_factor - {number=} The factor by which the result will be divided.\n     *\n     * Returns:\n     * {Array.<number>} A list of floating point numbers.\n     */\n    decodeFloats: function(encoded, opt_factor) {\n      var factor = opt_factor || 1e5;\n\n      var numbers = this.decodeSignedIntegers(encoded);\n\n      var numbersLength = numbers.length;\n      for (var i = 0; i < numbersLength; ++i) {\n        numbers[i] /= factor;\n      }\n\n      return numbers;\n    },\n\n\n    /**\n     * APIMethod: encodeSignedIntegers\n     * Encode a list of signed integers and return an encoded string\n     *\n     * Attention: This function will modify the passed array!\n     *\n     * Parameters:\n     * numbers - {Array.<number>} A list of signed integers.\n     *\n     * Returns:\n     * {string} The encoded string.\n     */\n    encodeSignedIntegers: function(numbers) {\n      var numbersLength = numbers.length;\n      for (var i = 0; i < numbersLength; ++i) {\n        var num = numbers[i];\n\n        var signedNum = num << 1;\n        if (num < 0) {\n          signedNum = ~(signedNum);\n        }\n\n        numbers[i] = signedNum;\n      }\n\n      return this.encodeUnsignedIntegers(numbers);\n    },\n\n\n    /**\n     * APIMethod: decodeSignedIntegers\n     * Decode a list of signed integers from an encoded string\n     *\n     * Parameters:\n     * encoded - {string} An encoded string.\n     *\n     * Returns:\n     * {Array.<number>} A list of signed integers.\n     */\n    decodeSignedIntegers: function(encoded) {\n      var numbers = this.decodeUnsignedIntegers(encoded);\n\n      var numbersLength = numbers.length;\n      for (var i = 0; i < numbersLength; ++i) {\n        var num = numbers[i];\n        numbers[i] = (num & 1) ? ~(num >> 1) : (num >> 1);\n      }\n\n      return numbers;\n    },\n\n\n    /**\n     * APIMethod: encodeUnsignedIntegers\n     * Encode a list of unsigned integers and return an encoded string\n     *\n     * Parameters:\n     * numbers - {Array.<number>} A list of unsigned integers.\n     *\n     * Returns:\n     * {string} The encoded string.\n     */\n    encodeUnsignedIntegers: function(numbers) {\n      var encoded = '';\n\n      var numbersLength = numbers.length;\n      for (var i = 0; i < numbersLength; ++i) {\n        encoded += this.encodeUnsignedInteger(numbers[i]);\n      }\n\n      return encoded;\n    },\n\n\n    /**\n     * APIMethod: decodeUnsignedIntegers\n     * Decode a list of unsigned integers from an encoded string\n     *\n     * Parameters:\n     * encoded - {string} An encoded string.\n     *\n     * Returns:\n     * {Array.<number>} A list of unsigned integers.\n     */\n    decodeUnsignedIntegers: function(encoded) {\n      var numbers = [];\n\n      var current = 0;\n      var shift = 0;\n\n      var encodedLength = encoded.length;\n      for (var i = 0; i < encodedLength; ++i) {\n        var b = encoded.charCodeAt(i) - 63;\n\n        current |= (b & 0x1f) << shift;\n\n        if (b < 0x20) {\n          numbers.push(current);\n          current = 0;\n          shift = 0;\n        } else {\n          shift += 5;\n        }\n      }\n\n      return numbers;\n    },\n\n\n    /**\n     * Method: encodeFloat\n     * Encode one single floating point number and return an encoded string\n     *\n     * Parameters:\n     * num - {number} Floating point number that should be encoded.\n     * opt_factor - {number=} The factor by which num will be multiplied.\n     * The remaining decimal places will get rounded away.\n     *\n     * Returns:\n     * {string} The encoded string.\n     */\n    encodeFloat: function(num, opt_factor) {\n      num = Math.round(num * (opt_factor || 1e5));\n      return this.encodeSignedInteger(num);\n    },\n\n\n    /**\n     * Method: decodeFloat\n     * Decode one single floating point number from an encoded string\n     *\n     * Parameters:\n     * encoded - {string} An encoded string.\n     * opt_factor - {number=} The factor by which the result will be divided.\n     *\n     * Returns:\n     * {number} The decoded floating point number.\n     */\n    decodeFloat: function(encoded, opt_factor) {\n      var result = this.decodeSignedInteger(encoded);\n      return result / (opt_factor || 1e5);\n    },\n\n\n    /**\n     * Method: encodeSignedInteger\n     * Encode one single signed integer and return an encoded string\n     *\n     * Parameters:\n     * num - {number} Signed integer that should be encoded.\n     *\n     * Returns:\n     * {string} The encoded string.\n     */\n    encodeSignedInteger: function(num) {\n      var signedNum = num << 1;\n      if (num < 0) {\n        signedNum = ~(signedNum);\n      }\n\n      return this.encodeUnsignedInteger(signedNum);\n    },\n\n\n    /**\n     * Method: decodeSignedInteger\n     * Decode one single signed integer from an encoded string\n     *\n     * Parameters:\n     * encoded - {string} An encoded string.\n     *\n     * Returns:\n     * {number} The decoded signed integer.\n     */\n    decodeSignedInteger: function(encoded) {\n      var result = this.decodeUnsignedInteger(encoded);\n      return ((result & 1) ? ~(result >> 1) : (result >> 1));\n    },\n\n\n    /**\n     * Method: encodeUnsignedInteger\n     * Encode one single unsigned integer and return an encoded string\n     *\n     * Parameters:\n     * num - {number} Unsigned integer that should be encoded.\n     *\n     * Returns:\n     * {string} The encoded string.\n     */\n    encodeUnsignedInteger: function(num) {\n      var value, encoded = '';\n      while (num >= 0x20) {\n        value = (0x20 | (num & 0x1f)) + 63;\n        encoded += (String.fromCharCode(value));\n        num >>= 5;\n      }\n      value = num + 63;\n      encoded += (String.fromCharCode(value));\n      return encoded;\n    },\n\n\n    /**\n     * Method: decodeUnsignedInteger\n     * Decode one single unsigned integer from an encoded string\n     *\n     * Parameters:\n     * encoded - {string} An encoded string.\n     *\n     * Returns:\n     * {number} The decoded unsigned integer.\n     */\n    decodeUnsignedInteger: function(encoded) {\n      var result = 0;\n      var shift = 0;\n\n      var encodedLength = encoded.length;\n      for (var i = 0; i < encodedLength; ++i) {\n        var b = encoded.charCodeAt(i) - 63;\n\n        result |= (b & 0x1f) << shift;\n\n        if (b < 0x20)\n          break;\n\n        shift += 5;\n      }\n\n      return result;\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.EncodedPolyline\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Date.js\n * @requires OpenLayers/Format/XML.js\n * @requires OpenLayers/Feature/Vector.js\n * @requires OpenLayers/Geometry/Point.js\n * @requires OpenLayers/Geometry/LineString.js\n * @requires OpenLayers/Geometry/Polygon.js\n * @requires OpenLayers/Geometry/Collection.js\n * @requires OpenLayers/Request/XMLHttpRequest.js\n * @requires OpenLayers/Projection.js\n */\n\n/**\n * Class: OpenLayers.Format.KML\n * Read/Write KML. Create a new instance with the <OpenLayers.Format.KML>\n *     constructor. \n * \n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.KML = OpenLayers.Class(OpenLayers.Format.XML, {\n    \n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        kml: \"http://www.opengis.net/kml/2.2\",\n        gx: \"http://www.google.com/kml/ext/2.2\"\n    },\n\n    /**\n     * APIProperty: kmlns\n     * {String} KML Namespace to use. Defaults to 2.0 namespace.\n     */\n    kmlns: \"http://earth.google.com/kml/2.0\",\n    \n    /** \n     * APIProperty: placemarksDesc\n     * {String} Name of the placemarks.  Default is \"No description available\".\n     */\n    placemarksDesc: \"No description available\",\n    \n    /** \n     * APIProperty: foldersName\n     * {String} Name of the folders.  Default is \"OpenLayers export\".\n     *          If set to null, no name element will be created.\n     */\n    foldersName: \"OpenLayers export\",\n    \n    /** \n     * APIProperty: foldersDesc\n     * {String} Description of the folders. Default is \"Exported on [date].\"\n     *          If set to null, no description element will be created.\n     */\n    foldersDesc: \"Exported on \" + new Date(),\n    \n    /**\n     * APIProperty: extractAttributes\n     * {Boolean} Extract attributes from KML.  Default is true.\n     *           Extracting styleUrls requires this to be set to true\n     *           Note that currently only Data and SimpleData \n     *           elements are handled.\n     */\n    extractAttributes: true,\n    \n    /**\n     * APIProperty: kvpAttributes\n     * {Boolean} Only used if extractAttributes is true.\n     *           If set to true, attributes will be simple\n     *           key-value pairs, compatible with other formats,\n     *           Any displayName elements will be ignored.\n     *           If set to false, attributes will be objects,\n     *           retaining any displayName elements, but not\n     *           compatible with other formats. Any CDATA in\n     *           displayName will be read in as a string value.\n     *           Default is false.\n     */\n    kvpAttributes: false,\n    \n    /**\n     * Property: extractStyles\n     * {Boolean} Extract styles from KML.  Default is false.\n     *           Extracting styleUrls also requires extractAttributes to be\n     *           set to true\n     */\n    extractStyles: false,\n    \n    /**\n     * APIProperty: extractTracks\n     * {Boolean} Extract gx:Track elements from Placemark elements.  Default\n     *     is false.  If true, features will be generated for all points in\n     *     all gx:Track elements.  Features will have a when (Date) attribute\n     *     based on when elements in the track.  If tracks include angle\n     *     elements, features will have heading, tilt, and roll attributes.\n     *     If track point coordinates have three values, features will have\n     *     an altitude attribute with the third coordinate value.\n     */\n    extractTracks: false,\n    \n    /**\n     * APIProperty: trackAttributes\n     * {Array} If <extractTracks> is true, points within gx:Track elements will \n     *     be parsed as features with when, heading, tilt, and roll attributes.\n     *     Any additional attribute names can be provided in <trackAttributes>.\n     */\n    trackAttributes: null,\n    \n    /**\n     * Property: internalns\n     * {String} KML Namespace to use -- defaults to the namespace of the\n     *     Placemark node being parsed, but falls back to kmlns. \n     */\n    internalns: null,\n\n    /**\n     * Property: features\n     * {Array} Array of features\n     *     \n     */\n    features: null,\n\n    /**\n     * Property: styles\n     * {Object} Storage of style objects\n     *     \n     */\n    styles: null,\n    \n    /**\n     * Property: styleBaseUrl\n     * {String}\n     */\n    styleBaseUrl: \"\",\n\n    /**\n     * Property: fetched\n     * {Object} Storage of KML URLs that have been fetched before\n     *     in order to prevent reloading them.\n     */\n    fetched: null,\n\n    /**\n     * APIProperty: maxDepth\n     * {Integer} Maximum depth for recursive loading external KML URLs \n     *           Defaults to 0: do no external fetching\n     */\n    maxDepth: 0,\n\n    /**\n     * Constructor: OpenLayers.Format.KML\n     * Create a new parser for KML.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    initialize: function(options) {\n        // compile regular expressions once instead of every time they are used\n        this.regExes = {\n            trimSpace: (/^\\s*|\\s*$/g),\n            removeSpace: (/\\s*/g),\n            splitSpace: (/\\s+/),\n            trimComma: (/\\s*,\\s*/g),\n            kmlColor: (/(\\w{2})(\\w{2})(\\w{2})(\\w{2})/),\n            kmlIconPalette: (/root:\\/\\/icons\\/palette-(\\d+)(\\.\\w+)/),\n            straightBracket: (/\\$\\[(.*?)\\]/g)\n        };\n        // KML coordinates are always in longlat WGS84\n        this.externalProjection = new OpenLayers.Projection(\"EPSG:4326\");\n\n        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);\n    },\n\n    /**\n     * APIMethod: read\n     * Read data from a string, and return a list of features. \n     * \n     * Parameters: \n     * data    - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Array(<OpenLayers.Feature.Vector>)} List of features.\n     */\n    read: function(data) {\n        this.features = [];\n        this.styles   = {};\n        this.fetched  = {};\n\n        // Set default options \n        var options = {\n            depth: 0,\n            styleBaseUrl: this.styleBaseUrl\n        };\n\n        return this.parseData(data, options);\n    },\n\n    /**\n     * Method: parseData\n     * Read data from a string, and return a list of features. \n     * \n     * Parameters: \n     * data    - {String} or {DOMElement} data to read/parse.\n     * options - {Object} Hash of options\n     *\n     * Returns:\n     * {Array(<OpenLayers.Feature.Vector>)} List of features.\n     */\n    parseData: function(data, options) {\n        if(typeof data == \"string\") {\n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n\n        // Loop through the following node types in this order and\n        // process the nodes found \n        var types = [\"Link\", \"NetworkLink\", \"Style\", \"StyleMap\", \"Placemark\"];\n        for(var i=0, len=types.length; i<len; ++i) {\n            var type = types[i];\n\n            var nodes = this.getElementsByTagNameNS(data, \"*\", type);\n\n            // skip to next type if no nodes are found\n            if(nodes.length == 0) { \n                continue;\n            }\n\n            switch (type.toLowerCase()) {\n\n                // Fetch external links \n                case \"link\":\n                case \"networklink\":\n                    this.parseLinks(nodes, options);\n                    break;\n\n                // parse style information\n                case \"style\":\n                    if (this.extractStyles) {\n                        this.parseStyles(nodes, options);\n                    }\n                    break;\n                case \"stylemap\":\n                    if (this.extractStyles) {\n                        this.parseStyleMaps(nodes, options);\n                    }\n                    break;\n\n                // parse features\n                case \"placemark\":\n                    this.parseFeatures(nodes, options);\n                    break;\n            }\n        }\n        \n        return this.features;\n    },\n\n    /**\n     * Method: parseLinks\n     * Finds URLs of linked KML documents and fetches them\n     * \n     * Parameters: \n     * nodes   - {Array} of {DOMElement} data to read/parse.\n     * options - {Object} Hash of options\n     * \n     */\n    parseLinks: function(nodes, options) {\n        \n        // Fetch external links <NetworkLink> and <Link>\n        // Don't do anything if we have reached our maximum depth for recursion\n        if (options.depth >= this.maxDepth) {\n            return false;\n        }\n\n        // increase depth\n        var newOptions = OpenLayers.Util.extend({}, options);\n        newOptions.depth++;\n\n        for(var i=0, len=nodes.length; i<len; i++) {\n            var href = this.parseProperty(nodes[i], \"*\", \"href\");\n            if(href && !this.fetched[href]) {\n                this.fetched[href] = true; // prevent reloading the same urls\n                var data = this.fetchLink(href);\n                if (data) {\n                    this.parseData(data, newOptions);\n                }\n            } \n        }\n\n    },\n\n    /**\n     * Method: fetchLink\n     * Fetches a URL and returns the result\n     * \n     * Parameters: \n     * href  - {String} url to be fetched\n     * \n     */\n    fetchLink: function(href) {\n        var request = OpenLayers.Request.GET({url: href, async: false});\n        if (request) {\n            return request.responseText;\n        }\n    },\n\n    /**\n     * Method: parseStyles\n     * Parses <Style> nodes\n     * \n     * Parameters: \n     * nodes    - {Array} of {DOMElement} data to read/parse.\n     * options  - {Object} Hash of options\n     * \n     */\n    parseStyles: function(nodes, options) {\n        for(var i=0, len=nodes.length; i<len; i++) {\n            var style = this.parseStyle(nodes[i]);\n            if(style) {\n                var styleName = (options.styleBaseUrl || \"\") + \"#\" + style.id;\n                \n                this.styles[styleName] = style;\n            }\n        }\n    },\n\n    /**\n     * Method: parseKmlColor\n     * Parses a kml color (in 'aabbggrr' format) and returns the corresponding \n     * color and opacity or null if the color is invalid.\n     *\n     * Parameters: \n     * kmlColor - {String} a kml formatted color\n     *\n     * Returns:\n     * {Object}\n     */\n    parseKmlColor: function(kmlColor) {\n        var color = null;\n        if (kmlColor) {\n            var matches = kmlColor.match(this.regExes.kmlColor);\n            if (matches) {\n                color = {\n                    color: '#' + matches[4] + matches[3] + matches[2],\n                    opacity: parseInt(matches[1], 16) / 255\n                };\n            }\n        }\n        return color;\n    },\n\n    /**\n     * Method: parseStyle\n     * Parses the children of a <Style> node and builds the style hash\n     * accordingly\n     * \n     * Parameters: \n     * node - {DOMElement} <Style> node\n     * \n     */\n    parseStyle: function(node) {\n        var style = {};\n        \n        var types = [\"LineStyle\", \"PolyStyle\", \"IconStyle\", \"BalloonStyle\", \n                     \"LabelStyle\"];\n        var type, styleTypeNode, nodeList, geometry, parser;\n        for(var i=0, len=types.length; i<len; ++i) {\n            type = types[i];\n            styleTypeNode = this.getElementsByTagNameNS(node, \"*\", type)[0];\n            if(!styleTypeNode) { \n                continue;\n            }\n\n            // only deal with first geometry of this type\n            switch (type.toLowerCase()) {\n                case \"linestyle\":\n                    var kmlColor = this.parseProperty(styleTypeNode, \"*\", \"color\");\n                    var color = this.parseKmlColor(kmlColor);\n                    if (color) {\n                        style[\"strokeColor\"] = color.color;\n                        style[\"strokeOpacity\"] = color.opacity;\n                    }\n                    \n                    var width = this.parseProperty(styleTypeNode, \"*\", \"width\");\n                    if (width) {\n                        style[\"strokeWidth\"] = width;\n                    }\n                    break;\n\n                case \"polystyle\":\n                    var kmlColor = this.parseProperty(styleTypeNode, \"*\", \"color\");\n                    var color = this.parseKmlColor(kmlColor);\n                    if (color) {\n                        style[\"fillOpacity\"] = color.opacity;\n                        style[\"fillColor\"] = color.color;\n                    }\n                    // Check if fill is disabled\n                    var fill = this.parseProperty(styleTypeNode, \"*\", \"fill\");\n                    if (fill == \"0\") {\n                        style[\"fillColor\"] = \"none\";\n                    }\n                    // Check if outline is disabled\n                    var outline = this.parseProperty(styleTypeNode, \"*\", \"outline\");\n                    if (outline == \"0\") {\n                        style[\"strokeWidth\"] = \"0\";\n                    }\n                   \n                    break;\n\n                case \"iconstyle\":\n                    // set scale\n                    var scale = parseFloat(this.parseProperty(styleTypeNode, \n                                                          \"*\", \"scale\") || 1);\n  \n                    // set default width and height of icon\n                    var width = 32 * scale;\n                    var height = 32 * scale;\n\n                    var iconNode = this.getElementsByTagNameNS(styleTypeNode, \n                                               \"*\", \n                                               \"Icon\")[0];\n                    if (iconNode) {\n                        var href = this.parseProperty(iconNode, \"*\", \"href\");\n                        if (href) {                                                   \n\n                            var w = this.parseProperty(iconNode, \"*\", \"w\");\n                            var h = this.parseProperty(iconNode, \"*\", \"h\");\n\n                            // Settings for Google specific icons that are 64x64\n                            // We set the width and height to 64 and halve the\n                            // scale to prevent icons from being too big\n                            var google = \"http://maps.google.com/mapfiles/kml\";\n                            if (OpenLayers.String.startsWith(\n                                                 href, google) && !w && !h) {\n                                w = 64;\n                                h = 64;\n                                scale = scale / 2;\n                            }\n                                \n                            // if only dimension is defined, make sure the\n                            // other one has the same value\n                            w = w || h;\n                            h = h || w;\n\n                            if (w) {\n                                width = parseInt(w) * scale;\n                            }\n\n                            if (h) {\n                                height = parseInt(h) * scale;\n                            }\n\n                            // support for internal icons \n                            //    (/root://icons/palette-x.png)\n                            // x and y tell the position on the palette:\n                            // - in pixels\n                            // - starting from the left bottom\n                            // We translate that to a position in the list \n                            // and request the appropriate icon from the \n                            // google maps website\n                            var matches = href.match(this.regExes.kmlIconPalette);\n                            if (matches)  {\n                                var palette = matches[1];\n                                var file_extension = matches[2];\n\n                                var x = this.parseProperty(iconNode, \"*\", \"x\");\n                                var y = this.parseProperty(iconNode, \"*\", \"y\");\n\n                                var posX = x ? x/32 : 0;\n                                var posY = y ? (7 - y/32) : 7;\n\n                                var pos = posY * 8 + posX;\n                                href = \"http://maps.google.com/mapfiles/kml/pal\" \n                                     + palette + \"/icon\" + pos + file_extension;\n                            }\n\n                            style[\"graphicOpacity\"] = 1; // fully opaque\n                            style[\"externalGraphic\"] = href;\n                        }\n\n                    }\n\n\n                    // hotSpots define the offset for an Icon\n                    var hotSpotNode = this.getElementsByTagNameNS(styleTypeNode, \n                                               \"*\", \n                                               \"hotSpot\")[0];\n                    if (hotSpotNode) {\n                        var x = parseFloat(hotSpotNode.getAttribute(\"x\"));\n                        var y = parseFloat(hotSpotNode.getAttribute(\"y\"));\n\n                        var xUnits = hotSpotNode.getAttribute(\"xunits\");\n                        if (xUnits == \"pixels\") {\n                            style[\"graphicXOffset\"] = -x * scale;\n                        }\n                        else if (xUnits == \"insetPixels\") {\n                            style[\"graphicXOffset\"] = -width + (x * scale);\n                        }\n                        else if (xUnits == \"fraction\") {\n                            style[\"graphicXOffset\"] = -width * x;\n                        }\n\n                        var yUnits = hotSpotNode.getAttribute(\"yunits\");\n                        if (yUnits == \"pixels\") {\n                            style[\"graphicYOffset\"] = -height + (y * scale) + 1;\n                        }\n                        else if (yUnits == \"insetPixels\") {\n                            style[\"graphicYOffset\"] = -(y * scale) + 1;\n                        }\n                        else if (yUnits == \"fraction\") {\n                            style[\"graphicYOffset\"] =  -height * (1 - y) + 1;\n                        }\n                    }\n\n                    style[\"graphicWidth\"] = width;\n                    style[\"graphicHeight\"] = height;\n                    break;\n\n                case \"balloonstyle\":\n                    var balloonStyle = OpenLayers.Util.getXmlNodeValue(\n                                            styleTypeNode);\n                    if (balloonStyle) {\n                        style[\"balloonStyle\"] = balloonStyle.replace(\n                                       this.regExes.straightBracket, \"${$1}\");\n                    }\n                    break;\n                case \"labelstyle\":\n                    var kmlColor = this.parseProperty(styleTypeNode, \"*\", \"color\");\n                    var color = this.parseKmlColor(kmlColor);\n                    if (color) {\n                        style[\"fontColor\"] = color.color;\n                        style[\"fontOpacity\"] = color.opacity;\n                    }\n                    break;\n\n                default:\n            }\n        }\n\n        // Some polygons have no line color, so we use the fillColor for that\n        if (!style[\"strokeColor\"] && style[\"fillColor\"]) {\n            style[\"strokeColor\"] = style[\"fillColor\"];\n        }\n\n        var id = node.getAttribute(\"id\");\n        if (id && style) {\n            style.id = id;\n        }\n\n        return style;\n    },\n\n    /**\n     * Method: parseStyleMaps\n     * Parses <StyleMap> nodes, but only uses the 'normal' key\n     * \n     * Parameters: \n     * nodes    - {Array} of {DOMElement} data to read/parse.\n     * options  - {Object} Hash of options\n     * \n     */\n    parseStyleMaps: function(nodes, options) {\n        // Only the default or \"normal\" part of the StyleMap is processed now\n        // To do the select or \"highlight\" bit, we'd need to change lots more\n\n        for(var i=0, len=nodes.length; i<len; i++) {\n            var node = nodes[i];\n            var pairs = this.getElementsByTagNameNS(node, \"*\", \n                            \"Pair\");\n\n            var id = node.getAttribute(\"id\");\n            for (var j=0, jlen=pairs.length; j<jlen; j++) {\n                var pair = pairs[j];\n                // Use the shortcut in the SLD format to quickly retrieve the \n                // value of a node. Maybe it's good to have a method in \n                // Format.XML to do this\n                var key = this.parseProperty(pair, \"*\", \"key\");\n                var styleUrl = this.parseProperty(pair, \"*\", \"styleUrl\");\n\n                if (styleUrl && key == \"normal\") {\n                    this.styles[(options.styleBaseUrl || \"\") + \"#\" + id] =\n                        this.styles[(options.styleBaseUrl || \"\") + styleUrl];\n                }\n\n                // TODO: implement the \"select\" part\n                //if (styleUrl && key == \"highlight\") {\n                //}\n\n            }\n        }\n\n    },\n\n\n    /**\n     * Method: parseFeatures\n     * Loop through all Placemark nodes and parse them.\n     * Will create a list of features\n     * \n     * Parameters: \n     * nodes    - {Array} of {DOMElement} data to read/parse.\n     * options  - {Object} Hash of options\n     * \n     */\n    parseFeatures: function(nodes, options) {\n        var features = [];\n        for(var i=0, len=nodes.length; i<len; i++) {\n            var featureNode = nodes[i];\n            var feature = this.parseFeature.apply(this,[featureNode]) ;\n            if(feature) {\n\n                // Create reference to styleUrl \n                if (this.extractStyles && feature.attributes &&\n                    feature.attributes.styleUrl) {\n                    feature.style = this.getStyle(feature.attributes.styleUrl, options);\n                }\n\n                if (this.extractStyles) {\n                    // Make sure that <Style> nodes within a placemark are \n                    // processed as well\n                    var inlineStyleNode = this.getElementsByTagNameNS(featureNode,\n                                                        \"*\",\n                                                        \"Style\")[0];\n                    if (inlineStyleNode) {\n                        var inlineStyle= this.parseStyle(inlineStyleNode);\n                        if (inlineStyle) {\n                            feature.style = OpenLayers.Util.extend(\n                                feature.style, inlineStyle\n                            );\n                        }\n                    }\n                }\n\n                // check if gx:Track elements should be parsed\n                if (this.extractTracks) {\n                    var tracks = this.getElementsByTagNameNS(\n                        featureNode, this.namespaces.gx, \"Track\"\n                    );\n                    if (tracks && tracks.length > 0) {\n                        var track = tracks[0];\n                        var container = {\n                            features: [],\n                            feature: feature\n                        };\n                        this.readNode(track, container);\n                        if (container.features.length > 0) {\n                            features.push.apply(features, container.features);\n                        }\n                    }\n                } else {\n                    // add feature to list of features\n                    features.push(feature);                    \n                }\n            } else {\n                throw \"Bad Placemark: \" + i;\n            }\n        }\n\n        // add new features to existing feature list\n        this.features = this.features.concat(features);\n    },\n    \n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"kml\": {\n            \"when\": function(node, container) {\n                container.whens.push(OpenLayers.Date.parse(\n                    this.getChildValue(node)\n                ));\n            },\n            \"_trackPointAttribute\": function(node, container) {\n                var name = node.nodeName.split(\":\").pop();\n                container.attributes[name].push(this.getChildValue(node));\n            }\n        },\n        \"gx\": {\n            \"Track\": function(node, container) {\n                var obj = {\n                    whens: [],\n                    points: [],\n                    angles: []\n                };\n                if (this.trackAttributes) {\n                    var name;\n                    obj.attributes = {};\n                    for (var i=0, ii=this.trackAttributes.length; i<ii; ++i) {\n                        name = this.trackAttributes[i];\n                        obj.attributes[name] = [];\n                        if (!(name in this.readers.kml)) {\n                            this.readers.kml[name] = this.readers.kml._trackPointAttribute;\n                        }\n                    }\n                }\n                this.readChildNodes(node, obj);\n                if (obj.whens.length !== obj.points.length) {\n                    throw new Error(\"gx:Track with unequal number of when (\" +\n                                    obj.whens.length + \") and gx:coord (\" +\n                                    obj.points.length + \") elements.\");\n                }\n                var hasAngles = obj.angles.length > 0;\n                if (hasAngles && obj.whens.length !== obj.angles.length) {\n                    throw new Error(\"gx:Track with unequal number of when (\" +\n                                    obj.whens.length + \") and gx:angles (\" +\n                                    obj.angles.length + \") elements.\");\n                }\n                var feature, point, angles;\n                for (var i=0, ii=obj.whens.length; i<ii; ++i) {\n                    feature = container.feature.clone();\n                    feature.fid = container.feature.fid || container.feature.id;\n                    point = obj.points[i];\n                    feature.geometry = point;\n                    if (\"z\" in point) {\n                        feature.attributes.altitude = point.z;\n                    }\n                    if (this.internalProjection && this.externalProjection) {\n                        feature.geometry.transform(\n                            this.externalProjection, this.internalProjection\n                        ); \n                    }\n                    if (this.trackAttributes) {\n                        for (var j=0, jj=this.trackAttributes.length; j<jj; ++j) {\n                            var name = this.trackAttributes[j];\n                            feature.attributes[name] = obj.attributes[name][i];\n                        }\n                    }\n                    feature.attributes.when = obj.whens[i];\n                    feature.attributes.trackId = container.feature.id;\n                    if (hasAngles) {\n                        angles = obj.angles[i];\n                        feature.attributes.heading = parseFloat(angles[0]);\n                        feature.attributes.tilt = parseFloat(angles[1]);\n                        feature.attributes.roll = parseFloat(angles[2]);\n                    }\n                    container.features.push(feature);\n                }\n            },\n            \"coord\": function(node, container) {\n                var str = this.getChildValue(node);\n                var coords = str.replace(this.regExes.trimSpace, \"\").split(/\\s+/);\n                var point = new OpenLayers.Geometry.Point(coords[0], coords[1]);\n                if (coords.length > 2) {\n                    point.z = parseFloat(coords[2]);\n                }\n                container.points.push(point);\n            },\n            \"angles\": function(node, container) {\n                var str = this.getChildValue(node);\n                var parts = str.replace(this.regExes.trimSpace, \"\").split(/\\s+/);\n                container.angles.push(parts);\n            }\n        }\n    },\n    \n    /**\n     * Method: parseFeature\n     * This function is the core of the KML parsing code in OpenLayers.\n     *     It creates the geometries that are then attached to the returned\n     *     feature, and calls parseAttributes() to get attribute data out.\n     *\n     * Parameters:\n     * node - {DOMElement}\n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector>} A vector feature.\n     */\n    parseFeature: function(node) {\n        // only accept one geometry per feature - look for highest \"order\"\n        var order = [\"MultiGeometry\", \"Polygon\", \"LineString\", \"Point\"];\n        var type, nodeList, geometry, parser;\n        for(var i=0, len=order.length; i<len; ++i) {\n            type = order[i];\n            this.internalns = node.namespaceURI ? \n                    node.namespaceURI : this.kmlns;\n            nodeList = this.getElementsByTagNameNS(node, \n                                                   this.internalns, type);\n            if(nodeList.length > 0) {\n                // only deal with first geometry of this type\n                var parser = this.parseGeometry[type.toLowerCase()];\n                if(parser) {\n                    geometry = parser.apply(this, [nodeList[0]]);\n                    if (this.internalProjection && this.externalProjection) {\n                        geometry.transform(this.externalProjection, \n                                           this.internalProjection); \n                    }                       \n                } else {\n                    throw new TypeError(\"Unsupported geometry type: \" + type);\n                }\n                // stop looking for different geometry types\n                break;\n            }\n        }\n\n        // construct feature (optionally with attributes)\n        var attributes;\n        if(this.extractAttributes) {\n            attributes = this.parseAttributes(node);\n        }\n        var feature = new OpenLayers.Feature.Vector(geometry, attributes);\n\n        var fid = node.getAttribute(\"id\") || node.getAttribute(\"name\");\n        if(fid != null) {\n            feature.fid = fid;\n        }\n\n        return feature;\n    },        \n    \n    /**\n     * Method: getStyle\n     * Retrieves a style from a style hash using styleUrl as the key\n     * If the styleUrl doesn't exist yet, we try to fetch it \n     * Internet\n     * \n     * Parameters: \n     * styleUrl  - {String} URL of style\n     * options   - {Object} Hash of options \n     *\n     * Returns:\n     * {Object}  - (reference to) Style hash\n     */\n    getStyle: function(styleUrl, options) {\n\n        var styleBaseUrl = OpenLayers.Util.removeTail(styleUrl);\n\n        var newOptions = OpenLayers.Util.extend({}, options);\n        newOptions.depth++;\n        newOptions.styleBaseUrl = styleBaseUrl;\n\n        // Fetch remote Style URLs (if not fetched before) \n        if (!this.styles[styleUrl] \n                && !OpenLayers.String.startsWith(styleUrl, \"#\") \n                && newOptions.depth <= this.maxDepth\n                && !this.fetched[styleBaseUrl] ) {\n\n            var data = this.fetchLink(styleBaseUrl);\n            if (data) {\n                this.parseData(data, newOptions);\n            }\n\n        }\n\n        // return requested style\n        var style = OpenLayers.Util.extend({}, this.styles[styleUrl]);\n        return style;\n    },\n    \n    /**\n     * Property: parseGeometry\n     * Properties of this object are the functions that parse geometries based\n     *     on their type.\n     */\n    parseGeometry: {\n        \n        /**\n         * Method: parseGeometry.point\n         * Given a KML node representing a point geometry, create an OpenLayers\n         *     point geometry.\n         *\n         * Parameters:\n         * node - {DOMElement} A KML Point node.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry.Point>} A point geometry.\n         */\n        point: function(node) {\n            var nodeList = this.getElementsByTagNameNS(node, this.internalns,\n                                                       \"coordinates\");\n            var coords = [];\n            if(nodeList.length > 0) {\n                var coordString = nodeList[0].firstChild.nodeValue;\n                coordString = coordString.replace(this.regExes.removeSpace, \"\");\n                coords = coordString.split(\",\");\n            }\n\n            var point = null;\n            if(coords.length > 1) {\n                // preserve third dimension\n                if(coords.length == 2) {\n                    coords[2] = null;\n                }\n                point = new OpenLayers.Geometry.Point(coords[0], coords[1],\n                                                      coords[2]);\n            } else {\n                throw \"Bad coordinate string: \" + coordString;\n            }\n            return point;\n        },\n        \n        /**\n         * Method: parseGeometry.linestring\n         * Given a KML node representing a linestring geometry, create an\n         *     OpenLayers linestring geometry.\n         *\n         * Parameters:\n         * node - {DOMElement} A KML LineString node.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry.LineString>} A linestring geometry.\n         */\n        linestring: function(node, ring) {\n            var nodeList = this.getElementsByTagNameNS(node, this.internalns,\n                                                       \"coordinates\");\n            var line = null;\n            if(nodeList.length > 0) {\n                var coordString = this.getChildValue(nodeList[0]);\n\n                coordString = coordString.replace(this.regExes.trimSpace,\n                                                  \"\");\n                coordString = coordString.replace(this.regExes.trimComma,\n                                                  \",\");\n                var pointList = coordString.split(this.regExes.splitSpace);\n                var numPoints = pointList.length;\n                var points = new Array(numPoints);\n                var coords, numCoords;\n                for(var i=0; i<numPoints; ++i) {\n                    coords = pointList[i].split(\",\");\n                    numCoords = coords.length;\n                    if(numCoords > 1) {\n                        if(coords.length == 2) {\n                            coords[2] = null;\n                        }\n                        points[i] = new OpenLayers.Geometry.Point(coords[0],\n                                                                  coords[1],\n                                                                  coords[2]);\n                    } else {\n                        throw \"Bad LineString point coordinates: \" +\n                              pointList[i];\n                    }\n                }\n                if(numPoints) {\n                    if(ring) {\n                        line = new OpenLayers.Geometry.LinearRing(points);\n                    } else {\n                        line = new OpenLayers.Geometry.LineString(points);\n                    }\n                } else {\n                    throw \"Bad LineString coordinates: \" + coordString;\n                }\n            }\n\n            return line;\n        },\n        \n        /**\n         * Method: parseGeometry.polygon\n         * Given a KML node representing a polygon geometry, create an\n         *     OpenLayers polygon geometry.\n         *\n         * Parameters:\n         * node - {DOMElement} A KML Polygon node.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry.Polygon>} A polygon geometry.\n         */\n        polygon: function(node) {\n            var nodeList = this.getElementsByTagNameNS(node, this.internalns,\n                                                       \"LinearRing\");\n            var numRings = nodeList.length;\n            var components = new Array(numRings);\n            if(numRings > 0) {\n                // this assumes exterior ring first, inner rings after\n                var ring;\n                for(var i=0, len=nodeList.length; i<len; ++i) {\n                    ring = this.parseGeometry.linestring.apply(this,\n                                                        [nodeList[i], true]);\n                    if(ring) {\n                        components[i] = ring;\n                    } else {\n                        throw \"Bad LinearRing geometry: \" + i;\n                    }\n                }\n            }\n            return new OpenLayers.Geometry.Polygon(components);\n        },\n        \n        /**\n         * Method: parseGeometry.multigeometry\n         * Given a KML node representing a multigeometry, create an\n         *     OpenLayers geometry collection.\n         *\n         * Parameters:\n         * node - {DOMElement} A KML MultiGeometry node.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry.Collection>} A geometry collection.\n         */\n        multigeometry: function(node) {\n            var child, parser;\n            var parts = [];\n            var children = node.childNodes;\n            for(var i=0, len=children.length; i<len; ++i ) {\n                child = children[i];\n                if(child.nodeType == 1) {\n                    var type = (child.prefix) ?\n                            child.nodeName.split(\":\")[1] :\n                            child.nodeName;\n                    var parser = this.parseGeometry[type.toLowerCase()];\n                    if(parser) {\n                        parts.push(parser.apply(this, [child]));\n                    }\n                }\n            }\n            return new OpenLayers.Geometry.Collection(parts);\n        }\n        \n    },\n\n    /**\n     * Method: parseAttributes\n     *\n     * Parameters:\n     * node - {DOMElement}\n     *\n     * Returns:\n     * {Object} An attributes object.\n     */\n    parseAttributes: function(node) {\n        var attributes = {};\n       \n        // Extended Data is parsed first.\n        var edNodes = node.getElementsByTagName(\"ExtendedData\");\n        if (edNodes.length) {\n            attributes = this.parseExtendedData(edNodes[0]);\n        }\n        \n        // assume attribute nodes are type 1 children with a type 3 or 4 child\n        var child, grandchildren, grandchild;\n        var children = node.childNodes;\n\n        for(var i=0, len=children.length; i<len; ++i) {\n            child = children[i];\n            if(child.nodeType == 1) {\n                grandchildren = child.childNodes;\n                if(grandchildren.length >= 1 && grandchildren.length <= 3) {\n                    var grandchild;\n                    switch (grandchildren.length) {\n                        case 1:\n                            grandchild = grandchildren[0];\n                            break;\n                        case 2:\n                            var c1 = grandchildren[0];\n                            var c2 = grandchildren[1];\n                            grandchild = (c1.nodeType == 3 || c1.nodeType == 4) ?\n                                c1 : c2;\n                            break;\n                        case 3:\n                        default:\n                            grandchild = grandchildren[1];\n                            break;\n                    }\n                    if(grandchild.nodeType == 3 || grandchild.nodeType == 4) {\n                        var name = (child.prefix) ?\n                                child.nodeName.split(\":\")[1] :\n                                child.nodeName;\n                        var value = OpenLayers.Util.getXmlNodeValue(grandchild);\n                        if (value) {\n                            value = value.replace(this.regExes.trimSpace, \"\");\n                            attributes[name] = value;\n                        }\n                    }\n                } \n            }\n        }\n        return attributes;\n    },\n\n    /**\n     * Method: parseExtendedData\n     * Parse ExtendedData from KML. Limited support for schemas/datatypes.\n     *     See http://code.google.com/apis/kml/documentation/kmlreference.html#extendeddata\n     *     for more information on extendeddata.\n     */\n    parseExtendedData: function(node) {\n        var attributes = {};\n        var i, len, data, key;\n        var dataNodes = node.getElementsByTagName(\"Data\");\n        for (i = 0, len = dataNodes.length; i < len; i++) {\n            data = dataNodes[i];\n            key = data.getAttribute(\"name\");\n            var ed = {};\n            var valueNode = data.getElementsByTagName(\"value\");\n            if (valueNode.length) {\n                ed['value'] = this.getChildValue(valueNode[0]);\n            }\n            if (this.kvpAttributes) {\n                attributes[key] = ed['value'];\n            } else {\n                var nameNode = data.getElementsByTagName(\"displayName\");\n                if (nameNode.length) {\n                    ed['displayName'] = this.getChildValue(nameNode[0]);\n                }\n                attributes[key] = ed;\n            } \n        }\n        var simpleDataNodes = node.getElementsByTagName(\"SimpleData\");\n        for (i = 0, len = simpleDataNodes.length; i < len; i++) {\n            var ed = {};\n            data = simpleDataNodes[i];\n            key = data.getAttribute(\"name\");\n            ed['value'] = this.getChildValue(data);\n            if (this.kvpAttributes) {\n                attributes[key] = ed['value'];\n            } else {\n                ed['displayName'] = key;\n                attributes[key] = ed;\n            }\n        }\n        \n        return attributes;    \n    },\n    \n    /**\n     * Method: parseProperty\n     * Convenience method to find a node and return its value\n     *\n     * Parameters:\n     * xmlNode    - {<DOMElement>}\n     * namespace  - {String} namespace of the node to find\n     * tagName    - {String} name of the property to parse\n     * \n     * Returns:\n     * {String} The value for the requested property (defaults to null)\n     */    \n    parseProperty: function(xmlNode, namespace, tagName) {\n        var value;\n        var nodeList = this.getElementsByTagNameNS(xmlNode, namespace, tagName);\n        try {\n            value = OpenLayers.Util.getXmlNodeValue(nodeList[0]);\n        } catch(e) {\n            value = null;\n        }\n     \n        return value;\n    },                                                              \n\n    /**\n     * APIMethod: write\n     * Accept Feature Collection, and return a string. \n     * \n     * Parameters:\n     * features - {Array(<OpenLayers.Feature.Vector>)} An array of features.\n     *\n     * Returns:\n     * {String} A KML string.\n     */\n    write: function(features) {\n        if(!(OpenLayers.Util.isArray(features))) {\n            features = [features];\n        }\n        var kml = this.createElementNS(this.kmlns, \"kml\");\n        var folder = this.createFolderXML();\n        for(var i=0, len=features.length; i<len; ++i) {\n            folder.appendChild(this.createPlacemarkXML(features[i]));\n        }\n        kml.appendChild(folder);\n        return OpenLayers.Format.XML.prototype.write.apply(this, [kml]);\n    },\n\n    /**\n     * Method: createFolderXML\n     * Creates and returns a KML folder node\n     * \n     * Returns:\n     * {DOMElement}\n     */\n    createFolderXML: function() {\n        // Folder\n        var folder = this.createElementNS(this.kmlns, \"Folder\");\n\n        // Folder name\n        if (this.foldersName) {\n            var folderName = this.createElementNS(this.kmlns, \"name\");\n            var folderNameText = this.createTextNode(this.foldersName); \n            folderName.appendChild(folderNameText);\n            folder.appendChild(folderName);\n        }\n\n        // Folder description\n        if (this.foldersDesc) {\n            var folderDesc = this.createElementNS(this.kmlns, \"description\");        \n            var folderDescText = this.createTextNode(this.foldersDesc); \n            folderDesc.appendChild(folderDescText);\n            folder.appendChild(folderDesc);\n        }\n\n        return folder;\n    },\n\n    /**\n     * Method: createPlacemarkXML\n     * Creates and returns a KML placemark node representing the given feature. \n     * \n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     * \n     * Returns:\n     * {DOMElement}\n     */\n    createPlacemarkXML: function(feature) {        \n        // Placemark name\n        var placemarkName = this.createElementNS(this.kmlns, \"name\");\n        var label = (feature.style && feature.style.label) ? feature.style.label : feature.id;\n        var name = feature.attributes.name || label;\n        placemarkName.appendChild(this.createTextNode(name));\n\n        // Placemark description\n        var placemarkDesc = this.createElementNS(this.kmlns, \"description\");\n        var desc = feature.attributes.description || this.placemarksDesc;\n        placemarkDesc.appendChild(this.createTextNode(desc));\n        \n        // Placemark\n        var placemarkNode = this.createElementNS(this.kmlns, \"Placemark\");\n        if(feature.fid != null) {\n            placemarkNode.setAttribute(\"id\", feature.fid);\n        }\n        placemarkNode.appendChild(placemarkName);\n        placemarkNode.appendChild(placemarkDesc);\n\n        // output attributes as extendedData\n        if (feature.attributes) {\n            var edNode = this.buildExtendedData(feature.attributes);\n            if (edNode) {\n                placemarkNode.appendChild(edNode);\n            }\n        }\n        \n        // Geometry node (Point, LineString, etc. nodes)\n        var geometryNode = this.buildGeometryNode(feature.geometry);\n        placemarkNode.appendChild(geometryNode);        \n        \n        return placemarkNode;\n    },    \n\n    /**\n     * Method: buildGeometryNode\n     * Builds and returns a KML geometry node with the given geometry.\n     * \n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement}\n     */\n    buildGeometryNode: function(geometry) {\n        var className = geometry.CLASS_NAME;\n        var type = className.substring(className.lastIndexOf(\".\") + 1);\n        var builder = this.buildGeometry[type.toLowerCase()];\n        var node = null;\n        if(builder) {\n            node = builder.apply(this, [geometry]);\n        }\n        return node;\n    },\n\n    /**\n     * Property: buildGeometry\n     * Object containing methods to do the actual geometry node building\n     *     based on geometry type.\n     */\n    buildGeometry: {\n        // TBD: Anybody care about namespace aliases here (these nodes have\n        //    no prefixes)?\n\n        /**\n         * Method: buildGeometry.point\n         * Given an OpenLayers point geometry, create a KML point.\n         *\n         * Parameters:\n         * geometry - {<OpenLayers.Geometry.Point>} A point geometry.\n         *\n         * Returns:\n         * {DOMElement} A KML point node.\n         */\n        point: function(geometry) {\n            var kml = this.createElementNS(this.kmlns, \"Point\");\n            kml.appendChild(this.buildCoordinatesNode(geometry));\n            return kml;\n        },\n        \n        /**\n         * Method: buildGeometry.multipoint\n         * Given an OpenLayers multipoint geometry, create a KML\n         *     GeometryCollection.\n         *\n         * Parameters:\n         * geometry - {<OpenLayers.Geometry.Point>} A multipoint geometry.\n         *\n         * Returns:\n         * {DOMElement} A KML GeometryCollection node.\n         */\n        multipoint: function(geometry) {\n            return this.buildGeometry.collection.apply(this, [geometry]);\n        },\n\n        /**\n         * Method: buildGeometry.linestring\n         * Given an OpenLayers linestring geometry, create a KML linestring.\n         *\n         * Parameters:\n         * geometry - {<OpenLayers.Geometry.LineString>} A linestring geometry.\n         *\n         * Returns:\n         * {DOMElement} A KML linestring node.\n         */\n        linestring: function(geometry) {\n            var kml = this.createElementNS(this.kmlns, \"LineString\");\n            kml.appendChild(this.buildCoordinatesNode(geometry));\n            return kml;\n        },\n        \n        /**\n         * Method: buildGeometry.multilinestring\n         * Given an OpenLayers multilinestring geometry, create a KML\n         *     GeometryCollection.\n         *\n         * Parameters:\n         * geometry - {<OpenLayers.Geometry.Point>} A multilinestring geometry.\n         *\n         * Returns:\n         * {DOMElement} A KML GeometryCollection node.\n         */\n        multilinestring: function(geometry) {\n            return this.buildGeometry.collection.apply(this, [geometry]);\n        },\n\n        /**\n         * Method: buildGeometry.linearring\n         * Given an OpenLayers linearring geometry, create a KML linearring.\n         *\n         * Parameters:\n         * geometry - {<OpenLayers.Geometry.LinearRing>} A linearring geometry.\n         *\n         * Returns:\n         * {DOMElement} A KML linearring node.\n         */\n        linearring: function(geometry) {\n            var kml = this.createElementNS(this.kmlns, \"LinearRing\");\n            kml.appendChild(this.buildCoordinatesNode(geometry));\n            return kml;\n        },\n        \n        /**\n         * Method: buildGeometry.polygon\n         * Given an OpenLayers polygon geometry, create a KML polygon.\n         *\n         * Parameters:\n         * geometry - {<OpenLayers.Geometry.Polygon>} A polygon geometry.\n         *\n         * Returns:\n         * {DOMElement} A KML polygon node.\n         */\n        polygon: function(geometry) {\n            var kml = this.createElementNS(this.kmlns, \"Polygon\");\n            var rings = geometry.components;\n            var ringMember, ringGeom, type;\n            for(var i=0, len=rings.length; i<len; ++i) {\n                type = (i==0) ? \"outerBoundaryIs\" : \"innerBoundaryIs\";\n                ringMember = this.createElementNS(this.kmlns, type);\n                ringGeom = this.buildGeometry.linearring.apply(this,\n                                                               [rings[i]]);\n                ringMember.appendChild(ringGeom);\n                kml.appendChild(ringMember);\n            }\n            return kml;\n        },\n        \n        /**\n         * Method: buildGeometry.multipolygon\n         * Given an OpenLayers multipolygon geometry, create a KML\n         *     GeometryCollection.\n         *\n         * Parameters:\n         * geometry - {<OpenLayers.Geometry.Point>} A multipolygon geometry.\n         *\n         * Returns:\n         * {DOMElement} A KML GeometryCollection node.\n         */\n        multipolygon: function(geometry) {\n            return this.buildGeometry.collection.apply(this, [geometry]);\n        },\n\n        /**\n         * Method: buildGeometry.collection\n         * Given an OpenLayers geometry collection, create a KML MultiGeometry.\n         *\n         * Parameters:\n         * geometry - {<OpenLayers.Geometry.Collection>} A geometry collection.\n         *\n         * Returns:\n         * {DOMElement} A KML MultiGeometry node.\n         */\n        collection: function(geometry) {\n            var kml = this.createElementNS(this.kmlns, \"MultiGeometry\");\n            var child;\n            for(var i=0, len=geometry.components.length; i<len; ++i) {\n                child = this.buildGeometryNode.apply(this,\n                                                     [geometry.components[i]]);\n                if(child) {\n                    kml.appendChild(child);\n                }\n            }\n            return kml;\n        }\n    },\n\n    /**\n     * Method: buildCoordinatesNode\n     * Builds and returns the KML coordinates node with the given geometry\n     * <coordinates>...</coordinates>\n     * \n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement}\n     */     \n    buildCoordinatesNode: function(geometry) {\n        var coordinatesNode = this.createElementNS(this.kmlns, \"coordinates\");\n        \n        var path;\n        var points = geometry.components;\n        if(points) {\n            // LineString or LinearRing\n            var point;\n            var numPoints = points.length;\n            var parts = new Array(numPoints);\n            for(var i=0; i<numPoints; ++i) {\n                point = points[i];\n                parts[i] = this.buildCoordinates(point);\n            }\n            path = parts.join(\" \");\n        } else {\n            // Point\n            path = this.buildCoordinates(geometry);\n        }\n        \n        var txtNode = this.createTextNode(path);\n        coordinatesNode.appendChild(txtNode);\n        \n        return coordinatesNode;\n    },    \n    \n    /**\n     * Method: buildCoordinates\n     *\n     * Parameters:\n     * point - {<OpenLayers.Geometry.Point>}\n     *\n     * Returns\n     * {String} a coordinate pair\n     */\n    buildCoordinates: function(point) {\n        if (this.internalProjection && this.externalProjection) {\n            point = point.clone();\n            point.transform(this.internalProjection, \n                               this.externalProjection);\n        }\n        return point.x + \",\" + point.y;                     \n    },\n\n    /**\n     * Method: buildExtendedData\n     *\n     * Parameters:\n     * attributes - {Object}\n     *\n     * Returns\n     * {DOMElement} A KML ExtendedData node or {null} if no attributes.\n     */\n    buildExtendedData: function(attributes) {\n        var extendedData = this.createElementNS(this.kmlns, \"ExtendedData\");\n        for (var attributeName in attributes) {\n            // empty, name, description, styleUrl attributes ignored\n            if (attributes[attributeName] && attributeName != \"name\" && attributeName != \"description\" && attributeName != \"styleUrl\") {\n                var data = this.createElementNS(this.kmlns, \"Data\");\n                data.setAttribute(\"name\", attributeName);\n                var value = this.createElementNS(this.kmlns, \"value\");\n                if (typeof attributes[attributeName] == \"object\") {\n                    // cater for object attributes with 'value' properties\n                    // other object properties will output an empty node\n                    if (attributes[attributeName].value) {\n                        value.appendChild(this.createTextNode(attributes[attributeName].value));\n                    }\n                    if (attributes[attributeName].displayName) {\n                        var displayName = this.createElementNS(this.kmlns, \"displayName\");\n                        // displayName always written as CDATA\n                        displayName.appendChild(this.getXMLDoc().createCDATASection(attributes[attributeName].displayName));\n                        data.appendChild(displayName);\n                    }\n                } else {\n                    value.appendChild(this.createTextNode(attributes[attributeName]));\n                }\n                data.appendChild(value);\n                extendedData.appendChild(data);\n            }\n        }\n        if (this.isSimpleContent(extendedData)) {\n            return null;\n        } else {\n            return extendedData;\n        }\n    },\n    \n    CLASS_NAME: \"OpenLayers.Format.KML\" \n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML.js\n * @requires OpenLayers/Feature/Vector.js\n * @requires OpenLayers/Geometry/Point.js\n * @requires OpenLayers/Geometry/LineString.js\n * @requires OpenLayers/Geometry/Polygon.js\n */\n\n/**\n * Class: OpenLayers.Format.GeoRSS\n * Read/write GeoRSS parser. Create a new instance with the \n *     <OpenLayers.Format.GeoRSS> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.GeoRSS = OpenLayers.Class(OpenLayers.Format.XML, {\n    \n    /**\n     * APIProperty: rssns\n     * {String} RSS namespace to use. Defaults to\n     *   \"http://backend.userland.com/rss2\"\n     */\n    rssns: \"http://backend.userland.com/rss2\",\n    \n    /**\n     * APIProperty: featurens\n     * {String} Feature Attributes namespace.  Defaults to\n     *    \"http://mapserver.gis.umn.edu/mapserver\"\n     */\n    featureNS: \"http://mapserver.gis.umn.edu/mapserver\",\n    \n    /**\n     * APIProperty: georssns\n     * {String} GeoRSS namespace to use.  Defaults to\n     *     \"http://www.georss.org/georss\"\n     */\n    georssns: \"http://www.georss.org/georss\",\n\n    /**\n     * APIProperty: geons\n     * {String} W3C Geo namespace to use.  Defaults to\n     *     \"http://www.w3.org/2003/01/geo/wgs84_pos#\"\n     */\n    geons: \"http://www.w3.org/2003/01/geo/wgs84_pos#\",\n    \n    /**\n     * APIProperty: featureTitle\n     * {String} Default title for features.  Defaults to \"Untitled\"\n     */\n    featureTitle: \"Untitled\",\n    \n    /**\n     * APIProperty: featureDescription\n     * {String} Default description for features.  Defaults to \"No Description\"\n     */\n    featureDescription: \"No Description\",\n    \n    /**\n     * Property: gmlParse\n     * {Object} GML Format object for parsing features\n     * Non-API and only created if necessary\n     */\n    gmlParser: null,\n\n    /**\n     * APIProperty: xy\n     * {Boolean} Order of the GML coordinate: true:(x,y) or false:(y,x)\n     * For GeoRSS the default is (y,x), therefore: false\n     */ \n    xy: false,\n    \n    /**\n     * Constructor: OpenLayers.Format.GeoRSS\n     * Create a new parser for GeoRSS.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    \n    /**\n     * Method: createGeometryFromItem\n     * Return a geometry from a GeoRSS Item.\n     *\n     * Parameters:\n     * item - {DOMElement} A GeoRSS item node.\n     *\n     * Returns:\n     * {<OpenLayers.Geometry>} A geometry representing the node.\n     */\n    createGeometryFromItem: function(item) {\n        var point = this.getElementsByTagNameNS(item, this.georssns, \"point\");\n        var lat = this.getElementsByTagNameNS(item, this.geons, 'lat');\n        var lon = this.getElementsByTagNameNS(item, this.geons, 'long');\n        \n        var line = this.getElementsByTagNameNS(item,\n                                                this.georssns,\n                                                \"line\");\n        var polygon = this.getElementsByTagNameNS(item,\n                                                this.georssns,\n                                                \"polygon\");\n        var where = this.getElementsByTagNameNS(item, \n                                                this.georssns, \n                                                \"where\");\n        var box = this.getElementsByTagNameNS(item, \n                                              this.georssns, \n                                              \"box\");\n\n        if (point.length > 0 || (lat.length > 0 && lon.length > 0)) {\n            var location;\n            if (point.length > 0) {\n                location = OpenLayers.String.trim(\n                                point[0].firstChild.nodeValue).split(/\\s+/);\n                if (location.length !=2) {\n                    location = OpenLayers.String.trim(\n                                point[0].firstChild.nodeValue).split(/\\s*,\\s*/);\n                }\n            } else {\n                location = [parseFloat(lat[0].firstChild.nodeValue),\n                                parseFloat(lon[0].firstChild.nodeValue)];\n            }    \n\n            var geometry = new OpenLayers.Geometry.Point(location[1], location[0]);\n              \n        } else if (line.length > 0) {\n            var coords = OpenLayers.String.trim(this.getChildValue(line[0])).split(/\\s+/);\n            var components = []; \n            var point;\n            for (var i=0, len=coords.length; i<len; i+=2) {\n                point = new OpenLayers.Geometry.Point(coords[i+1], coords[i]);\n                components.push(point);\n            }\n            geometry = new OpenLayers.Geometry.LineString(components);\n        } else if (polygon.length > 0) { \n            var coords = OpenLayers.String.trim(this.getChildValue(polygon[0])).split(/\\s+/);\n            var components = []; \n            var point;\n            for (var i=0, len=coords.length; i<len; i+=2) {\n                point = new OpenLayers.Geometry.Point(coords[i+1], coords[i]);\n                components.push(point);\n            }\n            geometry = new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing(components)]);\n        } else if (where.length > 0) { \n            if (!this.gmlParser) {\n              this.gmlParser = new OpenLayers.Format.GML({'xy': this.xy});\n            }\n            var feature = this.gmlParser.parseFeature(where[0]);\n            geometry = feature.geometry;\n        } else if (box.length  > 0) {\n            var coords = OpenLayers.String.trim(box[0].firstChild.nodeValue).split(/\\s+/);\n            var components = [];\n            var point;\n            if (coords.length > 3) {\n                point = new OpenLayers.Geometry.Point(coords[1], coords[0]);\n                components.push(point);\n                point = new OpenLayers.Geometry.Point(coords[1], coords[2]);\n                components.push(point);\n                point = new OpenLayers.Geometry.Point(coords[3], coords[2]);\n                components.push(point);\n                point = new OpenLayers.Geometry.Point(coords[3], coords[0]);\n                components.push(point);\n                point = new OpenLayers.Geometry.Point(coords[1], coords[0]);\n                components.push(point);\n            }\n            geometry = new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing(components)]);\n        }\n        \n        if (geometry && this.internalProjection && this.externalProjection) {\n            geometry.transform(this.externalProjection, \n                               this.internalProjection);\n        }\n\n        return geometry;\n    },        \n\n    /**\n     * Method: createFeatureFromItem\n     * Return a feature from a GeoRSS Item.\n     *\n     * Parameters:\n     * item - {DOMElement} A GeoRSS item node.\n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector>} A feature representing the item.\n     */\n    createFeatureFromItem: function(item) {\n        var geometry = this.createGeometryFromItem(item);\n     \n        /* Provide defaults for title and description */\n        var title = this._getChildValue(item, \"*\", \"title\", this.featureTitle);\n       \n        /* First try RSS descriptions, then Atom summaries */\n        var description = this._getChildValue(\n            item, \"*\", \"description\",\n            this._getChildValue(item, \"*\", \"content\",\n                this._getChildValue(item, \"*\", \"summary\", this.featureDescription)));\n\n        /* If no link URL is found in the first child node, try the\n           href attribute */\n        var link = this._getChildValue(item, \"*\", \"link\");\n        if(!link) {\n            try {\n                link = this.getElementsByTagNameNS(item, \"*\", \"link\")[0].getAttribute(\"href\");\n            } catch(e) {\n                link = null;\n            }\n        }\n\n        var id = this._getChildValue(item, \"*\", \"id\", null);\n        \n        var data = {\n            \"title\": title,\n            \"description\": description,\n            \"link\": link\n        };\n        var feature = new OpenLayers.Feature.Vector(geometry, data);\n        feature.fid = id;\n        return feature;\n    },        \n    \n    /**\n     * Method: _getChildValue\n     *\n     * Parameters:\n     * node - {DOMElement}\n     * nsuri - {String} Child node namespace uri (\"*\" for any).\n     * name - {String} Child node name.\n     * def - {String} Optional string default to return if no child found.\n     *\n     * Returns:\n     * {String} The value of the first child with the given tag name.  Returns\n     *     default value or empty string if none found.\n     */\n    _getChildValue: function(node, nsuri, name, def) {\n        var value;\n        var eles = this.getElementsByTagNameNS(node, nsuri, name);\n        if(eles && eles[0] && eles[0].firstChild\n            && eles[0].firstChild.nodeValue) {\n            value = this.getChildValue(eles[0]);\n        } else {\n            value = (def == undefined) ? \"\" : def;\n        }\n        return value;\n    },\n    \n    /**\n     * APIMethod: read\n     * Return a list of features from a GeoRSS doc\n     *\n     * Parameters:\n     * doc - {Element} \n     *\n     * Returns:\n     * {Array(<OpenLayers.Feature.Vector>)}\n     */\n    read: function(doc) {\n        if (typeof doc == \"string\") { \n            doc = OpenLayers.Format.XML.prototype.read.apply(this, [doc]);\n        }\n\n        /* Try RSS items first, then Atom entries */\n        var itemlist = null;\n        itemlist = this.getElementsByTagNameNS(doc, '*', 'item');\n        if (itemlist.length == 0) {\n            itemlist = this.getElementsByTagNameNS(doc, '*', 'entry');\n        }\n        \n        var numItems = itemlist.length;\n        var features = new Array(numItems);\n        for(var i=0; i<numItems; i++) {\n            features[i] = this.createFeatureFromItem(itemlist[i]);\n        }\n        return features;\n    },\n    \n\n    /**\n     * APIMethod: write\n     * Accept Feature Collection, and return a string. \n     * \n     * Parameters: \n     * features - {Array(<OpenLayers.Feature.Vector>)} List of features to serialize into a string.\n     */\n    write: function(features) {\n        var georss;\n        if(OpenLayers.Util.isArray(features)) {\n            georss = this.createElementNS(this.rssns, \"rss\");\n            for(var i=0, len=features.length; i<len; i++) {\n                georss.appendChild(this.createFeatureXML(features[i]));\n            }\n        } else {\n            georss = this.createFeatureXML(features);\n        }\n        return OpenLayers.Format.XML.prototype.write.apply(this, [georss]);\n    },\n\n    /**\n     * Method: createFeatureXML\n     * Accept an <OpenLayers.Feature.Vector>, and build a geometry for it.\n     * \n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} \n     *\n     * Returns:\n     * {DOMElement}\n     */\n    createFeatureXML: function(feature) {\n        var geometryNode = this.buildGeometryNode(feature.geometry);\n        var featureNode = this.createElementNS(this.rssns, \"item\");\n        var titleNode = this.createElementNS(this.rssns, \"title\");\n        titleNode.appendChild(this.createTextNode(feature.attributes.title ? feature.attributes.title : \"\"));\n        var descNode = this.createElementNS(this.rssns, \"description\");\n        descNode.appendChild(this.createTextNode(feature.attributes.description ? feature.attributes.description : \"\"));\n        featureNode.appendChild(titleNode);\n        featureNode.appendChild(descNode);\n        if (feature.attributes.link) {\n            var linkNode = this.createElementNS(this.rssns, \"link\");\n            linkNode.appendChild(this.createTextNode(feature.attributes.link));\n            featureNode.appendChild(linkNode);\n        }    \n        for(var attr in feature.attributes) {\n            if (attr == \"link\" || attr == \"title\" || attr == \"description\") { continue; } \n            var attrText = this.createTextNode(feature.attributes[attr]); \n            var nodename = attr;\n            if (attr.search(\":\") != -1) {\n                nodename = attr.split(\":\")[1];\n            }    \n            var attrContainer = this.createElementNS(this.featureNS, \"feature:\"+nodename);\n            attrContainer.appendChild(attrText);\n            featureNode.appendChild(attrContainer);\n        }    \n        featureNode.appendChild(geometryNode);\n        return featureNode;\n    },    \n    \n    /** \n     * Method: buildGeometryNode\n     * builds a GeoRSS node with a given geometry\n     * \n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     *\n     * Returns:\n     * {DOMElement} A gml node.\n     */\n    buildGeometryNode: function(geometry) {\n        if (this.internalProjection && this.externalProjection) {\n            geometry = geometry.clone();\n            geometry.transform(this.internalProjection, \n                               this.externalProjection);\n        }\n        var node;\n        // match Polygon\n        if (geometry.CLASS_NAME == \"OpenLayers.Geometry.Polygon\") {\n            node = this.createElementNS(this.georssns, 'georss:polygon');\n            \n            node.appendChild(this.buildCoordinatesNode(geometry.components[0]));\n        }\n        // match LineString\n        else if (geometry.CLASS_NAME == \"OpenLayers.Geometry.LineString\") {\n            node = this.createElementNS(this.georssns, 'georss:line');\n            \n            node.appendChild(this.buildCoordinatesNode(geometry));\n        }\n        // match Point\n        else if (geometry.CLASS_NAME == \"OpenLayers.Geometry.Point\") {\n            node = this.createElementNS(this.georssns, 'georss:point');\n            node.appendChild(this.buildCoordinatesNode(geometry));\n        } else {\n            throw \"Couldn't parse \" + geometry.CLASS_NAME;\n        }  \n        return node;         \n    },\n    \n    /** \n     * Method: buildCoordinatesNode\n     * \n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     */\n    buildCoordinatesNode: function(geometry) {\n        var points = null;\n        \n        if (geometry.components) {\n            points = geometry.components;\n        }\n\n        var path;\n        if (points) {\n            var numPoints = points.length;\n            var parts = new Array(numPoints);\n            for (var i = 0; i < numPoints; i++) {\n                parts[i] = points[i].y + \" \" + points[i].x;\n            }\n            path = parts.join(\" \");\n        } else {\n            path = geometry.y + \" \" + geometry.x;\n        }\n        return this.createTextNode(path);\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.GeoRSS\" \n});     \n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/GML.js\n * @requires OpenLayers/Console.js\n * @requires OpenLayers/Lang.js\n */\n\n/**\n * Class: OpenLayers.Format.WFS\n * Read/Write WFS. \n *\n * Inherits from:\n *  - <OpenLayers.Format.GML>\n */\nOpenLayers.Format.WFS = OpenLayers.Class(OpenLayers.Format.GML, {\n    \n    /** \n     * Property: layer\n     * {<OpenLayers.Layer>}\n     */\n    layer: null,\n    \n    /**\n     * APIProperty: wfsns\n     * {String}\n     */\n    wfsns: \"http://www.opengis.net/wfs\",\n    \n    /**\n     * Property: ogcns\n     * {String}\n     */\n    ogcns: \"http://www.opengis.net/ogc\",\n    \n    /**\n     * Constructor: OpenLayers.Format.WFS\n     * Create a WFS-T formatter. This requires a layer: that layer should\n     * have two properties: geometry_column and typename. The parser\n     * for this format is subclassed entirely from GML: There is a writer \n     * only, which uses most of the code from the GML layer, and wraps\n     * it in transactional elements.\n     * \n     * Parameters: \n     * options - {Object} \n     * layer - {<OpenLayers.Layer>} \n     */\n    initialize: function(options, layer) {\n        OpenLayers.Format.GML.prototype.initialize.apply(this, [options]);\n        this.layer = layer;\n        if (this.layer.featureNS) {\n            this.featureNS = this.layer.featureNS;\n        }    \n        if (this.layer.options.geometry_column) {\n            this.geometryName = this.layer.options.geometry_column;\n        }\n        if (this.layer.options.typename) {\n            this.featureName = this.layer.options.typename;\n        }\n    },\n    \n    /**\n     * Method: write \n     * Takes a feature list, and generates a WFS-T Transaction \n     *\n     * Parameters:\n     * features - {Array(<OpenLayers.Feature.Vector>)} \n     */\n    write: function(features) {\n    \n        var transaction = this.createElementNS(this.wfsns, 'wfs:Transaction');\n        transaction.setAttribute(\"version\",\"1.0.0\");\n        transaction.setAttribute(\"service\",\"WFS\");\n        for (var i=0; i < features.length; i++) {\n            switch (features[i].state) {\n                case OpenLayers.State.INSERT:\n                    transaction.appendChild(this.insert(features[i]));\n                    break;\n                case OpenLayers.State.UPDATE:\n                    transaction.appendChild(this.update(features[i]));\n                    break;\n                case OpenLayers.State.DELETE:\n                    transaction.appendChild(this.remove(features[i]));\n                    break;\n            }\n        }\n        \n        return OpenLayers.Format.XML.prototype.write.apply(this,[transaction]);\n    },\n   \n    /**\n     * Method: createFeatureXML\n     *\n     * Parameters: \n     * feature - {<OpenLayers.Feature.Vector>}\n     */ \n    createFeatureXML: function(feature) {\n        var geometryNode = this.buildGeometryNode(feature.geometry);\n        var geomContainer = this.createElementNS(this.featureNS, \"feature:\" + this.geometryName);\n        geomContainer.appendChild(geometryNode);\n        var featureContainer = this.createElementNS(this.featureNS, \"feature:\" + this.featureName);\n        featureContainer.appendChild(geomContainer);\n        for(var attr in feature.attributes) {\n            var attrText = this.createTextNode(feature.attributes[attr]); \n            var nodename = attr;\n            if (attr.search(\":\") != -1) {\n                nodename = attr.split(\":\")[1];\n            }    \n            var attrContainer = this.createElementNS(this.featureNS, \"feature:\" + nodename);\n            attrContainer.appendChild(attrText);\n            featureContainer.appendChild(attrContainer);\n        }    \n        return featureContainer;\n    },\n    \n    /**\n     * Method: insert \n     * Takes a feature, and generates a WFS-T Transaction \"Insert\" \n     *\n     * Parameters: \n     * feature - {<OpenLayers.Feature.Vector>} \n     */\n    insert: function(feature) {\n        var insertNode = this.createElementNS(this.wfsns, 'wfs:Insert');\n        insertNode.appendChild(this.createFeatureXML(feature));\n        return insertNode;\n    },\n    \n    /**\n     * Method: update\n     * Takes a feature, and generates a WFS-T Transaction \"Update\" \n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} \n     */\n    update: function(feature) {\n        if (!feature.fid) { OpenLayers.Console.userError(OpenLayers.i18n(\"noFID\")); }\n        var updateNode = this.createElementNS(this.wfsns, 'wfs:Update');\n        updateNode.setAttribute(\"typeName\", this.featurePrefix + ':' + this.featureName); \n        updateNode.setAttribute(\"xmlns:\" + this.featurePrefix, this.featureNS); \n\n        var propertyNode = this.createElementNS(this.wfsns, 'wfs:Property');\n        var nameNode = this.createElementNS(this.wfsns, 'wfs:Name');\n        \n        var txtNode = this.createTextNode(this.geometryName);\n        nameNode.appendChild(txtNode);\n        propertyNode.appendChild(nameNode);\n        \n        var valueNode = this.createElementNS(this.wfsns, 'wfs:Value');\n        \n        var geometryNode = this.buildGeometryNode(feature.geometry);\n        \n        if(feature.layer){\n            geometryNode.setAttribute(\n                \"srsName\", feature.layer.projection.getCode()\n            );\n        }\n        \n        valueNode.appendChild(geometryNode);\n        \n        propertyNode.appendChild(valueNode);\n        updateNode.appendChild(propertyNode);\n        \n         // add in attributes\n        for(var propName in feature.attributes) {\n            propertyNode = this.createElementNS(this.wfsns, 'wfs:Property');\n            nameNode = this.createElementNS(this.wfsns, 'wfs:Name');\n            nameNode.appendChild(this.createTextNode(propName));\n            propertyNode.appendChild(nameNode);\n            valueNode = this.createElementNS(this.wfsns, 'wfs:Value');\n            valueNode.appendChild(this.createTextNode(feature.attributes[propName]));\n            propertyNode.appendChild(valueNode);\n            updateNode.appendChild(propertyNode);\n        }\n        \n        \n        var filterNode = this.createElementNS(this.ogcns, 'ogc:Filter');\n        var filterIdNode = this.createElementNS(this.ogcns, 'ogc:FeatureId');\n        filterIdNode.setAttribute(\"fid\", feature.fid);\n        filterNode.appendChild(filterIdNode);\n        updateNode.appendChild(filterNode);\n\n        return updateNode;\n    },\n    \n    /**\n     * Method: remove \n     * Takes a feature, and generates a WFS-T Transaction \"Delete\" \n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} \n     */\n    remove: function(feature) {\n        if (!feature.fid) { \n            OpenLayers.Console.userError(OpenLayers.i18n(\"noFID\")); \n            return false; \n        }\n        var deleteNode = this.createElementNS(this.wfsns, 'wfs:Delete');\n        deleteNode.setAttribute(\"typeName\", this.featurePrefix + ':' + this.featureName); \n        deleteNode.setAttribute(\"xmlns:\" + this.featurePrefix, this.featureNS); \n\n        var filterNode = this.createElementNS(this.ogcns, 'ogc:Filter');\n        var filterIdNode = this.createElementNS(this.ogcns, 'ogc:FeatureId');\n        filterIdNode.setAttribute(\"fid\", feature.fid);\n        filterNode.appendChild(filterIdNode);\n        deleteNode.appendChild(filterNode);\n\n        return deleteNode;\n    },\n\n    /**\n     * APIMethod: destroy\n     * Remove circular ref to layer \n     */\n    destroy: function() {\n        this.layer = null;\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.WFS\" \n});    \n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML/VersionedOGC.js\n */\n\n/**\n * Class: OpenLayers.Format.OWSCommon\n * Read OWSCommon. Create a new instance with the <OpenLayers.Format.OWSCommon>\n *     constructor.\n * \n * Inherits from:\n *  - <OpenLayers.Format.XML.VersionedOGC>\n */\nOpenLayers.Format.OWSCommon = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {\n    \n    /**\n     * APIProperty: defaultVersion\n     * {String} Version number to assume if none found.  Default is \"1.0.0\".\n     */\n    defaultVersion: \"1.0.0\",\n    \n    /**\n     * Constructor: OpenLayers.Format.OWSCommon\n     * Create a new parser for OWSCommon.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * Method: getVersion\n     * Returns the version to use. Subclasses can override this function\n     * if a different version detection is needed.\n     *\n     * Parameters:\n     * root - {DOMElement}\n     * options - {Object} Optional configuration object.\n     *\n     * Returns:\n     * {String} The version to use.\n     */\n    getVersion: function(root, options) {\n        var version = this.version;\n        if(!version) {\n            // remember version does not correspond to the OWS version\n            // it corresponds to the WMS/WFS/WCS etc. request version\n            var uri = root.getAttribute(\"xmlns:ows\");\n            // the above will fail if the namespace prefix is different than\n            // ows and if the namespace is declared on a different element\n            if (uri && uri.substring(uri.lastIndexOf(\"/\")+1) === \"1.1\") {\n                version =\"1.1.0\";\n            } \n            if(!version) {\n                version = this.defaultVersion;\n            }\n        }\n        return version;\n    },\n\n    /**\n     * APIMethod: read\n     * Read an OWSCommon document and return an object.\n     *\n     * Parameters:\n     * data - {String | DOMElement} Data to read.\n     * options - {Object} Options for the reader.\n     *\n     * Returns:\n     * {Object} An object representing the structure of the document.\n     */\n\n    CLASS_NAME: \"OpenLayers.Format.OWSCommon\" \n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/OWSCommon.js\n */\n\n/**\n * Class: OpenLayers.Format.OWSCommon.v1\n * Common readers and writers for OWSCommon v1.X formats\n *\n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.OWSCommon.v1 = OpenLayers.Class(OpenLayers.Format.XML, {\n   \n    /**\n     * Property: regExes\n     * Compiled regular expressions for manipulating strings.\n     */\n    regExes: {\n        trimSpace: (/^\\s*|\\s*$/g),\n        removeSpace: (/\\s*/g),\n        splitSpace: (/\\s+/),\n        trimComma: (/\\s*,\\s*/g)\n    },\n\n    /**\n     * Method: read\n     *\n     * Parameters:\n     * data - {DOMElement} An OWSCommon document element.\n     * options - {Object} Options for the reader.\n     *\n     * Returns:\n     * {Object} An object representing the OWSCommon document.\n     */\n    read: function(data, options) {\n        options = OpenLayers.Util.applyDefaults(options, this.options);\n        var ows = {};\n        this.readChildNodes(data, ows);\n        return ows;\n    },\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"ows\": {\n            \"Exception\": function(node, exceptionReport) {\n                var exception = {\n                    code: node.getAttribute('exceptionCode'),\n                    locator: node.getAttribute('locator'),\n                    texts: []\n                };\n                exceptionReport.exceptions.push(exception);\n                this.readChildNodes(node, exception);\n            },\n            \"ExceptionText\": function(node, exception) {\n                var text = this.getChildValue(node);\n                exception.texts.push(text);\n            },\n            \"ServiceIdentification\": function(node, obj) {\n                obj.serviceIdentification = {};\n                this.readChildNodes(node, obj.serviceIdentification);\n            },\n            \"Title\": function(node, obj) {\n                obj.title = this.getChildValue(node);\n            },\n            \"Abstract\": function(node, serviceIdentification) {\n                serviceIdentification[\"abstract\"] = this.getChildValue(node);\n            },\n            \"Keywords\": function(node, serviceIdentification) {\n                serviceIdentification.keywords = {};\n                this.readChildNodes(node, serviceIdentification.keywords);\n            },\n            \"Keyword\": function(node, keywords) {\n                keywords[this.getChildValue(node)] = true;\n            },\n            \"ServiceType\": function(node, serviceIdentification) {\n                serviceIdentification.serviceType = {\n                    codeSpace: node.getAttribute('codeSpace'), \n                    value: this.getChildValue(node)};\n            },\n            \"ServiceTypeVersion\": function(node, serviceIdentification) {\n                serviceIdentification.serviceTypeVersion = this.getChildValue(node);\n            },\n            \"Fees\": function(node, serviceIdentification) {\n                serviceIdentification.fees = this.getChildValue(node);\n            },\n            \"AccessConstraints\": function(node, serviceIdentification) {\n                serviceIdentification.accessConstraints = \n                    this.getChildValue(node);\n            },\n            \"ServiceProvider\": function(node, obj) {\n                obj.serviceProvider = {};\n                this.readChildNodes(node, obj.serviceProvider);\n            },\n            \"ProviderName\": function(node, serviceProvider) {\n                serviceProvider.providerName = this.getChildValue(node);\n            },\n            \"ProviderSite\": function(node, serviceProvider) {\n                serviceProvider.providerSite = this.getAttributeNS(node, \n                    this.namespaces.xlink, \"href\");\n            },\n            \"ServiceContact\": function(node, serviceProvider) {\n                serviceProvider.serviceContact = {};\n                this.readChildNodes(node, serviceProvider.serviceContact);\n            },\n            \"IndividualName\": function(node, serviceContact) {\n                serviceContact.individualName = this.getChildValue(node);\n            },\n            \"PositionName\": function(node, serviceContact) {\n                serviceContact.positionName = this.getChildValue(node);\n            },\n            \"ContactInfo\": function(node, serviceContact) {\n                serviceContact.contactInfo = {};\n                this.readChildNodes(node, serviceContact.contactInfo);\n            },\n            \"Phone\": function(node, contactInfo) {\n                contactInfo.phone = {};\n                this.readChildNodes(node, contactInfo.phone);\n            },\n            \"Voice\": function(node, phone) {\n                phone.voice = this.getChildValue(node);\n            },\n            \"Facsimile\": function(node, phone) {\n                phone.facsimile = this.getChildValue(node);\n            },\n            \"Address\": function(node, contactInfo) {\n                contactInfo.address = {};\n                this.readChildNodes(node, contactInfo.address);\n            },\n            \"DeliveryPoint\": function(node, address) {\n                address.deliveryPoint = this.getChildValue(node);\n            },\n            \"City\": function(node, address) {\n                address.city = this.getChildValue(node);\n            },\n            \"AdministrativeArea\": function(node, address) {\n                address.administrativeArea = this.getChildValue(node);\n            },\n            \"PostalCode\": function(node, address) {\n                address.postalCode = this.getChildValue(node);\n            },\n            \"Country\": function(node, address) {\n                address.country = this.getChildValue(node);\n            },\n            \"ElectronicMailAddress\": function(node, address) {\n                address.electronicMailAddress = this.getChildValue(node);\n            },\n            \"Role\": function(node, serviceContact) {\n                serviceContact.role = this.getChildValue(node);\n            },\n            \"OperationsMetadata\": function(node, obj) {\n                obj.operationsMetadata = {};\n                this.readChildNodes(node, obj.operationsMetadata);\n            },\n            \"Operation\": function(node, operationsMetadata) {\n                var name = node.getAttribute(\"name\");\n                operationsMetadata[name] = {};\n                this.readChildNodes(node, operationsMetadata[name]);\n            },\n            \"DCP\": function(node, operation) {\n                operation.dcp = {};\n                this.readChildNodes(node, operation.dcp);\n            },\n            \"HTTP\": function(node, dcp) {\n                dcp.http = {};\n                this.readChildNodes(node, dcp.http);\n            },\n            \"Get\": function(node, http) {\n                if (!http.get) {\n                    http.get = [];\n                }\n                var obj = {\n                    url: this.getAttributeNS(node, this.namespaces.xlink, \"href\")\n                };\n                this.readChildNodes(node, obj);\n                http.get.push(obj);\n            },\n            \"Post\": function(node, http) {\n                if (!http.post) {\n                    http.post = [];\n                }\n                var obj = {\n                    url: this.getAttributeNS(node, this.namespaces.xlink, \"href\")\n                };\n                this.readChildNodes(node, obj);\n                http.post.push(obj);\n            },\n            \"Parameter\": function(node, operation) {\n                if (!operation.parameters) {\n                    operation.parameters = {};\n                }\n                var name = node.getAttribute(\"name\");\n                operation.parameters[name] = {};\n                this.readChildNodes(node, operation.parameters[name]);\n            },\n            \"Constraint\": function(node, obj) {\n                if (!obj.constraints) {\n                    obj.constraints = {};\n                }\n                var name = node.getAttribute(\"name\");\n                obj.constraints[name] = {};\n                this.readChildNodes(node, obj.constraints[name]);\n            },\n            \"Value\": function(node, allowedValues) {\n                allowedValues[this.getChildValue(node)] = true;\n            },\n            \"OutputFormat\": function(node, obj) {\n                obj.formats.push({value: this.getChildValue(node)});\n                this.readChildNodes(node, obj);\n            },\n            \"WGS84BoundingBox\": function(node, obj) {\n                var boundingBox = {};\n                boundingBox.crs = node.getAttribute(\"crs\");\n                if (obj.BoundingBox) {\n                    obj.BoundingBox.push(boundingBox);\n                } else {\n                    obj.projection = boundingBox.crs;\n                    boundingBox = obj;\n               }\n               this.readChildNodes(node, boundingBox);\n            },\n            \"BoundingBox\": function(node, obj) {\n                // FIXME: We consider that BoundingBox is the same as WGS84BoundingBox\n                // LowerCorner = \"min_x min_y\"\n                // UpperCorner = \"max_x max_y\"\n                // It should normally depend on the projection\n                this.readers['ows']['WGS84BoundingBox'].apply(this, [node, obj]);\n            },\n            \"LowerCorner\": function(node, obj) {\n                var str = this.getChildValue(node).replace(\n                    this.regExes.trimSpace, \"\");\n                str = str.replace(this.regExes.trimComma, \",\");\n                var pointList = str.split(this.regExes.splitSpace);\n                obj.left = pointList[0];\n                obj.bottom = pointList[1];\n            },\n            \"UpperCorner\": function(node, obj) {\n                var str = this.getChildValue(node).replace(\n                    this.regExes.trimSpace, \"\");\n                str = str.replace(this.regExes.trimComma, \",\");\n                var pointList = str.split(this.regExes.splitSpace);\n                obj.right = pointList[0];\n                obj.top = pointList[1];\n                obj.bounds = new OpenLayers.Bounds(obj.left, obj.bottom,\n                    obj.right, obj.top);\n                delete obj.left;\n                delete obj.bottom;\n                delete obj.right;\n                delete obj.top;\n            },\n            \"Language\": function(node, obj) {\n                obj.language = this.getChildValue(node);\n            }\n        }\n    },\n\n    /**\n     * Property: writers\n     * As a compliment to the readers property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: {\n        \"ows\": {\n            \"BoundingBox\": function(options, nodeName) {\n                var node = this.createElementNSPlus(nodeName || \"ows:BoundingBox\", {\n                    attributes: {\n                        crs: options.projection\n                    }\n                });\n                this.writeNode(\"ows:LowerCorner\", options, node);\n                this.writeNode(\"ows:UpperCorner\", options, node);\n                return node;\n            },\n            \"LowerCorner\": function(options) {\n                var node = this.createElementNSPlus(\"ows:LowerCorner\", {\n                    value: options.bounds.left + \" \" + options.bounds.bottom });\n                return node;\n            },\n            \"UpperCorner\": function(options) {\n                var node = this.createElementNSPlus(\"ows:UpperCorner\", {\n                    value: options.bounds.right + \" \" + options.bounds.top });\n                return node;\n            },\n            \"Identifier\": function(identifier) {\n                var node = this.createElementNSPlus(\"ows:Identifier\", {\n                    value: identifier });\n                return node;\n            },\n            \"Title\": function(title) {\n                var node = this.createElementNSPlus(\"ows:Title\", {\n                    value: title });\n                return node;\n            },\n            \"Abstract\": function(abstractValue) {\n                var node = this.createElementNSPlus(\"ows:Abstract\", {\n                    value: abstractValue });\n                return node;\n            },\n            \"OutputFormat\": function(format) {\n                var node = this.createElementNSPlus(\"ows:OutputFormat\", {\n                    value: format });\n                return node;\n            }\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.OWSCommon.v1\"\n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/OWSCommon/v1.js\n */\n\n/**\n * Class: OpenLayers.Format.OWSCommon.v1_0_0\n * Parser for OWS Common version 1.0.0.\n *\n * Inherits from:\n *  - <OpenLayers.Format.OWSCommon.v1>\n */\nOpenLayers.Format.OWSCommon.v1_0_0 = OpenLayers.Class(OpenLayers.Format.OWSCommon.v1, {\n    \n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        ows: \"http://www.opengis.net/ows\",\n        xlink: \"http://www.w3.org/1999/xlink\"\n    },    \n    \n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"ows\": OpenLayers.Util.applyDefaults({\n            \"ExceptionReport\": function(node, obj) {\n                obj.success = false;\n                obj.exceptionReport = {\n                    version: node.getAttribute('version'),\n                    language: node.getAttribute('language'),\n                    exceptions: []\n                };\n                this.readChildNodes(node, obj.exceptionReport);\n            } \n        }, OpenLayers.Format.OWSCommon.v1.prototype.readers.ows)\n    },\n\n    /**\n     * Property: writers\n     * As a compliment to the readers property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: {\n        \"ows\": OpenLayers.Format.OWSCommon.v1.prototype.writers.ows\n    },\n    \n    CLASS_NAME: \"OpenLayers.Format.OWSCommon.v1_0_0\"\n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/OWSCommon/v1.js\n */\n\n/**\n * Class: OpenLayers.Format.OWSCommon.v1_1_0\n * Parser for OWS Common version 1.1.0.\n *\n * Inherits from:\n *  - <OpenLayers.Format.OWSCommon.v1>\n */\nOpenLayers.Format.OWSCommon.v1_1_0 = OpenLayers.Class(OpenLayers.Format.OWSCommon.v1, {\n\n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        ows: \"http://www.opengis.net/ows/1.1\",\n        xlink: \"http://www.w3.org/1999/xlink\"\n    },    \n    \n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"ows\": OpenLayers.Util.applyDefaults({\n            \"ExceptionReport\": function(node, obj) {\n                obj.exceptionReport = {\n                    version: node.getAttribute('version'),\n                    language: node.getAttribute('xml:lang'),\n                    exceptions: []\n                };\n                this.readChildNodes(node, obj.exceptionReport);\n            },\n            \"AllowedValues\": function(node, parameter) {\n                parameter.allowedValues = {};\n                this.readChildNodes(node, parameter.allowedValues);\n            },\n            \"AnyValue\": function(node, parameter) {\n                parameter.anyValue = true;\n            },\n            \"DataType\": function(node, parameter) {\n                parameter.dataType = this.getChildValue(node);\n            },\n            \"Range\": function(node, allowedValues) {\n                allowedValues.range = {};\n                this.readChildNodes(node, allowedValues.range);\n            },\n            \"MinimumValue\": function(node, range) {\n                range.minValue = this.getChildValue(node);\n            },\n            \"MaximumValue\": function(node, range) {\n                range.maxValue = this.getChildValue(node);\n            },\n            \"Identifier\": function(node, obj) {\n                obj.identifier = this.getChildValue(node);\n            },\n            \"SupportedCRS\": function(node, obj) {\n                obj.supportedCRS = this.getChildValue(node);\n            }\n        }, OpenLayers.Format.OWSCommon.v1.prototype.readers[\"ows\"])\n    },\n\n    /**\n     * Property: writers\n     * As a compliment to the readers property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: {\n        \"ows\": OpenLayers.Util.applyDefaults({\n            \"Range\": function(range) {\n                var node = this.createElementNSPlus(\"ows:Range\", {\n                    attributes: {\n                        'ows:rangeClosure': range.closure\n                    }\n                });\n                this.writeNode(\"ows:MinimumValue\", range.minValue, node);\n                this.writeNode(\"ows:MaximumValue\", range.maxValue, node);\n                return node;\n            },\n            \"MinimumValue\": function(minValue) {\n                var node = this.createElementNSPlus(\"ows:MinimumValue\", {\n                    value: minValue\n                });\n                return node;\n            },\n            \"MaximumValue\": function(maxValue) {\n                var node = this.createElementNSPlus(\"ows:MaximumValue\", {\n                    value: maxValue\n                });\n                return node;\n            },\n            \"Value\": function(value) {\n                var node = this.createElementNSPlus(\"ows:Value\", {\n                    value: value\n                });\n                return node;\n            }\n        }, OpenLayers.Format.OWSCommon.v1.prototype.writers[\"ows\"])\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.OWSCommon.v1_1_0\"\n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML/VersionedOGC.js\n */\n\n/**\n * Class: OpenLayers.Format.WCSCapabilities\n * Read WCS Capabilities.\n * \n * Inherits from:\n *  - <OpenLayers.Format.XML.VersionedOGC>\n */\nOpenLayers.Format.WCSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {\n    \n    /**\n     * APIProperty: defaultVersion\n     * {String} Version number to assume if none found.  Default is \"1.1.0\".\n     */\n    defaultVersion: \"1.1.0\",\n\n    /**\n     * Constructor: OpenLayers.Format.WCSCapabilities\n     * Create a new parser for WCS capabilities.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * APIMethod: read\n     * Read capabilities data from a string, and return a list of coverages. \n     * \n     * Parameters: \n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Array} List of named coverages.\n     */\n    \n    CLASS_NAME: \"OpenLayers.Format.WCSCapabilities\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/WCSCapabilities.js\n */\n\n/**\n * Class: OpenLayers.Format.WCSCapabilities.v1\n * Abstract class not to be instantiated directly.\n * \n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.WCSCapabilities.v1 = OpenLayers.Class(\n    OpenLayers.Format.XML, {\n\n    regExes: {\n        trimSpace: (/^\\s*|\\s*$/g),\n        splitSpace: (/\\s+/)\n    },\n\n    /**\n     * Property: defaultPrefix\n     */\n    defaultPrefix: \"wcs\",\n\n    /**\n     * APIMethod: read\n     * Read capabilities data from a string, and return a list of coverages. \n     * \n     * Parameters: \n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Array} List of named coverages.\n     */\n    read: function(data) {\n        if(typeof data == \"string\") {\n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n        var raw = data;\n        if(data && data.nodeType == 9) {\n            data = data.documentElement;\n        }\n        var capabilities = {};\n        this.readNode(data, capabilities);\n        return capabilities;\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.WCSCapabilities.v1\" \n\n});", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/WCSCapabilities/v1.js\n * @requires OpenLayers/Format/GML/v3.js\n */\n\n/**\n * Class: OpenLayers.Format.WCSCapabilities/v1_0_0\n * Read WCS Capabilities version 1.0.0.\n * \n * Inherits from:\n *  - <OpenLayers.Format.WCSCapabilities.v1>\n *  - <OpenLayers.Format.GML.v3>\n */\nOpenLayers.Format.WCSCapabilities.v1_0_0 = OpenLayers.Class(\n    OpenLayers.Format.GML.v3, OpenLayers.Format.WCSCapabilities.v1, {\n\n    /**\n     * Constructor: OpenLayers.Format.WCSCapabilities.v1_0_0\n     * Create a new parser for WCS capabilities version 1.0.0.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        wcs: \"http://www.opengis.net/wcs\",\n        xlink: \"http://www.w3.org/1999/xlink\",\n        xsi: \"http://www.w3.org/2001/XMLSchema-instance\",\n        ows: \"http://www.opengis.net/ows\"\n    },\n\n    /**\n     * Property: errorProperty\n     * {String} Which property of the returned object to check for in order to\n     * determine whether or not parsing has failed. In the case that the\n     * errorProperty is undefined on the returned object, the document will be\n     * run through an OGCExceptionReport parser.\n     */\n    errorProperty: \"serviceIdentification\",\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.  Where possible, the 1.0.0 readers attempt to make\n     *     their output compatible with 1.1.0 to reduce client complexity.\n     */\n    readers: {\n        \"wcs\": {\n            \"WCS_Capabilities\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"Service\": function(node, obj) {\n                var children = {};\n                this.readChildNodes(node, children);\n\n                // Rearrange things a little to get a tree that is\n                // compatible with 1.1.0\n                var providerName = children.serviceContact.providerName;\n                delete children.serviceContact.providerName;\n\n                obj.serviceProvider = { \n                    providerName:   providerName,\n                    serviceContact: children.serviceContact };\n                children.serviceContact = undefined;\n                obj.serviceIdentification = children;\n            },\n            \"keywords\": function(node, serviceIdentification) { \n                serviceIdentification.keywords = []; \n                this.readChildNodes(node, serviceIdentification.keywords);\n            },\n            \"keyword\": function(node, keywords) { \n                // Append the keyword to the keywords list\n                keywords.push(this.getChildValue(node));      \n            },\n            \"responsibleParty\": function(node, serviceIdentification) {\n                serviceIdentification.serviceContact = {};\n                this.readChildNodes(node, serviceIdentification.serviceContact);   \n            },\n            \"individualName\": function(node, serviceContact) {\n                serviceContact.individualName = this.getChildValue(node);\n            },\n            \"organisationName\": function(node, serviceContact) {\n                serviceContact.providerName = this.getChildValue(node);\n            },\n            \"positionName\": function(node, serviceContact) {\n                serviceContact.positionName = this.getChildValue(node);\n            },\n            \"contactInfo\": function(node, serviceContact) {\n                serviceContact.contactInfo = {};\n                this.readChildNodes(node, serviceContact.contactInfo);\n            },\n            \"phone\": function(node, contactInfo) {\n                contactInfo.phone = {};\n                this.readChildNodes(node, contactInfo.phone);\n            },\n            \"voice\": function(node, phone) {\n                phone.voice = this.getChildValue(node);\n            },\n            \"facsimile\": function(node, phone) {\n                phone.facsimile = this.getChildValue(node);\n            },\n            \"address\": function(node, contactInfo) {\n                contactInfo.address = {};\n                this.readChildNodes(node, contactInfo.address);\n            },\n            \"deliveryPoint\": function(node, address) {\n                address.deliveryPoint = this.getChildValue(node);\n            },\n            \"city\": function(node, address) {\n                address.city = this.getChildValue(node);\n            },\n            \"postalCode\": function(node, address) {\n                address.postalCode = this.getChildValue(node);\n            },\n            \"country\": function(node, address) {\n                address.country = this.getChildValue(node);\n            },\n            \"electronicMailAddress\": function(node, address) {\n                address.electronicMailAddress = this.getChildValue(node);\n            },\n            \"fees\": function(node, serviceIdentification) {\n                serviceIdentification.fees = this.getChildValue(node);\n            },\n            \"accessConstraints\": function(node, serviceIdentification) {\n                serviceIdentification.accessConstraints = this.getChildValue(node);\n            },\n            \"ContentMetadata\": function(node, obj) {\n                obj.contentMetadata = [];\n                this.readChildNodes(node, obj.contentMetadata);\n            },\n            \"CoverageOfferingBrief\": function(node, contentMetadata) {\n                var coverageOfferingBrief = {};\n                this.readChildNodes(node, coverageOfferingBrief);\n                contentMetadata.push(coverageOfferingBrief);\n            },\n            \"name\": function(node, serviceOrCoverageOfferingBrief) {\n                // split/pop used to strip off any namespace prefixes\n                if(node.parentNode.nodeName.split(':').pop() === \"Service\") {\n                    // We're parsing a service description\n                    serviceOrCoverageOfferingBrief.title = this.getChildValue(node);\n                }\n                else {      // node.parentNode.nodeName === \"CoverageOfferingBrief\"\n                    // We're parsing a dataset\n                    serviceOrCoverageOfferingBrief.identifier = this.getChildValue(node);\n                }\n            },\n            \"label\": function(node, serviceOrCoverageOfferingBrief) {\n                // split/pop used to strip off any namespace prefixes\n                if(node.parentNode.nodeName.split(':').pop() === \"Service\") {\n                    // We're parsing a service description\n                    serviceOrCoverageOfferingBrief['abstract'] = this.getChildValue(node);\n                }\n                else {      // node.parentNode.nodeName === \"CoverageOfferingBrief\"\n                    // We\"re parsing a dataset\n                    serviceOrCoverageOfferingBrief.title = this.getChildValue(node);\n                }\n            },\n            \"lonLatEnvelope\": function(node, coverageOfferingBrief) {\n                var nodeList = this.getElementsByTagNameNS(node, \"http://www.opengis.net/gml\", \"pos\");\n\n                // We expect two nodes here, to create the corners of a bounding box\n                if(nodeList.length == 2) {\n                    var min = {};\n                    var max = {};\n\n                    this.xy = true; // Affirm we don't want our coordinates switched around\n                    this.readers.gml.pos.apply(this, [nodeList[0], min]);\n                    this.readers.gml.pos.apply(this, [nodeList[1], max]);\n\n                    coverageOfferingBrief.lonLatEnvelope = {};\n                    coverageOfferingBrief.lonLatEnvelope.srsName = node.getAttribute(\"srsName\");\n                    coverageOfferingBrief.lonLatEnvelope.min = min.points[0];\n                    coverageOfferingBrief.lonLatEnvelope.max = max.points[0];\n                }\n            }\n        },\n        \"gml\": OpenLayers.Format.GML.v3.prototype.readers[\"gml\"]\n    },\n    \n    CLASS_NAME: \"OpenLayers.Format.WCSCapabilities.v1_0_0\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/WCSCapabilities/v1.js\n * @requires OpenLayers/Format/OWSCommon/v1_1_0.js\n */\n\n/**\n * Class: OpenLayers.Format.WCSCapabilities/v1_1_0\n * Read WCS Capabilities version 1.1.0.\n * \n * Inherits from:\n *  - <OpenLayers.Format.WCSCapabilities.v1>\n */\nOpenLayers.Format.WCSCapabilities.v1_1_0 = OpenLayers.Class(\n    OpenLayers.Format.WCSCapabilities.v1, {\n\n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        wcs: \"http://www.opengis.net/wcs/1.1\",\n        xlink: \"http://www.w3.org/1999/xlink\",\n        xsi: \"http://www.w3.org/2001/XMLSchema-instance\",\n        ows: \"http://www.opengis.net/ows/1.1\"\n    },\n\n    /**\n     * APIProperty: errorProperty\n     * {String} Which property of the returned object to check for in order to\n     * determine whether or not parsing has failed. In the case that the\n     * errorProperty is undefined on the returned object, the document will be\n     * run through an OGCExceptionReport parser.\n     */\n    errorProperty: \"operationsMetadata\",\n\n    /**\n     * Constructor: OpenLayers.Format.WCSCapabilities.v1_1_0\n     * Create a new parser for WCS capabilities version 1.1.0.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"wcs\": OpenLayers.Util.applyDefaults({\n            // In 1.0.0, this was WCS_Capabilties, in 1.1.0, it's Capabilities\n            \"Capabilities\": function(node, obj) {           \n                this.readChildNodes(node, obj);\n            },\n            \"Contents\": function(node, request) {\n                request.contentMetadata = [];\n                this.readChildNodes(node, request.contentMetadata);\n            },\n            \"CoverageSummary\": function(node, contentMetadata) {\n                var coverageSummary = {};\n                // Read the summary:\n                this.readChildNodes(node, coverageSummary);   \n\n                // Add it to the contentMetadata array:  \n                contentMetadata.push(coverageSummary);                 \n            },\n            \"Identifier\": function(node, coverageSummary) {\n                coverageSummary.identifier = this.getChildValue(node);\n            },\n            \"Title\": function(node, coverageSummary) {\n              coverageSummary.title = this.getChildValue(node);\n            },\n            \"Abstract\": function(node, coverageSummary) {\n                coverageSummary[\"abstract\"] = this.getChildValue(node);\n            },\n            \"SupportedCRS\": function(node, coverageSummary) {\n                var crs = this.getChildValue(node);\n                if(crs) {\n                    if(!coverageSummary.supportedCRS) { \n                        coverageSummary.supportedCRS = [];\n                    }\n                    coverageSummary.supportedCRS.push(crs);\n                }\n            },\n            \"SupportedFormat\": function(node, coverageSummary) {\n                var format = this.getChildValue(node);\n                if(format) {\n                    if(!coverageSummary.supportedFormat) { \n                        coverageSummary.supportedFormat = [];\n                    }\n                    coverageSummary.supportedFormat.push(format);\n                }\n            }\n        }, OpenLayers.Format.WCSCapabilities.v1.prototype.readers[\"wcs\"]),\n        \"ows\": OpenLayers.Util.applyDefaults({\n            // ows puts keywords in a dictionary, which doesn't make a\n            // lot of sense in this context; we just want a list, so we'll\n            // override this aspect of the ows parsing.\n            \"Keywords\": function(node, serviceIdentification) {\n                serviceIdentification.keywords = [];\n                this.readChildNodes(node, serviceIdentification.keywords);\n            },\n            \"Keyword\": function(node, keywords) {\n                // Append the keyword to the keywords list\n                keywords.push(this.getChildValue(node));   \n            }\n        }, OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers[\"ows\"])\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.WCSCapabilities.v1_1_0\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for \n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML/VersionedOGC.js\n */\n\n/**\n * Class: OpenLayers.Format.WCSDescribeCoverage\n * Parse results from WCS DescribeCoverage request.\n * \n * Inherits from:\n *  - <OpenLayers.Format.XML.VersionedOGC>\n */\nOpenLayers.Format.WCSDescribeCoverage = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {\n    \n    /**\n     * APIProperty: defaultVersion\n     * {String} Version number to assume if none found.  Default is \"1.1.0\".\n     */\n    defaultVersion: \"1.1.0\",\n\n    /**\n     * Constructor: OpenLayers.Format.WCSDescribeCoverage\n     * Create a new parser for WCS DescribeCoverage response.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * APIMethod: read\n     * Read response data from a string, and return a list of coverage descriptions. \n     * \n     * Parameters: \n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Array} List of coverage descriptions.\n     */\n   \n    CLASS_NAME: \"OpenLayers.Format.WCSDescribeCoverage\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for \n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/WCSDescribeCoverage.js\n * @requires OpenLayers/Format/XML.js\n */\n\n/**\n * Class: OpenLayers.Format.WCSDescribeCoverage.v1\n * Abstract class not to be instantiated directly.\n * \n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.WCSDescribeCoverage.v1 = OpenLayers.Class(\n    OpenLayers.Format.XML, {\n\n    regExes: {\n        trimSpace: (/^\\s*|\\s*$/g),\n        splitSpace: (/\\s+/)\n    },\n\n    /**\n     * Property: defaultPrefix\n     */\n    defaultPrefix: \"wcs\",\n\n    /**\n     * APIMethod: read\n     *\n     * Parameters:\n     * data - {DOMElement|String} A WCS DescribeCoverage document.\n     *\n     * Returns:\n     * {Object} An object representing the WCS DescribeCoverage response.\n     */\n    read: function(data) {\n        if(typeof data == \"string\") { \n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n        if(data && data.nodeType == 9) {\n            data = data.documentElement;\n        }\n        var schema = {};\n        if (data.nodeName.split(\":\").pop() === 'ExceptionReport') {\n            // an exception must have occurred, so parse it\n            var parser = new OpenLayers.Format.OGCExceptionReport();\n            schema.error = parser.read(data);\n        } else {\n            this.readNode(data, schema);\n        }\n        return schema;\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.WCSDescribeCoverage.v1\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for \n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/WCSDescribeCoverage/v1.js\n * @requires OpenLayers/Format/OWSCommon/v1_0_0.js\n * @requires OpenLayers/Format/GML/v3.js\n * @requires OpenLayers/Format/WCSCapabilities/v1_0_0.js\n */\n\n/**\n * Class: OpenLayers.Format.WCSDescribeCoverage/v1_0_0\n * Read WCS DescribeCoverage version 1.0.0.\n * \n * Inherits from:\n *  - <OpenLayers.Format.WCSDescribeCoverage.v1>\n */\nOpenLayers.Format.WCSDescribeCoverage.v1_0_0 = OpenLayers.Class(\n    OpenLayers.Format.WCSDescribeCoverage.v1, {\n\n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        wcs: \"http://www.opengis.net/wcs\",\n        xlink: \"http://www.w3.org/1999/xlink\",\n        xsi: \"http://www.w3.org/2001/XMLSchema-instance\",\n        ows: \"http://www.opengis.net/ows\",\n        gml: \"http://www.opengis.net/gml\"\n    },\n\n    /**\n     * Constructor: OpenLayers.Format.WCSDescribeCoverage.v1_0_0\n     * Create a new parser for WCS DescribeCoverage version 1.0.0.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"wcs\": {\n            // Root object, contains one or more CoverageDecription entries\n            // In 1.0.0, this is CoverageDescription, in 1.1.0, \n            // it will be CoverageDescriptions (plural)\n            \"CoverageDescription\": function(node, obj) {\n                obj.coverageDescriptions = {};        \n                this.readChildNodes(node, obj.coverageDescriptions);\n\n                // Make a list of keys for easy access\n                obj.coverageDescriptionKeys = [];\n                for(var key in obj.coverageDescriptions) {\n                    obj.coverageDescriptionKeys.push(key);\n                }\n            },\n            // In 1.1.0, this element is called CoverageDescription.  We'll use\n            // that name because it's... better.\n            \"CoverageOffering\": function(node, descriptions) {\n                var description = {};\n                this.readChildNodes(node, description);\n                descriptions[description.identifier] = description;\n\n                // Provide a consistent handle on the native CRS \n                description.nativeCRS = description.supportedCRSs.nativeCRSs[0];\n            },\n            // As with GetCapabilities, we'll use the 1.1.0 element name\n            // (identifier) because it is less ambiguous\n            \"name\": function(node, description) {\n                description.identifier = this.getChildValue(node);\n            },\n            // As with GetCapabilities, we'll use the 1.1.0 element name\n            // (title) because it is less ambiguous\n            \"label\": function(node, description) {\n                description.title = this.getChildValue(node);\n            },\n            // This format is the same as that used by GetCapabilities 1.0.0,\n            // so we can reuse that reader\n            \"lonLatEnvelope\": function(node, description) {\n                OpenLayers.Format.WCSCapabilities.v1_0_0.prototype.readers.wcs.lonLatEnvelope.call(this, node, description);\n            },\n            // Essentially the same as domain in 1.1.0\n            \"domainSet\": function(node, description) {\n                description.domain = {};\n                this.readChildNodes(node, description.domain);\n            },\n            \"spatialDomain\": function(node, domain) {\n                domain.spatialDomain = { boundingBoxes: {} };\n                this.readChildNodes(node, domain.spatialDomain);\n            },\n             \"nativeCRSs\": function(node, description) {\n                if(!description.nativeCRSs) {\n                    description.nativeCRSs = [];\n                }\n                var crs = this.getChildValue(node);\n                description.nativeCRSs.push(crs);\n            },\n            \"supportedCRSs\": function(node, description) {\n                if(!description.supportedCRSs) {\n                    description.supportedCRSs = [];\n                }\n                this.readChildNodes(node, description.supportedCRSs)\n            },\n            // There will be several of these within the supportedCRSs tag\n            \"requestResponseCRSs\" : function(node, supportedCRSs) {\n                supportedCRSs.push(this.getChildValue(node));\n            },\n             \"supportedFormats\": function(node, description) {\n                if(!description.supportedFormats) {\n                    description.supportedFormats = [];\n                }\n                this.readChildNodes(node, description.supportedFormats)\n            },\n            // There will be several of these within the supportedFormats tag\n            \"formats\" : function(node, supportedFormats) {\n                supportedFormats.push(this.getChildValue(node));\n            }\n        }, \n \n        \"ows\": OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers[\"ows\"],\n        \"gml\": OpenLayers.Util.applyDefaults({\n            // Use custom Envelope reader that understands the srsName attribute\n            \"Envelope\": function(node, spatialDomain) {\n                var srsName = node.getAttribute(\"srsName\");\n                if(!srsName) { // No SRS?  What does this envelope mean?!?\n                    return;\n                }\n\n                var obj = {points: []};\n                this.readChildNodes(node, obj);\n\n                var min = obj.points[0];\n                var max = obj.points[1];\n                var bounds = new OpenLayers.Bounds(min.x, min.y, max.x, max.y);\n                spatialDomain.boundingBoxes[srsName] = bounds;\n            }\n        }, OpenLayers.Format.GML.v3.prototype.readers[\"gml\"])\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.WCSDescribeCoverage.v1_0_0\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for \n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/WCSDescribeCoverage/v1.js\n * @requires OpenLayers/Format/OWSCommon/v1_1_0.js\n * @requires OpenLayers/BaseTypes/Bounds.js\n */\n\n/**\n * Class: OpenLayers.Format.WCSDescribeCoverage/v1_1_0\n * Read WCS DescribeCoverage version 1.1.0.\n * \n * Inherits from:\n *  - <OpenLayers.Format.WCSDescribeCoverage.v1>\n */\nOpenLayers.Format.WCSDescribeCoverage.v1_1_0 = OpenLayers.Class(\n    OpenLayers.Format.WCSDescribeCoverage.v1, {\n\n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     * The owsesri namespace is provided to workaround a broken version\n     * of ArcGIS Server that specifies an out-of-date schema.\n     */\n    namespaces: {\n        wcs: \"http://www.opengis.net/wcs/1.1\",\n        xlink: \"http://www.w3.org/1999/xlink\",\n        xsi: \"http://www.w3.org/2001/XMLSchema-instance\",\n        ows: \"http://www.opengis.net/ows/1.1\",\n        owsesri: \"http://www.opengis.net/ows\"\n    },\n\n    /**\n     * Constructor: OpenLayers.Format.WCSDescribeCoverage.v1_1_0\n     * Create a new parser for WCS DescribeCoverage version 1.1.0.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"wcs\": {\n            // Root object, contains one or more CoverageDescription entries\n            // In 1.0.0, this was CoverageDescription, in 1.1.0, it's \n            // CoverageDescriptions (plural)\n            \"CoverageDescriptions\": function(node, obj) {\n                obj.coverageDescriptions = {};        \n                this.readChildNodes(node, obj.coverageDescriptions);\n\n                obj.coverageDescriptionKeys = [];\n                for(var key in obj.coverageDescriptions) {\n                    obj.coverageDescriptionKeys.push(key);\n                }\n                // This would be more efficient, but only in newer browsers:\n                // obj.coverageDescriptionKeys = Object.keys(obj.coverageDescriptions);\n            },\n            // In 1.0.0, CoverageDescription was called CoverageOffering\n            \"CoverageDescription\": function(node, descriptions) {\n                var description = {};\n                this.readChildNodes(node, description);\n                descriptions[description.identifier] = description;\n\n                // Provide a consistent handle on the native CRS \n                description.nativeCRS = \n                        description.domain.spatialDomain.gridCRS.gridBaseCRS;\n            },\n            \"Identifier\": function(node, description) {\n                description.identifier = this.getChildValue(node);\n            },\n            \"Title\": function(node, description) {\n                description.title = this.getChildValue(node);\n            },\n            \"Domain\": function(node, description) {\n                description.domain = {};\n                this.readChildNodes(node, description.domain);\n            },\n            \"SpatialDomain\": function(node, domain) {\n                domain.spatialDomain = { boundingBoxes:{} };\n\n                var bb = { BoundingBox:[] };\n\n                this.readChildNodes(node, bb);\n\n                // Repack structure so bounding box list is indexed by CRS --\n                // this will make it easier to find the one we want, and \n                // provides a consistent structure with 1.0.0\n                for(var i=0, len=bb.BoundingBox.length; i<len;i++) {\n                    if(!!bb.BoundingBox[i].crs) {\n                        domain.spatialDomain.boundingBoxes[bb.BoundingBox[i].crs] = \n                            bb.BoundingBox[i].bounds;\n                        }\n                }\n                domain.spatialDomain.gridCRS = bb.gridCRS;\n            },\n            \"GridCRS\": function(node, spatialDomain) {\n                spatialDomain.gridCRS = {};\n                this.readChildNodes(node, spatialDomain.gridCRS);\n            },\n            \"GridBaseCRS\": function(node, gridCRS) {\n                gridCRS.gridBaseCRS = this.getChildValue(node);\n            },\n            \"GridType\": function(node, gridCRS) {\n                gridCRS.gridType = this.getChildValue(node);\n            },\n            \"GridOrigin\": function(node, gridCRS) {\n                var xy = this.getChildValue(node).split(' '); \n                if(xy.length == 2) {\n                    gridCRS.gridOrigin = {};\n                    gridCRS.gridOrigin.x = Number(xy[0]);\n                    gridCRS.gridOrigin.y = Number(xy[1]);\n                }\n            },\n            \"GridOffsets\": function(node, gridCRS) {\n                var xy = this.getChildValue(node).split(' '); \n                if(xy.length == 2) {\n                    gridCRS.gridOffsets = {};\n                    gridCRS.gridOffsets.x = Number(xy[0]);\n                    gridCRS.gridOffsets.y = Number(xy[1]);\n                }\n            },\n            \"GridCS\": function(node, gridCRS) {\n                gridCRS.gridCS = this.getChildValue(node);\n            },\n            \"SupportedCRS\": function(node, description) {\n                if(!!!description.supportedCRSs) {\n                    description.supportedCRSs = [];\n                }\n\n                var crs = this.getChildValue(node);\n                description.supportedCRSs.push(crs);\n            },\n            \"SupportedFormat\": function(node, description) {\n                if(!!!description.supportedFormats) {\n                    description.supportedFormats = [];\n                }\n\n                var format = this.getChildValue(node);\n                description.supportedFormats.push(format);\n            }\n        },\n        \"ows\": OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers[\"ows\"],\n        \"owsesri\": OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers[\"ows\"]\n\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.WCSDescribeCoverage.v1_1_0\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML/VersionedOGC.js\n */\n\n/**\n * Class: OpenLayers.Format.WFSCapabilities\n * Read WFS Capabilities.\n * \n * Inherits from:\n *  - <OpenLayers.Format.XML.VersionedOGC>\n */\nOpenLayers.Format.WFSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {\n    \n    /**\n     * APIProperty: defaultVersion\n     * {String} Version number to assume if none found.  Default is \"1.1.0\".\n     */\n    defaultVersion: \"1.1.0\",\n\n    /**\n     * Constructor: OpenLayers.Format.WFSCapabilities\n     * Create a new parser for WFS capabilities.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * APIMethod: read\n     * Read capabilities data from a string, and return a list of layers. \n     * \n     * Parameters: \n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Array} List of named layers.\n     */\n    \n    CLASS_NAME: \"OpenLayers.Format.WFSCapabilities\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/WFSCapabilities.js\n */\n\n/**\n * Class: OpenLayers.Format.WFSCapabilities.v1\n * Abstract class not to be instantiated directly.\n * \n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.WFSCapabilities.v1 = OpenLayers.Class(\n    OpenLayers.Format.XML, {\n\n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        wfs: \"http://www.opengis.net/wfs\",\n        xlink: \"http://www.w3.org/1999/xlink\",\n        xsi: \"http://www.w3.org/2001/XMLSchema-instance\",\n        ows: \"http://www.opengis.net/ows\"\n    },\n\n\n    /**\n     * APIProperty: errorProperty\n     * {String} Which property of the returned object to check for in order to\n     * determine whether or not parsing has failed. In the case that the\n     * errorProperty is undefined on the returned object, the document will be\n     * run through an OGCExceptionReport parser.\n     */\n    errorProperty: \"featureTypeList\",\n\n    /**\n     * Property: defaultPrefix\n     */\n    defaultPrefix: \"wfs\",\n    \n    /**\n     * Constructor: OpenLayers.Format.WFSCapabilities.v1_1\n     * Create an instance of one of the subclasses.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * APIMethod: read\n     * Read capabilities data from a string, and return a list of layers. \n     * \n     * Parameters: \n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Array} List of named layers.\n     */\n    read: function(data) {\n        if(typeof data == \"string\") {\n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n        var raw = data;\n        if(data && data.nodeType == 9) {\n            data = data.documentElement;\n        }\n        var capabilities = {};\n        this.readNode(data, capabilities);\n        return capabilities;\n    },\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"wfs\": {\n            \"WFS_Capabilities\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"FeatureTypeList\": function(node, request) {\n                request.featureTypeList = {\n                    featureTypes: []\n                };\n                this.readChildNodes(node, request.featureTypeList);\n            },\n            \"FeatureType\": function(node, featureTypeList) {\n                var featureType = {};\n                this.readChildNodes(node, featureType);\n                featureTypeList.featureTypes.push(featureType);\n            },\n            \"Name\": function(node, obj) {\n                var name = this.getChildValue(node);\n                if(name) {\n                    var parts = name.split(\":\");\n                    obj.name = parts.pop();\n                    if(parts.length > 0) {\n                        obj.featureNS = this.lookupNamespaceURI(node, parts[0]);\n                    }\n                }\n            },\n            \"Title\": function(node, obj) {\n                var title = this.getChildValue(node);\n                if(title) {\n                    obj.title = title;\n                }\n            },\n            \"Abstract\": function(node, obj) {\n                var abst = this.getChildValue(node);\n                if(abst) {\n                    obj[\"abstract\"] = abst;\n                }\n            }\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.WFSCapabilities.v1\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/WFSCapabilities/v1.js\n */\n\n/**\n * Class: OpenLayers.Format.WFSCapabilities/v1_0_0\n * Read WFS Capabilities version 1.0.0.\n * \n * Inherits from:\n *  - <OpenLayers.Format.WFSCapabilities.v1>\n */\nOpenLayers.Format.WFSCapabilities.v1_0_0 = OpenLayers.Class(\n    OpenLayers.Format.WFSCapabilities.v1, {\n    \n    /**\n     * Constructor: OpenLayers.Format.WFSCapabilities.v1_0_0\n     * Create a new parser for WFS capabilities version 1.0.0.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"wfs\": OpenLayers.Util.applyDefaults({\n            \"Service\": function(node, capabilities) {\n                capabilities.service = {};\n                this.readChildNodes(node, capabilities.service);\n            },\n            \"Fees\": function(node, service) {\n                var fees = this.getChildValue(node);\n                if (fees && fees.toLowerCase() != \"none\") {\n                    service.fees = fees;\n                }\n            },\n            \"AccessConstraints\": function(node, service) {\n                var constraints = this.getChildValue(node);\n                if (constraints && constraints.toLowerCase() != \"none\") {\n                    service.accessConstraints = constraints;\n                }\n            },\n            \"OnlineResource\": function(node, service) {\n                var onlineResource = this.getChildValue(node);\n                if (onlineResource && onlineResource.toLowerCase() != \"none\") {\n                    service.onlineResource = onlineResource;\n                }\n            },\n            \"Keywords\": function(node, service) {\n                var keywords = this.getChildValue(node);\n                if (keywords && keywords.toLowerCase() != \"none\") {\n                    service.keywords = keywords.split(', ');\n                }\n            },\n            \"Capability\": function(node, capabilities) {\n                capabilities.capability = {};\n                this.readChildNodes(node, capabilities.capability);\n            },\n            \"Request\": function(node, obj) {\n                obj.request = {};\n                this.readChildNodes(node, obj.request);\n            },\n            \"GetFeature\": function(node, request) {\n                request.getfeature = {\n                    href: {}, // DCPType\n                    formats: [] // ResultFormat\n                };\n                this.readChildNodes(node, request.getfeature);\n            },\n            \"ResultFormat\": function(node, obj) {\n                var children = node.childNodes;\n                var childNode;\n                for(var i=0; i<children.length; i++) {\n                    childNode = children[i];\n                    if(childNode.nodeType == 1) {\n                        obj.formats.push(childNode.nodeName);\n                    }\n                }\n            },\n            \"DCPType\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"HTTP\": function(node, obj) {\n                this.readChildNodes(node, obj.href);\n            },\n            \"Get\": function(node, obj) {\n                obj.get = node.getAttribute(\"onlineResource\");\n            },\n            \"Post\": function(node, obj) {\n                obj.post = node.getAttribute(\"onlineResource\");\n            },\n            \"SRS\": function(node, obj) {\n                var srs = this.getChildValue(node);\n                if (srs) {\n                    obj.srs = srs;\n                }\n            },\n            \"LatLongBoundingBox\": function(node, obj) {\n                obj.latLongBoundingBox = [\n                    parseFloat(node.getAttribute(\"minx\")),\n                    parseFloat(node.getAttribute(\"miny\")),\n                    parseFloat(node.getAttribute(\"maxx\")),\n                    parseFloat(node.getAttribute(\"maxy\"))\n                ];\n            }\n        }, OpenLayers.Format.WFSCapabilities.v1.prototype.readers[\"wfs\"])\n    },\n    \n    CLASS_NAME: \"OpenLayers.Format.WFSCapabilities.v1_0_0\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/WFSCapabilities/v1.js\n * @requires OpenLayers/Format/OWSCommon/v1.js\n */\n\n/**\n * Class: OpenLayers.Format.WFSCapabilities/v1_1_0\n * Read WFS Capabilities version 1.1.0.\n * \n * Inherits from:\n *  - <OpenLayers.Format.WFSCapabilities>\n */\nOpenLayers.Format.WFSCapabilities.v1_1_0 = OpenLayers.Class(\n    OpenLayers.Format.WFSCapabilities.v1, {\n\n    /**\n     * Property: regExes\n     * Compiled regular expressions for manipulating strings.\n     */\n    regExes: {\n        trimSpace: (/^\\s*|\\s*$/g),\n        removeSpace: (/\\s*/g),\n        splitSpace: (/\\s+/),\n        trimComma: (/\\s*,\\s*/g)\n    },\n    \n    /**\n     * Constructor: OpenLayers.Format.WFSCapabilities.v1_1_0\n     * Create a new parser for WFS capabilities version 1.1.0.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"wfs\": OpenLayers.Util.applyDefaults({\n            \"DefaultSRS\": function(node, obj) {\n                var defaultSRS = this.getChildValue(node);\n                if (defaultSRS) {\n                    obj.srs = defaultSRS;\n                }\n            }\n        }, OpenLayers.Format.WFSCapabilities.v1.prototype.readers[\"wfs\"]),\n        \"ows\": OpenLayers.Format.OWSCommon.v1.prototype.readers.ows\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.WFSCapabilities.v1_1_0\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/WFSCapabilities.js\n * @requires OpenLayers/Format/OWSCommon/v1_1_0.js\n */\n\n/**\n * Class: OpenLayers.Format.WFSCapabilities.v2_0_0\n * Abstract class not to be instantiated directly.\n *\n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.WFSCapabilities.v2_0_0 = OpenLayers.Class(\n    OpenLayers.Format.XML, {\n\n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        wfs: \"http://www.opengis.net/wfs/2.0\",\n        xlink: \"http://www.w3.org/1999/xlink\",\n        xsi: \"http://www.w3.org/2001/XMLSchema-instance\",\n        ows: \"http://www.opengis.net/ows/1.1\"\n    },\n\n    /**\n     * Property: regExes\n     * Compiled regular expressions for manipulating strings.\n     */\n    regExes: {\n        trimSpace: (/^\\s*|\\s*$/g),\n        removeSpace: (/\\s*/g),\n        splitSpace: (/\\s+/),\n        trimComma: (/\\s*,\\s*/g)\n    },\n\n    /**\n     * APIProperty: errorProperty\n     * {String} Which property of the returned object to check for in order to\n     * determine whether or not parsing has failed. In the case that the\n     * errorProperty is undefined on the returned object, the document will be\n     * run through an OGCExceptionReport parser.\n     */\n    errorProperty: \"featureTypeList\",\n\n    /**\n     * Property: defaultPrefix\n     */\n    defaultPrefix: \"wfs\",\n    \n    /**\n     * Constructor: OpenLayers.Format.WFSCapabilities.v1_1\n     * Create an instance of one of the subclasses.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * APIMethod: read\n     * Read capabilities data from a string, and return a list of layers. \n     * \n     * Parameters: \n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Array} List of named layers.\n     */\n    read: function(data) {\n        if(typeof data == \"string\") {\n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n        var raw = data;\n        if(data && data.nodeType == 9) {\n            data = data.documentElement;\n        }\n        var capabilities = {};\n        this.readNode(data, capabilities);\n        return capabilities;\n    },\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"wfs\": {\n            \"WFS_Capabilities\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"FeatureTypeList\": function(node, request) {\n                request.featureTypeList = {\n                    featureTypes: []\n                };\n                this.readChildNodes(node, request.featureTypeList);\n            },\n            \"FeatureType\": function(node, featureTypeList) {\n                var featureType = {};\n                this.readChildNodes(node, featureType);\n                featureTypeList.featureTypes.push(featureType);\n            },\n            \"Name\": function(node, obj) {\n                var name = this.getChildValue(node);\n                if(name) {\n                    var parts = name.split(\":\");\n                    obj.name = parts.pop();\n                    if(parts.length > 0) {\n                        obj.featureNS = this.lookupNamespaceURI(node, parts[0]);\n                    }\n                }\n            },\n            \"Title\": function(node, obj) {\n                var title = this.getChildValue(node);\n                if(title) {\n                    obj.title = title;\n                }\n            },\n            \"Abstract\": function(node, obj) {\n                var abst = this.getChildValue(node);\n                if(abst) {\n                    obj[\"abstract\"] = abst;\n                }\n            },\n            \"DefaultCRS\": function(node, obj) {\n                var defaultCRS = this.getChildValue(node);\n                if (defaultCRS) {\n                    obj.srs = defaultCRS;\n                }\n            }\n        },\n        \"ows\": OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.WFSCapabilities.v2_0_0\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML.js\n * @requires OpenLayers/Format/OGCExceptionReport.js\n */\n \n/**\n * Class: OpenLayers.Format.WFSDescribeFeatureType\n * Read WFS DescribeFeatureType response\n * \n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.WFSDescribeFeatureType = OpenLayers.Class(\n    OpenLayers.Format.XML, {\n\n    /**\n     * Property: regExes\n     * Compiled regular expressions for manipulating strings.\n     */\n    regExes: {\n        trimSpace: (/^\\s*|\\s*$/g)\n    },\n    \n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        xsd: \"http://www.w3.org/2001/XMLSchema\"\n    },\n    \n    /**\n     * Constructor: OpenLayers.Format.WFSDescribeFeatureType\n     * Create a new parser for WFS DescribeFeatureType responses.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    \n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"xsd\": {\n            \"schema\": function(node, obj) {\n                var complexTypes = [];\n                var customTypes = {};\n                var schema = {\n                    complexTypes: complexTypes,\n                    customTypes: customTypes\n                };\n                var i, len;\n                \n                this.readChildNodes(node, schema);\n\n                var attributes = node.attributes;\n                var attr, name;\n                for(i=0, len=attributes.length; i<len; ++i) {\n                    attr = attributes[i];\n                    name = attr.name;\n                    if(name.indexOf(\"xmlns\") === 0) {\n                        this.setNamespace(name.split(\":\")[1] || \"\", attr.value);\n                    } else {\n                        obj[name] = attr.value;\n                    }\n                }\n                obj.featureTypes = complexTypes;                \n                obj.targetPrefix = this.namespaceAlias[obj.targetNamespace];\n                \n                // map complexTypes to names of customTypes\n                var complexType, customType;\n                for(i=0, len=complexTypes.length; i<len; ++i) {\n                    complexType = complexTypes[i];\n                    customType = customTypes[complexType.typeName];\n                    if(customTypes[complexType.typeName]) {\n                        complexType.typeName = customType.name;\n                    }\n                }\n            },\n            \"complexType\": function(node, obj) {\n                var complexType = {\n                    // this is a temporary typeName, it will be overwritten by\n                    // the schema reader with the metadata found in the\n                    // customTypes hash\n                    \"typeName\": node.getAttribute(\"name\")\n                };\n                this.readChildNodes(node, complexType);\n                obj.complexTypes.push(complexType);\n            },\n            \"complexContent\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"extension\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"sequence\": function(node, obj) {\n                var sequence = {\n                    elements: []\n                };\n                this.readChildNodes(node, sequence);\n                obj.properties = sequence.elements;\n            },\n            \"element\": function(node, obj) {\n                var type;\n                if(obj.elements) {\n                    var element = {};\n                    var attributes = node.attributes;\n                    var attr;\n                    for(var i=0, len=attributes.length; i<len; ++i) {\n                        attr = attributes[i];\n                        element[attr.name] = attr.value;\n                    }\n                    \n                    type = element.type;\n                    if(!type) {\n                        type = {};\n                        this.readChildNodes(node, type);\n                        element.restriction = type;\n                        element.type = type.base;\n                    }\n                    var fullType = type.base || type;\n                    element.localType = fullType.split(\":\").pop();\n                    obj.elements.push(element);\n                    this.readChildNodes(node, element);\n                }\n                \n                if(obj.complexTypes) {\n                    type = node.getAttribute(\"type\");\n                    var localType = type.split(\":\").pop();\n                    obj.customTypes[localType] = {\n                        \"name\": node.getAttribute(\"name\"),\n                        \"type\": type\n                    };\n                }\n            },\n            \"annotation\": function(node, obj) {\n                obj.annotation = {};\n                this.readChildNodes(node, obj.annotation);\n            },\n            \"appinfo\": function(node, obj) {\n                if (!obj.appinfo) {\n                    obj.appinfo = [];\n                }\n                obj.appinfo.push(this.getChildValue(node));\n            },\n            \"documentation\": function(node, obj) {\n                if (!obj.documentation) {\n                    obj.documentation = [];\n                }\n                var value = this.getChildValue(node);\n                obj.documentation.push({\n                    lang: node.getAttribute(\"xml:lang\"),\n                    textContent: value.replace(this.regExes.trimSpace, \"\")\n                });\n            },\n            \"simpleType\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"restriction\": function(node, obj) {\n                obj.base = node.getAttribute(\"base\");\n                this.readRestriction(node, obj);\n            }\n        }\n    },\n    \n    /**\n     * Method: readRestriction\n     * Reads restriction defined in the child nodes of a restriction element\n     * \n     * Parameters:\n     * node - {DOMElement} the node to parse\n     * obj - {Object} the object that receives the read result\n     */\n    readRestriction: function(node, obj) {\n        var children = node.childNodes;\n        var child, nodeName, value;\n        for(var i=0, len=children.length; i<len; ++i) {\n            child = children[i];\n            if(child.nodeType == 1) {\n                nodeName = child.nodeName.split(\":\").pop();\n                value = child.getAttribute(\"value\");\n                if(!obj[nodeName]) {\n                    obj[nodeName] = value;\n                } else {\n                    if(typeof obj[nodeName] == \"string\") {\n                        obj[nodeName] = [obj[nodeName]];\n                    }\n                    obj[nodeName].push(value);\n                }\n            }\n        }\n    },\n    \n    /**\n     * Method: read\n     *\n     * Parameters:\n     * data - {DOMElement|String} A WFS DescribeFeatureType document.\n     *\n     * Returns:\n     * {Object} An object representing the WFS DescribeFeatureType response.\n     */\n    read: function(data) {\n        if(typeof data == \"string\") { \n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n        if(data && data.nodeType == 9) {\n            data = data.documentElement;\n        }\n        var schema = {};\n        if (data.nodeName.split(\":\").pop() === 'ExceptionReport') {\n            // an exception must have occurred, so parse it\n            var parser = new OpenLayers.Format.OGCExceptionReport();\n            schema.error = parser.read(data);\n        } else {\n            this.readNode(data, schema);\n        }\n        return schema;\n    },\n    \n    CLASS_NAME: \"OpenLayers.Format.WFSDescribeFeatureType\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML/VersionedOGC.js\n */\n\n/**\n * Class: OpenLayers.Format.WMSDescribeLayer\n * Read SLD WMS DescribeLayer response\n * DescribeLayer is meant to couple WMS to WFS and WCS\n * \n * Inherits from:\n *  - <OpenLayers.Format.XML.VersionedOGC>\n */\nOpenLayers.Format.WMSDescribeLayer = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {\n\n    /**\n     * APIProperty: defaultVersion\n     * {String} Version number to assume if none found.  Default is \"1.1.1\".\n     */\n    defaultVersion: \"1.1.1\",\n   \n    /**\n     * Constructor: OpenLayers.Format.WMSDescribeLayer\n     * Create a new parser for WMS DescribeLayer responses.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * APIMethod: read\n     * Read DescribeLayer data from a string, and return the response. \n     * The OGC currently defines 2 formats which are allowed for output,\n     * so we need to parse these 2 types\n     * \n     * Parameters: \n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Array} Array of {<LayerDescription>} objects which have:\n     * - {String} owsType: WFS/WCS\n     * - {String} owsURL: the online resource\n     * - {String} typeName: the name of the typename on the service\n     */\n    \n    CLASS_NAME: \"OpenLayers.Format.WMSDescribeLayer\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/WMSDescribeLayer.js\n * @requires OpenLayers/Format/OGCExceptionReport.js\n */\n\n/**\n * Class: OpenLayers.Format.WMSDescribeLayer.v1_1_1\n * Read SLD WMS DescribeLayer response for WMS 1.1.X\n * WMS 1.1.X is tightly coupled to SLD 1.0.0\n *\n * Example DescribeLayer request: \n * http://demo.opengeo.org/geoserver/wms?request=DescribeLayer&version=1.1.1&layers=topp:states\n *\n * Inherits from:\n *  - <OpenLayers.Format.WMSDescribeLayer>\n */\nOpenLayers.Format.WMSDescribeLayer.v1_1_1 = OpenLayers.Class(\n    OpenLayers.Format.WMSDescribeLayer, {\n    \n    /**\n     * Constructor: OpenLayers.Format.WMSDescribeLayer\n     * Create a new parser for WMS DescribeLayer responses.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    initialize: function(options) {\n        OpenLayers.Format.WMSDescribeLayer.prototype.initialize.apply(this, \n            [options]);\n    },\n\n    /**\n     * APIMethod: read\n     * Read DescribeLayer data from a string, and return the response. \n     * The OGC defines 2 formats which are allowed for output,\n     * so we need to parse these 2 types for version 1.1.X\n     * \n     * Parameters: \n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Object} Object with a layerDescriptions property, which holds an Array\n     * of {<LayerDescription>} objects which have:\n     * - {String} owsType: WFS/WCS\n     * - {String} owsURL: the online resource\n     * - {String} typeName: the name of the typename on the owsType service\n     * - {String} layerName: the name of the WMS layer we did a lookup for\n     */\n    read: function(data) {\n        if(typeof data == \"string\") {\n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n        var root = data.documentElement;\n        var children = root.childNodes; \n        var describelayer = {layerDescriptions: []};\n        var childNode, nodeName;\n        for(var i=0; i<children.length; ++i) { \n            childNode = children[i];\n            nodeName = childNode.nodeName; \n            if (nodeName == 'LayerDescription') {\n                var layerName = childNode.getAttribute('name');\n                var owsType = '';\n                var owsURL = '';\n                var typeName = '';\n                // check for owsType and owsURL attributes\n                if (childNode.getAttribute('owsType')) {\n                  owsType = childNode.getAttribute('owsType');\n                  owsURL = childNode.getAttribute('owsURL');\n                } else {\n                    // look for wfs or wcs attribute\n                    if (childNode.getAttribute('wfs') != '') {\n                        owsType = 'WFS';\n                        owsURL = childNode.getAttribute('wfs');\n                    } else if (childNode.getAttribute('wcs') != '') {\n                        owsType = 'WCS';\n                        owsURL = childNode.getAttribute('wcs');\n                    }\n                }\n                // look for Query child\n                var query = childNode.getElementsByTagName('Query');\n                if(query.length > 0) {\n                    typeName = query[0].getAttribute('typeName');\n                    if (!typeName) {\n                        // because of Ionic bug\n                        typeName = query[0].getAttribute('typename');\n                    }\n                }\n                var layerDescription = {\n                    layerName: layerName, owsType: owsType, \n                    owsURL: owsURL, typeName: typeName\n                };\n                describelayer.layerDescriptions.push(layerDescription);\n                \n                //TODO do this in deprecated.js instead:\n                // array style index for backwards compatibility\n                describelayer.length = describelayer.layerDescriptions.length;\n                describelayer[describelayer.length - 1] = layerDescription; \n                \n            } else if (nodeName == 'ServiceException') {\n                // an exception must have occurred, so parse it\n                var parser = new OpenLayers.Format.OGCExceptionReport();\n                return {\n                    error: parser.read(data)\n                };\n            }\n        }\n        return describelayer;\n    },\n    \n    CLASS_NAME: \"OpenLayers.Format.WMSDescribeLayer.v1_1_1\"\n\n});\n\n// Version alias - workaround for http://trac.osgeo.org/mapserver/ticket/2257\nOpenLayers.Format.WMSDescribeLayer.v1_1_0 =\n    OpenLayers.Format.WMSDescribeLayer.v1_1_1;\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format.js\n * @requires OpenLayers/Feature/Vector.js\n * @requires OpenLayers/Geometry/Point.js\n * @requires OpenLayers/Geometry/MultiPoint.js\n * @requires OpenLayers/Geometry/LineString.js\n * @requires OpenLayers/Geometry/MultiLineString.js\n * @requires OpenLayers/Geometry/Polygon.js\n * @requires OpenLayers/Geometry/MultiPolygon.js\n */\n\n/**\n * Class: OpenLayers.Format.WKT\n * Class for reading and writing Well-Known Text.  Create a new instance\n * with the <OpenLayers.Format.WKT> constructor.\n * \n * Inherits from:\n *  - <OpenLayers.Format>\n */\nOpenLayers.Format.WKT = OpenLayers.Class(OpenLayers.Format, {\n    \n    /**\n     * Constructor: OpenLayers.Format.WKT\n     * Create a new parser for WKT\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *           this instance\n     *\n     * Returns:\n     * {<OpenLayers.Format.WKT>} A new WKT parser.\n     */\n    initialize: function(options) {\n        this.regExes = {\n            'typeStr': /^\\s*(\\w+)\\s*\\(\\s*(.*)\\s*\\)\\s*$/,\n            'spaces': /\\s+/,\n            'parenComma': /\\)\\s*,\\s*\\(/,\n            'doubleParenComma': /\\)\\s*\\)\\s*,\\s*\\(\\s*\\(/,  // can't use {2} here\n            'trimParens': /^\\s*\\(?(.*?)\\)?\\s*$/\n        };\n        OpenLayers.Format.prototype.initialize.apply(this, [options]);\n    },\n\n    /**\n     * APIMethod: read\n     * Deserialize a WKT string and return a vector feature or an\n     * array of vector features.  Supports WKT for POINT, MULTIPOINT,\n     * LINESTRING, MULTILINESTRING, POLYGON, MULTIPOLYGON, and\n     * GEOMETRYCOLLECTION.\n     *\n     * Parameters:\n     * wkt - {String} A WKT string\n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector>|Array} A feature or array of features for\n     * GEOMETRYCOLLECTION WKT.\n     */\n    read: function(wkt) {\n        var features, type, str;\n        wkt = wkt.replace(/[\\n\\r]/g, \" \");\n        var matches = this.regExes.typeStr.exec(wkt);\n        if(matches) {\n            type = matches[1].toLowerCase();\n            str = matches[2];\n            if(this.parse[type]) {\n                features = this.parse[type].apply(this, [str]);\n            }\n            if (this.internalProjection && this.externalProjection) {\n                if (features && \n                    features.CLASS_NAME == \"OpenLayers.Feature.Vector\") {\n                    features.geometry.transform(this.externalProjection,\n                                                this.internalProjection);\n                } else if (features &&\n                           type != \"geometrycollection\" &&\n                           typeof features == \"object\") {\n                    for (var i=0, len=features.length; i<len; i++) {\n                        var component = features[i];\n                        component.geometry.transform(this.externalProjection,\n                                                     this.internalProjection);\n                    }\n                }\n            }\n        }    \n        return features;\n    },\n\n    /**\n     * APIMethod: write\n     * Serialize a feature or array of features into a WKT string.\n     *\n     * Parameters:\n     * features - {<OpenLayers.Feature.Vector>|Array} A feature or array of\n     *            features\n     *\n     * Returns:\n     * {String} The WKT string representation of the input geometries\n     */\n    write: function(features) {\n        var collection, geometry, isCollection;\n        if (features.constructor == Array) {\n            collection = features;\n            isCollection = true;\n        } else {\n            collection = [features];\n            isCollection = false;\n        }\n        var pieces = [];\n        if (isCollection) {\n            pieces.push('GEOMETRYCOLLECTION(');\n        }\n        for (var i=0, len=collection.length; i<len; ++i) {\n            if (isCollection && i>0) {\n                pieces.push(',');\n            }\n            geometry = collection[i].geometry;\n            pieces.push(this.extractGeometry(geometry));\n        }\n        if (isCollection) {\n            pieces.push(')');\n        }\n        return pieces.join('');\n    },\n\n    /**\n     * Method: extractGeometry\n     * Entry point to construct the WKT for a single Geometry object.\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry.Geometry>}\n     *\n     * Returns:\n     * {String} A WKT string of representing the geometry\n     */\n    extractGeometry: function(geometry) {\n        var type = geometry.CLASS_NAME.split('.')[2].toLowerCase();\n        if (!this.extract[type]) {\n            return null;\n        }\n        if (this.internalProjection && this.externalProjection) {\n            geometry = geometry.clone();\n            geometry.transform(this.internalProjection, this.externalProjection);\n        }                       \n        var wktType = type == 'collection' ? 'GEOMETRYCOLLECTION' : type.toUpperCase();\n        var data = wktType + '(' + this.extract[type].apply(this, [geometry]) + ')';\n        return data;\n    },\n    \n    /**\n     * Object with properties corresponding to the geometry types.\n     * Property values are functions that do the actual data extraction.\n     */\n    extract: {\n        /**\n         * Return a space delimited string of point coordinates.\n         * @param {OpenLayers.Geometry.Point} point\n         * @returns {String} A string of coordinates representing the point\n         */\n        'point': function(point) {\n            return point.x + ' ' + point.y;\n        },\n\n        /**\n         * Return a comma delimited string of point coordinates from a multipoint.\n         * @param {OpenLayers.Geometry.MultiPoint} multipoint\n         * @returns {String} A string of point coordinate strings representing\n         *                  the multipoint\n         */\n        'multipoint': function(multipoint) {\n            var array = [];\n            for(var i=0, len=multipoint.components.length; i<len; ++i) {\n                array.push('(' +\n                           this.extract.point.apply(this, [multipoint.components[i]]) +\n                           ')');\n            }\n            return array.join(',');\n        },\n        \n        /**\n         * Return a comma delimited string of point coordinates from a line.\n         * @param {OpenLayers.Geometry.LineString} linestring\n         * @returns {String} A string of point coordinate strings representing\n         *                  the linestring\n         */\n        'linestring': function(linestring) {\n            var array = [];\n            for(var i=0, len=linestring.components.length; i<len; ++i) {\n                array.push(this.extract.point.apply(this, [linestring.components[i]]));\n            }\n            return array.join(',');\n        },\n\n        /**\n         * Return a comma delimited string of linestring strings from a multilinestring.\n         * @param {OpenLayers.Geometry.MultiLineString} multilinestring\n         * @returns {String} A string of of linestring strings representing\n         *                  the multilinestring\n         */\n        'multilinestring': function(multilinestring) {\n            var array = [];\n            for(var i=0, len=multilinestring.components.length; i<len; ++i) {\n                array.push('(' +\n                           this.extract.linestring.apply(this, [multilinestring.components[i]]) +\n                           ')');\n            }\n            return array.join(',');\n        },\n        \n        /**\n         * Return a comma delimited string of linear ring arrays from a polygon.\n         * @param {OpenLayers.Geometry.Polygon} polygon\n         * @returns {String} An array of linear ring arrays representing the polygon\n         */\n        'polygon': function(polygon) {\n            var array = [];\n            for(var i=0, len=polygon.components.length; i<len; ++i) {\n                array.push('(' +\n                           this.extract.linestring.apply(this, [polygon.components[i]]) +\n                           ')');\n            }\n            return array.join(',');\n        },\n\n        /**\n         * Return an array of polygon arrays from a multipolygon.\n         * @param {OpenLayers.Geometry.MultiPolygon} multipolygon\n         * @returns {String} An array of polygon arrays representing\n         *                  the multipolygon\n         */\n        'multipolygon': function(multipolygon) {\n            var array = [];\n            for(var i=0, len=multipolygon.components.length; i<len; ++i) {\n                array.push('(' +\n                           this.extract.polygon.apply(this, [multipolygon.components[i]]) +\n                           ')');\n            }\n            return array.join(',');\n        },\n\n        /**\n         * Return the WKT portion between 'GEOMETRYCOLLECTION(' and ')' for an <OpenLayers.Geometry.Collection>\n         * @param {OpenLayers.Geometry.Collection} collection\n         * @returns {String} internal WKT representation of the collection\n         */\n        'collection': function(collection) {\n            var array = [];\n            for(var i=0, len=collection.components.length; i<len; ++i) {\n                array.push(this.extractGeometry.apply(this, [collection.components[i]]));\n            }\n            return array.join(',');\n        }\n\n    },\n\n    /**\n     * Object with properties corresponding to the geometry types.\n     * Property values are functions that do the actual parsing.\n     */\n    parse: {\n        /**\n         * Return point feature given a point WKT fragment.\n         * @param {String} str A WKT fragment representing the point\n         * @returns {OpenLayers.Feature.Vector} A point feature\n         * @private\n         */\n        'point': function(str) {\n            var coords = OpenLayers.String.trim(str).split(this.regExes.spaces);\n            return new OpenLayers.Feature.Vector(\n                new OpenLayers.Geometry.Point(coords[0], coords[1])\n            );\n        },\n\n        /**\n         * Return a multipoint feature given a multipoint WKT fragment.\n         * @param {String} str A WKT fragment representing the multipoint\n         * @returns {OpenLayers.Feature.Vector} A multipoint feature\n         * @private\n         */\n        'multipoint': function(str) {\n            var point;\n            var points = OpenLayers.String.trim(str).split(',');\n            var components = [];\n            for(var i=0, len=points.length; i<len; ++i) {\n                point = points[i].replace(this.regExes.trimParens, '$1');\n                components.push(this.parse.point.apply(this, [point]).geometry);\n            }\n            return new OpenLayers.Feature.Vector(\n                new OpenLayers.Geometry.MultiPoint(components)\n            );\n        },\n        \n        /**\n         * Return a linestring feature given a linestring WKT fragment.\n         * @param {String} str A WKT fragment representing the linestring\n         * @returns {OpenLayers.Feature.Vector} A linestring feature\n         * @private\n         */\n        'linestring': function(str) {\n            var points = OpenLayers.String.trim(str).split(',');\n            var components = [];\n            for(var i=0, len=points.length; i<len; ++i) {\n                components.push(this.parse.point.apply(this, [points[i]]).geometry);\n            }\n            return new OpenLayers.Feature.Vector(\n                new OpenLayers.Geometry.LineString(components)\n            );\n        },\n\n        /**\n         * Return a multilinestring feature given a multilinestring WKT fragment.\n         * @param {String} str A WKT fragment representing the multilinestring\n         * @returns {OpenLayers.Feature.Vector} A multilinestring feature\n         * @private\n         */\n        'multilinestring': function(str) {\n            var line;\n            var lines = OpenLayers.String.trim(str).split(this.regExes.parenComma);\n            var components = [];\n            for(var i=0, len=lines.length; i<len; ++i) {\n                line = lines[i].replace(this.regExes.trimParens, '$1');\n                components.push(this.parse.linestring.apply(this, [line]).geometry);\n            }\n            return new OpenLayers.Feature.Vector(\n                new OpenLayers.Geometry.MultiLineString(components)\n            );\n        },\n        \n        /**\n         * Return a polygon feature given a polygon WKT fragment.\n         * @param {String} str A WKT fragment representing the polygon\n         * @returns {OpenLayers.Feature.Vector} A polygon feature\n         * @private\n         */\n        'polygon': function(str) {\n            var ring, linestring, linearring;\n            var rings = OpenLayers.String.trim(str).split(this.regExes.parenComma);\n            var components = [];\n            for(var i=0, len=rings.length; i<len; ++i) {\n                ring = rings[i].replace(this.regExes.trimParens, '$1');\n                linestring = this.parse.linestring.apply(this, [ring]).geometry;\n                linearring = new OpenLayers.Geometry.LinearRing(linestring.components);\n                components.push(linearring);\n            }\n            return new OpenLayers.Feature.Vector(\n                new OpenLayers.Geometry.Polygon(components)\n            );\n        },\n\n        /**\n         * Return a multipolygon feature given a multipolygon WKT fragment.\n         * @param {String} str A WKT fragment representing the multipolygon\n         * @returns {OpenLayers.Feature.Vector} A multipolygon feature\n         * @private\n         */\n        'multipolygon': function(str) {\n            var polygon;\n            var polygons = OpenLayers.String.trim(str).split(this.regExes.doubleParenComma);\n            var components = [];\n            for(var i=0, len=polygons.length; i<len; ++i) {\n                polygon = polygons[i].replace(this.regExes.trimParens, '$1');\n                components.push(this.parse.polygon.apply(this, [polygon]).geometry);\n            }\n            return new OpenLayers.Feature.Vector(\n                new OpenLayers.Geometry.MultiPolygon(components)\n            );\n        },\n\n        /**\n         * Return an array of features given a geometrycollection WKT fragment.\n         * @param {String} str A WKT fragment representing the geometrycollection\n         * @returns {Array} An array of OpenLayers.Feature.Vector\n         * @private\n         */\n        'geometrycollection': function(str) {\n            // separate components of the collection with |\n            str = str.replace(/,\\s*([A-Za-z])/g, '|$1');\n            var wktArray = OpenLayers.String.trim(str).split('|');\n            var components = [];\n            for(var i=0, len=wktArray.length; i<len; ++i) {\n                components.push(OpenLayers.Format.WKT.prototype.read.apply(this,[wktArray[i]]));\n            }\n            return components;\n        }\n\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.WKT\" \n});     \n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/WKT.js\n * @requires OpenLayers/Filter/Comparison.js\n * @requires OpenLayers/Filter/Logical.js\n * @requires OpenLayers/Filter/Spatial.js\n */\n\n/**\n * Class: OpenLayers.Format.CQL\n * Read CQL strings to get <OpenLayers.Filter> objects.  Write\n *     <OpenLayers.Filter> objects to get CQL strings. Create a new parser with\n *     the <OpenLayers.Format.CQL> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Format>\n */\nOpenLayers.Format.CQL = (function() {\n\n    var tokens = [\n        \"PROPERTY\", \"COMPARISON\", \"VALUE\", \"LOGICAL\"\n    ],\n\n    patterns = {\n        PROPERTY: /^[_a-zA-Z]\\w*/,\n        COMPARISON: /^(=|<>|<=|<|>=|>|LIKE)/i,\n        IS_NULL: /^IS NULL/i,\n        COMMA: /^,/,\n        LOGICAL: /^(AND|OR)/i,\n        VALUE: /^('([^']|'')*'|-?\\d+(\\.\\d*)?|\\.\\d+)/,\n        LPAREN: /^\\(/,\n        RPAREN: /^\\)/,\n        SPATIAL: /^(BBOX|INTERSECTS|DWITHIN|WITHIN|CONTAINS)/i,\n        NOT: /^NOT/i,\n        BETWEEN: /^BETWEEN/i,\n        GEOMETRY: function(text) {\n            var type = /^(POINT|LINESTRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON|GEOMETRYCOLLECTION)/.exec(text);\n            if (type) {\n                var len = text.length;\n                var idx = text.indexOf(\"(\", type[0].length);\n                if (idx > -1) {\n                    var depth = 1;\n                    while (idx < len && depth > 0) {\n                        idx++;\n                        switch(text.charAt(idx)) {\n                            case '(':\n                                depth++;\n                                break;\n                            case ')':\n                                depth--;\n                                break;\n                            default:\n                                // in default case, do nothing\n                        }\n                    }\n                }\n                return [text.substr(0, idx+1)];\n            }\n        },\n        END: /^$/\n    },\n\n    follows = {\n        LPAREN: ['GEOMETRY', 'SPATIAL', 'PROPERTY', 'VALUE', 'LPAREN'],\n        RPAREN: ['NOT', 'LOGICAL', 'END', 'RPAREN'],\n        PROPERTY: ['COMPARISON', 'BETWEEN', 'COMMA', 'IS_NULL'],\n        BETWEEN: ['VALUE'],\n        IS_NULL: ['END'],\n        COMPARISON: ['VALUE'],\n        COMMA: ['GEOMETRY', 'VALUE', 'PROPERTY'],\n        VALUE: ['LOGICAL', 'COMMA', 'RPAREN', 'END'],\n        SPATIAL: ['LPAREN'],\n        LOGICAL: ['NOT', 'VALUE', 'SPATIAL', 'PROPERTY', 'LPAREN'],\n        NOT: ['PROPERTY', 'LPAREN'],\n        GEOMETRY: ['COMMA', 'RPAREN']\n    },\n\n    operators = {\n        '=': OpenLayers.Filter.Comparison.EQUAL_TO,\n        '<>': OpenLayers.Filter.Comparison.NOT_EQUAL_TO,\n        '<': OpenLayers.Filter.Comparison.LESS_THAN,\n        '<=': OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO,\n        '>': OpenLayers.Filter.Comparison.GREATER_THAN,\n        '>=': OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO,\n        'LIKE': OpenLayers.Filter.Comparison.LIKE,\n        'BETWEEN': OpenLayers.Filter.Comparison.BETWEEN,\n        'IS NULL': OpenLayers.Filter.Comparison.IS_NULL\n    },\n\n    operatorReverse = {},\n\n    logicals = {\n        'AND': OpenLayers.Filter.Logical.AND,\n        'OR': OpenLayers.Filter.Logical.OR\n    },\n\n    logicalReverse = {},\n\n    precedence = {\n        'RPAREN': 3,\n        'LOGICAL': 2,\n        'COMPARISON': 1\n    };\n\n    var i;\n    for (i in operators) {\n        if (operators.hasOwnProperty(i)) {\n            operatorReverse[operators[i]] = i;\n        }\n    }\n\n    for (i in logicals) {\n        if (logicals.hasOwnProperty(i)) {\n            logicalReverse[logicals[i]] = i;\n        }\n    }\n\n    function tryToken(text, pattern) {\n        if (pattern instanceof RegExp) {\n            return pattern.exec(text);\n        } else {\n            return pattern(text);\n        }\n    }\n\n    function nextToken(text, tokens) {\n        var i, token, len = tokens.length;\n        for (i=0; i<len; i++) {\n            token = tokens[i];\n            var pat = patterns[token];\n            var matches = tryToken(text, pat);\n            if (matches) {\n                var match = matches[0];\n                var remainder = text.substr(match.length).replace(/^\\s*/, \"\");\n                return {\n                    type: token,\n                    text: match,\n                    remainder: remainder\n                };\n            }\n        }\n\n        var msg = \"ERROR: In parsing: [\" + text + \"], expected one of: \";\n        for (i=0; i<len; i++) {\n            token = tokens[i];\n            msg += \"\\n    \" + token + \": \" + patterns[token];\n        }\n\n        throw new Error(msg);\n    }\n\n    function tokenize(text) {\n        var results = [];\n        var token, expect = [\"NOT\", \"GEOMETRY\", \"SPATIAL\", \"PROPERTY\", \"LPAREN\"];\n\n        do {\n            token = nextToken(text, expect);\n            text = token.remainder;\n            expect = follows[token.type];\n            if (token.type != \"END\" && !expect) {\n                throw new Error(\"No follows list for \" + token.type);\n            }\n            results.push(token);\n        } while (token.type != \"END\");\n\n        return results;\n    }\n\n    function buildAst(tokens) {\n        var operatorStack = [],\n            postfix = [];\n\n        while (tokens.length) {\n            var tok = tokens.shift();\n            switch (tok.type) {\n                case \"PROPERTY\":\n                case \"GEOMETRY\":\n                case \"VALUE\":\n                    postfix.push(tok);\n                    break;\n                case \"COMPARISON\":\n                case \"BETWEEN\":\n                case \"IS_NULL\":\n                case \"LOGICAL\":\n                    var p = precedence[tok.type];\n\n                    while (operatorStack.length > 0 &&\n                        (precedence[operatorStack[operatorStack.length - 1].type] <= p)\n                    ) {\n                        postfix.push(operatorStack.pop());\n                    }\n\n                    operatorStack.push(tok);\n                    break;\n                case \"SPATIAL\":\n                case \"NOT\":\n                case \"LPAREN\":\n                    operatorStack.push(tok);\n                    break;\n                case \"RPAREN\":\n                    while (operatorStack.length > 0 &&\n                        (operatorStack[operatorStack.length - 1].type != \"LPAREN\")\n                    ) {\n                        postfix.push(operatorStack.pop());\n                    }\n                    operatorStack.pop(); // toss out the LPAREN\n\n                    if (operatorStack.length > 0 &&\n                        operatorStack[operatorStack.length-1].type == \"SPATIAL\") {\n                        postfix.push(operatorStack.pop());\n                    }\n                case \"COMMA\":\n                case \"END\":\n                    break;\n                default:\n                    throw new Error(\"Unknown token type \" + tok.type);\n            }\n        }\n\n        while (operatorStack.length > 0) {\n            postfix.push(operatorStack.pop());\n        }\n\n        function buildTree() {\n            var tok = postfix.pop();\n            switch (tok.type) {\n                case \"LOGICAL\":\n                    var rhs = buildTree(),\n                        lhs = buildTree();\n                    return new OpenLayers.Filter.Logical({\n                        filters: [lhs, rhs],\n                        type: logicals[tok.text.toUpperCase()]\n                    });\n                case \"NOT\":\n                    var operand = buildTree();\n                    return new OpenLayers.Filter.Logical({\n                        filters: [operand],\n                        type: OpenLayers.Filter.Logical.NOT\n                    });\n                case \"BETWEEN\":\n                    var min, max, property;\n                    postfix.pop(); // unneeded AND token here\n                    max = buildTree();\n                    min = buildTree();\n                    property = buildTree();\n                    return new OpenLayers.Filter.Comparison({\n                        property: property,\n                        lowerBoundary: min,\n                        upperBoundary: max,\n                        type: OpenLayers.Filter.Comparison.BETWEEN\n                    });\n                case \"COMPARISON\":\n                    var value = buildTree(),\n                        property = buildTree();\n                    return new OpenLayers.Filter.Comparison({\n                        property: property,\n                        value: value,\n                        type: operators[tok.text.toUpperCase()]\n                    });\n                case \"IS_NULL\":\n                    var property = buildTree();\n                    return new OpenLayers.Filter.Comparison({\n                        property: property,\n                        type: operators[tok.text.toUpperCase()]\n                    });\n                case \"VALUE\":\n                    var match = tok.text.match(/^'(.*)'$/);\n                    if (match) {\n                        return match[1].replace(/''/g, \"'\");\n                    } else {\n                        return Number(tok.text);\n                    }\n                case \"SPATIAL\":\n                    switch(tok.text.toUpperCase()) {\n                        case \"BBOX\":\n                            var maxy = buildTree(),\n                                maxx = buildTree(),\n                                miny = buildTree(),\n                                minx = buildTree(),\n                                prop = buildTree();\n\n                            return new OpenLayers.Filter.Spatial({\n                                type: OpenLayers.Filter.Spatial.BBOX,\n                                property: prop,\n                                value: OpenLayers.Bounds.fromArray(\n                                    [minx, miny, maxx, maxy]\n                                )\n                            });\n                        case \"INTERSECTS\":\n                            var value = buildTree(),\n                                property = buildTree();\n                            return new OpenLayers.Filter.Spatial({\n                                type: OpenLayers.Filter.Spatial.INTERSECTS,\n                                property: property,\n                                value: value\n                            });\n                        case \"WITHIN\":\n                            var value = buildTree(),\n                                property = buildTree();\n                            return new OpenLayers.Filter.Spatial({\n                                type: OpenLayers.Filter.Spatial.WITHIN,\n                                property: property,\n                                value: value\n                            });\n                        case \"CONTAINS\":\n                            var value = buildTree(),\n                                property = buildTree();\n                            return new OpenLayers.Filter.Spatial({\n                                type: OpenLayers.Filter.Spatial.CONTAINS,\n                                property: property,\n                                value: value\n                            });\n                        case \"DWITHIN\":\n                            var distance = buildTree(),\n                                value = buildTree(),\n                                property = buildTree();\n                            return new OpenLayers.Filter.Spatial({\n                                type: OpenLayers.Filter.Spatial.DWITHIN,\n                                value: value,\n                                property: property,\n                                distance: Number(distance)\n                            });\n                    }\n                case \"GEOMETRY\":\n                    return OpenLayers.Geometry.fromWKT(tok.text);\n                default:\n                    return tok.text;\n            }\n        }\n\n        var result = buildTree();\n        if (postfix.length > 0) {\n            var msg = \"Remaining tokens after building AST: \\n\";\n            for (var i = postfix.length - 1; i >= 0; i--) {\n                msg += postfix[i].type + \": \" + postfix[i].text + \"\\n\";\n            }\n            throw new Error(msg);\n        }\n\n        return result;\n    }\n\n    return OpenLayers.Class(OpenLayers.Format, {\n        /**\n         * APIMethod: read\n         * Generate a filter from a CQL string.\n\n         * Parameters:\n         * text - {String} The CQL text.\n         *\n         * Returns:\n         * {<OpenLayers.Filter>} A filter based on the CQL text.\n         */\n        read: function(text) {\n            var result = buildAst(tokenize(text));\n            if (this.keepData) {\n                this.data = result;\n            }\n            return result;\n        },\n\n        /**\n         * APIMethod: write\n         * Convert a filter into a CQL string.\n\n         * Parameters:\n         * filter - {<OpenLayers.Filter>} The filter.\n         *\n         * Returns:\n         * {String} A CQL string based on the filter.\n         */\n        write: function(filter) {\n            if (filter instanceof OpenLayers.Geometry) {\n                return filter.toString();\n            }\n            switch (filter.CLASS_NAME) {\n                case \"OpenLayers.Filter.Spatial\":\n                    switch(filter.type) {\n                        case OpenLayers.Filter.Spatial.BBOX:\n                            return \"BBOX(\" +\n                                filter.property + \",\" +\n                                filter.value.toBBOX() +\n                                \")\";\n                        case OpenLayers.Filter.Spatial.DWITHIN:\n                            return \"DWITHIN(\" +\n                                filter.property + \", \" +\n                                this.write(filter.value) + \", \" +\n                                filter.distance + \")\";\n                        case OpenLayers.Filter.Spatial.WITHIN:\n                            return \"WITHIN(\" +\n                                filter.property + \", \" +\n                                this.write(filter.value) + \")\";\n                        case OpenLayers.Filter.Spatial.INTERSECTS:\n                            return \"INTERSECTS(\" +\n                                filter.property + \", \" +\n                                this.write(filter.value) + \")\";\n                        case OpenLayers.Filter.Spatial.CONTAINS:\n                            return \"CONTAINS(\" +\n                                filter.property + \", \" +\n                                this.write(filter.value) + \")\";\n                        default:\n                            throw new Error(\"Unknown spatial filter type: \" + filter.type);\n                    }\n                case \"OpenLayers.Filter.Logical\":\n                    if (filter.type == OpenLayers.Filter.Logical.NOT) {\n                        // TODO: deal with precedence of logical operators to\n                        // avoid extra parentheses (not urgent)\n                        return \"NOT (\" + this.write(filter.filters[0]) + \")\";\n                    } else {\n                        var res = \"(\";\n                        var first = true;\n                        for (var i = 0; i < filter.filters.length; i++) {\n                            if (first) {\n                                first = false;\n                            } else {\n                                res += \") \" + logicalReverse[filter.type] + \" (\";\n                            }\n                            res += this.write(filter.filters[i]);\n                        }\n                        return res + \")\";\n                    }\n                case \"OpenLayers.Filter.Comparison\":\n                    if (filter.type == OpenLayers.Filter.Comparison.BETWEEN) {\n                        return filter.property + \" BETWEEN \" +\n                            this.write(filter.lowerBoundary) + \" AND \" +\n                            this.write(filter.upperBoundary);\n                    } else {\n                        return (filter.value !== null) ? filter.property +\n                            \" \" + operatorReverse[filter.type] + \" \" +\n                            this.write(filter.value) : filter.property +\n                            \" \" + operatorReverse[filter.type];\n                    }\n                case undefined:\n                    if (typeof filter === \"string\") {\n                        return \"'\" + filter.replace(/'/g, \"''\") + \"'\";\n                    } else if (typeof filter === \"number\") {\n                        return String(filter);\n                    }\n                default:\n                    throw new Error(\"Can't encode: \" + filter.CLASS_NAME + \" \" + filter);\n            }\n        },\n\n        CLASS_NAME: \"OpenLayers.Format.CQL\"\n\n    });\n})();\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML.js\n * @requires OpenLayers/Feature/Vector.js\n * @requires OpenLayers/Geometry/Point.js\n * @requires OpenLayers/Geometry/LineString.js\n * @requires OpenLayers/Geometry/Polygon.js\n * @requires OpenLayers/Projection.js\n */\n\n/**\n * Class: OpenLayers.Format.OSM\n * OSM parser. Create a new instance with the\n *     <OpenLayers.Format.OSM> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.OSM = OpenLayers.Class(OpenLayers.Format.XML, {\n\n    /**\n     * APIProperty: checkTags\n     * {Boolean} Should tags be checked to determine whether something\n     * should be treated as a separate node. Will slow down parsing.\n     * Default is false.\n     */\n    checkTags: false,\n\n    /**\n     * APIProperty: shareNode\n     * {Boolean} Should nodes be shared between geometries.\n     */\n    shareNode: false,\n\n    /**\n     * Property: interestingTagsExclude\n     * {Array} List of tags to exclude from 'interesting' checks on nodes.\n     * Must be set when creating the format. Will only be used if checkTags\n     * is set.\n     */\n    interestingTagsExclude: null,\n\n    /**\n     * APIProperty: areaTags\n     * {Array} List of tags indicating that something is an area.\n     * Must be set when creating the format. Will only be used if\n     * checkTags is true.\n     */\n    areaTags: null,\n\n    /**\n     * APIProperty: relationsParsers\n     * {Map({String, Function})} Map relation type to a functions that parce the relation.\n     * This can be set for example to:\n     * {\n     *     multipolygon: OpenLayers.Format.OSM.multipolygonParser,\n     *     boundary:     OpenLayers.Format.OSM.multipolygonParser,\n     *     route:        OpenLayers.Format.OSM.routeParser\n     * }\n     */\n    relationsParsers: {},\n\n    /**\n     * Constructor: OpenLayers.Format.OSM\n     * Create a new parser for OSM.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    initialize: function(options) {\n        var layer_defaults = {\n          'interestingTagsExclude': ['source', 'source_ref',\n              'source:ref', 'history', 'attribution', 'created_by'],\n          'areaTags': ['area', 'building', 'leisure', 'tourism', 'ruins',\n              'historic', 'landuse', 'military', 'natural', 'sport']\n        };\n        options = options ? options : {};\n\n        layer_defaults = OpenLayers.Util.extend(layer_defaults, options);\n\n        var interesting = {};\n        for (var i = 0; i < layer_defaults.interestingTagsExclude.length; i++) {\n            interesting[layer_defaults.interestingTagsExclude[i]] = true;\n        }\n        layer_defaults.interestingTagsExclude = interesting;\n\n        var area = {};\n        for (var i = 0; i < layer_defaults.areaTags.length; i++) {\n            area[layer_defaults.areaTags[i]] = true;\n        }\n        layer_defaults.areaTags = area;\n\n        // OSM coordinates are always in longlat WGS84\n        this.externalProjection = new OpenLayers.Projection(\"EPSG:4326\");\n\n        OpenLayers.Format.XML.prototype.initialize.apply(this, [layer_defaults]);\n    },\n\n    /**\n     * APIMethod: read\n     * Return a list of features from a OSM doc\n\n     * Parameters:\n     * doc - {Element} \n     *\n     * Returns:\n     * Array({<OpenLayers.Feature.Vector>})\n     */\n    read: function(doc) {\n        if (typeof doc == \"string\") {\n            doc = OpenLayers.Format.XML.prototype.read.apply(this, [doc]);\n        }\n\n        var nodes = this.getNodes(doc);\n        var ways = this.getWays(doc);\n        var relations = this.getRelations(doc);\n\n        // Geoms will contain at least ways.length entries.\n        var feat_list = [];\n\n        for (var relation_id in relations) {\n            var relation = relations[relation_id];\n            if (this.relationsParsers[relation.tags.type]) {\n                var features = this.relationsParsers[relation.tags.type](relation, this, nodes, ways, relations);\n                for (var i = 0, len = features.length ; i < len ; i++) {\n                    feat_list.push(features[i]);\n                }\n            }\n        }\n\n        for (var way_id in ways) {\n            var way = ways[way_id];\n\n            if (way.interesting) {\n                var poly = this.isWayArea(way) ? 1 : 0;\n                var point_list = this.getPointList(way, nodes);\n                var geometry = null;\n                if (poly) {\n                    geometry = new OpenLayers.Geometry.Polygon(\n                        new OpenLayers.Geometry.LinearRing(point_list));\n                }\n                else {\n                    geometry = new OpenLayers.Geometry.LineString(point_list);\n                }\n                var feat = new OpenLayers.Feature.Vector(geometry,\n                    way.tags);\n                feat.osm_id = parseInt(way.id);\n                feat.osm_version = parseInt(way.version);\n                // Since OSM is topological, we stash the node ID internally.\n                feat.geometry.osm_id = feat.osm_id;\n                feat.type = \"way\";\n                feat.fid = \"way.\" + feat.osm_id;\n                feat_list.push(feat);\n            }\n        }\n        for (var node_id in nodes) {\n            var node = nodes[node_id];\n            if (!node.used || !this.checkTags || Object.keys(node.attributes).length > 1) {\n                feat_list.push(node);\n            }\n        }\n        return feat_list;\n    },\n\n    /**\n     * Method: getPointList\n     * Return a list of points corresponds with with the way.\n     *\n     * Parameters:\n     * way - way where we can find the nodes id.\n     * nodes - nodes the nodes map where we can find the nodes by id.\n     */\n    getPointList: function(way, nodes) {\n        if (!way) {\n            // the way will not be on the bbox\n            return [];\n        }\n        // We know the minimal of this one ahead of time. (Could be -1\n        // due to areas/polygons)\n        var point_list = new Array(way.nodes.length);\n        for (var j = 0; j < way.nodes.length; j++) {\n            var node = nodes[way.nodes[j]];\n            node.used = true;\n\n            var point = node.geometry;\n            if (!this.shareNode) {\n                point = new OpenLayers.Geometry.Point(node.geometry.x, node.geometry.y);\n                // Since OSM is topological, we stash the node ID internally.\n                point.osm_id = node.osm_id;\n            }\n\n            point_list[j] = point;\n        }\n        return point_list;\n    },\n\n    /**\n     * Method: concatPathsIfLinear\n     * Return result.succed if pass are linear, result.lastPointList with the new way.\n     *\n     * Parameters:\n     * lastPointList - array of <OpenLayer.Geometry.Points>, the old concanated path\n     * pointList - array of <OpenLayer.Geometry.Points>, the new path\n     */\n    concatPathsIfLinear: function(lastPointList, pointList) {\n        var result = {};\n        if (lastPointList.length == 0) {\n            result.succed = true;\n            result.lastPointList = pointList;\n            return result;\n        }\n        if (pointList.length == 0) {\n            result.succed = true;\n            result.lastPointList = lastPointList;\n            return result;\n        }\n        if (lastPointList[lastPointList.length-1].x == pointList[0].x\n         && lastPointList[lastPointList.length-1].y == pointList[0].y) {\n            pointList = pointList.slice(1, pointList.length);\n            lastPointList = lastPointList.concat(pointList);\n            result.succed = true;\n            result.lastPointList = lastPointList;\n            return result;\n        }\n        else if (lastPointList[0].x == pointList[pointList.length-1].x\n              && lastPointList[0].y == pointList[pointList.length-1].y) {\n            lastPointList = lastPointList.slice(1, lastPointList.length);\n            lastPointList = pointList.concat(lastPointList);\n            result.succed = true;\n            result.lastPointList = lastPointList;\n            return result;\n        }\n        else if (lastPointList[0].x == pointList[0].x\n              && lastPointList[0].y == pointList[0].y) {\n            if (lastPointList.length > pointList.length) {\n                pointList = pointList.slice(1, pointList.length);\n                lastPointList = pointList.reverse().concat(lastPointList);\n            }\n            else {\n                lastPointList = lastPointList.slice(1, lastPointList.length);\n                lastPointList = lastPointList.reverse().concat(pointList);\n            }\n            result.succed = true;\n            result.lastPointList = lastPointList;\n            return result;\n        }\n        else if (lastPointList[lastPointList.length-1].x == pointList[pointList.length-1].x\n              && lastPointList[lastPointList.length-1].y == pointList[pointList.length-1].y) {\n            if (lastPointList.length > pointList.length) {\n                pointList = pointList.slice(0, pointList.length - 1);\n                lastPointList = lastPointList.concat(pointList.reverse());\n            }\n            else {\n                lastPointList = lastPointList.slice(0, lastPointList.length - 1);\n                lastPointList = pointList.concat(lastPointList.reverse());\n            }\n            result.succed = true;\n            result.lastPointList = lastPointList;\n            return result;\n        }\n        result.succed = false;\n        return result;\n    },\n\n    /**\n     * Method: gets\n     * Return the node items from a doc.\n     *\n     * Parameters:\n     * doc - {DOMElement} node to parse tags from\n     */\n    getNodes: function(doc) {\n        var node_list = doc.getElementsByTagName(\"node\");\n        var nodes = {};\n        for (var i = 0; i < node_list.length; i++) {\n            var node = node_list[i];\n            var id = node.getAttribute(\"id\");\n            var geom = new OpenLayers.Geometry.Point(\n                    node.getAttribute(\"lon\"),\n                    node.getAttribute(\"lat\"))\n            if (this.internalProjection && this.externalProjection) {\n                geom.transform(this.externalProjection,\n                    this.internalProjection);\n            }\n            var feat = new OpenLayers.Feature.Vector(geom, this.getTags(node));\n            feat.osm_id = parseInt(id);\n            feat.osm_version = parseInt(node.getAttribute(\"version\"));\n            feat.type = \"node\";\n            feat.fid = \"node.\" + feat.osm_id;\n\n            // Since OSM is topological, we stash the node ID internally.\n            feat.geometry.osm_id = feat.osm_id;\n\n            nodes[id] = feat;\n        }\n        return nodes;\n    },\n\n    /**\n     * Method: getRelations\n     * Return the relation items from a doc.\n     *\n     * Parameters:\n     * node - {DOMElement} node to parse tags from\n     */\n    getRelations: function(doc) {\n        var relation_list = doc.getElementsByTagName(\"relation\");\n        var return_relations = {};\n        for (var i = 0; i < relation_list.length; i++) {\n            var relation = relation_list[i];\n            var id = relation.getAttribute(\"id\");\n            var relation_object = {\n              id: id,\n              version: relation.getAttribute(\"version\")\n            };\n\n            relation_object.tags = this.getTags(relation);\n            relation_object.nodes = [];\n            relation_object.ways = [];\n            relation_object.relations = [];\n\n            var member_list = relation.getElementsByTagName(\"member\");\n\n            for (var j = 0; j < member_list.length; j++) {\n                var member = member_list[j];\n                var type = member.getAttribute(\"type\");\n                if (type == 'node') {\n                    relation_object.nodes[relation_object.nodes.length] = member;\n                }\n                else if (type == 'way') {\n                    relation_object.ways[relation_object.ways.length] = member;\n                }\n                else if (type == 'relation') {\n                    relation_object.relations[relation_object.relations.length] = member;\n                }\n            }\n            return_relations[id] = relation_object;\n        }\n        return return_relations;\n\n    },\n\n    /**\n     * Method: getWays\n     * Return the way items from a doc.\n     *\n     * Parameters:\n     * doc - {DOMElement} node to parse tags from\n     */\n    getWays: function(doc) {\n        var way_list = doc.getElementsByTagName(\"way\");\n        var return_ways = {};\n        for (var i = 0; i < way_list.length; i++) {\n            var way = way_list[i];\n            var id = way.getAttribute(\"id\");\n            var way_object = {\n              id: id,\n              version: way.getAttribute(\"version\")\n            };\n\n            if (this.checkTags) {\n                var result = this.getTags(way, true);\n                way_object.interesting = result[1];\n                way_object.tags = result[0];\n            } else {\n                way_object.interesting = true;\n                way_object.tags = this.getTags(way);\n            }\n\n            var node_list = way.getElementsByTagName(\"nd\");\n\n            way_object.nodes = new Array(node_list.length);\n\n            for (var j = 0; j < node_list.length; j++) {\n                way_object.nodes[j] = node_list[j].getAttribute(\"ref\");\n            }\n            return_ways[id] = way_object;\n        }\n        return return_ways;\n\n    },\n\n    /**\n     * Method: getTags\n     * Return the tags list attached to a specific DOM element.\n     *\n     * Parameters:\n     * dom_node - {DOMElement} node to parse tags from\n     * interesting_tags - {Boolean} whether the return from this function should\n     *    return a boolean indicating that it has 'interesting tags' --\n     *    tags like attribution and source are ignored. (To change the list\n     *    of tags, see interestingTagsExclude)\n     *\n     * Returns:\n     * tags - {Object} hash of tags\n     * interesting - {Boolean} if interesting_tags is passed, returns\n     *     whether there are any interesting tags on this element.\n     */\n    getTags: function(dom_node, interesting_tags) {\n        var tag_list = dom_node.getElementsByTagName(\"tag\");\n        var tags = {};\n        var interesting = false;\n        for (var j = 0; j < tag_list.length; j++) {\n            var key = tag_list[j].getAttribute(\"k\");\n            if (!this.checkTags || !this.interestingTagsExclude[key]) {\n                tags[key] = tag_list[j].getAttribute(\"v\");\n            }\n            if (interesting_tags && !this.interestingTagsExclude[key]) {\n                interesting = true;\n            }\n        }\n        return interesting_tags ? [tags, interesting] : tags;\n    },\n\n    /**\n     * Method: isWayArea\n     * Given a way object from getWays, check whether the tags and geometry\n     * indicate something is an area.\n     *\n     * Returns:\n     * {Boolean}\n     */\n    isWayArea: function(way) {\n        var poly_shaped = false;\n        var poly_tags = false;\n\n        if (way.nodes[0] == way.nodes[way.nodes.length - 1]) {\n            poly_shaped = true;\n        }\n        if (this.checkTags) {\n            for(var key in way.tags) {\n                if (this.areaTags[key]) {\n                    poly_tags = true;\n                    break;\n                }\n            }\n        }\n        return poly_shaped && (this.checkTags ? poly_tags : true);\n    },\n\n    /**\n     * APIMethod: write\n     * Takes a list of features, returns a serialized OSM format file for use\n     * in tools like JOSM.\n     *\n     * Parameters:\n     * features - {Array(<OpenLayers.Feature.Vector>)}\n     */\n    write: function(features) {\n        if (!(OpenLayers.Util.isArray(features))) {\n            features = [features];\n        }\n\n        this.osm_id = 1;\n        this.created_nodes = {};\n        var root_node = this.createElementNS(null, \"osm\");\n        root_node.setAttribute(\"version\", \"0.5\");\n        root_node.setAttribute(\"generator\", \"OpenLayers \"+ OpenLayers.VERSION_NUMBER);\n\n        // Loop backwards, because the deserializer puts nodes last, and\n        // we want them first if possible\n        for(var i = features.length - 1; i >= 0; i--) {\n            var nodes = this.createFeatureNodes(features[i]);\n            for (var j = 0; j < nodes.length; j++) {\n                root_node.appendChild(nodes[j]);\n            }\n        }\n        return OpenLayers.Format.XML.prototype.write.apply(this, [root_node]);\n    },\n\n    /**\n     * Method: createFeatureNodes\n     * Takes a feature, returns a list of nodes from size 0->n.\n     * Will include all pieces of the serialization that are required which\n     * have not already been created. Calls out to createXML based on geometry\n     * type.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     */\n    createFeatureNodes: function(feature) {\n        var nodes = [];\n        var className = feature.geometry.CLASS_NAME;\n        var type = className.substring(className.lastIndexOf(\".\") + 1);\n        type = type.toLowerCase();\n        var builder = this.createXML[type];\n        if (builder) {\n            nodes = builder.apply(this, [feature]);\n        }\n        return nodes;\n    },\n\n    /**\n     * Method: createXML\n     * Takes a feature, returns a list of nodes from size 0->n.\n     * Will include all pieces of the serialization that are required which\n     * have not already been created.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     */\n    createXML: {\n        'point': function(point) {\n            var id = null;\n            var geometry = point.geometry ? point.geometry : point;\n\n            if (this.internalProjection && this.externalProjection) {\n                geometry = geometry.clone();\n                geometry.transform(this.internalProjection,\n                                   this.externalProjection);\n            }\n\n            var already_exists = false; // We don't return anything if the node\n                                        // has already been created\n            if (point.osm_id) {\n                id = point.osm_id;\n                if (this.created_nodes[id]) {\n                    already_exists = true;\n                }\n            } else {\n               id = -this.osm_id;\n               this.osm_id++;\n            }\n            if (already_exists) {\n                node = this.created_nodes[id];\n            } else {\n                var node = this.createElementNS(null, \"node\");\n            }\n            this.created_nodes[id] = node;\n            node.setAttribute(\"id\", id);\n            node.setAttribute(\"lon\", geometry.x);\n            node.setAttribute(\"lat\", geometry.y);\n            if (point.attributes) {\n                this.serializeTags(point, node);\n            }\n            this.setState(point, node);\n            return already_exists ? [] : [node];\n        },\n        linestring: function(feature) {\n            var id;\n            var nodes = [];\n            var geometry = feature.geometry;\n            if (feature.osm_id) {\n                id = feature.osm_id;\n            } else {\n                id = -this.osm_id;\n                this.osm_id++;\n            }\n            var way = this.createElementNS(null, \"way\");\n            way.setAttribute(\"id\", id);\n            for (var i = 0; i < geometry.components.length; i++) {\n                var node = this.createXML['point'].apply(this, [geometry.components[i]]);\n                if (node.length) {\n                    node = node[0];\n                    var node_ref = node.getAttribute(\"id\");\n                    nodes.push(node);\n                } else {\n                    node_ref = geometry.components[i].osm_id;\n                    node = this.created_nodes[node_ref];\n                }\n                this.setState(feature, node);\n                var nd_dom = this.createElementNS(null, \"nd\");\n                nd_dom.setAttribute(\"ref\", node_ref);\n                way.appendChild(nd_dom);\n            }\n            this.serializeTags(feature, way);\n            nodes.push(way);\n\n            return nodes;\n        },\n        polygon: function(feature) {\n            var attrs = OpenLayers.Util.extend({'area':'yes'}, feature.attributes);\n            var feat = new OpenLayers.Feature.Vector(feature.geometry.components[0], attrs);\n            feat.osm_id = feature.osm_id;\n            // Since OSM is topological, we stash the node ID internally.\n            feat.geometry.osm_id = feat.osm_id;\n            return this.createXML['linestring'].apply(this, [feat]);\n        }\n    },\n\n    /**\n     * Method: serializeTags\n     * Given a feature, serialize the attributes onto the given node.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     * node - {DOMNode}\n     */\n    serializeTags: function(feature, node) {\n        for (var key in feature.attributes) {\n            var tag = this.createElementNS(null, \"tag\");\n            tag.setAttribute(\"k\", key);\n            tag.setAttribute(\"v\", feature.attributes[key]);\n            node.appendChild(tag);\n        }\n    },\n\n    /**\n     * Method: setState\n     * OpenStreetMap has a convention that 'state' is stored for modification or deletion.\n     * This allows the file to be uploaded via JOSM or the bulk uploader tool.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     * node - {DOMNode}\n     */\n    setState: function(feature, node) {\n        if (feature.state) {\n            var state = null;\n            switch(feature.state) {\n                case OpenLayers.State.UPDATE:\n                    state = \"modify\";\n                case OpenLayers.State.DELETE:\n                    state = \"delete\";\n            }\n            if (state) {\n                node.setAttribute(\"action\", state);\n            }\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.OSM\"\n});\n\n/**\n * Function that parse a multypolygone. Use the roles inner and enclave\n * for inner border. all others will be consid\u00E8re as outer border.\n *\n * Parameters:\n * relation - {DOMElement} the relation to parse\n * parser - <OpenLayers.parser.OSM> the parser\n * nodes - {Array({DOMElement})} all the available nodes\n * ways - {Array({DOMElement})} all the available ways\n * relations - {Array({DOMElement})} all the available relations\n *\n * Returns:\n * {Array(<OpenLayers.Feature.Vector>)} a list of one element that represent the multypolygone\n */\nOpenLayers.Format.OSM.multipolygonParser = function(relation, parser, nodes, ways, relations) {\n    var lastRole = '';\n    var lastPointList = [];\n    var innerLignes = [];\n    var outerLignes = [];\n\n    for (var j = 0; j < relation.ways.length; j++) {\n        var way = relation.ways[j]\n        var ref = way.getAttribute(\"ref\");\n        var role = way.getAttribute(\"role\");\n\n        var pointList = parser.getPointList(ways[ref], nodes);\n        if (pointList.length == 0) {\n            continue;\n        }\n        var newPath = true;\n        if (lastRole == '') {\n            lastRole = role;\n        }\n        if (lastRole == role) {\n            var result = parser.concatPathsIfLinear(lastPointList, pointList);\n            if (result.succed) {\n                newPath = false;\n                lastPointList = result.lastPointList;\n            }\n        }\n\n        if (newPath) {\n            if (lastPointList.length > 0) {\n                if (lastRole == 'inner' || lastRole == 'enclave') {\n                    var geometry = new OpenLayers.Geometry.LinearRing(lastPointList)\n                    innerLignes.push(geometry);\n                }\n                else { // if (lastRole == 'outer') {\n                    var geometry = new OpenLayers.Geometry.LinearRing(lastPointList)\n                    outerLignes.push(geometry);\n                }\n            }\n            lastPointList = pointList;\n            lastRole = role;\n        }\n    }\n    if (lastPointList.length > 0) {\n        if (lastRole == 'inner' || lastRole == 'enclave') {\n            var geometry = new OpenLayers.Geometry.LinearRing(lastPointList)\n            innerLignes.push(geometry);\n        }\n        else { // if (lastRole == 'outer') {\n            var geometry = new OpenLayers.Geometry.LinearRing(lastPointList)\n            outerLignes.push(geometry);\n        }\n    }\n\n    var polygons = [];\n    for (var j = 0 ; j < outerLignes.length ; j++) {\n        if (innerLignes.length == 0) {\n            polygons.push(new OpenLayers.Geometry.Polygon([outerLignes[j]]));\n        }\n        else {\n            var currentInners = [];\n            for (var k = 0 ; k < innerLignes.length ; k++) {\n                var inner = innerLignes[k];\n                if (outerLignes[j].containsPoint(inner.getCentroid())) {\n                    currentInners.push(inner);\n                }\n            }\n            polygons.push(new OpenLayers.Geometry.Polygon(\n                    [outerLignes[j]].concat(currentInners)));\n        }\n    }\n    var geometry = new OpenLayers.Geometry.MultiPolygon(polygons);\n    var feat = new OpenLayers.Feature.Vector(geometry, relation.tags);\n    feat.osm_id = parseInt(relation.id);\n    feat.type = \"relation\";\n    feat.fid = \"relation.\" + feat.osm_id;\n    return [feat];\n},\n\n/**\n * Function that convert all the ways of a relation into a LineStrings.\n *\n * Parameters:\n * relation - {DOMElement} the relation to parse\n * parser - <OpenLayers.parser.OSM> the parser\n * nodes - {Array({DOMElement})} all the available nodes\n * ways - {Array({DOMElement})} all the available ways\n *\n * Returns:\n * {Array(<OpenLayers.Geometry.LineString>)}\n */\nOpenLayers.Format.OSM.getLineStrings = function(relation, parser, nodes, ways) {\n    var geometries = [];\n    for (var j = 0; j < relation.ways.length; j++) {\n        var way = relation.ways[j]\n        var ref = way.getAttribute(\"ref\");\n\n        // TODO considere to create some area\n        var pointList = parser.getPointList(ways[ref], nodes);\n        if (pointList.length == 0) {\n            continue;\n        }\n\n        geometries.push(new OpenLayers.Geometry.LineString(pointList));\n    }\n    return geometries;\n}\n\n/**\n * Function that parse a route. All the inner ways will be converted into a MultiLineString.\n *\n * Parameters:\n * relation - {DOMElement} the relation to parse\n * parser - <OpenLayers.parser.OSM> the parser\n * nodes - {Array({DOMElement})} all the available nodes\n * ways - {Array({DOMElement})} all the available ways\n * relations - {Array({DOMElement})} all the available relations\n *\n * Returns:\n * {Array(<OpenLayers.Feature.Vector>)} a list of one element that represent the route.\n */\nOpenLayers.Format.OSM.routeParser = function(relation, parser, nodes, ways, relations) {\n    var geometries = OpenLayers.Format.OSM.getLineStrings(relation, parser, nodes, ways);\n    var geometry = new OpenLayers.Geometry.MultiLineString(geometries);\n    var feat = new OpenLayers.Feature.Vector(geometry, relation.tags);\n    feat.osm_id = parseInt(relation.id);\n    feat.type = \"relation\";\n    feat.fid = \"relation.\" + feat.osm_id;\n    return [feat];\n}\n\n/**\n * Function that parse a relation. All inerr way will be converten into LineLtrings,\n * and all inner nodes into Points.\n *\n * Parameters:\n * relation - {DOMElement} the relation to parse\n * parser - <OpenLayers.parser.OSM> the parser\n * nodes - {Array({DOMElement})} all the available nodes\n * ways - {Array({DOMElement})} all the available ways\n * relations - {Array({DOMElement})} all the available relations\n *\n * Returns:\n * {Array(<OpenLayers.Feature.Vector>)} a lint of one element that represent the relation.\n */\nOpenLayers.Format.OSM.genericParser = function(relation, parser, nodes, ways, relations) {\n    var geometries = OpenLayers.Format.OSM.getLineStrings(relation, parser, nodes, ways);\n    for (var j = 0; j < relation.nodes.length; j++) {\n        var node = relation.nodes[j]\n        geometries.push(new OpenLayers.Geometry.Node(node));\n    }\n    var geometry = new OpenLayers.Geometry.Collection(geometries);\n    var feat = new OpenLayers.Feature.Vector(geometry, relation.tags);\n    feat.osm_id = parseInt(relation.id);\n    feat.type = \"relation\";\n    feat.fid = \"relation.\" + feat.osm_id;\n    return [feat];\n}\n\n/**\n * Function that parse a route. All linear ways with the same role\n * will be converted into one LineString.\n *\n * Parameters:\n * relation - {DOMElement} the relation to parse\n * parser - <OpenLayers.parser.OSM> the parser\n * nodes - {Array({DOMElement})} all the available nodes\n * ways - {Array({DOMElement})} all the available ways\n * relations - {Array({DOMElement})} all the available relations\n *\n * Returns:\n * {Array(<OpenLayers.Feature.Vector>)} a list of linear LineString.\n */\nOpenLayers.Format.OSM.routeParserWithRoles = function(relation, parser, nodes, ways, relations) {\n    var geometries = [];\n    var lastRole = '';\n    var lastPointList = [];\n    var features = [];\n\n    for (var j = 0; j < relation.ways.length; j++) {\n        var way = relation.ways[j]\n        var ref = way.getAttribute(\"ref\");\n        var role = way.getAttribute(\"role\");\n\n        var pointList = parser.getPointList(ways[ref], nodes);\n        if (pointList.length == 0) {\n            continue;\n        }\n        var newPath = true;\n        if (lastRole == '') {\n            lastRole = role;\n        }\n        if (lastRole == role) {\n            var result = parser.concatPathsIfLinear(lastPointList, pointList);\n            if (result.succed) {\n                newPath = false;\n                lastPointList = result.lastPointList;\n            }\n        }\n        if (newPath) {\n            var geometry = new OpenLayers.Geometry.LineString(lastPointList)\n            var feat = new OpenLayers.Feature.Vector(geometry, relation.tags);\n            if (role) {\n                feat.attributes.role = role;\n            }\n            feat.osm_id = parseInt(relation.id);\n            feat.type = \"relation\";\n            feat.fid = \"relation.\" + feat.osm_id + \".\" + j;\n            features.push(feat);\n            lastPointList = pointList;\n            lastRole = role;\n        }\n    }\n    var geometry = new OpenLayers.Geometry.LineString(lastPointList)\n    var feat = new OpenLayers.Feature.Vector(geometry, relation.tags);\n    if (role) {\n        feat.attributes.role = role;\n    }\n    feat.osm_id = parseInt(relation.id);\n    feat.type = \"relation\";\n    feat.fid = \"relation.\" + feat.osm_id;\n    features.push(feat);\n    return features;\n}\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML.js\n * @requires OpenLayers/Feature/Vector.js\n * @requires OpenLayers/Geometry/Point.js\n * @requires OpenLayers/Geometry/LineString.js\n * @requires OpenLayers/Projection.js\n */\n\n/**\n * Class: OpenLayers.Format.GPX\n * Read/write GPX parser. Create a new instance with the \n *     <OpenLayers.Format.GPX> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.GPX = OpenLayers.Class(OpenLayers.Format.XML, {\n    \n\n    /** \n     * APIProperty: defaultDesc\n     * {String} Default description for the waypoints/tracks in the case\n     *     where the feature has no \"description\" attribute.\n     *     Default is \"No description available\".\n     */\n    defaultDesc: \"No description available\",\n\n   /**\n    * APIProperty: extractWaypoints\n    * {Boolean} Extract waypoints from GPX. (default: true)\n    */\n    extractWaypoints: true,\n    \n   /**\n    * APIProperty: extractTracks\n    * {Boolean} Extract tracks from GPX. (default: true)\n    */\n    extractTracks: true,\n    \n   /**\n    * APIProperty: extractRoutes\n    * {Boolean} Extract routes from GPX. (default: true)\n    */\n    extractRoutes: true,\n    \n    /**\n     * APIProperty: extractAttributes\n     * {Boolean} Extract feature attributes from GPX. (default: true)\n     *     NOTE: Attributes as part of extensions to the GPX standard may not\n     *     be extracted.\n     */\n    extractAttributes: true,\n\n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        gpx: \"http://www.topografix.com/GPX/1/1\",\n        xsi: \"http://www.w3.org/2001/XMLSchema-instance\"\n    },\n\n    /**\n     * Property: schemaLocation\n     * {String} Schema location. Defaults to\n     *  \"http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd\"\n     */\n    schemaLocation: \"http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd\",\n\n    /**\n     * APIProperty: creator\n     * {String} The creator attribute to be added to the written GPX files.\n     * Defaults to \"OpenLayers\"\n     */\n    creator: \"OpenLayers\",\n    \n    /**\n     * Constructor: OpenLayers.Format.GPX\n     * Create a new parser for GPX.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    initialize: function(options) {\n        // GPX coordinates are always in longlat WGS84\n        this.externalProjection = new OpenLayers.Projection(\"EPSG:4326\");\n\n        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);\n    },\n    \n    /**\n     * APIMethod: read\n     * Return a list of features from a GPX doc\n     *\n     * Parameters:\n     * doc - {Element} \n     *\n     * Returns:\n     * Array({<OpenLayers.Feature.Vector>})\n     */\n    read: function(doc) {\n        if (typeof doc == \"string\") { \n            doc = OpenLayers.Format.XML.prototype.read.apply(this, [doc]);\n        }\n        var features = [];\n        \n        if(this.extractTracks) {\n            var tracks = doc.getElementsByTagName(\"trk\");\n            for (var i=0, len=tracks.length; i<len; i++) {\n                // Attributes are only in trk nodes, not trkseg nodes\n                var attrs = {};\n                if(this.extractAttributes) {\n                    attrs = this.parseAttributes(tracks[i]);\n                }\n                \n                var segs = this.getElementsByTagNameNS(tracks[i], tracks[i].namespaceURI, \"trkseg\");\n                for (var j = 0, seglen = segs.length; j < seglen; j++) {\n                    // We don't yet support extraction of trkpt attributes\n                    // All trksegs of a trk get that trk's attributes\n                    var track = this.extractSegment(segs[j], \"trkpt\");\n                    features.push(new OpenLayers.Feature.Vector(track, attrs));\n                }\n            }\n        }\n        \n        if(this.extractRoutes) {\n            var routes = doc.getElementsByTagName(\"rte\");\n            for (var k=0, klen=routes.length; k<klen; k++) {\n                var attrs = {};\n                if(this.extractAttributes) {\n                    attrs = this.parseAttributes(routes[k]);\n                }\n                var route = this.extractSegment(routes[k], \"rtept\");\n                features.push(new OpenLayers.Feature.Vector(route, attrs));\n            }\n        }\n        \n        if(this.extractWaypoints) {\n            var waypoints = doc.getElementsByTagName(\"wpt\");\n            for (var l = 0, len = waypoints.length; l < len; l++) {\n                var attrs = {};\n                if(this.extractAttributes) {\n                    attrs = this.parseAttributes(waypoints[l]);\n                }\n                var wpt = new OpenLayers.Geometry.Point(waypoints[l].getAttribute(\"lon\"), waypoints[l].getAttribute(\"lat\"));\n                features.push(new OpenLayers.Feature.Vector(wpt, attrs));\n            }\n        }\n        \n        if (this.internalProjection && this.externalProjection) {\n            for (var g = 0, featLength = features.length; g < featLength; g++) {\n                features[g].geometry.transform(this.externalProjection,\n                                    this.internalProjection);\n            }\n        }\n        \n        return features;\n    },\n    \n   /**\n    * Method: extractSegment\n    *\n    * Parameters:\n    * segment - {DOMElement} a trkseg or rte node to parse\n    * segmentType - {String} nodeName of waypoints that form the line\n    *\n    * Returns:\n    * {<OpenLayers.Geometry.LineString>} A linestring geometry\n    */\n    extractSegment: function(segment, segmentType) {\n        var points = this.getElementsByTagNameNS(segment, segment.namespaceURI, segmentType);\n        var point_features = [];\n        for (var i = 0, len = points.length; i < len; i++) {\n            point_features.push(new OpenLayers.Geometry.Point(points[i].getAttribute(\"lon\"), points[i].getAttribute(\"lat\")));\n        }\n        return new OpenLayers.Geometry.LineString(point_features);\n    },\n    \n    /**\n     * Method: parseAttributes\n     *\n     * Parameters:\n     * node - {<DOMElement>}\n     *\n     * Returns:\n     * {Object} An attributes object.\n     */\n    parseAttributes: function(node) {\n        // node is either a wpt, trk or rte\n        // attributes are children of the form <attr>value</attr>\n        var attributes = {};\n        var attrNode = node.firstChild, value, name;\n        while(attrNode) {\n            if(attrNode.nodeType == 1 && attrNode.firstChild) {\n                value = attrNode.firstChild;\n                if(value.nodeType == 3 || value.nodeType == 4) {\n                    name = (attrNode.prefix) ?\n                        attrNode.nodeName.split(\":\")[1] :\n                        attrNode.nodeName;\n                    if(name != \"trkseg\" && name != \"rtept\") {\n                        attributes[name] = value.nodeValue;\n                    }\n                }\n            }\n            attrNode = attrNode.nextSibling;\n        }\n        return attributes;\n    },\n\n    /**\n     * APIMethod: write\n     * Accepts Feature Collection, and returns a string. \n     * \n     * Parameters: \n     * features - {Array(<OpenLayers.Feature.Vector>)} List of features to serialize into a string.\n     * metadata - {Object} A key/value pairs object to build a metadata node to\n     *      add to the gpx. Supported keys are 'name', 'desc', 'author'.\n     */\n    write: function(features, metadata) {\n        features = OpenLayers.Util.isArray(features) ?\n            features : [features];\n        var gpx = this.createElementNS(this.namespaces.gpx, \"gpx\");\n        gpx.setAttribute(\"version\", \"1.1\");\n        gpx.setAttribute(\"creator\", this.creator);\n        this.setAttributes(gpx, {\n            \"xsi:schemaLocation\": this.schemaLocation\n        });\n\n        if (metadata && typeof metadata == 'object') {\n            gpx.appendChild(this.buildMetadataNode(metadata));\n        }\n        for(var i=0, len=features.length; i<len; i++) {\n            gpx.appendChild(this.buildFeatureNode(features[i]));\n        }\n        return OpenLayers.Format.XML.prototype.write.apply(this, [gpx]);\n    },\n\n    /**\n     * Method: buildMetadataNode\n     * Creates a \"metadata\" node.\n     *\n     * Returns:\n     * {DOMElement}\n     */\n    buildMetadataNode: function(metadata) {\n        var types = ['name', 'desc', 'author'],\n            node = this.createElementNS(this.namespaces.gpx, 'metadata');\n        for (var i=0; i < types.length; i++) {\n            var type = types[i];\n            if (metadata[type]) {\n                var n = this.createElementNS(this.namespaces.gpx, type);\n                n.appendChild(this.createTextNode(metadata[type]));\n                node.appendChild(n);\n            }\n        }\n        return node;\n    },\n\n    /**\n     * Method: buildFeatureNode\n     * Accepts an <OpenLayers.Feature.Vector>, and builds a node for it.\n     * \n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     *\n     * Returns:\n     * {DOMElement} - The created node, either a 'wpt' or a 'trk'.\n     */\n    buildFeatureNode: function(feature) {\n        var geometry = feature.geometry;\n            geometry = geometry.clone();\n        if (this.internalProjection && this.externalProjection) {\n            geometry.transform(this.internalProjection, \n                               this.externalProjection);\n        }\n        if (geometry.CLASS_NAME == \"OpenLayers.Geometry.Point\") {\n            var wpt = this.buildWptNode(geometry);\n            this.appendAttributesNode(wpt, feature);\n            return wpt;\n        } else {\n            var trkNode = this.createElementNS(this.namespaces.gpx, \"trk\");\n            this.appendAttributesNode(trkNode, feature);\n            var trkSegNodes = this.buildTrkSegNode(geometry);\n            trkSegNodes = OpenLayers.Util.isArray(trkSegNodes) ?\n                trkSegNodes : [trkSegNodes];\n            for (var i = 0, len = trkSegNodes.length; i < len; i++) {\n                trkNode.appendChild(trkSegNodes[i]);\n            }\n            return trkNode;\n        }\n    },\n\n    /**\n     * Method: buildTrkSegNode\n     * Builds trkseg node(s) given a geometry\n     *\n     * Parameters:\n     * trknode\n     * geometry - {<OpenLayers.Geometry>}\n     */\n    buildTrkSegNode: function(geometry) {\n        var node,\n            i,\n            len,\n            point,\n            nodes;\n        if (geometry.CLASS_NAME == \"OpenLayers.Geometry.LineString\" ||\n            geometry.CLASS_NAME == \"OpenLayers.Geometry.LinearRing\") {\n            node = this.createElementNS(this.namespaces.gpx, \"trkseg\");\n            for (i = 0, len=geometry.components.length; i < len; i++) {\n                point = geometry.components[i];\n                node.appendChild(this.buildTrkPtNode(point));\n            }\n            return node;\n        } else {\n            nodes = [];\n            for (i = 0, len = geometry.components.length; i < len; i++) {\n                nodes.push(this.buildTrkSegNode(geometry.components[i]));\n            }\n            return nodes;\n        }\n    },\n    \n    /**\n     * Method: buildTrkPtNode\n     * Builds a trkpt node given a point \n     *\n     * Parameters:\n     * point - {<OpenLayers.Geometry.Point>}\n     *\n     * Returns:\n     * {DOMElement} A trkpt node\n     */\n    buildTrkPtNode: function(point) {\n        var node = this.createElementNS(this.namespaces.gpx, \"trkpt\");\n        node.setAttribute(\"lon\", point.x);\n        node.setAttribute(\"lat\", point.y);\n        return node;\n    },\n\n    /**\n     * Method: buildWptNode\n     * Builds a wpt node given a point\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry.Point>}\n     *\n     * Returns:\n     * {DOMElement} A wpt node\n     */\n    buildWptNode: function(geometry) {\n        var node = this.createElementNS(this.namespaces.gpx, \"wpt\");\n        node.setAttribute(\"lon\", geometry.x);\n        node.setAttribute(\"lat\", geometry.y);\n        return node;\n    },\n\n    /**\n     * Method: appendAttributesNode\n     * Adds some attributes node.\n     *\n     * Parameters:\n     * node - {DOMElement} the node to append the attribute nodes to.\n     * feature - {<OpenLayers.Feature.Vector>}\n     */\n    appendAttributesNode: function(node, feature) {\n        var name = this.createElementNS(this.namespaces.gpx, 'name');\n        name.appendChild(this.createTextNode(\n            feature.attributes.name || feature.id));\n        node.appendChild(name);\n        var desc = this.createElementNS(this.namespaces.gpx, 'desc');\n        desc.appendChild(this.createTextNode(\n            feature.attributes.description || feature.attributes.desc || this.defaultDesc));\n        node.appendChild(desc);\n        // TBD - deal with remaining (non name/description) attributes.\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.GPX\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML/VersionedOGC.js\n * @requires OpenLayers/Filter/FeatureId.js\n * @requires OpenLayers/Filter/Logical.js\n * @requires OpenLayers/Filter/Comparison.js\n */\n\n/**\n * Class: OpenLayers.Format.Filter\n * Read/Write ogc:Filter. Create a new instance with the <OpenLayers.Format.Filter>\n *     constructor.\n * \n * Inherits from:\n *  - <OpenLayers.Format.XML.VersionedOGC>\n */\nOpenLayers.Format.Filter = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {\n    \n    /**\n     * APIProperty: defaultVersion\n     * {String} Version number to assume if none found.  Default is \"1.0.0\".\n     */\n    defaultVersion: \"1.0.0\",\n    \n    /**\n     * APIMethod: write\n     * Write an ogc:Filter given a filter object.\n     *\n     * Parameters:\n     * filter - {<OpenLayers.Filter>} An filter.\n     * options - {Object} Optional configuration object.\n     *\n     * Returns:\n     * {Elment} An ogc:Filter element node.\n     */\n    \n    /**\n     * APIMethod: read\n     * Read and Filter doc and return an object representing the Filter.\n     *\n     * Parameters:\n     * data - {String | DOMElement} Data to read.\n     *\n     * Returns:\n     * {<OpenLayers.Filter>} A filter object.\n     */\n\n    CLASS_NAME: \"OpenLayers.Format.Filter\" \n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n/**\n * @requires OpenLayers/Format/Filter.js\n * @requires OpenLayers/Format/XML.js\n * @requires OpenLayers/Filter/Function.js\n * @requires OpenLayers/BaseTypes/Date.js\n */\n\n/**\n * Class: OpenLayers.Format.Filter.v1\n * Superclass for Filter version 1 parsers.\n *\n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.Filter.v1 = OpenLayers.Class(OpenLayers.Format.XML, {\n    \n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        ogc: \"http://www.opengis.net/ogc\",\n        gml: \"http://www.opengis.net/gml\",\n        xlink: \"http://www.w3.org/1999/xlink\",\n        xsi: \"http://www.w3.org/2001/XMLSchema-instance\"\n    },\n\n    /**\n     * Property: defaultPrefix\n     */\n    defaultPrefix: \"ogc\",\n\n    /**\n     * Property: schemaLocation\n     * {String} Schema location for a particular minor version.\n     */\n    schemaLocation: null,\n    \n    /**\n     * Constructor: OpenLayers.Format.Filter.v1\n     * Instances of this class are not created directly.  Use the\n     *     <OpenLayers.Format.Filter> constructor instead.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    initialize: function(options) {\n        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);\n    },\n    \n    /**\n     * Method: read\n     *\n     * Parameters:\n     * data - {DOMElement} A Filter document element.\n     *\n     * Returns:\n     * {<OpenLayers.Filter>} A filter object.\n     */\n    read: function(data) {\n        var obj = {};\n        this.readers.ogc[\"Filter\"].apply(this, [data, obj]);\n        return obj.filter;\n    },\n    \n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"ogc\": {\n            \"_expression\": function(node) {\n                // only the simplest of ogc:expression handled\n                // \"some text and an <PropertyName>attribute</PropertyName>\"}\n                var obj, value = \"\";\n                for(var child=node.firstChild; child; child=child.nextSibling) {\n                    switch(child.nodeType) {\n                        case 1:\n                            obj = this.readNode(child);\n                            if (obj.property) {\n                                value += \"${\" + obj.property + \"}\";\n                            } else if (obj.value !== undefined) {\n                                value += obj.value;\n                            }\n                            break;\n                        case 3: // text node\n                        case 4: // cdata section\n                            value += child.nodeValue;\n                    }\n                }\n                return value;\n            },\n            \"Filter\": function(node, parent) {\n                // Filters correspond to subclasses of OpenLayers.Filter.\n                // Since they contain information we don't persist, we\n                // create a temporary object and then pass on the filter\n                // (ogc:Filter) to the parent obj.\n                var obj = {\n                    fids: [],\n                    filters: []\n                };\n                this.readChildNodes(node, obj);\n                if(obj.fids.length > 0) {\n                    parent.filter = new OpenLayers.Filter.FeatureId({\n                        fids: obj.fids\n                    });\n                } else if(obj.filters.length > 0) {\n                    parent.filter = obj.filters[0];\n                }\n            },\n            \"FeatureId\": function(node, obj) {\n                var fid = node.getAttribute(\"fid\");\n                if(fid) {\n                    obj.fids.push(fid);\n                }\n            },\n            \"And\": function(node, obj) {\n                var filter = new OpenLayers.Filter.Logical({\n                    type: OpenLayers.Filter.Logical.AND\n                });\n                this.readChildNodes(node, filter);\n                obj.filters.push(filter);\n            },\n            \"Or\": function(node, obj) {\n                var filter = new OpenLayers.Filter.Logical({\n                    type: OpenLayers.Filter.Logical.OR\n                });\n                this.readChildNodes(node, filter);\n                obj.filters.push(filter);\n            },\n            \"Not\": function(node, obj) {\n                var filter = new OpenLayers.Filter.Logical({\n                    type: OpenLayers.Filter.Logical.NOT\n                });\n                this.readChildNodes(node, filter);\n                obj.filters.push(filter);\n            },\n            \"PropertyIsLessThan\": function(node, obj) {\n                var filter = new OpenLayers.Filter.Comparison({\n                    type: OpenLayers.Filter.Comparison.LESS_THAN\n                });\n                this.readChildNodes(node, filter);\n                obj.filters.push(filter);\n            },\n            \"PropertyIsGreaterThan\": function(node, obj) {\n                var filter = new OpenLayers.Filter.Comparison({\n                    type: OpenLayers.Filter.Comparison.GREATER_THAN\n                });\n                this.readChildNodes(node, filter);\n                obj.filters.push(filter);\n            },\n            \"PropertyIsLessThanOrEqualTo\": function(node, obj) {\n                var filter = new OpenLayers.Filter.Comparison({\n                    type: OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO\n                });\n                this.readChildNodes(node, filter);\n                obj.filters.push(filter);\n            },\n            \"PropertyIsGreaterThanOrEqualTo\": function(node, obj) {\n                var filter = new OpenLayers.Filter.Comparison({\n                    type: OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO\n                });\n                this.readChildNodes(node, filter);\n                obj.filters.push(filter);\n            },\n            \"PropertyIsBetween\": function(node, obj) {\n                var filter = new OpenLayers.Filter.Comparison({\n                    type: OpenLayers.Filter.Comparison.BETWEEN\n                });\n                this.readChildNodes(node, filter);\n                obj.filters.push(filter);\n            },\n            \"Literal\": function(node, obj) {\n                obj.value = OpenLayers.String.numericIf(\n                    this.getChildValue(node), true);\n            },\n            \"PropertyName\": function(node, filter) {\n                filter.property = this.getChildValue(node);\n            },\n            \"LowerBoundary\": function(node, filter) {\n                filter.lowerBoundary = OpenLayers.String.numericIf(\n                    this.readers.ogc._expression.call(this, node), true);\n            },\n            \"UpperBoundary\": function(node, filter) {\n                filter.upperBoundary = OpenLayers.String.numericIf(\n                    this.readers.ogc._expression.call(this, node), true);\n            },\n            \"Intersects\": function(node, obj) {\n                this.readSpatial(node, obj, OpenLayers.Filter.Spatial.INTERSECTS);\n            },\n            \"Within\": function(node, obj) {\n                this.readSpatial(node, obj, OpenLayers.Filter.Spatial.WITHIN);\n            },\n            \"Contains\": function(node, obj) {\n                this.readSpatial(node, obj, OpenLayers.Filter.Spatial.CONTAINS);\n            },\n            \"DWithin\": function(node, obj) {\n                this.readSpatial(node, obj, OpenLayers.Filter.Spatial.DWITHIN);\n            },\n            \"Distance\": function(node, obj) {\n                obj.distance = parseInt(this.getChildValue(node));\n                obj.distanceUnits = node.getAttribute(\"units\");\n            },\n            \"Function\": function(node, obj) {\n                //TODO write decoder for it\n                return;\n            },\n            \"PropertyIsNull\": function(node, obj) {\n                var filter = new OpenLayers.Filter.Comparison({\n                    type: OpenLayers.Filter.Comparison.IS_NULL\n                });\n                this.readChildNodes(node, filter);\n                obj.filters.push(filter);\n            }\n        }\n    },\n    \n    /**\n     * Method: readSpatial\n     *\n     * Read a {<OpenLayers.Filter.Spatial>} filter.\n     * \n     * Parameters:\n     * node - {DOMElement} A DOM element that contains an ogc:expression.\n     * obj - {Object} The target object.\n     * type - {String} One of the OpenLayers.Filter.Spatial.* constants.\n     *\n     * Returns:\n     * {<OpenLayers.Filter.Spatial>} The created filter.\n     */\n    readSpatial: function(node, obj, type) {\n        var filter = new OpenLayers.Filter.Spatial({\n            type: type\n        });\n        this.readChildNodes(node, filter);\n        filter.value = filter.components[0];\n        delete filter.components;\n        obj.filters.push(filter);\n    },\n\n    /**\n     * APIMethod: encodeLiteral\n     * Generates the string representation of a value for use in <Literal> \n     *     elements.  The default encoder writes Date values as ISO 8601 \n     *     strings.\n     *\n     * Parameters:\n     * value - {Object} Literal value to encode\n     *\n     * Returns:\n     * {String} String representation of the provided value.\n     */\n    encodeLiteral: function(value) {\n        if (value instanceof Date) {\n            value = OpenLayers.Date.toISOString(value);\n        }\n        return value;\n    },\n\n    /**\n     * Method: writeOgcExpression\n     * Limited support for writing OGC expressions. Currently it supports\n     * (<OpenLayers.Filter.Function> || String || Number)\n     *\n     * Parameters:\n     * value - (<OpenLayers.Filter.Function> || String || Number)\n     * node - {DOMElement} A parent DOM element \n     *\n     * Returns:\n     * {DOMElement} Updated node element.\n     */\n    writeOgcExpression: function(value, node) {\n        if (value instanceof OpenLayers.Filter.Function){\n            this.writeNode(\"Function\", value, node);\n        } else {\n            this.writeNode(\"Literal\", value, node);\n        }\n        return node;\n    },    \n    \n    /**\n     * Method: write\n     *\n     * Parameters:\n     * filter - {<OpenLayers.Filter>} A filter object.\n     *\n     * Returns:\n     * {DOMElement} An ogc:Filter element.\n     */\n    write: function(filter) {\n        return this.writers.ogc[\"Filter\"].apply(this, [filter]);\n    },\n    \n    /**\n     * Property: writers\n     * As a compliment to the readers property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: {\n        \"ogc\": {\n            \"Filter\": function(filter) {\n                var node = this.createElementNSPlus(\"ogc:Filter\");\n                this.writeNode(this.getFilterType(filter), filter, node);\n                return node;\n            },\n            \"_featureIds\": function(filter) {\n                var node = this.createDocumentFragment();\n                for (var i=0, ii=filter.fids.length; i<ii; ++i) {\n                    this.writeNode(\"ogc:FeatureId\", filter.fids[i], node);\n                }\n                return node;\n            },\n            \"FeatureId\": function(fid) {\n                return this.createElementNSPlus(\"ogc:FeatureId\", {\n                    attributes: {fid: fid}\n                });\n            },\n            \"And\": function(filter) {\n                var node = this.createElementNSPlus(\"ogc:And\");\n                var childFilter;\n                for (var i=0, ii=filter.filters.length; i<ii; ++i) {\n                    childFilter = filter.filters[i];\n                    this.writeNode(\n                        this.getFilterType(childFilter), childFilter, node\n                    );\n                }\n                return node;\n            },\n            \"Or\": function(filter) {\n                var node = this.createElementNSPlus(\"ogc:Or\");\n                var childFilter;\n                for (var i=0, ii=filter.filters.length; i<ii; ++i) {\n                    childFilter = filter.filters[i];\n                    this.writeNode(\n                        this.getFilterType(childFilter), childFilter, node\n                    );\n                }\n                return node;\n            },\n            \"Not\": function(filter) {\n                var node = this.createElementNSPlus(\"ogc:Not\");\n                var childFilter = filter.filters[0];\n                this.writeNode(\n                    this.getFilterType(childFilter), childFilter, node\n                );\n                return node;\n            },\n            \"PropertyIsLessThan\": function(filter) {\n                var node = this.createElementNSPlus(\"ogc:PropertyIsLessThan\");\n                // no ogc:expression handling for PropertyName for now\n                this.writeNode(\"PropertyName\", filter, node);\n                // handle Literals or Functions for now\n                this.writeOgcExpression(filter.value, node);\n                return node;\n            },\n            \"PropertyIsGreaterThan\": function(filter) {\n                var node = this.createElementNSPlus(\"ogc:PropertyIsGreaterThan\");\n                // no ogc:expression handling for PropertyName for now\n                this.writeNode(\"PropertyName\", filter, node);\n                // handle Literals or Functions for now\n                this.writeOgcExpression(filter.value, node);\n                return node;\n            },\n            \"PropertyIsLessThanOrEqualTo\": function(filter) {\n                var node = this.createElementNSPlus(\"ogc:PropertyIsLessThanOrEqualTo\");\n                // no ogc:expression handling for PropertyName for now\n                this.writeNode(\"PropertyName\", filter, node);\n                // handle Literals or Functions for now\n                this.writeOgcExpression(filter.value, node);\n                return node;\n            },\n            \"PropertyIsGreaterThanOrEqualTo\": function(filter) {\n                var node = this.createElementNSPlus(\"ogc:PropertyIsGreaterThanOrEqualTo\");\n                // no ogc:expression handling for PropertyName for now\n                this.writeNode(\"PropertyName\", filter, node);\n                // handle Literals or Functions for now\n                this.writeOgcExpression(filter.value, node);\n                return node;\n            },\n            \"PropertyIsBetween\": function(filter) {\n                var node = this.createElementNSPlus(\"ogc:PropertyIsBetween\");\n                // no ogc:expression handling for PropertyName for now\n                this.writeNode(\"PropertyName\", filter, node);\n                this.writeNode(\"LowerBoundary\", filter, node);\n                this.writeNode(\"UpperBoundary\", filter, node);\n                return node;\n            },\n            \"PropertyName\": function(filter) {\n                // no ogc:expression handling for now\n                return this.createElementNSPlus(\"ogc:PropertyName\", {\n                    value: filter.property\n                });\n            },\n            \"Literal\": function(value) {\n                var encode = this.encodeLiteral ||\n                    OpenLayers.Format.Filter.v1.prototype.encodeLiteral;\n                return this.createElementNSPlus(\"ogc:Literal\", {\n                    value: encode(value)\n                });\n            },\n            \"LowerBoundary\": function(filter) {\n                // handle Literals or Functions for now\n                var node = this.createElementNSPlus(\"ogc:LowerBoundary\");\n                this.writeOgcExpression(filter.lowerBoundary, node);\n                return node;\n            },\n            \"UpperBoundary\": function(filter) {\n                // handle Literals or Functions for now\n                var node = this.createElementNSPlus(\"ogc:UpperBoundary\");\n                this.writeNode(\"Literal\", filter.upperBoundary, node);\n                return node;\n            },\n            \"INTERSECTS\": function(filter) {\n                return this.writeSpatial(filter, \"Intersects\");\n            },\n            \"WITHIN\": function(filter) {\n                return this.writeSpatial(filter, \"Within\");\n            },\n            \"CONTAINS\": function(filter) {\n                return this.writeSpatial(filter, \"Contains\");\n            },\n            \"DWITHIN\": function(filter) {\n                var node = this.writeSpatial(filter, \"DWithin\");\n                this.writeNode(\"Distance\", filter, node);\n                return node;\n            },\n            \"Distance\": function(filter) {\n                return this.createElementNSPlus(\"ogc:Distance\", {\n                    attributes: {\n                        units: filter.distanceUnits\n                    },\n                    value: filter.distance\n                });\n            },\n            \"Function\": function(filter) {\n                var node = this.createElementNSPlus(\"ogc:Function\", {\n                    attributes: {\n                        name: filter.name\n                    }\n                });\n                var params = filter.params;\n                for(var i=0, len=params.length; i<len; i++){\n                    this.writeOgcExpression(params[i], node);\n                }\n                return node;\n            },\n            \"PropertyIsNull\": function(filter) {\n                var node = this.createElementNSPlus(\"ogc:PropertyIsNull\");\n                this.writeNode(\"PropertyName\", filter, node);\n                return node;\n            }\n        }\n    },\n\n    /**\n     * Method: getFilterType\n     */\n    getFilterType: function(filter) {\n        var filterType = this.filterMap[filter.type];\n        if(!filterType) {\n            throw \"Filter writing not supported for rule type: \" + filter.type;\n        }\n        return filterType;\n    },\n    \n    /**\n     * Property: filterMap\n     * {Object} Contains a member for each filter type.  Values are node names\n     *     for corresponding OGC Filter child elements.\n     */\n    filterMap: {\n        \"&&\": \"And\",\n        \"||\": \"Or\",\n        \"!\": \"Not\",\n        \"==\": \"PropertyIsEqualTo\",\n        \"!=\": \"PropertyIsNotEqualTo\",\n        \"<\": \"PropertyIsLessThan\",\n        \">\": \"PropertyIsGreaterThan\",\n        \"<=\": \"PropertyIsLessThanOrEqualTo\",\n        \">=\": \"PropertyIsGreaterThanOrEqualTo\",\n        \"..\": \"PropertyIsBetween\",\n        \"~\": \"PropertyIsLike\",\n        \"NULL\": \"PropertyIsNull\",\n        \"BBOX\": \"BBOX\",\n        \"DWITHIN\": \"DWITHIN\",\n        \"WITHIN\": \"WITHIN\",\n        \"CONTAINS\": \"CONTAINS\",\n        \"INTERSECTS\": \"INTERSECTS\",\n        \"FID\": \"_featureIds\"\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.Filter.v1\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n/**\n * @requires OpenLayers/Format/Filter.js\n * @requires OpenLayers/Format/XML.js\n * @requires OpenLayers/Filter/Function.js\n * @requires OpenLayers/BaseTypes/Date.js\n */\n\n/**\n * Class: OpenLayers.Format.Filter.v2\n * Superclass for Filter version 2 parsers.\n *\n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.Filter.v2 = OpenLayers.Class(OpenLayers.Format.XML, {\n    \n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        fes: \"http://www.opengis.net/fes/2.0\",\n        gml: \"http://www.opengis.net/gml/3.2\",\n        xlink: \"http://www.w3.org/1999/xlink\",\n        xsi: \"http://www.w3.org/2001/XMLSchema-instance\"\n    },\n\n    /**\n     * Property: defaultPrefix\n     */\n    defaultPrefix: \"fes\",\n\n    /**\n     * Property: schemaLocation\n     * {String} Schema location for a particular minor version.\n     */\n    schemaLocation: null,\n    \n    /**\n     * Constructor: OpenLayers.Format.Filter.v1\n     * Instances of this class are not created directly.  Use the\n     *     <OpenLayers.Format.Filter> constructor instead.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    initialize: function(options) {\n        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);\n    },\n    \n    /**\n     * Method: read\n     *\n     * Parameters:\n     * data - {DOMElement} A Filter document element.\n     *\n     * Returns:\n     * {<OpenLayers.Filter>} A filter object.\n     */\n    read: function(data) {\n        var obj = {};\n        this.readers.fes[\"Filter\"].apply(this, [data, obj]);\n        return obj.filter;\n    },\n    \n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"fes\": {\n            \"_expression\": function(node) {\n                // only the simplest of fes:expression handled\n                // \"some text and an <ValueReference>attribute</ValueReference>\"}\n                var obj, value = \"\";\n                for(var child=node.firstChild; child; child=child.nextSibling) {\n                    switch(child.nodeType) {\n                        case 1:\n                            obj = this.readNode(child);\n                            if (obj.property) {\n                                value += \"${\" + obj.property + \"}\";\n                            } else if (obj.value !== undefined) {\n                                value += obj.value;\n                            }\n                            break;\n                        case 3: // text node\n                        case 4: // cdata section\n                            value += child.nodeValue;\n                    }\n                }\n                return value;\n            },\n            \"Filter\": function(node, parent) {\n                // Filters correspond to subclasses of OpenLayers.Filter.\n                // Since they contain information we don't persist, we\n                // create a temporary object and then pass on the filter\n                // (fes:Filter) to the parent obj.\n                var obj = {\n                    fids: [],\n                    filters: []\n                };\n                this.readChildNodes(node, obj);\n                if(obj.fids.length > 0) {\n                    parent.filter = new OpenLayers.Filter.FeatureId({\n                        fids: obj.fids\n                    });\n                } else if(obj.filters.length > 0) {\n                    parent.filter = obj.filters[0];\n                }\n            },\n            \"ResourceId\": function(node, obj) {\n                var fid = node.getAttribute(\"rid\");\n                if(fid) {\n                    obj.fids.push(fid);\n                }\n            },\n\n            \"And\": function(node, obj) {\n                var filter = new OpenLayers.Filter.Logical({\n                    type: OpenLayers.Filter.Logical.AND\n                });\n                this.readChildNodes(node, filter);\n                obj.filters.push(filter);\n            },\n            \"Or\": function(node, obj) {\n                var filter = new OpenLayers.Filter.Logical({\n                    type: OpenLayers.Filter.Logical.OR\n                });\n                this.readChildNodes(node, filter);\n                obj.filters.push(filter);\n            },\n            \"Not\": function(node, obj) {\n                var filter = new OpenLayers.Filter.Logical({\n                    type: OpenLayers.Filter.Logical.NOT\n                });\n                this.readChildNodes(node, filter);\n                obj.filters.push(filter);\n            },\n            \"PropertyIsLessThan\": function(node, obj) {\n                var filter = new OpenLayers.Filter.Comparison({\n                    type: OpenLayers.Filter.Comparison.LESS_THAN\n                });\n                this.readChildNodes(node, filter);\n                obj.filters.push(filter);\n            },\n            \"PropertyIsGreaterThan\": function(node, obj) {\n                var filter = new OpenLayers.Filter.Comparison({\n                    type: OpenLayers.Filter.Comparison.GREATER_THAN\n                });\n                this.readChildNodes(node, filter);\n                obj.filters.push(filter);\n            },\n            \"PropertyIsLessThanOrEqualTo\": function(node, obj) {\n                var filter = new OpenLayers.Filter.Comparison({\n                    type: OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO\n                });\n                this.readChildNodes(node, filter);\n                obj.filters.push(filter);\n            },\n            \"PropertyIsGreaterThanOrEqualTo\": function(node, obj) {\n                var filter = new OpenLayers.Filter.Comparison({\n                    type: OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO\n                });\n                this.readChildNodes(node, filter);\n                obj.filters.push(filter);\n            },\n            \"PropertyIsBetween\": function(node, obj) {\n                var filter = new OpenLayers.Filter.Comparison({\n                    type: OpenLayers.Filter.Comparison.BETWEEN\n                });\n                this.readChildNodes(node, filter);\n                obj.filters.push(filter);\n            },\n            \"Literal\": function(node, obj) {\n                obj.value = OpenLayers.String.numericIf(\n                    this.getChildValue(node), true);\n            },\n            \"ValueReference\": function(node, filter) {\n                filter.property = this.getChildValue(node);\n            },\n            \"LowerBoundary\": function(node, filter) {\n                filter.lowerBoundary = OpenLayers.String.numericIf(\n                    this.readers.fes._expression.call(this, node), true);\n            },\n            \"UpperBoundary\": function(node, filter) {\n                filter.upperBoundary = OpenLayers.String.numericIf(\n                    this.readers.fes._expression.call(this, node), true);\n            },\n            \"Intersects\": function(node, obj) {\n                this.readSpatial(node, obj, OpenLayers.Filter.Spatial.INTERSECTS);\n            },\n            \"Within\": function(node, obj) {\n                this.readSpatial(node, obj, OpenLayers.Filter.Spatial.WITHIN);\n            },\n            \"Contains\": function(node, obj) {\n                this.readSpatial(node, obj, OpenLayers.Filter.Spatial.CONTAINS);\n            },\n            \"DWithin\": function(node, obj) {\n                this.readSpatial(node, obj, OpenLayers.Filter.Spatial.DWITHIN);\n            },\n            \"Distance\": function(node, obj) {\n                obj.distance = parseInt(this.getChildValue(node));\n                obj.distanceUnits = node.getAttribute(\"units\");\n            },\n            \"Function\": function(node, obj) {\n                //TODO write decoder for it\n                return;\n            },\n            \"PropertyIsNull\": function(node, obj) {\n                var filter = new OpenLayers.Filter.Comparison({\n                    type: OpenLayers.Filter.Comparison.IS_NULL\n                });\n                this.readChildNodes(node, filter);\n                obj.filters.push(filter);\n            }\n        }\n    },\n    \n    /**\n     * Method: readSpatial\n     *\n     * Read a {<OpenLayers.Filter.Spatial>} filter.\n     * \n     * Parameters:\n     * node - {DOMElement} A DOM element that contains an fes:expression.\n     * obj - {Object} The target object.\n     * type - {String} One of the OpenLayers.Filter.Spatial.* constants.\n     *\n     * Returns:\n     * {<OpenLayers.Filter.Spatial>} The created filter.\n     */\n    readSpatial: function(node, obj, type) {\n        var filter = new OpenLayers.Filter.Spatial({\n            type: type\n        });\n        this.readChildNodes(node, filter);\n        filter.value = filter.components[0];\n        delete filter.components;\n        obj.filters.push(filter);\n    },\n\n    /**\n     * APIMethod: encodeLiteral\n     * Generates the string representation of a value for use in <Literal> \n     *     elements.  The default encoder writes Date values as ISO 8601 \n     *     strings.\n     *\n     * Parameters:\n     * value - {Object} Literal value to encode\n     *\n     * Returns:\n     * {String} String representation of the provided value.\n     */\n    encodeLiteral: function(value) {\n        if (value instanceof Date) {\n            value = OpenLayers.Date.toISOString(value);\n        }\n        return value;\n    },\n\n    /**\n     * Method: writeOgcExpression\n     * Limited support for writing OGC expressions. Currently it supports\n     * (<OpenLayers.Filter.Function> || String || Number)\n     *\n     * Parameters:\n     * value - (<OpenLayers.Filter.Function> || String || Number)\n     * node - {DOMElement} A parent DOM element \n     *\n     * Returns:\n     * {DOMElement} Updated node element.\n     */\n    writeOgcExpression: function(value, node) {\n        if (value instanceof OpenLayers.Filter.Function){\n            this.writeNode(\"Function\", value, node);\n        } else {\n            this.writeNode(\"Literal\", value, node);\n        }\n        return node;\n    },    \n    \n    /**\n     * Method: write\n     *\n     * Parameters:\n     * filter - {<OpenLayers.Filter>} A filter object.\n     *\n     * Returns:\n     * {DOMElement} An fes:Filter element.\n     */\n    write: function(filter) {\n        return this.writers.fes[\"Filter\"].apply(this, [filter]);\n    },\n    \n    /**\n     * Property: writers\n     * As a compliment to the readers property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: {\n        \"fes\": {\n            \"Filter\": function(filter) {\n                var node = this.createElementNSPlus(\"fes:Filter\");\n                this.writeNode(this.getFilterType(filter), filter, node);\n                return node;\n            },\n            \"_featureIds\": function(filter) {\n                var node = this.createDocumentFragment();\n                for (var i=0, ii=filter.fids.length; i<ii; ++i) {\n                    this.writeNode(\"fes:ResourceId\", filter.fids[i], node);\n                }\n                return node;\n            },\n            \"ResourceId\": function(fid) {\n                return this.createElementNSPlus(\"fes:ResourceId\", {\n                    attributes: {rid: fid}\n                });\n            },\n\n            \"And\": function(filter) {\n                var node = this.createElementNSPlus(\"fes:And\");\n                var childFilter;\n                for (var i=0, ii=filter.filters.length; i<ii; ++i) {\n                    childFilter = filter.filters[i];\n                    this.writeNode(\n                        this.getFilterType(childFilter), childFilter, node\n                    );\n                }\n                return node;\n            },\n            \"Or\": function(filter) {\n                var node = this.createElementNSPlus(\"fes:Or\");\n                var childFilter;\n                for (var i=0, ii=filter.filters.length; i<ii; ++i) {\n                    childFilter = filter.filters[i];\n                    this.writeNode(\n                        this.getFilterType(childFilter), childFilter, node\n                    );\n                }\n                return node;\n            },\n            \"Not\": function(filter) {\n                var node = this.createElementNSPlus(\"fes:Not\");\n                var childFilter = filter.filters[0];\n                this.writeNode(\n                    this.getFilterType(childFilter), childFilter, node\n                );\n                return node;\n            },\n            \"PropertyIsLessThan\": function(filter) {\n                var node = this.createElementNSPlus(\"fes:PropertyIsLessThan\");\n                // no fes:expression handling for ValueReference for now\n                this.writeNode(\"ValueReference\", filter, node);\n                // handle Literals or Functions for now\n                this.writeOgcExpression(filter.value, node);\n                return node;\n            },\n            \"PropertyIsGreaterThan\": function(filter) {\n                var node = this.createElementNSPlus(\"fes:PropertyIsGreaterThan\");\n                // no fes:expression handling for ValueReference for now\n                this.writeNode(\"ValueReference\", filter, node);\n                // handle Literals or Functions for now\n                this.writeOgcExpression(filter.value, node);\n                return node;\n            },\n            \"PropertyIsLessThanOrEqualTo\": function(filter) {\n                var node = this.createElementNSPlus(\"fes:PropertyIsLessThanOrEqualTo\");\n                // no fes:expression handling for ValueReference for now\n                this.writeNode(\"ValueReference\", filter, node);\n                // handle Literals or Functions for now\n                this.writeOgcExpression(filter.value, node);\n                return node;\n            },\n            \"PropertyIsGreaterThanOrEqualTo\": function(filter) {\n                var node = this.createElementNSPlus(\"fes:PropertyIsGreaterThanOrEqualTo\");\n                // no fes:expression handling for ValueReference for now\n                this.writeNode(\"ValueReference\", filter, node);\n                // handle Literals or Functions for now\n                this.writeOgcExpression(filter.value, node);\n                return node;\n            },\n            \"PropertyIsBetween\": function(filter) {\n                var node = this.createElementNSPlus(\"fes:PropertyIsBetween\");\n                // no fes:expression handling for ValueReference for now\n                this.writeNode(\"ValueReference\", filter, node);\n                this.writeNode(\"LowerBoundary\", filter, node);\n                this.writeNode(\"UpperBoundary\", filter, node);\n                return node;\n            },\n            \"ValueReference\": function(filter) {\n                // no fes:expression handling for now\n                return this.createElementNSPlus(\"fes:ValueReference\", {\n                    value: filter.property\n                });\n            },\n            \"Literal\": function(value) {\n                var encode = this.encodeLiteral ||\n                    OpenLayers.Format.Filter.v1.prototype.encodeLiteral;\n                return this.createElementNSPlus(\"fes:Literal\", {\n                    value: encode(value)\n                });\n            },\n            \"LowerBoundary\": function(filter) {\n                // handle Literals or Functions for now\n                var node = this.createElementNSPlus(\"fes:LowerBoundary\");\n                this.writeOgcExpression(filter.lowerBoundary, node);\n                return node;\n            },\n            \"UpperBoundary\": function(filter) {\n                // handle Literals or Functions for now\n                var node = this.createElementNSPlus(\"fes:UpperBoundary\");\n                this.writeNode(\"Literal\", filter.upperBoundary, node);\n                return node;\n            },\n            \"INTERSECTS\": function(filter) {\n                return this.writeSpatial(filter, \"Intersects\");\n            },\n            \"WITHIN\": function(filter) {\n                return this.writeSpatial(filter, \"Within\");\n            },\n            \"CONTAINS\": function(filter) {\n                return this.writeSpatial(filter, \"Contains\");\n            },\n            \"DWITHIN\": function(filter) {\n                var node = this.writeSpatial(filter, \"DWithin\");\n                this.writeNode(\"Distance\", filter, node);\n                return node;\n            },\n            \"Distance\": function(filter) {\n                return this.createElementNSPlus(\"fes:Distance\", {\n                    attributes: {\n                        units: filter.distanceUnits\n                    },\n                    value: filter.distance\n                });\n            },\n            \"Function\": function(filter) {\n                var node = this.createElementNSPlus(\"fes:Function\", {\n                    attributes: {\n                        name: filter.name\n                    }\n                });\n                var params = filter.params;\n                for(var i=0, len=params.length; i<len; i++){\n                    this.writeOgcExpression(params[i], node);\n                }\n                return node;\n            },\n            \"PropertyIsNull\": function(filter) {\n                var node = this.createElementNSPlus(\"fes:PropertyIsNull\");\n                this.writeNode(\"ValueReference\", filter, node);\n                return node;\n            }\n        }\n    },\n\n    /**\n     * Method: getFilterType\n     */\n    getFilterType: function(filter) {\n        var filterType = this.filterMap[filter.type];\n        if(!filterType) {\n            throw \"Filter writing not supported for rule type: \" + filter.type;\n        }\n        return filterType;\n    },\n    \n    /**\n     * Property: filterMap\n     * {Object} Contains a member for each filter type.  Values are node names\n     *     for corresponding OGC Filter child elements.\n     */\n    filterMap: {\n        \"&&\": \"And\",\n        \"||\": \"Or\",\n        \"!\": \"Not\",\n        \"==\": \"PropertyIsEqualTo\",\n        \"!=\": \"PropertyIsNotEqualTo\",\n        \"<\": \"PropertyIsLessThan\",\n        \">\": \"PropertyIsGreaterThan\",\n        \"<=\": \"PropertyIsLessThanOrEqualTo\",\n        \">=\": \"PropertyIsGreaterThanOrEqualTo\",\n        \"..\": \"PropertyIsBetween\",\n        \"~\": \"PropertyIsLike\",\n        \"NULL\": \"PropertyIsNull\",\n        \"BBOX\": \"BBOX\",\n        \"DWITHIN\": \"DWITHIN\",\n        \"WITHIN\": \"WITHIN\",\n        \"CONTAINS\": \"CONTAINS\",\n        \"INTERSECTS\": \"INTERSECTS\",\n        \"FID\": \"_featureIds\"\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.Filter.v2\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/GML/v2.js\n * @requires OpenLayers/Format/Filter/v1.js\n */\n\n/**\n * Class: OpenLayers.Format.Filter.v1_0_0\n * Write ogc:Filter version 1.0.0.\n * \n * Inherits from:\n *  - <OpenLayers.Format.GML.v2>\n *  - <OpenLayers.Format.Filter.v1>\n */\nOpenLayers.Format.Filter.v1_0_0 = OpenLayers.Class(\n    OpenLayers.Format.GML.v2, OpenLayers.Format.Filter.v1, {\n    \n    /**\n     * Constant: VERSION\n     * {String} 1.0.0\n     */\n    VERSION: \"1.0.0\",\n    \n    /**\n     * Property: schemaLocation\n     * {String} http://www.opengis.net/ogc/filter/1.0.0/filter.xsd\n     */\n    schemaLocation: \"http://www.opengis.net/ogc/filter/1.0.0/filter.xsd\",\n\n    /**\n     * Constructor: OpenLayers.Format.Filter.v1_0_0\n     * Instances of this class are not created directly.  Use the\n     *     <OpenLayers.Format.Filter> constructor instead.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    initialize: function(options) {\n        OpenLayers.Format.GML.v2.prototype.initialize.apply(\n            this, [options]\n        );\n    },\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"ogc\": OpenLayers.Util.applyDefaults({\n            \"PropertyIsEqualTo\": function(node, obj) {\n                var filter = new OpenLayers.Filter.Comparison({\n                    type: OpenLayers.Filter.Comparison.EQUAL_TO\n                });\n                this.readChildNodes(node, filter);\n                obj.filters.push(filter);\n            },\n            \"PropertyIsNotEqualTo\": function(node, obj) {\n                var filter = new OpenLayers.Filter.Comparison({\n                    type: OpenLayers.Filter.Comparison.NOT_EQUAL_TO\n                });\n                this.readChildNodes(node, filter);\n                obj.filters.push(filter);\n            },\n            \"PropertyIsLike\": function(node, obj) {\n                var filter = new OpenLayers.Filter.Comparison({\n                    type: OpenLayers.Filter.Comparison.LIKE\n                });\n                this.readChildNodes(node, filter);\n                var wildCard = node.getAttribute(\"wildCard\");\n                var singleChar = node.getAttribute(\"singleChar\");\n                var esc = node.getAttribute(\"escape\");\n                filter.value2regex(wildCard, singleChar, esc);\n                obj.filters.push(filter);\n            }\n        }, OpenLayers.Format.Filter.v1.prototype.readers[\"ogc\"]),\n        \"gml\": OpenLayers.Format.GML.v2.prototype.readers[\"gml\"],\n        \"feature\": OpenLayers.Format.GML.v2.prototype.readers[\"feature\"]        \n    },\n\n    /**\n     * Property: writers\n     * As a compliment to the readers property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: {\n        \"ogc\": OpenLayers.Util.applyDefaults({\n            \"PropertyIsEqualTo\": function(filter) {\n                var node = this.createElementNSPlus(\"ogc:PropertyIsEqualTo\");\n                // no ogc:expression handling for PropertyName for now\n                this.writeNode(\"PropertyName\", filter, node);\n                // handle Literals or Functions for now\n                this.writeOgcExpression(filter.value, node);\n                return node;\n            },\n            \"PropertyIsNotEqualTo\": function(filter) {\n                var node = this.createElementNSPlus(\"ogc:PropertyIsNotEqualTo\");\n                // no ogc:expression handling for PropertyName for now\n                this.writeNode(\"PropertyName\", filter, node);\n                // handle Literals or Functions for now\n                this.writeOgcExpression(filter.value, node);\n                return node;\n            },\n            \"PropertyIsLike\": function(filter) {\n                var node = this.createElementNSPlus(\"ogc:PropertyIsLike\", {\n                    attributes: {\n                        wildCard: \"*\", singleChar: \".\", escape: \"!\"\n                    }\n                });\n                // no ogc:expression handling for now\n                this.writeNode(\"PropertyName\", filter, node);\n                // convert regex string to ogc string\n                this.writeNode(\"Literal\", filter.regex2value(), node);\n                return node;\n            },\n            \"BBOX\": function(filter) {\n                var node = this.createElementNSPlus(\"ogc:BBOX\");\n                // PropertyName is mandatory in 1.0.0, but e.g. GeoServer also\n                // accepts filters without it. When this is used with\n                // OpenLayers.Protocol.WFS, OpenLayers.Format.WFST will set a\n                // missing filter.property to the geometryName that is\n                // configured with the protocol, which defaults to \"the_geom\".\n                // So the only way to omit this mandatory property is to not\n                // set the property on the filter and to set the geometryName\n                // on the WFS protocol to null. The latter also happens when\n                // the protocol is configured without a geometryName and a\n                // featureNS.\n                filter.property && this.writeNode(\"PropertyName\", filter, node);\n                var box = this.writeNode(\"gml:Box\", filter.value, node);\n                if(filter.projection) {\n                    box.setAttribute(\"srsName\", filter.projection);\n                }\n                return node;\n            }\n        }, OpenLayers.Format.Filter.v1.prototype.writers[\"ogc\"]),\n        \"gml\": OpenLayers.Format.GML.v2.prototype.writers[\"gml\"],\n        \"feature\": OpenLayers.Format.GML.v2.prototype.writers[\"feature\"]\n    },\n\n    /**\n     * Method: writeSpatial\n     *\n     * Read a {<OpenLayers.Filter.Spatial>} filter and converts it into XML.\n     *\n     * Parameters:\n     * filter - {<OpenLayers.Filter.Spatial>} The filter.\n     * name - {String} Name of the generated XML element.\n     *\n     * Returns:\n     * {DOMElement} The created XML element.\n     */\n    writeSpatial: function(filter, name) {\n        var node = this.createElementNSPlus(\"ogc:\"+name);\n        this.writeNode(\"PropertyName\", filter, node);\n        if(filter.value instanceof OpenLayers.Filter.Function) {\n            this.writeNode(\"Function\", filter.value, node);\n        } else {\n        var child;\n        if(filter.value instanceof OpenLayers.Geometry) {\n            child = this.writeNode(\"feature:_geometry\", filter.value).firstChild;\n        } else {\n            child = this.writeNode(\"gml:Box\", filter.value);\n        }\n        if(filter.projection) {\n            child.setAttribute(\"srsName\", filter.projection);\n        }\n        node.appendChild(child);\n        }\n        return node;\n    },\n\n\n    CLASS_NAME: \"OpenLayers.Format.Filter.v1_0_0\" \n\n});", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/Filter/v1.js\n * @requires OpenLayers/Format/GML/v3.js\n */\n\n/**\n * Class: OpenLayers.Format.Filter.v1_1_0\n * Write ogc:Filter version 1.1.0.\n *\n * Differences from the v1.0.0 parser:\n *  - uses GML v3 instead of GML v2\n *  - reads matchCase attribute on ogc:PropertyIsEqual and\n *        ogc:PropertyIsNotEqual elements.\n *  - writes matchCase attribute from comparison filters of type EQUAL_TO,\n *        NOT_EQUAL_TO and LIKE.\n * \n * Inherits from: \n *  - <OpenLayers.Format.GML.v3>\n *  - <OpenLayers.Format.Filter.v1>\n */\nOpenLayers.Format.Filter.v1_1_0 = OpenLayers.Class(\n    OpenLayers.Format.GML.v3, OpenLayers.Format.Filter.v1, {\n    \n    /**\n     * Constant: VERSION\n     * {String} 1.1.0\n     */\n    VERSION: \"1.1.0\",\n    \n    /**\n     * Property: schemaLocation\n     * {String} http://www.opengis.net/ogc/filter/1.1.0/filter.xsd\n     */\n    schemaLocation: \"http://www.opengis.net/ogc/filter/1.1.0/filter.xsd\",\n\n    /**\n     * Constructor: OpenLayers.Format.Filter.v1_1_0\n     * Instances of this class are not created directly.  Use the\n     *     <OpenLayers.Format.Filter> constructor instead.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    initialize: function(options) {\n        OpenLayers.Format.GML.v3.prototype.initialize.apply(\n            this, [options]\n        );\n    },\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"ogc\": OpenLayers.Util.applyDefaults({\n            \"PropertyIsEqualTo\": function(node, obj) {\n                var matchCase = node.getAttribute(\"matchCase\");\n                var filter = new OpenLayers.Filter.Comparison({\n                    type: OpenLayers.Filter.Comparison.EQUAL_TO,\n                    matchCase: !(matchCase === \"false\" || matchCase === \"0\")\n                });\n                this.readChildNodes(node, filter);\n                obj.filters.push(filter);\n            },\n            \"PropertyIsNotEqualTo\": function(node, obj) {\n                var matchCase = node.getAttribute(\"matchCase\");\n                var filter = new OpenLayers.Filter.Comparison({\n                    type: OpenLayers.Filter.Comparison.NOT_EQUAL_TO,\n                    matchCase: !(matchCase === \"false\" || matchCase === \"0\")\n                });\n                this.readChildNodes(node, filter);\n                obj.filters.push(filter);\n            },\n            \"PropertyIsLike\": function(node, obj) {\n                var filter = new OpenLayers.Filter.Comparison({\n                    type: OpenLayers.Filter.Comparison.LIKE\n                });\n                this.readChildNodes(node, filter);\n                var wildCard = node.getAttribute(\"wildCard\");\n                var singleChar = node.getAttribute(\"singleChar\");\n                var esc = node.getAttribute(\"escapeChar\");\n                filter.value2regex(wildCard, singleChar, esc);\n                obj.filters.push(filter);\n            }\n        }, OpenLayers.Format.Filter.v1.prototype.readers[\"ogc\"]),\n        \"gml\": OpenLayers.Format.GML.v3.prototype.readers[\"gml\"],\n        \"feature\": OpenLayers.Format.GML.v3.prototype.readers[\"feature\"]        \n    },\n\n    /**\n     * Property: writers\n     * As a compliment to the readers property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: {\n        \"ogc\": OpenLayers.Util.applyDefaults({\n            \"PropertyIsEqualTo\": function(filter) {\n                var node = this.createElementNSPlus(\"ogc:PropertyIsEqualTo\", {\n                    attributes: {matchCase: filter.matchCase}\n                });\n                // no ogc:expression handling for PropertyName for now\n                this.writeNode(\"PropertyName\", filter, node);\n                // handle Literals or Functions for now\n                this.writeOgcExpression(filter.value, node);\n                return node;\n            },\n            \"PropertyIsNotEqualTo\": function(filter) {\n                var node = this.createElementNSPlus(\"ogc:PropertyIsNotEqualTo\", {\n                    attributes: {matchCase: filter.matchCase}\n                });\n                // no ogc:expression handling for PropertyName for now\n                this.writeNode(\"PropertyName\", filter, node);\n                // handle Literals or Functions for now\n                this.writeOgcExpression(filter.value, node);\n                return node;\n            },\n            \"PropertyIsLike\": function(filter) {\n                var node = this.createElementNSPlus(\"ogc:PropertyIsLike\", {\n                    attributes: {\n                        matchCase: filter.matchCase,\n                        wildCard: \"*\", singleChar: \".\", escapeChar: \"!\"\n                    }\n                });\n                // no ogc:expression handling for now\n                this.writeNode(\"PropertyName\", filter, node);\n                // convert regex string to ogc string\n                this.writeNode(\"Literal\", filter.regex2value(), node);\n                return node;\n            },\n            \"BBOX\": function(filter) {\n                var node = this.createElementNSPlus(\"ogc:BBOX\");\n                // PropertyName is optional in 1.1.0\n                filter.property && this.writeNode(\"PropertyName\", filter, node);\n                var box = this.writeNode(\"gml:Envelope\", filter.value);\n                if(filter.projection) {\n                    box.setAttribute(\"srsName\", filter.projection);\n                }\n                node.appendChild(box); \n                return node;\n            },\n            \"SortBy\": function(sortProperties) {\n                var node = this.createElementNSPlus(\"ogc:SortBy\");\n                for (var i=0,l=sortProperties.length;i<l;i++) {\n                    this.writeNode(\n                        \"ogc:SortProperty\",\n                        sortProperties[i],\n                        node\n                    );\n                }\n                return node;\n            }, \n            \"SortProperty\": function(sortProperty) {\n                var node = this.createElementNSPlus(\"ogc:SortProperty\");\n                this.writeNode(\n                    \"ogc:PropertyName\",\n                    sortProperty,\n                    node\n                );\n                this.writeNode(\n                    \"ogc:SortOrder\",\n                    (sortProperty.order == 'DESC') ? 'DESC' : 'ASC',\n                    node\n                );\n                return node;\n            },\n            \"SortOrder\": function(value) {\n                var node = this.createElementNSPlus(\"ogc:SortOrder\", {\n                    value: value\n                });\n                return node;\n            }\n        }, OpenLayers.Format.Filter.v1.prototype.writers[\"ogc\"]),\n        \"gml\": OpenLayers.Format.GML.v3.prototype.writers[\"gml\"],\n        \"feature\": OpenLayers.Format.GML.v3.prototype.writers[\"feature\"]\n    },\n\n    /**\n     * Method: writeSpatial\n     *\n     * Read a {<OpenLayers.Filter.Spatial>} filter and converts it into XML.\n     *\n     * Parameters:\n     * filter - {<OpenLayers.Filter.Spatial>} The filter.\n     * name - {String} Name of the generated XML element.\n     *\n     * Returns:\n     * {DOMElement} The created XML element.\n     */\n    writeSpatial: function(filter, name) {\n        var node = this.createElementNSPlus(\"ogc:\"+name);\n        this.writeNode(\"PropertyName\", filter, node);\n        if(filter.value instanceof OpenLayers.Filter.Function) {\n            this.writeNode(\"Function\", filter.value, node);\n        } else {\n        var child;\n        if(filter.value instanceof OpenLayers.Geometry) {\n            child = this.writeNode(\"feature:_geometry\", filter.value).firstChild;\n        } else {\n            child = this.writeNode(\"gml:Envelope\", filter.value);\n        }\n        if(filter.projection) {\n            child.setAttribute(\"srsName\", filter.projection);\n        }\n        node.appendChild(child);\n        }\n        return node;\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.Filter.v1_1_0\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/Filter/v2.js\n * @requires OpenLayers/Format/GML/v3.js\n */\n\n/**\n * Class: OpenLayers.Format.Filter.v2_0_0\n * Writes fes:Filter version 2.0.0.\n *\n * Differences from the v1.0.0 parser:\n *  - uses GML v3 instead of GML v2\n *  - reads matchCase attribute on fes:PropertyIsEqual and\n *        fes:PropertyIsNotEqual elements.\n *  - writes matchCase attribute from comparison filters of type EQUAL_TO,\n *        NOT_EQUAL_TO and LIKE.\n * \n * Inherits from: \n *  - <OpenLayers.Format.GML.v3>\n *  - <OpenLayers.Format.Filter.v1>\n */\nOpenLayers.Format.Filter.v2_0_0 = OpenLayers.Class(\n    OpenLayers.Format.GML.v3, OpenLayers.Format.Filter.v2, {\n    \n    /**\n     * Constant: VERSION\n     * {String} 2.0.0\n     */\n    VERSION: \"2.0.0\",\n    \n    /**\n     * Property: schemaLocation\n     * {String} http://schemas.opengis.net/filter/2.0/filterAll.xsd\n     */\n    schemaLocation: \"http://schemas.opengis.net/filter/2.0/filterAll.xsd\",\n\n    /**\n     * Constructor: OpenLayers.Format.Filter.v1_1_0\n     * Instances of this class are not created directly.  Use the\n     *     <OpenLayers.Format.Filter> constructor instead.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    initialize: function(options) {\n        OpenLayers.Format.GML.v3.prototype.initialize.apply(\n            this, [options]\n        );\n    },\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"fes\": OpenLayers.Util.applyDefaults({\n            \"PropertyIsEqualTo\": function(node, obj) {\n                var matchCase = node.getAttribute(\"matchCase\");\n                var filter = new OpenLayers.Filter.Comparison({\n                    type: OpenLayers.Filter.Comparison.EQUAL_TO,\n                    matchCase: !(matchCase === \"false\" || matchCase === \"0\")\n                });\n                this.readChildNodes(node, filter);\n                obj.filters.push(filter);\n            },\n            \"PropertyIsNotEqualTo\": function(node, obj) {\n                var matchCase = node.getAttribute(\"matchCase\");\n                var filter = new OpenLayers.Filter.Comparison({\n                    type: OpenLayers.Filter.Comparison.NOT_EQUAL_TO,\n                    matchCase: !(matchCase === \"false\" || matchCase === \"0\")\n                });\n                this.readChildNodes(node, filter);\n                obj.filters.push(filter);\n            },\n            \"PropertyIsLike\": function(node, obj) {\n                var filter = new OpenLayers.Filter.Comparison({\n                    type: OpenLayers.Filter.Comparison.LIKE\n                });\n                this.readChildNodes(node, filter);\n                var wildCard = node.getAttribute(\"wildCard\");\n                var singleChar = node.getAttribute(\"singleChar\");\n                var esc = node.getAttribute(\"escapeChar\");\n                filter.value2regex(wildCard, singleChar, esc);\n                obj.filters.push(filter);\n            }\n        }, OpenLayers.Format.Filter.v2.prototype.readers[\"fes\"]),\n        \"gml\": OpenLayers.Format.GML.v3.prototype.readers[\"gml\"],\n        \"feature\": OpenLayers.Format.GML.v3.prototype.readers[\"feature\"]\n    },\n\n    /**\n     * Property: writers\n     * As a compliment to the readers property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: {\n        \"fes\": OpenLayers.Util.applyDefaults({\n            \"PropertyIsEqualTo\": function(filter) {\n                var node = this.createElementNSPlus(\"fes:PropertyIsEqualTo\", {\n                    attributes: {matchCase: filter.matchCase}\n                });\n                // no fes:expression handling for ValueReference for now\n                this.writeNode(\"ValueReference\", filter, node);\n                // handle Literals or Functions for now\n                this.writeOgcExpression(filter.value, node);\n                return node;\n            },\n            \"PropertyIsNotEqualTo\": function(filter) {\n                var node = this.createElementNSPlus(\"fes:PropertyIsNotEqualTo\", {\n                    attributes: {matchCase: filter.matchCase}\n                });\n                // no fes:expression handling for ValueReference for now\n                this.writeNode(\"ValueReference\", filter, node);\n                // handle Literals or Functions for now\n                this.writeOgcExpression(filter.value, node);\n                return node;\n            },\n            \"PropertyIsLike\": function(filter) {\n                var node = this.createElementNSPlus(\"fes:PropertyIsLike\", {\n                    attributes: {\n                        matchCase: filter.matchCase,\n                        wildCard: \"*\", singleChar: \".\", escapeChar: \"!\"\n                    }\n                });\n                // no fes:expression handling for now\n                this.writeNode(\"ValueReference\", filter, node);\n                // convert regex string to ogc string\n                this.writeNode(\"Literal\", filter.regex2value(), node);\n                return node;\n            },\n            \"BBOX\": function(filter) {\n                var node = this.createElementNSPlus(\"fes:BBOX\");\n                // ValueReference is optional in 1.1.0\n                filter.property && this.writeNode(\"ValueReference\", filter, node);\n                var box = this.writeNode(\"gml:Envelope\", filter.value);\n                if(filter.projection) {\n                    box.setAttribute(\"srsName\", filter.projection);\n                }\n                node.appendChild(box); \n                return node;\n            },\n            \"SortBy\": function(sortProperties) {\n                var node = this.createElementNSPlus(\"fes:SortBy\");\n                for (var i=0,l=sortProperties.length;i<l;i++) {\n                    this.writeNode(\n                        \"fes:SortProperty\",\n                        sortProperties[i],\n                        node\n                    );\n                }\n                return node;\n            }, \n            \"SortProperty\": function(sortProperty) {\n                var node = this.createElementNSPlus(\"fes:SortProperty\");\n                this.writeNode(\n                    \"fes:ValueReference\",\n                    sortProperty,\n                    node\n                );\n                this.writeNode(\n                    \"fes:SortOrder\",\n                    (sortProperty.order == 'DESC') ? 'DESC' : 'ASC',\n                    node\n                );\n                return node;\n            },\n            \"SortOrder\": function(value) {\n                var node = this.createElementNSPlus(\"fes:SortOrder\", {\n                    value: value\n                });\n                return node;\n            }\n        }, OpenLayers.Format.Filter.v2.prototype.writers[\"fes\"]),\n        \"gml\": OpenLayers.Format.GML.v3.prototype.writers[\"gml\"],\n        \"feature\": OpenLayers.Format.GML.v3.prototype.writers[\"feature\"]\n    },\n\n    /**\n     * Method: writeSpatial\n     *\n     * Read a {<OpenLayers.Filter.Spatial>} filter and converts it into XML.\n     *\n     * Parameters:\n     * filter - {<OpenLayers.Filter.Spatial>} The filter.\n     * name - {String} Name of the generated XML element.\n     *\n     * Returns:\n     * {DOMElement} The created XML element.\n     */\n    writeSpatial: function(filter, name) {\n        var node = this.createElementNSPlus(\"fes:\"+name);\n        this.writeNode(\"ValueReference\", filter, node);\n        if(filter.value instanceof OpenLayers.Filter.Function) {\n            this.writeNode(\"Function\", filter.value, node);\n        } else {\n        var child;\n        if(filter.value instanceof OpenLayers.Geometry) {\n            child = this.writeNode(\"feature:_geometry\", filter.value).firstChild;\n        } else {\n            child = this.writeNode(\"gml:Envelope\", filter.value);\n        }\n        if(filter.projection) {\n            child.setAttribute(\"srsName\", filter.projection);\n        }\n        node.appendChild(child);\n        }\n        return node;\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.Filter.v2_0_0\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML/VersionedOGC.js\n * @requires OpenLayers/Style.js\n * @requires OpenLayers/Rule.js\n * @requires OpenLayers/Filter/FeatureId.js\n * @requires OpenLayers/Filter/Logical.js\n * @requires OpenLayers/Filter/Comparison.js\n * @requires OpenLayers/Filter/Spatial.js\n */\n\n/**\n * Class: OpenLayers.Format.SLD\n * Read/Write SLD. Create a new instance with the <OpenLayers.Format.SLD>\n *     constructor.\n * \n * Inherits from:\n *  - <OpenLayers.Format.XML.VersionedOGC>\n */\nOpenLayers.Format.SLD = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {\n    \n    /**\n     * APIProperty: profile\n     * {String} If provided, use a custom profile.\n     *\n     * Currently supported profiles:\n     * - GeoServer - parses GeoServer vendor specific capabilities for SLD.\n     */\n    profile: null,\n\n    /**\n     * APIProperty: defaultVersion\n     * {String} Version number to assume if none found.  Default is \"1.0.0\".\n     */\n    defaultVersion: \"1.0.0\",\n    \n    /**\n     * APIProperty: stringifyOutput\n     * {Boolean} If true, write will return a string otherwise a DOMElement.\n     * Default is true.\n     */\n    stringifyOutput: true,\n    \n    /**\n     * APIProperty: namedLayersAsArray\n     * {Boolean} Generate a namedLayers array.  If false, the namedLayers\n     *     property value will be an object keyed by layer name. Default is\n     *     false.\n     */\n    namedLayersAsArray: false,\n    \n    /**\n     * APIMethod: write\n     * Write a SLD document given a list of styles.\n     *\n     * Parameters:\n     * sld - {Object} An object representing the SLD.\n     * options - {Object} Optional configuration object.\n     *\n     * Returns:\n     * {String} An SLD document string.\n     */\n    \n    /**\n     * APIMethod: read\n     * Read and SLD doc and return an object representing the SLD.\n     *\n     * Parameters:\n     * data - {String | DOMElement} Data to read.\n     * options - {Object} Options for the reader.\n     *\n     * Returns:\n     * {Object} An object representing the SLD.\n     */\n\n    CLASS_NAME: \"OpenLayers.Format.SLD\" \n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes.js\n * @requires OpenLayers/Rule.js\n * @requires OpenLayers/Format/SLD.js\n * @requires OpenLayers/Format/Filter/v1_0_0.js\n * @requires OpenLayers/Symbolizer/Point.js\n * @requires OpenLayers/Symbolizer/Line.js\n * @requires OpenLayers/Symbolizer/Polygon.js\n * @requires OpenLayers/Symbolizer/Text.js\n * @requires OpenLayers/Symbolizer/Raster.js\n */\n\n/**\n * Class: OpenLayers.Format.SLD.v1\n * Superclass for SLD version 1 parsers.\n *\n * Inherits from:\n *  - <OpenLayers.Format.Filter.v1_0_0>\n */\nOpenLayers.Format.SLD.v1 = OpenLayers.Class(OpenLayers.Format.Filter.v1_0_0, {\n    \n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        sld: \"http://www.opengis.net/sld\",\n        ogc: \"http://www.opengis.net/ogc\",\n        gml: \"http://www.opengis.net/gml\",\n        xlink: \"http://www.w3.org/1999/xlink\",\n        xsi: \"http://www.w3.org/2001/XMLSchema-instance\",\n        xmlns: \"http://www.w3.org/2000/xmlns/\"\n    },\n    \n    /**\n     * Property: defaultPrefix\n     */\n    defaultPrefix: \"sld\",\n\n    /**\n     * Property: schemaLocation\n     * {String} Schema location for a particular minor version.\n     */\n    schemaLocation: null,\n    \n    /** \n     * APIProperty: multipleSymbolizers\n     * {Boolean} Support multiple symbolizers per rule.  Default is false.  if\n     *     true, an OpenLayers.Style2 instance will be created to represent \n     *     user styles instead of an OpenLayers.Style instance.  The \n     *     OpenLayers.Style2 class allows collections of rules with multiple\n     *     symbolizers, but is not currently useful for client side rendering.\n     *     If multiple symbolizers is true, multiple FeatureTypeStyle elements\n     *     are preserved in reading/writing by setting symbolizer zIndex values.\n     *     In addition, the <defaultSymbolizer> property is ignored if \n     *     multiple symbolizers are supported (defaults should be applied\n     *     when rendering).\n     */\n    multipleSymbolizers: false,\n\n    /**\n     * Property: featureTypeCounter\n     * {Number} Private counter for multiple feature type styles.\n     */\n    featureTypeCounter: null,\n\n    /**\n     * APIProperty: defaultSymbolizer.\n     * {Object} A symbolizer with the SLD defaults.\n     */\n    defaultSymbolizer: {\n        fillColor: \"#808080\",\n        fillOpacity: 1,\n        strokeColor: \"#000000\",\n        strokeOpacity: 1,\n        strokeWidth: 1,\n        strokeDashstyle: \"solid\",\n        pointRadius: 3,\n        graphicName: \"square\"\n    },\n    \n    /**\n     * Constructor: OpenLayers.Format.SLD.v1\n     * Instances of this class are not created directly.  Use the\n     *     <OpenLayers.Format.SLD> constructor instead.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    \n    /**\n     * Method: read\n     *\n     * Parameters:\n     * data - {DOMElement} An SLD document element.\n     * options - {Object} Options for the reader.\n     *\n     * Valid options:\n     * namedLayersAsArray - {Boolean}  Generate a namedLayers array.  If false,\n     *     the namedLayers property value will be an object keyed by layer name.\n     *     Default is false.\n     *\n     * Returns:\n     * {Object} An object representing the SLD.\n     */\n    read: function(data, options) {\n        options = OpenLayers.Util.applyDefaults(options, this.options);\n        var sld = {\n            namedLayers: options.namedLayersAsArray === true ? [] : {}\n        };\n        this.readChildNodes(data, sld);\n        return sld;\n    },\n    \n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: OpenLayers.Util.applyDefaults({\n        \"sld\": {\n            \"StyledLayerDescriptor\": function(node, sld) {\n                sld.version = node.getAttribute(\"version\");\n                this.readChildNodes(node, sld);\n            },\n            \"Name\": function(node, obj) {\n                obj.name = this.getChildValue(node);\n            },\n            \"Title\": function(node, obj) {\n                obj.title = this.getChildValue(node);\n            },\n            \"Abstract\": function(node, obj) {\n                obj.description = this.getChildValue(node);\n            },\n            \"NamedLayer\": function(node, sld) {\n                var layer = {\n                    userStyles: [],\n                    namedStyles: []\n                };\n                this.readChildNodes(node, layer);\n                // give each of the user styles this layer name\n                for(var i=0, len=layer.userStyles.length; i<len; ++i) {\n                    layer.userStyles[i].layerName = layer.name;\n                }\n                if(OpenLayers.Util.isArray(sld.namedLayers)) {\n                    sld.namedLayers.push(layer);                \n                } else {\n                    sld.namedLayers[layer.name] = layer;\n                }\n            },\n            \"NamedStyle\": function(node, layer) {\n                layer.namedStyles.push(\n                    this.getChildValue(node.firstChild)\n                );\n            },\n            \"UserStyle\": function(node, layer) {\n                var obj = {defaultsPerSymbolizer: true, rules: []};\n                this.featureTypeCounter = -1;\n                this.readChildNodes(node, obj);\n                var style;\n                if (this.multipleSymbolizers) {\n                    delete obj.defaultsPerSymbolizer;\n                    style = new OpenLayers.Style2(obj);\n                } else {\n                    style = new OpenLayers.Style(this.defaultSymbolizer, obj);\n                }\n                layer.userStyles.push(style);\n            },\n            \"IsDefault\": function(node, style) {\n                if(this.getChildValue(node) == \"1\") {\n                    style.isDefault = true;\n                }\n            },\n            \"FeatureTypeStyle\": function(node, style) {\n                ++this.featureTypeCounter;\n                var obj = {\n                    rules: this.multipleSymbolizers ? style.rules : []\n                };\n                this.readChildNodes(node, obj);\n                if (!this.multipleSymbolizers) {\n                    style.rules = obj.rules;\n                }\n            },\n            \"Rule\": function(node, obj) {\n                var config;\n                if (this.multipleSymbolizers) {\n                    config = {symbolizers: []};\n                }\n                var rule = new OpenLayers.Rule(config);\n                this.readChildNodes(node, rule);\n                obj.rules.push(rule);\n            },\n            \"ElseFilter\": function(node, rule) {\n                rule.elseFilter = true;\n            },\n            \"MinScaleDenominator\": function(node, rule) {\n                rule.minScaleDenominator = parseFloat(this.getChildValue(node));\n            },\n            \"MaxScaleDenominator\": function(node, rule) {\n                rule.maxScaleDenominator = parseFloat(this.getChildValue(node));\n            },\n            \"TextSymbolizer\": function(node, rule) {\n                var config = {};\n                this.readChildNodes(node, config);\n                if (this.multipleSymbolizers) {\n                    config.zIndex = this.featureTypeCounter;\n                    rule.symbolizers.push(\n                        new OpenLayers.Symbolizer.Text(config)\n                    );\n                } else {\n                    rule.symbolizer[\"Text\"] = OpenLayers.Util.applyDefaults(\n                        config, rule.symbolizer[\"Text\"]\n                    );\n                }\n            },\n            \"LabelPlacement\": function(node, symbolizer) {\n                this.readChildNodes(node, symbolizer);\n            },\n            \"PointPlacement\": function(node, symbolizer) {\n                var config = {};\n                this.readChildNodes(node, config);\n                config.labelRotation = config.rotation;\n                delete config.rotation;\n                var labelAlign,\n                    x = symbolizer.labelAnchorPointX,\n                    y = symbolizer.labelAnchorPointY;\n                if (x <= 1/3) {\n                    labelAlign = 'l';\n                } else if (x > 1/3 && x < 2/3) {\n                    labelAlign = 'c';\n                } else if (x >= 2/3) {\n                    labelAlign = 'r';\n                }\n                if (y <= 1/3) {\n                    labelAlign += 'b';\n                } else if (y > 1/3 && y < 2/3) {\n                    labelAlign += 'm';\n                } else if (y >= 2/3) {\n                    labelAlign += 't';\n                }\n                config.labelAlign = labelAlign;\n                OpenLayers.Util.applyDefaults(symbolizer, config);\n            },\n            \"AnchorPoint\": function(node, symbolizer) {\n                this.readChildNodes(node, symbolizer);\n            },\n            \"AnchorPointX\": function(node, symbolizer) {\n                var labelAnchorPointX = this.readers.ogc._expression.call(this, node);\n                // always string, could be empty string\n                if(labelAnchorPointX) {\n                    symbolizer.labelAnchorPointX = labelAnchorPointX;\n                }\n            },\n            \"AnchorPointY\": function(node, symbolizer) {\n                var labelAnchorPointY = this.readers.ogc._expression.call(this, node);\n                // always string, could be empty string\n                if(labelAnchorPointY) {\n                    symbolizer.labelAnchorPointY = labelAnchorPointY;\n                }\n            },\n            \"Displacement\": function(node, symbolizer) {\n                this.readChildNodes(node, symbolizer);\n            },\n            \"DisplacementX\": function(node, symbolizer) {\n                var labelXOffset = this.readers.ogc._expression.call(this, node);\n                // always string, could be empty string\n                if(labelXOffset) {\n                    symbolizer.labelXOffset = labelXOffset;\n                }\n            },\n            \"DisplacementY\": function(node, symbolizer) {\n                var labelYOffset = this.readers.ogc._expression.call(this, node);\n                // always string, could be empty string\n                if(labelYOffset) {\n                    symbolizer.labelYOffset = labelYOffset;\n                }\n            },\n            \"LinePlacement\": function(node, symbolizer) {\n                this.readChildNodes(node, symbolizer);\n            },\n            \"PerpendicularOffset\": function(node, symbolizer) {\n                var labelPerpendicularOffset = this.readers.ogc._expression.call(this, node);\n                // always string, could be empty string\n                if(labelPerpendicularOffset) {\n                    symbolizer.labelPerpendicularOffset = labelPerpendicularOffset;\n                }\n            },\n            \"Label\": function(node, symbolizer) {\n                var value = this.readers.ogc._expression.call(this, node);\n                if (value) {\n                    symbolizer.label = OpenLayers.String.trim(value);\n                }\n            },\n            \"Font\": function(node, symbolizer) {\n                this.readChildNodes(node, symbolizer);\n            },\n            \"Halo\": function(node, symbolizer) {\n                // halo has a fill, so send fresh object\n                var obj = {};\n                this.readChildNodes(node, obj);\n                symbolizer.haloRadius = obj.haloRadius;\n                symbolizer.haloColor = obj.fillColor;\n                symbolizer.haloOpacity = obj.fillOpacity;\n            },\n            \"Radius\": function(node, symbolizer) {\n                var radius = this.readers.ogc._expression.call(this, node);\n                if(radius != null) {\n                    // radius is only used for halo\n                    symbolizer.haloRadius = radius;\n                }\n            },\n            \"RasterSymbolizer\": function(node, rule) {\n                var config = {};\n                this.readChildNodes(node, config);\n                if (this.multipleSymbolizers) {\n                    config.zIndex = this.featureTypeCounter;\n                    rule.symbolizers.push(\n                        new OpenLayers.Symbolizer.Raster(config)\n                    );\n                } else {\n                    rule.symbolizer[\"Raster\"] = OpenLayers.Util.applyDefaults(\n                        config, rule.symbolizer[\"Raster\"]\n                    );\n                }\n            },\n            \"Geometry\": function(node, obj) {\n                obj.geometry = {};\n                this.readChildNodes(node, obj.geometry);\n            },\n            \"ColorMap\": function(node, symbolizer) {\n                symbolizer.colorMap = [];\n                this.readChildNodes(node, symbolizer.colorMap);\n            },\n            \"ColorMapEntry\": function(node, colorMap) {\n                var q = node.getAttribute(\"quantity\");\n                var o = node.getAttribute(\"opacity\");\n                colorMap.push({\n                    color: node.getAttribute(\"color\"),\n                    quantity: q !== null ? parseFloat(q) : undefined,\n                    label: node.getAttribute(\"label\") || undefined,\n                    opacity: o !== null ? parseFloat(o) : undefined\n                });\n            },\n            \"LineSymbolizer\": function(node, rule) {\n                var config = {};\n                this.readChildNodes(node, config);\n                if (this.multipleSymbolizers) {\n                    config.zIndex = this.featureTypeCounter;\n                    rule.symbolizers.push(\n                        new OpenLayers.Symbolizer.Line(config)\n                    );\n                } else {\n                    rule.symbolizer[\"Line\"] = OpenLayers.Util.applyDefaults(\n                        config, rule.symbolizer[\"Line\"]\n                    );\n                }\n            },\n            \"PolygonSymbolizer\": function(node, rule) {\n                var config = {\n                    fill: false,\n                    stroke: false\n                };\n                if (!this.multipleSymbolizers) {\n                    config = rule.symbolizer[\"Polygon\"] || config;\n                }\n                this.readChildNodes(node, config);\n                if (this.multipleSymbolizers) {\n                    config.zIndex = this.featureTypeCounter;\n                    rule.symbolizers.push(\n                        new OpenLayers.Symbolizer.Polygon(config)\n                    );\n                } else {\n                    rule.symbolizer[\"Polygon\"] = config;\n                }\n            },\n            \"PointSymbolizer\": function(node, rule) {\n                var config = {\n                    fill: false,\n                    stroke: false,\n                    graphic: false\n                };\n                if (!this.multipleSymbolizers) {\n                    config = rule.symbolizer[\"Point\"] || config;\n                }\n                this.readChildNodes(node, config);\n                if (this.multipleSymbolizers) {\n                    config.zIndex = this.featureTypeCounter;\n                    rule.symbolizers.push(\n                        new OpenLayers.Symbolizer.Point(config)\n                    );\n                } else {\n                    rule.symbolizer[\"Point\"] = config;\n                }\n            },\n            \"Stroke\": function(node, symbolizer) {\n                symbolizer.stroke = true;\n                this.readChildNodes(node, symbolizer);\n            },\n            \"Fill\": function(node, symbolizer) {\n                symbolizer.fill = true;\n                this.readChildNodes(node, symbolizer);\n            },\n            \"CssParameter\": function(node, symbolizer) {\n                var cssProperty = node.getAttribute(\"name\");\n                var symProperty = this.cssMap[cssProperty];\n                // for labels, fill should map to fontColor and fill-opacity \n                // to fontOpacity\n                if (symbolizer.label) {\n                    if (cssProperty === 'fill') {\n                        symProperty = \"fontColor\";\n                    } else if (cssProperty === 'fill-opacity') {\n                        symProperty = \"fontOpacity\";\n                    }\n                }\n                if(symProperty) {\n                    // Limited support for parsing of OGC expressions\n                    var value = this.readers.ogc._expression.call(this, node);\n                    // always string, could be an empty string\n                    if(value) {\n                        symbolizer[symProperty] = value;\n                    }\n                }\n            },\n            \"Graphic\": function(node, symbolizer) {\n                symbolizer.graphic = true;\n                var graphic = {};\n                // painter's order not respected here, clobber previous with next\n                this.readChildNodes(node, graphic);\n                // directly properties with names that match symbolizer properties\n                var properties = [\n                    \"stroke\", \"strokeColor\", \"strokeWidth\", \"strokeOpacity\",\n                    \"strokeLinecap\", \"fill\", \"fillColor\", \"fillOpacity\",\n                    \"graphicName\", \"rotation\", \"graphicFormat\"\n                ];\n                var prop, value;\n                for(var i=0, len=properties.length; i<len; ++i) {\n                    prop = properties[i];\n                    value = graphic[prop];\n                    if(value != undefined) {\n                        symbolizer[prop] = value;\n                    }\n                }\n                // set other generic properties with specific graphic property names\n                if(graphic.opacity != undefined) {\n                    symbolizer.graphicOpacity = graphic.opacity;\n                }\n                if(graphic.size != undefined) {\n                    var pointRadius = graphic.size / 2;\n                    if (isNaN(pointRadius)) {\n                        // likely a property name\n                        symbolizer.graphicWidth = graphic.size;\n                    } else {\n                        symbolizer.pointRadius = graphic.size / 2;\n                    }\n                }\n                if(graphic.href != undefined) {\n                    symbolizer.externalGraphic = graphic.href;\n                }\n                if(graphic.rotation != undefined) {\n                    symbolizer.rotation = graphic.rotation;\n                }\n            },\n            \"ExternalGraphic\": function(node, graphic) {\n                this.readChildNodes(node, graphic);\n            },\n            \"Mark\": function(node, graphic) {\n                this.readChildNodes(node, graphic);\n            },\n            \"WellKnownName\": function(node, graphic) {\n                graphic.graphicName = this.getChildValue(node);\n            },\n            \"Opacity\": function(node, obj) {\n                var opacity = this.readers.ogc._expression.call(this, node);\n                // always string, could be empty string\n                if(opacity) {\n                    obj.opacity = opacity;\n                }\n            },\n            \"Size\": function(node, obj) {\n                var size = this.readers.ogc._expression.call(this, node);\n                // always string, could be empty string\n                if(size) {\n                    obj.size = size;\n                }\n            },\n            \"Rotation\": function(node, obj) {\n                var rotation = this.readers.ogc._expression.call(this, node);\n                // always string, could be empty string\n                if(rotation) {\n                    obj.rotation = rotation;\n                }\n            },\n            \"OnlineResource\": function(node, obj) {\n                obj.href = this.getAttributeNS(\n                    node, this.namespaces.xlink, \"href\"\n                );\n            },\n            \"Format\": function(node, graphic) {\n                graphic.graphicFormat = this.getChildValue(node);\n            }\n        }\n    }, OpenLayers.Format.Filter.v1_0_0.prototype.readers),\n    \n    /**\n     * Property: cssMap\n     * {Object} Object mapping supported css property names to OpenLayers\n     *     symbolizer property names.\n     */\n    cssMap: {\n        \"stroke\": \"strokeColor\",\n        \"stroke-opacity\": \"strokeOpacity\",\n        \"stroke-width\": \"strokeWidth\",\n        \"stroke-linecap\": \"strokeLinecap\",\n        \"stroke-dasharray\": \"strokeDashstyle\",\n        \"fill\": \"fillColor\",\n        \"fill-opacity\": \"fillOpacity\",\n        \"font-family\": \"fontFamily\",\n        \"font-size\": \"fontSize\",\n        \"font-weight\": \"fontWeight\",\n        \"font-style\": \"fontStyle\"\n    },\n    \n    /**\n     * Method: getCssProperty\n     * Given a symbolizer property, get the corresponding CSS property\n     *     from the <cssMap>.\n     *\n     * Parameters:\n     * sym - {String} A symbolizer property name.\n     *\n     * Returns:\n     * {String} A CSS property name or null if none found.\n     */\n    getCssProperty: function(sym) {\n        var css = null;\n        for(var prop in this.cssMap) {\n            if(this.cssMap[prop] == sym) {\n                css = prop;\n                break;\n            }\n        }\n        return css;\n    },\n    \n    /**\n     * Method: getGraphicFormat\n     * Given a href for an external graphic, try to determine the mime-type.\n     *     This method doesn't try too hard, and will fall back to\n     *     <defaultGraphicFormat> if one of the known <graphicFormats> is not\n     *     the file extension of the provided href.\n     *\n     * Parameters:\n     * href - {String}\n     *\n     * Returns:\n     * {String} The graphic format.\n     */\n    getGraphicFormat: function(href) {\n        var format, regex;\n        for(var key in this.graphicFormats) {\n            if(this.graphicFormats[key].test(href)) {\n                format = key;\n                break;\n            }\n        }\n        return format || this.defaultGraphicFormat;\n    },\n    \n    /**\n     * Property: defaultGraphicFormat\n     * {String} If none other can be determined from <getGraphicFormat>, this\n     *     default will be returned.\n     */\n    defaultGraphicFormat: \"image/png\",\n    \n    /**\n     * Property: graphicFormats\n     * {Object} Mapping of image mime-types to regular extensions matching \n     *     well-known file extensions.\n     */\n    graphicFormats: {\n        \"image/jpeg\": /\\.jpe?g$/i,\n        \"image/gif\": /\\.gif$/i,\n        \"image/png\": /\\.png$/i\n    },\n\n    /**\n     * Method: write\n     *\n     * Parameters:\n     * sld - {Object} An object representing the SLD.\n     *\n     * Returns:\n     * {DOMElement} The root of an SLD document.\n     */\n    write: function(sld) {\n        return this.writers.sld.StyledLayerDescriptor.apply(this, [sld]);\n    },\n    \n    /**\n     * Property: writers\n     * As a compliment to the readers property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: OpenLayers.Util.applyDefaults({\n        \"sld\": {\n            \"_OGCExpression\": function(nodeName, value) {\n                // only the simplest of ogc:expression handled\n                // {label: \"some text and a ${propertyName}\"}\n                var node = this.createElementNSPlus(nodeName);\n                var tokens = typeof value == \"string\" ?\n                    value.split(\"${\") :\n                    [value];\n                node.appendChild(this.createTextNode(tokens[0]));\n                var item, last;\n                for(var i=1, len=tokens.length; i<len; i++) {\n                    item = tokens[i];\n                    last = item.indexOf(\"}\"); \n                    if(last > 0) {\n                        this.writeNode(\n                            \"ogc:PropertyName\",\n                            {property: item.substring(0, last)},\n                            node\n                        );\n                        node.appendChild(\n                            this.createTextNode(item.substring(++last))\n                        );\n                    } else {\n                        // no ending }, so this is a literal ${\n                        node.appendChild(\n                            this.createTextNode(\"${\" + item)\n                        );\n                    }\n                }\n                return node;\n            },\n            \"StyledLayerDescriptor\": function(sld) {\n                var root = this.createElementNSPlus(\n                    \"sld:StyledLayerDescriptor\",\n                    {attributes: {\n                        \"version\": this.VERSION,\n                        \"xsi:schemaLocation\": this.schemaLocation\n                    }}\n                );\n\n                // For ArcGIS Server it is necessary to define this\n                // at the root level (see ticket:2166).\n                this.setAttributeNS(\n                    root, this.namespaces.xmlns,\n                    \"xmlns:ogc\", this.namespaces.ogc\n                );\n                this.setAttributeNS(\n                    root, this.namespaces.xmlns,\n                    \"xmlns:gml\", this.namespaces.gml\n                );\n\n                // add in optional name\n                if(sld.name) {\n                    this.writeNode(\"Name\", sld.name, root);\n                }\n                // add in optional title\n                if(sld.title) {\n                    this.writeNode(\"Title\", sld.title, root);\n                }\n                // add in optional description\n                if(sld.description) {\n                    this.writeNode(\"Abstract\", sld.description, root);\n                }\n                // add in named layers\n                // allow namedLayers to be an array\n                if(OpenLayers.Util.isArray(sld.namedLayers)) {\n                    for(var i=0, len=sld.namedLayers.length; i<len; ++i) {\n                        this.writeNode(\"NamedLayer\", sld.namedLayers[i], root);\n                    }\n                } else {\n                    for(var name in sld.namedLayers) {\n                        this.writeNode(\"NamedLayer\", sld.namedLayers[name], root);\n                    }\n                }\n                return root;\n            },\n            \"Name\": function(name) {\n                return this.createElementNSPlus(\"sld:Name\", {value: name});\n            },\n            \"Title\": function(title) {\n                return this.createElementNSPlus(\"sld:Title\", {value: title});\n            },\n            \"Abstract\": function(description) {\n                return this.createElementNSPlus(\n                    \"sld:Abstract\", {value: description}\n                );\n            },\n            \"NamedLayer\": function(layer) {\n                var node = this.createElementNSPlus(\"sld:NamedLayer\");\n\n                // add in required name\n                this.writeNode(\"Name\", layer.name, node);\n\n                // optional sld:LayerFeatureConstraints here\n\n                // add in named styles\n                if(layer.namedStyles) {\n                    for(var i=0, len=layer.namedStyles.length; i<len; ++i) {\n                        this.writeNode(\n                            \"NamedStyle\", layer.namedStyles[i], node\n                        );\n                    }\n                }\n                \n                // add in user styles\n                if(layer.userStyles) {\n                    for(var i=0, len=layer.userStyles.length; i<len; ++i) {\n                        this.writeNode(\n                            \"UserStyle\", layer.userStyles[i], node\n                        );\n                    }\n                }\n                \n                return node;\n            },\n            \"NamedStyle\": function(name) {\n                var node = this.createElementNSPlus(\"sld:NamedStyle\");\n                this.writeNode(\"Name\", name, node);\n                return node;\n            },\n            \"UserStyle\": function(style) {\n                var node = this.createElementNSPlus(\"sld:UserStyle\");\n\n                // add in optional name\n                if(style.name) {\n                    this.writeNode(\"Name\", style.name, node);\n                }\n                // add in optional title\n                if(style.title) {\n                    this.writeNode(\"Title\", style.title, node);\n                }\n                // add in optional description\n                if(style.description) {\n                    this.writeNode(\"Abstract\", style.description, node);\n                }\n                \n                // add isdefault\n                if(style.isDefault) {\n                    this.writeNode(\"IsDefault\", style.isDefault, node);\n                }\n                \n                // add FeatureTypeStyles\n                if (this.multipleSymbolizers && style.rules) {\n                    // group style objects by symbolizer zIndex\n                    var rulesByZ = {\n                        0: []\n                    };\n                    var zValues = [0];\n                    var rule, ruleMap, symbolizer, zIndex, clone;\n                    for (var i=0, ii=style.rules.length; i<ii; ++i) {\n                        rule = style.rules[i];\n                        if (rule.symbolizers) {\n                            ruleMap = {};\n                            for (var j=0, jj=rule.symbolizers.length; j<jj; ++j) {\n                                symbolizer = rule.symbolizers[j];\n                                zIndex = symbolizer.zIndex;\n                                if (!(zIndex in ruleMap)) {\n                                    clone = rule.clone();\n                                    clone.symbolizers = [];\n                                    ruleMap[zIndex] = clone;\n                                }\n                                ruleMap[zIndex].symbolizers.push(symbolizer.clone());\n                            }\n                            for (zIndex in ruleMap) {\n                                if (!(zIndex in rulesByZ)) {\n                                    zValues.push(zIndex);\n                                    rulesByZ[zIndex] = [];\n                                }\n                                rulesByZ[zIndex].push(ruleMap[zIndex]);\n                            }\n                        } else {\n                            // no symbolizers in rule\n                            rulesByZ[0].push(rule.clone());\n                        }\n                    }\n                    // write one FeatureTypeStyle per zIndex\n                    zValues.sort();\n                    var rules;\n                    for (var i=0, ii=zValues.length; i<ii; ++i) {\n                        rules = rulesByZ[zValues[i]];\n                        if (rules.length > 0) {\n                            clone = style.clone();\n                            clone.rules = rulesByZ[zValues[i]];\n                            this.writeNode(\"FeatureTypeStyle\", clone, node);\n                        }\n                    }                    \n                } else {\n                    this.writeNode(\"FeatureTypeStyle\", style, node);\n                }\n                \n                return node;\n            },\n            \"IsDefault\": function(bool) {\n                return this.createElementNSPlus(\n                    \"sld:IsDefault\", {value: (bool) ? \"1\" : \"0\"}\n                );\n            },\n            \"FeatureTypeStyle\": function(style) {\n                var node = this.createElementNSPlus(\"sld:FeatureTypeStyle\");\n                \n                // OpenLayers currently stores no Name, Title, Abstract,\n                // FeatureTypeName, or SemanticTypeIdentifier information\n                // related to FeatureTypeStyle\n                \n                // add in rules\n                for(var i=0, len=style.rules.length; i<len; ++i) {\n                    this.writeNode(\"Rule\", style.rules[i], node);\n                }\n                \n                return node;\n            },\n            \"Rule\": function(rule) {\n                var node = this.createElementNSPlus(\"sld:Rule\");\n\n                // add in optional name\n                if(rule.name) {\n                    this.writeNode(\"Name\", rule.name, node);\n                }\n                // add in optional title\n                if(rule.title) {\n                    this.writeNode(\"Title\", rule.title, node);\n                }\n                // add in optional description\n                if(rule.description) {\n                    this.writeNode(\"Abstract\", rule.description, node);\n                }\n                \n                // add in LegendGraphic here\n                \n                // add in optional filters\n                if(rule.elseFilter) {\n                    this.writeNode(\"ElseFilter\", null, node);\n                } else if(rule.filter) {\n                    this.writeNode(\"ogc:Filter\", rule.filter, node);\n                }\n                \n                // add in scale limits\n                if(rule.minScaleDenominator != undefined) {\n                    this.writeNode(\n                        \"MinScaleDenominator\", rule.minScaleDenominator, node\n                    );\n                }\n                if(rule.maxScaleDenominator != undefined) {\n                    this.writeNode(\n                        \"MaxScaleDenominator\", rule.maxScaleDenominator, node\n                    );\n                }\n                \n                var type, symbolizer;\n                if (this.multipleSymbolizers && rule.symbolizers) {\n                    var symbolizer;\n                    for (var i=0, ii=rule.symbolizers.length; i<ii; ++i) {\n                        symbolizer = rule.symbolizers[i];\n                        type = symbolizer.CLASS_NAME.split(\".\").pop();\n                        this.writeNode(\n                            type + \"Symbolizer\", symbolizer, node\n                        );\n                    }\n                } else {\n                    // add in symbolizers (relies on geometry type keys)\n                    var types = OpenLayers.Style.SYMBOLIZER_PREFIXES;\n                    for(var i=0, len=types.length; i<len; ++i) {\n                        type = types[i];\n                        symbolizer = rule.symbolizer[type];\n                        if(symbolizer) {\n                            this.writeNode(\n                                type + \"Symbolizer\", symbolizer, node\n                            );\n                        }\n                    }\n                }\n                return node;\n\n            },\n            \"ElseFilter\": function() {\n                return this.createElementNSPlus(\"sld:ElseFilter\");\n            },\n            \"MinScaleDenominator\": function(scale) {\n                return this.createElementNSPlus(\n                    \"sld:MinScaleDenominator\", {value: scale}\n                );\n            },\n            \"MaxScaleDenominator\": function(scale) {\n                return this.createElementNSPlus(\n                    \"sld:MaxScaleDenominator\", {value: scale}\n                );\n            },\n            \"LineSymbolizer\": function(symbolizer) {\n                var node = this.createElementNSPlus(\"sld:LineSymbolizer\");\n                // add in optional Geometry\n                if (symbolizer.geometry) {\n                    this.writeNode(\"Geometry\", symbolizer.geometry, node);\n                }\n                this.writeNode(\"Stroke\", symbolizer, node);\n                return node;\n            },\n            \"Stroke\": function(symbolizer) {\n                var node = this.createElementNSPlus(\"sld:Stroke\");\n\n                // GraphicFill here\n                // GraphicStroke here\n\n                // add in CssParameters\n                if(symbolizer.strokeColor != undefined) {\n                    this.writeNode(\n                        \"CssParameter\",\n                        {symbolizer: symbolizer, key: \"strokeColor\"},\n                        node\n                    );\n                }\n                if(symbolizer.strokeOpacity != undefined) {\n                    this.writeNode(\n                        \"CssParameter\",\n                        {symbolizer: symbolizer, key: \"strokeOpacity\"},\n                        node\n                    );\n                }\n                if(symbolizer.strokeWidth != undefined) {\n                    this.writeNode(\n                        \"CssParameter\",\n                        {symbolizer: symbolizer, key: \"strokeWidth\"},\n                        node\n                    );\n                }\n                if(symbolizer.strokeDashstyle != undefined && symbolizer.strokeDashstyle !== \"solid\") {\n                    // assumes valid stroke-dasharray value\n                    this.writeNode(\n                        \"CssParameter\", \n                        {symbolizer: symbolizer, key: \"strokeDashstyle\"},\n                        node\n                    );\n                }\n                if(symbolizer.strokeLinecap != undefined) {\n                    this.writeNode(\n                        \"CssParameter\", \n                        {symbolizer: symbolizer, key: \"strokeLinecap\"},\n                        node\n                    );\n                }\n                return node;\n            },\n            \"CssParameter\": function(obj) {\n                // not handling ogc:expressions for now\n                return this.createElementNSPlus(\"sld:CssParameter\", {\n                    attributes: {name: this.getCssProperty(obj.key)},\n                    value: obj.symbolizer[obj.key]\n                });\n            },\n            \"TextSymbolizer\": function(symbolizer) {\n                var node = this.createElementNSPlus(\"sld:TextSymbolizer\");\n                // add in optional Geometry\n                if (symbolizer.geometry) {\n                    this.writeNode(\"Geometry\", symbolizer.geometry, node);\n                }\n                // add in optional Label\n                if(symbolizer.label != null) {\n                    this.writeNode(\"Label\", symbolizer.label, node);\n                }\n                // add in optional Font\n                if(symbolizer.fontFamily != null ||\n                    symbolizer.fontSize != null ||\n                    symbolizer.fontWeight != null ||\n                    symbolizer.fontStyle != null) {\n                        this.writeNode(\"Font\", symbolizer, node);\n                }\n                // add in optional LabelPlacement\n                if (symbolizer.labelAnchorPointX != null ||\n                    symbolizer.labelAnchorPointY != null || \n                    symbolizer.labelAlign != null ||\n                    symbolizer.labelXOffset != null ||\n                    symbolizer.labelYOffset != null ||\n                    symbolizer.labelRotation != null ||\n                    symbolizer.labelPerpendicularOffset != null) {\n                        this.writeNode(\"LabelPlacement\", symbolizer, node);\n                }\n                // add in optional Halo\n                if(symbolizer.haloRadius != null ||\n                    symbolizer.haloColor != null ||\n                    symbolizer.haloOpacity != null) {\n                        this.writeNode(\"Halo\", symbolizer, node);\n                }\n                // add in optional Fill\n                if(symbolizer.fontColor != null ||\n                   symbolizer.fontOpacity != null) {\n                    this.writeNode(\"Fill\", {\n                        fillColor: symbolizer.fontColor,\n                        fillOpacity: symbolizer.fontOpacity\n                    }, node);\n                }\n                return node;\n            },\n            \"LabelPlacement\": function(symbolizer) {\n                var node = this.createElementNSPlus(\"sld:LabelPlacement\");\n                // PointPlacement and LinePlacement are choices, so don't output both\n                if ((symbolizer.labelAnchorPointX != null ||\n                    symbolizer.labelAnchorPointY != null ||\n                    symbolizer.labelAlign != null ||\n                    symbolizer.labelXOffset != null ||\n                    symbolizer.labelYOffset != null ||\n                    symbolizer.labelRotation != null) && \n                    symbolizer.labelPerpendicularOffset == null) {\n                        this.writeNode(\"PointPlacement\", symbolizer, node);\n                }\n                if (symbolizer.labelPerpendicularOffset != null) {\n                    this.writeNode(\"LinePlacement\", symbolizer, node);\n                }\n                return node;\n            },\n            \"LinePlacement\": function(symbolizer) {\n                var node = this.createElementNSPlus(\"sld:LinePlacement\");\n                this.writeNode(\"PerpendicularOffset\", symbolizer.labelPerpendicularOffset, node);\n                return node;\n            },\n            \"PerpendicularOffset\": function(value) {\n                return this.createElementNSPlus(\"sld:PerpendicularOffset\", {\n                    value: value\n                });\n            },\n            \"PointPlacement\": function(symbolizer) {\n                var node = this.createElementNSPlus(\"sld:PointPlacement\");\n                if (symbolizer.labelAnchorPointX != null ||\n                    symbolizer.labelAnchorPointY != null ||\n                    symbolizer.labelAlign != null) {\n                        this.writeNode(\"AnchorPoint\", symbolizer, node);\n                }\n                if (symbolizer.labelXOffset != null ||\n                    symbolizer.labelYOffset != null) {\n                        this.writeNode(\"Displacement\", symbolizer, node);\n                }\n                if (symbolizer.labelRotation != null) {\n                    this.writeNode(\"Rotation\", symbolizer.labelRotation, node);\n                }\n                return node;\n            },\n            \"AnchorPoint\": function(symbolizer) {\n                var node = this.createElementNSPlus(\"sld:AnchorPoint\");\n                var x = symbolizer.labelAnchorPointX,\n                    y = symbolizer.labelAnchorPointY;\n                if (x != null) {\n                    this.writeNode(\"AnchorPointX\", x, node);\n                }\n                if (y != null) {\n                    this.writeNode(\"AnchorPointY\", y, node);\n                }\n                if (x == null && y == null) {\n                    var xAlign = symbolizer.labelAlign.substr(0, 1),\n                        yAlign = symbolizer.labelAlign.substr(1, 1);\n                    if (xAlign === \"l\") {\n                        x = 0;\n                    } else if (xAlign === \"c\") {\n                        x = 0.5;\n                    } else if (xAlign === \"r\") {\n                        x = 1;\n                    }\n                    if (yAlign === \"b\") {\n                        y = 0;\n                    } else if (yAlign === \"m\") {\n                        y = 0.5;\n                    } else if (yAlign === \"t\") {\n                        y = 1;\n                    }\n                    this.writeNode(\"AnchorPointX\", x, node);\n                    this.writeNode(\"AnchorPointY\", y, node);\n                }\n                return node;\n            },\n            \"AnchorPointX\": function(value) {\n                return this.createElementNSPlus(\"sld:AnchorPointX\", {\n                    value: value\n                }); \n            },\n            \"AnchorPointY\": function(value) {\n                return this.createElementNSPlus(\"sld:AnchorPointY\", {\n                    value: value\n                });\n            },\n            \"Displacement\": function(symbolizer) {\n                var node = this.createElementNSPlus(\"sld:Displacement\");\n                if (symbolizer.labelXOffset != null) {\n                    this.writeNode(\"DisplacementX\", symbolizer.labelXOffset, node);\n                }\n                if (symbolizer.labelYOffset != null) {\n                    this.writeNode(\"DisplacementY\", symbolizer.labelYOffset, node);\n                }\n                return node;\n            },\n            \"DisplacementX\": function(value) {\n                return this.createElementNSPlus(\"sld:DisplacementX\", {\n                    value: value\n                });\n            },\n            \"DisplacementY\": function(value) {\n                return this.createElementNSPlus(\"sld:DisplacementY\", {\n                    value: value\n                });\n            },\n            \"Font\": function(symbolizer) {\n                var node = this.createElementNSPlus(\"sld:Font\");\n                // add in CssParameters\n                if(symbolizer.fontFamily) {\n                    this.writeNode(\n                        \"CssParameter\",\n                        {symbolizer: symbolizer, key: \"fontFamily\"},\n                        node\n                    );\n                }\n                if(symbolizer.fontSize) {\n                    this.writeNode(\n                        \"CssParameter\",\n                        {symbolizer: symbolizer, key: \"fontSize\"},\n                        node\n                    );\n                }\n                if(symbolizer.fontWeight) {\n                    this.writeNode(\n                        \"CssParameter\",\n                        {symbolizer: symbolizer, key: \"fontWeight\"},\n                        node\n                    );\n                }\n                if(symbolizer.fontStyle) {\n                    this.writeNode(\n                        \"CssParameter\",\n                        {symbolizer: symbolizer, key: \"fontStyle\"},\n                        node\n                    );\n                }\n                return node;\n            },\n            \"Label\": function(label) {\n                return this.writers.sld._OGCExpression.call(\n                    this, \"sld:Label\", label\n                );\n            },\n            \"Halo\": function(symbolizer) {\n                var node = this.createElementNSPlus(\"sld:Halo\");\n                if(symbolizer.haloRadius) {\n                    this.writeNode(\"Radius\", symbolizer.haloRadius, node);\n                }\n                if(symbolizer.haloColor || symbolizer.haloOpacity) {\n                    this.writeNode(\"Fill\", {\n                        fillColor: symbolizer.haloColor,\n                        fillOpacity: symbolizer.haloOpacity\n                    }, node);\n                }\n                return node;\n            },\n            \"Radius\": function(value) {\n                return this.createElementNSPlus(\"sld:Radius\", {\n                    value: value\n                });\n            },\n            \"RasterSymbolizer\": function(symbolizer) {\n                var node = this.createElementNSPlus(\"sld:RasterSymbolizer\");\n                if (symbolizer.geometry) {\n                    this.writeNode(\"Geometry\", symbolizer.geometry, node);\n                }\n                if (symbolizer.opacity) {\n                    this.writeNode(\"Opacity\", symbolizer.opacity, node);\n                }\n                if (symbolizer.colorMap) {\n                    this.writeNode(\"ColorMap\", symbolizer.colorMap, node);\n                }\n                return node;\n            },\n            \"Geometry\": function(geometry) {\n                var node = this.createElementNSPlus(\"sld:Geometry\");\n                if (geometry.property) {\n                    this.writeNode(\"ogc:PropertyName\", geometry, node);\n                }\n                return node;\n            },\n            \"ColorMap\": function(colorMap) {\n                var node = this.createElementNSPlus(\"sld:ColorMap\");\n                for (var i=0, len=colorMap.length; i<len; ++i) {\n                    this.writeNode(\"ColorMapEntry\", colorMap[i], node);\n                }\n                return node;\n            },\n            \"ColorMapEntry\": function(colorMapEntry) {\n                var node = this.createElementNSPlus(\"sld:ColorMapEntry\");\n                var a = colorMapEntry;\n                node.setAttribute(\"color\", a.color);\n                a.opacity !== undefined && node.setAttribute(\"opacity\",\n                    parseFloat(a.opacity));\n                a.quantity !== undefined && node.setAttribute(\"quantity\",\n                    parseFloat(a.quantity));\n                a.label !== undefined && node.setAttribute(\"label\", a.label);\n                return node;\n            },\n            \"PolygonSymbolizer\": function(symbolizer) {\n                var node = this.createElementNSPlus(\"sld:PolygonSymbolizer\");\n                // add in optional Geometry\n                if (symbolizer.geometry) {\n                    this.writeNode(\"Geometry\", symbolizer.geometry, node);\n                }\n                if(symbolizer.fill !== false) {\n                    this.writeNode(\"Fill\", symbolizer, node);\n                }\n                if(symbolizer.stroke !== false) {\n                    this.writeNode(\"Stroke\", symbolizer, node);\n                }\n                return node;\n            },\n            \"Fill\": function(symbolizer) {\n                var node = this.createElementNSPlus(\"sld:Fill\");\n                \n                // GraphicFill here\n                \n                // add in CssParameters\n                if(symbolizer.fillColor) {\n                    this.writeNode(\n                        \"CssParameter\",\n                        {symbolizer: symbolizer, key: \"fillColor\"},\n                        node\n                    );\n                }\n                if(symbolizer.fillOpacity != null) {\n                    this.writeNode(\n                        \"CssParameter\",\n                        {symbolizer: symbolizer, key: \"fillOpacity\"},\n                        node\n                    );\n                }\n                return node;\n            },\n            \"PointSymbolizer\": function(symbolizer) {\n                var node = this.createElementNSPlus(\"sld:PointSymbolizer\");\n                // add in optional Geometry\n                if (symbolizer.geometry) {\n                    this.writeNode(\"Geometry\", symbolizer.geometry, node);\n                }\n                this.writeNode(\"Graphic\", symbolizer, node);\n                return node;\n            },\n            \"Graphic\": function(symbolizer) {\n                var node = this.createElementNSPlus(\"sld:Graphic\");\n                if(symbolizer.externalGraphic != undefined) {\n                    this.writeNode(\"ExternalGraphic\", symbolizer, node);\n                } else {\n                    this.writeNode(\"Mark\", symbolizer, node);\n                }\n                \n                if(symbolizer.graphicOpacity != undefined) {\n                    this.writeNode(\"Opacity\", symbolizer.graphicOpacity, node);\n                }\n                if(symbolizer.pointRadius != undefined) {\n                    this.writeNode(\"Size\", symbolizer.pointRadius * 2, node);\n                } else if (symbolizer.graphicWidth != undefined) {\n                    this.writeNode(\"Size\", symbolizer.graphicWidth, node);\n                }\n                if(symbolizer.rotation != undefined) {\n                    this.writeNode(\"Rotation\", symbolizer.rotation, node);\n                }\n                return node;\n            },\n            \"ExternalGraphic\": function(symbolizer) {\n                var node = this.createElementNSPlus(\"sld:ExternalGraphic\");\n                this.writeNode(\n                    \"OnlineResource\", symbolizer.externalGraphic, node\n                );\n                var format = symbolizer.graphicFormat ||\n                             this.getGraphicFormat(symbolizer.externalGraphic);\n                this.writeNode(\"Format\", format, node);\n                return node;\n            },\n            \"Mark\": function(symbolizer) {\n                var node = this.createElementNSPlus(\"sld:Mark\");\n                if(symbolizer.graphicName) {\n                    this.writeNode(\"WellKnownName\", symbolizer.graphicName, node);\n                }\n                if (symbolizer.fill !== false) {\n                    this.writeNode(\"Fill\", symbolizer, node);\n                }\n                if (symbolizer.stroke !== false) {\n                    this.writeNode(\"Stroke\", symbolizer, node);\n                }\n                return node;\n            },\n            \"WellKnownName\": function(name) {\n                return this.createElementNSPlus(\"sld:WellKnownName\", {\n                    value: name\n                });\n            },\n            \"Opacity\": function(value) {\n                return this.createElementNSPlus(\"sld:Opacity\", {\n                    value: value\n                });\n            },\n            \"Size\": function(value) {\n                return this.writers.sld._OGCExpression.call(\n                    this, \"sld:Size\", value\n                );\n            },\n            \"Rotation\": function(value) {\n                return this.createElementNSPlus(\"sld:Rotation\", {\n                    value: value\n                });\n            },\n            \"OnlineResource\": function(href) {\n                return this.createElementNSPlus(\"sld:OnlineResource\", {\n                    attributes: {\n                        \"xlink:type\": \"simple\",\n                        \"xlink:href\": href\n                    }\n                });\n            },\n            \"Format\": function(format) {\n                return this.createElementNSPlus(\"sld:Format\", {\n                    value: format\n                });\n            }\n        }\n    }, OpenLayers.Format.Filter.v1_0_0.prototype.writers),\n    \n    CLASS_NAME: \"OpenLayers.Format.SLD.v1\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/SLD/v1.js\n * @requires OpenLayers/Format/Filter/v1_0_0.js\n */\n\n/**\n * Class: OpenLayers.Format.SLD.v1_0_0\n * Write SLD version 1.0.0.\n * \n * Inherits from:\n *  - <OpenLayers.Format.SLD.v1>\n */\nOpenLayers.Format.SLD.v1_0_0 = OpenLayers.Class(\n    OpenLayers.Format.SLD.v1, {\n    \n    /**\n     * Constant: VERSION\n     * {String} 1.0.0\n     */\n    VERSION: \"1.0.0\",\n    \n    /**\n     * Property: schemaLocation\n     * {String} http://www.opengis.net/sld\n     *   http://schemas.opengis.net/sld/1.0.0/StyledLayerDescriptor.xsd\n     */\n    schemaLocation: \"http://www.opengis.net/sld http://schemas.opengis.net/sld/1.0.0/StyledLayerDescriptor.xsd\",\n\n    /**\n     * Constructor: OpenLayers.Format.SLD.v1_0_0\n     * Instances of this class are not created directly.  Use the\n     *     <OpenLayers.Format.SLD> constructor instead.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    CLASS_NAME: \"OpenLayers.Format.SLD.v1_0_0\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes.js\n * @requires OpenLayers/Format/SLD/v1_0_0.js\n */\n\n/**\n * Class: OpenLayers.Format.SLD/v1_0_0_GeoServer\n * Read and write SLD version 1.0.0 with GeoServer-specific enhanced options.\n * See http://svn.osgeo.org/geotools/trunk/modules/extension/xsd/xsd-sld/src/main/resources/org/geotools/sld/bindings/StyledLayerDescriptor.xsd\n * for more information.\n *\n * Inherits from:\n *  - <OpenLayers.Format.SLD.v1_0_0>\n */\nOpenLayers.Format.SLD.v1_0_0_GeoServer = OpenLayers.Class(\n    OpenLayers.Format.SLD.v1_0_0, {\n\n    /**\n     * Property: version\n     * {String} The specific parser version.\n     */\n    version: \"1.0.0\",\n\n    /**\n     * Property: profile\n     * {String} The specific profile\n     */\n    profile: \"GeoServer\",\n\n   /**\n     * Constructor: OpenLayers.Format.SLD.v1_0_0_GeoServer\n     * Create a new parser for GeoServer-enhanced SLD version 1.0.0.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: OpenLayers.Util.applyDefaults({\n        \"sld\": OpenLayers.Util.applyDefaults({\n            \"Priority\": function(node, obj) {\n                var value = this.readers.ogc._expression.call(this, node);\n                if (value) {\n                    obj.priority = OpenLayers.String.trim(value);\n                }\n            },\n            \"VendorOption\": function(node, obj) {\n                if (!obj.vendorOptions) {\n                    obj.vendorOptions = {};\n                }\n                obj.vendorOptions[node.getAttribute(\"name\")] = this.getChildValue(node);\n            },\n            \"TextSymbolizer\": function(node, rule) {\n                OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld.TextSymbolizer.apply(this, arguments);\n                var symbolizer = this.multipleSymbolizers ? rule.symbolizers[rule.symbolizers.length-1] : rule.symbolizer[\"Text\"];\n                if (symbolizer.graphic === undefined) {\n                    symbolizer.graphic = false;\n                }\n            }\n        }, OpenLayers.Format.SLD.v1_0_0.prototype.readers[\"sld\"])\n    }, OpenLayers.Format.SLD.v1_0_0.prototype.readers),\n\n    /**\n     * Property: writers\n     * As a compliment to the readers property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: OpenLayers.Util.applyDefaults({\n        \"sld\": OpenLayers.Util.applyDefaults({\n            \"Priority\": function(priority) {\n                return this.writers.sld._OGCExpression.call(\n                    this, \"sld:Priority\", priority\n                );\n            },\n            \"VendorOption\": function(option) {\n                return this.createElementNSPlus(\"sld:VendorOption\", {\n                    attributes: {name: option.name},\n                    value: option.value\n                });\n            },\n            \"TextSymbolizer\": function(symbolizer) {\n                var writers = OpenLayers.Format.SLD.v1_0_0.prototype.writers;\n                var node = writers[\"sld\"][\"TextSymbolizer\"].apply(this, arguments);\n                if (symbolizer.graphic !== false && (symbolizer.externalGraphic || symbolizer.graphicName)) {\n                    this.writeNode(\"Graphic\", symbolizer, node);\n                }\n                if (\"priority\" in symbolizer) {\n                    this.writeNode(\"Priority\", symbolizer.priority, node);\n                }\n                return this.addVendorOptions(node, symbolizer);\n            },\n            \"PointSymbolizer\": function(symbolizer) {\n                var writers = OpenLayers.Format.SLD.v1_0_0.prototype.writers;\n                var node = writers[\"sld\"][\"PointSymbolizer\"].apply(this, arguments);\n                return this.addVendorOptions(node, symbolizer);\n            },\n            \"LineSymbolizer\": function(symbolizer) {\n                var writers = OpenLayers.Format.SLD.v1_0_0.prototype.writers;\n                var node = writers[\"sld\"][\"LineSymbolizer\"].apply(this, arguments);\n                return this.addVendorOptions(node, symbolizer);\n            },\n            \"PolygonSymbolizer\": function(symbolizer) {\n                var writers = OpenLayers.Format.SLD.v1_0_0.prototype.writers;\n                var node = writers[\"sld\"][\"PolygonSymbolizer\"].apply(this, arguments);\n                return this.addVendorOptions(node, symbolizer);\n            }\n        }, OpenLayers.Format.SLD.v1_0_0.prototype.writers[\"sld\"])\n    }, OpenLayers.Format.SLD.v1_0_0.prototype.writers),\n\n    /**\n     * Method: addVendorOptions\n     * Add in the VendorOption tags and return the node again.\n     *\n     * Parameters:\n     * node - {DOMElement} A DOM node.\n     * symbolizer - {Object}\n     *\n     * Returns:\n     * {DOMElement} A DOM node.\n     */\n    addVendorOptions: function(node, symbolizer) {\n        var options = symbolizer.vendorOptions;\n        if (options) {\n            for (var key in symbolizer.vendorOptions) {\n                this.writeNode(\"VendorOption\", {\n                    name: key, \n                    value: symbolizer.vendorOptions[key]\n                }, node);\n            }\n        }\n        return node;\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.SLD.v1_0_0_GeoServer\"\n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format.js\n */\n\n/**\n * Class: OpenLayers.Format.CSWGetDomain\n * Default version is 2.0.2.\n *\n * Returns:\n * {<OpenLayers.Format>} A CSWGetDomain format of the given version.\n */\nOpenLayers.Format.CSWGetDomain = function(options) {\n    options = OpenLayers.Util.applyDefaults(\n        options, OpenLayers.Format.CSWGetDomain.DEFAULTS\n    );\n    var cls = OpenLayers.Format.CSWGetDomain[\"v\"+options.version.replace(/\\./g, \"_\")];\n    if(!cls) {\n        throw \"Unsupported CSWGetDomain version: \" + options.version;\n    }\n    return new cls(options);\n};\n\n/**\n * Constant: DEFAULTS\n * {Object} Default properties for the CSWGetDomain format.\n */\nOpenLayers.Format.CSWGetDomain.DEFAULTS = {\n    \"version\": \"2.0.2\"\n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML.js\n * @requires OpenLayers/Format/CSWGetDomain.js\n */\n\n/**\n * Class: OpenLayers.Format.CSWGetDomain.v2_0_2\n *     A format for creating CSWGetDomain v2.0.2 transactions. \n *     Create a new instance with the\n *     <OpenLayers.Format.CSWGetDomain.v2_0_2> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.CSWGetDomain.v2_0_2 = OpenLayers.Class(OpenLayers.Format.XML, {\n    \n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        xlink: \"http://www.w3.org/1999/xlink\",\n        xsi: \"http://www.w3.org/2001/XMLSchema-instance\",\n        csw: \"http://www.opengis.net/cat/csw/2.0.2\"\n    },\n\n    /**\n     * Property: defaultPrefix\n     * {String} The default prefix (used by Format.XML).\n     */\n    defaultPrefix: \"csw\",\n    \n    /**\n     * Property: version\n     * {String} CSW version number.\n     */\n    version: \"2.0.2\",\n    \n    /**\n     * Property: schemaLocation\n     * {String} http://www.opengis.net/cat/csw/2.0.2\n     *   http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd\n     */\n    schemaLocation: \"http://www.opengis.net/cat/csw/2.0.2 http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd\",\n\n    /**\n     * APIProperty: PropertyName\n     * {String} Value of the csw:PropertyName element, used when\n     *     writing a GetDomain document.\n     */\n    PropertyName: null,\n\n    /**\n     * APIProperty: ParameterName\n     * {String} Value of the csw:ParameterName element, used when\n     *     writing a GetDomain document.\n     */\n    ParameterName: null,\n    \n    /**\n     * Constructor: OpenLayers.Format.CSWGetDomain.v2_0_2\n     * A class for parsing and generating CSWGetDomain v2.0.2 transactions.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     *\n     * Valid options properties:\n     * - PropertyName\n     * - ParameterName\n     */\n\n    /**\n     * APIMethod: read\n     * Parse the response from a GetDomain request.\n     */\n    read: function(data) {\n        if(typeof data == \"string\") { \n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n        if(data && data.nodeType == 9) {\n            data = data.documentElement;\n        }\n        var obj = {};\n        this.readNode(data, obj);\n        return obj;\n    },\n    \n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"csw\": {\n            \"GetDomainResponse\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"DomainValues\": function(node, obj) {\n                if (!(OpenLayers.Util.isArray(obj.DomainValues))) {\n                    obj.DomainValues = [];\n                }\n                var attrs = node.attributes;\n                var domainValue = {};\n                for(var i=0, len=attrs.length; i<len; ++i) {\n                    domainValue[attrs[i].name] = attrs[i].nodeValue;\n                }\n                this.readChildNodes(node, domainValue);\n                obj.DomainValues.push(domainValue);\n            },\n            \"PropertyName\": function(node, obj) {\n                obj.PropertyName = this.getChildValue(node);\n            },\n            \"ParameterName\": function(node, obj) {\n                obj.ParameterName = this.getChildValue(node);\n            },\n            \"ListOfValues\": function(node, obj) {\n                if (!(OpenLayers.Util.isArray(obj.ListOfValues))) {\n                    obj.ListOfValues = [];\n                }\n                this.readChildNodes(node, obj.ListOfValues);\n            },\n            \"Value\": function(node, obj) {\n                var attrs = node.attributes;\n                var value = {};\n                for(var i=0, len=attrs.length; i<len; ++i) {\n                    value[attrs[i].name] = attrs[i].nodeValue;\n                }\n                value.value = this.getChildValue(node);\n                obj.push({Value: value});\n            },\n            \"ConceptualScheme\": function(node, obj) {\n                obj.ConceptualScheme = {};\n                this.readChildNodes(node, obj.ConceptualScheme);\n            },\n            \"Name\": function(node, obj) {\n                obj.Name = this.getChildValue(node);\n            },\n            \"Document\": function(node, obj) {\n                obj.Document = this.getChildValue(node);\n            },\n            \"Authority\": function(node, obj) {\n                obj.Authority = this.getChildValue(node);\n            },\n            \"RangeOfValues\": function(node, obj) {\n                obj.RangeOfValues = {};\n                this.readChildNodes(node, obj.RangeOfValues);\n            },\n            \"MinValue\": function(node, obj) {\n                var attrs = node.attributes;\n                var value = {};\n                for(var i=0, len=attrs.length; i<len; ++i) {\n                    value[attrs[i].name] = attrs[i].nodeValue;\n                }\n                value.value = this.getChildValue(node);\n                obj.MinValue = value;\n            },\n            \"MaxValue\": function(node, obj) {\n                var attrs = node.attributes;\n                var value = {};\n                for(var i=0, len=attrs.length; i<len; ++i) {\n                    value[attrs[i].name] = attrs[i].nodeValue;\n                }\n                value.value = this.getChildValue(node);\n                obj.MaxValue = value;\n            }\n        }\n    },\n    \n    /**\n     * APIMethod: write\n     * Given an configuration js object, write a CSWGetDomain request. \n     *\n     * Parameters:\n     * options - {Object} A object mapping the request.\n     *\n     * Returns:\n     * {String} A serialized CSWGetDomain request.\n     */\n    write: function(options) {\n        var node = this.writeNode(\"csw:GetDomain\", options);\n        return OpenLayers.Format.XML.prototype.write.apply(this, [node]);\n    },\n\n    /**\n     * Property: writers\n     * As a compliment to the readers property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: {\n        \"csw\": {\n            \"GetDomain\": function(options) {\n                var node = this.createElementNSPlus(\"csw:GetDomain\", {\n                    attributes: {\n                        service: \"CSW\",\n                        version: this.version\n                    }\n                });\n                if (options.PropertyName || this.PropertyName) {\n                    this.writeNode(\n                        \"csw:PropertyName\",\n                        options.PropertyName || this.PropertyName,\n                        node\n                    );\n                } else if (options.ParameterName || this.ParameterName) {\n                    this.writeNode(\n                        \"csw:ParameterName\",\n                        options.ParameterName || this.ParameterName,\n                        node\n                    );\n                }\n                this.readChildNodes(node, options);\n                return node;\n            },\n            \"PropertyName\": function(value) {\n                var node = this.createElementNSPlus(\"csw:PropertyName\", {\n                    value: value\n                });\n                return node;\n            },\n            \"ParameterName\": function(value) {\n                var node = this.createElementNSPlus(\"csw:ParameterName\", {\n                    value: value\n                });\n                return node;\n            }\n        }\n    },\n   \n    CLASS_NAME: \"OpenLayers.Format.CSWGetDomain.v2_0_2\" \n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format.js\n */\n\n/**\n * Class: OpenLayers.Format.CSWGetRecords\n * Default version is 2.0.2.\n *\n * Returns:\n * {<OpenLayers.Format>} A CSWGetRecords format of the given version.\n */\nOpenLayers.Format.CSWGetRecords = function(options) {\n    options = OpenLayers.Util.applyDefaults(\n        options, OpenLayers.Format.CSWGetRecords.DEFAULTS\n    );\n    var cls = OpenLayers.Format.CSWGetRecords[\"v\"+options.version.replace(/\\./g, \"_\")];\n    if(!cls) {\n        throw \"Unsupported CSWGetRecords version: \" + options.version;\n    }\n    return new cls(options);\n};\n\n/**\n * Constant: DEFAULTS\n * {Object} Default properties for the CSWGetRecords format.\n */\nOpenLayers.Format.CSWGetRecords.DEFAULTS = {\n    \"version\": \"2.0.2\"\n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML.js\n * @requires OpenLayers/Format/CSWGetRecords.js\n * @requires OpenLayers/Format/Filter/v1_0_0.js\n * @requires OpenLayers/Format/Filter/v1_1_0.js\n * @requires OpenLayers/Format/OWSCommon/v1_0_0.js\n */\n\n/**\n * Class: OpenLayers.Format.CSWGetRecords.v2_0_2\n *     A format for creating CSWGetRecords v2.0.2 transactions. \n *     Create a new instance with the\n *     <OpenLayers.Format.CSWGetRecords.v2_0_2> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.CSWGetRecords.v2_0_2 = OpenLayers.Class(OpenLayers.Format.XML, {\n    \n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        csw: \"http://www.opengis.net/cat/csw/2.0.2\",\n        dc: \"http://purl.org/dc/elements/1.1/\",\n        dct: \"http://purl.org/dc/terms/\",\n        gmd: \"http://www.isotc211.org/2005/gmd\",\n        geonet: \"http://www.fao.org/geonetwork\",\n        ogc: \"http://www.opengis.net/ogc\",\n        ows: \"http://www.opengis.net/ows\",\n        xlink: \"http://www.w3.org/1999/xlink\",\n        xsi: \"http://www.w3.org/2001/XMLSchema-instance\",\n        xmlns: \"http://www.w3.org/2000/xmlns/\"\n    },\n    \n    /**\n     * Property: defaultPrefix\n     * {String} The default prefix (used by Format.XML).\n     */\n    defaultPrefix: \"csw\",\n    \n    /**\n     * Property: version\n     * {String} CSW version number.\n     */\n    version: \"2.0.2\",\n    \n    /**\n     * Property: schemaLocation\n     * {String} http://www.opengis.net/cat/csw/2.0.2\n     *   http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd\n     */\n    schemaLocation: \"http://www.opengis.net/cat/csw/2.0.2 http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd\",\n\n    /**\n     * APIProperty: requestId\n     * {String} Value of the requestId attribute of the GetRecords element.\n     */\n    requestId: null,\n\n    /**\n     * APIProperty: resultType\n     * {String} Value of the resultType attribute of the GetRecords element,\n     *     specifies the result type in the GetRecords response, \"hits\" is\n     *     the default.\n     */\n    resultType: null,\n\n    /**\n     * APIProperty: outputFormat\n     * {String} Value of the outputFormat attribute of the GetRecords element,\n     *     specifies the format of the GetRecords response,\n     *     \"application/xml\" is the default.\n     */\n    outputFormat: null,\n\n    /**\n     * APIProperty: outputSchema\n     * {String} Value of the outputSchema attribute of the GetRecords element,\n     *     specifies the schema of the GetRecords response.\n     */\n    outputSchema: null,\n\n    /**\n     * APIProperty: startPosition\n     * {String} Value of the startPosition attribute of the GetRecords element,\n     *     specifies the start position (offset+1) for the GetRecords response,\n     *     1 is the default.\n     */\n    startPosition: null,\n\n    /**\n     * APIProperty: maxRecords\n     * {String} Value of the maxRecords attribute of the GetRecords element,\n     *     specifies the maximum number of records in the GetRecords response,\n     *     10 is the default.\n     */\n    maxRecords: null,\n\n    /**\n     * APIProperty: DistributedSearch\n     * {String} Value of the csw:DistributedSearch element, used when writing\n     *     a csw:GetRecords document.\n     */\n    DistributedSearch: null,\n\n    /**\n     * APIProperty: ResponseHandler\n     * {Array({String})} Values of the csw:ResponseHandler elements, used when\n     *     writting a csw:GetRecords document.\n     */\n    ResponseHandler: null,\n\n    /**\n     * APIProperty: Query\n     * {String} Value of the csw:Query element, used when writing a csw:GetRecords\n     *     document.\n     */\n    Query: null,\n\n    /**\n     * Property: regExes\n     * Compiled regular expressions for manipulating strings.\n     */\n    regExes: {\n        trimSpace: (/^\\s*|\\s*$/g),\n        removeSpace: (/\\s*/g),\n        splitSpace: (/\\s+/),\n        trimComma: (/\\s*,\\s*/g)\n    },\n\n    /**\n     * Constructor: OpenLayers.Format.CSWGetRecords.v2_0_2\n     * A class for parsing and generating CSWGetRecords v2.0.2 transactions.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     *\n     * Valid options properties (documented as class properties):\n     * - requestId\n     * - resultType\n     * - outputFormat\n     * - outputSchema\n     * - startPosition\n     * - maxRecords\n     * - DistributedSearch\n     * - ResponseHandler\n     * - Query\n     */\n    initialize: function(options) {\n        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);\n    },\n\n    /**\n     * APIMethod: read\n     * Parse the response from a GetRecords request.\n     */\n    read: function(data) {\n        if(typeof data == \"string\") { \n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n        if(data && data.nodeType == 9) {\n            data = data.documentElement;\n        }\n        var obj = {};\n        this.readNode(data, obj);\n        return obj;\n    },\n    \n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"csw\": {\n            \"GetRecordsResponse\": function(node, obj) {\n                obj.records = [];\n                this.readChildNodes(node, obj);\n                var version = this.getAttributeNS(node, \"\", 'version');\n                if (version != \"\") {\n                    obj.version = version;\n                }\n            },\n            \"RequestId\": function(node, obj) {\n                obj.RequestId = this.getChildValue(node);\n            },\n            \"SearchStatus\": function(node, obj) {\n                obj.SearchStatus = {};\n                var timestamp = this.getAttributeNS(node, \"\", 'timestamp');\n                if (timestamp != \"\") {\n                    obj.SearchStatus.timestamp = timestamp;\n                }\n            },\n            \"SearchResults\": function(node, obj) {\n                this.readChildNodes(node, obj);\n                var attrs = node.attributes;\n                var SearchResults = {};\n                for(var i=0, len=attrs.length; i<len; ++i) {\n                    if ((attrs[i].name == \"numberOfRecordsMatched\") ||\n                        (attrs[i].name == \"numberOfRecordsReturned\") ||\n                        (attrs[i].name == \"nextRecord\")) {\n                        SearchResults[attrs[i].name] = parseInt(attrs[i].nodeValue);\n                    } else {\n                        SearchResults[attrs[i].name] = attrs[i].nodeValue;\n                    }\n                }\n                obj.SearchResults = SearchResults;\n            },\n            \"SummaryRecord\": function(node, obj) {\n                var record = {type: \"SummaryRecord\"};\n                this.readChildNodes(node, record);\n                obj.records.push(record);\n            },\n            \"BriefRecord\": function(node, obj) {\n                var record = {type: \"BriefRecord\"};\n                this.readChildNodes(node, record);\n                obj.records.push(record);\n            },\n            \"DCMIRecord\": function(node, obj) {\n                var record = {type: \"DCMIRecord\"};\n                this.readChildNodes(node, record);\n                obj.records.push(record);\n            },\n            \"Record\": function(node, obj) {\n                var record = {type: \"Record\"};\n                this.readChildNodes(node, record);\n                obj.records.push(record);\n            },\n            \"*\": function(node, obj) {\n                var name = node.localName || node.nodeName.split(\":\").pop();\n                obj[name] = this.getChildValue(node);\n            }\n        },\n        \"geonet\": {\n            \"info\": function(node, obj) {\n                var gninfo = {};\n                this.readChildNodes(node, gninfo);\n                obj.gninfo = gninfo;\n            }\n        },\n        \"dc\": {\n            // audience, contributor, coverage, creator, date, description, format,\n            // identifier, language, provenance, publisher, relation, rights,\n            // rightsHolder, source, subject, title, type, URI\n            \"*\": function(node, obj) {\n                var name = node.localName || node.nodeName.split(\":\").pop();\n                if (!(OpenLayers.Util.isArray(obj[name]))) {\n                    obj[name] = [];\n                }\n                var dc_element = {};\n                var attrs = node.attributes;\n                for(var i=0, len=attrs.length; i<len; ++i) {\n                    dc_element[attrs[i].name] = attrs[i].nodeValue;\n                }\n                dc_element.value = this.getChildValue(node);\n                if (dc_element.value != \"\") {\n                    obj[name].push(dc_element);\n                }\n            }\n        },\n        \"dct\": {\n            // abstract, modified, spatial\n            \"*\": function(node, obj) {\n                var name = node.localName || node.nodeName.split(\":\").pop();\n                if (!(OpenLayers.Util.isArray(obj[name]))) {\n                    obj[name] = [];\n                }\n                obj[name].push(this.getChildValue(node));\n            }\n        },\n        \"ows\": OpenLayers.Util.applyDefaults({\n            \"BoundingBox\": function(node, obj) {\n                if (obj.bounds) {\n                    obj.BoundingBox = [{crs: obj.projection, value: \n                        [\n                            obj.bounds.left, \n                            obj.bounds.bottom, \n                            obj.bounds.right, \n                            obj.bounds.top\n                    ]\n                    }];\n                    delete obj.projection;\n                    delete obj.bounds;\n                }\n                OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers[\"ows\"][\"BoundingBox\"].apply(\n                    this, arguments);\n            }\n        }, OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers[\"ows\"])\n    },\n    \n    /**\n     * Method: write\n     * Given an configuration js object, write a CSWGetRecords request. \n     *\n     * Parameters:\n     * options - {Object} A object mapping the request.\n     *\n     * Returns:\n     * {String} A serialized CSWGetRecords request.\n     */\n    write: function(options) {\n        var node = this.writeNode(\"csw:GetRecords\", options);\n        this.setAttributeNS(\n            node, this.namespaces.xmlns,\n            \"xmlns:gmd\", this.namespaces.gmd\n        );\n        return OpenLayers.Format.XML.prototype.write.apply(this, [node]);\n    },\n\n    /**\n     * Property: writers\n     * As a compliment to the readers property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: {\n        \"csw\": {\n            \"GetRecords\": function(options) {\n                if (!options) {\n                    options = {};\n                }\n                var node = this.createElementNSPlus(\"csw:GetRecords\", {\n                    attributes: {\n                        service: \"CSW\",\n                        version: this.version,\n                        requestId: options.requestId || this.requestId,\n                        resultType: options.resultType || this.resultType,\n                        outputFormat: options.outputFormat || this.outputFormat,\n                        outputSchema: options.outputSchema || this.outputSchema,\n                        startPosition: options.startPosition || this.startPosition,\n                        maxRecords: options.maxRecords || this.maxRecords\n                    }\n                });\n                if (options.DistributedSearch || this.DistributedSearch) {\n                    this.writeNode(\n                        \"csw:DistributedSearch\",\n                        options.DistributedSearch || this.DistributedSearch,\n                        node\n                    );\n                }\n                var ResponseHandler = options.ResponseHandler || this.ResponseHandler;\n                if (OpenLayers.Util.isArray(ResponseHandler) && ResponseHandler.length > 0) {\n                    // ResponseHandler must be a non-empty array\n                    for(var i=0, len=ResponseHandler.length; i<len; i++) {\n                        this.writeNode(\n                            \"csw:ResponseHandler\",\n                            ResponseHandler[i],\n                            node\n                        );\n                    }\n                }\n                this.writeNode(\"Query\", options.Query || this.Query, node);\n                return node;\n            },\n            \"DistributedSearch\": function(options) {\n                var node = this.createElementNSPlus(\"csw:DistributedSearch\", {\n                    attributes: {\n                        hopCount: options.hopCount\n                    }\n                });\n                return node;\n            },\n            \"ResponseHandler\": function(options) {\n                var node = this.createElementNSPlus(\"csw:ResponseHandler\", {\n                    value: options.value\n                });\n                return node;\n            },\n            \"Query\": function(options) {\n                if (!options) {\n                    options = {};\n                }\n                var node = this.createElementNSPlus(\"csw:Query\", {\n                    attributes: {\n                        typeNames: options.typeNames || \"csw:Record\"\n                    }\n                });\n                var ElementName = options.ElementName;\n                if (OpenLayers.Util.isArray(ElementName) && ElementName.length > 0) {\n                    // ElementName must be a non-empty array\n                    for(var i=0, len=ElementName.length; i<len; i++) {\n                        this.writeNode(\n                            \"csw:ElementName\",\n                            ElementName[i],\n                            node\n                        );\n                    }\n                } else {\n                    this.writeNode(\n                        \"csw:ElementSetName\",\n                        options.ElementSetName || {value: 'summary'},\n                        node\n                    );\n                }\n                if (options.Constraint) {\n                    this.writeNode(\n                        \"csw:Constraint\",\n                        options.Constraint,\n                        node\n                    );\n                }\n                if (options.SortBy) {\n                    this.writeNode(\n                        \"ogc:SortBy\",\n                        options.SortBy,\n                        node\n                    );\n                }\n                return node;\n            },\n            \"ElementName\": function(options) {\n                var node = this.createElementNSPlus(\"csw:ElementName\", {\n                    value: options.value\n                });\n                return node;\n            },\n            \"ElementSetName\": function(options) {\n                var node = this.createElementNSPlus(\"csw:ElementSetName\", {\n                    attributes: {\n                        typeNames: options.typeNames\n                    },\n                    value: options.value\n                });\n                return node;\n            },\n            \"Constraint\": function(options) {\n                var node = this.createElementNSPlus(\"csw:Constraint\", {\n                    attributes: {\n                        version: options.version\n                    }\n                });\n                if (options.Filter) {\n                    var format = new OpenLayers.Format.Filter({\n                        version: options.version\n                    });\n                    node.appendChild(format.write(options.Filter));\n                } else if (options.CqlText) {\n                    var child = this.createElementNSPlus(\"CqlText\", {\n                        value: options.CqlText.value\n                    });\n                    node.appendChild(child);\n                }\n                return node;\n            }\n        },\n        \"ogc\": OpenLayers.Format.Filter.v1_1_0.prototype.writers[\"ogc\"]\n    },\n   \n    CLASS_NAME: \"OpenLayers.Format.CSWGetRecords.v2_0_2\" \n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format.js\n */\n\n/**\n * Function: OpenLayers.Format.WFST\n * Used to create a versioned WFS protocol.  Default version is 1.0.0.\n *\n * Returns:\n * {<OpenLayers.Format>} A WFST format of the given version.\n */\nOpenLayers.Format.WFST = function(options) {\n    options = OpenLayers.Util.applyDefaults(\n        options, OpenLayers.Format.WFST.DEFAULTS\n    );\n    var cls = OpenLayers.Format.WFST[\"v\"+options.version.replace(/\\./g, \"_\")];\n    if(!cls) {\n        throw \"Unsupported WFST version: \" + options.version;\n    }\n    return new cls(options);\n};\n\n/**\n * Constant: OpenLayers.Format.WFST.DEFAULTS\n * {Object} Default properties for the WFST format.\n */\nOpenLayers.Format.WFST.DEFAULTS = {\n    \"version\": \"1.0.0\"\n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML.js\n * @requires OpenLayers/Format/WFST.js\n * @requires OpenLayers/Filter/Spatial.js\n * @requires OpenLayers/Filter/FeatureId.js\n */\n\n/**\n * Class: OpenLayers.Format.WFST.v1\n * Superclass for WFST parsers.\n *\n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.WFST.v1 = OpenLayers.Class(OpenLayers.Format.XML, {\n    \n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        xlink: \"http://www.w3.org/1999/xlink\",\n        xsi: \"http://www.w3.org/2001/XMLSchema-instance\",\n        wfs: \"http://www.opengis.net/wfs\",\n        gml: \"http://www.opengis.net/gml\",\n        ogc: \"http://www.opengis.net/ogc\",\n        ows: \"http://www.opengis.net/ows\",\n        xmlns: \"http://www.w3.org/2000/xmlns/\"\n    },\n    \n    /**\n     * Property: defaultPrefix\n     */\n    defaultPrefix: \"wfs\",\n\n    /**\n     * Property: version\n     * {String} WFS version number.\n     */\n    version: null,\n\n    /**\n     * Property: schemaLocation\n     * {String} Schema location for a particular minor version.\n     */\n    schemaLocations: null,\n    \n    /**\n     * APIProperty: srsName\n     * {String} URI for spatial reference system.\n     */\n    srsName: null,\n\n    /**\n     * APIProperty: extractAttributes\n     * {Boolean} Extract attributes from GML.  Default is true.\n     */\n    extractAttributes: true,\n    \n    /**\n     * APIProperty: xy\n     * {Boolean} Order of the GML coordinate true:(x,y) or false:(y,x)\n     * Changing is not recommended, a new Format should be instantiated.\n     */ \n    xy: true,\n\n    /**\n     * Property: stateName\n     * {Object} Maps feature states to node names.\n     */\n    stateName: null,\n    \n    /**\n     * Constructor: OpenLayers.Format.WFST.v1\n     * Instances of this class are not created directly.  Use the\n     *     <OpenLayers.Format.WFST.v1_0_0> or <OpenLayers.Format.WFST.v1_1_0>\n     *     constructor instead.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    initialize: function(options) {\n        // set state name mapping\n        this.stateName = {};\n        this.stateName[OpenLayers.State.INSERT] = \"wfs:Insert\";\n        this.stateName[OpenLayers.State.UPDATE] = \"wfs:Update\";\n        this.stateName[OpenLayers.State.DELETE] = \"wfs:Delete\";\n        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);\n    },\n    \n    /**\n     * Method: getSrsName\n     */\n    getSrsName: function(feature, options) {\n        var srsName = options && options.srsName;\n        if(!srsName) {\n            if(feature && feature.layer) {\n                srsName = feature.layer.projection.getCode();\n            } else {\n                srsName = this.srsName;\n            }\n        }\n        return srsName;\n    },\n\n    /**\n     * APIMethod: read\n     * Parse the response from a transaction.  Because WFS is split into\n     *     Transaction requests (create, update, and delete) and GetFeature\n     *     requests (read), this method handles parsing of both types of\n     *     responses.\n     *\n     * Parameters:\n     * data - {String | Document} The WFST document to read\n     * options - {Object} Options for the reader\n     *\n     * Valid options properties:\n     * output - {String} either \"features\" or \"object\". The default is\n     *     \"features\", which means that the method will return an array of\n     *     features. If set to \"object\", an object with a \"features\" property\n     *     and other properties read by the parser will be returned.\n     *\n     * Returns:\n     * {Array | Object} Output depending on the output option.\n     */\n    read: function(data, options) {\n        options = options || {};\n        OpenLayers.Util.applyDefaults(options, {\n            output: \"features\"\n        });\n        \n        if(typeof data == \"string\") { \n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n        if(data && data.nodeType == 9) {\n            data = data.documentElement;\n        }\n        var obj = {};\n        if(data) {\n            this.readNode(data, obj, true);\n        }\n        if(obj.features && options.output === \"features\") {\n            obj = obj.features;\n        }\n        return obj;\n    },\n    \n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"wfs\": {\n            \"FeatureCollection\": function(node, obj) {\n                obj.features = [];\n                this.readChildNodes(node, obj);\n            }\n        }\n    },\n    \n    /**\n     * Method: write\n     * Given an array of features, write a WFS transaction.  This assumes\n     *     the features have a state property that determines the operation\n     *     type - insert, update, or delete.\n     *\n     * Parameters:\n     * features - {Array(<OpenLayers.Feature.Vector>)} A list of features. See\n     *     below for a more detailed description of the influence of the\n     *     feature's *modified* property.\n     * options - {Object}\n     *\n     * feature.modified rules:\n     * If a feature has a modified property set, the following checks will be\n     * made before a feature's geometry or attribute is included in an Update\n     * transaction:\n     * - *modified* is not set at all: The geometry and all attributes will be\n     *     included.\n     * - *modified.geometry* is set (null or a geometry): The geometry will be\n     *     included. If *modified.attributes* is not set, all attributes will\n     *     be included.\n     * - *modified.attributes* is set: Only the attributes set in \n     *     *modified.attributes* will be included.\n     *     If *modified.geometry* is not set, the geometry will not be included.\n     *\n     * Valid options include:\n     * - *multi* {Boolean} If set to true, geometries will be casted to\n     *   Multi geometries before writing.\n     *\n     * Returns:\n     * {String} A serialized WFS transaction.\n     */\n    write: function(features, options) {\n        var node = this.writeNode(\"wfs:Transaction\", {\n            features:features,\n            options: options\n        });\n        var value = this.schemaLocationAttr();\n        if(value) {\n            this.setAttributeNS(\n                node, this.namespaces[\"xsi\"], \"xsi:schemaLocation\",  value\n            );\n        }\n        return OpenLayers.Format.XML.prototype.write.apply(this, [node]);\n    },\n    \n    /**\n     * Property: writers\n     * As a compliment to the readers property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: {\n        \"wfs\": {\n            \"GetFeature\": function(options) {\n                var node = this.createElementNSPlus(\"wfs:GetFeature\", {\n                    attributes: {\n                        service: \"WFS\",\n                        version: this.version,\n                        handle: options && options.handle,\n                        outputFormat: options && options.outputFormat,\n                        maxFeatures: options && options.maxFeatures,\n                        viewParams: options && options.viewParams,\n                        \"xsi:schemaLocation\": this.schemaLocationAttr(options)\n                    }\n                });\n                if (typeof this.featureType == \"string\") {\n                    this.writeNode(\"Query\", options, node);\n                } else {\n                    for (var i=0,len = this.featureType.length; i<len; i++) { \n                        options.featureType = this.featureType[i]; \n                        this.writeNode(\"Query\", options, node); \n                    } \n                }\n                return node;\n            },\n            \"Transaction\": function(obj) {\n                obj = obj || {};\n                var options = obj.options || {};\n                var node = this.createElementNSPlus(\"wfs:Transaction\", {\n                    attributes: {\n                        service: \"WFS\",\n                        version: this.version,\n                        handle: options.handle\n                    }\n                });\n                var i, len;\n                var features = obj.features;\n                if(features) {\n                    // temporarily re-assigning geometry types\n                    if (options.multi === true) {\n                        OpenLayers.Util.extend(this.geometryTypes, {\n                            \"OpenLayers.Geometry.Point\": \"MultiPoint\",\n                            \"OpenLayers.Geometry.LineString\": (this.multiCurve === true) ? \"MultiCurve\": \"MultiLineString\",\n                            \"OpenLayers.Geometry.Polygon\": (this.multiSurface === true) ? \"MultiSurface\" : \"MultiPolygon\"\n                        });\n                    }\n                    var name, feature;\n                    for(i=0, len=features.length; i<len; ++i) {\n                        feature = features[i];\n                        name = this.stateName[feature.state];\n                        if(name) {\n                            this.writeNode(name, {\n                                feature: feature, \n                                options: options\n                            }, node);\n                        }\n                    }\n                    // switch back to original geometry types assignment\n                    if (options.multi === true) {\n                        this.setGeometryTypes();\n                    }\n                }\n                if (options.nativeElements) {\n                    for (i=0, len=options.nativeElements.length; i<len; ++i) {\n                        this.writeNode(\"wfs:Native\", \n                            options.nativeElements[i], node);\n                    }\n                }\n                return node;\n            },\n            \"Native\": function(nativeElement) {\n                var node = this.createElementNSPlus(\"wfs:Native\", {\n                    attributes: {\n                        vendorId: nativeElement.vendorId,\n                        safeToIgnore: nativeElement.safeToIgnore\n                    },\n                    value: nativeElement.value\n                });\n                return node;\n            },\n            \"Insert\": function(obj) {\n                var feature = obj.feature;\n                var options = obj.options;\n                var node = this.createElementNSPlus(\"wfs:Insert\", {\n                    attributes: {\n                        handle: options && options.handle\n                    }\n                });\n                this.srsName = this.getSrsName(feature);\n                this.writeNode(\"feature:_typeName\", feature, node);\n                return node;\n            },\n            \"Update\": function(obj) {\n                var feature = obj.feature;\n                var options = obj.options;\n                var node = this.createElementNSPlus(\"wfs:Update\", {\n                    attributes: {\n                        handle: options && options.handle,\n                        typeName: (this.featureNS ? this.featurePrefix + \":\" : \"\") +\n                            this.featureType\n                    }\n                });\n                if(this.featureNS) {\n                    this.setAttributeNS(\n                        node, this.namespaces.xmlns,\n                        \"xmlns:\" + this.featurePrefix, this.featureNS\n                    );\n                }\n                \n                // add in geometry\n                var modified = feature.modified;\n                if (this.geometryName !== null && (!modified || modified.geometry !== undefined)) {\n                    this.srsName = this.getSrsName(feature);\n                    this.writeNode(\n                        \"Property\", {name: this.geometryName, value: feature.geometry}, node\n                    );\n                }\n        \n                // add in attributes\n                for(var key in feature.attributes) {\n                    if(feature.attributes[key] !== undefined &&\n                                (!modified || !modified.attributes ||\n                                (modified.attributes && (key in modified.attributes)))) {\n                        this.writeNode(\n                            \"Property\", {name: key, value: feature.attributes[key]}, node\n                        );\n                    }\n                }\n                \n                // add feature id filter\n                this.writeNode(\"ogc:Filter\", new OpenLayers.Filter.FeatureId({\n                    fids: [feature.fid]\n                }), node);\n        \n                return node;\n            },\n            \"Property\": function(obj) {\n                var node = this.createElementNSPlus(\"wfs:Property\");\n                this.writeNode(\"Name\", obj.name, node);\n                if(obj.value !== null) {\n                    this.writeNode(\"Value\", obj.value, node);\n                }\n                return node;\n            },\n            \"Name\": function(name) {\n                return this.createElementNSPlus(\"wfs:Name\", {value: name});\n            },\n            \"Value\": function(obj) {\n                var node;\n                if(obj instanceof OpenLayers.Geometry) {\n                    node = this.createElementNSPlus(\"wfs:Value\");\n                    var geom = this.writeNode(\"feature:_geometry\", obj).firstChild;\n                    node.appendChild(geom);\n                } else {\n                    node = this.createElementNSPlus(\"wfs:Value\", {value: obj});                \n                }\n                return node;\n            },\n            \"Delete\": function(obj) {\n                var feature = obj.feature;\n                var options = obj.options;\n                var node = this.createElementNSPlus(\"wfs:Delete\", {\n                    attributes: {\n                        handle: options && options.handle,\n                        typeName: (this.featureNS ? this.featurePrefix + \":\" : \"\") +\n                            this.featureType\n                    }\n                });\n                if(this.featureNS) {\n                    this.setAttributeNS(\n                        node, this.namespaces.xmlns,\n                        \"xmlns:\" + this.featurePrefix, this.featureNS\n                    );\n                }\n                this.writeNode(\"ogc:Filter\", new OpenLayers.Filter.FeatureId({\n                    fids: [feature.fid]\n                }), node);\n                return node;\n            }\n        }\n    },\n\n    /**\n     * Method: schemaLocationAttr\n     * Generate the xsi:schemaLocation attribute value.\n     *\n     * Returns:\n     * {String} The xsi:schemaLocation attribute or undefined if none.\n     */\n    schemaLocationAttr: function(options) {\n        options = OpenLayers.Util.extend({\n            featurePrefix: this.featurePrefix,\n            schema: this.schema\n        }, options);\n        var schemaLocations = OpenLayers.Util.extend({}, this.schemaLocations);\n        if(options.schema) {\n            schemaLocations[options.featurePrefix] = options.schema;\n        }\n        var parts = [];\n        var uri;\n        for(var key in schemaLocations) {\n            uri = this.namespaces[key];\n            if(uri) {\n                parts.push(uri + \" \" + schemaLocations[key]);\n            }\n        }\n        var value = parts.join(\" \") || undefined;\n        return value;\n    },\n    \n    /**\n     * Method: setFilterProperty\n     * Set the property of each spatial filter.\n     *\n     * Parameters:\n     * filter - {<OpenLayers.Filter>}\n     */\n    setFilterProperty: function(filter) {\n        if(filter.filters) {\n            for(var i=0, len=filter.filters.length; i<len; ++i) {\n                OpenLayers.Format.WFST.v1.prototype.setFilterProperty.call(this, filter.filters[i]);\n            }\n        } else {\n            if(filter instanceof OpenLayers.Filter.Spatial && !filter.property) {\n                // got a spatial filter without property, so set it\n                filter.property = this.geometryName;\n            }\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.WFST.v1\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/WFST/v1.js\n * @requires OpenLayers/Format/Filter/v1_0_0.js\n */\n\n/**\n * Class: OpenLayers.Format.WFST.v1_0_0\n * A format for creating WFS v1.0.0 transactions.  Create a new instance with the\n *     <OpenLayers.Format.WFST.v1_0_0> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Format.Filter.v1_0_0>\n *  - <OpenLayers.Format.WFST.v1>\n */\nOpenLayers.Format.WFST.v1_0_0 = OpenLayers.Class(\n    OpenLayers.Format.Filter.v1_0_0, OpenLayers.Format.WFST.v1, {\n\n    /**\n     * Property: version\n     * {String} WFS version number.\n     */\n    version: \"1.0.0\",\n\n    /**\n     * APIProperty: srsNameInQuery\n     * {Boolean} If true the reference system is passed in Query requests\n     *     via the \"srsName\" attribute to the \"wfs:Query\" element, this\n     *     property defaults to false as it isn't WFS 1.0.0 compliant.\n     */\n    srsNameInQuery: false,\n\n    /**\n     * Property: schemaLocations\n     * {Object} Properties are namespace aliases, values are schema locations.\n     */\n    schemaLocations: {\n        \"wfs\": \"http://schemas.opengis.net/wfs/1.0.0/WFS-transaction.xsd\"\n    },\n\n    /**\n     * Constructor: OpenLayers.Format.WFST.v1_0_0\n     * A class for parsing and generating WFS v1.0.0 transactions.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     *\n     * Valid options properties:\n     * featureType - {String} Local (without prefix) feature typeName (required).\n     * featureNS - {String} Feature namespace (optional).\n     * featurePrefix - {String} Feature namespace alias (optional - only used\n     *     if featureNS is provided).  Default is 'feature'.\n     * geometryName - {String} Name of geometry attribute.  Default is 'the_geom'.\n     */\n    initialize: function(options) {\n        OpenLayers.Format.Filter.v1_0_0.prototype.initialize.apply(this, [options]);\n        OpenLayers.Format.WFST.v1.prototype.initialize.apply(this, [options]);\n    },\n\n    /**\n     * Method: readNode\n     * Shorthand for applying one of the named readers given the node\n     *     namespace and local name.  Readers take two args (node, obj) and\n     *     generally extend or modify the second.\n     *\n     * Parameters:\n     * node - {DOMElement} The node to be read (required).\n     * obj - {Object} The object to be modified (optional).\n     * first - {Boolean} Should be set to true for the first node read. This\n     *     is usually the readNode call in the read method. Without this being\n     *     set, auto-configured properties will stick on subsequent reads.\n     *\n     * Returns:\n     * {Object} The input object, modified (or a new one if none was provided).\n     */\n    readNode: function(node, obj, first) {\n        // Not the superclass, only the mixin classes inherit from\n        // Format.GML.v2. We need this because we don't want to get readNode\n        // from the superclass's superclass, which is OpenLayers.Format.XML.\n        return OpenLayers.Format.GML.v2.prototype.readNode.apply(this, arguments);\n    },\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"wfs\": OpenLayers.Util.applyDefaults({\n            \"WFS_TransactionResponse\": function(node, obj) {\n                obj.insertIds = [];\n                obj.success = false;\n                this.readChildNodes(node, obj);\n            },\n            \"InsertResult\": function(node, container) {\n                var obj = {fids: []};\n                this.readChildNodes(node, obj);\n                container.insertIds = container.insertIds.concat(obj.fids);\n            },\n            \"TransactionResult\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"Status\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"SUCCESS\": function(node, obj) {\n                obj.success = true;\n            }\n        }, OpenLayers.Format.WFST.v1.prototype.readers[\"wfs\"]),\n        \"gml\": OpenLayers.Format.GML.v2.prototype.readers[\"gml\"],\n        \"feature\": OpenLayers.Format.GML.v2.prototype.readers[\"feature\"],\n        \"ogc\": OpenLayers.Format.Filter.v1_0_0.prototype.readers[\"ogc\"]\n    },\n\n    /**\n     * Property: writers\n     * As a compliment to the readers property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: {\n        \"wfs\": OpenLayers.Util.applyDefaults({\n            \"Query\": function(options) {\n                options = OpenLayers.Util.extend({\n                    featureNS: this.featureNS,\n                    featurePrefix: this.featurePrefix,\n                    featureType: this.featureType,\n                    srsName: this.srsName,\n                    srsNameInQuery: this.srsNameInQuery\n                }, options);\n                var prefix = options.featurePrefix;\n                var node = this.createElementNSPlus(\"wfs:Query\", {\n                    attributes: {\n                        typeName: (options.featureNS ? prefix + \":\" : \"\") +\n                            options.featureType\n                    }\n                });\n                if(options.srsNameInQuery && options.srsName) {\n                    node.setAttribute(\"srsName\", options.srsName);\n                }\n                if(options.featureNS) {\n                    this.setAttributeNS(\n                        node, this.namespaces.xmlns,\n                        \"xmlns:\" + prefix, options.featureNS\n                    );\n                }\n                if(options.propertyNames) {\n                    for(var i=0,len = options.propertyNames.length; i<len; i++) {\n                        this.writeNode(\n                            \"ogc:PropertyName\",\n                            {property: options.propertyNames[i]},\n                            node\n                        );\n                    }\n                }\n                if(options.filter) {\n                    this.setFilterProperty(options.filter);\n                    this.writeNode(\"ogc:Filter\", options.filter, node);\n                }\n                return node;\n            }\n        }, OpenLayers.Format.WFST.v1.prototype.writers[\"wfs\"]),\n        \"gml\": OpenLayers.Format.GML.v2.prototype.writers[\"gml\"],\n        \"feature\": OpenLayers.Format.GML.v2.prototype.writers[\"feature\"],\n        \"ogc\": OpenLayers.Format.Filter.v1_0_0.prototype.writers[\"ogc\"]\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.WFST.v1_0_0\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/WFST/v1.js\n * @requires OpenLayers/Format/Filter/v1_1_0.js\n * @requires OpenLayers/Format/OWSCommon/v1_0_0.js\n */\n\n/**\n * Class: OpenLayers.Format.WFST.v1_1_0\n * A format for creating WFS v1.1.0 transactions.  Create a new instance with the\n *     <OpenLayers.Format.WFST.v1_1_0> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Format.Filter.v1_1_0>\n *  - <OpenLayers.Format.WFST.v1>\n */\nOpenLayers.Format.WFST.v1_1_0 = OpenLayers.Class(\n    OpenLayers.Format.Filter.v1_1_0, OpenLayers.Format.WFST.v1, {\n    \n    /**\n     * Property: version\n     * {String} WFS version number.\n     */\n    version: \"1.1.0\",\n    \n    /**\n     * Property: schemaLocations\n     * {Object} Properties are namespace aliases, values are schema locations.\n     */\n    schemaLocations: {\n        \"wfs\": \"http://schemas.opengis.net/wfs/1.1.0/wfs.xsd\"\n    },\n    \n    /**\n     * Constructor: OpenLayers.Format.WFST.v1_1_0\n     * A class for parsing and generating WFS v1.1.0 transactions.\n     *\n     * To read additional information like hit count (numberOfFeatures) from\n     * the  FeatureCollection, call the <OpenLayers.Format.WFST.v1.read> method\n     * with {output: \"object\"} as 2nd argument. Note that it is possible to\n     * just request the hit count from a WFS 1.1.0 server with the\n     * resultType=\"hits\" request parameter.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     *\n     * Valid options properties:\n     * featureType - {String} Local (without prefix) feature typeName (required).\n     * featureNS - {String} Feature namespace (optional).\n     * featurePrefix - {String} Feature namespace alias (optional - only used\n     *     if featureNS is provided).  Default is 'feature'.\n     * geometryName - {String} Name of geometry attribute.  Default is 'the_geom'.\n     */\n    initialize: function(options) {\n        OpenLayers.Format.Filter.v1_1_0.prototype.initialize.apply(this, [options]);\n        OpenLayers.Format.WFST.v1.prototype.initialize.apply(this, [options]);\n    },\n    \n    /**\n     * Method: readNode\n     * Shorthand for applying one of the named readers given the node\n     *     namespace and local name.  Readers take two args (node, obj) and\n     *     generally extend or modify the second.\n     *\n     * Parameters:\n     * node - {DOMElement} The node to be read (required).\n     * obj - {Object} The object to be modified (optional).\n     * first - {Boolean} Should be set to true for the first node read. This\n     *     is usually the readNode call in the read method. Without this being\n     *     set, auto-configured properties will stick on subsequent reads.\n     *\n     * Returns:\n     * {Object} The input object, modified (or a new one if none was provided).\n     */\n    readNode: function(node, obj, first) {\n        // Not the superclass, only the mixin classes inherit from\n        // Format.GML.v3. We need this because we don't want to get readNode\n        // from the superclass's superclass, which is OpenLayers.Format.XML.\n        return OpenLayers.Format.GML.v3.prototype.readNode.apply(this, arguments);\n    },\n    \n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"wfs\": OpenLayers.Util.applyDefaults({\n            \"FeatureCollection\": function(node, obj) {\n                obj.numberOfFeatures = parseInt(node.getAttribute(\n                    \"numberOfFeatures\"));\n                OpenLayers.Format.WFST.v1.prototype.readers[\"wfs\"][\"FeatureCollection\"].apply(\n                    this, arguments);\n            },\n            \"TransactionResponse\": function(node, obj) {\n                obj.insertIds = [];\n                obj.success = false;\n                this.readChildNodes(node, obj);\n            },\n            \"TransactionSummary\": function(node, obj) {\n                // this is a limited test of success\n                obj.success = true;\n            },\n            \"InsertResults\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"Feature\": function(node, container) {\n                var obj = {fids: []};\n                this.readChildNodes(node, obj);\n                container.insertIds.push(obj.fids[0]);\n            }\n        }, OpenLayers.Format.WFST.v1.prototype.readers[\"wfs\"]),\n        \"gml\": OpenLayers.Format.GML.v3.prototype.readers[\"gml\"],\n        \"feature\": OpenLayers.Format.GML.v3.prototype.readers[\"feature\"],\n        \"ogc\": OpenLayers.Format.Filter.v1_1_0.prototype.readers[\"ogc\"],\n        \"ows\": OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers[\"ows\"]\n    },\n\n    /**\n     * Property: writers\n     * As a compliment to the readers property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: {\n        \"wfs\": OpenLayers.Util.applyDefaults({\n            \"GetFeature\": function(options) {\n                var node = OpenLayers.Format.WFST.v1.prototype.writers[\"wfs\"][\"GetFeature\"].apply(this, arguments);\n                options && this.setAttributes(node, {\n                    resultType: options.resultType,\n                    startIndex: options.startIndex,\n                    count: options.count\n                });\n                return node;\n            },\n            \"Query\": function(options) {\n                options = OpenLayers.Util.extend({\n                    featureNS: this.featureNS,\n                    featurePrefix: this.featurePrefix,\n                    featureType: this.featureType,\n                    srsName: this.srsName\n                }, options);\n                var prefix = options.featurePrefix;\n                var node = this.createElementNSPlus(\"wfs:Query\", {\n                    attributes: {\n                        typeName: (options.featureNS ? prefix + \":\" : \"\") +\n                            options.featureType,\n                        srsName: options.srsName\n                    }\n                });\n                if(options.featureNS) {\n                    this.setAttributeNS(node, this.namespaces.xmlns,\n                        \"xmlns:\" + prefix, options.featureNS);\n                }\n                if(options.propertyNames) {\n                    for(var i=0,len = options.propertyNames.length; i<len; i++) {\n                        this.writeNode(\n                            \"wfs:PropertyName\", \n                            {property: options.propertyNames[i]},\n                            node\n                        );\n                    }\n                }\n                if(options.filter) {\n                    OpenLayers.Format.WFST.v1_1_0.prototype.setFilterProperty.call(this, options.filter);\n                    this.writeNode(\"ogc:Filter\", options.filter, node);\n                }\n                return node;\n            },\n            \"PropertyName\": function(obj) {\n                return this.createElementNSPlus(\"wfs:PropertyName\", {\n                    value: obj.property\n                });\n            }            \n        }, OpenLayers.Format.WFST.v1.prototype.writers[\"wfs\"]),\n        \"gml\": OpenLayers.Format.GML.v3.prototype.writers[\"gml\"],\n        \"feature\": OpenLayers.Format.GML.v3.prototype.writers[\"feature\"],\n        \"ogc\": OpenLayers.Format.Filter.v1_1_0.prototype.writers[\"ogc\"]\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.WFST.v1_1_0\" \n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/WFST/v1.js\n * @requires OpenLayers/Format/Filter/v2_0_0.js\n * @requires OpenLayers/Format/OWSCommon/v1_0_0.js\n */\n\n/**\n * Class: OpenLayers.Format.WFST.v2_0_0\n * A format for creating WFS v2.0.0 transactions.  Create a new instance with the\n *     <OpenLayers.Format.WFST.v2_0_0> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Format.Filter.v2_0_0>\n *  - <OpenLayers.Format.WFST.v1>\n */\nOpenLayers.Format.WFST.v2_0_0 = OpenLayers.Class(\n    OpenLayers.Format.Filter.v2_0_0, OpenLayers.Format.WFST.v1, {\n    \n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        xlink: \"http://www.w3.org/1999/xlink\",\n        xsi: \"http://www.w3.org/2001/XMLSchema-instance\",\n        wfs: \"http://www.opengis.net/wfs/2.0\",\n        gml: \"http://www.opengis.net/gml/3.2\",\n        fes: \"http://www.opengis.net/fes/2.0\",\n        xmlns: \"http://www.w3.org/2000/xmlns/\"\n    },\n        \n    /**\n     * Property: version\n     * {String} WFS version number.\n     */\n    version: \"2.0.0\",\n    \n    /**\n     * Property: schemaLocations\n     * {Object} Properties are namespace aliases, values are schema locations.\n     */\n    schemaLocations: {\n        \"wfs\": \"http://schemas.opengis.net/wfs/2.0/wfs.xsd\"\n    },\n\n    /**\n     * Constructor: OpenLayers.Format.WFST.v2_0_0\n     * A class for parsing and generating WFS v2.0.0 transactions.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     *\n     * Valid options properties:\n     * featureType - {String} Local (without prefix) feature typeNames (required).\n     * featureNS - {String} Feature namespace (optional).\n     * featurePrefix - {String} Feature namespace alias (optional - only used\n     *     if featureNS is provided).  Default is 'feature'.\n     * geometryName - {String} Name of geometry attribute.  Default is 'the_geom'.\n     */\n    initialize: function(options) {\n        OpenLayers.Format.Filter.v2_0_0.prototype.initialize.apply(this, [options]);\n        OpenLayers.Format.WFST.v1.prototype.initialize.apply(this, [options]);\n    },\n    \n    /**\n     * Method: readNode\n     * Shorthand for applying one of the named readers given the node\n     *     namespace and local name.  Readers take two args (node, obj) and\n     *     generally extend or modify the second.\n     *\n     * Parameters:\n     * node - {DOMElement} The node to be read (required).\n     * obj - {Object} The object to be modified (optional).\n     * first - {Boolean} Should be set to true for the first node read. This\n     *     is usually the readNode call in the read method. Without this being\n     *     set, auto-configured properties will stick on subsequent reads.\n     *\n     * Returns:\n     * {Object} The input object, modified (or a new one if none was provided).\n     */\n    readNode: function(node, obj, first) {\n        // Not the superclass, only the mixin classes inherit from\n        // Format.GML.v2. We need this because we don't want to get readNode\n        // from the superclass's superclass, which is OpenLayers.Format.XML.\n        return OpenLayers.Format.GML.v3.prototype.readNode.apply(this, arguments);\n    },\n    \n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"wfs\": OpenLayers.Util.applyDefaults({\n            \"FeatureCollection\": function(node, obj) {\n                obj.numberReturned = parseInt(node.getAttribute(\n                    \"numberReturned\"));\n                obj.numberMatched = parseInt(node.getAttribute(\n                \"numberMatched\"));\n                OpenLayers.Format.WFST.v1.prototype.readers[\"wfs\"][\"FeatureCollection\"].apply(\n                    this, arguments);\n            },\n            \"TransactionResponse\": function(node, obj) {\n                obj.insertIds = [];\n                obj.success = false;\n                this.readChildNodes(node, obj);\n            },\n            \"TransactionSummary\": function(node, obj) {\n                obj.success = true;\n            },\n            \"InsertResults\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"Feature\": function(node, container) {\n                var obj = {fids: []};\n                this.readChildNodes(node, obj);\n                container.insertIds.push(obj.fids[0]);\n            },\n            \"member\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"boundedBy\": function(node, obj) {\n                var container = {};\n                this.readChildNodes(node, container);\n                if(container.components && container.components.length > 0) {\n                    obj.bounds = container.components[0];\n                }\n            }\n\n        }, OpenLayers.Format.WFST.v1.prototype.readers[\"wfs\"]),\n        \"gml\": OpenLayers.Format.GML.v3.prototype.readers[\"gml\"],\n        \"feature\": OpenLayers.Format.GML.v3.prototype.readers[\"feature\"],\n        \"ows\": OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers[\"ows\"],\n        \"fes\": OpenLayers.Format.Filter.v2_0_0.prototype.readers[\"fes\"]\n    },\n\n    /**\n     * Property: writers\n     * As a compliment to the readers property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: {\n        \"wfs\": OpenLayers.Util.applyDefaults({\n        \t\"GetFeature\": function(options) {\n                var node = OpenLayers.Format.WFST.v1.prototype.writers[\"wfs\"][\"GetFeature\"].apply(this, arguments);\n                options && this.setAttributes(node, {\n                    resultType: options.resultType,\n                    startIndex: options.startIndex,\n                    count: options.count\n                });\n                return node;\n            },\n            \"Query\": function(options) {\n                options = OpenLayers.Util.extend({\n                    featureNS: this.featureNS,\n                    featurePrefix: this.featurePrefix,\n                    featureType: this.featureType,\n                    srsName: this.srsName\n                }, options);\n                var prefix = options.featurePrefix;\n                var node = this.createElementNSPlus(\"wfs:Query\", {\n                    attributes: {\n                        typeNames: (options.featureNS ? prefix + \":\" : \"\") +\n                            options.featureType,\n                        srsName: options.srsName\n                    }\n                });\n                if(options.featureNS) {\n                    this.setAttributeNS(\n                        node, this.namespaces.xmlns,\n                        \"xmlns:\" + prefix, options.featureNS\n                    );\n                }\n                if(options.propertyNames) {\n                    for(var i=0,len = options.propertyNames.length; i<len; i++) {\n                        this.writeNode(\n                            \"wfs:PropertyName\", \n                            {property: options.propertyNames[i]},\n                            node\n                        );\n                    }\n                }\n                if(options.filter) {\n                    this.setFilterProperty(options.filter);\n                    this.writeNode(\"fes:Filter\", options.filter, node);\n                }\n                return node;\n            },\n            \"Update\": function(obj) {\n                var feature = obj.feature;\n                var options = obj.options;\n                var node = this.createElementNSPlus(\"wfs:Update\", {\n                    attributes: {\n                        handle: options && options.handle,\n                        typeName: (this.featureNS ? this.featurePrefix + \":\" : \"\") +\n                            this.featureType\n                    }\n                });\n                if(this.featureNS) {\n                    this.setAttributeNS(\n                        node, this.namespaces.xmlns,\n                        \"xmlns:\" + this.featurePrefix, this.featureNS\n                    );\n                }\n                \n                // add in geometry\n                var modified = feature.modified;\n                if (this.geometryName !== null && (!modified || modified.geometry !== undefined)) {\n                    this.srsName = this.getSrsName(feature);\n                    this.writeNode(\n                        \"Property\", {name: this.geometryName, value: feature.geometry}, node\n                    );\n                }\n        \n                // add in attributes\n                for(var key in feature.attributes) {\n                    if(feature.attributes[key] !== undefined &&\n                                (!modified || !modified.attributes ||\n                                (modified.attributes && (key in modified.attributes)))) {\n                        this.writeNode(\n                            \"Property\", {name: key, value: feature.attributes[key]}, node\n                        );\n                    }\n                }\n                \n                // add feature id filter\n                this.writeNode(\"fes:Filter\", new OpenLayers.Filter.FeatureId({\n                    fids: [feature.fid]\n                }), node);\n        \n                return node;\n            },\n            \"Property\": function(obj) {\n                var node = this.createElementNSPlus(\"wfs:Property\");\n                this.writeNode(\"ValueReference\", obj.name, node);\n                if(obj.value !== null) {\n                    this.writeNode(\"Value\", obj.value, node);\n                }\n                return node;\n            },\n            \"PropertyName\": function(obj) {\n                return this.createElementNSPlus(\"wfs:PropertyName\", {\n                    value: obj.property\n                });\n            },\n            \"ValueReference\": function(name) {\n                return this.createElementNSPlus(\"wfs:ValueReference\", {value: name});\n            },\n            \"Delete\": function(obj) {\n                var feature = obj.feature;\n                var options = obj.options;\n                var node = this.createElementNSPlus(\"wfs:Delete\", {\n                    attributes: {\n                        handle: options && options.handle,\n                        typeName: (this.featureNS ? this.featurePrefix + \":\" : \"\") +\n                            this.featureType\n                    }\n                });\n                if(this.featureNS) {\n                    this.setAttributeNS(\n                        node, this.namespaces.xmlns,\n                        \"xmlns:\" + this.featurePrefix, this.featureNS\n                    );\n                }\n                this.writeNode(\"fes:Filter\", new OpenLayers.Filter.FeatureId({\n                    fids: [feature.fid]\n                }), node);\n                return node;\n            }\n        }, OpenLayers.Format.WFST.v1.prototype.writers[\"wfs\"]),\n        \"gml\": OpenLayers.Format.GML.v3.prototype.writers[\"gml\"],\n        \"feature\": OpenLayers.Format.GML.v3.prototype.writers[\"feature\"],\n        \"fes\": OpenLayers.Format.Filter.v2_0_0.prototype.writers[\"fes\"]\n    },\n   \n    CLASS_NAME: \"OpenLayers.Format.WFST.v2_0_0\" \n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Feature/Vector.js\n * @requires OpenLayers/Geometry/Point.js\n */\n\n/**\n * Class: OpenLayers.Format.Text\n * Read Text format. Create a new instance with the <OpenLayers.Format.Text>\n *     constructor. This reads text which is formatted like CSV text, using\n *     tabs as the seperator by default. It provides parsing of data originally\n *     used in the MapViewerService, described on the wiki. This Format is used\n *     by the <OpenLayers.Layer.Text> class.\n *\n * Inherits from:\n *  - <OpenLayers.Format>\n */\nOpenLayers.Format.Text = OpenLayers.Class(OpenLayers.Format, {\n    \n    /**\n     * APIProperty: defaultStyle\n     * defaultStyle allows one to control the default styling of the features.\n     *    It should be a symbolizer hash. By default, this is set to match the\n     *    Layer.Text behavior, which is to use the default OpenLayers Icon.\n     */\n    defaultStyle: null,\n     \n    /**\n     * APIProperty: extractStyles\n     * set to true to extract styles from the TSV files, using information\n     * from the image or icon, iconSize and iconOffset fields. This will result\n     * in features with a symbolizer (style) property set, using the\n     * default symbolizer specified in <defaultStyle>. Set to false if you\n     * wish to use a styleMap or OpenLayers.Style options to style your\n     * layer instead.\n     */\n    extractStyles: true,\n\n    /**\n     * Constructor: OpenLayers.Format.Text\n     * Create a new parser for TSV Text.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    initialize: function(options) {\n        options = options || {};\n\n        if(options.extractStyles !== false) {\n            options.defaultStyle = {\n                'externalGraphic': OpenLayers.Util.getImageLocation(\"marker.png\"),\n                'graphicWidth': 21,\n                'graphicHeight': 25,\n                'graphicXOffset': -10.5,\n                'graphicYOffset': -12.5\n            };\n        }\n        \n        OpenLayers.Format.prototype.initialize.apply(this, [options]);\n    }, \n\n    /**\n     * APIMethod: read\n     * Return a list of features from a Tab Separated Values text string.\n     * \n     * Parameters:\n     * text - {String} \n     *\n     * Returns:\n     * Array({<OpenLayers.Feature.Vector>})\n     */\n    read: function(text) {\n        var lines = text.split('\\n');\n        var columns;\n        var features = [];\n        // length - 1 to allow for trailing new line\n        for (var lcv = 0; lcv < (lines.length - 1); lcv++) {\n            var currLine = lines[lcv].replace(/^\\s*/,'').replace(/\\s*$/,'');\n        \n            if (currLine.charAt(0) != '#') { /* not a comment */\n            \n                if (!columns) {\n                    //First line is columns\n                    columns = currLine.split('\\t');\n                } else {\n                    var vals = currLine.split('\\t');\n                    var geometry = new OpenLayers.Geometry.Point(0,0);\n                    var attributes = {};\n                    var style = this.defaultStyle ? \n                        OpenLayers.Util.applyDefaults({}, this.defaultStyle) :\n                        null;  \n                    var icon, iconSize, iconOffset, overflow;\n                    var set = false;\n                    for (var valIndex = 0; valIndex < vals.length; valIndex++) {\n                        if (vals[valIndex]) {\n                            if (columns[valIndex] == 'point') {\n                                var coords = vals[valIndex].split(',');\n                                geometry.y = parseFloat(coords[0]);\n                                geometry.x = parseFloat(coords[1]);\n                                set = true;\n                            } else if (columns[valIndex] == 'lat') {\n                                geometry.y = parseFloat(vals[valIndex]);\n                                set = true;\n                            } else if (columns[valIndex] == 'lon') {\n                                geometry.x = parseFloat(vals[valIndex]);\n                                set = true;\n                            } else if (columns[valIndex] == 'title')\n                                attributes['title'] = vals[valIndex];\n                            else if (columns[valIndex] == 'image' ||\n                                     columns[valIndex] == 'icon' && style) {\n                                style['externalGraphic'] = vals[valIndex];\n                            } else if (columns[valIndex] == 'iconSize' && style) {\n                                var size = vals[valIndex].split(',');\n                                style['graphicWidth'] = parseFloat(size[0]);\n                                style['graphicHeight'] = parseFloat(size[1]);\n                            } else if (columns[valIndex] == 'iconOffset' && style) {\n                                var offset = vals[valIndex].split(',');\n                                style['graphicXOffset'] = parseFloat(offset[0]);\n                                style['graphicYOffset'] = parseFloat(offset[1]);\n                            } else if (columns[valIndex] == 'description') {\n                                attributes['description'] = vals[valIndex];\n                            } else if (columns[valIndex] == 'overflow') {\n                                attributes['overflow'] = vals[valIndex];\n                            } else {\n                                // For StyleMap filtering, allow additional\n                                // columns to be stored as attributes.\n                                attributes[columns[valIndex]] = vals[valIndex];\n                            }    \n                        }\n                    }\n                    if (set) {\n                      if (this.internalProjection && this.externalProjection) {\n                          geometry.transform(this.externalProjection, \n                                             this.internalProjection); \n                      }\n                      var feature = new OpenLayers.Feature.Vector(geometry, attributes, style);\n                      features.push(feature);\n                    }\n                }\n            }\n        }\n        return features;\n    },   \n\n    CLASS_NAME: \"OpenLayers.Format.Text\" \n});    \n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/JSON.js\n * @requires OpenLayers/Feature/Vector.js\n * @requires OpenLayers/Geometry/Point.js\n * @requires OpenLayers/Geometry/MultiPoint.js\n * @requires OpenLayers/Geometry/LineString.js\n * @requires OpenLayers/Geometry/MultiLineString.js\n * @requires OpenLayers/Geometry/Polygon.js\n * @requires OpenLayers/Geometry/MultiPolygon.js\n * @requires OpenLayers/Console.js\n */\n\n/**\n * Class: OpenLayers.Format.GeoJSON\n * Read and write GeoJSON. Create a new parser with the\n *     <OpenLayers.Format.GeoJSON> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Format.JSON>\n */\nOpenLayers.Format.GeoJSON = OpenLayers.Class(OpenLayers.Format.JSON, {\n\n    /**\n     * APIProperty: ignoreExtraDims\n     * {Boolean} Ignore dimensions higher than 2 when reading geometry\n     * coordinates.\n     */ \n    ignoreExtraDims: false,\n    \n    /**\n     * Constructor: OpenLayers.Format.GeoJSON\n     * Create a new parser for GeoJSON.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * APIMethod: read\n     * Deserialize a GeoJSON string.\n     *\n     * Parameters:\n     * json - {String} A GeoJSON string\n     * type - {String} Optional string that determines the structure of\n     *     the output.  Supported values are \"Geometry\", \"Feature\", and\n     *     \"FeatureCollection\".  If absent or null, a default of\n     *     \"FeatureCollection\" is assumed.\n     * filter - {Function} A function which will be called for every key and\n     *     value at every level of the final result. Each value will be\n     *     replaced by the result of the filter function. This can be used to\n     *     reform generic objects into instances of classes, or to transform\n     *     date strings into Date objects.\n     *\n     * Returns: \n     * {Object} The return depends on the value of the type argument. If type\n     *     is \"FeatureCollection\" (the default), the return will be an array\n     *     of <OpenLayers.Feature.Vector>. If type is \"Geometry\", the input json\n     *     must represent a single geometry, and the return will be an\n     *     <OpenLayers.Geometry>.  If type is \"Feature\", the input json must\n     *     represent a single feature, and the return will be an\n     *     <OpenLayers.Feature.Vector>.\n     */\n    read: function(json, type, filter) {\n        type = (type) ? type : \"FeatureCollection\";\n        var results = null;\n        var obj = null;\n        if (typeof json == \"string\") {\n            obj = OpenLayers.Format.JSON.prototype.read.apply(this,\n                                                              [json, filter]);\n        } else { \n            obj = json;\n        }    \n        if(!obj) {\n            OpenLayers.Console.error(\"Bad JSON: \" + json);\n        } else if(typeof(obj.type) != \"string\") {\n            OpenLayers.Console.error(\"Bad GeoJSON - no type: \" + json);\n        } else if(this.isValidType(obj, type)) {\n            switch(type) {\n                case \"Geometry\":\n                    try {\n                        results = this.parseGeometry(obj);\n                    } catch(err) {\n                        OpenLayers.Console.error(err);\n                    }\n                    break;\n                case \"Feature\":\n                    try {\n                        results = this.parseFeature(obj);\n                        results.type = \"Feature\";\n                    } catch(err) {\n                        OpenLayers.Console.error(err);\n                    }\n                    break;\n                case \"FeatureCollection\":\n                    // for type FeatureCollection, we allow input to be any type\n                    results = [];\n                    switch(obj.type) {\n                        case \"Feature\":\n                            try {\n                                results.push(this.parseFeature(obj));\n                            } catch(err) {\n                                results = null;\n                                OpenLayers.Console.error(err);\n                            }\n                            break;\n                        case \"FeatureCollection\":\n                            for(var i=0, len=obj.features.length; i<len; ++i) {\n                                try {\n                                    results.push(this.parseFeature(obj.features[i]));\n                                } catch(err) {\n                                    results = null;\n                                    OpenLayers.Console.error(err);\n                                }\n                            }\n                            break;\n                        default:\n                            try {\n                                var geom = this.parseGeometry(obj);\n                                results.push(new OpenLayers.Feature.Vector(geom));\n                            } catch(err) {\n                                results = null;\n                                OpenLayers.Console.error(err);\n                            }\n                    }\n                break;\n            }\n        }\n        return results;\n    },\n    \n    /**\n     * Method: isValidType\n     * Check if a GeoJSON object is a valid representative of the given type.\n     *\n     * Returns:\n     * {Boolean} The object is valid GeoJSON object of the given type.\n     */\n    isValidType: function(obj, type) {\n        var valid = false;\n        switch(type) {\n            case \"Geometry\":\n                if(OpenLayers.Util.indexOf(\n                    [\"Point\", \"MultiPoint\", \"LineString\", \"MultiLineString\",\n                     \"Polygon\", \"MultiPolygon\", \"Box\", \"GeometryCollection\"],\n                    obj.type) == -1) {\n                    // unsupported geometry type\n                    OpenLayers.Console.error(\"Unsupported geometry type: \" +\n                                              obj.type);\n                } else {\n                    valid = true;\n                }\n                break;\n            case \"FeatureCollection\":\n                // allow for any type to be converted to a feature collection\n                valid = true;\n                break;\n            default:\n                // for Feature types must match\n                if(obj.type == type) {\n                    valid = true;\n                } else {\n                    OpenLayers.Console.error(\"Cannot convert types from \" +\n                                              obj.type + \" to \" + type);\n                }\n        }\n        return valid;\n    },\n    \n    /**\n     * Method: parseFeature\n     * Convert a feature object from GeoJSON into an\n     *     <OpenLayers.Feature.Vector>.\n     *\n     * Parameters:\n     * obj - {Object} An object created from a GeoJSON object\n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector>} A feature.\n     */\n    parseFeature: function(obj) {\n        var feature, geometry, attributes, bbox;\n        attributes = (obj.properties) ? obj.properties : {};\n        bbox = (obj.geometry && obj.geometry.bbox) || obj.bbox;\n        try {\n            geometry = this.parseGeometry(obj.geometry);\n        } catch(err) {\n            // deal with bad geometries\n            throw err;\n        }\n        feature = new OpenLayers.Feature.Vector(geometry, attributes);\n        if(bbox) {\n            feature.bounds = OpenLayers.Bounds.fromArray(bbox);\n        }\n        if(obj.id) {\n            feature.fid = obj.id;\n        }\n        return feature;\n    },\n    \n    /**\n     * Method: parseGeometry\n     * Convert a geometry object from GeoJSON into an <OpenLayers.Geometry>.\n     *\n     * Parameters:\n     * obj - {Object} An object created from a GeoJSON object\n     *\n     * Returns: \n     * {<OpenLayers.Geometry>} A geometry.\n     */\n    parseGeometry: function(obj) {\n        if (obj == null) {\n            return null;\n        }\n        var geometry, collection = false;\n        if(obj.type == \"GeometryCollection\") {\n            if(!(OpenLayers.Util.isArray(obj.geometries))) {\n                throw \"GeometryCollection must have geometries array: \" + obj;\n            }\n            var numGeom = obj.geometries.length;\n            var components = new Array(numGeom);\n            for(var i=0; i<numGeom; ++i) {\n                components[i] = this.parseGeometry.apply(\n                    this, [obj.geometries[i]]\n                );\n            }\n            geometry = new OpenLayers.Geometry.Collection(components);\n            collection = true;\n        } else {\n            if(!(OpenLayers.Util.isArray(obj.coordinates))) {\n                throw \"Geometry must have coordinates array: \" + obj;\n            }\n            if(!this.parseCoords[obj.type.toLowerCase()]) {\n                throw \"Unsupported geometry type: \" + obj.type;\n            }\n            try {\n                geometry = this.parseCoords[obj.type.toLowerCase()].apply(\n                    this, [obj.coordinates]\n                );\n            } catch(err) {\n                // deal with bad coordinates\n                throw err;\n            }\n        }\n        // We don't reproject collections because the children are reprojected\n        // for us when they are created.\n        if (this.internalProjection && this.externalProjection && !collection) {\n            geometry.transform(this.externalProjection, \n                               this.internalProjection); \n        }                       \n        return geometry;\n    },\n    \n    /**\n     * Property: parseCoords\n     * Object with properties corresponding to the GeoJSON geometry types.\n     *     Property values are functions that do the actual parsing.\n     */\n    parseCoords: {\n        /**\n         * Method: parseCoords.point\n         * Convert a coordinate array from GeoJSON into an\n         *     <OpenLayers.Geometry>.\n         *\n         * Parameters:\n         * array - {Object} The coordinates array from the GeoJSON fragment.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry>} A geometry.\n         */\n        \"point\": function(array) {\n            if (this.ignoreExtraDims == false && \n                  array.length != 2) {\n                    throw \"Only 2D points are supported: \" + array;\n            }\n            return new OpenLayers.Geometry.Point(array[0], array[1]);\n        },\n        \n        /**\n         * Method: parseCoords.multipoint\n         * Convert a coordinate array from GeoJSON into an\n         *     <OpenLayers.Geometry>.\n         *\n         * Parameters:\n         * array - {Object} The coordinates array from the GeoJSON fragment.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry>} A geometry.\n         */\n        \"multipoint\": function(array) {\n            var points = [];\n            var p = null;\n            for(var i=0, len=array.length; i<len; ++i) {\n                try {\n                    p = this.parseCoords[\"point\"].apply(this, [array[i]]);\n                } catch(err) {\n                    throw err;\n                }\n                points.push(p);\n            }\n            return new OpenLayers.Geometry.MultiPoint(points);\n        },\n\n        /**\n         * Method: parseCoords.linestring\n         * Convert a coordinate array from GeoJSON into an\n         *     <OpenLayers.Geometry>.\n         *\n         * Parameters:\n         * array - {Object} The coordinates array from the GeoJSON fragment.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry>} A geometry.\n         */\n        \"linestring\": function(array) {\n            var points = [];\n            var p = null;\n            for(var i=0, len=array.length; i<len; ++i) {\n                try {\n                    p = this.parseCoords[\"point\"].apply(this, [array[i]]);\n                } catch(err) {\n                    throw err;\n                }\n                points.push(p);\n            }\n            return new OpenLayers.Geometry.LineString(points);\n        },\n        \n        /**\n         * Method: parseCoords.multilinestring\n         * Convert a coordinate array from GeoJSON into an\n         *     <OpenLayers.Geometry>.\n         *\n         * Parameters:\n         * array - {Object} The coordinates array from the GeoJSON fragment.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry>} A geometry.\n         */\n        \"multilinestring\": function(array) {\n            var lines = [];\n            var l = null;\n            for(var i=0, len=array.length; i<len; ++i) {\n                try {\n                    l = this.parseCoords[\"linestring\"].apply(this, [array[i]]);\n                } catch(err) {\n                    throw err;\n                }\n                lines.push(l);\n            }\n            return new OpenLayers.Geometry.MultiLineString(lines);\n        },\n        \n        /**\n         * Method: parseCoords.polygon\n         * Convert a coordinate array from GeoJSON into an\n         *     <OpenLayers.Geometry>.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry>} A geometry.\n         */\n        \"polygon\": function(array) {\n            var rings = [];\n            var r, l;\n            for(var i=0, len=array.length; i<len; ++i) {\n                try {\n                    l = this.parseCoords[\"linestring\"].apply(this, [array[i]]);\n                } catch(err) {\n                    throw err;\n                }\n                r = new OpenLayers.Geometry.LinearRing(l.components);\n                rings.push(r);\n            }\n            return new OpenLayers.Geometry.Polygon(rings);\n        },\n\n        /**\n         * Method: parseCoords.multipolygon\n         * Convert a coordinate array from GeoJSON into an\n         *     <OpenLayers.Geometry>.\n         *\n         * Parameters:\n         * array - {Object} The coordinates array from the GeoJSON fragment.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry>} A geometry.\n         */\n        \"multipolygon\": function(array) {\n            var polys = [];\n            var p = null;\n            for(var i=0, len=array.length; i<len; ++i) {\n                try {\n                    p = this.parseCoords[\"polygon\"].apply(this, [array[i]]);\n                } catch(err) {\n                    throw err;\n                }\n                polys.push(p);\n            }\n            return new OpenLayers.Geometry.MultiPolygon(polys);\n        },\n\n        /**\n         * Method: parseCoords.box\n         * Convert a coordinate array from GeoJSON into an\n         *     <OpenLayers.Geometry>.\n         *\n         * Parameters:\n         * array - {Object} The coordinates array from the GeoJSON fragment.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry>} A geometry.\n         */\n        \"box\": function(array) {\n            if(array.length != 2) {\n                throw \"GeoJSON box coordinates must have 2 elements\";\n            }\n            return new OpenLayers.Geometry.Polygon([\n                new OpenLayers.Geometry.LinearRing([\n                    new OpenLayers.Geometry.Point(array[0][0], array[0][1]),\n                    new OpenLayers.Geometry.Point(array[1][0], array[0][1]),\n                    new OpenLayers.Geometry.Point(array[1][0], array[1][1]),\n                    new OpenLayers.Geometry.Point(array[0][0], array[1][1]),\n                    new OpenLayers.Geometry.Point(array[0][0], array[0][1])\n                ])\n            ]);\n        }\n\n    },\n\n    /**\n     * APIMethod: write\n     * Serialize a feature, geometry, array of features into a GeoJSON string.\n     *\n     * Parameters:\n     * obj - {Object} An <OpenLayers.Feature.Vector>, <OpenLayers.Geometry>,\n     *     or an array of features.\n     * pretty - {Boolean} Structure the output with newlines and indentation.\n     *     Default is false.\n     *\n     * Returns:\n     * {String} The GeoJSON string representation of the input geometry,\n     *     features, or array of features.\n     */\n    write: function(obj, pretty) {\n        var geojson = {\n            \"type\": null\n        };\n        if(OpenLayers.Util.isArray(obj)) {\n            geojson.type = \"FeatureCollection\";\n            var numFeatures = obj.length;\n            geojson.features = new Array(numFeatures);\n            for(var i=0; i<numFeatures; ++i) {\n                var element = obj[i];\n                if(!(element instanceof OpenLayers.Feature.Vector)) {\n                    var msg = \"FeatureCollection only supports collections \" +\n                              \"of features: \" + element;\n                    throw msg;\n                }\n                geojson.features[i] = this.extract.feature.apply(\n                    this, [element]\n                );\n            }\n        } else if (obj.CLASS_NAME.indexOf(\"OpenLayers.Geometry\") == 0) {\n            geojson = this.extract.geometry.apply(this, [obj]);\n        } else if (obj instanceof OpenLayers.Feature.Vector) {\n            geojson = this.extract.feature.apply(this, [obj]);\n            if(obj.layer && obj.layer.projection) {\n                geojson.crs = this.createCRSObject(obj);\n            }\n        }\n        return OpenLayers.Format.JSON.prototype.write.apply(this,\n                                                            [geojson, pretty]);\n    },\n\n    /**\n     * Method: createCRSObject\n     * Create the CRS object for an object.\n     *\n     * Parameters:\n     * object - {<OpenLayers.Feature.Vector>} \n     *\n     * Returns:\n     * {Object} An object which can be assigned to the crs property\n     * of a GeoJSON object.\n     */\n    createCRSObject: function(object) {\n       var proj = object.layer.projection.toString();\n       var crs = {};\n       if (proj.match(/epsg:/i)) {\n           var code = parseInt(proj.substring(proj.indexOf(\":\") + 1));\n           if (code == 4326) {\n               crs = {\n                   \"type\": \"name\",\n                   \"properties\": {\n                       \"name\": \"urn:ogc:def:crs:OGC:1.3:CRS84\"\n                   }\n               };\n           } else {    \n               crs = {\n                   \"type\": \"name\",\n                   \"properties\": {\n                       \"name\": \"EPSG:\" + code\n                   }\n               };\n           }    \n       }\n       return crs;\n    },\n    \n    /**\n     * Property: extract\n     * Object with properties corresponding to the GeoJSON types.\n     *     Property values are functions that do the actual value extraction.\n     */\n    extract: {\n        /**\n         * Method: extract.feature\n         * Return a partial GeoJSON object representing a single feature.\n         *\n         * Parameters:\n         * feature - {<OpenLayers.Feature.Vector>}\n         *\n         * Returns:\n         * {Object} An object representing the point.\n         */\n        'feature': function(feature) {\n            var geom = this.extract.geometry.apply(this, [feature.geometry]);\n            var json = {\n                \"type\": \"Feature\",\n                \"properties\": feature.attributes,\n                \"geometry\": geom\n            };\n            if (feature.fid != null) {\n                json.id = feature.fid;\n            }\n            return json;\n        },\n        \n        /**\n         * Method: extract.geometry\n         * Return a GeoJSON object representing a single geometry.\n         *\n         * Parameters:\n         * geometry - {<OpenLayers.Geometry>}\n         *\n         * Returns:\n         * {Object} An object representing the geometry.\n         */\n        'geometry': function(geometry) {\n            if (geometry == null) {\n                return null;\n            }\n            if (this.internalProjection && this.externalProjection) {\n                geometry = geometry.clone();\n                geometry.transform(this.internalProjection, \n                                   this.externalProjection);\n            }                       \n            var geometryType = geometry.CLASS_NAME.split('.')[2];\n            var data = this.extract[geometryType.toLowerCase()].apply(this, [geometry]);\n            var json;\n            if(geometryType == \"Collection\") {\n                json = {\n                    \"type\": \"GeometryCollection\",\n                    \"geometries\": data\n                };\n            } else {\n                json = {\n                    \"type\": geometryType,\n                    \"coordinates\": data\n                };\n            }\n            \n            return json;\n        },\n\n        /**\n         * Method: extract.point\n         * Return an array of coordinates from a point.\n         *\n         * Parameters:\n         * point - {<OpenLayers.Geometry.Point>}\n         *\n         * Returns: \n         * {Array} An array of coordinates representing the point.\n         */\n        'point': function(point) {\n            return [point.x, point.y];\n        },\n\n        /**\n         * Method: extract.multipoint\n         * Return an array of point coordinates from a multipoint.\n         *\n         * Parameters:\n         * multipoint - {<OpenLayers.Geometry.MultiPoint>}\n         *\n         * Returns:\n         * {Array} An array of point coordinate arrays representing\n         *     the multipoint.\n         */\n        'multipoint': function(multipoint) {\n            var array = [];\n            for(var i=0, len=multipoint.components.length; i<len; ++i) {\n                array.push(this.extract.point.apply(this, [multipoint.components[i]]));\n            }\n            return array;\n        },\n        \n        /**\n         * Method: extract.linestring\n         * Return an array of coordinate arrays from a linestring.\n         *\n         * Parameters:\n         * linestring - {<OpenLayers.Geometry.LineString>}\n         *\n         * Returns:\n         * {Array} An array of coordinate arrays representing\n         *     the linestring.\n         */\n        'linestring': function(linestring) {\n            var array = [];\n            for(var i=0, len=linestring.components.length; i<len; ++i) {\n                array.push(this.extract.point.apply(this, [linestring.components[i]]));\n            }\n            return array;\n        },\n\n        /**\n         * Method: extract.multilinestring\n         * Return an array of linestring arrays from a linestring.\n         * \n         * Parameters:\n         * multilinestring - {<OpenLayers.Geometry.MultiLineString>}\n         * \n         * Returns:\n         * {Array} An array of linestring arrays representing\n         *     the multilinestring.\n         */\n        'multilinestring': function(multilinestring) {\n            var array = [];\n            for(var i=0, len=multilinestring.components.length; i<len; ++i) {\n                array.push(this.extract.linestring.apply(this, [multilinestring.components[i]]));\n            }\n            return array;\n        },\n        \n        /**\n         * Method: extract.polygon\n         * Return an array of linear ring arrays from a polygon.\n         *\n         * Parameters:\n         * polygon - {<OpenLayers.Geometry.Polygon>}\n         * \n         * Returns:\n         * {Array} An array of linear ring arrays representing the polygon.\n         */\n        'polygon': function(polygon) {\n            var array = [];\n            for(var i=0, len=polygon.components.length; i<len; ++i) {\n                array.push(this.extract.linestring.apply(this, [polygon.components[i]]));\n            }\n            return array;\n        },\n\n        /**\n         * Method: extract.multipolygon\n         * Return an array of polygon arrays from a multipolygon.\n         * \n         * Parameters:\n         * multipolygon - {<OpenLayers.Geometry.MultiPolygon>}\n         * \n         * Returns:\n         * {Array} An array of polygon arrays representing\n         *     the multipolygon\n         */\n        'multipolygon': function(multipolygon) {\n            var array = [];\n            for(var i=0, len=multipolygon.components.length; i<len; ++i) {\n                array.push(this.extract.polygon.apply(this, [multipolygon.components[i]]));\n            }\n            return array;\n        },\n        \n        /**\n         * Method: extract.collection\n         * Return an array of geometries from a geometry collection.\n         * \n         * Parameters:\n         * collection - {<OpenLayers.Geometry.Collection>}\n         * \n         * Returns:\n         * {Array} An array of geometry objects representing the geometry\n         *     collection.\n         */\n        'collection': function(collection) {\n            var len = collection.components.length;\n            var array = new Array(len);\n            for(var i=0; i<len; ++i) {\n                array[i] = this.extract.geometry.apply(\n                    this, [collection.components[i]]\n                );\n            }\n            return array;\n        }\n        \n\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.GeoJSON\" \n\n});     \n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML.js\n * @requires OpenLayers/Format/Context.js\n */\n\n/**\n * Class: OpenLayers.Format.WMC\n * Read and write Web Map Context documents.\n *\n * Inherits from:\n *  - <OpenLayers.Format.Context>\n */\nOpenLayers.Format.WMC = OpenLayers.Class(OpenLayers.Format.Context, {\n    \n    /**\n     * APIProperty: defaultVersion\n     * {String} Version number to assume if none found.  Default is \"1.1.0\".\n     */\n    defaultVersion: \"1.1.0\",\n\n    /**\n     * Constructor: OpenLayers.Format.WMC\n     * Create a new parser for Web Map Context documents.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    \n    /**\n     * Method: layerToContext\n     * Create a layer context object given a wms layer object.\n     *\n     * Parameters:\n     * layer - {<OpenLayers.Layer.WMS>} The layer.\n     *\n     * Returns:\n     * {Object} A layer context object.\n     */\n    layerToContext: function(layer) {\n        var parser = this.getParser();\n        var layerContext = {\n            queryable: layer.queryable,\n            visibility: layer.visibility,\n            name: layer.params[\"LAYERS\"],\n            title: layer.name,\n            \"abstract\": layer.metadata[\"abstract\"],\n            dataURL: layer.metadata.dataURL,\n            metadataURL: layer.metadataURL,\n            attribution: layer.attribution,\n            server: {\n                version: layer.params[\"VERSION\"],\n                url: layer.url\n            },\n            maxExtent: layer.maxExtent,\n            transparent: layer.params[\"TRANSPARENT\"],\n            numZoomLevels: layer.numZoomLevels,\n            units: layer.units,\n            isBaseLayer: layer.isBaseLayer,\n            opacity: layer.opacity == 1 ? undefined : layer.opacity,\n            gutter: layer.gutter == 0 ? undefined : layer.gutter,\n            displayInLayerSwitcher: layer.displayInLayerSwitcher,\n            singleTile: layer.singleTile,\n            tileSize: (layer.singleTile || !layer.tileSize) ? \n                undefined : {width: layer.tileSize.w, height: layer.tileSize.h},\n            minScale : (layer.options.resolutions ||\n                        layer.options.scales || \n                        layer.options.maxResolution || \n                        layer.options.minScale) ? \n                        layer.minScale : undefined,\n            maxScale : (layer.options.resolutions ||\n                        layer.options.scales || \n                        layer.options.minResolution || \n                        layer.options.maxScale) ? \n                        layer.maxScale : undefined,\n            formats: [],\n            styles: [],\n            srs: layer.srs,\n            dimensions: layer.dimensions\n        };\n\n\n        if (layer.metadata.servertitle) {\n            layerContext.server.title = layer.metadata.servertitle;\n        }\n\n        if (layer.metadata.formats && layer.metadata.formats.length > 0) {\n            for (var i=0, len=layer.metadata.formats.length; i<len; i++) {\n                var format = layer.metadata.formats[i];\n                layerContext.formats.push({\n                    value: format.value,\n                    current: (format.value == layer.params[\"FORMAT\"])\n                });\n            }\n        } else {\n            layerContext.formats.push({\n                value: layer.params[\"FORMAT\"],\n                current: true\n            });\n        }\n\n        if (layer.metadata.styles && layer.metadata.styles.length > 0) {\n            for (var i=0, len=layer.metadata.styles.length; i<len; i++) {\n                var style = layer.metadata.styles[i];\n                if ((style.href == layer.params[\"SLD\"]) ||\n                    (style.body == layer.params[\"SLD_BODY\"]) ||\n                    (style.name == layer.params[\"STYLES\"])) {\n                    style.current = true;\n                } else {\n                    style.current = false;\n                }\n                layerContext.styles.push(style);\n            }\n        } else {\n            layerContext.styles.push({\n                href: layer.params[\"SLD\"],\n                body: layer.params[\"SLD_BODY\"],\n                name: layer.params[\"STYLES\"] || parser.defaultStyleName,\n                title: parser.defaultStyleTitle,\n                current: true\n            });\n        }\n\n        return layerContext;\n    },\n    \n    /**\n     * Method: toContext\n     * Create a context object free from layer given a map or a\n     * context object.\n     *\n     * Parameters:\n     * obj - {<OpenLayers.Map> | Object} The map or context.\n     *\n     * Returns:\n     * {Object} A context object.\n     */\n    toContext: function(obj) {\n        var context = {};\n        var layers = obj.layers;\n        if (obj.CLASS_NAME == \"OpenLayers.Map\") {\n            var metadata = obj.metadata || {};\n            context.size = obj.getSize();\n            context.bounds = obj.getExtent();\n            context.projection = obj.projection;\n            context.title = obj.title;\n            context.keywords = metadata.keywords;\n            context[\"abstract\"] = metadata[\"abstract\"];\n            context.logo = metadata.logo;\n            context.descriptionURL = metadata.descriptionURL;\n            context.contactInformation = metadata.contactInformation;\n            context.maxExtent = obj.maxExtent;\n        } else {\n            // copy all obj properties except the \"layers\" property\n            OpenLayers.Util.applyDefaults(context, obj);\n            if (context.layers != undefined) {\n                delete(context.layers);\n            }\n        }\n\n        if (context.layersContext == undefined) {\n            context.layersContext = [];\n        }\n\n        // let's convert layers into layersContext object (if any)\n        if (layers != undefined && OpenLayers.Util.isArray(layers)) {\n            for (var i=0, len=layers.length; i<len; i++) {\n                var layer = layers[i];\n                if (layer instanceof OpenLayers.Layer.WMS) {\n                    context.layersContext.push(this.layerToContext(layer));\n                }\n            }\n        }\n        return context;\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.WMC\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/WMC.js\n * @requires OpenLayers/Format/XML.js\n */\n\n/**\n * Class: OpenLayers.Format.WMC.v1\n * Superclass for WMC version 1 parsers.\n *\n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.WMC.v1 = OpenLayers.Class(OpenLayers.Format.XML, {\n    \n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        ol: \"http://openlayers.org/context\",\n        wmc: \"http://www.opengis.net/context\",\n        sld: \"http://www.opengis.net/sld\",\n        xlink: \"http://www.w3.org/1999/xlink\",\n        xsi: \"http://www.w3.org/2001/XMLSchema-instance\"\n    },\n    \n    /**\n     * Property: schemaLocation\n     * {String} Schema location for a particular minor version.\n     */\n    schemaLocation: \"\",\n\n    /**\n     * Method: getNamespacePrefix\n     * Get the namespace prefix for a given uri from the <namespaces> object.\n     *\n     * Returns:\n     * {String} A namespace prefix or null if none found.\n     */\n    getNamespacePrefix: function(uri) {\n        var prefix = null;\n        if(uri == null) {\n            prefix = this.namespaces[this.defaultPrefix];\n        } else {\n            for(prefix in this.namespaces) {\n                if(this.namespaces[prefix] == uri) {\n                    break;\n                }\n            }\n        }\n        return prefix;\n    },\n    \n    /**\n     * Property: defaultPrefix\n     */\n    defaultPrefix: \"wmc\",\n\n    /**\n     * Property: rootPrefix\n     * {String} Prefix on the root node that maps to the context namespace URI.\n     */\n    rootPrefix: null,\n    \n    /**\n     * Property: defaultStyleName\n     * {String} Style name used if layer has no style param.  Default is \"\".\n     */\n    defaultStyleName: \"\",\n    \n    /**\n     * Property: defaultStyleTitle\n     * {String} Default style title.  Default is \"Default\".\n     */\n    defaultStyleTitle: \"Default\",\n    \n    /**\n     * Constructor: OpenLayers.Format.WMC.v1\n     * Instances of this class are not created directly.  Use the\n     *     <OpenLayers.Format.WMC> constructor instead.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    initialize: function(options) {\n        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);\n    },\n\n    /**\n     * Method: read\n     * Read capabilities data from a string, and return a list of layers. \n     * \n     * Parameters: \n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Array} List of named layers.\n     */\n    read: function(data) {\n        if(typeof data == \"string\") {\n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n        var root = data.documentElement;\n        this.rootPrefix = root.prefix;\n        var context = {\n            version: root.getAttribute(\"version\")\n        };\n        this.runChildNodes(context, root);\n        return context;\n    },\n    \n    /**\n     * Method: runChildNodes\n     */\n    runChildNodes: function(obj, node) {\n        var children = node.childNodes;\n        var childNode, processor, prefix, local;\n        for(var i=0, len=children.length; i<len; ++i) {\n            childNode = children[i];\n            if(childNode.nodeType == 1) {\n                prefix = this.getNamespacePrefix(childNode.namespaceURI);\n                local = childNode.nodeName.split(\":\").pop();\n                processor = this[\"read_\" + prefix + \"_\" + local];\n                if(processor) {\n                    processor.apply(this, [obj, childNode]);\n                }\n            }\n        }\n    },\n    \n    /**\n     * Method: read_wmc_General\n     */\n    read_wmc_General: function(context, node) {\n        this.runChildNodes(context, node);\n    },\n    \n    /**\n     * Method: read_wmc_BoundingBox\n     */\n    read_wmc_BoundingBox: function(context, node) {\n        context.projection = node.getAttribute(\"SRS\");\n        context.bounds = new OpenLayers.Bounds(\n            node.getAttribute(\"minx\"), node.getAttribute(\"miny\"),\n            node.getAttribute(\"maxx\"), node.getAttribute(\"maxy\")\n        );\n    },\n    \n    /**\n     * Method: read_wmc_LayerList\n     */\n    read_wmc_LayerList: function(context, node) {\n        // layersContext is an array containing info for each layer\n        context.layersContext = [];\n        this.runChildNodes(context, node);\n    },\n    \n    /**\n     * Method: read_wmc_Layer\n     */\n    read_wmc_Layer: function(context, node) {\n        var layerContext = {\n            visibility: (node.getAttribute(\"hidden\") != \"1\"),\n            queryable: (node.getAttribute(\"queryable\") == \"1\"),\n            formats: [],\n             styles: [],\n             metadata: {}\n        };\n\n        this.runChildNodes(layerContext, node);\n        // set properties common to multiple objects on layer options/params\n        context.layersContext.push(layerContext);\n    },\n    \n    /**\n     * Method: read_wmc_Extension\n     */\n    read_wmc_Extension: function(obj, node) {\n        this.runChildNodes(obj, node);\n    },\n\n    /**\n     * Method: read_ol_units\n     */\n    read_ol_units: function(layerContext, node) {\n        layerContext.units = this.getChildValue(node);\n    },\n    \n    /**\n     * Method: read_ol_maxExtent\n     */\n    read_ol_maxExtent: function(obj, node) {\n        var bounds = new OpenLayers.Bounds(\n            node.getAttribute(\"minx\"), node.getAttribute(\"miny\"),\n            node.getAttribute(\"maxx\"), node.getAttribute(\"maxy\")\n        );\n        obj.maxExtent = bounds;\n    },\n    \n    /**\n     * Method: read_ol_transparent\n     */\n    read_ol_transparent: function(layerContext, node) {\n        layerContext.transparent = this.getChildValue(node);\n    },\n\n    /**\n     * Method: read_ol_numZoomLevels\n     */\n    read_ol_numZoomLevels: function(layerContext, node) {\n        layerContext.numZoomLevels = parseInt(this.getChildValue(node));\n    },\n\n    /**\n     * Method: read_ol_opacity\n     */\n    read_ol_opacity: function(layerContext, node) {\n        layerContext.opacity = parseFloat(this.getChildValue(node));\n    },\n\n    /**\n     * Method: read_ol_singleTile\n     */\n    read_ol_singleTile: function(layerContext, node) {\n        layerContext.singleTile = (this.getChildValue(node) == \"true\");\n    },\n\n    /**\n     * Method: read_ol_tileSize\n     */\n    read_ol_tileSize: function(layerContext, node) {\n        var obj = {\"width\": node.getAttribute(\"width\"), \"height\": node.getAttribute(\"height\")};\n        layerContext.tileSize = obj;\n    },\n\n    /**\n     * Method: read_ol_gutter\n     */\n    read_ol_gutter: function(layerContext, node) {\n        layerContext.gutter = parseInt(this.getChildValue(node));\n    },\n\n    /**\n     * Method: read_ol_isBaseLayer\n     */\n    read_ol_isBaseLayer: function(layerContext, node) {\n        layerContext.isBaseLayer = (this.getChildValue(node) == \"true\");\n    },\n\n    /**\n     * Method: read_ol_displayInLayerSwitcher\n     */\n    read_ol_displayInLayerSwitcher: function(layerContext, node) {\n        layerContext.displayInLayerSwitcher = (this.getChildValue(node) == \"true\");\n    },\n\n    /**\n     * Method: read_ol_attribution\n     */\n    read_ol_attribution: function(obj, node) {\n        obj.attribution = {};\n        this.runChildNodes(obj.attribution, node);\n    },\n\n    /**\n     * Method: read_wmc_Server\n     */\n    read_wmc_Server: function(layerContext, node) {\n        layerContext.version = node.getAttribute(\"version\");\n         layerContext.url = this.getOnlineResource_href(node);\n         layerContext.metadata.servertitle = node.getAttribute(\"title\");\n    },\n\n    /**\n     * Method: read_wmc_FormatList\n     */\n    read_wmc_FormatList: function(layerContext, node) {\n        this.runChildNodes(layerContext, node);\n    },\n\n    /**\n     * Method: read_wmc_Format\n     */\n    read_wmc_Format: function(layerContext, node) {\n        var format = {\n            value: this.getChildValue(node)\n        };\n        if(node.getAttribute(\"current\") == \"1\") {\n            format.current = true;\n        }\n        layerContext.formats.push(format);\n    },\n    \n    /**\n     * Method: read_wmc_StyleList\n     */\n    read_wmc_StyleList: function(layerContext, node) {\n        this.runChildNodes(layerContext, node);\n    },\n\n    /**\n     * Method: read_wmc_Style\n     */\n    read_wmc_Style: function(layerContext, node) {\n        var style = {};\n        this.runChildNodes(style, node);\n        if(node.getAttribute(\"current\") == \"1\") {\n            style.current = true;\n        }\n        layerContext.styles.push(style);\n    },\n    \n    /**\n     * Method: read_wmc_SLD\n     */\n    read_wmc_SLD: function(style, node) {\n        this.runChildNodes(style, node);\n        // style either comes back with an href or a body property\n    },\n    \n    /**\n     * Method: read_sld_StyledLayerDescriptor\n     */\n    read_sld_StyledLayerDescriptor: function(sld, node) {\n        var xml = OpenLayers.Format.XML.prototype.write.apply(this, [node]);\n        sld.body = xml;\n    },\n\n    /**\n      * Method: read_sld_FeatureTypeStyle\n      */\n     read_sld_FeatureTypeStyle: function(sld, node) {\n         var xml = OpenLayers.Format.XML.prototype.write.apply(this, [node]);\n         sld.body = xml;\n     },\n\n     /**\n     * Method: read_wmc_OnlineResource\n     */\n    read_wmc_OnlineResource: function(obj, node) {\n        obj.href = this.getAttributeNS(\n            node, this.namespaces.xlink, \"href\"\n        );\n    },\n    \n    /**\n     * Method: read_wmc_Name\n     */\n    read_wmc_Name: function(obj, node) {\n        var name = this.getChildValue(node);\n        if(name) {\n            obj.name = name;\n        }\n    },\n\n    /**\n     * Method: read_wmc_Title\n     */\n    read_wmc_Title: function(obj, node) {\n        var title = this.getChildValue(node);\n        if(title) {\n            obj.title = title;\n        }\n    },\n\n    /**\n     * Method: read_wmc_MetadataURL\n     */\n    read_wmc_MetadataURL: function(layerContext, node) {\n         layerContext.metadataURL = this.getOnlineResource_href(node);\n     },\n\n     /**\n      * Method: read_wmc_KeywordList\n      */\n     read_wmc_KeywordList: function(context, node) {\n         context.keywords = [];\n         this.runChildNodes(context.keywords, node);\n    },\n\n    /**\n      * Method: read_wmc_Keyword\n      */\n     read_wmc_Keyword: function(keywords, node) {\n         keywords.push(this.getChildValue(node));\n     },\n\n     /**\n     * Method: read_wmc_Abstract\n     */\n    read_wmc_Abstract: function(obj, node) {\n        var abst = this.getChildValue(node);\n        if(abst) {\n            obj[\"abstract\"] = abst;\n        }\n    },\n    \n    /**\n      * Method: read_wmc_LogoURL\n      */\n     read_wmc_LogoURL: function(context, node) {\n         context.logo = {\n             width:  node.getAttribute(\"width\"),\n             height: node.getAttribute(\"height\"),\n             format: node.getAttribute(\"format\"),\n             href:   this.getOnlineResource_href(node)\n         };\n     },\n\n     /**\n      * Method: read_wmc_DescriptionURL\n      */\n     read_wmc_DescriptionURL: function(context, node) {\n         context.descriptionURL = this.getOnlineResource_href(node);\n     },\n\n     /**\n      * Method: read_wmc_ContactInformation\n     */\n     read_wmc_ContactInformation: function(obj, node) {\n         var contact = {};\n         this.runChildNodes(contact, node);\n         obj.contactInformation = contact;\n     },\n\n     /**\n      * Method: read_wmc_ContactPersonPrimary\n      */\n     read_wmc_ContactPersonPrimary: function(contact, node) {\n         var personPrimary = {};\n         this.runChildNodes(personPrimary, node);\n         contact.personPrimary = personPrimary;\n     },\n\n     /**\n      * Method: read_wmc_ContactPerson\n      */\n     read_wmc_ContactPerson: function(primaryPerson, node) {\n         var person = this.getChildValue(node);\n         if (person) {\n             primaryPerson.person = person;\n         }\n     },\n\n     /**\n      * Method: read_wmc_ContactOrganization\n      */\n     read_wmc_ContactOrganization: function(primaryPerson, node) {\n         var organization = this.getChildValue(node);\n         if (organization) {\n             primaryPerson.organization = organization;\n         }\n     },\n\n     /**\n      * Method: read_wmc_ContactPosition\n      */\n     read_wmc_ContactPosition: function(contact, node) {\n         var position = this.getChildValue(node);\n         if (position) {\n             contact.position = position;\n         }\n     },\n\n     /**\n      * Method: read_wmc_ContactAddress\n      */\n     read_wmc_ContactAddress: function(contact, node) {\n         var contactAddress = {};\n         this.runChildNodes(contactAddress, node);\n         contact.contactAddress = contactAddress;\n     },\n\n     /**\n      * Method: read_wmc_AddressType\n      */\n     read_wmc_AddressType: function(contactAddress, node) {\n         var type = this.getChildValue(node);\n         if (type) {\n             contactAddress.type = type;\n         }\n     },\n\n     /**\n      * Method: read_wmc_Address\n      */\n     read_wmc_Address: function(contactAddress, node) {\n         var address = this.getChildValue(node);\n         if (address) {\n             contactAddress.address = address;\n         }\n     },\n\n     /**\n      * Method: read_wmc_City\n      */\n     read_wmc_City: function(contactAddress, node) {\n         var city = this.getChildValue(node);\n         if (city) {\n             contactAddress.city = city;\n         }\n     },\n\n     /**\n      * Method: read_wmc_StateOrProvince\n      */\n     read_wmc_StateOrProvince: function(contactAddress, node) {\n         var stateOrProvince = this.getChildValue(node);\n         if (stateOrProvince) {\n             contactAddress.stateOrProvince = stateOrProvince;\n         }\n     },\n\n     /**\n      * Method: read_wmc_PostCode\n      */\n     read_wmc_PostCode: function(contactAddress, node) {\n         var postcode = this.getChildValue(node);\n         if (postcode) {\n             contactAddress.postcode = postcode;\n         }\n     },\n\n     /**\n      * Method: read_wmc_Country\n      */\n     read_wmc_Country: function(contactAddress, node) {\n         var country = this.getChildValue(node);\n         if (country) {\n             contactAddress.country = country;\n         }\n     },\n\n     /**\n      * Method: read_wmc_ContactVoiceTelephone\n      */\n     read_wmc_ContactVoiceTelephone: function(contact, node) {\n         var phone = this.getChildValue(node);\n         if (phone) {\n             contact.phone = phone;\n         }\n     },\n\n     /**\n      * Method: read_wmc_ContactFacsimileTelephone\n      */\n     read_wmc_ContactFacsimileTelephone: function(contact, node) {\n         var fax = this.getChildValue(node);\n         if (fax) {\n             contact.fax = fax;\n         }\n     },\n\n     /**\n      * Method: read_wmc_ContactElectronicMailAddress\n      */\n     read_wmc_ContactElectronicMailAddress: function(contact, node) {\n         var email = this.getChildValue(node);\n         if (email) {\n             contact.email = email;\n         }\n     },\n\n     /**\n      * Method: read_wmc_DataURL\n      */\n     read_wmc_DataURL: function(layerContext, node) {\n         layerContext.dataURL = this.getOnlineResource_href(node);\n     },\n\n     /**\n     * Method: read_wmc_LegendURL\n     */\n    read_wmc_LegendURL: function(style, node) {\n        var legend = {\n            width: node.getAttribute('width'),\n             height: node.getAttribute('height'),\n             format: node.getAttribute('format'),\n             href:   this.getOnlineResource_href(node)\n        };\n        style.legend = legend;\n    },\n    \n    /**\n      * Method: read_wmc_DimensionList\n      */\n     read_wmc_DimensionList: function(layerContext, node) {\n         layerContext.dimensions = {};\n         this.runChildNodes(layerContext.dimensions, node);\n     },\n     /**\n      * Method: read_wmc_Dimension\n      */\n     read_wmc_Dimension: function(dimensions, node) {\n         var name = node.getAttribute(\"name\").toLowerCase();\n\n         var dim = {\n             name:           name,\n             units:          node.getAttribute(\"units\")          ||  \"\",\n             unitSymbol:     node.getAttribute(\"unitSymbol\")     ||  \"\",\n             userValue:      node.getAttribute(\"userValue\")      ||  \"\",\n             nearestValue:   node.getAttribute(\"nearestValue\")   === \"1\",\n             multipleValues: node.getAttribute(\"multipleValues\") === \"1\",\n             current:        node.getAttribute(\"current\")        === \"1\",\n             \"default\":      node.getAttribute(\"default\")        ||  \"\"\n         };\n         var values = this.getChildValue(node);\n         dim.values = values.split(\",\");\n\n         dimensions[dim.name] = dim;\n     },\n\n     /**\n     * Method: write\n     *\n     * Parameters:\n     * context - {Object} An object representing the map context.\n     * options - {Object} Optional object.\n     *\n     * Returns:\n     * {String} A WMC document string.\n     */\n    write: function(context, options) {\n        var root = this.createElementDefaultNS(\"ViewContext\");\n        this.setAttributes(root, {\n            version: this.VERSION,\n            id: (options && typeof options.id == \"string\") ?\n                    options.id :\n                    OpenLayers.Util.createUniqueID(\"OpenLayers_Context_\")\n        });\n        \n        // add schemaLocation attribute\n        this.setAttributeNS(\n            root, this.namespaces.xsi,\n            \"xsi:schemaLocation\", this.schemaLocation\n        );\n        \n        // required General element\n        root.appendChild(this.write_wmc_General(context));\n\n        // required LayerList element\n        root.appendChild(this.write_wmc_LayerList(context));\n\n        return OpenLayers.Format.XML.prototype.write.apply(this, [root]);\n    },\n    \n    /**\n     * Method: createElementDefaultNS\n     * Shorthand for createElementNS with namespace from <defaultPrefix>.\n     *     Can optionally be used to set attributes and a text child value.\n     *\n     * Parameters:\n     * name - {String} The qualified node name.\n     * childValue - {String} Optional value for text child node.\n     * attributes - {Object} Optional object representing attributes.\n     *\n     * Returns:\n     * {Element} An element node.\n     */\n    createElementDefaultNS: function(name, childValue, attributes) {\n        var node = this.createElementNS(\n            this.namespaces[this.defaultPrefix],\n            name\n        );\n        if(childValue) {\n            node.appendChild(this.createTextNode(childValue));\n        }\n        if(attributes) {\n            this.setAttributes(node, attributes);\n        }\n        return node;\n    },\n    \n    /**\n     * Method: setAttributes\n     * Set multiple attributes given key value pairs from an object.\n     *\n     * Parameters:\n     * node - {Element} An element node.\n     * obj - {Object} An object whose properties represent attribute names and\n     *     values represent attribute values.\n     */\n    setAttributes: function(node, obj) {\n        var value;\n        for(var name in obj) {\n            value = obj[name].toString();\n            if(value.match(/[A-Z]/)) {\n                // safari lowercases attributes with setAttribute\n                this.setAttributeNS(node, null, name, value);\n            } else {\n                node.setAttribute(name, value);\n            }\n        }\n    },\n\n    /**\n     * Method: write_wmc_General\n     * Create a General node given an context object.\n     *\n     * Parameters:\n     * context - {Object} Context object.\n     *\n     * Returns:\n     * {Element} A WMC General element node.\n     */\n    write_wmc_General: function(context) {\n        var node = this.createElementDefaultNS(\"General\");\n\n        // optional Window element\n        if(context.size) {\n            node.appendChild(this.createElementDefaultNS(\n                \"Window\", null,\n                {\n                    width: context.size.w,\n                    height: context.size.h\n                }\n            ));\n        }\n        \n        // required BoundingBox element\n        var bounds = context.bounds;\n        node.appendChild(this.createElementDefaultNS(\n            \"BoundingBox\", null,\n            {\n                minx: bounds.left.toPrecision(18),\n                miny: bounds.bottom.toPrecision(18),\n                maxx: bounds.right.toPrecision(18),\n                maxy: bounds.top.toPrecision(18),\n                SRS: context.projection\n            }\n        ));\n\n        // required Title element\n        node.appendChild(this.createElementDefaultNS(\n            \"Title\", context.title\n        ));\n        \n         // optional KeywordList element\n         if (context.keywords) {\n             node.appendChild(this.write_wmc_KeywordList(context.keywords));\n         }\n\n         // optional Abstract element\n         if (context[\"abstract\"]) {\n             node.appendChild(this.createElementDefaultNS(\n                 \"Abstract\", context[\"abstract\"]\n             ));\n         }\n\n         // Optional LogoURL element\n         if (context.logo) {\n             node.appendChild(this.write_wmc_URLType(\"LogoURL\", context.logo.href, context.logo));\n         }\n\n         // Optional DescriptionURL element\n         if (context.descriptionURL) {\n             node.appendChild(this.write_wmc_URLType(\"DescriptionURL\", context.descriptionURL));\n         }\n\n         // Optional ContactInformation element\n         if (context.contactInformation) {\n             node.appendChild(this.write_wmc_ContactInformation(context.contactInformation));\n         }\n\n        // OpenLayers specific map properties\n        node.appendChild(this.write_ol_MapExtension(context));\n        \n        return node;\n    },\n    \n    /**\n      * Method: write_wmc_KeywordList\n      */\n     write_wmc_KeywordList: function(keywords) {\n         var node = this.createElementDefaultNS(\"KeywordList\");\n\n         for (var i=0, len=keywords.length; i<len; i++) {\n             node.appendChild(this.createElementDefaultNS(\n                 \"Keyword\", keywords[i]\n             ));\n         }\n         return node;\n     },\n     /**\n      * Method: write_wmc_ContactInformation\n      */\n     write_wmc_ContactInformation: function(contact) {\n         var node = this.createElementDefaultNS(\"ContactInformation\");\n\n         if (contact.personPrimary) {\n             node.appendChild(this.write_wmc_ContactPersonPrimary(contact.personPrimary));\n         }\n         if (contact.position) {\n             node.appendChild(this.createElementDefaultNS(\n                 \"ContactPosition\", contact.position\n             ));\n         }\n         if (contact.contactAddress) {\n             node.appendChild(this.write_wmc_ContactAddress(contact.contactAddress));\n         }\n         if (contact.phone) {\n             node.appendChild(this.createElementDefaultNS(\n                 \"ContactVoiceTelephone\", contact.phone\n             ));\n         }\n         if (contact.fax) {\n             node.appendChild(this.createElementDefaultNS(\n                 \"ContactFacsimileTelephone\", contact.fax\n             ));\n         }\n         if (contact.email) {\n             node.appendChild(this.createElementDefaultNS(\n                 \"ContactElectronicMailAddress\", contact.email\n             ));\n         }\n         return node;\n     },\n\n     /**\n      * Method: write_wmc_ContactPersonPrimary\n      */\n     write_wmc_ContactPersonPrimary: function(personPrimary) {\n         var node = this.createElementDefaultNS(\"ContactPersonPrimary\");\n         if (personPrimary.person) {\n             node.appendChild(this.createElementDefaultNS(\n                 \"ContactPerson\", personPrimary.person\n             ));\n         }\n         if (personPrimary.organization) {\n             node.appendChild(this.createElementDefaultNS(\n                 \"ContactOrganization\", personPrimary.organization\n             ));\n         }\n         return node;\n     },\n\n     /**\n      * Method: write_wmc_ContactAddress\n      */\n     write_wmc_ContactAddress: function(contactAddress) {\n         var node = this.createElementDefaultNS(\"ContactAddress\");\n         if (contactAddress.type) {\n             node.appendChild(this.createElementDefaultNS(\n                 \"AddressType\", contactAddress.type\n             ));\n         }\n         if (contactAddress.address) {\n             node.appendChild(this.createElementDefaultNS(\n                 \"Address\", contactAddress.address\n             ));\n         }\n         if (contactAddress.city) {\n             node.appendChild(this.createElementDefaultNS(\n                 \"City\", contactAddress.city\n             ));\n         }\n         if (contactAddress.stateOrProvince) {\n             node.appendChild(this.createElementDefaultNS(\n                 \"StateOrProvince\", contactAddress.stateOrProvince\n             ));\n         }\n         if (contactAddress.postcode) {\n             node.appendChild(this.createElementDefaultNS(\n                 \"PostCode\", contactAddress.postcode\n             ));\n         }\n         if (contactAddress.country) {\n             node.appendChild(this.createElementDefaultNS(\n                 \"Country\", contactAddress.country\n             ));\n         }\n         return node;\n     },\n\n     /**\n     * Method: write_ol_MapExtension\n     */\n    write_ol_MapExtension: function(context) {\n        var node = this.createElementDefaultNS(\"Extension\");\n        \n        var bounds = context.maxExtent;\n        if(bounds) {\n            var maxExtent = this.createElementNS(\n                this.namespaces.ol, \"ol:maxExtent\"\n            );\n            this.setAttributes(maxExtent, {\n                minx: bounds.left.toPrecision(18),\n                miny: bounds.bottom.toPrecision(18),\n                maxx: bounds.right.toPrecision(18),\n                maxy: bounds.top.toPrecision(18)\n            });\n            node.appendChild(maxExtent);\n        }\n        \n        return node;\n    },\n    \n    /**\n     * Method: write_wmc_LayerList\n     * Create a LayerList node given an context object.\n     *\n     * Parameters:\n     * context - {Object} Context object.\n     *\n     * Returns:\n     * {Element} A WMC LayerList element node.\n     */\n    write_wmc_LayerList: function(context) {\n        var list = this.createElementDefaultNS(\"LayerList\");\n        \n        for(var i=0, len=context.layersContext.length; i<len; ++i) {\n            list.appendChild(this.write_wmc_Layer(context.layersContext[i]));\n        }\n        \n        return list;\n    },\n\n    /**\n     * Method: write_wmc_Layer\n     * Create a Layer node given a layer context object.\n     *\n     * Parameters:\n     * context - {Object} A layer context object.}\n     *\n     * Returns:\n     * {Element} A WMC Layer element node.\n     */\n    write_wmc_Layer: function(context) {\n        var node = this.createElementDefaultNS(\n            \"Layer\", null, {\n                queryable: context.queryable ? \"1\" : \"0\",\n                hidden: context.visibility ? \"0\" : \"1\"\n            }\n        );\n        \n        // required Server element\n        node.appendChild(this.write_wmc_Server(context));\n\n        // required Name element\n        node.appendChild(this.createElementDefaultNS(\n            \"Name\", context.name\n        ));\n        \n        // required Title element\n        node.appendChild(this.createElementDefaultNS(\n            \"Title\", context.title\n        ));\n\n         // optional Abstract element\n         if (context[\"abstract\"]) {\n             node.appendChild(this.createElementDefaultNS(\n                 \"Abstract\", context[\"abstract\"]\n             ));\n         }\n\n         // optional DataURL element\n         if (context.dataURL) {\n             node.appendChild(this.write_wmc_URLType(\"DataURL\", context.dataURL));\n         }\n\n        // optional MetadataURL element\n        if (context.metadataURL) {\n             node.appendChild(this.write_wmc_URLType(\"MetadataURL\", context.metadataURL));\n        }\n        \n        return node;\n    },\n\n    /**\n     * Method: write_ol_attribution\n     * Create an attribution node given a layer attribution object.\n     *\n     * Parameters:\n     * attribution - {<Object>} or {<String>} A layer attribution object or string\n     *\n     * Returns:\n     * {Element} A ol:attribution element node.\n     */\n    write_ol_attribution: function(attribution) {\n        if (typeof attribution == \"string\") {\n            attribution = {title: attribution};\n        }\n        var node = this.createElementNS(this.namespaces.ol, \"ol:attribution\");\n        node.appendChild(this.createElementDefaultNS(\n            \"Title\", attribution.title\n        ));\n        if (attribution.href) {\n            node.appendChild(this.write_wmc_OnlineResource(attribution.href));\n        }\n        if (attribution.logo) {\n            node.appendChild(\n                this.write_wmc_URLType(\"LogoURL\", \n                    attribution.logo.href, attribution.logo)\n            );\n        }\n        return node;\n    },\n\n    /**\n     * Method: write_wmc_LayerExtension\n     * Add OpenLayers specific layer parameters to an Extension element.\n     *\n     * Parameters:\n     * context - {Object} A layer context object.\n     *\n     * Returns:\n     * {Element} A WMC Extension element (for a layer).\n     */\n    write_wmc_LayerExtension: function(context) {\n        var node = this.createElementDefaultNS(\"Extension\");\n        \n        var bounds = context.maxExtent;\n        var maxExtent = this.createElementNS(\n            this.namespaces.ol, \"ol:maxExtent\"\n        );\n        this.setAttributes(maxExtent, {\n            minx: bounds.left.toPrecision(18),\n            miny: bounds.bottom.toPrecision(18),\n            maxx: bounds.right.toPrecision(18),\n            maxy: bounds.top.toPrecision(18)\n        });\n        node.appendChild(maxExtent);\n        \n        if (context.tileSize && !context.singleTile) {\n            var size = this.createElementNS(\n                this.namespaces.ol, \"ol:tileSize\"\n            );\n            this.setAttributes(size, context.tileSize);\n            node.appendChild(size);\n        }\n\n        var properties = [\n            \"transparent\", \"numZoomLevels\", \"units\", \"isBaseLayer\",\n            \"opacity\", \"displayInLayerSwitcher\", \"singleTile\", \"gutter\"\n        ];\n        var child;\n        for(var i=0, len=properties.length; i<len; ++i) {\n            child = this.createOLPropertyNode(context, properties[i]);\n            if(child) {\n                node.appendChild(child);\n            }\n        }\n\n        if (context.attribution) {\n            var attribution = this.write_ol_attribution(context.attribution);\n            node.appendChild(attribution);\n        }\n\n        return node;\n    },\n    \n    /**\n     * Method: createOLPropertyNode\n     * Create a node representing an OpenLayers property.  If the property is\n     *     null or undefined, null will be returned.\n     *\n     * Parameters:\n     * obj - {Object} An object.\n     * prop - {String} A property.\n     *\n     * Returns:\n     * {Element} A property node.\n     */\n    createOLPropertyNode: function(obj, prop) {\n        var node = null;\n        if(obj[prop] != null) {\n            node = this.createElementNS(this.namespaces.ol, \"ol:\" + prop);\n            node.appendChild(this.createTextNode(obj[prop].toString()));\n        }\n        return node;\n    },\n\n    /**\n     * Method: write_wmc_Server\n     * Create a Server node given a layer context object.\n     *\n     * Parameters:\n     * context - {Object} Layer context object.\n     *\n     * Returns:\n     * {Element} A WMC Server element node.\n     */\n    write_wmc_Server: function(context) {\n         var server = context.server;\n        var node = this.createElementDefaultNS(\"Server\");\n         var attributes = {\n            service: \"OGC:WMS\",\n             version: server.version\n         };\n         if (server.title) {\n             attributes.title = server.title;\n         }\n         this.setAttributes(node, attributes);\n        \n        // required OnlineResource element\n         node.appendChild(this.write_wmc_OnlineResource(server.url));\n        \n        return node;\n    },\n\n    /**\n     * Method: write_wmc_URLType\n     * Create a LogoURL/DescriptionURL/MetadataURL/DataURL/LegendURL node given a object and elementName.\n     *\n     * Parameters:\n     * elName - {String} Name of element (LogoURL/DescriptionURL/MetadataURL/LegendURL)\n     * url - {String} URL string value\n     * attr - {Object} Optional attributes (width, height, format)\n     *\n     * Returns:\n     * {Element} A WMC element node.\n     */\n     write_wmc_URLType: function(elName, url, attr) {\n         var node = this.createElementDefaultNS(elName);\n         node.appendChild(this.write_wmc_OnlineResource(url));\n         if (attr) {\n             var optionalAttributes = [\"width\", \"height\", \"format\"];\n             for (var i=0; i<optionalAttributes.length; i++) {\n                 if (optionalAttributes[i] in attr) {\n                     node.setAttribute(optionalAttributes[i], attr[optionalAttributes[i]]);\n                 }\n             }\n         }\n         return node;\n     },\n\n     /**\n      * Method: write_wmc_DimensionList\n      */\n     write_wmc_DimensionList: function(context) {\n         var node = this.createElementDefaultNS(\"DimensionList\");\n         var required_attributes = {\n             name: true,\n             units: true,\n             unitSymbol: true,\n             userValue: true\n         };\n         for (var dim in context.dimensions) {\n             var attributes = {};\n             var dimension = context.dimensions[dim];\n             for (var name in dimension) {\n                 if (typeof dimension[name] == \"boolean\") {\n                     attributes[name] = Number(dimension[name]);\n                 } else {\n                     attributes[name] = dimension[name];\n                 }\n             }\n             var values = \"\";\n             if (attributes.values) {\n                 values = attributes.values.join(\",\");\n                 delete attributes.values;\n             }\n\n             node.appendChild(this.createElementDefaultNS(\n                 \"Dimension\", values, attributes\n             ));\n         }\n        return node;\n    },\n\n    /**\n     * Method: write_wmc_FormatList\n     * Create a FormatList node given a layer context.\n     *\n     * Parameters:\n     * context - {Object} Layer context object.\n     *\n     * Returns:\n     * {Element} A WMC FormatList element node.\n     */\n    write_wmc_FormatList: function(context) {\n        var node = this.createElementDefaultNS(\"FormatList\");\n        for (var i=0, len=context.formats.length; i<len; i++) {\n            var format = context.formats[i];\n            node.appendChild(this.createElementDefaultNS(\n                \"Format\",\n                format.value,\n                (format.current && format.current == true) ?\n                    {current: \"1\"} : null\n            ));\n        }\n\n        return node;\n    },\n\n    /**\n     * Method: write_wmc_StyleList\n     * Create a StyleList node given a layer context.\n     *\n     * Parameters:\n     * layer - {Object} Layer context object.\n     *\n     * Returns:\n     * {Element} A WMC StyleList element node.\n     */\n    write_wmc_StyleList: function(layer) {\n        var node = this.createElementDefaultNS(\"StyleList\");\n\n        var styles = layer.styles;\n        if (styles && OpenLayers.Util.isArray(styles)) {\n            var sld;\n            for (var i=0, len=styles.length; i<len; i++) {\n                var s = styles[i];\n                // three style types to consider\n                // [1] linked SLD\n                // [2] inline SLD\n                // [3] named style\n                // running child nodes always gets name, optionally gets href or body\n                var style = this.createElementDefaultNS(\n                    \"Style\",\n                    null,\n                    (s.current && s.current == true) ?\n                    {current: \"1\"} : null\n                );\n                if(s.href) { // [1]\n                    sld = this.createElementDefaultNS(\"SLD\");\n                     // Name is optional.\n                     if (s.name) {\n                    sld.appendChild(this.createElementDefaultNS(\"Name\", s.name));\n                     }\n                    // Title is optional.\n                    if (s.title) {\n                        sld.appendChild(this.createElementDefaultNS(\"Title\", s.title));\n                    }\n                     // LegendURL is optional\n                     if (s.legend) {\n                         sld.appendChild(this.write_wmc_URLType(\"LegendURL\", s.legend.href, s.legend));\n                     }\n\n                     var link = this.write_wmc_OnlineResource(s.href);\n                     sld.appendChild(link);\n                    style.appendChild(sld);\n                } else if(s.body) { // [2]\n                    sld = this.createElementDefaultNS(\"SLD\");\n                     // Name is optional.\n                     if (s.name) {\n                         sld.appendChild(this.createElementDefaultNS(\"Name\", s.name));\n                     }\n                     // Title is optional.\n                     if (s.title) {\n                         sld.appendChild(this.createElementDefaultNS(\"Title\", s.title));\n                     }\n                     // LegendURL is optional\n                     if (s.legend) {\n                         sld.appendChild(this.write_wmc_URLType(\"LegendURL\", s.legend.href, s.legend));\n                     }\n\n                    // read in body as xml doc - assume proper namespace declarations\n                    var doc = OpenLayers.Format.XML.prototype.read.apply(this, [s.body]);\n                    // append to StyledLayerDescriptor node\n                    var imported = doc.documentElement;\n                    if(sld.ownerDocument && sld.ownerDocument.importNode) {\n                        imported = sld.ownerDocument.importNode(imported, true);\n                    }\n                    sld.appendChild(imported);\n                    style.appendChild(sld);            \n                } else { // [3]\n                    // both Name and Title are required.\n                    style.appendChild(this.createElementDefaultNS(\"Name\", s.name));\n                    style.appendChild(this.createElementDefaultNS(\"Title\", s.title));\n                    // Abstract is optional\n                    if (s['abstract']) { // abstract is a js keyword\n                        style.appendChild(this.createElementDefaultNS(\n                            \"Abstract\", s['abstract']\n                        ));\n                    }\n                     // LegendURL is optional\n                     if (s.legend) {\n                         style.appendChild(this.write_wmc_URLType(\"LegendURL\", s.legend.href, s.legend));\n                }\n                 }\n                node.appendChild(style);\n            }\n        }\n\n        return node;\n    },\n\n    /**\n     * Method: write_wmc_OnlineResource\n     * Create an OnlineResource node given a URL.\n     *\n     * Parameters:\n     * href - {String} URL for the resource.\n     *\n     * Returns:\n     * {Element} A WMC OnlineResource element node.\n     */\n    write_wmc_OnlineResource: function(href) {\n        var node = this.createElementDefaultNS(\"OnlineResource\");\n        this.setAttributeNS(node, this.namespaces.xlink, \"xlink:type\", \"simple\");\n        this.setAttributeNS(node, this.namespaces.xlink, \"xlink:href\", href);\n        return node;\n    },\n\n     /**\n      * Method: getOnlineResource_href\n      */\n     getOnlineResource_href: function(node) {\n         var object = {};\n         var links = node.getElementsByTagName(\"OnlineResource\");\n         if(links.length > 0) {\n             this.read_wmc_OnlineResource(object, links[0]);\n         }\n         return object.href;\n     },\n\n\n    CLASS_NAME: \"OpenLayers.Format.WMC.v1\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/WMC/v1.js\n */\n\n/**\n * Class: OpenLayers.Format.WMC.v1_0_0\n * Read and write WMC version 1.0.0.\n * \n * Inherits from:\n *  - <OpenLayers.Format.WMC.v1>\n */\nOpenLayers.Format.WMC.v1_0_0 = OpenLayers.Class(\n    OpenLayers.Format.WMC.v1, {\n    \n    /**\n     * Constant: VERSION\n     * {String} 1.0.0\n     */\n    VERSION: \"1.0.0\",\n    \n    /**\n     * Property: schemaLocation\n     * {String} http://www.opengis.net/context\n     *     http://schemas.opengis.net/context/1.0.0/context.xsd\n     */\n    schemaLocation: \"http://www.opengis.net/context http://schemas.opengis.net/context/1.0.0/context.xsd\",\n\n    /**\n     * Constructor: OpenLayers.Format.WMC.v1_0_0\n     * Instances of this class are not created directly.  Use the\n     *     <OpenLayers.Format.WMC> constructor instead.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    initialize: function(options) {\n        OpenLayers.Format.WMC.v1.prototype.initialize.apply(\n            this, [options]\n        );\n    },\n\n    /**\n     * Method: read_wmc_SRS\n     */\n    read_wmc_SRS: function(layerContext, node) {\n        var srs    = this.getChildValue(node);\n        if (typeof layerContext.projections != \"object\") {\n            layerContext.projections = {};\n        }\n        var values = srs.split(/ +/);\n        for (var i=0, len=values.length; i<len; i++) {\n            layerContext.projections[values[i]] = true;\n        }\n    },\n\n    /**\n     * Method: write_wmc_Layer\n     * Create a Layer node given a layer context object. This method adds\n     *     elements specific to version 1.0.0.\n     *\n     * Parameters:\n     * context - {Object} A layer context object.}\n     *\n     * Returns:\n     * {Element} A WMC Layer element node.\n     */\n    write_wmc_Layer: function(context) {\n        var node = OpenLayers.Format.WMC.v1.prototype.write_wmc_Layer.apply(\n            this, [context]\n        );\n    \n        // optional SRS element(s)\n        if (context.srs) {\n            var projections = [];\n            for(var name in context.srs) {\n                projections.push(name);\n            }\n            node.appendChild(this.createElementDefaultNS(\"SRS\", projections.join(\" \")));\n        }\n\n        // optional FormatList element\n        node.appendChild(this.write_wmc_FormatList(context));\n\n        // optional StyleList element\n        node.appendChild(this.write_wmc_StyleList(context));\n        \n        // optional DimensionList element\n        if (context.dimensions) {\n            node.appendChild(this.write_wmc_DimensionList(context));\n        }\n\n        // OpenLayers specific properties go in an Extension element\n        node.appendChild(this.write_wmc_LayerExtension(context));\n    },    \n\n    CLASS_NAME: \"OpenLayers.Format.WMC.v1_0_0\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/WMC/v1.js\n */\n\n/**\n * Class: OpenLayers.Format.WMC.v1_1_0\n * Read and write WMC version 1.1.0.\n *\n * Differences between 1.1.0 and 1.0.0:\n *     - 1.1.0 Layers have optional sld:MinScaleDenominator and\n *       sld:MaxScaleDenominator\n * \n * Inherits from:\n *  - <OpenLayers.Format.WMC.v1>\n */\nOpenLayers.Format.WMC.v1_1_0 = OpenLayers.Class(\n    OpenLayers.Format.WMC.v1, {\n    \n    /**\n     * Constant: VERSION\n     * {String} 1.1.0\n     */\n    VERSION: \"1.1.0\",\n\n    /**\n     * Property: schemaLocation\n     * {String} http://www.opengis.net/context\n     *     http://schemas.opengis.net/context/1.1.0/context.xsd\n     */\n    schemaLocation: \"http://www.opengis.net/context http://schemas.opengis.net/context/1.1.0/context.xsd\",\n\n    /**\n     * Constructor: OpenLayers.Format.WMC.v1_1_0\n     * Instances of this class are not created directly.  Use the\n     *     <OpenLayers.Format.WMC> constructor instead.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    initialize: function(options) {\n        OpenLayers.Format.WMC.v1.prototype.initialize.apply(\n            this, [options]\n        );\n    },\n\n    /**\n     * Method: read_sld_MinScaleDenominator\n     * Read a sld:MinScaleDenominator node.\n     *\n     * Parameters:\n     * layerContext - {Object} An object representing a layer.\n     * node - {Element} An element node.\n     */\n    read_sld_MinScaleDenominator: function(layerContext, node) {\n        var minScaleDenominator = parseFloat(this.getChildValue(node));\n        if (minScaleDenominator > 0) {\n            layerContext.maxScale = minScaleDenominator;\n        }\n    },\n\n    /**\n     * Method: read_sld_MaxScaleDenominator\n     * Read a sld:MaxScaleDenominator node.\n     *\n     * Parameters:\n     * layerContext - {Object} An object representing a layer.\n     * node - {Element} An element node.\n     */\n    read_sld_MaxScaleDenominator: function(layerContext, node) {\n        layerContext.minScale = parseFloat(this.getChildValue(node));\n    },\n\n    /**\n     * Method: read_wmc_SRS\n     */\n    read_wmc_SRS: function(layerContext, node) {\n        if (! (\"srs\" in layerContext)) {\n            layerContext.srs = {};\n        }\n        layerContext.srs[this.getChildValue(node)] = true;\n    },\n\n    /**\n     * Method: write_wmc_Layer\n     * Create a Layer node given a layer context object. This method adds\n     *     elements specific to version 1.1.0.\n     *\n     * Parameters:\n     * context - {Object} A layer context object.}\n     *\n     * Returns:\n     * {Element} A WMC Layer element node.\n     */\n    write_wmc_Layer: function(context) {\n        var node = OpenLayers.Format.WMC.v1.prototype.write_wmc_Layer.apply(\n            this, [context]\n        );\n        \n        // min/max scale denominator elements go before the 4th element in v1\n        if(context.maxScale) {\n            var minSD = this.createElementNS(\n                this.namespaces.sld, \"sld:MinScaleDenominator\"\n            );\n            minSD.appendChild(this.createTextNode(context.maxScale.toPrecision(16)));\n            node.appendChild(minSD);\n        }\n        \n        if(context.minScale) {\n            var maxSD = this.createElementNS(\n                this.namespaces.sld, \"sld:MaxScaleDenominator\"\n            );\n            maxSD.appendChild(this.createTextNode(context.minScale.toPrecision(16)));\n            node.appendChild(maxSD);\n        }\n\n        // optional SRS element(s)\n        if (context.srs) {\n            for(var name in context.srs) {\n                node.appendChild(this.createElementDefaultNS(\"SRS\", name));\n            }\n        }\n\n        // optional FormatList element\n        node.appendChild(this.write_wmc_FormatList(context));\n\n        // optional StyleList element\n        node.appendChild(this.write_wmc_StyleList(context));\n        \n        // optional DimensionList element\n        if (context.dimensions) {\n            node.appendChild(this.write_wmc_DimensionList(context));\n        }\n\n        // OpenLayers specific properties go in an Extension element\n        node.appendChild(this.write_wmc_LayerExtension(context));\n        \n        return node;\n        \n    },\n\n    CLASS_NAME: \"OpenLayers.Format.WMC.v1_1_0\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML.js\n * @requires OpenLayers/Format/OWSCommon/v1_1_0.js\n */\n\n/**\n * Class: OpenLayers.Format.WCSGetCoverage version 1.1.0\n *\n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.WCSGetCoverage = OpenLayers.Class(OpenLayers.Format.XML, {\n    \n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        ows: \"http://www.opengis.net/ows/1.1\",\n        wcs: \"http://www.opengis.net/wcs/1.1\",\n        xlink: \"http://www.w3.org/1999/xlink\",\n        xsi: \"http://www.w3.org/2001/XMLSchema-instance\"\n    },\n\n    /**\n     * Property: regExes\n     * Compiled regular expressions for manipulating strings.\n     */\n    regExes: {\n        trimSpace: (/^\\s*|\\s*$/g),\n        removeSpace: (/\\s*/g),\n        splitSpace: (/\\s+/),\n        trimComma: (/\\s*,\\s*/g)\n    },\n\n    /**\n     * Constant: VERSION\n     * {String} 1.1.2\n     */\n    VERSION: \"1.1.2\",\n\n    /**\n     * Property: schemaLocation\n     * {String} Schema location\n     */\n    schemaLocation: \"http://www.opengis.net/wcs/1.1 http://schemas.opengis.net/wcs/1.1/wcsGetCoverage.xsd\",\n\n    /**\n     * Constructor: OpenLayers.Format.WCSGetCoverage\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * Method: write\n     *\n     * Parameters:\n     * options - {Object} Optional object.\n     *\n     * Returns:\n     * {String} A WCS GetCoverage request XML string.\n     */\n    write: function(options) {\n        var node = this.writeNode(\"wcs:GetCoverage\", options);\n        this.setAttributeNS(\n            node, this.namespaces.xsi,\n            \"xsi:schemaLocation\", this.schemaLocation\n        );\n        return OpenLayers.Format.XML.prototype.write.apply(this, [node]);\n    }, \n\n    /**\n     * Property: writers\n     * As a compliment to the readers property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: {\n        \"wcs\": {\n            \"GetCoverage\": function(options) {\n                var node = this.createElementNSPlus(\"wcs:GetCoverage\", {\n                    attributes: {\n                        version: options.version || this.VERSION,\n                        service: 'WCS'\n                    } \n                }); \n                this.writeNode(\"ows:Identifier\", options.identifier, node);\n                this.writeNode(\"wcs:DomainSubset\", options.domainSubset, node);\n                this.writeNode(\"wcs:Output\", options.output, node);\n                return node; \n            },\n            \"DomainSubset\": function(domainSubset) {\n                var node = this.createElementNSPlus(\"wcs:DomainSubset\", {});\n                this.writeNode(\"ows:BoundingBox\", domainSubset.boundingBox, node);\n                if (domainSubset.temporalSubset) {\n                    this.writeNode(\"wcs:TemporalSubset\", domainSubset.temporalSubset, node);\n                }\n                return node;\n            },\n            \"TemporalSubset\": function(temporalSubset) {\n                var node = this.createElementNSPlus(\"wcs:TemporalSubset\", {});\n                for (var i=0, len=temporalSubset.timePeriods.length; i<len; ++i) {\n                    this.writeNode(\"wcs:TimePeriod\", temporalSubset.timePeriods[i], node);\n                }\n                return node;\n            },\n            \"TimePeriod\": function(timePeriod) {\n                var node = this.createElementNSPlus(\"wcs:TimePeriod\", {});\n                this.writeNode(\"wcs:BeginPosition\", timePeriod.begin, node);\n                this.writeNode(\"wcs:EndPosition\", timePeriod.end, node);\n                if (timePeriod.resolution) {\n                    this.writeNode(\"wcs:TimeResolution\", timePeriod.resolution, node);\n                }\n                return node;\n            },\n            \"BeginPosition\": function(begin) {\n                var node = this.createElementNSPlus(\"wcs:BeginPosition\", {\n                    value: begin\n                });\n                return node;\n            },\n            \"EndPosition\": function(end) {\n                var node = this.createElementNSPlus(\"wcs:EndPosition\", {\n                    value: end\n                });\n                return node;\n            },\n            \"TimeResolution\": function(resolution) {\n                var node = this.createElementNSPlus(\"wcs:TimeResolution\", {\n                    value: resolution\n                });\n                return node;\n            },\n            \"Output\": function(output) {\n                var node = this.createElementNSPlus(\"wcs:Output\", {\n                    attributes: {\n                        format: output.format,\n                        store: output.store\n                    }\n                });\n                if (output.gridCRS) {\n                    this.writeNode(\"wcs:GridCRS\", output.gridCRS, node);\n                }\n                return node;\n            },\n            \"GridCRS\": function(gridCRS) {\n                var node = this.createElementNSPlus(\"wcs:GridCRS\", {});\n                this.writeNode(\"wcs:GridBaseCRS\", gridCRS.baseCRS, node);\n                if (gridCRS.type) {\n                    this.writeNode(\"wcs:GridType\", gridCRS.type, node);\n                }\n                if (gridCRS.origin) {\n                    this.writeNode(\"wcs:GridOrigin\", gridCRS.origin, node);\n                }\n                this.writeNode(\"wcs:GridOffsets\", gridCRS.offsets, node);\n                if (gridCRS.CS) {\n                    this.writeNode(\"wcs:GridCS\", gridCRS.CS, node);\n                }\n                return node;\n            },\n            \"GridBaseCRS\": function(baseCRS) {\n                return this.createElementNSPlus(\"wcs:GridBaseCRS\", {\n                    value: baseCRS\n                });\n            },\n            \"GridOrigin\": function(origin) {\n                return this.createElementNSPlus(\"wcs:GridOrigin\", {\n                    value: origin\n                });\n            },\n            \"GridType\": function(type) {\n                return this.createElementNSPlus(\"wcs:GridType\", {\n                    value: type\n                });\n            },\n            \"GridOffsets\": function(offsets) {\n                return this.createElementNSPlus(\"wcs:GridOffsets\", {\n                    value: offsets\n                });\n            },\n            \"GridCS\": function(CS) {\n                return this.createElementNSPlus(\"wcs:GridCS\", {\n                    value: CS\n                });\n            }\n        },\n        \"ows\": OpenLayers.Format.OWSCommon.v1_1_0.prototype.writers.ows\n    },\n    \n    CLASS_NAME: \"OpenLayers.Format.WCSGetCoverage\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML/VersionedOGC.js\n */\n\n/**\n * Class: OpenLayers.Format.WMSCapabilities\n * Read WMS Capabilities.\n * \n * Inherits from:\n *  - <OpenLayers.Format.XML.VersionedOGC>\n */\nOpenLayers.Format.WMSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {\n    \n    /**\n     * APIProperty: defaultVersion\n     * {String} Version number to assume if none found.  Default is \"1.1.1\".\n     */\n    defaultVersion: \"1.1.1\",\n    \n    /**\n     * APIProperty: profile\n     * {String} If provided, use a custom profile.\n     *\n     * Currently supported profiles:\n     * - WMSC - parses vendor specific capabilities for WMS-C.\n     */\n    profile: null,\n    \n    /**\n     * Constructor: OpenLayers.Format.WMSCapabilities\n     * Create a new parser for WMS capabilities.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * APIMethod: read\n     * Read capabilities data from a string, and return a list of layers. \n     * \n     * Parameters: \n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Array} List of named layers.\n     */\n    \n    CLASS_NAME: \"OpenLayers.Format.WMSCapabilities\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/WMSCapabilities.js\n * @requires OpenLayers/Format/OGCExceptionReport.js\n * @requires OpenLayers/Format/XML.js\n */\n\n/**\n * Class: OpenLayers.Format.WMSCapabilities.v1\n * Abstract class not to be instantiated directly. Creates\n * the common parts for both WMS 1.1.X and WMS 1.3.X.\n * \n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.WMSCapabilities.v1 = OpenLayers.Class(\n    OpenLayers.Format.XML, {\n    \n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        wms: \"http://www.opengis.net/wms\",\n        xlink: \"http://www.w3.org/1999/xlink\",\n        xsi: \"http://www.w3.org/2001/XMLSchema-instance\"\n    },\n\n    /**\n     * Property: defaultPrefix\n     */\n    defaultPrefix: \"wms\",\n    \n    /**\n     * Constructor: OpenLayers.Format.WMSCapabilities.v1\n     * Create an instance of one of the subclasses.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * APIMethod: read\n     * Read capabilities data from a string, and return a list of layers. \n     * \n     * Parameters: \n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Array} List of named layers.\n     */\n    read: function(data) {\n        if(typeof data == \"string\") {\n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n        var raw = data;\n        if(data && data.nodeType == 9) {\n            data = data.documentElement;\n        }\n        var capabilities = {};\n        this.readNode(data, capabilities);\n        if (capabilities.service === undefined) {\n            // an exception must have occurred, so parse it\n            var parser = new OpenLayers.Format.OGCExceptionReport();\n            capabilities.error = parser.read(raw);\n        }\n        return capabilities;\n    },\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"wms\": {\n            \"Service\": function(node, obj) {\n                obj.service = {};\n                this.readChildNodes(node, obj.service);\n            },\n            \"Name\": function(node, obj) {\n                obj.name = this.getChildValue(node);\n            },\n            \"Title\": function(node, obj) {\n                obj.title = this.getChildValue(node);\n            },\n            \"Abstract\": function(node, obj) {\n                obj[\"abstract\"] = this.getChildValue(node);\n            },\n            \"BoundingBox\": function(node, obj) {\n                var bbox = {};\n                bbox.bbox = [\n                    parseFloat(node.getAttribute(\"minx\")),\n                    parseFloat(node.getAttribute(\"miny\")),\n                    parseFloat(node.getAttribute(\"maxx\")),\n                    parseFloat(node.getAttribute(\"maxy\"))\n                ];\n                var res = {\n                    x: parseFloat(node.getAttribute(\"resx\")),\n                    y: parseFloat(node.getAttribute(\"resy\"))\n                };\n\n                if (! (isNaN(res.x) && isNaN(res.y))) {\n                    bbox.res = res;\n                }\n                // return the bbox so that descendant classes can set the\n                // CRS and SRS and add it to the obj\n                return bbox;\n            },\n            \"OnlineResource\": function(node, obj) {\n                obj.href = this.getAttributeNS(node, this.namespaces.xlink, \n                    \"href\");\n            },\n            \"ContactInformation\": function(node, obj) {\n                obj.contactInformation = {};\n                this.readChildNodes(node, obj.contactInformation);\n            },\n            \"ContactPersonPrimary\": function(node, obj) {\n                obj.personPrimary = {};\n                this.readChildNodes(node, obj.personPrimary);\n            },\n            \"ContactPerson\": function(node, obj) {\n                obj.person = this.getChildValue(node);\n            },\n            \"ContactOrganization\": function(node, obj) {\n                obj.organization = this.getChildValue(node);\n            },\n            \"ContactPosition\": function(node, obj) {\n                obj.position = this.getChildValue(node);\n            },\n            \"ContactAddress\": function(node, obj) {\n                obj.contactAddress = {};\n                this.readChildNodes(node, obj.contactAddress);\n            },\n            \"AddressType\": function(node, obj) {\n                obj.type = this.getChildValue(node);\n            },\n            \"Address\": function(node, obj) {\n                obj.address = this.getChildValue(node);\n            },\n            \"City\": function(node, obj) {\n                obj.city = this.getChildValue(node);\n            },\n            \"StateOrProvince\": function(node, obj) {\n                obj.stateOrProvince = this.getChildValue(node);\n            },\n            \"PostCode\": function(node, obj) {\n                obj.postcode = this.getChildValue(node);\n            },\n            \"Country\": function(node, obj) {\n                obj.country = this.getChildValue(node);\n            },\n            \"ContactVoiceTelephone\": function(node, obj) {\n                obj.phone = this.getChildValue(node);\n            },\n            \"ContactFacsimileTelephone\": function(node, obj) {\n                obj.fax = this.getChildValue(node);\n            },\n            \"ContactElectronicMailAddress\": function(node, obj) {\n                obj.email = this.getChildValue(node);\n            },\n            \"Fees\": function(node, obj) {\n                var fees = this.getChildValue(node);\n                if (fees && fees.toLowerCase() != \"none\") {\n                    obj.fees = fees;\n                }\n            },\n            \"AccessConstraints\": function(node, obj) {\n                var constraints = this.getChildValue(node);\n                if (constraints && constraints.toLowerCase() != \"none\") {\n                    obj.accessConstraints = constraints;\n                }\n            },\n            \"Capability\": function(node, obj) {\n                obj.capability = {\n                    nestedLayers: [],\n                    layers: []\n                };\n                this.readChildNodes(node, obj.capability);\n            },\n            \"Request\": function(node, obj) {\n                obj.request = {};\n                this.readChildNodes(node, obj.request);\n            },\n            \"GetCapabilities\": function(node, obj) {\n                obj.getcapabilities = {formats: []};\n                this.readChildNodes(node, obj.getcapabilities);\n            },\n            \"Format\": function(node, obj) {\n                if (OpenLayers.Util.isArray(obj.formats)) {\n                    obj.formats.push(this.getChildValue(node));\n                } else {\n                    obj.format = this.getChildValue(node);\n                }\n            },\n            \"DCPType\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"HTTP\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"Get\": function(node, obj) {\n                obj.get = {};\n                this.readChildNodes(node, obj.get);\n                // backwards compatibility\n                if (!obj.href) {\n                    obj.href = obj.get.href;\n                }\n            },\n            \"Post\": function(node, obj) {\n                obj.post = {};\n                this.readChildNodes(node, obj.post);\n                // backwards compatibility\n                if (!obj.href) {\n                    obj.href = obj.get.href;\n                }\n            },\n            \"GetMap\": function(node, obj) {\n                obj.getmap = {formats: []};\n                this.readChildNodes(node, obj.getmap);\n            },\n            \"GetFeatureInfo\": function(node, obj) {\n                obj.getfeatureinfo = {formats: []};\n                this.readChildNodes(node, obj.getfeatureinfo);\n            },\n            \"Exception\": function(node, obj) {\n                obj.exception = {formats: []};\n                this.readChildNodes(node, obj.exception);\n            },\n            \"Layer\": function(node, obj) {\n                var parentLayer, capability;\n                if (obj.capability) {\n                    capability = obj.capability;\n                    parentLayer = obj;\n                } else {\n                    capability = obj;\n                }\n                var attrNode = node.getAttributeNode(\"queryable\");\n                var queryable = (attrNode && attrNode.specified) ? \n                    node.getAttribute(\"queryable\") : null;\n                attrNode = node.getAttributeNode(\"cascaded\");\n                var cascaded = (attrNode && attrNode.specified) ?\n                    node.getAttribute(\"cascaded\") : null;\n                attrNode = node.getAttributeNode(\"opaque\");\n                var opaque = (attrNode && attrNode.specified) ?\n                    node.getAttribute('opaque') : null;\n                var noSubsets = node.getAttribute('noSubsets');\n                var fixedWidth = node.getAttribute('fixedWidth');\n                var fixedHeight = node.getAttribute('fixedHeight');\n                var parent = parentLayer || {},\n                    extend = OpenLayers.Util.extend;\n                var layer = {\n                    nestedLayers: [],\n                    styles: parentLayer ? [].concat(parentLayer.styles) : [],\n                    srs: parentLayer ? extend({}, parent.srs) : {}, \n                    metadataURLs: [],\n                    bbox: parentLayer ? extend({}, parent.bbox) : {},\n                    llbbox: parent.llbbox,\n                    dimensions: parentLayer ? extend({}, parent.dimensions) : {},\n                    authorityURLs: parentLayer ? extend({}, parent.authorityURLs) : {},\n                    identifiers: {},\n                    keywords: [],\n                    queryable: (queryable && queryable !== \"\") ? \n                        (queryable === \"1\" || queryable === \"true\" ) :\n                        (parent.queryable || false),\n                    cascaded: (cascaded !== null) ? parseInt(cascaded) :\n                        (parent.cascaded || 0),\n                    opaque: opaque ? \n                        (opaque === \"1\" || opaque === \"true\" ) :\n                        (parent.opaque || false),\n                    noSubsets: (noSubsets !== null) ? \n                        (noSubsets === \"1\" || noSubsets === \"true\" ) :\n                        (parent.noSubsets || false),\n                    fixedWidth: (fixedWidth != null) ? \n                        parseInt(fixedWidth) : (parent.fixedWidth || 0),\n                    fixedHeight: (fixedHeight != null) ? \n                        parseInt(fixedHeight) : (parent.fixedHeight || 0),\n                    minScale: parent.minScale,\n                    maxScale: parent.maxScale,\n                    attribution: parent.attribution\n                };\n                obj.nestedLayers.push(layer);\n                layer.capability = capability;\n                this.readChildNodes(node, layer);\n                delete layer.capability;\n                if(layer.name) {\n                    var parts = layer.name.split(\":\"),\n                        request = capability.request,\n                        gfi = request.getfeatureinfo;\n                    if(parts.length > 0) {\n                        layer.prefix = parts[0];\n                    }\n                    capability.layers.push(layer);\n                    if (layer.formats === undefined) {\n                        layer.formats = request.getmap.formats;\n                    }\n                    if (layer.infoFormats === undefined && gfi) {\n                        layer.infoFormats = gfi.formats;\n                    }\n                }\n            },\n            \"Attribution\": function(node, obj) {\n                obj.attribution = {};\n                this.readChildNodes(node, obj.attribution);\n            },\n            \"LogoURL\": function(node, obj) {\n                obj.logo = {\n                    width: node.getAttribute(\"width\"),\n                    height: node.getAttribute(\"height\")\n                };\n                this.readChildNodes(node, obj.logo);\n            },\n            \"Style\": function(node, obj) {\n                var style = {};\n                obj.styles.push(style);\n                this.readChildNodes(node, style);\n            },\n            \"LegendURL\": function(node, obj) {\n                var legend = {\n                    width: node.getAttribute(\"width\"),\n                    height: node.getAttribute(\"height\")\n                };\n                obj.legend = legend;\n                this.readChildNodes(node, legend);\n            },\n            \"MetadataURL\": function(node, obj) {\n                var metadataURL = {type: node.getAttribute(\"type\")};\n                obj.metadataURLs.push(metadataURL);\n                this.readChildNodes(node, metadataURL);\n            },\n            \"DataURL\": function(node, obj) {\n                obj.dataURL = {};\n                this.readChildNodes(node, obj.dataURL);\n            },\n            \"FeatureListURL\": function(node, obj) {\n                obj.featureListURL = {};\n                this.readChildNodes(node, obj.featureListURL);\n            },\n            \"AuthorityURL\": function(node, obj) {\n                var name = node.getAttribute(\"name\");\n                var authority = {};\n                this.readChildNodes(node, authority);\n                obj.authorityURLs[name] = authority.href;\n            },\n            \"Identifier\": function(node, obj) {\n                var authority = node.getAttribute(\"authority\");\n                obj.identifiers[authority] = this.getChildValue(node);\n            },\n            \"KeywordList\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"SRS\": function(node, obj) {\n                obj.srs[this.getChildValue(node)] = true;\n            }\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.WMSCapabilities.v1\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/WMSCapabilities/v1.js\n */\n\n/**\n * Class: OpenLayers.Format.WMSCapabilities.v1_1\n * Abstract class not to be instantiated directly.\n * \n * Inherits from:\n *  - <OpenLayers.Format.WMSCapabilities.v1>\n */\nOpenLayers.Format.WMSCapabilities.v1_1 = OpenLayers.Class(\n    OpenLayers.Format.WMSCapabilities.v1, {\n    \n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"wms\": OpenLayers.Util.applyDefaults({\n            \"WMT_MS_Capabilities\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"Keyword\": function(node, obj) {\n                if (obj.keywords) {\n                    obj.keywords.push(this.getChildValue(node));\n                }\n            },\n            \"DescribeLayer\": function(node, obj) {\n                obj.describelayer = {formats: []};\n                this.readChildNodes(node, obj.describelayer);\n            },\n            \"GetLegendGraphic\": function(node, obj) {\n                obj.getlegendgraphic = {formats: []};\n                this.readChildNodes(node, obj.getlegendgraphic);\n            },\n            \"GetStyles\": function(node, obj) {\n                obj.getstyles = {formats: []};\n                this.readChildNodes(node, obj.getstyles);\n            },\n            \"PutStyles\": function(node, obj) {\n                obj.putstyles = {formats: []};\n                this.readChildNodes(node, obj.putstyles);\n            },\n            \"UserDefinedSymbolization\": function(node, obj) {\n                var userSymbols = {\n                    supportSLD: parseInt(node.getAttribute(\"SupportSLD\")) == 1,\n                    userLayer: parseInt(node.getAttribute(\"UserLayer\")) == 1,\n                    userStyle: parseInt(node.getAttribute(\"UserStyle\")) == 1,\n                    remoteWFS: parseInt(node.getAttribute(\"RemoteWFS\")) == 1\n                };\n                obj.userSymbols = userSymbols;\n            },\n            \"LatLonBoundingBox\": function(node, obj) {\n                obj.llbbox = [\n                    parseFloat(node.getAttribute(\"minx\")),\n                    parseFloat(node.getAttribute(\"miny\")),\n                    parseFloat(node.getAttribute(\"maxx\")),\n                    parseFloat(node.getAttribute(\"maxy\"))\n                ];\n            },\n            \"BoundingBox\": function(node, obj) {\n                var bbox = OpenLayers.Format.WMSCapabilities.v1.prototype.readers[\"wms\"].BoundingBox.apply(this, [node, obj]);\n                bbox.srs  = node.getAttribute(\"SRS\");\n                obj.bbox[bbox.srs] = bbox;\n            },\n            \"ScaleHint\": function(node, obj) {\n                var min = node.getAttribute(\"min\");\n                var max = node.getAttribute(\"max\");\n                var rad2 = Math.pow(2, 0.5);\n                var ipm = OpenLayers.INCHES_PER_UNIT[\"m\"];\n                if (min != 0) {\n                    obj.maxScale = parseFloat(\n                        ((min / rad2) * ipm * \n                            OpenLayers.DOTS_PER_INCH).toPrecision(13)\n                    );\n                }\n                if (max != Number.POSITIVE_INFINITY) {\n                    obj.minScale = parseFloat(\n                        ((max / rad2) * ipm * \n                            OpenLayers.DOTS_PER_INCH).toPrecision(13)\n                    );\n                }\n            },\n            \"Dimension\": function(node, obj) {\n                var name = node.getAttribute(\"name\").toLowerCase();\n                var dim = {\n                    name: name,\n                    units: node.getAttribute(\"units\"),\n                    unitsymbol: node.getAttribute(\"unitSymbol\")\n                };\n                obj.dimensions[dim.name] = dim;\n            },\n            \"Extent\": function(node, obj) {\n                var name = node.getAttribute(\"name\").toLowerCase();\n                if (name in obj[\"dimensions\"]) {\n                    var extent = obj.dimensions[name];\n                    extent.nearestVal = \n                        node.getAttribute(\"nearestValue\") === \"1\";\n                    extent.multipleVal = \n                        node.getAttribute(\"multipleValues\") === \"1\";\n                    extent.current = node.getAttribute(\"current\") === \"1\";\n                    extent[\"default\"] = node.getAttribute(\"default\") || \"\";\n                    var values = this.getChildValue(node);\n                    extent.values = values.split(\",\");\n                }\n                }\n        }, OpenLayers.Format.WMSCapabilities.v1.prototype.readers[\"wms\"])\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.WMSCapabilities.v1_1\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/WMSCapabilities/v1_1.js\n */\n\n/**\n * Class: OpenLayers.Format.WMSCapabilities/v1_1_0\n * Read WMS Capabilities version 1.1.0.\n * \n * Inherits from:\n *  - <OpenLayers.Format.WMSCapabilities.v1_1>\n */\nOpenLayers.Format.WMSCapabilities.v1_1_0 = OpenLayers.Class(\n    OpenLayers.Format.WMSCapabilities.v1_1, {\n    \n    /**\n     * Property: version\n     * {String} The specific parser version.\n     */\n    version: \"1.1.0\",\n    \n    /**\n     * Constructor: OpenLayers.Format.WMSCapabilities.v1_1_0\n     * Create a new parser for WMS capabilities version 1.1.0.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"wms\": OpenLayers.Util.applyDefaults({\n            \"SRS\": function(node, obj) {\n                var srs = this.getChildValue(node);\n                var values = srs.split(/ +/);\n                for (var i=0, len=values.length; i<len; i++) {\n                    obj.srs[values[i]] = true;\n                }\n            }\n        }, OpenLayers.Format.WMSCapabilities.v1_1.prototype.readers[\"wms\"])\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.WMSCapabilities.v1_1_0\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/WMSCapabilities/v1_1.js\n */\n\n/**\n * Class: OpenLayers.Format.WMSCapabilities/v1_1_1\n * Read WMS Capabilities version 1.1.1.\n *\n * Note on <ScaleHint> parsing: If the 'min' attribute is set to \"0\", no\n * maxScale will be set on the layer object. If the 'max' attribute is set to\n * \"Infinity\", no minScale will be set. This makes it easy to create proper\n * {<OpenLayers.Layer.WMS>} configurations directly from the layer object\n * literals returned by this format, because no minScale/maxScale modifications\n * need to be made.\n * \n * Inherits from:\n *  - <OpenLayers.Format.WMSCapabilities.v1_1>\n */\nOpenLayers.Format.WMSCapabilities.v1_1_1 = OpenLayers.Class(\n    OpenLayers.Format.WMSCapabilities.v1_1, {\n    \n    /**\n     * Property: version\n     * {String} The specific parser version.\n     */\n    version: \"1.1.1\",\n    \n    /**\n     * Constructor: OpenLayers.Format.WMSCapabilities.v1_1_1\n     * Create a new parser for WMS capabilities version 1.1.1.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"wms\": OpenLayers.Util.applyDefaults({\n            \"SRS\": function(node, obj) {\n                obj.srs[this.getChildValue(node)] = true;\n            }\n        }, OpenLayers.Format.WMSCapabilities.v1_1.prototype.readers[\"wms\"])\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.WMSCapabilities.v1_1_1\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\r\n * full list of contributors). Published under the 2-clause BSD license.\r\n * See license.txt in the OpenLayers distribution or repository for the\r\n * full text of the license. */\r\n\r\n/**\r\n * @requires OpenLayers/Format/WMSCapabilities/v1.js\r\n */\r\n\r\n/**\r\n * Class: OpenLayers.Format.WMSCapabilities/v1_3\r\n * Abstract base class for WMS Capabilities version 1.3.X. \r\n * SLD 1.1.0 adds in the extra operations DescribeLayer and GetLegendGraphic, \r\n * see: http://schemas.opengis.net/sld/1.1.0/sld_capabilities.xsd\r\n * \r\n * Note on <MinScaleDenominator> and <MaxScaleDenominator> parsing: If\r\n * the <MinScaleDenominator> value is set to \"0\", no maxScale will be\r\n * set on the layer object. If the <MaxScaleDenominator> value is set to\r\n * \"Infinity\", no minScale will be set. This makes it easy to create proper\r\n * {<OpenLayers.Layer.WMS>} configurations directly from the layer object\r\n * literals returned by this format, because no minScale/maxScale modifications\r\n * need to be made.\r\n *\r\n * Inherits from:\r\n *  - <OpenLayers.Format.WMSCapabilities.v1>\r\n */\r\nOpenLayers.Format.WMSCapabilities.v1_3 = OpenLayers.Class(\r\n    OpenLayers.Format.WMSCapabilities.v1, {\r\n    \r\n    /**\r\n     * Property: readers\r\n     * Contains public functions, grouped by namespace prefix, that will\r\n     *     be applied when a namespaced node is found matching the function\r\n     *     name.  The function will be applied in the scope of this parser\r\n     *     with two arguments: the node being read and a context object passed\r\n     *     from the parent.\r\n     */\r\n    readers: {\r\n        \"wms\": OpenLayers.Util.applyDefaults({\r\n            \"WMS_Capabilities\": function(node, obj) {\r\n                this.readChildNodes(node, obj);\r\n            },\r\n            \"LayerLimit\": function(node, obj) {\r\n                obj.layerLimit = parseInt(this.getChildValue(node));\r\n            },\r\n            \"MaxWidth\": function(node, obj) {\r\n                obj.maxWidth = parseInt(this.getChildValue(node));\r\n            },\r\n            \"MaxHeight\": function(node, obj) {\r\n                obj.maxHeight = parseInt(this.getChildValue(node));\r\n            },\r\n            \"BoundingBox\": function(node, obj) {\r\n                var bbox = OpenLayers.Format.WMSCapabilities.v1.prototype.readers[\"wms\"].BoundingBox.apply(this, [node, obj]);\r\n                bbox.srs  = node.getAttribute(\"CRS\");\r\n                obj.bbox[bbox.srs] = bbox;\r\n            },\r\n            \"CRS\": function(node, obj) {\r\n                // CRS is the synonym of SRS\r\n                this.readers.wms.SRS.apply(this, [node, obj]); \r\n            },\r\n            \"EX_GeographicBoundingBox\": function(node, obj) {\r\n                // replacement of LatLonBoundingBox\r\n                obj.llbbox = [];\r\n                this.readChildNodes(node, obj.llbbox);\r\n                \r\n            },\r\n            \"westBoundLongitude\": function(node, obj) {\r\n                obj[0] = this.getChildValue(node);\r\n            },\r\n            \"eastBoundLongitude\": function(node, obj) {\r\n                obj[2] = this.getChildValue(node);\r\n            },\r\n            \"southBoundLatitude\": function(node, obj) {\r\n                obj[1] = this.getChildValue(node);\r\n            },\r\n            \"northBoundLatitude\": function(node, obj) {\r\n                obj[3] = this.getChildValue(node);\r\n            },\r\n            \"MinScaleDenominator\": function(node, obj) {\r\n                var maxScale = parseFloat(this.getChildValue(node)).toPrecision(16);\r\n                if (maxScale != 0) {\r\n                    obj.maxScale = maxScale;\r\n                }\r\n            },\r\n            \"MaxScaleDenominator\": function(node, obj) {\r\n                var minScale = parseFloat(this.getChildValue(node)).toPrecision(16);\r\n                if (minScale != Number.POSITIVE_INFINITY) {\r\n                    obj.minScale = minScale;\r\n                }\r\n            },\r\n            \"Dimension\": function(node, obj) {\r\n                // dimension has extra attributes: default, multipleValues, \r\n                // nearestValue, current which used to be part of Extent. It now\r\n                // also contains the values.\r\n                var name = node.getAttribute(\"name\").toLowerCase();\r\n                var dim = {\r\n                    name: name,\r\n                    units: node.getAttribute(\"units\"),\r\n                    unitsymbol: node.getAttribute(\"unitSymbol\"),\r\n                    nearestVal: node.getAttribute(\"nearestValue\") === \"1\",\r\n                    multipleVal: node.getAttribute(\"multipleValues\") === \"1\",\r\n                    \"default\": node.getAttribute(\"default\") || \"\",\r\n                    current: node.getAttribute(\"current\") === \"1\",\r\n                    values: this.getChildValue(node).split(\",\")\r\n                    \r\n                };\r\n                // Theoretically there can be more dimensions with the same\r\n                // name, but with a different unit. Until we meet such a case,\r\n                // let's just keep the same structure as the WMS 1.1 \r\n                // GetCapabilities parser uses. We will store the last\r\n                // one encountered.\r\n                obj.dimensions[dim.name] = dim;\r\n            },\r\n            \"Keyword\": function(node, obj) {\r\n                // TODO: should we change the structure of keyword in v1.js?\r\n                // Make it an object with a value instead of a string?\r\n                var keyword = {value: this.getChildValue(node), \r\n                    vocabulary: node.getAttribute(\"vocabulary\")};\r\n                if (obj.keywords) {\r\n                    obj.keywords.push(keyword);\r\n                }\r\n            }\r\n        }, OpenLayers.Format.WMSCapabilities.v1.prototype.readers[\"wms\"]),\r\n        \"sld\": {\r\n            \"UserDefinedSymbolization\": function(node, obj) {\r\n                this.readers.wms.UserDefinedSymbolization.apply(this, [node, obj]);\r\n                // add the two extra attributes\r\n                obj.userSymbols.inlineFeature = parseInt(node.getAttribute(\"InlineFeature\")) == 1;\r\n                obj.userSymbols.remoteWCS = parseInt(node.getAttribute(\"RemoteWCS\")) == 1;\r\n            },\r\n            \"DescribeLayer\": function(node, obj) {\r\n                this.readers.wms.DescribeLayer.apply(this, [node, obj]);\r\n            },\r\n            \"GetLegendGraphic\": function(node, obj) {\r\n                this.readers.wms.GetLegendGraphic.apply(this, [node, obj]);\r\n            }\r\n        }\r\n    },\r\n    \r\n    CLASS_NAME: \"OpenLayers.Format.WMSCapabilities.v1_3\" \r\n\r\n});\r\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\r\n * full list of contributors). Published under the 2-clause BSD license.\r\n * See license.txt in the OpenLayers distribution or repository for the\r\n * full text of the license. */\r\n\r\n/**\r\n * @requires OpenLayers/Format/WMSCapabilities/v1_3.js\r\n */\r\n\r\n/**\r\n * Class: OpenLayers.Format.WMSCapabilities/v1_3_0\r\n * Read WMS Capabilities version 1.3.0. \r\n * SLD 1.1.0 adds in the extra operations DescribeLayer and GetLegendGraphic, \r\n * see: http://schemas.opengis.net/sld/1.1.0/sld_capabilities.xsd\r\n * \r\n * Inherits from:\r\n *  - <OpenLayers.Format.WMSCapabilities.v1_3>\r\n */\r\nOpenLayers.Format.WMSCapabilities.v1_3_0 = OpenLayers.Class(\r\n    OpenLayers.Format.WMSCapabilities.v1_3, {\r\n    \r\n    /**\r\n     * Property: version\r\n     * {String} The specific parser version.\r\n     */\r\n    version: \"1.3.0\",\r\n    \r\n    CLASS_NAME: \"OpenLayers.Format.WMSCapabilities.v1_3_0\" \r\n\r\n});\r\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/WMSCapabilities/v1_1_1.js\n */\n\n/**\n * Class: OpenLayers.Format.WMSCapabilities/v1_1_1_WMSC\n * Read WMS-C Capabilities version 1.1.1.\n * \n * Inherits from:\n *  - <OpenLayers.Format.WMSCapabilities.v1_1_1>\n */\nOpenLayers.Format.WMSCapabilities.v1_1_1_WMSC = OpenLayers.Class(\n    OpenLayers.Format.WMSCapabilities.v1_1_1, {\n    \n    /**\n     * Property: version\n     * {String} The specific parser version.\n     */\n    version: \"1.1.1\",\n    \n    /**\n     * Property: profile\n     * {String} The specific profile\n     */\n    profile: \"WMSC\",\n    \n    /**\n     * Constructor: OpenLayers.Format.WMSCapabilities.v1_1_1\n     * Create a new parser for WMS-C capabilities version 1.1.1.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"wms\": OpenLayers.Util.applyDefaults({\n            \"VendorSpecificCapabilities\": function(node, obj) {\n                obj.vendorSpecific = {tileSets: []};\n                this.readChildNodes(node, obj.vendorSpecific);\n            },\n            \"TileSet\": function(node, vendorSpecific) {\n                var tileset = {srs: {}, bbox: {}, resolutions: []};\n                this.readChildNodes(node, tileset);\n                vendorSpecific.tileSets.push(tileset);\n            },\n            \"Resolutions\": function(node, tileset) {\n                var res = this.getChildValue(node).split(\" \");\n                for (var i=0, len=res.length; i<len; i++) {\n                    if (res[i] != \"\") {\n                        tileset.resolutions.push(parseFloat(res[i]));\n                    }\n                }\n            },\n            \"Width\": function(node, tileset) {\n                tileset.width = parseInt(this.getChildValue(node));\n            },\n            \"Height\": function(node, tileset) {\n                tileset.height = parseInt(this.getChildValue(node));\n            },\n            \"Layers\": function(node, tileset) {\n                tileset.layers = this.getChildValue(node);\n            },\n            \"Styles\": function(node, tileset) {\n                tileset.styles = this.getChildValue(node);\n            }\n        }, OpenLayers.Format.WMSCapabilities.v1_1_1.prototype.readers[\"wms\"])\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.WMSCapabilities.v1_1_1_WMSC\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML.js\n */\n\n/**\n * Class: OpenLayers.Format.WMSGetFeatureInfo\n * Class to read GetFeatureInfo responses from Web Mapping Services\n *\n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.WMSGetFeatureInfo = OpenLayers.Class(OpenLayers.Format.XML, {\n\n    /**\n     * APIProperty: layerIdentifier\n     * {String} All xml nodes containing this search criteria will populate an\n     *     internal array of layer nodes.\n     */\n    layerIdentifier: '_layer',\n\n    /**\n     * APIProperty: featureIdentifier\n     * {String} All xml nodes containing this search criteria will populate an\n     *     internal array of feature nodes for each layer node found.\n     */\n    featureIdentifier: '_feature',\n\n    /**\n     * Property: regExes\n     * Compiled regular expressions for manipulating strings.\n     */\n    regExes: {\n        trimSpace: (/^\\s*|\\s*$/g),\n        removeSpace: (/\\s*/g),\n        splitSpace: (/\\s+/),\n        trimComma: (/\\s*,\\s*/g)\n    },\n\n    /**\n     * Property: gmlFormat\n     * {<OpenLayers.Format.GML>} internal GML format for parsing geometries\n     *     in msGMLOutput\n     */\n    gmlFormat: null,\n\n    /**\n     * Constructor: OpenLayers.Format.WMSGetFeatureInfo\n     * Create a new parser for WMS GetFeatureInfo responses\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * APIMethod: read\n     * Read WMS GetFeatureInfo data from a string, and return an array of features\n     *\n     * Parameters:\n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Array(<OpenLayers.Feature.Vector>)} An array of features.\n     */\n    read: function(data) {\n        var result;\n        if(typeof data == \"string\") {\n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n        var root = data.documentElement;\n        if(root) {\n            var scope = this;\n            var read = this[\"read_\" + root.nodeName];\n            if(read) {\n                result = read.call(this, root);\n            } else {\n                // fall-back to GML since this is a common output format for WMS\n                // GetFeatureInfo responses\n                result = new OpenLayers.Format.GML((this.options ? this.options : {})).read(data);\n            }\n        } else {\n            result = data;\n        }\n        return result;\n    },\n\n\n    /**\n     * Method: read_msGMLOutput\n     * Parse msGMLOutput nodes.\n     *\n     * Parameters:\n     * data - {DOMElement}\n     *\n     * Returns:\n     * {Array}\n     */\n    read_msGMLOutput: function(data) {\n        var response = [];\n        var layerNodes = this.getSiblingNodesByTagCriteria(data,\n            this.layerIdentifier);\n        if (layerNodes) {\n            for (var i=0, len=layerNodes.length; i<len; ++i) {\n                var node = layerNodes[i];\n                var layerName = node.nodeName;\n                if (node.prefix) {\n                    layerName = layerName.split(':')[1];\n                }\n                var layerName = layerName.replace(this.layerIdentifier, '');\n                var featureNodes = this.getSiblingNodesByTagCriteria(node,\n                    this.featureIdentifier);\n                if (featureNodes) {\n                    for (var j = 0; j < featureNodes.length; j++) {\n                        var featureNode = featureNodes[j];\n                        var geomInfo = this.parseGeometry(featureNode);\n                        var attributes = this.parseAttributes(featureNode);\n                        var feature = new OpenLayers.Feature.Vector(geomInfo.geometry,\n                            attributes, null);\n                        feature.bounds = geomInfo.bounds;\n                        feature.type = layerName;\n                        response.push(feature);\n                    }\n                }\n            }\n        }\n        return response;\n    },\n\n    /**\n     * Method: read_FeatureInfoResponse\n     * Parse FeatureInfoResponse nodes.\n     *\n     * Parameters:\n     * data - {DOMElement}\n     *\n     * Returns:\n     * {Array}\n     */\n    read_FeatureInfoResponse: function(data) {\n        var response = [];\n        var featureNodes = this.getElementsByTagNameNS(data, '*',\n            'FIELDS');\n\n        for(var i=0, len=featureNodes.length;i<len;i++) {\n            var featureNode = featureNodes[i];\n            var geom = null;\n\n            // attributes can be actual attributes on the FIELDS tag,\n            // or FIELD children\n            var attributes = {};\n            var j;\n            var jlen = featureNode.attributes.length;\n            if (jlen > 0) {\n                for(j=0; j<jlen; j++) {\n                    var attribute = featureNode.attributes[j];\n                    attributes[attribute.nodeName] = attribute.nodeValue;\n                }\n            } else {\n                var nodes = featureNode.childNodes;\n                for (j=0, jlen=nodes.length; j<jlen; ++j) {\n                    var node = nodes[j];\n                    if (node.nodeType != 3) {\n                        attributes[node.getAttribute(\"name\")] =\n                            node.getAttribute(\"value\");\n                    }\n                }\n            }\n\n            response.push(\n                new OpenLayers.Feature.Vector(geom, attributes, null)\n            );\n        }\n        return response;\n    },\n\n    /**\n     * Method: getSiblingNodesByTagCriteria\n     * Recursively searches passed xml node and all it's descendant levels for\n     *     nodes whose tagName contains the passed search string. This returns an\n     *     array of all sibling nodes which match the criteria from the highest\n     *     hierarchial level from which a match is found.\n     *\n     * Parameters:\n     * node - {DOMElement} An xml node\n     * criteria - {String} Search string which will match some part of a tagName\n     *\n     * Returns:\n     * Array({DOMElement}) An array of sibling xml nodes\n     */\n    getSiblingNodesByTagCriteria: function(node, criteria){\n        var nodes = [];\n        var children, tagName, n, matchNodes, child;\n        if (node && node.hasChildNodes()) {\n            children = node.childNodes;\n            n = children.length;\n\n            for(var k=0; k<n; k++){\n                child = children[k];\n                while (child && child.nodeType != 1) {\n                    child = child.nextSibling;\n                    k++;\n                }\n                tagName = (child ? child.nodeName : '');\n                if (tagName.length > 0 && tagName.indexOf(criteria) > -1) {\n                    nodes.push(child);\n                } else {\n                    matchNodes = this.getSiblingNodesByTagCriteria(\n                        child, criteria);\n\n                    if(matchNodes.length > 0){\n                        (nodes.length == 0) ?\n                            nodes = matchNodes : nodes.push(matchNodes);\n                    }\n                }\n            }\n\n        }\n        return nodes;\n    },\n\n    /**\n     * Method: parseAttributes\n     *\n     * Parameters:\n     * node - {<DOMElement>}\n     *\n     * Returns:\n     * {Object} An attributes object.\n     *\n     * Notes:\n     * Assumes that attributes are direct child xml nodes of the passed node\n     * and contain only a single text node.\n     */\n    parseAttributes: function(node){\n        var attributes = {};\n        if (node.nodeType == 1) {\n            var children = node.childNodes;\n            var n = children.length;\n            for (var i = 0; i < n; ++i) {\n                var child = children[i];\n                if (child.nodeType == 1) {\n                    var grandchildren = child.childNodes;\n                    var name = (child.prefix) ?\n                        child.nodeName.split(\":\")[1] : child.nodeName;\n                    if (grandchildren.length == 0) {\n                        attributes[name] = null;\n                    } else if (grandchildren.length == 1 ||\n                            // to include separate big tag (with Firefox)\n                            // without including boundedBy and geom.\n                            grandchildren[0].nodeValue.replace(\n                                this.regExes.trimSpace, \"\").length > 0) {\n                        var grandchild = grandchildren[0];\n                        if (grandchild.nodeType == 3 ||\n                                grandchild.nodeType == 4) {\n                            // wholeText doesn't exist everywhere but we need it for FireFox\n                            // see i.e.: http://msdn.microsoft.com/en-us/library/ie/ff974769%28v=vs.85%29.aspx\n                            var attribute = grandchild.wholeText ?\n                                grandchild.wholeText :\n                                grandchild.nodeValue;\n                            attributes[name] = attribute.replace(\n                                    this.regExes.trimSpace, \"\");\n                        }\n                    }\n                }\n            }\n        }\n        return attributes;\n    },\n\n    /**\n     * Method: parseGeometry\n     * Parse the geometry and the feature bounds out of the node using\n     *     Format.GML\n     *\n     * Parameters:\n     * node - {<DOMElement>}\n     *\n     * Returns:\n     * {Object} An object containing the geometry and the feature bounds\n    */\n    parseGeometry: function(node) {\n        // we need to use the old Format.GML parser since we do not know the\n        // geometry name\n        if (!this.gmlFormat) {\n            this.gmlFormat = new OpenLayers.Format.GML();\n        }\n        var feature = this.gmlFormat.parseFeature(node);\n        var geometry, bounds = null;\n        if (feature) {\n            geometry = feature.geometry && feature.geometry.clone();\n            bounds = feature.bounds && feature.bounds.clone();\n            feature.destroy();\n        }\n        return {geometry: geometry, bounds: bounds};\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.WMSGetFeatureInfo\"\n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML/VersionedOGC.js\n */\n \n/**\n * Class: OpenLayers.Format.SOSCapabilities\n * Read SOS Capabilities.\n * \n * Inherits from:\n *  - <OpenLayers.Format.XML.VersionedOGC>\n */\nOpenLayers.Format.SOSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {\n    \n    /**\n     * APIProperty: defaultVersion\n     * {String} Version number to assume if none found.  Default is \"1.0.0\".\n     */\n    defaultVersion: \"1.0.0\",\n    \n    /**\n     * Constructor: OpenLayers.Format.SOSCapabilities\n     * Create a new parser for SOS Capabilities.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * APIMethod: read\n     * Read capabilities data from a string, and return information about\n     * the service (offering and observedProperty mostly).\n     * \n     * Parameters: \n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Object} Info about the SOS\n     */\n    \n    CLASS_NAME: \"OpenLayers.Format.SOSCapabilities\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/SOSCapabilities.js\n * @requires OpenLayers/Format/OWSCommon/v1_1_0.js\n * @requires OpenLayers/Format/GML/v3.js\n */\n\n/**\n * Class: OpenLayers.Format.SOSCapabilities.v1_0_0\n * Read SOS Capabilities version 1.0.0.\n * \n * Inherits from:\n *  - <OpenLayers.Format.SOSCapabilities>\n */\nOpenLayers.Format.SOSCapabilities.v1_0_0 = OpenLayers.Class(\n    OpenLayers.Format.SOSCapabilities, {\n\n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        ows: \"http://www.opengis.net/ows/1.1\",\n        sos: \"http://www.opengis.net/sos/1.0\",\n        gml: \"http://www.opengis.net/gml\",\n        xlink: \"http://www.w3.org/1999/xlink\"\n    },\n\n    /**\n     * Property: regExes\n     * Compiled regular expressions for manipulating strings.\n     */\n    regExes: {\n        trimSpace: (/^\\s*|\\s*$/g),\n        removeSpace: (/\\s*/g),\n        splitSpace: (/\\s+/),\n        trimComma: (/\\s*,\\s*/g)\n    },\n    \n    /**\n     * Constructor: OpenLayers.Format.SOSCapabilities.v1_0_0\n     * Create a new parser for SOS capabilities version 1.0.0. \n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    initialize: function(options) {\n        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);\n        this.options = options;\n    },\n\n    /**\n     * APIMethod: read\n     * Read capabilities data from a string, and return info about the SOS.\n     * \n     * Parameters: \n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Object} Information about the SOS service.\n     */\n    read: function(data) {\n        if(typeof data == \"string\") {\n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n        if(data && data.nodeType == 9) {\n            data = data.documentElement;\n        }\n        var capabilities = {};\n        this.readNode(data, capabilities);\n        return capabilities;\n    },\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"gml\": OpenLayers.Util.applyDefaults({\n            \"name\": function(node, obj) {\n                obj.name = this.getChildValue(node);\n            },\n            \"TimePeriod\": function(node, obj) {\n                obj.timePeriod = {};\n                this.readChildNodes(node, obj.timePeriod);\n            },\n            \"beginPosition\": function(node, timePeriod) {\n                timePeriod.beginPosition = this.getChildValue(node);\n            },\n            \"endPosition\": function(node, timePeriod) {\n                timePeriod.endPosition = this.getChildValue(node);\n            }\n        }, OpenLayers.Format.GML.v3.prototype.readers[\"gml\"]),\n        \"sos\": {\n            \"Capabilities\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"Contents\": function(node, obj) {\n                obj.contents = {};\n                this.readChildNodes(node, obj.contents);\n            },\n            \"ObservationOfferingList\": function(node, contents) {\n                contents.offeringList = {};\n                this.readChildNodes(node, contents.offeringList);\n            },\n            \"ObservationOffering\": function(node, offeringList) {\n                var id = this.getAttributeNS(node, this.namespaces.gml, \"id\");\n                offeringList[id] = {\n                    procedures: [],\n                    observedProperties: [],\n                    featureOfInterestIds: [],\n                    responseFormats: [],\n                    resultModels: [],\n                    responseModes: []\n                };\n                this.readChildNodes(node, offeringList[id]);\n            },\n            \"time\": function(node, offering) {\n                offering.time = {};\n                this.readChildNodes(node, offering.time);\n            },\n            \"procedure\": function(node, offering) {\n                offering.procedures.push(this.getAttributeNS(node, \n                    this.namespaces.xlink, \"href\"));\n            },\n            \"observedProperty\": function(node, offering) {\n                offering.observedProperties.push(this.getAttributeNS(node, \n                    this.namespaces.xlink, \"href\"));\n            },\n            \"featureOfInterest\": function(node, offering) {\n                offering.featureOfInterestIds.push(this.getAttributeNS(node, \n                    this.namespaces.xlink, \"href\"));\n            },\n            \"responseFormat\": function(node, offering) {\n                offering.responseFormats.push(this.getChildValue(node));\n            },\n            \"resultModel\": function(node, offering) {\n                offering.resultModels.push(this.getChildValue(node));\n            },\n            \"responseMode\": function(node, offering) {\n                offering.responseModes.push(this.getChildValue(node));\n            }\n        },\n        \"ows\": OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers[\"ows\"]\n    },    \n    \n    CLASS_NAME: \"OpenLayers.Format.SOSCapabilities.v1_0_0\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n \n/**\n * @requires OpenLayers/Format/XML.js\n * @requires OpenLayers/Format/GML/v3.js\n */\n\n/**\n * Class: OpenLayers.Format.SOSGetFeatureOfInterest\n * Read and write SOS GetFeatureOfInterest. This is used to get to\n * the location of the features (stations). The stations can have 1 or more\n * sensors.\n *\n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.SOSGetFeatureOfInterest = OpenLayers.Class(\n    OpenLayers.Format.XML, {\n    \n    /**\n     * Constant: VERSION\n     * {String} 1.0.0\n     */\n    VERSION: \"1.0.0\",\n\n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        sos: \"http://www.opengis.net/sos/1.0\",\n        gml: \"http://www.opengis.net/gml\",\n        sa: \"http://www.opengis.net/sampling/1.0\",\n        xsi: \"http://www.w3.org/2001/XMLSchema-instance\"\n    },\n\n    /**\n     * Property: schemaLocation\n     * {String} Schema location\n     */\n    schemaLocation: \"http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd\",\n\n    /**\n     * Property: defaultPrefix\n     */\n    defaultPrefix: \"sos\",\n\n    /**\n     * Property: regExes\n     * Compiled regular expressions for manipulating strings.\n     */\n    regExes: {\n        trimSpace: (/^\\s*|\\s*$/g),\n        removeSpace: (/\\s*/g),\n        splitSpace: (/\\s+/),\n        trimComma: (/\\s*,\\s*/g)\n    },\n    \n    /**\n     * Constructor: OpenLayers.Format.SOSGetFeatureOfInterest\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * APIMethod: read\n     * Parse a GetFeatureOfInterest response and return an array of features\n     * \n     * Parameters: \n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Array(<OpenLayers.Feature.Vector>)} An array of features. \n     */\n    read: function(data) {\n        if(typeof data == \"string\") {\n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n        if(data && data.nodeType == 9) {\n            data = data.documentElement;\n        }\n\n        var info = {features: []};\n        this.readNode(data, info);\n       \n        var features = [];\n        for (var i=0, len=info.features.length; i<len; i++) {\n            var container = info.features[i];\n            // reproject features if needed\n            if(this.internalProjection && this.externalProjection &&\n                container.components[0]) {\n                    container.components[0].transform(\n                        this.externalProjection, this.internalProjection\n                    );\n            }             \n            var feature = new OpenLayers.Feature.Vector(\n                container.components[0], container.attributes);\n            features.push(feature);\n        }\n        return features;\n    },\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"sa\": {\n            \"SamplingPoint\": function(node, obj) {\n                // sampling point can also be without a featureMember if \n                // there is only 1\n                if (!obj.attributes) {\n                    var feature = {attributes: {}};\n                    obj.features.push(feature);\n                    obj = feature;\n                }\n                obj.attributes.id = this.getAttributeNS(node, \n                    this.namespaces.gml, \"id\");\n                this.readChildNodes(node, obj);\n            },\n            \"position\": function (node, obj) {\n                this.readChildNodes(node, obj);\n            }\n        },\n        \"gml\": OpenLayers.Util.applyDefaults({\n            \"FeatureCollection\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"featureMember\": function(node, obj) {\n                var feature = {attributes: {}};\n                obj.features.push(feature);\n                this.readChildNodes(node, feature);\n            },\n            \"name\": function(node, obj) {\n                obj.attributes.name = this.getChildValue(node);\n            },\n            \"pos\": function(node, obj) {\n                // we need to parse the srsName to get to the \n                // externalProjection, that's why we cannot use\n                // GML v3 for this\n                if (!this.externalProjection) {\n                    this.externalProjection = new OpenLayers.Projection(\n                        node.getAttribute(\"srsName\"));\n                }\n             OpenLayers.Format.GML.v3.prototype.readers.gml.pos.apply(\n                    this, [node, obj]);\n            }\n        }, OpenLayers.Format.GML.v3.prototype.readers.gml)\n    },\n    \n    /**\n     * Property: writers\n     * As a compliment to the readers property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: {\n        \"sos\": {\n            \"GetFeatureOfInterest\": function(options) {\n                var node = this.createElementNSPlus(\"GetFeatureOfInterest\", {\n                    attributes: {\n                        version: this.VERSION,\n                        service: 'SOS',\n                        \"xsi:schemaLocation\": this.schemaLocation\n                    } \n                }); \n                for (var i=0, len=options.fois.length; i<len; i++) {\n                    this.writeNode(\"FeatureOfInterestId\", {foi: options.fois[i]}, node);\n                }\n                return node; \n            },\n            \"FeatureOfInterestId\": function(options) {\n                var node = this.createElementNSPlus(\"FeatureOfInterestId\", {value: options.foi});\n                return node;\n            }\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.SOSGetFeatureOfInterest\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML.js\n * @requires OpenLayers/Format/SOSGetFeatureOfInterest.js\n */\n\n/**\n * Class: OpenLayers.Format.SOSGetObservation\n * Read and write SOS GetObersation (to get the actual values from a sensor) \n *     version 1.0.0\n *\n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.SOSGetObservation = OpenLayers.Class(OpenLayers.Format.XML, {\n    \n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        ows: \"http://www.opengis.net/ows\",\n        gml: \"http://www.opengis.net/gml\",\n        sos: \"http://www.opengis.net/sos/1.0\",\n        ogc: \"http://www.opengis.net/ogc\",\n        om: \"http://www.opengis.net/om/1.0\",\n        sa: \"http://www.opengis.net/sampling/1.0\",\n        xlink: \"http://www.w3.org/1999/xlink\",\n        xsi: \"http://www.w3.org/2001/XMLSchema-instance\",\n        xmlns: \"http://www.w3.org/2000/xmlns/\"\n    },\n\n    /**\n     * Property: regExes\n     * Compiled regular expressions for manipulating strings.\n     */\n    regExes: {\n        trimSpace: (/^\\s*|\\s*$/g),\n        removeSpace: (/\\s*/g),\n        splitSpace: (/\\s+/),\n        trimComma: (/\\s*,\\s*/g)\n    },\n\n    /**\n     * Constant: VERSION\n     * {String} 1.0.0\n     */\n    VERSION: \"1.0.0\",\n\n    /**\n     * Property: schemaLocation\n     * {String} Schema location\n     */\n    schemaLocation: \"http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosGetObservation.xsd\",\n\n    /**\n     * Property: defaultPrefix\n     */\n    defaultPrefix: \"sos\",\n\n    /**\n     * Constructor: OpenLayers.Format.SOSGetObservation\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * Method: read\n     * \n     * Parameters: \n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Object} An object containing the measurements\n     */\n    read: function(data) {\n        if(typeof data == \"string\") {\n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n        if(data && data.nodeType == 9) {\n            data = data.documentElement;\n        }\n        var info = {measurements: [], observations: []};\n        this.readNode(data, info);\n        return info;\n    },\n\n    /**\n     * Method: write\n     *\n     * Parameters:\n     * options - {Object} Optional object.\n     *\n     * Returns:\n     * {String} An SOS GetObservation request XML string.\n     */\n    write: function(options) {\n        var node = this.writeNode(\"sos:GetObservation\", options);\n        this.setAttributeNS(\n            node, this.namespaces.xmlns,\n            \"xmlns:om\", this.namespaces.om\n        );\n        this.setAttributeNS(\n            node, this.namespaces.xmlns,\n            \"xmlns:ogc\", this.namespaces.ogc\n        );\n        this.setAttributeNS(\n            node, this.namespaces.xsi,\n            \"xsi:schemaLocation\", this.schemaLocation\n        );\n        return OpenLayers.Format.XML.prototype.write.apply(this, [node]);\n    }, \n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"om\": {\n            \"ObservationCollection\": function(node, obj) {\n                obj.id = this.getAttributeNS(node, this.namespaces.gml, \"id\");\n                this.readChildNodes(node, obj);\n            },\n            \"member\": function(node, observationCollection) {\n                this.readChildNodes(node, observationCollection);\n            },\n            \"Measurement\": function(node, observationCollection) {\n                var measurement = {};\n                observationCollection.measurements.push(measurement);\n                this.readChildNodes(node, measurement);\n            },\n            \"Observation\": function(node, observationCollection) {\n                var observation = {};\n                observationCollection.observations.push(observation);\n                this.readChildNodes(node, observation);\n            },\n            \"samplingTime\": function(node, measurement) {\n                var samplingTime = {};\n                measurement.samplingTime = samplingTime;\n                this.readChildNodes(node, samplingTime);\n            },\n            \"observedProperty\": function(node, measurement) {\n                measurement.observedProperty = \n                    this.getAttributeNS(node, this.namespaces.xlink, \"href\");\n                this.readChildNodes(node, measurement);\n            },\n            \"procedure\": function(node, measurement) {\n                measurement.procedure = \n                    this.getAttributeNS(node, this.namespaces.xlink, \"href\");\n                this.readChildNodes(node, measurement);\n            },\n            \"featureOfInterest\": function(node, observation) {\n                var foi = {features: []};\n                observation.fois = [];\n                observation.fois.push(foi);\n                this.readChildNodes(node, foi);\n                // postprocessing to get actual features\n                var features = [];\n                for (var i=0, len=foi.features.length; i<len; i++) {\n                    var feature = foi.features[i];\n                    features.push(new OpenLayers.Feature.Vector(\n                        feature.components[0], feature.attributes));\n                }\n                foi.features = features;\n            },\n            \"result\": function(node, measurement) {\n                var result = {};\n                measurement.result = result;\n                if (this.getChildValue(node) !== '') {\n                    result.value = this.getChildValue(node);\n                    result.uom = node.getAttribute(\"uom\");\n                } else {\n                    this.readChildNodes(node, result);\n                }\n            }\n        },\n        \"sa\": OpenLayers.Format.SOSGetFeatureOfInterest.prototype.readers.sa,\n        \"gml\": OpenLayers.Util.applyDefaults({\n            \"TimeInstant\": function(node, samplingTime) {\n               var timeInstant = {};\n                samplingTime.timeInstant = timeInstant;\n                this.readChildNodes(node, timeInstant);\n            },\n            \"timePosition\": function(node, timeInstant) {\n                timeInstant.timePosition = this.getChildValue(node);\n            }\n        }, OpenLayers.Format.SOSGetFeatureOfInterest.prototype.readers.gml)\n    },\n\n    /**\n     * Property: writers\n     * As a compliment to the readers property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: {\n        \"sos\": {\n            \"GetObservation\": function(options) {\n                var node = this.createElementNSPlus(\"GetObservation\", {\n                    attributes: {\n                        version: this.VERSION,\n                        service: 'SOS'\n                    } \n                }); \n                this.writeNode(\"offering\", options, node);\n                if (options.eventTime) {\n                    this.writeNode(\"eventTime\", options, node);\n                }\n                for (var procedure in options.procedures) {\n                    this.writeNode(\"procedure\", options.procedures[procedure], node);\n                }\n                for (var observedProperty in options.observedProperties) {\n                    this.writeNode(\"observedProperty\", options.observedProperties[observedProperty], node);\n                }\n                if (options.foi) {\n                    this.writeNode(\"featureOfInterest\", options.foi, node);\n                }\n                this.writeNode(\"responseFormat\", options, node);\n                if (options.resultModel) {\n                    this.writeNode(\"resultModel\", options, node);\n                }\n                if (options.responseMode) {\n                    this.writeNode(\"responseMode\", options, node);\n                }\n                return node; \n            },\n            \"featureOfInterest\": function(foi) {\n                var node = this.createElementNSPlus(\"featureOfInterest\");\n                this.writeNode(\"ObjectID\", foi.objectId, node);\n                return node;\n            },\n            \"ObjectID\": function(options) {\n                return this.createElementNSPlus(\"ObjectID\",\n                    {value: options});\n            },\n            \"responseFormat\": function(options) {\n                return this.createElementNSPlus(\"responseFormat\", \n                    {value: options.responseFormat});\n            },\n            \"procedure\": function(procedure) {\n                return this.createElementNSPlus(\"procedure\", \n                    {value: procedure});\n            },\n            \"offering\": function(options) {\n                return this.createElementNSPlus(\"offering\", {value: \n                    options.offering});\n            },\n            \"observedProperty\": function(observedProperty) {\n                return this.createElementNSPlus(\"observedProperty\", \n                    {value: observedProperty});\n            },\n            \"eventTime\": function(options) {\n                var node = this.createElementNSPlus(\"eventTime\");\n                if (options.eventTime === 'latest') {\n                    this.writeNode(\"ogc:TM_Equals\", options, node);\n                }\n                return node;\n            },\n            \"resultModel\": function(options) {\n                return this.createElementNSPlus(\"resultModel\", {value: \n                    options.resultModel});\n            },\n            \"responseMode\": function(options) {\n                return this.createElementNSPlus(\"responseMode\", {value: \n                    options.responseMode});\n            }\n        },\n        \"ogc\": {\n            \"TM_Equals\": function(options) {\n                var node = this.createElementNSPlus(\"ogc:TM_Equals\");\n                this.writeNode(\"ogc:PropertyName\", {property: \n                    \"urn:ogc:data:time:iso8601\"}, node);\n                if (options.eventTime === 'latest') {\n                    this.writeNode(\"gml:TimeInstant\", {value: 'latest'}, node);\n                }\n                return node;\n            },\n            \"PropertyName\": function(options) {\n                return this.createElementNSPlus(\"ogc:PropertyName\", \n                    {value: options.property});\n            }\n        },\n        \"gml\": {\n            \"TimeInstant\": function(options) {\n                var node = this.createElementNSPlus(\"gml:TimeInstant\");\n                this.writeNode(\"gml:timePosition\", options, node);\n                return node;\n            },\n            \"timePosition\": function(options) {\n                var node = this.createElementNSPlus(\"gml:timePosition\", \n                    {value: options.value});\n                return node;\n            }\n        }\n    },\n    \n    CLASS_NAME: \"OpenLayers.Format.SOSGetObservation\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/Context.js\n */\n\n/**\n * Class: OpenLayers.Format.OWSContext\n * Read and write OWS Context documents. OWS Context documents are a \n * preliminary OGC (Open Geospatial Consortium) standard for storing the \n * state of a web mapping application. In a way it is the successor to\n * Web Map Context (WMC), since it is more generic and more types of layers\n * can be stored. Also, nesting of layers is supported since version 0.3.1.\n * For more information see: http://www.ogcnetwork.net/context\n *\n * Inherits from:\n *  - <OpenLayers.Format.Context>\n */\nOpenLayers.Format.OWSContext = OpenLayers.Class(OpenLayers.Format.Context,{\n    \n    /**\n     * APIProperty: defaultVersion\n     * {String} Version number to assume if none found.  Default is \"0.3.1\".\n     */\n    defaultVersion: \"0.3.1\",\n\n    /**\n     * Constructor: OpenLayers.Format.OWSContext\n     * Create a new parser for OWS Context documents.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    \n    /**\n     * Method: getVersion\n     * Returns the version to use. Subclasses can override this function\n     * if a different version detection is needed.\n     *\n     * Parameters:\n     * root - {DOMElement}\n     * options - {Object} Optional configuration object.\n     *\n     * Returns:\n     * {String} The version to use.\n     */\n    getVersion: function(root, options) {\n        var version = OpenLayers.Format.XML.VersionedOGC.prototype.getVersion.apply(\n            this, arguments);\n        // 0.3.1 is backwards compatible with 0.3.0\n        if (version === \"0.3.0\") {\n            version = this.defaultVersion;\n        }\n        return version;\n    },\n\n    /**\n     * Method: toContext\n     * Create a context object free from layer given a map or a\n     * context object.\n     *\n     * Parameters:\n     * obj - {<OpenLayers.Map> | Object} The map or context.\n     *\n     * Returns:\n     * {Object} A context object.\n     */\n    toContext: function(obj) {\n        var context = {};\n        if(obj.CLASS_NAME == \"OpenLayers.Map\") {\n            context.bounds = obj.getExtent();\n            context.maxExtent = obj.maxExtent;\n            context.projection = obj.projection;\n            context.size = obj.getSize();\n            context.layers = obj.layers;\n        }\n        return context;\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.OWSContext\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML.js\n * @requires OpenLayers/Format/KML.js\n * @requires OpenLayers/Format/GML.js\n * @requires OpenLayers/Format/GML/v2.js\n * @requires OpenLayers/Format/SLD/v1_0_0.js\n * @requires OpenLayers/Format/OWSContext.js\n * @requires OpenLayers/Format/OWSCommon/v1_0_0.js\n */\n\n/**\n * Class: OpenLayers.Format.OWSContext.v0_3_1\n * Read and write OWSContext version 0.3.1.\n *\n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.OWSContext.v0_3_1 = OpenLayers.Class(OpenLayers.Format.XML, {\n\n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        owc: \"http://www.opengis.net/ows-context\",\n        gml: \"http://www.opengis.net/gml\",\n        kml: \"http://www.opengis.net/kml/2.2\",\n        ogc: \"http://www.opengis.net/ogc\",\n        ows: \"http://www.opengis.net/ows\",\n        sld: \"http://www.opengis.net/sld\",\n        xlink: \"http://www.w3.org/1999/xlink\",\n        xsi: \"http://www.w3.org/2001/XMLSchema-instance\"\n    },\n\n    /**\n     * Constant: VERSION\n     * {String} 0.3.1\n     */\n    VERSION: \"0.3.1\",\n\n    /**\n     * Property: schemaLocation\n     * {String} Schema location\n     */\n    schemaLocation: \"http://www.opengis.net/ows-context http://www.ogcnetwork.net/schemas/owc/0.3.1/owsContext.xsd\",\n\n    /**\n     * Property: defaultPrefix\n     * {String} Default namespace prefix to use.\n     */\n    defaultPrefix: \"owc\",\n\n    /**\n     * APIProperty: extractAttributes\n     * {Boolean} Extract attributes from GML.  Default is true.\n     */\n    extractAttributes: true,\n\n    /**\n     * APIProperty: xy\n     * {Boolean} Order of the GML coordinate true:(x,y) or false:(y,x)\n     * Changing is not recommended, a new Format should be instantiated.\n     */\n    xy: true,\n\n    /**\n     * Property: regExes\n     * Compiled regular expressions for manipulating strings.\n     */\n    regExes: {\n        trimSpace: (/^\\s*|\\s*$/g),\n        removeSpace: (/\\s*/g),\n        splitSpace: (/\\s+/),\n        trimComma: (/\\s*,\\s*/g)\n    },\n\n    /**\n     * Property: featurePrefix\n     * {String} The namespace prefix to use for writing InlineGeometry\n     */\n    featurePrefix: \"feature\",\n\n    /**\n     * Property: featureNS\n     * {String} The namespace uri to use for writing InlineGeometry\n     */\n    featureNS: \"http://mapserver.gis.umn.edu/mapserver\",\n\n    /**\n     * Property: featureType\n     * {String} The name to use as the feature type when writing out\n     *     InlineGeometry\n     */\n    featureType: 'vector',\n\n    /**\n     * Property: geometryName\n     * {String} The name to use for the geometry attribute when writing out\n     *     InlineGeometry\n     */\n    geometryName: 'geometry',\n\n    /**\n     * Property: nestingLayerLookup\n     * {Object} Hashtable lookup for nesting layer nodes. Used while writing\n     *     the OWS context document. It is necessary to keep track of the\n     *     nestingPaths for which nesting layer nodes have already been\n     *     created, so (nesting) layer nodes are added to those nodes.\n     *\n     * For example:\n     *\n     *     If there are three layers with nestingPaths:\n     *         layer1.metadata.nestingPath = \"a/b/\"\n     *         layer2.metadata.nestingPath = \"a/b/\"\n     *         layer2.metadata.nestingPath = \"a/c\"\n     *\n     *     then a nesting layer node \"a\" should be created once and added\n     *     to the resource list, a nesting layer node \"b\" should be created\n     *     once and added under \"a\", and a nesting layer node \"c\" should be\n     *     created and added under \"a\". The lookup paths for these nodes\n     *     will be \"a\", \"a/b\", and \"a/c\" respectively.\n     */\n    nestingLayerLookup: null,\n\n    /**\n     * Constructor: OpenLayers.Format.OWSContext.v0_3_1\n     * Instances of this class are not created directly.  Use the\n     *     <OpenLayers.Format.OWSContext> constructor instead.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    initialize: function(options) {\n        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);\n        OpenLayers.Format.GML.v2.prototype.setGeometryTypes.call(this);\n    },\n\n    /**\n     * Method: setNestingPath\n     * Set the nestingPath property of the layer depending on the position\n     *     of the layer in hierarchy of layers.\n     *\n     * Parameters:\n     * l - {Object} An object that may have a layersContext array property.\n     *\n     */\n    setNestingPath : function(l){\n        if(l.layersContext){\n            for (var i = 0, len = l.layersContext.length; i < len; i++) {\n                var layerContext = l.layersContext[i];\n                var nPath = [];\n                var nTitle = l.title || \"\";\n                if(l.metadata && l.metadata.nestingPath){\n                    nPath = l.metadata.nestingPath.slice();\n                }\n                if (nTitle != \"\") {\n                    nPath.push(nTitle);\n                }\n                layerContext.metadata.nestingPath = nPath;\n                if(layerContext.layersContext){\n                    this.setNestingPath(layerContext);\n                }\n            }\n        }\n    },\n\n    /**\n     * Function: decomposeNestingPath\n     * Takes a nestingPath like \"a/b/c\" and decomposes it into subpaths:\n     * \"a\", \"a/b\", \"a/b/c\"\n     *\n     * Parameters:\n     * nPath  - {Array} the nesting path\n     *\n     * Returns:\n     * Array({String}) Array with subpaths, or empty array if there is nothing\n     *     to decompose\n     */\n    decomposeNestingPath: function(nPath){\n        var a = [];\n        if (OpenLayers.Util.isArray(nPath)) {\n            var path = nPath.slice();\n            while (path.length > 0) {\n                a.push(path.slice());\n                path.pop();\n            }\n            a.reverse();\n        }\n        return a;\n    },\n\n    /**\n     * APIMethod: read\n     * Read OWS context data from a string or DOMElement, and return a list\n     *     of layers.\n     *\n     * Parameters:\n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Object} The context object with a flat layer list as a property named\n     *     layersContext.\n     */\n    read: function(data) {\n        if(typeof data == \"string\") {\n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n        if(data && data.nodeType == 9) {\n            data = data.documentElement;\n        }\n        var context = {};\n        this.readNode(data, context);\n        // since an OWSContext can be nested we need to go through this\n        // structure recursively\n        this.setNestingPath({layersContext : context.layersContext});\n        // after nesting path has been set, create a flat list of layers\n        var layers = [];\n        this.processLayer(layers, context);\n        delete context.layersContext;\n        context.layersContext = layers;\n        return context;\n    },\n\n    /**\n     * Method: processLayer\n     * Recursive function to get back a flat list of layers from the hierarchic\n     *     layer structure.\n     *\n     * Parameters:\n     * layerArray - {Array({Object})} Array of layerContext objects\n     * layer - {Object} layerContext object\n     */\n    processLayer: function(layerArray, layer) {\n        if (layer.layersContext) {\n            for (var i=0, len = layer.layersContext.length; i<len; i++) {\n                var l = layer.layersContext[i];\n                layerArray.push(l);\n                if (l.layersContext) {\n                    this.processLayer(layerArray, l);\n                }\n            }\n        }\n    },\n\n    /**\n     * APIMethod: write\n     *\n     * Parameters:\n     * context - {Object} An object representing the map context.\n     * options - {Object} Optional object.\n     *\n     * Returns:\n     * {String} An OWS Context document string.\n     */\n    write: function(context, options) {\n        var name = \"OWSContext\";\n        this.nestingLayerLookup = {}; //start with empty lookup\n        options = options || {};\n        OpenLayers.Util.applyDefaults(options, context);\n        var root = this.writeNode(name, options);\n        this.nestingLayerLookup = null; //clear lookup\n        this.setAttributeNS(\n            root, this.namespaces[\"xsi\"],\n            \"xsi:schemaLocation\", this.schemaLocation\n        );\n        return OpenLayers.Format.XML.prototype.write.apply(this, [root]);\n    },\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"kml\": {\n            \"Document\": function(node, obj) {\n                obj.features = new OpenLayers.Format.KML(\n                    {kmlns: this.namespaces.kml,\n                        extractStyles: true}).read(node);\n            }\n        },\n        \"owc\": {\n            \"OWSContext\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"General\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"ResourceList\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"Layer\": function(node, obj) {\n                var layerContext = {\n                    metadata: {},\n                    visibility: (node.getAttribute(\"hidden\") != \"1\"),\n                    queryable: (node.getAttribute(\"queryable\") == \"1\"),\n                    opacity: ((node.getAttribute(\"opacity\") != null) ?\n                        parseFloat(node.getAttribute(\"opacity\")) : null),\n                    name: node.getAttribute(\"name\"),\n                    /* A category layer is a dummy layer meant for creating\n                       hierarchies. It is not a physical layer in the\n                       OpenLayers sense. The assumption we make here is that\n                       category layers do not have a name attribute */\n                    categoryLayer: (node.getAttribute(\"name\") == null),\n                    formats: [],\n                    styles: []\n                };\n                if (!obj.layersContext) {\n                    obj.layersContext = [];\n                }\n                obj.layersContext.push(layerContext);\n                this.readChildNodes(node, layerContext);\n            },\n            \"InlineGeometry\": function(node, obj) {\n                obj.features = [];\n                var elements = this.getElementsByTagNameNS(node,\n                    this.namespaces.gml, \"featureMember\");\n                var el;\n                if (elements.length >= 1) {\n                    el = elements[0];\n                }\n                if (el && el.firstChild) {\n                    var featurenode = (el.firstChild.nextSibling) ?\n                        el.firstChild.nextSibling : el.firstChild;\n                    this.setNamespace(\"feature\", featurenode.namespaceURI);\n                    this.featureType = featurenode.localName ||\n                        featurenode.nodeName.split(\":\").pop();\n                    this.readChildNodes(node, obj);\n                }\n            },\n            \"Server\": function(node, obj) {\n                // when having multiple Server types, we prefer WMS\n                if ((!obj.service && !obj.version) ||\n                    (obj.service !=\n                        OpenLayers.Format.Context.serviceTypes.WMS)) {\n                            obj.service = node.getAttribute(\"service\");\n                            obj.version = node.getAttribute(\"version\");\n                            this.readChildNodes(node, obj);\n                }\n            },\n            \"Name\": function(node, obj) {\n                obj.name = this.getChildValue(node);\n                this.readChildNodes(node, obj);\n            },\n            \"Title\": function(node, obj) {\n                obj.title = this.getChildValue(node);\n                this.readChildNodes(node, obj);\n            },\n            \"StyleList\": function(node, obj) {\n                this.readChildNodes(node, obj.styles);\n            },\n            \"Style\": function(node, obj) {\n                var style = {};\n                obj.push(style);\n                this.readChildNodes(node, style);\n            },\n            \"LegendURL\": function(node, obj) {\n                var legend = {};\n                obj.legend = legend;\n                this.readChildNodes(node, legend);\n            },\n            \"OnlineResource\": function(node, obj) {\n                obj.url = this.getAttributeNS(node, this.namespaces.xlink,\n                    \"href\");\n                this.readChildNodes(node, obj);\n            }\n        },\n        \"ows\": OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows,\n        \"gml\": OpenLayers.Format.GML.v2.prototype.readers.gml,\n        \"sld\": OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld,\n        \"feature\": OpenLayers.Format.GML.v2.prototype.readers.feature\n    },\n\n    /**\n     * Property: writers\n     * As a compliment to the readers property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: {\n        \"owc\": {\n            \"OWSContext\": function(options) {\n                var node = this.createElementNSPlus(\"OWSContext\", {\n                    attributes: {\n                        version: this.VERSION,\n                        id: options.id || OpenLayers.Util.createUniqueID(\"OpenLayers_OWSContext_\")\n                    }\n                });\n                this.writeNode(\"General\", options, node);\n                this.writeNode(\"ResourceList\", options, node);\n                return node;\n            },\n            \"General\": function(options) {\n                var node = this.createElementNSPlus(\"General\");\n                this.writeNode(\"ows:BoundingBox\", options, node);\n                this.writeNode(\"ows:Title\", options.title || 'OpenLayers OWSContext', node);\n                return node;\n            },\n            \"ResourceList\": function(options) {\n                var node = this.createElementNSPlus(\"ResourceList\");\n                for (var i=0, len=options.layers.length; i<len; i++) {\n                    var layer = options.layers[i];\n                    var decomposedPath = this.decomposeNestingPath(layer.metadata.nestingPath);\n                    this.writeNode(\"_Layer\", {layer: layer, subPaths: decomposedPath}, node);\n                }\n                return node;\n            },\n            \"Server\": function(options) {\n                var node = this.createElementNSPlus(\"Server\", {attributes: {\n                    version: options.version,\n                    service: options.service }\n                });\n                this.writeNode(\"OnlineResource\", options, node);\n                return node;\n            },\n            \"OnlineResource\": function(options) {\n                var node = this.createElementNSPlus(\"OnlineResource\", {attributes: {\n                    \"xlink:href\": options.url }\n                });\n                return node;\n            },\n            \"InlineGeometry\": function(layer) {\n                var node = this.createElementNSPlus(\"InlineGeometry\"),\n                    dataExtent = layer.getDataExtent();\n                if (dataExtent !== null) {\n                    this.writeNode(\"gml:boundedBy\", dataExtent, node);\n                }\n                for (var i=0, len=layer.features.length; i<len; i++) {\n                    this.writeNode(\"gml:featureMember\", layer.features[i], node);\n                }\n                return node;\n            },\n            \"StyleList\": function(styles) {\n                var node = this.createElementNSPlus(\"StyleList\");\n                for (var i=0, len=styles.length; i<len; i++) {\n                    this.writeNode(\"Style\", styles[i], node);\n                }\n                return node;\n            },\n            \"Style\": function(style) {\n                var node = this.createElementNSPlus(\"Style\");\n                this.writeNode(\"Name\", style, node);\n                this.writeNode(\"Title\", style, node);\n                if (style.legend) {\n                    this.writeNode(\"LegendURL\", style, node);\n                }\n                return node;\n            },\n            \"Name\": function(obj) {\n                var node = this.createElementNSPlus(\"Name\", {\n                    value: obj.name });\n                return node;\n            },\n            \"Title\": function(obj) {\n                var node = this.createElementNSPlus(\"Title\", {\n                    value: obj.title });\n                return node;\n            },\n            \"LegendURL\": function(style) {\n                var node = this.createElementNSPlus(\"LegendURL\");\n                this.writeNode(\"OnlineResource\", style.legend, node);\n                return node;\n            },\n            \"_WMS\": function(layer) {\n                var node = this.createElementNSPlus(\"Layer\", {attributes: {\n                    name: layer.params.LAYERS,\n                    queryable: layer.queryable ? \"1\" : \"0\",\n                    hidden: layer.visibility ? \"0\" : \"1\",\n                    opacity: layer.hasOwnProperty(\"opacity\") ? layer.opacity : null}\n                });\n                this.writeNode(\"ows:Title\", layer.name, node);\n                this.writeNode(\"ows:OutputFormat\", layer.params.FORMAT, node);\n                this.writeNode(\"Server\", {service:\n                    OpenLayers.Format.Context.serviceTypes.WMS,\n                    version: layer.params.VERSION, url: layer.url}, node);\n                if (layer.metadata.styles && layer.metadata.styles.length > 0) {\n                    this.writeNode(\"StyleList\", layer.metadata.styles, node);\n                }\n                return node;\n            },\n            \"_Layer\": function(options) {\n                var layer, subPaths, node, title;\n                layer = options.layer;\n                subPaths = options.subPaths;\n                node = null;\n                title = null;\n                // subPaths is an array of an array\n                // recursively calling _Layer writer eats up subPaths, until a\n                // real writer is called and nodes are returned.\n                if(subPaths.length > 0){\n                    var path = subPaths[0].join(\"/\");\n                    var index = path.lastIndexOf(\"/\");\n                    node = this.nestingLayerLookup[path];\n                    title = (index > 0)?path.substring(index + 1, path.length):path;\n                    if(!node){\n                        // category layer\n                        node = this.createElementNSPlus(\"Layer\");\n                        this.writeNode(\"ows:Title\", title, node);\n                        this.nestingLayerLookup[path] = node;\n                    }\n                    options.subPaths.shift();//remove a path after each call\n                    this.writeNode(\"_Layer\", options, node);\n                    return node;\n                } else {\n                    // write out the actual layer\n                    if (layer instanceof OpenLayers.Layer.WMS) {\n                        node = this.writeNode(\"_WMS\", layer);\n                    } else if (layer instanceof OpenLayers.Layer.Vector) {\n                        if (layer.protocol instanceof OpenLayers.Protocol.WFS.v1) {\n                            node = this.writeNode(\"_WFS\", layer);\n                        } else if (layer.protocol instanceof OpenLayers.Protocol.HTTP) {\n                            if (layer.protocol.format instanceof OpenLayers.Format.GML) {\n                                layer.protocol.format.version = \"2.1.2\";\n                                node = this.writeNode(\"_GML\", layer);\n                            } else if (layer.protocol.format instanceof OpenLayers.Format.KML) {\n                                layer.protocol.format.version = \"2.2\";\n                                node = this.writeNode(\"_KML\", layer);\n                            }\n                        } else {\n                            // write out as inline GML since we have no idea\n                            // about the original Format\n                            this.setNamespace(\"feature\", this.featureNS);\n                            node = this.writeNode(\"_InlineGeometry\", layer);\n                        }\n                    }\n                    if (layer.options.maxScale) {\n                        this.writeNode(\"sld:MinScaleDenominator\",\n                            layer.options.maxScale, node);\n                    }\n                    if (layer.options.minScale) {\n                        this.writeNode(\"sld:MaxScaleDenominator\",\n                            layer.options.minScale, node);\n                    }\n                    this.nestingLayerLookup[layer.name] = node;\n                    return node;\n                }\n            },\n            \"_WFS\": function(layer) {\n                var node = this.createElementNSPlus(\"Layer\", {attributes: {\n                    name: layer.protocol.featurePrefix + \":\" + layer.protocol.featureType,\n                    hidden: layer.visibility ? \"0\" : \"1\" }\n                });\n                this.writeNode(\"ows:Title\", layer.name, node);\n                this.writeNode(\"Server\", {service:\n                    OpenLayers.Format.Context.serviceTypes.WFS,\n                    version: layer.protocol.version,\n                    url: layer.protocol.url}, node);\n                return node;\n            },\n            \"_InlineGeometry\": function(layer) {\n                var node = this.createElementNSPlus(\"Layer\", {attributes: {\n                    name: this.featureType,\n                    hidden: layer.visibility ? \"0\" : \"1\" }\n                });\n                this.writeNode(\"ows:Title\", layer.name, node);\n                this.writeNode(\"InlineGeometry\", layer, node);\n                return node;\n            },\n            \"_GML\": function(layer) {\n                var node = this.createElementNSPlus(\"Layer\");\n                this.writeNode(\"ows:Title\", layer.name, node);\n                this.writeNode(\"Server\", {service:\n                    OpenLayers.Format.Context.serviceTypes.GML,\n                    url: layer.protocol.url, version:\n                    layer.protocol.format.version}, node);\n                return node;\n            },\n            \"_KML\": function(layer) {\n                var node = this.createElementNSPlus(\"Layer\");\n                this.writeNode(\"ows:Title\", layer.name, node);\n                this.writeNode(\"Server\", {service:\n                    OpenLayers.Format.Context.serviceTypes.KML,\n                    version: layer.protocol.format.version, url:\n                    layer.protocol.url}, node);\n                return node;\n            }\n        },\n        \"gml\": OpenLayers.Util.applyDefaults({\n            \"boundedBy\": function(bounds) {\n                var node = this.createElementNSPlus(\"gml:boundedBy\");\n                this.writeNode(\"gml:Box\", bounds, node);\n                return node;\n            }\n        }, OpenLayers.Format.GML.v2.prototype.writers.gml),\n        \"ows\": OpenLayers.Format.OWSCommon.v1_0_0.prototype.writers.ows,\n        \"sld\": OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld,\n        \"feature\": OpenLayers.Format.GML.v2.prototype.writers.feature\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.OWSContext.v0_3_1\"\n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML/VersionedOGC.js\n */\n\n/**\n * Class: OpenLayers.Format.WMTSCapabilities\n * Read WMTS Capabilities.\n *\n * Inherits from:\n *  - <OpenLayers.Format.XML.VersionedOGC>\n */\nOpenLayers.Format.WMTSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {\n\n    /**\n     * APIProperty: defaultVersion\n     * {String} Version number to assume if none found.  Default is \"1.0.0\".\n     */\n    defaultVersion: \"1.0.0\",\n\n    /**\n     * APIProperty: yx\n     * {Object} Members in the yx object are used to determine if a CRS URN\n     *     corresponds to a CRS with y,x axis order.  Member names are CRS URNs\n     *     and values are boolean.  By default, the following CRS URN are\n     *     assumed to correspond to a CRS with y,x axis order:\n     *\n     * * urn:ogc:def:crs:EPSG::4326\n     */\n    yx: {\n        \"urn:ogc:def:crs:EPSG::4326\": true\n    },\n\n    /**\n     * Constructor: OpenLayers.Format.WMTSCapabilities\n     * Create a new parser for WMTS capabilities.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * APIMethod: read\n     * Read capabilities data from a string, and return information about\n     * the service (offering and observedProperty mostly).\n     *\n     * Parameters:\n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Object} Info about the WMTS Capabilities\n     */\n\n    /**\n     * APIMethod: createLayer\n     * Create a WMTS layer given a capabilities object.\n     *\n     * Parameters:\n     * capabilities - {Object} The object returned from a <read> call to this\n     *     format.\n     * config - {Object} Configuration properties for the layer.  Defaults for\n     *     the layer will apply if not provided.\n     *\n     * Required config properties:\n     * layer - {String} The layer identifier.\n     *\n     * Optional config properties:\n     * matrixSet - {String} The matrix set identifier, required if there is \n     *      more than one matrix set in the layer capabilities.\n     * projection - {String} The desired CRS when no matrixSet is specified.\n     *     eg: \"EPSG:3857\". If the desired projection is not available, \n     *     an error is thrown.\n     * style - {String} The name of the style\n     * format - {String} Image format for the layer. Default is the first\n     *     format returned in the GetCapabilities response.\n     * param - {Object} The dimensions values eg: {\"Year\": \"2012\"}\n     *\n     * Returns:\n     * {<OpenLayers.Layer.WMTS>} A properly configured WMTS layer.  Throws an\n     *     error if an incomplete config is provided.  Returns undefined if no\n     *     layer could be created with the provided config.\n     */\n    createLayer: function(capabilities, config) {\n        var layer;\n\n        // confirm required properties are supplied in config\n        if (!('layer' in config)) {\n            throw new Error(\"Missing property 'layer' in configuration.\");\n        }\n\n        var contents = capabilities.contents;\n\n        // find the layer definition with the given identifier\n        var layers = contents.layers;\n        var layerDef;\n        for (var i=0, ii=contents.layers.length; i<ii; ++i) {\n            if (contents.layers[i].identifier === config.layer) {\n                layerDef = contents.layers[i];\n                break;\n            }\n        }\n        if (!layerDef) {\n            throw new Error(\"Layer not found\");\n        }\n        \n        var format = config.format;\n        if (!format && layerDef.formats && layerDef.formats.length) {\n            format = layerDef.formats[0];\n        }\n\n        // find the matrixSet definition\n        var matrixSet;\n        if (config.matrixSet) {\n            matrixSet = contents.tileMatrixSets[config.matrixSet];\n        } else if (config.projection) {\n            for (var i=0,l=layerDef.tileMatrixSetLinks.length;i<l;i++) {\n                if (contents.tileMatrixSets[\n                        layerDef.tileMatrixSetLinks[i].tileMatrixSet\n                    ].supportedCRS.replace(\n                        /urn:ogc:def:crs:(\\w+):(.*:)?(\\w+)$/, \"$1:$3\"\n                    ) === config.projection) {\n\n                    matrixSet = contents.tileMatrixSets[\n                        layerDef.tileMatrixSetLinks[i].tileMatrixSet];\n                    break;\n                }\n            }\n        } else if (layerDef.tileMatrixSetLinks.length >= 1) {\n            matrixSet = contents.tileMatrixSets[\n                layerDef.tileMatrixSetLinks[0].tileMatrixSet];\n        }\n        if (!matrixSet) {\n            throw new Error(\"matrixSet not found\");\n        }\n\n        // get the default style for the layer\n        var style;\n        for (var i=0, ii=layerDef.styles.length; i<ii; ++i) {\n            style = layerDef.styles[i];\n            if (style.isDefault) {\n                break;\n            }\n        }\n\n        var requestEncoding = config.requestEncoding;\n        if (!requestEncoding) {\n            requestEncoding = \"KVP\";\n            if (capabilities.operationsMetadata.GetTile.dcp.http) {\n                var http = capabilities.operationsMetadata.GetTile.dcp.http;\n                // Get first get method\n                if (http.get[0].constraints) {\n                    var constraints = http.get[0].constraints;\n                    var allowedValues = constraints.GetEncoding.allowedValues;\n                    // The OGC documentation is not clear if we should use\n                    // REST or RESTful, ArcGis use RESTful,\n                    // and OpenLayers use REST.\n                    if (!allowedValues.KVP &&\n                            (allowedValues.REST || allowedValues.RESTful)) {\n                        requestEncoding = \"REST\";\n                    }\n                }\n            }\n        }\n\n        var dimensions = [];\n        var params = config.params || {};\n        // to don't overwrite the changes in the applyDefaults\n        delete config.params;\n        for (var id = 0, ld = layerDef.dimensions.length ; id < ld ; id++) {\n            var dimension = layerDef.dimensions[id];\n            dimensions.push(dimension.identifier);\n            if (!params.hasOwnProperty(dimension.identifier)) {\n                params[dimension.identifier] = dimension['default'];\n            }\n        }\n\n        var projection = config.projection || matrixSet.supportedCRS.replace(\n                /urn:ogc:def:crs:(\\w+):(.*:)?(\\w+)$/, \"$1:$3\");\n        var units = config.units ||\n                (projection === (\"EPSG:4326\" || \"OGC:CRS84\") ? \"degrees\" : \"m\");\n\n        // compute server-supported resolutions array\n        var resolutions = [], minScaleDenominator, maxScaleDenominator,\n            reducedMatrixIds = [], tileMatrixSetLink,\n            tileMatrixSetLinks = layerDef.tileMatrixSetLinks;\n        var buildResolutionsArray = function(scaleDenominator) {\n            resolutions.push(\n                scaleDenominator * 0.28E-3 / OpenLayers.METERS_PER_INCH /\n                    OpenLayers.INCHES_PER_UNIT[units]\n            );\n            if (!minScaleDenominator || minScaleDenominator > scaleDenominator) {\n                minScaleDenominator = scaleDenominator;\n            }\n            if (!maxScaleDenominator || maxScaleDenominator < scaleDenominator) {\n                maxScaleDenominator = scaleDenominator;\n            }\n        };\n        for (var j=0, l=tileMatrixSetLinks.length; j<l; j++) {\n            tileMatrixSetLink = tileMatrixSetLinks[j];\n            if (tileMatrixSetLink.tileMatrixSet === matrixSet.identifier) {\n                if (tileMatrixSetLink.tileMatrixSetLimits) {\n                    // reformat matrixSet.matrixIds so that identifiers become keys\n                    var tmpMatrixIds = {}, mid;\n                    for (var k=0, ll=matrixSet.matrixIds.length; k<ll; k++) {\n                        tmpMatrixIds[matrixSet.matrixIds[k].identifier] = matrixSet.matrixIds[k];\n                    }\n                    // compute resolutions array + scale limits\n                    for (var k=0, ll=tileMatrixSetLink.tileMatrixSetLimits.length; k<ll; k++) {\n                        mid = tmpMatrixIds[tileMatrixSetLink.tileMatrixSetLimits[k].tileMatrix];\n                        reducedMatrixIds.push(mid);\n                        buildResolutionsArray(mid.scaleDenominator);\n                    }\n                } else {\n                    // if there are no limits in the tileMatrixSetLink, \n                    // use the resolutions from the full tile matrix set\n                    for (var k=0, ll=matrixSet.matrixIds.length; k<ll; k++) {\n                        buildResolutionsArray(matrixSet.matrixIds[k].scaleDenominator);\n                    };\n                }\n                break;\n            }\n        }\n\n        var url;\n        if (requestEncoding === \"REST\" && layerDef.resourceUrls) {\n            url = [];\n            var resourceUrls = layerDef.resourceUrls,\n                resourceUrl;\n            for (var t = 0, tt = layerDef.resourceUrls.length; t < tt; ++t) {\n                resourceUrl = layerDef.resourceUrls[t];\n                if (resourceUrl.format === format && resourceUrl.resourceType === \"tile\") {\n                    url.push(resourceUrl.template);\n                }\n            }\n        } else {\n            var httpGet = capabilities.operationsMetadata.GetTile.dcp.http.get;\n            url = [];\n            var constraint;\n            for (var i = 0, ii = httpGet.length; i < ii; i++) {\n                constraint = httpGet[i].constraints;\n                if (!constraint || (constraint && constraint.\n                        GetEncoding.allowedValues[requestEncoding])) {\n                    url.push(httpGet[i].url);\n                }\n            }\n        }\n\n        resolutions.sort(function(a,b){\n            return b-a;\n        });\n        var options = OpenLayers.Util.applyDefaults(config, {\n            url: url,\n            requestEncoding: requestEncoding,\n            name: layerDef.title,\n            style: style && style.identifier || \"\",\n            format: format,\n            matrixIds: reducedMatrixIds.length ? \n                reducedMatrixIds : matrixSet.matrixIds,\n            matrixSet: matrixSet.identifier,\n            projection: projection,\n            units: units,\n            tileFullExtent: matrixSet.bounds,\n            dimensions: dimensions,\n            params: params,\n            resolutions: config.isBaseLayer === false ? undefined :\n                resolutions,\n            serverResolutions: resolutions,\n            minScale: 1/Math.ceil(maxScaleDenominator),\n            maxScale: 1/Math.floor(minScaleDenominator)\n        });\n        return new OpenLayers.Layer.WMTS(options);\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.WMTSCapabilities\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/WMTSCapabilities.js\n * @requires OpenLayers/Format/OWSCommon/v1_1_0.js\n */\n\n/**\n * Class: OpenLayers.Format.WMTSCapabilities.v1_0_0\n * Read WMTS Capabilities version 1.0.0.\n * \n * Inherits from:\n *  - <OpenLayers.Format.WMTSCapabilities>\n */\nOpenLayers.Format.WMTSCapabilities.v1_0_0 = OpenLayers.Class(\n    OpenLayers.Format.OWSCommon.v1_1_0, {\n        \n    /**\n     * Property: version\n     * {String} The parser version (\"1.0.0\").\n     */\n    version: \"1.0.0\",\n\n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        ows: \"http://www.opengis.net/ows/1.1\",\n        wmts: \"http://www.opengis.net/wmts/1.0\",\n        xlink: \"http://www.w3.org/1999/xlink\"\n    },    \n    \n    /**\n     * Property: yx\n     * {Object} Members in the yx object are used to determine if a CRS URN\n     *     corresponds to a CRS with y,x axis order.  Member names are CRS URNs\n     *     and values are boolean.  Defaults come from the \n     *     <OpenLayers.Format.WMTSCapabilities> prototype.\n     */\n    yx: null,\n\n    /**\n     * Property: defaultPrefix\n     * {String} The default namespace alias for creating element nodes.\n     */\n    defaultPrefix: \"wmts\",\n\n    /**\n     * Constructor: OpenLayers.Format.WMTSCapabilities.v1_0_0\n     * Create a new parser for WMTS capabilities version 1.0.0. \n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    initialize: function(options) {\n        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);\n        this.options = options;\n        var yx = OpenLayers.Util.extend(\n            {}, OpenLayers.Format.WMTSCapabilities.prototype.yx\n        );\n        this.yx = OpenLayers.Util.extend(yx, this.yx);\n    },\n\n    /**\n     * APIMethod: read\n     * Read capabilities data from a string, and return info about the WMTS.\n     * \n     * Parameters: \n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Object} Information about the SOS service.\n     */\n    read: function(data) {\n        if(typeof data == \"string\") {\n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n        if(data && data.nodeType == 9) {\n            data = data.documentElement;\n        }\n        var capabilities = {};\n        this.readNode(data, capabilities);\n        capabilities.version = this.version;\n        return capabilities;\n    },\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {        \n        \"wmts\": {\n            \"Capabilities\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"Contents\": function(node, obj) {\n                obj.contents = {};                \n                obj.contents.layers = [];\n                obj.contents.tileMatrixSets = {};                \n                this.readChildNodes(node, obj.contents);\n            },\n            \"Layer\": function(node, obj) {\n                var layer = {\n                    styles: [],\n                    formats: [],\n                    dimensions: [],\n                    tileMatrixSetLinks: []\n                };\n                this.readChildNodes(node, layer);\n                obj.layers.push(layer);\n            },\n            \"Style\": function(node, obj) {\n                var style = {};\n                style.isDefault = (node.getAttribute(\"isDefault\") === \"true\");\n                this.readChildNodes(node, style);\n                obj.styles.push(style);\n            },\n            \"Format\": function(node, obj) {\n                obj.formats.push(this.getChildValue(node)); \n            },\n            \"TileMatrixSetLink\": function(node, obj) {\n                var tileMatrixSetLink = {};\n                this.readChildNodes(node, tileMatrixSetLink);\n                obj.tileMatrixSetLinks.push(tileMatrixSetLink);\n            },\n            \"TileMatrixSet\": function(node, obj) {\n                // node could be child of wmts:Contents or wmts:TileMatrixSetLink\n                // duck type wmts:Contents by looking for layers\n                if (obj.layers) {\n                    // TileMatrixSet as object type in schema\n                    var tileMatrixSet = {\n                        matrixIds: []\n                    };\n                    this.readChildNodes(node, tileMatrixSet);\n                    obj.tileMatrixSets[tileMatrixSet.identifier] = tileMatrixSet;\n                } else {\n                    // TileMatrixSet as string type in schema\n                    obj.tileMatrixSet = this.getChildValue(node);\n                }\n            },\n            \"TileMatrixSetLimits\": function(node, obj) {\n                obj.tileMatrixSetLimits = [];\n                this.readChildNodes(node, obj);\n            },\n            \"TileMatrixLimits\": function(node, obj) {\n                var tileMatrixLimits = {};\n                this.readChildNodes(node, tileMatrixLimits);\n                obj.tileMatrixSetLimits.push(tileMatrixLimits);\n            },\n            \"MinTileRow\": function(node, obj) {\n                obj.minTileRow = parseInt(this.getChildValue(node)); \n            },\n            \"MaxTileRow\": function(node, obj) {\n                obj.maxTileRow = parseInt(this.getChildValue(node)); \n            },\n            \"MinTileCol\": function(node, obj) {\n                obj.minTileCol = parseInt(this.getChildValue(node)); \n            },\n            \"MaxTileCol\": function(node, obj) {\n                obj.maxTileCol = parseInt(this.getChildValue(node)); \n            },\n            \"TileMatrix\": function(node, obj) {\n                // node could be child of wmts:TileMatrixSet or wmts:TileMatrixLimits\n                if (obj.identifier) {\n                    // node is child of wmts:TileMatrixSet\n                    var tileMatrix = {\n                        supportedCRS: obj.supportedCRS\n                    };\n                    this.readChildNodes(node, tileMatrix);\n                    obj.matrixIds.push(tileMatrix);\n                } else {\n                    obj.tileMatrix = this.getChildValue(node);\n                }\n            },\n            \"ScaleDenominator\": function(node, obj) {\n                obj.scaleDenominator = parseFloat(this.getChildValue(node)); \n            },\n            \"TopLeftCorner\": function(node, obj) {                \n                var topLeftCorner = this.getChildValue(node);\n                var coords = topLeftCorner.split(\" \");\n                // decide on axis order for the given CRS\n                var yx;\n                if (obj.supportedCRS) {\n                    // extract out version from URN\n                    var crs = obj.supportedCRS.replace(\n                        /urn:ogc:def:crs:(\\w+):.+:(\\w+)$/, \n                        \"urn:ogc:def:crs:$1::$2\"\n                    );\n                    yx = !!this.yx[crs];\n                }\n                if (yx) {\n                    obj.topLeftCorner = new OpenLayers.LonLat(\n                        coords[1], coords[0]\n                    );\n                } else {\n                    obj.topLeftCorner = new OpenLayers.LonLat(\n                        coords[0], coords[1]\n                    );\n                }\n            },\n            \"TileWidth\": function(node, obj) {\n                obj.tileWidth = parseInt(this.getChildValue(node)); \n            },\n            \"TileHeight\": function(node, obj) {\n                obj.tileHeight = parseInt(this.getChildValue(node)); \n            },\n            \"MatrixWidth\": function(node, obj) {\n                obj.matrixWidth = parseInt(this.getChildValue(node)); \n            },\n            \"MatrixHeight\": function(node, obj) {\n                obj.matrixHeight = parseInt(this.getChildValue(node)); \n            },\n            \"ResourceURL\": function(node, obj) {\n                obj.resourceUrl = obj.resourceUrl || {};\n                var resourceType = node.getAttribute(\"resourceType\");\n                if (!obj.resourceUrls) {\n                    obj.resourceUrls = [];\n                }\n                var resourceUrl = obj.resourceUrl[resourceType] = {\n                    format: node.getAttribute(\"format\"),\n                    template: node.getAttribute(\"template\"),\n                    resourceType: resourceType\n                };\n                obj.resourceUrls.push(resourceUrl);\n            },\n            \"LegendURL\": function(node, obj) {\n                obj.legends = obj.legends || [];\n                var legend = {\n                    format: node.getAttribute(\"format\"),\n                    href: node.getAttribute(\"xlink:href\")\n                };\n                var width = node.getAttribute(\"width\"),\n                    height = node.getAttribute(\"height\"),\n                    minScaleDenominator = node.getAttribute(\"minScaleDenominator\"),\n                    maxScaleDenominator = node.getAttribute(\"maxScaleDenominator\");\n                if (width !== null) {\n                    legend.width = parseInt(width);\n                }\n                if (height !== null) {\n                    legend.height = parseInt(height);\n                }\n                if (minScaleDenominator !== null) {\n                    legend.minScaleDenominator = parseInt(minScaleDenominator);\n                }\n                if (maxScaleDenominator !== null) {\n                    legend.maxScaleDenominator = parseInt(maxScaleDenominator);\n                }\n                obj.legends.push(legend);\n            },\n            \"InfoFormat\": function(node, obj) {\n                obj.infoFormats = obj.infoFormats || [];\n                obj.infoFormats.push(this.getChildValue(node));\n            },\n            // not used for now, can be added in the future though\n            /*\"Themes\": function(node, obj) {\n                obj.themes = [];\n                this.readChildNodes(node, obj.themes);\n            },\n            \"Theme\": function(node, obj) {\n                var theme = {};                \n                this.readChildNodes(node, theme);\n                obj.push(theme);\n            },*/\n            \"WSDL\": function(node, obj) {\n                obj.wsdl = {};\n                obj.wsdl.href = node.getAttribute(\"xlink:href\");\n                // TODO: other attributes of <WSDL> element                \n            },\n            \"ServiceMetadataURL\": function(node, obj) {\n                obj.serviceMetadataUrl = {};\n                obj.serviceMetadataUrl.href = node.getAttribute(\"xlink:href\");\n                // TODO: other attributes of <ServiceMetadataURL> element                \n            },\n            \"Dimension\": function(node, obj) {\n                var dimension = {values: []};\n                this.readChildNodes(node, dimension);\n                obj.dimensions.push(dimension);\n            },\n            \"Default\": function(node, obj) {\n                obj[\"default\"] = this.getChildValue(node);\n            },\n            \"Value\": function(node, obj) {\n                obj.values.push(this.getChildValue(node));\n            }\n        },\n        \"ows\": OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers[\"ows\"]\n    },    \n    \n    CLASS_NAME: \"OpenLayers.Format.WMTSCapabilities.v1_0_0\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML/VersionedOGC.js\n */\n \n/**\n * Class: OpenLayers.Format.WPSCapabilities\n * Read WPS Capabilities.\n * \n * Inherits from:\n *  - <OpenLayers.Format.XML.VersionedOGC>\n */\nOpenLayers.Format.WPSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {\n    \n    /**\n     * APIProperty: defaultVersion\n     * {String} Version number to assume if none found.  Default is \"1.0.0\".\n     */\n    defaultVersion: \"1.0.0\",\n    \n    /**\n     * Constructor: OpenLayers.Format.WPSCapabilities\n     * Create a new parser for WPS Capabilities.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * APIMethod: read\n     * Read capabilities data from a string, and return information about\n     * the service.\n     * \n     * Parameters: \n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Object} Info about the WPS\n     */\n    \n    CLASS_NAME: \"OpenLayers.Format.WPSCapabilities\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/WPSCapabilities.js\n * @requires OpenLayers/Format/OWSCommon/v1_1_0.js\n */\n\n/**\n * Class: OpenLayers.Format.WPSCapabilities.v1_0_0\n * Read WPS Capabilities version 1.0.0.\n * \n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.WPSCapabilities.v1_0_0 = OpenLayers.Class(\n    OpenLayers.Format.XML, {\n\n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        ows: \"http://www.opengis.net/ows/1.1\",\n        wps: \"http://www.opengis.net/wps/1.0.0\",\n        xlink: \"http://www.w3.org/1999/xlink\"\n    },\n\n    /**\n     * Property: regExes\n     * Compiled regular expressions for manipulating strings.\n     */\n    regExes: {\n        trimSpace: (/^\\s*|\\s*$/g),\n        removeSpace: (/\\s*/g),\n        splitSpace: (/\\s+/),\n        trimComma: (/\\s*,\\s*/g)\n    },\n    \n    /**\n     * Constructor: OpenLayers.Format.WPSCapabilities.v1_0_0\n     * Create a new parser for WPS capabilities version 1.0.0. \n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    initialize: function(options) {\n        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);\n    },\n\n    /**\n     * APIMethod: read\n     * Read capabilities data from a string, and return info about the WPS.\n     * \n     * Parameters: \n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Object} Information about the WPS service.\n     */\n    read: function(data) {\n        if(typeof data == \"string\") {\n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n        if(data && data.nodeType == 9) {\n            data = data.documentElement;\n        }\n        var capabilities = {};\n        this.readNode(data, capabilities);\n        return capabilities;\n    },\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"wps\": {\n            \"Capabilities\": function(node, obj) {\n                this.readChildNodes(node, obj);\n            },\n            \"ProcessOfferings\": function(node, obj) {\n                obj.processOfferings = {};\n                this.readChildNodes(node, obj.processOfferings);\n            },\n            \"Process\": function(node, processOfferings) {\n                var processVersion = this.getAttributeNS(node, this.namespaces.wps, \"processVersion\");\n                var process = {processVersion: processVersion};\n                this.readChildNodes(node, process);\n                processOfferings[process.identifier] = process;\n            },\n            \"Languages\": function(node, obj) {\n                obj.languages = [];\n                this.readChildNodes(node, obj.languages);\n            },\n            \"Default\": function(node, languages) {\n                var language = {isDefault: true};\n                this.readChildNodes(node, language);\n                languages.push(language);\n            },\n            \"Supported\": function(node, languages) {\n                var language = {};\n                this.readChildNodes(node, language);     \n                languages.push(language);\n            }\n        },\n        \"ows\": OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers[\"ows\"]\n    },    \n    \n    CLASS_NAME: \"OpenLayers.Format.WPSCapabilities.v1_0_0\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n \n/**\n * @requires OpenLayers/Format/XML/VersionedOGC.js\n */\n\n/**\n * Class: OpenLayers.Format.WPSDescribeProcess\n * Read WPS DescribeProcess responses. \n *\n * Inherits from:\n *  - <OpenLayers.Format.VersionedOGC>\n */\nOpenLayers.Format.WPSDescribeProcess = OpenLayers.Class(\n    OpenLayers.Format.XML.VersionedOGC, {\n \n\n    /**\n     * APIProperty: defaultVersion\n     * {String} Version number to assume if none found.  Default is \"1.0.0\".\n     */\n    defaultVersion: \"1.0.0\",\n\n    /**\n     * Constructor: OpenLayers.Format.WPSDescribeProcess\n     * Create a new parser for WPS DescribeProcess.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * APIMethod: read\n     * Parse a WPS DescribeProcess and return an object with its information.\n     *\n     * Parameters:\n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Object}\n     */\n\n    CLASS_NAME: \"OpenLayers.Format.WPSDescribeProcess\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n \n/**\n * @requires OpenLayers/Format/XML.js\n * @requires OpenLayers/Format/WPSDescribeProcess.js\n * @requires OpenLayers/Format/OWSCommon/v1_1_0.js\n */\n\n/**\n * Class: OpenLayers.Format.WPSDescribeProcess.v1_0_0\n * Read WPS DescribeProcess 1.0.0 responses. \n *\n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.WPSDescribeProcess.v1_0_0 = OpenLayers.Class(\n    OpenLayers.Format.XML, {\n    \n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        wps: \"http://www.opengis.net/wps/1.0.0\",\n        ows: \"http://www.opengis.net/ows/1.1\",\n        xsi: \"http://www.w3.org/2001/XMLSchema-instance\"\n    },\n\n    /**\n     * APIProperty: errorProperty\n     * {String} Which property of the returned object to check for in order to\n     * determine whether or not parsing has failed. In the case that the\n     * errorProperty is undefined on the returned object, the document will be\n     * run through an OGCExceptionReport parser.\n     */\n    errorProperty: \"processDescriptions\",\n\n    /**\n     * Property: schemaLocation\n     * {String} Schema location\n     */\n    schemaLocation: \"http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd\",\n\n    /**\n     * Property: defaultPrefix\n     */\n    defaultPrefix: \"wps\",\n\n    /**\n     * Property: regExes\n     * Compiled regular expressions for manipulating strings.\n     */\n    regExes: {\n        trimSpace: (/^\\s*|\\s*$/g),\n        removeSpace: (/\\s*/g),\n        splitSpace: (/\\s+/),\n        trimComma: (/\\s*,\\s*/g)\n    },\n    \n    /**\n     * Constructor: OpenLayers.Format.WPSDescribeProcess\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * APIMethod: read\n     * Parse a WPS DescribeProcess and return an object with its information.\n     * \n     * Parameters: \n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Object}\n     */\n    read: function(data) {\n        if(typeof data == \"string\") {\n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n        if(data && data.nodeType == 9) {\n            data = data.documentElement;\n        }\n        var info = {};\n        this.readNode(data, info);\n        return info;\n    },\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"wps\": {\n            \"ProcessDescriptions\": function(node, obj) {\n                obj.processDescriptions = {};\n                this.readChildNodes(node, obj.processDescriptions);\n            },\n            \"ProcessDescription\": function(node, processDescriptions) {\n                var processVersion = this.getAttributeNS(node, this.namespaces.wps, \"processVersion\");\n                var processDescription = {\n                    processVersion: processVersion,\n                    statusSupported: (node.getAttribute(\"statusSupported\") === \"true\"),\n                    storeSupported: (node.getAttribute(\"storeSupported\") === \"true\")\n                };\n                this.readChildNodes(node, processDescription);\n                processDescriptions[processDescription.identifier] = processDescription;\n            },\n            \"DataInputs\": function(node, processDescription) {\n                processDescription.dataInputs = [];\n                this.readChildNodes(node, processDescription.dataInputs);\n            },\n            \"ProcessOutputs\": function(node, processDescription) {\n                processDescription.processOutputs = [];\n                this.readChildNodes(node, processDescription.processOutputs);\n            },\n            \"Output\": function(node, processOutputs) {\n                var output = {};\n                this.readChildNodes(node, output);\n                processOutputs.push(output);\n            },\n            \"ComplexOutput\": function(node, output) {\n                output.complexOutput = {};\n                this.readChildNodes(node, output.complexOutput);\n            },\n            \"LiteralOutput\": function(node, output) {\n                output.literalOutput = {};\n                this.readChildNodes(node, output.literalOutput);\n            },\n            \"Input\": function(node, dataInputs) {\n                var input = {\n                    maxOccurs: parseInt(node.getAttribute(\"maxOccurs\")),\n                    minOccurs: parseInt(node.getAttribute(\"minOccurs\"))\n                };\n                this.readChildNodes(node, input);\n                dataInputs.push(input);\n            },\n            \"BoundingBoxData\": function(node, input) {\n                input.boundingBoxData = {};\n                this.readChildNodes(node, input.boundingBoxData);\n            },\n            \"CRS\": function(node, obj) {\n                if (!obj.CRSs) {\n                    obj.CRSs = {};\n                }\n                obj.CRSs[this.getChildValue(node)] = true;\n            },\n            \"LiteralData\": function(node, input) {\n                input.literalData = {};\n                this.readChildNodes(node, input.literalData);\n            },\n            \"ComplexData\": function(node, input) {\n                input.complexData = {};\n                this.readChildNodes(node,  input.complexData);\n            },\n            \"Default\": function(node, complexData) {\n                complexData[\"default\"] = {};\n                this.readChildNodes(node,  complexData[\"default\"]);\n            },\n            \"Supported\": function(node, complexData) {\n                complexData[\"supported\"] = {};\n                this.readChildNodes(node,  complexData[\"supported\"]);\n            },\n            \"Format\": function(node, obj) {\n                var format = {};\n                this.readChildNodes(node, format);\n                if (!obj.formats) {\n                    obj.formats = {};\n                }\n                obj.formats[format.mimeType] = true;\n            },\n            \"MimeType\": function(node, format) {\n                format.mimeType = this.getChildValue(node);\n            }\n        },\n        \"ows\": OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers[\"ows\"]\n    },\n    \n    CLASS_NAME: \"OpenLayers.Format.WPSDescribeProcess\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML.js\n * @requires OpenLayers/Format/OWSCommon/v1_1_0.js\n * @requires OpenLayers/Format/WCSGetCoverage.js\n * @requires OpenLayers/Format/WFST/v1_1_0.js\n */\n\n/**\n * Class: OpenLayers.Format.WPSExecute version 1.0.0\n *\n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.WPSExecute = OpenLayers.Class(OpenLayers.Format.XML,\n                                            OpenLayers.Format.Filter.v1_1_0, {\n    \n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        ows: \"http://www.opengis.net/ows/1.1\",\n        gml: \"http://www.opengis.net/gml\",\n        wps: \"http://www.opengis.net/wps/1.0.0\",\n        wfs: \"http://www.opengis.net/wfs\",\n        ogc: \"http://www.opengis.net/ogc\",\n        wcs: \"http://www.opengis.net/wcs\",\n        xlink: \"http://www.w3.org/1999/xlink\",\n        xsi: \"http://www.w3.org/2001/XMLSchema-instance\"\n    },\n\n    /**\n     * Property: regExes\n     * Compiled regular expressions for manipulating strings.\n     */\n    regExes: {\n        trimSpace: (/^\\s*|\\s*$/g),\n        removeSpace: (/\\s*/g),\n        splitSpace: (/\\s+/),\n        trimComma: (/\\s*,\\s*/g)\n    },\n\n    /**\n     * Constant: VERSION\n     * {String} 1.0.0\n     */\n    VERSION: \"1.0.0\",\n\n    /**\n     * Property: schemaLocation\n     * {String} Schema location\n     */\n    schemaLocation: \"http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd\",\n\n    schemaLocationAttr: function(options) {\n        return undefined;\n    },\n\n    /**\n     * Constructor: OpenLayers.Format.WPSExecute\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * Method: write\n     *\n     * Parameters:\n     * options - {Object} Optional object.\n     *\n     * Returns:\n     * {String} An WPS Execute request XML string.\n     */\n    write: function(options) {\n        var doc;\n        if (OpenLayers.Format.XML.supportActiveX) {\n            doc = new ActiveXObject(\"Microsoft.XMLDOM\");\n            this.xmldom = doc;\n        } else {\n            doc = document.implementation.createDocument(\"\", \"\", null);\n        }\n        var node = this.writeNode(\"wps:Execute\", options, doc);\n        this.setAttributeNS(\n            node, this.namespaces.xsi,\n            \"xsi:schemaLocation\", this.schemaLocation\n        );\n        return OpenLayers.Format.XML.prototype.write.apply(this, [node]);\n    }, \n\n    /**\n     * APIMethod: read\n     * Parse a WPS Execute and return an object with its information.\n     * \n     * Parameters: \n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Object}\n     */\n    read: function(data) {\n        if(typeof data == \"string\") {\n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n        if(data && data.nodeType == 9) {\n            data = data.documentElement;\n        }\n        var info = {};\n        this.readNode(data, info);\n        return info;\n    },\n\n    /**\n     * Property: writers\n     * As a compliment to the readers property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: {\n        \"wps\": {\n            \"Execute\": function(options) {\n                var node = this.createElementNSPlus(\"wps:Execute\", {\n                    attributes: {\n                        version: this.VERSION,\n                        service: 'WPS'\n                    } \n                }); \n                this.writeNode(\"ows:Identifier\", options.identifier, node);\n                this.writeNode(\"wps:DataInputs\", options.dataInputs, node);\n                this.writeNode(\"wps:ResponseForm\", options.responseForm, node);\n                return node; \n            },\n            \"ResponseForm\": function(responseForm) {\n                var node = this.createElementNSPlus(\"wps:ResponseForm\", {});\n                if (responseForm.rawDataOutput) {\n                    this.writeNode(\"wps:RawDataOutput\", responseForm.rawDataOutput, node);\n                }\n                if (responseForm.responseDocument) {\n                    this.writeNode(\"wps:ResponseDocument\", responseForm.responseDocument, node);\n                }\n                return node;\n            },\n            \"ResponseDocument\": function(responseDocument) {\n                var node = this.createElementNSPlus(\"wps:ResponseDocument\", {\n                    attributes: {\n                        storeExecuteResponse: responseDocument.storeExecuteResponse,\n                        lineage: responseDocument.lineage,\n                        status: responseDocument.status\n                    }\n                });\n                if (responseDocument.outputs) {\n                    for (var i = 0, len = responseDocument.outputs.length; i < len; i++) {\n                        this.writeNode(\"wps:Output\", responseDocument.outputs[i], node);\n                    }\n                }\n                return node;\n            },\n            \"Output\": function(output) {\n                var node = this.createElementNSPlus(\"wps:Output\", {\n                    attributes: {\n                        asReference: output.asReference,\n                        mimeType: output.mimeType,\n                        encoding: output.encoding,\n                        schema: output.schema\n                    }\n                });\n                this.writeNode(\"ows:Identifier\", output.identifier, node);\n                this.writeNode(\"ows:Title\", output.title, node);\n                this.writeNode(\"ows:Abstract\", output[\"abstract\"], node);\n                return node;\n            },\n            \"RawDataOutput\": function(rawDataOutput) {\n                var node = this.createElementNSPlus(\"wps:RawDataOutput\", {\n                    attributes: {\n                        mimeType: rawDataOutput.mimeType,\n                        encoding: rawDataOutput.encoding,\n                        schema: rawDataOutput.schema\n                    }\n                });\n                this.writeNode(\"ows:Identifier\", rawDataOutput.identifier, node);\n                return node;\n            },\n            \"DataInputs\": function(dataInputs) {\n                var node = this.createElementNSPlus(\"wps:DataInputs\", {});\n                for (var i=0, ii=dataInputs.length; i<ii; ++i) {\n                    this.writeNode(\"wps:Input\", dataInputs[i], node);\n                }\n                return node;\n            },\n            \"Input\": function(input) {\n                var node = this.createElementNSPlus(\"wps:Input\", {});\n                this.writeNode(\"ows:Identifier\", input.identifier, node);\n                if (input.title) {\n                    this.writeNode(\"ows:Title\", input.title, node);\n                }\n                if (input.data) {\n                    this.writeNode(\"wps:Data\", input.data, node);\n                }\n                if (input.reference) {\n                    this.writeNode(\"wps:Reference\", input.reference, node);\n                }\n                if (input.boundingBoxData) {\n                    this.writeNode(\"wps:BoundingBoxData\", input.boundingBoxData, node);\n                }\n                return node;\n            },\n            \"Data\": function(data) {\n                var node = this.createElementNSPlus(\"wps:Data\", {});\n                if (data.literalData) {\n                    this.writeNode(\"wps:LiteralData\", data.literalData, node);\n                } else if (data.complexData) {\n                    this.writeNode(\"wps:ComplexData\", data.complexData, node);\n                } else if (data.boundingBoxData) {\n                    this.writeNode(\"ows:BoundingBox\", data.boundingBoxData, node);\n                }\n                return node;\n            },\n            \"LiteralData\": function(literalData) {\n                var node = this.createElementNSPlus(\"wps:LiteralData\", {\n                    attributes: {\n                        uom: literalData.uom\n                    },\n                    value: literalData.value\n                });\n                return node;\n            },\n            \"ComplexData\": function(complexData) {\n                var node = this.createElementNSPlus(\"wps:ComplexData\", {\n                    attributes: {\n                        mimeType: complexData.mimeType,\n                        encoding: complexData.encoding,\n                        schema: complexData.schema\n                    } \n                });\n                var data = complexData.value;\n                if (typeof data === \"string\") {\n                    node.appendChild(\n                        this.getXMLDoc().createCDATASection(complexData.value)\n                    );\n                } else {\n                    node.appendChild(data);\n                }\n                return node;\n            },\n            \"Reference\": function(reference) {\n                var node = this.createElementNSPlus(\"wps:Reference\", {\n                    attributes: {\n                        mimeType: reference.mimeType,\n                        \"xlink:href\": reference.href,\n                        method: reference.method,\n                        encoding: reference.encoding,\n                        schema: reference.schema\n                    }\n                });\n                if (reference.body) {\n                    this.writeNode(\"wps:Body\", reference.body, node);\n                }\n                return node;\n            },\n            \"BoundingBoxData\": function(node, obj) {\n                this.writers['ows']['BoundingBox'].apply(this, [node, obj, \"wps:BoundingBoxData\"]);\n            },\n            \"Body\": function(body) {\n                var node = this.createElementNSPlus(\"wps:Body\", {});\n                if (body.wcs) {\n                    this.writeNode(\"wcs:GetCoverage\", body.wcs, node);\n                }\n                else if (body.wfs) {\n                    // OpenLayers.Format.WFST expects these to be on the \n                    // instance and not in the options\n                    this.featureType = body.wfs.featureType;\n                    this.version = body.wfs.version;\n                    this.writeNode(\"wfs:GetFeature\", body.wfs, node);\n                } else {\n                    this.writeNode(\"wps:Execute\", body, node);\n                }\n                return node;                \n            }\n        },\n        \"wcs\": OpenLayers.Format.WCSGetCoverage.prototype.writers.wcs,\n        \"wfs\": OpenLayers.Format.WFST.v1_1_0.prototype.writers.wfs,\n        \"ogc\": OpenLayers.Format.Filter.v1_1_0.prototype.writers.ogc,\n        \"ows\": OpenLayers.Format.OWSCommon.v1_1_0.prototype.writers.ows\n    },\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"wps\": {\n            \"ExecuteResponse\": function(node, obj) {\n                obj.executeResponse = {\n                    lang: node.getAttribute(\"lang\"),\n                    statusLocation: node.getAttribute(\"statusLocation\"),\n                    serviceInstance: node.getAttribute(\"serviceInstance\"),\n                    service: node.getAttribute(\"service\")\n                };\n                this.readChildNodes(node, obj.executeResponse);\n            },\n            \"Process\":function(node,obj) {\n                obj.process = {};\n                this.readChildNodes(node, obj.process);\n            },\n            \"Status\":function(node,obj) {\n                obj.status = {\n                    creationTime: node.getAttribute(\"creationTime\")\n                };\n                this.readChildNodes(node, obj.status);\n            },\n            \"ProcessSucceeded\": function(node,obj) {\n                obj.processSucceeded = true;\n            },\n            \"ProcessOutputs\": function(node, processDescription) {\n                processDescription.processOutputs = [];\n                this.readChildNodes(node, processDescription.processOutputs);\n            },\n            \"Output\": function(node, processOutputs) {\n                var output = {};\n                this.readChildNodes(node, output);\n                processOutputs.push(output);\n            },\n            \"Reference\": function(node, output) {\n                output.reference = {\n                    href: node.getAttribute(\"href\"),\n                    mimeType: node.getAttribute(\"mimeType\"),\n                    encoding: node.getAttribute(\"encoding\"),\n                    schema: node.getAttribute(\"schema\")\n                };\n            },\n            \"Data\": function(node, output) {\n                output.data = {};\n                this.readChildNodes(node, output);\n            },\n            \"LiteralData\": function(node, output) {\n                output.literalData = {\n                    dataType: node.getAttribute(\"dataType\"),\n                    uom: node.getAttribute(\"uom\"),\n                    value: this.getChildValue(node)\n                };\n            },\n            \"ComplexData\": function(node, output) {\n                output.complexData = {\n                    mimeType: node.getAttribute(\"mimeType\"),\n                    schema: node.getAttribute(\"schema\"),\n                    encoding: node.getAttribute(\"encoding\"),\n                    value: \"\"\n                };\n                \n                // try to get *some* value, ignore the empty text values\n                if (this.isSimpleContent(node)) {\n                    var child;\n                    for(child=node.firstChild; child; child=child.nextSibling) {\n                        switch(child.nodeType) {\n                            case 3: // text node\n                            case 4: // cdata section\n                                output.complexData.value += child.nodeValue;\n                        }\n                    }\n                }\n                else {\n                    for(child=node.firstChild; child; child=child.nextSibling) {\n                        if (child.nodeType == 1) {\n                            output.complexData.value = child;\n                        }\n                    }\n                }\n\n            },\n            \"BoundingBox\": function(node, output) {\n                output.boundingBoxData = {\n                    dimensions: node.getAttribute(\"dimensions\"),\n                    crs: node.getAttribute(\"crs\")\n                };\n                this.readChildNodes(node, output.boundingBoxData);\n            }\n        },\n\n        // TODO: we should add Exception parsing here\n        \"ows\": OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers[\"ows\"]\n    },\n    \n    CLASS_NAME: \"OpenLayers.Format.WPSExecute\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML/VersionedOGC.js\n */\n\n/**\n * Class: OpenLayers.Format.XLS\n * Read/Write XLS (OpenLS). Create a new instance with the <OpenLayers.Format.XLS>\n *     constructor. Currently only implemented for Location Utility Services, more\n *     specifically only for Geocoding. No support for Reverse Geocoding as yet.\n * \n * Inherits from:\n *  - <OpenLayers.Format.XML.VersionedOGC>\n */\nOpenLayers.Format.XLS = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {\n    \n    /**\n     * APIProperty: defaultVersion\n     * {String} Version number to assume if none found.  Default is \"1.1.0\".\n     */\n    defaultVersion: \"1.1.0\",\n \n    /**\n     * APIProperty: stringifyOutput\n     * {Boolean} If true, write will return a string otherwise a DOMElement.\n     * Default is true.\n     */\n    stringifyOutput: true,\n    \n    /**\n     * Constructor: OpenLayers.Format.XLS\n     * Create a new parser for XLS.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * APIMethod: write\n     * Write out an XLS request.\n     *\n     * Parameters:\n     * request - {Object} An object representing the LUS request.\n     * options - {Object} Optional configuration object.\n     *\n     * Returns:\n     * {String} An XLS document string.\n     */\n    \n    /**\n     * APIMethod: read\n     * Read an XLS doc and return an object representing the result.\n     *\n     * Parameters:\n     * data - {String | DOMElement} Data to read.\n     * options - {Object} Options for the reader.\n     *\n     * Returns:\n     * {Object} An object representing the GeocodeResponse.\n     */\n\n    CLASS_NAME: \"OpenLayers.Format.XLS\" \n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XLS.js\n * @requires OpenLayers/Format/GML/v3.js\n */\n\n/**\n * Class: OpenLayers.Format.XLS.v1\n * Superclass for XLS version 1 parsers. Only supports GeocodeRequest for now.\n *\n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.XLS.v1 = OpenLayers.Class(OpenLayers.Format.XML, {\n    \n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        xls: \"http://www.opengis.net/xls\",\n        gml: \"http://www.opengis.net/gml\",\n        xsi: \"http://www.w3.org/2001/XMLSchema-instance\"\n    },\n\n    /**\n     * Property: regExes\n     * Compiled regular expressions for manipulating strings.\n     */\n    regExes: {\n        trimSpace: (/^\\s*|\\s*$/g),\n        removeSpace: (/\\s*/g),\n        splitSpace: (/\\s+/),\n        trimComma: (/\\s*,\\s*/g)\n    },\n\n    /**\n     * APIProperty: xy\n     * {Boolean} Order of the GML coordinate true:(x,y) or false:(y,x)\n     * Changing is not recommended, a new Format should be instantiated.\n     */\n    xy: true,\n    \n    /**\n     * Property: defaultPrefix\n     */\n    defaultPrefix: \"xls\",\n\n    /**\n     * Property: schemaLocation\n     * {String} Schema location for a particular minor version.\n     */\n    schemaLocation: null,\n    \n    /**\n     * Constructor: OpenLayers.Format.XLS.v1\n     * Instances of this class are not created directly.  Use the\n     *     <OpenLayers.Format.XLS> constructor instead.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    \n    /**\n     * Method: read\n     *\n     * Parameters:\n     * data - {DOMElement} An XLS document element.\n     * options - {Object} Options for the reader.\n     *\n     * Returns:\n     * {Object} An object representing the XLSResponse.\n     */\n    read: function(data, options) {\n        options = OpenLayers.Util.applyDefaults(options, this.options);\n        var xls = {};\n        this.readChildNodes(data, xls);\n        return xls;\n    },\n    \n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"xls\": {\n            \"XLS\": function(node, xls) {\n                xls.version = node.getAttribute(\"version\");\n                this.readChildNodes(node, xls);\n            },\n            \"Response\": function(node, xls) {\n               this.readChildNodes(node, xls);\n            },\n            \"GeocodeResponse\": function(node, xls) {\n               xls.responseLists = [];\n               this.readChildNodes(node, xls);\n            },\n            \"GeocodeResponseList\": function(node, xls) {\n                var responseList = {\n                    features: [], \n                    numberOfGeocodedAddresses: \n                        parseInt(node.getAttribute(\"numberOfGeocodedAddresses\"))\n                };\n                xls.responseLists.push(responseList);\n                this.readChildNodes(node, responseList);\n            },\n            \"GeocodedAddress\": function(node, responseList) {\n                var feature = new OpenLayers.Feature.Vector();\n                responseList.features.push(feature);\n                this.readChildNodes(node, feature);\n                // post-process geometry\n                feature.geometry = feature.components[0];\n            },\n            \"GeocodeMatchCode\": function(node, feature) {\n                feature.attributes.matchCode = {\n                    accuracy: parseFloat(node.getAttribute(\"accuracy\")),\n                    matchType: node.getAttribute(\"matchType\")\n                };\n            },\n            \"Address\": function(node, feature) {\n                var address = {\n                    countryCode: node.getAttribute(\"countryCode\"),\n                    addressee: node.getAttribute(\"addressee\"),\n                    street: [],\n                    place: []\n                };\n                feature.attributes.address = address;\n                this.readChildNodes(node, address);\n            },\n            \"freeFormAddress\": function(node, address) {\n                address.freeFormAddress = this.getChildValue(node);\n            },\n            \"StreetAddress\": function(node, address) {\n                this.readChildNodes(node, address);\n            },\n            \"Building\": function(node, address) {\n                address.building = {\n                    'number': node.getAttribute(\"number\"),\n                    subdivision: node.getAttribute(\"subdivision\"),\n                    buildingName: node.getAttribute(\"buildingName\")\n                };\n            },\n            \"Street\": function(node, address) {\n                // only support the built-in primitive type for now\n                address.street.push(this.getChildValue(node));\n            },\n            \"Place\": function(node, address) {\n                // type is one of CountrySubdivision, \n                // CountrySecondarySubdivision, Municipality or\n                // MunicipalitySubdivision\n                address.place[node.getAttribute(\"type\")] = \n                    this.getChildValue(node);\n            },\n            \"PostalCode\": function(node, address) {\n                address.postalCode = this.getChildValue(node);\n            }\n        },\n        \"gml\": OpenLayers.Format.GML.v3.prototype.readers.gml\n    },\n    \n    /**\n     * Method: write\n     *\n     * Parameters:\n     * request - {Object} An object representing the geocode request.\n     *\n     * Returns:\n     * {DOMElement} The root of an XLS document.\n     */\n    write: function(request) {\n        return this.writers.xls.XLS.apply(this, [request]);\n    },\n    \n    /**\n     * Property: writers\n     * As a compliment to the readers property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: {\n        \"xls\": {\n            \"XLS\": function(request) {\n                var root = this.createElementNSPlus(\n                    \"xls:XLS\",\n                    {attributes: {\n                        \"version\": this.VERSION,\n                        \"xsi:schemaLocation\": this.schemaLocation\n                    }}\n                );\n                this.writeNode(\"RequestHeader\", request.header, root);\n                this.writeNode(\"Request\", request, root);\n                return root;\n            },\n            \"RequestHeader\": function(header) {\n                return this.createElementNSPlus(\"xls:RequestHeader\");\n            },\n            \"Request\": function(request) {\n                var node = this.createElementNSPlus(\"xls:Request\", {\n                    attributes: {\n                        methodName: \"GeocodeRequest\",\n                        requestID: request.requestID || \"\",\n                        version: this.VERSION\n                    }\n                });\n                this.writeNode(\"GeocodeRequest\", request.addresses, node);\n                return node;\n            },\n            \"GeocodeRequest\": function(addresses) {\n                var node = this.createElementNSPlus(\"xls:GeocodeRequest\");\n                for (var i=0, len=addresses.length; i<len; i++) {\n                    this.writeNode(\"Address\", addresses[i], node);\n                }\n                return node;\n            },\n            \"Address\": function(address) {\n                var node = this.createElementNSPlus(\"xls:Address\", {\n                    attributes: {\n                        countryCode: address.countryCode\n                    }\n                });\n                if (address.freeFormAddress) {\n                    this.writeNode(\"freeFormAddress\", address.freeFormAddress, node);\n                } else {\n                    if (address.street) {\n                        this.writeNode(\"StreetAddress\", address, node);\n                    }\n                    if (address.municipality) {\n                        this.writeNode(\"Municipality\", address.municipality, node);\n                    }\n                    if (address.countrySubdivision) {\n                        this.writeNode(\"CountrySubdivision\", address.countrySubdivision, node);\n                    }\n                    if (address.postalCode) {\n                        this.writeNode(\"PostalCode\", address.postalCode, node);\n                    }\n                }\n                return node;\n            },\n            \"freeFormAddress\": function(freeFormAddress) {\n                return this.createElementNSPlus(\"freeFormAddress\", \n                    {value: freeFormAddress});\n            },\n            \"StreetAddress\": function(address) {\n                var node = this.createElementNSPlus(\"xls:StreetAddress\");\n                if (address.building) {\n                    this.writeNode(node, \"Building\", address.building);\n                }\n                var street = address.street;\n                if (!(OpenLayers.Util.isArray(street))) {\n                    street = [street];\n                }\n                for (var i=0, len=street.length; i < len; i++) {\n                    this.writeNode(\"Street\", street[i], node);\n                }\n                return node;\n            },\n            \"Building\": function(building) {\n                return this.createElementNSPlus(\"xls:Building\", {\n                    attributes: {\n                        \"number\": building[\"number\"],\n                        \"subdivision\": building.subdivision,\n                        \"buildingName\": building.buildingName\n                    }\n                });\n            },\n            \"Street\": function(street) {\n                return this.createElementNSPlus(\"xls:Street\", {value: street});\n            },\n            \"Municipality\": function(municipality) {\n                return this.createElementNSPlus(\"xls:Place\", {\n                    attributes: {\n                        type: \"Municipality\"\n                    },\n                    value: municipality\n                });\n            },\n            \"CountrySubdivision\": function(countrySubdivision) {\n                return this.createElementNSPlus(\"xls:Place\", {\n                    attributes: {\n                        type: \"CountrySubdivision\"\n                    },\n                    value: countrySubdivision\n                });\n            },\n            \"PostalCode\": function(postalCode) {\n                return this.createElementNSPlus(\"xls:PostalCode\", {\n                    value: postalCode\n                });\n            }\n        }\n    },\n    \n    CLASS_NAME: \"OpenLayers.Format.XLS.v1\" \n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XLS/v1.js\n */\n\n/**\n * Class: OpenLayers.Format.XLS.v1_1_0\n * Read / write XLS version 1.1.0.\n * \n * Inherits from:\n *  - <OpenLayers.Format.XLS.v1>\n */\nOpenLayers.Format.XLS.v1_1_0 = OpenLayers.Class(\n    OpenLayers.Format.XLS.v1, {\n    \n    /**\n     * Constant: VERSION\n     * {String} 1.1\n     */\n    VERSION: \"1.1\",\n    \n    /**\n     * Property: schemaLocation\n     * {String} http://www.opengis.net/xls\n     *   http://schemas.opengis.net/ols/1.1.0/LocationUtilityService.xsd\n     */\n    schemaLocation: \"http://www.opengis.net/xls http://schemas.opengis.net/ols/1.1.0/LocationUtilityService.xsd\",\n\n    /**\n     * Constructor: OpenLayers.Format.XLS.v1_1_0\n     * Instances of this class are not created directly.  Use the\n     *     <OpenLayers.Format.XLS> constructor instead.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    CLASS_NAME: \"OpenLayers.Format.XLS.v1_1_0\"\n\n});\n\n// Support non standard implementation\nOpenLayers.Format.XLS.v1_1 = OpenLayers.Format.XLS.v1_1_0;\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML.js\n */\n\n/**\n * Class: OpenLayers.Format.OGCExceptionReport\n * Class to read exception reports for various OGC services and versions.\n *\n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.OGCExceptionReport = OpenLayers.Class(OpenLayers.Format.XML, {\n\n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        ogc: \"http://www.opengis.net/ogc\"\n    },\n\n    /**\n     * Property: regExes\n     * Compiled regular expressions for manipulating strings.\n     */\n    regExes: {\n        trimSpace: (/^\\s*|\\s*$/g),\n        removeSpace: (/\\s*/g),\n        splitSpace: (/\\s+/),\n        trimComma: (/\\s*,\\s*/g)\n    },\n\n    /**\n     * Property: defaultPrefix\n     */\n    defaultPrefix: \"ogc\",\n\n    /**\n     * Constructor: OpenLayers.Format.OGCExceptionReport\n     * Create a new parser for OGC exception reports.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * APIMethod: read\n     * Read OGC exception report data from a string, and return an object with\n     * information about the exceptions.\n     *\n     * Parameters:\n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Object} Information about the exceptions that occurred.\n     */\n    read: function(data) {\n        var result;\n        if(typeof data == \"string\") {\n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n        var root = data.documentElement;\n        var exceptionInfo = {exceptionReport: null}; \n        if (root) {\n            this.readChildNodes(data, exceptionInfo);\n            if (exceptionInfo.exceptionReport === null) {\n                // fall-back to OWSCommon since this is a common output format for exceptions\n                // we cannot easily use the ows readers directly since they differ for 1.0 and 1.1\n                exceptionInfo = new OpenLayers.Format.OWSCommon().read(data);\n            }\n        }\n        return exceptionInfo;\n    },\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"ogc\": {\n            \"ServiceExceptionReport\": function(node, obj) {\n                obj.exceptionReport = {exceptions: []};\n                this.readChildNodes(node, obj.exceptionReport);\n            },\n            \"ServiceException\": function(node, exceptionReport) {\n                var exception = {\n                    code: node.getAttribute(\"code\"),\n                    locator: node.getAttribute(\"locator\"),\n                    text: this.getChildValue(node)\n                };\n                exceptionReport.exceptions.push(exception);\n            }\n        }\n    },\n    \n    CLASS_NAME: \"OpenLayers.Format.OGCExceptionReport\"\n    \n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/XML.js\n * @requires OpenLayers/BaseTypes/Bounds.js\n * @requires OpenLayers/BaseTypes/LonLat.js\n */\n\n/**\n * Class: OpenLayers.Format.TMSCapabilities\n * Parse TMS Capabilities.\n * See http://wiki.osgeo.org/wiki/Tile_Map_Service_Specification\n * \n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.TMSCapabilities = OpenLayers.Class(\n    OpenLayers.Format.XML, {\n\n    /**\n     * Property: defaultPrefix\n     */\n    defaultPrefix: \"tms\",\n\n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"tms\": {\n            \"Services\": function(node, obj) {\n                obj.services = [];\n                this.readChildNodes(node, obj);\n            },\n            \"TileMapService\": function(node, obj) {\n                if (obj.services) {\n                    obj.services.push({\n                        service: 'TMS', \n                        version: node.getAttribute(\"version\"),\n                        title: node.getAttribute(\"title\"),\n                        href: node.getAttribute(\"href\")\n                    });\n                } else {\n                    this.readChildNodes(node, obj);\n                }\n            },\n            \"TileMaps\": function(node, obj) {\n                obj.tileMaps = [];\n                this.readChildNodes(node, obj);\n            },\n            \"TileMap\": function(node, obj) {\n                if (obj.tileMaps) {\n                    obj.tileMaps.push({\n                        href: node.getAttribute(\"href\"),\n                        srs: node.getAttribute(\"srs\"),\n                        title: node.getAttribute(\"title\"),\n                        profile: node.getAttribute(\"profile\")\n                    });\n                } else {\n                    obj.version =  node.getAttribute(\"version\");\n                    obj.tileMapService = node.getAttribute(\"tilemapservice\");\n                    this.readChildNodes(node, obj);\n                }\n            },\n            \"Title\": function(node, obj) {\n                obj.title = this.getChildValue(node);\n            },\n            \"Abstract\": function(node, obj) {\n                obj['abstract'] = this.getChildValue(node);\n            },\n            \"SRS\": function(node, obj) {\n                obj.srs = this.getChildValue(node);\n            },\n            \"BoundingBox\": function(node, obj) {\n                obj.bbox = new OpenLayers.Bounds(\n                    node.getAttribute(\"minx\"),\n                    node.getAttribute(\"miny\"),\n                    node.getAttribute(\"maxx\"),\n                    node.getAttribute(\"maxy\"));\n            },\n            \"Origin\": function(node, obj) {\n                obj.origin = new OpenLayers.LonLat(\n                    node.getAttribute(\"x\"),\n                    node.getAttribute(\"y\"));\n            },\n            \"TileFormat\": function(node, obj) {\n                obj.tileFormat = {\n                    width: parseInt(node.getAttribute(\"width\"), 10),\n                    height: parseInt(node.getAttribute(\"height\"), 10),\n                    mimeType: node.getAttribute(\"mime-type\"),\n                    extension: node.getAttribute(\"extension\")\n                };\n            },\n            \"TileSets\": function(node, obj) {\n                obj.tileSets = [];\n                this.readChildNodes(node, obj);\n            },\n            \"TileSet\": function(node, obj) {\n                obj.tileSets.push({\n                    href: node.getAttribute(\"href\"),\n                    unitsPerPixel: parseFloat(node.getAttribute(\"units-per-pixel\")),\n                    order: parseInt(node.getAttribute(\"order\"), 10)\n                });\n            },\n            \"TileMapServerError\": function(node, obj) {\n                obj.error = true;\n            },\n            \"Message\": function(node, obj) {\n                obj.message = this.getChildValue(node);\n            }\n        }\n    },\n\n    /**\n     * APIMethod: read\n     * Read TMS capabilities data from a string, and return a list of tilesets. \n     * \n     * Parameters: \n     * data - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Object} Information about the services served by this TMS instance.\n     */\n    read: function(data) {\n        if(typeof data == \"string\") {\n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n        var raw = data;\n        if(data && data.nodeType == 9) {\n            data = data.documentElement;\n        }\n        var capabilities = {};\n        this.readNode(data, capabilities);\n        return capabilities;\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.TMSCapabilities\"\n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Handler/Click.js\n * @requires OpenLayers/Handler/Box.js\n * @requires OpenLayers/Handler/Hover.js\n * @requires OpenLayers/Filter/Spatial.js\n */\n\n/**\n * Class: OpenLayers.Control.GetFeature\n * Gets vector features for locations underneath the mouse cursor. Can be\n *     configured to act on click, hover or dragged boxes. Uses an\n *     <OpenLayers.Protocol> that supports spatial filters to retrieve\n *     features from a server and fires events that notify applications of the\n *     selected features. \n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.GetFeature = OpenLayers.Class(OpenLayers.Control, {\n    \n    /**\n     * APIProperty: protocol\n     * {<OpenLayers.Protocol>} Required. The protocol used for fetching\n     *     features.\n     */\n    protocol: null,\n    \n    /**\n     * APIProperty: multipleKey\n     * {String} An event modifier ('altKey' or 'shiftKey') that temporarily sets\n     *     the <multiple> property to true.  Default is null.\n     */\n    multipleKey: null,\n    \n    /**\n     * APIProperty: toggleKey\n     * {String} An event modifier ('altKey' or 'shiftKey') that temporarily sets\n     *     the <toggle> property to true.  Default is null.\n     */\n    toggleKey: null,\n    \n    /**\n     * Property: modifiers\n     * {Object} The event modifiers to use, according to the current event\n     *     being handled by this control's handlers\n     */\n    modifiers: null,\n    \n    /**\n     * APIProperty: multiple\n     * {Boolean} Allow selection of multiple geometries.  Default is false.\n     */\n    multiple: false, \n\n    /**\n     * APIProperty: click\n     * {Boolean} Use a click handler for selecting/unselecting features. If\n     *     both <click> and <box> are set to true, the click handler takes\n     *     precedence over the box handler if a box with zero extent was\n     *     selected.  Default is true.\n     */\n    click: true,\n\n    /**\n     * APIProperty: single\n     * {Boolean} Tells whether select by click should select a single\n     *     feature. If set to false, all matching features are selected.\n     *     If set to true, only the best matching feature is selected.\n     *     This option has an effect only of the <click> option is set\n     *     to true. Default is true.\n     */\n    single: true,\n    \n    /**\n     * APIProperty: clickout\n     * {Boolean} Unselect features when clicking outside any feature.\n     *     Applies only if <click> is true.  Default is true.\n     */\n    clickout: true,\n    \n    /**\n     * APIProperty: toggle\n     * {Boolean} Unselect a selected feature on click.  Applies only if\n     *     <click> is true.  Default is false.\n     */\n    toggle: false,\n\n    /**\n     * APIProperty: clickTolerance\n     * {Integer} Tolerance for the filter query in pixels. This has the\n     *     same effect as the tolerance parameter on WMS GetFeatureInfo\n     *     requests.  Will be ignored for box selections.  Applies only if\n     *     <click> or <hover> is true.  Default is 5.  Note that this not\n     *     only affects requests on click, but also on hover.\n     */\n    clickTolerance: 5,\n    \n    /**\n     * APIProperty: hover\n     * {Boolean} Send feature requests on mouse moves.  Default is false.\n     */\n    hover: false,\n\n    /**\n     * APIProperty: box\n     * {Boolean} Allow feature selection by drawing a box. If set to\n     *     true set <click> to false to disable the click handler and\n     *     rely on the box handler only, even for \"zero extent\" boxes.\n     *     See the description of the <click> option for additional\n     *     information.  Default is false.\n     */\n    box: false,\n    \n    /**\n     * APIProperty: maxFeatures\n     * {Integer} Maximum number of features to return from a query in single mode\n     *     if supported by the <protocol>. This set of features is then used to\n     *     determine the best match client-side. Default is 10.\n     */\n    maxFeatures: 10,\n    \n    /**\n     * Property: features\n     * {Object} Hash of {<OpenLayers.Feature.Vector>}, keyed by fid, holding\n     *     the currently selected features\n     */\n    features: null,\n    \n    /**\n     * Proeprty: hoverFeature\n     * {<OpenLayers.Feature.Vector>} The feature currently selected by the\n     *     hover handler\n     */\n    hoverFeature: null,\n    \n    /**\n     * APIProperty: handlerOptions\n     * {Object} Additional options for the handlers used by this control. This\n     *     is a hash with the keys \"click\", \"box\" and \"hover\".\n     */\n    \n    /**\n     * Property: handlers\n     * {Object} Object with references to multiple <OpenLayers.Handler>\n     *     instances.\n     */\n    handlers: null,\n\n    /**\n     * Property: hoverResponse\n     * {<OpenLayers.Protocol.Response>} The response object associated with\n     *     the currently running hover request (if any).\n     */\n    hoverResponse: null,\n    \n    /**\n     * Property: filterType\n     * {<String>} The type of filter to use when sending off a request. \n     *     Possible values: \n     *     OpenLayers.Filter.Spatial.<BBOX|INTERSECTS|WITHIN|CONTAINS>\n     *     Defaults to: OpenLayers.Filter.Spatial.BBOX\n     */\n    filterType: OpenLayers.Filter.Spatial.BBOX,\n\n    /** \n     * APIProperty: events\n     * {<OpenLayers.Events>} Events instance for listeners and triggering\n     *     control specific events.\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * control.events.register(type, obj, listener);\n     * (end)\n     *\n     * Supported event types (in addition to those from <OpenLayers.Control.events>):\n     * beforefeatureselected - Triggered when <click> is true before a\n     *      feature is selected. The event object has a feature property with\n     *      the feature about to select\n     * featureselected - Triggered when <click> is true and a feature is\n     *      selected. The event object has a feature property with the\n     *      selected feature\n     * beforefeaturesselected - Triggered when <click> is true before a\n     *      set of features is selected. The event object is an array of\n     *      feature properties with the features about to be selected.  \n     *      Return false after receiving this event to discontinue processing\n     *      of all featureselected events and the featuresselected event.\n     * featuresselected - Triggered when <click> is true and a set of\n     *      features is selected.  The event object is an array of feature\n     *      properties of the selected features\n     * featureunselected - Triggered when <click> is true and a feature is\n     *      unselected. The event object has a feature property with the\n     *      unselected feature\n     * clickout - Triggered when when <click> is true and no feature was\n     *      selected.\n     * hoverfeature - Triggered when <hover> is true and the mouse has\n     *      stopped over a feature\n     * outfeature - Triggered when <hover> is true and the mouse moves\n     *      moved away from a hover-selected feature\n     */\n\n    /**\n     * Constructor: OpenLayers.Control.GetFeature\n     * Create a new control for fetching remote features.\n     *\n     * Parameters:\n     * options - {Object} A configuration object which at least has to contain\n     *     a <protocol> property (if not, it has to be set before a request is\n     *     made)\n     */\n    initialize: function(options) {\n        options.handlerOptions = options.handlerOptions || {};\n\n        OpenLayers.Control.prototype.initialize.apply(this, [options]);\n        \n        this.features = {};\n\n        this.handlers = {};\n        \n        if(this.click) {\n            this.handlers.click = new OpenLayers.Handler.Click(this,\n                {click: this.selectClick}, this.handlerOptions.click || {});\n        }\n\n        if(this.box) {\n            this.handlers.box = new OpenLayers.Handler.Box(\n                this, {done: this.selectBox},\n                OpenLayers.Util.extend(this.handlerOptions.box, {\n                    boxDivClassName: \"olHandlerBoxSelectFeature\"\n                })\n            ); \n        }\n        \n        if(this.hover) {\n            this.handlers.hover = new OpenLayers.Handler.Hover(\n                this, {'move': this.cancelHover, 'pause': this.selectHover},\n                OpenLayers.Util.applyDefaults(this.handlerOptions.hover, {\n                    'delay': 250,\n                    'pixelTolerance': 2\n                })\n            );\n        }\n    },\n    \n    /**\n     * Method: activate\n     * Activates the control.\n     * \n     * Returns:\n     * {Boolean} The control was effectively activated.\n     */\n    activate: function () {\n        if (!this.active) {\n            for(var i in this.handlers) {\n                this.handlers[i].activate();\n            }\n        }\n        return OpenLayers.Control.prototype.activate.apply(\n            this, arguments\n        );\n    },\n\n    /**\n     * Method: deactivate\n     * Deactivates the control.\n     * \n     * Returns:\n     * {Boolean} The control was effectively deactivated.\n     */\n    deactivate: function () {\n        if (this.active) {\n            for(var i in this.handlers) {\n                this.handlers[i].deactivate();\n            }\n        }\n        return OpenLayers.Control.prototype.deactivate.apply(\n            this, arguments\n        );\n    },\n    \n    /**\n     * Method: selectClick\n     * Called on click\n     *\n     * Parameters:\n     * evt - {<OpenLayers.Event>} \n     */\n    selectClick: function(evt) {\n        var bounds = this.pixelToBounds(evt.xy);\n        \n        this.setModifiers(evt);\n        this.request(bounds, {single: this.single});\n    },\n\n    /**\n     * Method: selectBox\n     * Callback from the handlers.box set up when <box> selection is on\n     *\n     * Parameters:\n     * position - {<OpenLayers.Bounds>|Object} An OpenLayers.Bounds or\n     * an object with a 'left', 'bottom', 'right' and 'top' properties.\n     */\n    selectBox: function(position) {\n        var bounds;\n        if (position instanceof OpenLayers.Bounds) {\n            var minXY = this.map.getLonLatFromPixel({\n                x: position.left,\n                y: position.bottom\n            });\n            var maxXY = this.map.getLonLatFromPixel({\n                x: position.right,\n                y: position.top\n            });\n            bounds = new OpenLayers.Bounds(\n                minXY.lon, minXY.lat, maxXY.lon, maxXY.lat\n            );\n            \n        } else {\n            if(this.click) {\n                // box without extent - let the click handler take care of it\n                return;\n            }\n            bounds = this.pixelToBounds(position);\n        }\n        this.setModifiers(this.handlers.box.dragHandler.evt);\n        this.request(bounds);\n    },\n    \n    /**\n     * Method: selectHover\n     * Callback from the handlers.hover set up when <hover> selection is on\n     *\n     * Parameters:\n     * evt - {Object} event object with an xy property\n     */\n    selectHover: function(evt) {\n        var bounds = this.pixelToBounds(evt.xy);\n        this.request(bounds, {single: true, hover: true});\n    },\n\n    /**\n     * Method: cancelHover\n     * Callback from the handlers.hover set up when <hover> selection is on\n     */\n    cancelHover: function() {\n        if (this.hoverResponse) {\n            this.protocol.abort(this.hoverResponse);\n            this.hoverResponse = null;\n\n            OpenLayers.Element.removeClass(this.map.viewPortDiv, \"olCursorWait\");\n        }\n    },\n\n    /**\n     * Method: request\n     * Sends a GetFeature request to the WFS\n     * \n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>} bounds for the request's BBOX filter\n     * options - {Object} additional options for this method.\n     * \n     * Supported options include:\n     * single - {Boolean} A single feature should be returned.\n     *     Note that this will be ignored if the protocol does not\n     *     return the geometries of the features.\n     * hover - {Boolean} Do the request for the hover handler.\n     */\n    request: function(bounds, options) {\n        options = options || {};\n        var filter = new OpenLayers.Filter.Spatial({\n            type: this.filterType, \n            value: bounds\n        });\n        \n        // Set the cursor to \"wait\" to tell the user we're working.\n        OpenLayers.Element.addClass(this.map.viewPortDiv, \"olCursorWait\");\n\n        var response = this.protocol.read({\n            maxFeatures: options.single == true ? this.maxFeatures : undefined,\n            filter: filter,\n            callback: function(result) {\n                if(result.success()) {\n                    if(result.features.length) {\n                        if(options.single == true) {\n                            this.selectBestFeature(result.features,\n                                bounds.getCenterLonLat(), options);\n                        } else {\n                            this.select(result.features);\n                        }\n                    } else if(options.hover) {\n                        this.hoverSelect();\n                    } else {\n                        this.events.triggerEvent(\"clickout\");\n                        if(this.clickout) {\n                            this.unselectAll();\n                        }\n                    }\n                }\n                // Reset the cursor.\n                OpenLayers.Element.removeClass(this.map.viewPortDiv, \"olCursorWait\");\n            },\n            scope: this\n        });\n        if(options.hover == true) {\n            this.hoverResponse = response;\n        }\n    },\n\n    /**\n     * Method: selectBestFeature\n     * Selects the feature from an array of features that is the best match\n     *     for the click position.\n     * \n     * Parameters:\n     * features - {Array(<OpenLayers.Feature.Vector>)}\n     * clickPosition - {<OpenLayers.LonLat>}\n     * options - {Object} additional options for this method\n     * \n     * Supported options include:\n     * hover - {Boolean} Do the selection for the hover handler.\n     */\n    selectBestFeature: function(features, clickPosition, options) {\n        options = options || {};\n        if(features.length) {\n            var point = new OpenLayers.Geometry.Point(clickPosition.lon,\n                clickPosition.lat);\n            var feature, resultFeature, dist;\n            var minDist = Number.MAX_VALUE;\n            for(var i=0; i<features.length; ++i) {\n                feature = features[i];\n                if(feature.geometry) {\n                    dist = point.distanceTo(feature.geometry, {edge: false});\n                    if(dist < minDist) {\n                        minDist = dist;\n                        resultFeature = feature;\n                        if(minDist == 0) {\n                            break;\n                        }\n                    }\n                }\n            }\n            \n            if(options.hover == true) {\n                this.hoverSelect(resultFeature);\n            } else {\n                this.select(resultFeature || features);\n            } \n        }\n    },\n    \n    /**\n     * Method: setModifiers\n     * Sets the multiple and toggle modifiers according to the current event\n     * \n     * Parameters:\n     * evt - {<OpenLayers.Event>}\n     */\n    setModifiers: function(evt) {\n        this.modifiers = {\n            multiple: this.multiple || (this.multipleKey && evt[this.multipleKey]),\n            toggle: this.toggle || (this.toggleKey && evt[this.toggleKey])\n        };        \n    },\n\n    /**\n     * Method: select\n     * Add feature to the hash of selected features and trigger the\n     * featureselected and featuresselected events.\n     * \n     * Parameters:\n     * features - {<OpenLayers.Feature.Vector>} or an array of features\n     */\n    select: function(features) {\n        if(!this.modifiers.multiple && !this.modifiers.toggle) {\n            this.unselectAll();\n        }\n        if(!(OpenLayers.Util.isArray(features))) {\n            features = [features];\n        }\n        \n        var cont = this.events.triggerEvent(\"beforefeaturesselected\", {\n            features: features\n        });\n        if(cont !== false) {\n            var selectedFeatures = [];\n            var feature;\n            for(var i=0, len=features.length; i<len; ++i) {\n                feature = features[i];\n                if(this.features[feature.fid || feature.id]) {\n                    if(this.modifiers.toggle) {\n                        this.unselect(this.features[feature.fid || feature.id]);\n                    }\n                } else {\n                    cont = this.events.triggerEvent(\"beforefeatureselected\", {\n                        feature: feature\n                    });\n                    if(cont !== false) {\n                        this.features[feature.fid || feature.id] = feature;\n                        selectedFeatures.push(feature);\n                \n                        this.events.triggerEvent(\"featureselected\",\n                            {feature: feature});\n                    }\n                }\n            }\n            this.events.triggerEvent(\"featuresselected\", {\n                features: selectedFeatures\n            });\n        }\n    },\n    \n    /**\n     * Method: hoverSelect\n     * Sets/unsets the <hoverFeature>\n     * \n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} the feature to hover-select.\n     *     If none is provided, the current <hoverFeature> will be nulled and\n     *     the outfeature event will be triggered.\n     */\n    hoverSelect: function(feature) {\n        var fid = feature ? feature.fid || feature.id : null;\n        var hfid = this.hoverFeature ?\n            this.hoverFeature.fid || this.hoverFeature.id : null;\n            \n        if(hfid && hfid != fid) {\n            this.events.triggerEvent(\"outfeature\",\n                {feature: this.hoverFeature});\n            this.hoverFeature = null;\n        }\n        if(fid && fid != hfid) {\n            this.events.triggerEvent(\"hoverfeature\", {feature: feature});\n            this.hoverFeature = feature;\n        }\n    },\n\n    /**\n     * Method: unselect\n     * Remove feature from the hash of selected features and trigger the\n     * featureunselected event.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     */\n    unselect: function(feature) {\n        delete this.features[feature.fid || feature.id];\n        this.events.triggerEvent(\"featureunselected\", {feature: feature});\n    },\n    \n    /**\n     * Method: unselectAll\n     * Unselect all selected features.\n     */\n    unselectAll: function() {\n        // we'll want an option to suppress notification here\n        for(var fid in this.features) {\n            this.unselect(this.features[fid]);\n        }\n    },\n    \n    /** \n     * Method: setMap\n     * Set the map property for the control. \n     * \n     * Parameters:\n     * map - {<OpenLayers.Map>} \n     */\n    setMap: function(map) {\n        for(var i in this.handlers) {\n            this.handlers[i].setMap(map);\n        }\n        OpenLayers.Control.prototype.setMap.apply(this, arguments);\n    },\n    \n    /**\n     * Method: pixelToBounds\n     * Takes a pixel as argument and creates bounds after adding the\n     * <clickTolerance>.\n     * \n     * Parameters:\n     * pixel - {<OpenLayers.Pixel>}\n     */\n    pixelToBounds: function(pixel) {\n        var llPx = pixel.add(-this.clickTolerance/2, this.clickTolerance/2);\n        var urPx = pixel.add(this.clickTolerance/2, -this.clickTolerance/2);\n        var ll = this.map.getLonLatFromPixel(llPx);\n        var ur = this.map.getLonLatFromPixel(urPx);\n        return new OpenLayers.Bounds(ll.lon, ll.lat, ur.lon, ur.lat);\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.GetFeature\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control/Panel.js\n * @requires OpenLayers/Control/Navigation.js\n * @requires OpenLayers/Control/ZoomBox.js\n */\n\n/**\n * Class: OpenLayers.Control.NavToolbar\n * This Toolbar is an alternative to the Navigation control that displays\n *     the state of the control, and provides a UI for changing state to\n *     use the zoomBox via a Panel control.\n *\n * If you wish to change the properties of the Navigation control used\n *     in the NavToolbar, see: \n *     http://trac.openlayers.org/wiki/Toolbars#SubclassingNavToolbar \n * \n * \n * Inherits from:\n *  - <OpenLayers.Control.Panel>\n */\nOpenLayers.Control.NavToolbar = OpenLayers.Class(OpenLayers.Control.Panel, {\n\n    /**\n     * Constructor: OpenLayers.Control.NavToolbar \n     * Add our two mousedefaults controls.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be used\n     *     to extend the control.\n     */\n    initialize: function(options) {\n        OpenLayers.Control.Panel.prototype.initialize.apply(this, [options]);\n        this.addControls([\n          new OpenLayers.Control.Navigation(),\n          new OpenLayers.Control.ZoomBox()\n        ]);\n    },\n\n    /**\n     * Method: draw \n     * calls the default draw, and then activates mouse defaults.\n     */\n    draw: function() {\n        var div = OpenLayers.Control.Panel.prototype.draw.apply(this, arguments);\n        if (this.defaultControl === null) {\n            this.defaultControl = this.controls[0];\n        }\n        return div;\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.NavToolbar\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control/Panel.js\n * @requires OpenLayers/Control/Pan.js\n */\n\n/**\n * Class: OpenLayers.Control.PanPanel\n * The PanPanel is visible control for panning the map North, South, East or\n * West in small steps. By default it is drawn in the top left corner of the\n * map.\n *\n * Note: \n * If you wish to use this class with the default images and you want \n *       it to look nice in ie6, you should add the following, conditionally\n *       added css stylesheet to your HTML file:\n * \n * (code)\n * <!--[if lte IE 6]>\n *   <link rel=\"stylesheet\" href=\"../theme/default/ie6-style.css\" type=\"text/css\" />\n * <![endif]-->\n * (end)\n *\n * Inherits from:\n *  - <OpenLayers.Control.Panel> \n */\nOpenLayers.Control.PanPanel = OpenLayers.Class(OpenLayers.Control.Panel, {\n\n    /** \n     * APIProperty: slideFactor\n     * {Integer} Number of pixels by which we'll pan the map in any direction \n     *     on clicking the arrow buttons, defaults to 50.  If you want to pan\n     *     by some ratio of the map dimensions, use <slideRatio> instead.\n     */\n    slideFactor: 50,\n\n    /** \n     * APIProperty: slideRatio\n     * {Number} The fraction of map width/height by which we'll pan the map            \n     *     on clicking the arrow buttons.  Default is null.  If set, will\n     *     override <slideFactor>. E.g. if slideRatio is .5, then Pan Up will\n     *     pan up half the map height. \n     */\n    slideRatio: null,\n\n    /**\n     * Constructor: OpenLayers.Control.PanPanel \n     * Add the four directional pan buttons.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be used\n     *     to extend the control.\n     */\n    initialize: function(options) {\n        OpenLayers.Control.Panel.prototype.initialize.apply(this, [options]);\n        var options = {\n            slideFactor: this.slideFactor,\n            slideRatio: this.slideRatio\n        };\n        this.addControls([\n            new OpenLayers.Control.Pan(OpenLayers.Control.Pan.NORTH, options),\n            new OpenLayers.Control.Pan(OpenLayers.Control.Pan.SOUTH, options),\n            new OpenLayers.Control.Pan(OpenLayers.Control.Pan.EAST, options),\n            new OpenLayers.Control.Pan(OpenLayers.Control.Pan.WEST, options)\n        ]);\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.PanPanel\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control/Button.js\n */\n\n/**\n * Class: OpenLayers.Control.Pan\n * The Pan control is a single button to pan the map in one direction. For\n * a more complete control see <OpenLayers.Control.PanPanel>.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.Pan = OpenLayers.Class(OpenLayers.Control.Button, {\n\n    /** \n     * APIProperty: slideFactor\n     * {Integer} Number of pixels by which we'll pan the map in any direction \n     *     on clicking the arrow buttons, defaults to 50.  If you want to pan\n     *     by some ratio of the map dimensions, use <slideRatio> instead.\n     */\n    slideFactor: 50,\n\n    /** \n     * APIProperty: slideRatio\n     * {Number} The fraction of map width/height by which we'll pan the map            \n     *     on clicking the arrow buttons.  Default is null.  If set, will\n     *     override <slideFactor>. E.g. if slideRatio is .5, then Pan Up will\n     *     pan up half the map height. \n     */\n    slideRatio: null,\n\n    /** \n     * Property: direction\n     * {String} in {'North', 'South', 'East', 'West'}\n     */\n    direction: null,\n\n    /**\n     * Constructor: OpenLayers.Control.Pan \n     * Control which handles the panning (in any of the cardinal directions)\n     *     of the map by a set px distance. \n     *\n     * Parameters:\n     * direction - {String} The direction this button should pan.\n     * options - {Object} An optional object whose properties will be used\n     *     to extend the control.\n     */\n    initialize: function(direction, options) {\n    \n        this.direction = direction;\n        this.CLASS_NAME += this.direction;\n        \n        OpenLayers.Control.prototype.initialize.apply(this, [options]);\n    },\n    \n    /**\n     * Method: trigger\n     */\n    trigger: function(){\n        if (this.map) {\n            var getSlideFactor = OpenLayers.Function.bind(function (dim) {\n                return this.slideRatio ?\n                    this.map.getSize()[dim] * this.slideRatio :\n                    this.slideFactor;\n            }, this);\n    \n            switch (this.direction) {\n                case OpenLayers.Control.Pan.NORTH: \n                    this.map.pan(0, -getSlideFactor(\"h\"));\n                    break;\n                case OpenLayers.Control.Pan.SOUTH: \n                    this.map.pan(0, getSlideFactor(\"h\"));\n                    break;\n                case OpenLayers.Control.Pan.WEST: \n                    this.map.pan(-getSlideFactor(\"w\"), 0);\n                    break;\n                case OpenLayers.Control.Pan.EAST: \n                    this.map.pan(getSlideFactor(\"w\"), 0);\n                    break;\n            }   \n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.Pan\"\n});\n\nOpenLayers.Control.Pan.NORTH = \"North\";\nOpenLayers.Control.Pan.SOUTH = \"South\";\nOpenLayers.Control.Pan.EAST = \"East\";\nOpenLayers.Control.Pan.WEST = \"West\";\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control/Button.js\n */\n\n/**\n * Class: OpenLayers.Control.ZoomIn\n * The ZoomIn control is a button to increase the zoom level of a map.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.ZoomIn = OpenLayers.Class(OpenLayers.Control.Button, {\n\n    /**\n     * Method: trigger\n     */\n    trigger: function(){\n        if (this.map) {\n            this.map.zoomIn();\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.ZoomIn\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control/Button.js\n */\n\n/**\n * Class: OpenLayers.Control.ZoomOut\n * The ZoomOut control is a button to decrease the zoom level of a map.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.ZoomOut = OpenLayers.Class(OpenLayers.Control.Button, {\n\n    /**\n     * Method: trigger\n     */\n    trigger: function(){\n        if (this.map) {\n            this.map.zoomOut();\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.ZoomOut\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control/Panel.js\n * @requires OpenLayers/Control/ZoomIn.js\n * @requires OpenLayers/Control/ZoomOut.js\n * @requires OpenLayers/Control/ZoomToMaxExtent.js\n */\n\n/**\n * Class: OpenLayers.Control.ZoomPanel\n * The ZoomPanel control is a compact collection of 3 zoom controls: a \n * <OpenLayers.Control.ZoomIn>, a <OpenLayers.Control.ZoomToMaxExtent>, and a\n * <OpenLayers.Control.ZoomOut>. By default it is drawn in the upper left \n * corner of the map.\n *\n * Note: \n * If you wish to use this class with the default images and you want \n *       it to look nice in ie6, you should add the following, conditionally\n *       added css stylesheet to your HTML file:\n * \n * (code)\n * <!--[if lte IE 6]>\n *   <link rel=\"stylesheet\" href=\"../theme/default/ie6-style.css\" type=\"text/css\" />\n * <![endif]-->\n * (end)\n * \n * Inherits from:\n *  - <OpenLayers.Control.Panel>\n */\nOpenLayers.Control.ZoomPanel = OpenLayers.Class(OpenLayers.Control.Panel, {\n\n    /**\n     * Constructor: OpenLayers.Control.ZoomPanel \n     * Add the three zooming controls.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be used\n     *     to extend the control.\n     */\n    initialize: function(options) {\n        OpenLayers.Control.Panel.prototype.initialize.apply(this, [options]);\n        this.addControls([\n            new OpenLayers.Control.ZoomIn(),\n            new OpenLayers.Control.ZoomToMaxExtent(),\n            new OpenLayers.Control.ZoomOut()\n        ]);\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.ZoomPanel\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control/Panel.js\n * @requires OpenLayers/Control/Navigation.js\n * @requires OpenLayers/Control/DrawFeature.js\n * @requires OpenLayers/Handler/Point.js\n * @requires OpenLayers/Handler/Path.js\n * @requires OpenLayers/Handler/Polygon.js\n */\n\n/**\n * Class: OpenLayers.Control.EditingToolbar \n * The EditingToolbar is a panel of 4 controls to draw polygons, lines, \n * points, or to navigate the map by panning. By default it appears in the \n * upper right corner of the map.\n * \n * Inherits from:\n *  - <OpenLayers.Control.Panel>\n */\nOpenLayers.Control.EditingToolbar = OpenLayers.Class(\n  OpenLayers.Control.Panel, {\n\n    /**\n     * APIProperty: citeCompliant\n     * {Boolean} If set to true, coordinates of features drawn in a map extent\n     * crossing the date line won't exceed the world bounds. Default is false.\n     */\n    citeCompliant: false,\n\n    /**\n     * Constructor: OpenLayers.Control.EditingToolbar\n     * Create an editing toolbar for a given layer. \n     *\n     * Parameters:\n     * layer - {<OpenLayers.Layer.Vector>} \n     * options - {Object} \n     */\n    initialize: function(layer, options) {\n        OpenLayers.Control.Panel.prototype.initialize.apply(this, [options]);\n        \n        this.addControls(\n          [ new OpenLayers.Control.Navigation() ]\n        );  \n        var controls = [\n            new OpenLayers.Control.DrawFeature(layer, OpenLayers.Handler.Point, {\n                displayClass: 'olControlDrawFeaturePoint',\n                handlerOptions: {citeCompliant: this.citeCompliant}\n            }),\n            new OpenLayers.Control.DrawFeature(layer, OpenLayers.Handler.Path, {\n                displayClass: 'olControlDrawFeaturePath',\n                handlerOptions: {citeCompliant: this.citeCompliant}\n            }),\n            new OpenLayers.Control.DrawFeature(layer, OpenLayers.Handler.Polygon, {\n                displayClass: 'olControlDrawFeaturePolygon',\n                handlerOptions: {citeCompliant: this.citeCompliant}\n            })\n        ];\n        this.addControls(controls);\n    },\n\n    /**\n     * Method: draw\n     * calls the default draw, and then activates mouse defaults.\n     *\n     * Returns:\n     * {DOMElement}\n     */\n    draw: function() {\n        var div = OpenLayers.Control.Panel.prototype.draw.apply(this, arguments);\n        if (this.defaultControl === null) {\n            this.defaultControl = this.controls[0];\n        }\n        return div;\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.EditingToolbar\"\n});    \n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Geometry/Point.js\n * @requires OpenLayers/Projection.js\n */\n\n/**\n * Class: OpenLayers.Control.Geolocate\n * The Geolocate control wraps w3c geolocation API into control that can be\n * bound to a map, and generate events on location update\n *\n * To use this control requires to load the proj4js library if the projection\n * of the map is not EPSG:4326 or EPSG:900913.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.Geolocate = OpenLayers.Class(OpenLayers.Control, {\n\n    /** \n     * APIProperty: events\n     * {<OpenLayers.Events>} Events instance for listeners and triggering\n     *     control specific events.\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * control.events.register(type, obj, listener);\n     * (end)\n     *\n     * Supported event types (in addition to those from <OpenLayers.Control.events>):\n     * locationupdated - Triggered when browser return a new position. Listeners will \n     *     receive an object with a 'position' property which is the browser.geolocation.position\n     *     native object, as well as a 'point' property which is the location transformed in the \n     *     current map projection.\n     * locationfailed - Triggered when geolocation has failed\n     * locationuncapable - Triggered when control is activated on a browser\n     *     which doesn't support geolocation\n     */\n\n    /**\n     * Property: geolocation\n     * {Object} The geolocation engine, as a property to be possibly mocked.\n     * This is set lazily to avoid a memory leak in IE9.\n     */\n    geolocation: null,\n\n    /**\n     * Property: available\n     * {Boolean} The navigator.geolocation object is available.\n     */\n    available: ('geolocation' in navigator),\n\n    /**\n     * APIProperty: bind\n     * {Boolean} If true, map center will be set on location update.\n     */\n    bind: true,\n\n    /**\n     * APIProperty: watch\n     * {Boolean} If true, position will be update regularly.\n     */\n    watch: false,\n\n    /**\n     * APIProperty: geolocationOptions\n     * {Object} Options to pass to the navigator's geolocation API. See\n     *     <http://dev.w3.org/geo/api/spec-source.html>. No specific\n     *     option is passed to the geolocation API by default.\n     */\n    geolocationOptions: null,\n\n    /**\n     * Constructor: OpenLayers.Control.Geolocate\n     * Create a new control to deal with browser geolocation API\n     *\n     */\n\n    /**\n     * Method: destroy\n     */\n    destroy: function() {\n        this.deactivate();\n        OpenLayers.Control.prototype.destroy.apply(this, arguments);\n    },\n\n    /**\n     * Method: activate\n     * Activates the control.\n     *\n     * Returns:\n     * {Boolean} The control was effectively activated.\n     */\n    activate: function () {\n        if (this.available && !this.geolocation) {\n            // set lazily to avoid IE9 memory leak\n            this.geolocation = navigator.geolocation;\n        }\n        if (!this.geolocation) {\n            this.events.triggerEvent(\"locationuncapable\");\n            return false;\n        }\n        if (OpenLayers.Control.prototype.activate.apply(this, arguments)) {\n            if (this.watch) {\n                this.watchId = this.geolocation.watchPosition(\n                    OpenLayers.Function.bind(this.geolocate, this),\n                    OpenLayers.Function.bind(this.failure, this),\n                    this.geolocationOptions\n                );\n            } else {\n                this.getCurrentLocation();\n            }\n            return true;\n        }\n        return false;\n    },\n\n    /**\n     * Method: deactivate\n     * Deactivates the control.\n     *\n     * Returns:\n     * {Boolean} The control was effectively deactivated.\n     */\n    deactivate: function () {\n        if (this.active && this.watchId !== null) {\n            this.geolocation.clearWatch(this.watchId);\n        }\n        return OpenLayers.Control.prototype.deactivate.apply(\n            this, arguments\n        );\n    },\n\n    /**\n     * Method: geolocate\n     * Activates the control.\n     *\n     */\n    geolocate: function (position) {\n        var center = new OpenLayers.LonLat(\n            position.coords.longitude,\n            position.coords.latitude\n        ).transform(\n            new OpenLayers.Projection(\"EPSG:4326\"),\n            this.map.getProjectionObject()\n        );\n        if (this.bind) {\n            this.map.setCenter(center);\n        }\n        this.events.triggerEvent(\"locationupdated\", {\n            position: position,\n            point: new OpenLayers.Geometry.Point(\n                center.lon, center.lat\n            )\n        });\n    },\n\n    /**\n     * APIMethod: getCurrentLocation\n     *\n     * Returns:\n     * {Boolean} Returns true if a event will be fired (successful\n     * registration)\n     */\n    getCurrentLocation: function() {\n        if (!this.active || this.watch) {\n            return false;\n        }\n        this.geolocation.getCurrentPosition(\n            OpenLayers.Function.bind(this.geolocate, this),\n            OpenLayers.Function.bind(this.failure, this),\n            this.geolocationOptions\n        );\n        return true;\n    },\n\n    /**\n     * Method: failure\n     * method called on browser's geolocation failure\n     *\n     */\n    failure: function (error) {\n        this.events.triggerEvent(\"locationfailed\", {error: error});\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.Geolocate\"\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n */\n\n/**\n * Class: OpenLayers.Symbolizer\n * Base class representing a symbolizer used for feature rendering.\n */\nOpenLayers.Symbolizer = OpenLayers.Class({\n    \n\n    /**\n     * APIProperty: zIndex\n     * {Number} The zIndex determines the rendering order for a symbolizer.\n     *     Symbolizers with larger zIndex values are rendered over symbolizers\n     *     with smaller zIndex values.  Default is 0.\n     */\n    zIndex: 0,\n    \n    /**\n     * Constructor: OpenLayers.Symbolizer\n     * Instances of this class are not useful.  See one of the subclasses.\n     *\n     * Parameters:\n     * config - {Object} An object containing properties to be set on the \n     *     symbolizer.  Any documented symbolizer property can be set at \n     *     construction.\n     *\n     * Returns:\n     * A new symbolizer.\n     */\n    initialize: function(config) {\n        OpenLayers.Util.extend(this, config);\n    },\n    \n    /** \n     * APIMethod: clone\n     * Create a copy of this symbolizer.\n     *\n     * Returns a symbolizer of the same type with the same properties.\n     */\n    clone: function() {\n        var Type = OpenLayers.Util.getConstructor(this.CLASS_NAME);\n        return new Type(OpenLayers.Util.extend({}, this));\n    },\n    \n    CLASS_NAME: \"OpenLayers.Symbolizer\"\n    \n});\n\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Symbolizer.js\n */\n\n/**\n * Class: OpenLayers.Symbolizer.Point\n * A symbolizer used to render point features.\n */\nOpenLayers.Symbolizer.Point = OpenLayers.Class(OpenLayers.Symbolizer, {\n    \n    /**\n     * APIProperty: strokeColor\n     * {String} Color for line stroke.  This is a RGB hex value (e.g. \"#ff0000\"\n     *     for red).\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n    \n    /**\n     * APIProperty: strokeOpacity\n     * {Number} Stroke opacity (0-1).\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n    \n    /**\n     * APIProperty: strokeWidth\n     * {Number} Pixel stroke width.\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n    \n    /**\n     * APIProperty: strokeLinecap\n     * {String} Stroke cap type (\"butt\", \"round\", or \"square\").\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n    \n    /**\n     * Property: strokeDashstyle\n     * {String} Stroke dash style according to the SLD spec. Note that the\n     *     OpenLayers values for strokeDashstyle (\"dot\", \"dash\", \"dashdot\",\n     *     \"longdash\", \"longdashdot\", or \"solid\") will not work in SLD, but\n     *     most SLD patterns will render correctly in OpenLayers.\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n\n    /**\n     * APIProperty: fillColor\n     * {String} RGB hex fill color (e.g. \"#ff0000\" for red).\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n    \n    /**\n     * APIProperty: fillOpacity\n     * {Number} Fill opacity (0-1).\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n\n    /**\n     * APIProperty: pointRadius\n     * {Number} Pixel point radius.\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n\n    /**\n     * APIProperty: externalGraphic\n     * {String} Url to an external graphic that will be used for rendering \n     *     points.\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n    \n    /**\n     * APIProperty: graphicWidth\n     * {Number} Pixel width for sizing an external graphic.\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n    \n    /**\n     * APIProperty: graphicHeight\n     * {Number} Pixel height for sizing an external graphic.\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n    \n    /**\n     * APIProperty: graphicOpacity\n     * {Number} Opacity (0-1) for an external graphic.\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n    \n    /**\n     * APIProperty: graphicXOffset\n     * {Number} Pixel offset along the positive x axis for displacing an \n     *     external graphic.\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n    \n    /**\n     * APIProperty: graphicYOffset\n     * {Number} Pixel offset along the positive y axis for displacing an \n     *     external graphic.\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n\n    /**\n     * APIProperty: rotation\n     * {Number} The rotation of a graphic in the clockwise direction about its \n     *     center point (or any point off center as specified by \n     *     <graphicXOffset> and <graphicYOffset>).\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n    \n    /**\n     * APIProperty: graphicName\n     * {String} Named graphic to use when rendering points.  Supported values \n     *     include \"circle\", \"square\", \"star\", \"x\", \"cross\", and \"triangle\".\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n    \n    /**\n     * Constructor: OpenLayers.Symbolizer.Point\n     * Create a symbolizer for rendering points.\n     *\n     * Parameters:\n     * config - {Object} An object containing properties to be set on the \n     *     symbolizer.  Any documented symbolizer property can be set at \n     *     construction.\n     *\n     * Returns:\n     * A new point symbolizer.\n     */\n    initialize: function(config) {\n        OpenLayers.Symbolizer.prototype.initialize.apply(this, arguments);\n    },\n    \n    CLASS_NAME: \"OpenLayers.Symbolizer.Point\"\n    \n});\n\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Symbolizer.js\n */\n\n/**\n * Class: OpenLayers.Symbolizer.Line\n * A symbolizer used to render line features.\n */\nOpenLayers.Symbolizer.Line = OpenLayers.Class(OpenLayers.Symbolizer, {\n\n    /**\n     * APIProperty: strokeColor\n     * {String} Color for line stroke.  This is a RGB hex value (e.g. \"#ff0000\"\n     *     for red).  \n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n    \n    /**\n     * APIProperty: strokeOpacity\n     * {Number} Stroke opacity (0-1).\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n    \n    /**\n     * APIProperty: strokeWidth\n     * {Number} Pixel stroke width.\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n    \n    /**\n     * APIProperty: strokeLinecap\n     * {String} Stroke cap type (\"butt\", \"round\", or \"square\").\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n    \n    /**\n     * APIProperty: strokeDashstyle\n     * {String} Stroke dash style according to the SLD spec. Note that the\n     *     OpenLayers values for strokeDashstyle (\"dot\", \"dash\", \"dashdot\",\n     *     \"longdash\", \"longdashdot\", or \"solid\") will not work in SLD, but\n     *     most SLD patterns will render correctly in OpenLayers.\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n\n    /**\n     * Constructor: OpenLayers.Symbolizer.Line\n     * Create a symbolizer for rendering lines.\n     *\n     * Parameters:\n     * config - {Object} An object containing properties to be set on the \n     *     symbolizer.  Any documented symbolizer property can be set at \n     *     construction.\n     *\n     * Returns:\n     * A new line symbolizer.\n     */\n    initialize: function(config) {\n        OpenLayers.Symbolizer.prototype.initialize.apply(this, arguments);\n    },\n    \n    CLASS_NAME: \"OpenLayers.Symbolizer.Line\"\n    \n});\n\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Symbolizer.js\n */\n\n/**\n * Class: OpenLayers.Symbolizer.Polygon\n * A symbolizer used to render line features.\n */\nOpenLayers.Symbolizer.Polygon = OpenLayers.Class(OpenLayers.Symbolizer, {\n    \n    /**\n     * APIProperty: strokeColor\n     * {String} Color for line stroke.  This is a RGB hex value (e.g. \"#ff0000\"\n     *     for red).\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n    \n    /**\n     * APIProperty: strokeOpacity\n     * {Number} Stroke opacity (0-1).\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n    \n    /**\n     * APIProperty: strokeWidth\n     * {Number} Pixel stroke width.\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n    \n    /**\n     * APIProperty: strokeLinecap\n     * {String} Stroke cap type (\"butt\", \"round\", or \"square\").\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n    \n    /**\n     * APIProperty: strokeDashstyle\n     * {String} Stroke dash style according to the SLD spec. Note that the\n     *     OpenLayers values for strokeDashstyle (\"dot\", \"dash\", \"dashdot\",\n     *     \"longdash\", \"longdashdot\", or \"solid\") will not work in SLD, but\n     *     most SLD patterns will render correctly in OpenLayers.\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n\n    /**\n     * APIProperty: fillColor\n     * {String} RGB hex fill color (e.g. \"#ff0000\" for red).\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n    \n    /**\n     * APIProperty: fillOpacity\n     * {Number} Fill opacity (0-1).\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n\n    /**\n     * Constructor: OpenLayers.Symbolizer.Polygon\n     * Create a symbolizer for rendering polygons.\n     *\n     * Parameters:\n     * config - {Object} An object containing properties to be set on the \n     *     symbolizer.  Any documented symbolizer property can be set at \n     *     construction.\n     *\n     * Returns:\n     * A new polygon symbolizer.\n     */\n    initialize: function(config) {\n        OpenLayers.Symbolizer.prototype.initialize.apply(this, arguments);\n    },\n    \n    CLASS_NAME: \"OpenLayers.Symbolizer.Polygon\"\n    \n});\n\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Symbolizer.js\n */\n\n/**\n * Class: OpenLayers.Symbolizer.Text\n * A symbolizer used to render text labels for features.\n */\nOpenLayers.Symbolizer.Text = OpenLayers.Class(OpenLayers.Symbolizer, {\n    \n    /** \n     * APIProperty: label\n     * {String} The text for the label.\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n    \n    /** \n     * APIProperty: fontFamily\n     * {String} The font family for the label.\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n\n    /** \n     * APIProperty: fontSize\n     * {String} The font size for the label.\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n\n    /** \n     * APIProperty: fontWeight\n     * {String} The font weight for the label.\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n    \n    /**\n     * APIProperty: fontStyle\n     * {String} The font style for the label.\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n\n    /**\n     * APIProperty: fontColor\n     * {String} The font color for the label.\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n\n    /**\n     * APIProperty: fontOpacity\n     * {String} The font opacity for the label.\n     * \n     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.\n     */\n\n    /**\n     * Constructor: OpenLayers.Symbolizer.Text\n     * Create a symbolizer for rendering text labels.\n     *\n     * Parameters:\n     * config - {Object} An object containing properties to be set on the \n     *     symbolizer.  Any documented symbolizer property can be set at \n     *     construction.\n     *\n     * Returns:\n     * A new text symbolizer.\n     */\n    initialize: function(config) {\n        OpenLayers.Symbolizer.prototype.initialize.apply(this, arguments);\n    },\n    \n    CLASS_NAME: \"OpenLayers.Symbolizer.Text\"\n    \n});\n\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Symbolizer.js\n */\n\n/**\n * Class: OpenLayers.Symbolizer.Raster\n * A symbolizer used to render raster images.\n */\nOpenLayers.Symbolizer.Raster = OpenLayers.Class(OpenLayers.Symbolizer, {\n    \n    /**\n     * Constructor: OpenLayers.Symbolizer.Raster\n     * Create a symbolizer for rendering rasters.\n     *\n     * Parameters:\n     * config - {Object} An object containing properties to be set on the \n     *     symbolizer.  Any documented symbolizer property can be set at \n     *     construction.\n     *\n     * Returns:\n     * A new raster symbolizer.\n     */\n    initialize: function(config) {\n        OpenLayers.Symbolizer.prototype.initialize.apply(this, arguments);\n    },\n    \n    CLASS_NAME: \"OpenLayers.Symbolizer.Raster\"\n    \n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes.js\n * @requires OpenLayers/Console.js\n */\n\n/**\n * Namespace: OpenLayers.Lang\n * Internationalization namespace.  Contains dictionaries in various languages\n *     and methods to set and get the current language.\n */\nOpenLayers.Lang = {\n    \n    /** \n     * Property: code\n     * {String}  Current language code to use in OpenLayers.  Use the\n     *     <setCode> method to set this value and the <getCode> method to\n     *     retrieve it.\n     */\n    code: null,\n\n    /** \n     * APIProperty: defaultCode\n     * {String} Default language to use when a specific language can't be\n     *     found.  Default is \"en\".\n     */\n    defaultCode: \"en\",\n        \n    /**\n     * APIFunction: getCode\n     * Get the current language code.\n     *\n     * Returns:\n     * {String} The current language code.\n     */\n    getCode: function() {\n        if(!OpenLayers.Lang.code) {\n            OpenLayers.Lang.setCode();\n        }\n        return OpenLayers.Lang.code;\n    },\n    \n    /**\n     * APIFunction: setCode\n     * Set the language code for string translation.  This code is used by\n     *     the <OpenLayers.Lang.translate> method.\n     *\n     * Parameters:\n     * code - {String} These codes follow the IETF recommendations at\n     *     http://www.ietf.org/rfc/rfc3066.txt.  If no value is set, the\n     *     browser's language setting will be tested.  If no <OpenLayers.Lang>\n     *     dictionary exists for the code, the <OpenLayers.String.defaultLang>\n     *     will be used.\n     */\n    setCode: function(code) {\n        var lang;\n        if(!code) {\n            code = (OpenLayers.BROWSER_NAME == \"msie\") ?\n                navigator.userLanguage : navigator.language;\n        }\n        var parts = code.split('-');\n        parts[0] = parts[0].toLowerCase();\n        if(typeof OpenLayers.Lang[parts[0]] == \"object\") {\n            lang = parts[0];\n        }\n\n        // check for regional extensions\n        if(parts[1]) {\n            var testLang = parts[0] + '-' + parts[1].toUpperCase();\n            if(typeof OpenLayers.Lang[testLang] == \"object\") {\n                lang = testLang;\n            }\n        }\n        if(!lang) {\n            OpenLayers.Console.warn(\n                'Failed to find OpenLayers.Lang.' + parts.join(\"-\") +\n                ' dictionary, falling back to default language'\n            );\n            lang = OpenLayers.Lang.defaultCode;\n        }\n        \n        OpenLayers.Lang.code = lang;\n    },\n\n    /**\n     * APIMethod: translate\n     * Looks up a key from a dictionary based on the current language string.\n     *     The value of <getCode> will be used to determine the appropriate\n     *     dictionary.  Dictionaries are stored in <OpenLayers.Lang>.\n     *\n     * Parameters:\n     * key - {String} The key for an i18n string value in the dictionary.\n     * context - {Object} Optional context to be used with\n     *     <OpenLayers.String.format>.\n     * \n     * Returns:\n     * {String} A internationalized string.\n     */\n    translate: function(key, context) {\n        var dictionary = OpenLayers.Lang[OpenLayers.Lang.getCode()];\n        var message = dictionary && dictionary[key];\n        if(!message) {\n            // Message not found, fall back to message key\n            message = key;\n        }\n        if(context) {\n            message = OpenLayers.String.format(message, context);\n        }\n        return message;\n    }\n    \n};\n\n\n/**\n * APIMethod: OpenLayers.i18n\n * Alias for <OpenLayers.Lang.translate>.  Looks up a key from a dictionary\n *     based on the current language string. The value of\n *     <OpenLayers.Lang.getCode> will be used to determine the appropriate\n *     dictionary.  Dictionaries are stored in <OpenLayers.Lang>.\n *\n * Parameters:\n * key - {String} The key for an i18n string value in the dictionary.\n * context - {Object} Optional context to be used with\n *     <OpenLayers.String.format>.\n * \n * Returns:\n * {String} A internationalized string.\n */\nOpenLayers.i18n = OpenLayers.Lang.translate;\n", "/**\n * @requires OpenLayers/Lang.js\n */\n\n/**\n * Namespace: OpenLayers.Lang[\"en\"]\n * Dictionary for English.  Keys for entries are used in calls to\n *     <OpenLayers.Lang.translate>.  Entry bodies are normal strings or\n *     strings formatted for use with <OpenLayers.String.format> calls.\n */\nOpenLayers.Lang.en = {\n\n    'unhandledRequest': \"Unhandled request return ${statusText}\",\n\n    'Permalink': \"Permalink\",\n\n    'Overlays': \"Overlays\",\n\n    'Base Layer': \"Base Layer\",\n\n    'noFID': \"Can't update a feature for which there is no FID.\",\n\n    'browserNotSupported':\n        \"Your browser does not support vector rendering. Currently supported renderers are:\\n${renderers}\",\n\n    // console message\n    'minZoomLevelError':\n        \"The minZoomLevel property is only intended for use \" +\n        \"with the FixedZoomLevels-descendent layers. That this \" +\n        \"wfs layer checks for minZoomLevel is a relic of the\" +\n        \"past. We cannot, however, remove it without possibly \" +\n        \"breaking OL based applications that may depend on it.\" +\n        \" Therefore we are deprecating it -- the minZoomLevel \" +\n        \"check below will be removed at 3.0. Please instead \" +\n        \"use min/max resolution setting as described here: \" +\n        \"http://trac.openlayers.org/wiki/SettingZoomLevels\",\n\n    'commitSuccess': \"WFS Transaction: SUCCESS ${response}\",\n\n    'commitFailed': \"WFS Transaction: FAILED ${response}\",\n\n    'googleWarning':\n        \"The Google Layer was unable to load correctly.<br><br>\" +\n        \"To get rid of this message, select a new BaseLayer \" +\n        \"in the layer switcher in the upper-right corner.<br><br>\" +\n        \"Most likely, this is because the Google Maps library \" +\n        \"script was either not included, or does not contain the \" +\n        \"correct API key for your site.<br><br>\" +\n        \"Developers: For help getting this working correctly, \" +\n        \"<a href='http://trac.openlayers.org/wiki/Google' \" +\n        \"target='_blank'>click here</a>\",\n\n    'getLayerWarning':\n        \"The ${layerType} Layer was unable to load correctly.<br><br>\" +\n        \"To get rid of this message, select a new BaseLayer \" +\n        \"in the layer switcher in the upper-right corner.<br><br>\" +\n        \"Most likely, this is because the ${layerLib} library \" +\n        \"script was not correctly included.<br><br>\" +\n        \"Developers: For help getting this working correctly, \" +\n        \"<a href='http://trac.openlayers.org/wiki/${layerLib}' \" +\n        \"target='_blank'>click here</a>\",\n\n    'Scale = 1 : ${scaleDenom}': \"Scale = 1 : ${scaleDenom}\",\n    \n    //labels for the graticule control\n    'W': 'W',\n    'E': 'E',\n    'N': 'N',\n    'S': 'S',\n    'Graticule': 'Graticule',\n\n    // console message\n    'reprojectDeprecated':\n        \"You are using the 'reproject' option \" +\n        \"on the ${layerName} layer. This option is deprecated: \" +\n        \"its use was designed to support displaying data over commercial \" + \n        \"basemaps, but that functionality should now be achieved by using \" +\n        \"Spherical Mercator support. More information is available from \" +\n        \"http://trac.openlayers.org/wiki/SphericalMercator.\",\n\n    // console message\n    'methodDeprecated':\n        \"This method has been deprecated and will be removed in 3.0. \" +\n        \"Please use ${newMethod} instead.\",\n\n    // **** end ****\n    'end': ''\n    \n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/SingleFile.js\n */\n\n/**\n * Namespace: Spherical\n * The OpenLayers.Spherical namespace includes utility functions for\n * calculations on the basis of a spherical earth (ignoring ellipsoidal\n * effects), which is accurate enough for most purposes.\n *\n * Relevant links:\n * * http://www.movable-type.co.uk/scripts/latlong.html\n * * http://code.google.com/apis/maps/documentation/javascript/reference.html#spherical\n */\n\nOpenLayers.Spherical = OpenLayers.Spherical || {};\n\nOpenLayers.Spherical.DEFAULT_RADIUS = 6378137;\n\n/**\n * APIFunction: computeDistanceBetween\n * Computes the distance between two LonLats.\n *\n * Parameters:\n * from   - {<OpenLayers.LonLat>} or {Object} Starting point. A LonLat or\n *          a JavaScript literal with lon lat properties.\n * to     - {<OpenLayers.LonLat>} or {Object} Ending point. A LonLat or a\n *          JavaScript literal with lon lat properties.\n * radius - {Float} The radius. Optional. Defaults to 6378137 meters.\n *\n * Returns:\n * {Float} The distance in meters.\n */\nOpenLayers.Spherical.computeDistanceBetween = function(from, to, radius) {\n  var R = radius || OpenLayers.Spherical.DEFAULT_RADIUS;\n  var sinHalfDeltaLon = Math.sin(Math.PI * (to.lon - from.lon) / 360);\n  var sinHalfDeltaLat = Math.sin(Math.PI * (to.lat - from.lat) / 360);\n  var a = sinHalfDeltaLat * sinHalfDeltaLat +\n      sinHalfDeltaLon * sinHalfDeltaLon * Math.cos(Math.PI * from.lat / 180) * Math.cos(Math.PI * to.lat / 180); \n  return 2 * R * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a)); \n};\n\n\n/**\n * APIFunction: computeHeading\n * Computes the heading from one LonLat to another LonLat.\n *\n * Parameters:\n * from   - {<OpenLayers.LonLat>} or {Object} Starting point. A LonLat or\n *          a JavaScript literal with lon lat properties.\n * to     - {<OpenLayers.LonLat>} or {Object} Ending point. A LonLat or a\n *          JavaScript literal with lon lat properties.\n *\n * Returns:\n * {Float} The heading in degrees.\n */\nOpenLayers.Spherical.computeHeading = function(from, to) {\n    var y = Math.sin(Math.PI * (from.lon - to.lon) / 180) * Math.cos(Math.PI * to.lat / 180);\n    var x = Math.cos(Math.PI * from.lat / 180) * Math.sin(Math.PI * to.lat / 180) -\n        Math.sin(Math.PI * from.lat / 180) * Math.cos(Math.PI * to.lat / 180) * Math.cos(Math.PI * (from.lon - to.lon) / 180);\n    return 180 * Math.atan2(y, x) / Math.PI;\n};\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Util.js\n * @requires OpenLayers/BaseTypes.js\n * @requires OpenLayers/BaseTypes/Element.js\n * @requires OpenLayers/Layer/Grid.js\n * @requires OpenLayers/Tile/Image.js\n */\n\n/**\n * Class: OpenLayers.TileManager\n * Provides queueing of image requests and caching of image elements.\n *\n * Queueing avoids unnecessary image requests while changing zoom levels\n * quickly, and helps improve dragging performance on mobile devices that show\n * a lag in dragging when loading of new images starts. <zoomDelay> and\n * <moveDelay> are the configuration options to control this behavior.\n *\n * Caching avoids setting the src on image elements for images that have already\n * been used. Several maps can share a TileManager instance, in which case each\n * map gets its own tile queue, but all maps share the same tile cache.\n */\nOpenLayers.TileManager = OpenLayers.Class({\n    \n    /**\n     * APIProperty: cacheSize\n     * {Number} Number of image elements to keep referenced in this instance's\n     * cache for fast reuse. Default is 256.\n     */\n    cacheSize: 256,\n\n    /**\n     * APIProperty: tilesPerFrame\n     * {Number} Number of queued tiles to load per frame (see <frameDelay>).\n     *     Default is 2.\n     */\n    tilesPerFrame: 2,\n\n    /**\n     * APIProperty: frameDelay\n     * {Number} Delay between tile loading frames (see <tilesPerFrame>) in\n     *     milliseconds. Default is 16.\n     */\n    frameDelay: 16,\n\n    /**\n     * APIProperty: moveDelay\n     * {Number} Delay in milliseconds after a map's move event before loading\n     * tiles. Default is 100.\n     */\n    moveDelay: 100,\n    \n    /**\n     * APIProperty: zoomDelay\n     * {Number} Delay in milliseconds after a map's zoomend event before loading\n     * tiles. Default is 200.\n     */\n    zoomDelay: 200,\n    \n    /**\n     * Property: maps\n     * {Array(<OpenLayers.Map>)} The maps to manage tiles on.\n     */\n    maps: null,\n    \n    /**\n     * Property: tileQueueId\n     * {Object} The ids of the <drawTilesFromQueue> loop, keyed by map id.\n     */\n    tileQueueId: null,\n\n    /**\n     * Property: tileQueue\n     * {Object(Array(<OpenLayers.Tile>))} Tiles queued for drawing, keyed by\n     * map id.\n     */\n    tileQueue: null,\n    \n    /**\n     * Property: tileCache\n     * {Object} Cached image elements, keyed by URL.\n     */\n    tileCache: null,\n    \n    /**\n     * Property: tileCacheIndex\n     * {Array(String)} URLs of cached tiles. First entry is the least recently\n     *    used.\n     */\n    tileCacheIndex: null,    \n    \n    /** \n     * Constructor: OpenLayers.TileManager\n     * Constructor for a new <OpenLayers.TileManager> instance.\n     * \n     * Parameters:\n     * options - {Object} Configuration for this instance.\n     */   \n    initialize: function(options) {\n        OpenLayers.Util.extend(this, options);\n        this.maps = [];\n        this.tileQueueId = {};\n        this.tileQueue = {};\n        this.tileCache = {};\n        this.tileCacheIndex = [];\n    },\n    \n    /**\n     * Method: addMap\n     * Binds this instance to a map\n     *\n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    addMap: function(map) {\n        if (this._destroyed || !OpenLayers.Layer.Grid) {\n            return;\n        }\n        this.maps.push(map);\n        this.tileQueue[map.id] = [];\n        for (var i=0, ii=map.layers.length; i<ii; ++i) {\n            this.addLayer({layer: map.layers[i]});\n        }\n        map.events.on({\n            move: this.move,\n            zoomend: this.zoomEnd,\n            changelayer: this.changeLayer,\n            addlayer: this.addLayer,\n            preremovelayer: this.removeLayer,\n            scope: this\n        });\n    },\n    \n    /**\n     * Method: removeMap\n     * Unbinds this instance from a map\n     *\n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    removeMap: function(map) {\n        if (this._destroyed || !OpenLayers.Layer.Grid) {\n            return;\n        }\n        window.clearTimeout(this.tileQueueId[map.id]);\n        if (map.layers) {\n            for (var i=0, ii=map.layers.length; i<ii; ++i) {\n                this.removeLayer({layer: map.layers[i]});\n            }\n        }\n        if (map.events) {\n            map.events.un({\n                move: this.move,\n                zoomend: this.zoomEnd,\n                changelayer: this.changeLayer,\n                addlayer: this.addLayer,\n                preremovelayer: this.removeLayer,\n                scope: this\n            });\n        }\n        delete this.tileQueue[map.id];\n        delete this.tileQueueId[map.id];\n        OpenLayers.Util.removeItem(this.maps, map);\n    },\n    \n    /**\n     * Method: move\n     * Handles the map's move event\n     *\n     * Parameters:\n     * evt - {Object} Listener argument\n     */\n    move: function(evt) {\n        this.updateTimeout(evt.object, this.moveDelay, true);\n    },\n    \n    /**\n     * Method: zoomEnd\n     * Handles the map's zoomEnd event\n     *\n     * Parameters:\n     * evt - {Object} Listener argument\n     */\n    zoomEnd: function(evt) {\n        this.updateTimeout(evt.object, this.zoomDelay);\n    },\n    \n    /**\n     * Method: changeLayer\n     * Handles the map's changeLayer event\n     *\n     * Parameters:\n     * evt - {Object} Listener argument\n     */\n    changeLayer: function(evt) {\n        if (evt.property === 'visibility' || evt.property === 'params') {\n            this.updateTimeout(evt.object, 0);\n        }\n    },\n    \n    /**\n     * Method: addLayer\n     * Handles the map's addlayer event\n     *\n     * Parameters:\n     * evt - {Object} The listener argument\n     */\n    addLayer: function(evt) {\n        var layer = evt.layer;\n        if (layer instanceof OpenLayers.Layer.Grid) {\n            layer.events.on({\n                addtile: this.addTile,\n                refresh: this.handleLayerRefresh,\n                retile: this.clearTileQueue,\n                scope: this\n            });\n            var i, j, tile;\n            for (i=layer.grid.length-1; i>=0; --i) {\n                for (j=layer.grid[i].length-1; j>=0; --j) {\n                    tile = layer.grid[i][j];\n                    this.addTile({tile: tile});\n                    if (tile.url && !tile.imgDiv) {\n                        this.manageTileCache({object: tile});\n                    }\n                }\n            }\n        }\n    },\n    \n    /**\n     * Method: removeLayer\n     * Handles the map's preremovelayer event\n     *\n     * Parameters:\n     * evt - {Object} The listener argument\n     */\n    removeLayer: function(evt) {\n        var layer = evt.layer;\n        if (layer instanceof OpenLayers.Layer.Grid) {\n            this.clearTileQueue({object: layer});\n            if (layer.events) {\n                layer.events.un({\n                    addtile: this.addTile,\n                    refresh: this.handleLayerRefresh,\n                    retile: this.clearTileQueue,\n                    scope: this\n                });\n            }\n            if (layer.grid) {\n                var i, j, tile;\n                for (i=layer.grid.length-1; i>=0; --i) {\n                    for (j=layer.grid[i].length-1; j>=0; --j) {\n                        tile = layer.grid[i][j];\n                        this.unloadTile({object: tile});\n                    }\n                }\n            }\n        }\n    },\n\n    /**\n     * Method: handleLayerRefresh\n     * Clears the cache when a redraw is forced on a layer\n     *\n     * Parameters:\n     * evt - {Object} The listener argument\n     */\n    handleLayerRefresh: function(evt) {\n        var layer = evt.object;\n        if (layer.grid) {\n            var i, j, tile;\n            for (i=layer.grid.length-1; i>=0; --i) {\n                for (j=layer.grid[i].length-1; j>=0; --j) {\n                    tile = layer.grid[i][j];\n                    OpenLayers.Util.removeItem(this.tileCacheIndex, tile.url);\n                    delete this.tileCache[tile.url];\n                }\n            }\n        }\n    },\n    \n    /**\n     * Method: updateTimeout\n     * Applies the <moveDelay> or <zoomDelay> to the <drawTilesFromQueue> loop,\n     * and schedules more queue processing after <frameDelay> if there are still\n     * tiles in the queue.\n     *\n     * Parameters:\n     * map - {<OpenLayers.Map>} The map to update the timeout for\n     * delay - {Number} The delay to apply\n     * nice - {Boolean} If true, the timeout function will only be created if\n     *     the tilequeue is not empty. This is used by the move handler to\n     *     avoid impacts on dragging performance. For other events, the tile\n     *     queue may not be populated yet, so we need to set the timer\n     *     regardless of the queue size.\n     */\n    updateTimeout: function(map, delay, nice) {\n        window.clearTimeout(this.tileQueueId[map.id]);\n        var tileQueue = this.tileQueue[map.id];\n        if (!nice || tileQueue.length) {\n            this.tileQueueId[map.id] = window.setTimeout(\n                OpenLayers.Function.bind(function() {\n                    this.drawTilesFromQueue(map);\n                    if (tileQueue.length) {\n                        this.updateTimeout(map, this.frameDelay);\n                    }\n                }, this), delay\n            );\n        }\n    },\n    \n    /**\n     * Method: addTile\n     * Listener for the layer's addtile event\n     *\n     * Parameters:\n     * evt - {Object} The listener argument\n     */\n    addTile: function(evt) {\n        if (evt.tile instanceof OpenLayers.Tile.Image) {\n          if (!evt.tile.layer.singleTile) {\n            evt.tile.events.on({\n                beforedraw: this.queueTileDraw,\n                beforeload: this.manageTileCache,\n                loadend: this.addToCache,\n                unload: this.unloadTile,\n                scope: this\n            });        \n          }\n        } else {\n            // Layer has the wrong tile type, so don't handle it any longer\n            this.removeLayer({layer: evt.tile.layer});\n        }\n    },\n    \n    /**\n     * Method: unloadTile\n     * Listener for the tile's unload event\n     *\n     * Parameters:\n     * evt - {Object} The listener argument\n     */\n    unloadTile: function(evt) {\n        var tile = evt.object;\n        tile.events.un({\n            beforedraw: this.queueTileDraw,\n            beforeload: this.manageTileCache,\n            loadend: this.addToCache,\n            unload: this.unloadTile,\n            scope: this\n        });\n        OpenLayers.Util.removeItem(this.tileQueue[tile.layer.map.id], tile);\n    },\n    \n    /**\n     * Method: queueTileDraw\n     * Adds a tile to the queue that will draw it.\n     *\n     * Parameters:\n     * evt - {Object} Listener argument of the tile's beforedraw event\n     */\n    queueTileDraw: function(evt) {\n        var tile = evt.object;\n        var queued = false;\n        var layer = tile.layer;\n        var url = layer.getURL(tile.bounds);\n        var img = this.tileCache[url];\n        if (img && img.className !== 'olTileImage') {\n            // cached image no longer valid, e.g. because we're olTileReplacing\n            delete this.tileCache[url];\n            OpenLayers.Util.removeItem(this.tileCacheIndex, url);\n            img = null;\n        }\n        // queue only if image with same url not cached already\n        if (layer.url && (layer.async || !img)) {\n            // add to queue only if not in queue already\n            var tileQueue = this.tileQueue[layer.map.id];\n            if (!~OpenLayers.Util.indexOf(tileQueue, tile)) {\n                tileQueue.push(tile);\n            }\n            queued = true;\n        }\n        return !queued;\n    },\n    \n    /**\n     * Method: drawTilesFromQueue\n     * Draws tiles from the tileQueue, and unqueues the tiles\n     */\n    drawTilesFromQueue: function(map) {\n        var tileQueue = this.tileQueue[map.id];\n        var limit = this.tilesPerFrame;\n        var animating = map.zoomTween && map.zoomTween.playing;\n        while (!animating && tileQueue.length && limit) {\n            tileQueue.shift().draw(true);\n            --limit;\n        }\n    },\n    \n    /**\n     * Method: manageTileCache\n     * Adds, updates, removes and fetches cache entries.\n     *\n     * Parameters:\n     * evt - {Object} Listener argument of the tile's beforeload event\n     */\n    manageTileCache: function(evt) {\n        var tile = evt.object;\n        var img = this.tileCache[tile.url];\n        if (img) {\n          // if image is on its layer's backbuffer, remove it from backbuffer\n          if (img.parentNode &&\n                  OpenLayers.Element.hasClass(img.parentNode, 'olBackBuffer')) {\n              img.parentNode.removeChild(img);\n              img.id = null;\n          }\n          // only use image from cache if it is not on a layer already\n          if (!img.parentNode) {\n              img.style.visibility = 'hidden';\n              img.style.opacity = 0;\n              tile.setImage(img);\n              // LRU - move tile to the end of the array to mark it as the most\n              // recently used\n              OpenLayers.Util.removeItem(this.tileCacheIndex, tile.url);\n              this.tileCacheIndex.push(tile.url);\n          }\n        }\n    },\n    \n    /**\n     * Method: addToCache\n     *\n     * Parameters:\n     * evt - {Object} Listener argument for the tile's loadend event\n     */\n    addToCache: function(evt) {\n        var tile = evt.object;\n        if (!this.tileCache[tile.url]) {\n            if (!OpenLayers.Element.hasClass(tile.imgDiv, 'olImageLoadError')) {\n                if (this.tileCacheIndex.length >= this.cacheSize) {\n                    delete this.tileCache[this.tileCacheIndex[0]];\n                    this.tileCacheIndex.shift();\n                }\n                this.tileCache[tile.url] = tile.imgDiv;\n                this.tileCacheIndex.push(tile.url);\n            }\n        }\n    },\n\n    /**\n     * Method: clearTileQueue\n     * Clears the tile queue from tiles of a specific layer\n     *\n     * Parameters:\n     * evt - {Object} Listener argument of the layer's retile event\n     */\n    clearTileQueue: function(evt) {\n        var layer = evt.object;\n        var tileQueue = this.tileQueue[layer.map.id];\n        for (var i=tileQueue.length-1; i>=0; --i) {\n            if (tileQueue[i].layer === layer) {\n                tileQueue.splice(i, 1);\n            }\n        }\n    },\n    \n    /**\n     * Method: destroy\n     */\n    destroy: function() {\n        for (var i=this.maps.length-1; i>=0; --i) {\n            this.removeMap(this.maps[i]);\n        }\n        this.maps = null;\n        this.tileQueue = null;\n        this.tileQueueId = null;\n        this.tileCache = null;\n        this.tileCacheIndex = null;\n        this._destroyed = true;\n    }\n\n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/SingleFile.js\n */\n\n/**\n * @requires OpenLayers/Events.js\n * @requires OpenLayers/WPSProcess.js\n * @requires OpenLayers/Format/WPSDescribeProcess.js\n * @requires OpenLayers/Request.js\n */\n\n/**\n * Class: OpenLayers.WPSClient\n * High level API for interaction with Web Processing Services (WPS).\n * An <OpenLayers.WPSClient> instance is used to create <OpenLayers.WPSProcess>\n * instances for servers known to the WPSClient. The WPSClient also caches\n * DescribeProcess responses to reduce the number of requests sent to servers\n * when processes are created.\n */\nOpenLayers.WPSClient = OpenLayers.Class({\n    \n    /**\n     * Property: servers\n     * {Object} Service metadata, keyed by a local identifier.\n     *\n     * Properties:\n     * url - {String} the url of the server\n     * version - {String} WPS version of the server\n     * processDescription - {Object} Cache of raw DescribeProcess\n     *     responses, keyed by process identifier.\n     */\n    servers: null,\n    \n    /**\n     * Property: version\n     * {String} The default WPS version to use if none is configured. Default\n     *     is '1.0.0'.\n     */\n    version: '1.0.0',\n    \n    /**\n     * Property: lazy\n     * {Boolean} Should the DescribeProcess be deferred until a process is\n     *     fully configured? Default is false.\n     */\n    lazy: false,\n    \n    /**\n     * Property: events\n     * {<OpenLayers.Events>}\n     *\n     * Supported event types:\n     * describeprocess - Fires when the process description is available.\n     *     Listeners receive an object with a 'raw' property holding the raw\n     *     DescribeProcess response, and an 'identifier' property holding the\n     *     process identifier of the described process.\n     */\n    events: null,\n    \n    /**\n     * Constructor: OpenLayers.WPSClient\n     *\n     * Parameters:\n     * options - {Object} Object whose properties will be set on the instance.\n     *\n     * Available options:\n     * servers - {Object} Mandatory. Service metadata, keyed by a local\n     *     identifier. Can either be a string with the service url or an\n     *     object literal with additional metadata:\n     *\n     *     (code)\n     *     servers: {\n     *         local: '/geoserver/wps'\n     *     }, {\n     *         opengeo: {\n     *             url: 'http://demo.opengeo.org/geoserver/wps',\n     *             version: '1.0.0'\n     *         }\n     *     }\n     *     (end)\n     *\n     * lazy - {Boolean} Optional. Set to true if DescribeProcess should not be\n     *     requested until a process is fully configured. Default is false.\n     */\n    initialize: function(options) {\n        OpenLayers.Util.extend(this, options);\n        this.events = new OpenLayers.Events(this);\n        this.servers = {};\n        for (var s in options.servers) {\n            this.servers[s] = typeof options.servers[s] == 'string' ? {\n                url: options.servers[s],\n                version: this.version,\n                processDescription: {}\n            } : options.servers[s];\n        }\n    },\n    \n    /**\n     * APIMethod: execute\n     * Shortcut to execute a process with a single function call. This is\n     * equivalent to using <getProcess> and then calling execute on the\n     * process.\n     *\n     * Parameters:\n     * options - {Object} Options for the execute operation.\n     *\n     * Available options:\n     * server - {String} Mandatory. One of the local identifiers of the\n     *     configured servers.\n     * process - {String} Mandatory. A process identifier known to the\n     *     server.\n     * inputs - {Object} The inputs for the process, keyed by input identifier.\n     *     For spatial data inputs, the value of an input is usually an\n     *     <OpenLayers.Geometry>, an <OpenLayers.Feature.Vector> or an array of\n     *     geometries or features.\n     * output - {String} The identifier of an output to parse. Optional. If not\n     *     provided, the first output will be parsed.\n     * success - {Function} Callback to call when the process is complete.\n     *     This function is called with an outputs object as argument, which\n     *     will have a property with the identifier of the requested output\n     *     (e.g. 'result'). For processes that generate spatial output, the\n     *     value will either be a single <OpenLayers.Feature.Vector> or an\n     *     array of features.\n     * scope - {Object} Optional scope for the success callback.\n     */\n    execute: function(options) {\n        var process = this.getProcess(options.server, options.process);\n        process.execute({\n            inputs: options.inputs,\n            success: options.success,\n            scope: options.scope\n        });\n    },\n    \n    /**\n     * APIMethod: getProcess\n     * Creates an <OpenLayers.WPSProcess>.\n     *\n     * Parameters:\n     * serverID - {String} Local identifier from the servers that this instance\n     *     was constructed with.\n     * processID - {String} Process identifier known to the server.\n     * options - {Object} Options for the getProcess operation.\n     *\n     * Available options:\n     * callback - {Function} Callback to call when the operation is complete.\n     *     This function is called with the parsed process description.\n     * scope - {Object} Optional scope for the callback.\n     *\n     * Returns:\n     * {<OpenLayers.WPSProcess>}\n     */\n    getProcess: function(serverID, processID, options) {\n        var process = new OpenLayers.WPSProcess({\n            client: this,\n            server: serverID,\n            identifier: processID\n        });\n        if (!this.lazy) {\n            process.describe(options);\n        }\n        return process;\n    },\n    \n    /**\n     * Method: describeProcess\n     *\n     * Parameters:\n     * serverID - {String} Identifier of the server\n     * processID - {String} Identifier of the requested process\n     * callback - {Function} Callback to call when the description is available\n     * scope - {Object} Optional execution scope for the callback function\n     */\n    describeProcess: function(serverID, processID, callback, scope) {\n        var server = this.servers[serverID];\n        if (!server.processDescription[processID]) {\n            if (!(processID in server.processDescription)) {\n                // set to null so we know a describeFeature request is pending\n                server.processDescription[processID] = null;\n                OpenLayers.Request.GET({\n                    url: server.url,\n                    params: {\n                        SERVICE: 'WPS',\n                        VERSION: server.version,\n                        REQUEST: 'DescribeProcess',\n                        IDENTIFIER: processID\n                    },\n                    success: function(response) {\n                        server.processDescription[processID] = response.responseText;\n                        this.events.triggerEvent('describeprocess', {\n                            identifier: processID,\n                            raw: response.responseText\n                        });\n                        callback.call(scope, response.responseText);\n                    },\n                    scope: this\n                });\n            } else {\n                // pending request\n                this.events.register('describeprocess', this, function describe(evt) {\n                    if (evt.identifier === processID) {\n                        this.events.unregister('describeprocess', this, describe);\n                        callback.call(scope, evt.raw);\n                    }\n                });\n            }\n        } else {\n            window.setTimeout(function() {\n                callback.call(scope, server.processDescription[processID]);\n            }, 0);\n        }\n    },\n    \n    /**\n     * Method: destroy\n     */\n    destroy: function() {\n        this.events.destroy();\n        this.events = null;\n        this.servers = null;\n    },\n    \n    CLASS_NAME: 'OpenLayers.WPSClient'\n    \n});\n", "/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/SingleFile.js\n */\n\n/**\n * @requires OpenLayers/Geometry.js\n * @requires OpenLayers/Feature/Vector.js\n * @requires OpenLayers/Format/WKT.js\n * @requires OpenLayers/Format/GeoJSON.js\n * @requires OpenLayers/Format/WPSExecute.js\n * @requires OpenLayers/Request.js\n */\n\n/**\n * Class: OpenLayers.WPSProcess\n * Representation of a WPS process. Usually instances of\n * <OpenLayers.WPSProcess> are created by calling 'getProcess' on an\n * <OpenLayers.WPSClient> instance.\n *\n * Currently <OpenLayers.WPSProcess> supports processes that have geometries\n * or features as output, using WKT or GeoJSON as output format. It also\n * supports chaining of processes by using the <output> method to create a\n * handle that is used as process input instead of a static value.\n */\nOpenLayers.WPSProcess = OpenLayers.Class({\n    \n    /**\n     * Property: client\n     * {<OpenLayers.WPSClient>} The client that manages this process.\n     */\n    client: null,\n    \n    /**\n     * Property: server\n     * {String} Local client identifier for this process's server.\n     */\n    server: null,\n    \n    /**\n     * Property: identifier\n     * {String} Process identifier known to the server.\n     */\n    identifier: null,\n    \n    /**\n     * Property: description\n     * {Object} DescribeProcess response for this process.\n     */\n    description: null,\n    \n    /**\n     * APIProperty: localWPS\n     * {String} Service endpoint for locally chained WPS processes. Default is\n     *     'http://geoserver/wps'.\n     */\n    localWPS: 'http://geoserver/wps',\n    \n    /**\n     * Property: formats\n     * {Object} OpenLayers.Format instances keyed by mimetype.\n     */\n    formats: null,\n    \n    /**\n     * Property: chained\n     * {Integer} Number of chained processes for pending execute requests that\n     * don't have a full configuration yet.\n     */\n    chained: 0,\n    \n    /**\n     * Property: executeCallbacks\n     * {Array} Callbacks waiting to be executed until all chained processes\n     * are configured;\n     */\n    executeCallbacks: null,\n    \n    /**\n     * Constructor: OpenLayers.WPSProcess\n     *\n     * Parameters:\n     * options - {Object} Object whose properties will be set on the instance.\n     *\n     * Available options:\n     * client - {<OpenLayers.WPSClient>} Mandatory. Client that manages this\n     *     process.\n     * server - {String} Mandatory. Local client identifier of this process's\n     *     server.\n     * identifier - {String} Mandatory. Process identifier known to the server.\n     */\n    initialize: function(options) {\n        OpenLayers.Util.extend(this, options);        \n        this.executeCallbacks = [];\n        this.formats = {\n            'application/wkt': new OpenLayers.Format.WKT(),\n            'application/json': new OpenLayers.Format.GeoJSON()\n        };\n    },\n    \n    /**\n     * Method: describe\n     * Makes the client issue a DescribeProcess request asynchronously.\n     *\n     * Parameters:\n     * options - {Object} Configuration for the method call\n     *\n     * Available options:\n     * callback - {Function} Callback to execute when the description is\n     *     available. Will be called with the parsed description as argument.\n     *     Optional.\n     * scope - {Object} The scope in which the callback will be executed.\n     *     Default is the global object.\n     */\n    describe: function(options) {\n        options = options || {};\n        if (!this.description) {\n            this.client.describeProcess(this.server, this.identifier, function(description) {\n                if (!this.description) {\n                    this.parseDescription(description);\n                }\n                if (options.callback) {\n                    options.callback.call(options.scope, this.description);\n                }\n            }, this);\n        } else if (options.callback) {\n            var description = this.description;\n            window.setTimeout(function() {\n                options.callback.call(options.scope, description);\n            }, 0);\n        }\n    },\n    \n    /**\n     * APIMethod: configure\n     * Configure the process, but do not execute it. Use this for processes\n     * that are chained as input of a different process by means of the\n     * <output> method.\n     *\n     * Parameters:\n     * options - {Object}\n     *\n     * Returns:\n     * {<OpenLayers.WPSProcess>} this process.\n     *\n     * Available options:\n     * inputs - {Object} The inputs for the process, keyed by input identifier.\n     *     For spatial data inputs, the value of an input is usually an\n     *     <OpenLayers.Geometry>, an <OpenLayers.Feature.Vector> or an array of\n     *     geometries or features.\n     * callback - {Function} Callback to call when the configuration is\n     *     complete. Optional.\n     * scope - {Object} Optional scope for the callback.\n     */\n    configure: function(options) {\n        this.describe({\n            callback: function() {\n                var description = this.description,\n                    inputs = options.inputs,\n                    input, i, ii;\n                for (i=0, ii=description.dataInputs.length; i<ii; ++i) {\n                    input = description.dataInputs[i];\n                    this.setInputData(input, inputs[input.identifier]);\n                }\n                if (options.callback) {\n                    options.callback.call(options.scope);\n                }\n            },\n            scope: this\n        });\n        return this;\n    },\n    \n    /**\n     * APIMethod: execute\n     * Configures and executes the process\n     *\n     * Parameters:\n     * options - {Object}\n     *\n     * Available options:\n     * inputs - {Object} The inputs for the process, keyed by input identifier.\n     *     For spatial data inputs, the value of an input is usually an\n     *     <OpenLayers.Geometry>, an <OpenLayers.Feature.Vector> or an array of\n     *     geometries or features.\n     * output - {String} The identifier of the output to request and parse.\n     *     Optional. If not provided, the first output will be requested.\n     * success - {Function} Callback to call when the process is complete.\n     *     This function is called with an outputs object as argument, which\n     *     will have a property with the identifier of the requested output\n     *     (or 'result' if output was not configured). For processes that\n     *     generate spatial output, the value will be an array of\n     *     <OpenLayers.Feature.Vector> instances.\n     * scope - {Object} Optional scope for the success callback.\n     */\n    execute: function(options) {\n        this.configure({\n            inputs: options.inputs,\n            callback: function() {\n                var me = this;\n                //TODO For now we only deal with a single output\n                var outputIndex = this.getOutputIndex(\n                    me.description.processOutputs, options.output\n                );\n                me.setResponseForm({outputIndex: outputIndex});\n                (function callback() {\n                    OpenLayers.Util.removeItem(me.executeCallbacks, callback);\n                    if (me.chained !== 0) {\n                        // need to wait until chained processes have a\n                        // description and configuration - see chainProcess\n                        me.executeCallbacks.push(callback);\n                        return;\n                    }\n                    // all chained processes are added as references now, so\n                    // let's proceed.\n                    OpenLayers.Request.POST({\n                        url: me.client.servers[me.server].url,\n                        data: new OpenLayers.Format.WPSExecute().write(me.description),\n                        success: function(response) {\n                            var output = me.description.processOutputs[outputIndex];\n                            var result;\n                            if (output.literalOutput) {\n                                 if (output.literalOutput.dataType === \"boolean\") {\n                                   result = (OpenLayers.String.trim(\n                                       response.responseText).toLowerCase() === 'true');\n                                 } else if (output.literalOutput.dataType === \"double\") {\n                                   result = parseFloat(response.responseText);\n                                 } else {\n                                   result = response.responseText;\n                                 }\n                            } else if (output.complexOutput) {\n                                var mimeType = me.findMimeType(\n                                    output.complexOutput.supported.formats\n                                );\n                                //TODO For now we assume a spatial output\n                                result = me.formats[mimeType].read(response.responseText);\n                                if (result instanceof OpenLayers.Feature.Vector) {\n                                    result = [result];\n                                }\n                            }\n                            if (options.success) {\n                                var outputs = {};\n                                outputs[options.output || 'result'] = result;\n                                options.success.call(options.scope, outputs);\n                            }\n                        },\n                        scope: me\n                    });\n                })();\n            },\n            scope: this\n        });\n    },\n    \n    /**\n     * APIMethod: output\n     * Chain an output of a configured process (see <configure>) as input to\n     * another process.\n     *\n     * (code)\n     * intersect = client.getProcess('opengeo', 'JTS:intersection');    \n     * intersect.configure({\n     *     // ...\n     * });\n     * buffer = client.getProcess('opengeo', 'JTS:buffer');\n     * buffer.execute({\n     *     inputs: {\n     *         geom: intersect.output('result'), // <-- here we're chaining\n     *         distance: 1\n     *     },\n     *     // ...\n     * });\n     * (end)\n     *\n     * Parameters:\n     * identifier - {String} Identifier of the output that we're chaining. If\n     *     not provided, the first output will be used.\n     */\n    output: function(identifier) {\n        return new OpenLayers.WPSProcess.ChainLink({\n            process: this,\n            output: identifier\n        });\n    },\n    \n    /**\n     * Method: parseDescription\n     * Parses the DescribeProcess response\n     *\n     * Parameters:\n     * description - {Object}\n     */\n    parseDescription: function(description) {\n        var server = this.client.servers[this.server];\n        this.description = new OpenLayers.Format.WPSDescribeProcess()\n            .read(server.processDescription[this.identifier])\n            .processDescriptions[this.identifier];\n    },\n    \n    /**\n     * Method: setInputData\n     * Sets the data for a single input\n     *\n     * Parameters:\n     * input - {Object}  An entry from the dataInputs array of the process\n     *     description.\n     * data - {Mixed} For spatial data inputs, this is usually an\n     *     <OpenLayers.Geometry>, an <OpenLayers.Feature.Vector> or an array of\n     *     geometries or features.\n     */\n    setInputData: function(input, data) {\n        // clear any previous data\n        delete input.data;\n        delete input.reference;\n        if (data instanceof OpenLayers.WPSProcess.ChainLink) {\n            ++this.chained;\n            input.reference = {\n                method: 'POST',\n                href: data.process.server === this.server ?\n                    this.localWPS : this.client.servers[data.process.server].url\n            };\n            data.process.describe({\n                callback: function() {\n                    --this.chained;\n                    this.chainProcess(input, data);\n                },\n                scope: this\n            });\n        } else {\n            input.data = {};\n            var complexData = input.complexData;\n            if (complexData) {\n                var format = this.findMimeType(complexData.supported.formats);\n                input.data.complexData = {\n                    mimeType: format,\n                    value: this.formats[format].write(this.toFeatures(data))\n                };\n            } else {\n                input.data.literalData = {\n                    value: data\n                };\n            }\n        }\n    },\n    \n    /**\n     * Method: setResponseForm\n     * Sets the responseForm property of the <execute> payload.\n     *\n     * Parameters:\n     * options - {Object} See below.\n     *\n     * Available options:\n     * outputIndex - {Integer} The index of the output to use. Optional.\n     * supportedFormats - {Object} Object with supported mime types as key,\n     *     and true as value for supported types. Optional.\n     */\n    setResponseForm: function(options) {\n        options = options || {};\n        var output = this.description.processOutputs[options.outputIndex || 0];\n        var mimeType;\n        if (output.complexOutput) {\n            mimeType = this.findMimeType(output.complexOutput.supported.formats, options.supportedFormats);\n        }\n        this.description.responseForm = {\n            rawDataOutput: {\n                identifier: output.identifier,\n                mimeType: mimeType\n            }\n        };\n    },\n    \n    /**\n     * Method: getOutputIndex\n     * Gets the index of a processOutput by its identifier\n     *\n     * Parameters:\n     * outputs - {Array} The processOutputs array to look at\n     * identifier - {String} The identifier of the output\n     *\n     * Returns\n     * {Integer} The index of the processOutput with the provided identifier\n     *     in the outputs array.\n     */\n    getOutputIndex: function(outputs, identifier) {\n        var output;\n        if (identifier) {\n            for (var i=outputs.length-1; i>=0; --i) {\n                if (outputs[i].identifier === identifier) {\n                    output = i;\n                    break;\n                }\n            }\n        } else {\n            output = 0;\n        }\n        return output;\n    },\n    \n    /**\n     * Method: chainProcess\n     * Sets a fully configured chained process as input for this process.\n     *\n     * Parameters:\n     * input - {Object} The dataInput that the chained process provides.\n     * chainLink - {<OpenLayers.WPSProcess.ChainLink>} The process to chain.\n     */\n    chainProcess: function(input, chainLink) {\n        var output = this.getOutputIndex(\n            chainLink.process.description.processOutputs, chainLink.output\n        );\n        input.reference.mimeType = this.findMimeType(\n            input.complexData.supported.formats,\n            chainLink.process.description.processOutputs[output].complexOutput.supported.formats\n        );\n        var formats = {};\n        formats[input.reference.mimeType] = true;\n        chainLink.process.setResponseForm({\n            outputIndex: output,\n            supportedFormats: formats\n        });\n        input.reference.body = chainLink.process.description;\n        while (this.executeCallbacks.length > 0) {\n            this.executeCallbacks[0]();\n        }\n    },\n    \n    /**\n     * Method: toFeatures\n     * Converts spatial input into features so it can be processed by\n     * <OpenLayers.Format> instances.\n     *\n     * Parameters:\n     * source - {Mixed} An <OpenLayers.Geometry>, an\n     *     <OpenLayers.Feature.Vector>, or an array of geometries or features\n     *\n     * Returns:\n     * {Array(<OpenLayers.Feature.Vector>)}\n     */\n    toFeatures: function(source) {\n        var isArray = OpenLayers.Util.isArray(source);\n        if (!isArray) {\n            source = [source];\n        }\n        var target = new Array(source.length),\n            current;\n        for (var i=0, ii=source.length; i<ii; ++i) {\n            current = source[i];\n            target[i] = current instanceof OpenLayers.Feature.Vector ?\n                current : new OpenLayers.Feature.Vector(current);\n        }\n        return isArray ? target : target[0];\n    },\n    \n    /**\n     * Method: findMimeType\n     * Finds a supported mime type.\n     *\n     * Parameters:\n     * sourceFormats - {Object} An object literal with mime types as key and\n     *     true as value for supported formats.\n     * targetFormats - {Object} Like <sourceFormats>, but optional to check for\n     *     supported mime types on a different target than this process.\n     *     Default is to check against this process's supported formats.\n     *\n     * Returns:\n     * {String} A supported mime type.\n     */\n    findMimeType: function(sourceFormats, targetFormats) {\n        targetFormats = targetFormats || this.formats;\n        for (var f in sourceFormats) {\n            if (f in targetFormats) {\n                return f;\n            }\n        }\n    },\n    \n    CLASS_NAME: \"OpenLayers.WPSProcess\"\n    \n});\n\n/**\n * Class: OpenLayers.WPSProcess.ChainLink\n * Type for chaining processes.\n */\nOpenLayers.WPSProcess.ChainLink = OpenLayers.Class({\n    \n    /**\n     * Property: process\n     * {<OpenLayers.WPSProcess>} The process to chain\n     */\n    process: null,\n    \n    /**\n     * Property: output\n     * {String} The output identifier of the output we are going to use as\n     *     input for another process.\n     */\n    output: null,\n    \n    /**\n     * Constructor: OpenLayers.WPSProcess.ChainLink\n     *\n     * Parameters:\n     * options - {Object} Properties to set on the instance.\n     */\n    initialize: function(options) {\n        OpenLayers.Util.extend(this, options);\n    },\n    \n    CLASS_NAME: \"OpenLayers.WPSProcess.ChainLink\"\n    \n});\n"],
  "mappings": "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",
  "names": ["require_Request", "__commonJSMin", "exports", "url", "proxy", "sameOrigin", "urlParts", "location", "uPort", "lPort", "config", "defaultConfig", "customRequestedWithHeader", "headerKey", "request", "header", "events", "self", "proceed", "options", "complete", "success", "failure", "require_JSON", "__commonJSMin", "walk", "k", "v", "i", "value", "pretty", "json", "type", "err", "pieces", "object", "key", "keyJSON", "valueJSON", "addComma", "array", "len", "string", "m", "a", "b", "c", "number", "bool", "date", "format", "len", "P", "F", "C", "newArgs", "i", "l", "o", "destination", "source", "property", "value", "sourceIsEvt", "elements", "i", "len", "element", "o", "a", "array", "item", "obj", "id", "px", "sz", "position", "border", "overflow", "opacity", "imgURL", "dom", "delayDisplay", "image", "display", "arVersion", "version", "filter", "div", "sizing", "img", "object", "uObject", "key", "to", "from", "fromIsEvt", "params", "paramsArray", "value", "encodedValue", "encodedItemArray", "itemIndex", "url", "paramStr", "newUrl", "parts", "returnValue", "lambda", "node", "val", "evt", "target", "number", "precision", "x", "p1", "p2", "ct", "b", "f", "L", "U1", "U2", "sinU1", "cosU1", "sinU2", "cosU2", "lambdaP", "iterLimit", "sinLambda", "cosLambda", "sinSigma", "cosSigma", "sigma", "alpha", "cosSqAlpha", "cos2SigmaM", "C", "uSq", "A", "B", "deltaSigma", "s", "d", "lonlat", "brng", "dist", "u", "lon1", "lat1", "alpha1", "sinAlpha1", "cosAlpha1", "tanU1", "sigma1", "sinAlpha", "sigmaP", "tmp", "lat2", "revAz", "options", "paramsString", "start", "end", "parameters", "pairs", "keyValue", "prefix", "scale", "normScale", "units", "resolution", "forElement", "pos", "viewportElement", "BUGGY_GECKO_BOX_OBJECT", "parent", "box", "scrollTop", "scrollLeft", "vpBox", "browser", "url1", "url2", "urlObj1", "urlObj2", "loc", "port", "fullUrl", "urlObject", "queryString", "qMark", "head", "hashMark", "ua", "elem", "name", "contentHTML", "size", "w", "h", "container", "containerElement", "parentHasPositionAbsolute", "superContainer", "parentPosition", "content", "l", "scrollbarWidth", "scr", "inn", "wNoScroll", "wScroll", "coordinate", "axis", "dmsOption", "abscoordinate", "coordinatedegrees", "coordinateminutes", "tempcoordinateminutes", "coordinateseconds", "str", "className", "Constructor", "ii", "VENDOR_PREFIXES", "divStyle", "cssCache", "jsCache", "domToCss", "prefixedDom", "c", "css", "property", "domProperty", "style", "js", "obj", "tmpProp", "i", "l", "prefix", "isStyleObj", "window", "requestAnimationFrame", "isNative", "requestFrame", "request", "callback", "element", "counter", "loops", "start", "duration", "id", "stop", "str", "sub", "oStringList", "camelizedString", "i", "len", "s", "template", "context", "args", "replacer", "match", "replacement", "subs", "value", "trimWhitespace", "originalValue", "num", "sig", "fig", "dec", "tsep", "dsep", "parts", "integer", "thousands", "rem", "radix", "func", "object", "newArgs", "event", "array", "callback", "caller", "selected", "val", "left", "bottom", "right", "top", "bounds", "equals", "reverseAxisOrder", "decimal", "mult", "xmin", "ymin", "xmax", "ymax", "ratio", "origin", "origx", "origy", "x", "y", "object", "ll", "options", "contains", "worldBounds", "worldWidth", "worldCenterX", "worldsAway", "px", "inclusive", "self", "intersects", "mightTouch", "inBottom", "inTop", "inLeft", "inRight", "world", "width", "selfCrosses", "boundsCrosses", "partial", "bottomLeft", "bottomRight", "topLeft", "topRight", "lonlat", "quadrant", "center", "source", "dest", "lr", "ul", "ur", "maxExtent", "leftTolerance", "rightTolerance", "newBounds", "newLeft", "str", "bbox", "size", "opp", "date", "str", "match", "year", "month", "day", "type", "hours", "minutes", "secFrac", "seconds", "milliseconds", "hoursOffset", "minutesOffset", "offset", "element", "i", "len", "display", "name", "names", "style", "value", "css", "positions", "lon", "lat", "ll", "equals", "source", "dest", "point", "maxExtent", "newLonLat", "str", "pair", "arr", "gotArr", "x", "y", "px", "equals", "newPx", "w", "h", "sz", "equals", "error", "scripts", "i", "len", "easing", "begin", "finish", "duration", "options", "value", "i", "b", "f", "c", "t", "d", "options", "xy", "last", "now", "i", "l", "point", "time", "dist", "speed", "theta", "info", "callback", "v0", "fx", "fy", "initialTime", "lastX", "lastY", "timerCallback", "t", "x", "y", "args", "v", "event", "evt", "allowDefault", "tagName", "element", "elementParam", "name", "observer", "useCapture", "idPrefix", "cacheID", "elementObservers", "i", "entry", "foundEntry", "cacheEntry", "object", "eventTypes", "fallThrough", "options", "eventName", "touchModel", "type", "len", "obj", "func", "priority", "listeners", "listener", "continueChain", "callback", "touches", "x", "y", "num", "touch", "win", "winPageX", "winPageY", "viewportElement", "handler", "eventHandler", "pointerHandler", "cb", "e", "alreadyInArray", "ii", "internalCb", "up", "target", "i", "element", "depth", "button", "ignore", "evt", "propagate", "pos", "viewportElement", "scrollTop", "scrollLeft", "target", "evt", "i", "map", "features", "feature", "layer", "more", "clicked", "len", "clientX", "clientY", "over", "newly", "out", "id", "type", "object", "x", "y", "targets", "layers", "renderer", "featureId", "import_Request", "oXMLHttpRequest", "bGecko", "bIE", "bIE7", "fXMLHttpRequest", "cXMLHttpRequest", "sMethod", "sUrl", "bAsync", "sUser", "sPassword", "oRequest", "nState", "fOnUnload", "fCleanTransport", "fReadyStateChange", "fSynchronizeValues", "fXMLHttpRequest_send", "vData", "sName", "sValue", "fHandler", "bUseCapture", "nIndex", "oListener", "oEvent", "oEventPseudo", "fGetDocument", "oDocument", "sResponse", "oArguments", "projCode", "options", "projection", "p", "equals", "source", "target", "from", "to", "method", "defaults", "point", "dest", "sourceCode", "destCode", "transforms", "pole", "inverseMercator", "xy", "forwardMercator", "y", "map", "base", "codes", "add", "same", "i", "len", "code", "other", "j", "mercator", "geographic", "div", "options", "isDOMElement", "projCode", "id", "addNode", "nodes", "i", "len", "cssNode", "updatePxExtent", "array", "property", "match", "test", "found", "item", "foundLayer", "layer", "zIdx", "layers", "setNewBaseLayer", "iLayer", "idx", "base", "delta", "newBaseLayer", "center", "oldResolution", "newResolution", "newZoom", "control", "px", "controls", "pixels", "pxs", "ctrl", "returnControl", "popup", "exclusive", "popupDiv", "size", "newSize", "oldSize", "zoom", "resolution", "extent", "halfWDeg", "halfHDeg", "cachedCenter", "dx", "dy", "centerPx", "newCenterPx", "newCenterLonLat", "lonlat", "from", "to", "vector", "last", "x", "y", "dragging", "forceZoomChange", "hw", "hh", "wrapDateLine", "xRestriction", "yRestriction", "resolutions", "maxResolution", "ii", "requestedZoom", "maxCenter", "zoomChanged", "centerChanged", "res", "maxExtent", "maxExtentCenter", "lonDelta", "latDelta", "extentWidth", "extentHeight", "bounds", "inRange", "originPx", "newPx", "oldLeft", "oldTop", "newLeft", "newTop", "zoomLevel", "valid", "worldBounds", "projection", "numZoomLevels", "units", "scale", "closest", "xy", "map", "currentRes", "targetRes", "start", "end", "data", "containerOrigin", "newCenter", "restricted", "viewPortPx", "deltaX", "deltaY", "zoomPoint", "left", "right", "bottom", "top", "dest", "source", "layerPx", "dX", "dY", "origin", "needTransform", "style", "transform", "template", "computedStyle", "name", "options", "setNewBaseLayer", "obj", "o", "newName", "newOptions", "reinitialize", "resolution", "properties", "redrawn", "extent", "zoomChanged", "bounds", "dragging", "display", "dx", "dy", "map", "show", "size", "tileSize", "visibility", "inRange", "isBaseLayer", "i", "len", "p", "props", "alwaysInRange", "maxResolution", "minResolution", "a", "b", "lastIdx", "scales", "resolutions", "viewSize", "wRes", "hRes", "maxZoomLevel", "numZoomLevels", "ratio", "base", "zoom", "closest", "idealResolution", "low", "high", "lowZoom", "highZoom", "highRes", "lowRes", "res", "dRes", "diff", "minDiff", "viewPortPx", "lonlat", "maxExtent", "lon", "lat", "px", "opacity", "childNodes", "element", "lastChild", "zIndex", "mapGutter", "wrappingOptions", "url", "size", "offset", "calculateOffset", "id", "px", "opacity", "display", "isDrawn", "lonlat", "icon", "newIcon", "px", "isDrawn", "onScreen", "screenBounds", "inflate", "opacity", "url", "display", "bounds", "borderColor", "borderWidth", "color", "width", "px", "sz", "onScreen", "screenBounds", "display", "id", "lonlat", "contentSize", "contentHTML", "closeBox", "closeBoxCallback", "groupDivId", "px", "style", "currentOverflow", "oldOverflow", "contentDivPadding", "wPadding", "hPadding", "closeDivWidth", "preparedHTML", "containerElement", "realSize", "safeSize", "newSize", "fixedSize", "clippedSize", "scrollBar", "color", "opacity", "border", "onImgLoad", "images", "len", "img", "context", "size", "safeContentSize", "extraX", "extraY", "maxY", "maxX", "callback", "closePopup", "e", "mapSize", "origTL", "newTL", "dx", "dy", "onTouchstart", "evt", "layer", "position", "bounds", "url", "size", "options", "force", "draw", "withinMaxExtent", "maxExtent", "map", "worldBounds", "worldExtent", "tolerance", "redraw", "layer", "position", "bounds", "url", "size", "options", "shouldDraw", "id", "style", "ratio", "img", "tile", "left", "top", "src", "backBuffer", "canvas", "draw", "url", "usedIFrame", "fromIFrame", "toIFrame", "eventPane", "style", "id", "iframe", "left", "top", "form", "cacheId", "imageSize", "params", "field", "par", "backBuffer", "drawn", "ols", "response", "i", "j", "info", "id", "resolution", "row", "col", "charCode", "index", "keys", "str", "name", "url", "extent", "size", "options", "obj", "map", "bounds", "zoomChanged", "dragging", "firstRendering", "ulPx", "tileWidth", "tileHeight", "tile", "newUrl", "extent", "viewPortPx", "lonlat", "maxResolution", "zoom", "gg", "sm", "lon", "lat", "point", "x", "y", "name", "options", "map", "evt", "center", "zoom", "viewSize", "msgW", "msgH", "size", "centerPx", "topLeft", "div", "display", "zIndex", "dx", "dy", "bounds", "zoomChanged", "dragging", "newCenter", "newZoom", "moOldCenter", "oldCenter", "moOldZoom", "oldZoom", "oldPx", "newPx", "viewPortPx", "lonlat", "moPixel", "moLonLat", "olLonLat", "lon", "lat", "moLatLng", "olPixel", "x", "y", "props", "i", "len", "property", "desiredZoomLevels", "limitZoomLevels", "resolutionsIndex", "resolution", "viewSize", "extent", "size", "tl", "br", "moZoom", "zoom", "olZoom", "name", "options", "mixin", "visible", "opacity", "bounds", "zoomChanged", "dragging", "container", "cache", "termsOfUse", "poweredBy", "map", "moBounds", "olBounds", "sw", "ne", "moLonLat", "lat", "moPixel", "mapObject", "cache", "center", "container", "googleControl", "visible", "map", "type", "layers", "layer", "i", "me", "olBounds", "moBounds", "sw", "ne", "moPixel", "size", "lon", "lat", "res", "delta_x", "delta_y", "lonlat", "moLonLat", "extent", "zoom", "mapContainer", "gLatLng", "x", "y", "name", "url", "params", "options", "obj", "newUrl", "newParams", "ret", "force", "paramString", "urls", "product", "i", "len", "altUrl", "allParams", "paramsString", "urlParams", "key", "name", "url", "params", "options", "map", "iRow", "len", "row", "iCol", "clen", "tile", "newOptions", "reinitialize", "singleTileChanged", "obj", "bounds", "zoomChanged", "dragging", "forceReTile", "tilesBounds", "resolution", "serverResolution", "loc", "data", "x", "y", "numRows", "res", "tileWidth", "tileHeight", "left", "top", "worldWidth", "worldsAway", "dtx", "dty", "col", "distance", "newDistance", "newResolution", "backBuffer", "topLeftTileBounds", "ratio", "tiles", "i", "position", "leftOffset", "topOffset", "lenI", "j", "lenJ", "markup", "dx", "dy", "size", "length", "bottomLeftTileBounds", "width", "height", "center", "tileBounds", "maxExtent", "px", "origin", "tilelon", "tilelat", "offsetlon", "tilecol", "rowSign", "offsetlat", "tilerow", "tileSize", "extent", "edges", "tileLayout", "startcol", "startrow", "viewSize", "minRows", "minCols", "layerContainerDivLeft", "layerContainerDivTop", "startPx", "tileData", "rowidx", "colidx", "tileCenter", "a", "ii", "replacingCls", "evt", "aborted", "tileDiv", "bufferTile", "transitionendEvents", "buffer", "tlTile", "tlViewPort", "prepend", "grid", "rowIndex", "sign", "modelRow", "colIndex", "rows", "columns", "l", "viewPortPx", "tileMapWidth", "tileMapHeight", "mapPoint", "tileLeft", "tileBottom", "name", "url", "params", "options", "obj", "bounds", "center", "mapSize", "getVisParams", "currentRes", "colidx", "rowidx", "newParams", "altUrl", "requestString", "allParams", "urlParams", "key", "paramsString", "lastServerChar", "tileRowGroup", "tileColGroup", "tilePath", "name", "url", "params", "options", "obj", "bounds", "extent", "imageSize", "newParams", "altUrl", "allParams", "paramsString", "urlParams", "key", "requestString", "lastServerChar", "name", "url", "params", "options", "bounds", "mapRes", "scale", "pX", "pY", "origin", "resolution", "tilelon", "tilelat", "offsetlon", "tilecol", "offsetlat", "tilerow", "row", "col", "tileLayout", "minX", "minY", "obj", "viewPortPx", "tileMapWidth", "tileMapHeight", "mapPoint", "tileLeft", "tileBottom", "name", "url", "params", "options", "bounds", "mapRes", "scale", "pX", "pY", "metaX", "metaY", "components", "name", "options", "opacity", "i", "len", "bounds", "zoomChanged", "dragging", "marker", "px", "markerImg", "maxExtent", "name", "options", "onFail", "e", "bounds", "zoomChanged", "minor", "ajaxRequest", "text", "parser", "features", "i", "len", "data", "feature", "location", "iconSize", "iconOffset", "markerFeature", "marker", "evt", "sameMarkerClicked", "name", "url", "lzd", "zoomLevels", "params", "options", "newArguments", "zoom", "extent", "bounds", "deg", "x", "y", "name", "url", "params", "options", "newArguments", "obj", "bounds", "projWords", "srid", "imageSize", "newParams", "layerDefStrList", "layerID", "requestString", "id", "queryDef", "upperParams", "name", "url", "params", "options", "newArguments", "obj", "projCode", "bounds", "imageSize", "newParams", "reverseAxisOrder", "requestString", "upperParams", "altUrl", "mapProjection", "projectionCode", "value", "config", "required", "prop", "args", "len", "ids", "i", "bounds", "zoomChanged", "dragging", "obj", "matrix", "denom", "diff", "delta", "ii", "loc", "res", "fx", "fy", "col", "row", "url", "center", "info", "matrixId", "dimensions", "params", "template", "context", "dimension", "path", "newParams", "name", "url", "options", "bounds", "axlReq", "req", "doc", "axlResp", "arcxml", "callback", "scope", "output", "ret", "id", "querydef", "lyr", "geometry", "layer", "buffer", "requestOptions", "mapCenter", "viewPx", "mapOffCenter", "request", "response", "obj", "name", "location", "options", "bounds", "zoomChanged", "minor", "ajaxRequest", "doc", "format", "features", "i", "len", "data", "feature", "title", "description", "link", "contentHTML", "marker", "evt", "sameMarkerClicked", "popup", "marker", "topleft", "botright", "markerDiv", "name", "url", "options", "obj", "bounds", "xyz", "s", "res", "x", "y", "z", "limit", "map", "options", "obj", "location", "info", "tileInfo", "id", "name", "url", "options", "obj", "options", "name", "newArgs", "params", "url", "script", "res", "bounds", "xyz", "x", "y", "z", "quadDigits", "i", "digit", "mask", "quadKey", "metadata", "extent", "providers", "zoom", "copyrights", "provider", "ii", "j", "jj", "bbox", "coverage", "logo", "obj", "name", "url", "options", "newArguments", "obj", "bounds", "res", "x", "y", "z", "path", "map", "name", "url", "layername", "options", "obj", "bounds", "res", "bbox", "size", "tileX", "tileY", "tileZ", "components", "path", "name", "url", "size", "options", "imageSize", "tiles", "resolutions", "i", "obj", "backBuffer", "image", "bounds", "res", "x", "y", "z", "tileIndex", "path", "w", "h", "map", "name", "url", "options", "info", "startingTileExtent", "upperLeft", "bottomRight", "key", "lod", "start", "end", "point", "res", "numTileCols", "numTileRows", "minX", "maxX", "maxY", "minY", "extent", "obj", "bounds", "resolution", "originTileX", "originTileY", "center", "x", "y", "z", "s", "id", "lonlat", "contentSize", "contentHTML", "anchor", "closeBox", "closeBoxCallback", "newArguments", "px", "oldRelativePosition", "extent", "quadrant", "newPx", "size", "top", "left", "id", "lonlat", "contentSize", "contentHTML", "anchor", "closeBox", "closeBoxCallback", "px", "i", "block", "color", "opacity", "contentDivPadding", "newPx", "firstPosition", "key", "position", "divId", "imgId", "imageCreator", "positionBlock", "l", "b", "r", "t", "w", "id", "lonlat", "contentSize", "contentHTML", "anchor", "closeBox", "closeBoxCallback", "layer", "lonlat", "data", "onScreen", "screenBounds", "closeBox", "anchor", "popupClass", "geometry", "attributes", "style", "boundsOnly", "onScreen", "screenBounds", "featureBounds", "screenPoly", "lonlat", "toleranceLon", "toleranceLat", "atPoint", "location", "pixel", "lastPixel", "res", "state", "control", "callbacks", "options", "map", "evt", "keyModifiers", "events", "i", "len", "name", "args", "method", "evt", "propagate", "clickEvent", "delayedRightCall", "passes", "ii", "from", "to", "touches", "len", "touch", "i", "deactivated", "evt", "px", "passes", "dpx", "deactivated", "control", "callbacks", "options", "pixel", "lonlat", "geometry", "force", "layer", "cancel", "key", "evt", "geom", "pixel1", "pixel2", "tolerance", "passes", "dist", "pixel", "lonlat", "geometry", "force", "layer", "x", "y", "dx", "dy", "previousIndex", "p0", "direction", "length", "deflection", "p1", "theta", "components", "index", "target", "undone", "lastpt", "curptidx", "curpt", "evt", "drawing", "stopDown", "pixel", "lonlat", "geometry", "features", "candidate", "polygon", "i", "event", "point", "components", "last", "index", "ring", "modified", "rings", "target", "outer", "points", "j", "jj", "cancel", "force", "control", "layer", "callbacks", "options", "evt", "feature", "type", "handled", "previouslyIn", "click", "inNew", "mode", "args", "key", "dpx", "activated", "deactivated", "index", "control", "callbacks", "options", "me", "evt", "propagate", "dragged", "activated", "deactivated", "pos", "evt", "propagate", "current", "activated", "deactivated", "touches", "t0", "t1", "distance", "scale", "control", "callbacks", "options", "newOptions", "activated", "deactivated", "evt", "maploc", "point", "ry", "dx", "dy", "ratio", "angle", "ring", "i", "alpha", "snapAngleRad", "name", "args", "control", "callbacks", "options", "map", "xy", "startX", "startY", "deltaX", "deltaY", "offset", "end", "result", "start", "top", "bottom", "left", "right", "testDiv", "w3cBoxModel", "control", "callbacks", "options", "overScrollableDiv", "allowScroll", "overMapDiv", "elem", "overflow", "style", "i", "len", "layer", "delta", "evt", "wheelListener", "control", "callbacks", "options", "i", "len", "deactivated", "evt", "options", "key", "map", "px", "attributions", "attribution", "len", "layer", "map", "i", "layers", "evt", "tile", "url", "dataURI", "map", "i", "layers", "evt", "tile", "sameOriginUrl", "obj", "canvasContext", "urlMap", "url", "e", "reason", "key", "position", "bounds", "targetCenterPx", "pixWidth", "pixHeight", "zoomFactor", "extent", "center", "xmin", "xmax", "ymin", "ymax", "minXY", "maxXY", "lastZoom", "size", "centerPx", "zoom", "oldRes", "newRes", "zoomOriginPx", "config", "xy", "res", "self", "x", "y", "end", "options", "clickCallbacks", "clickOptions", "wheelOptions", "evt", "deltaZ", "currentZoom", "newZoom", "delta", "options", "evt", "pinchData", "xy", "scale", "containerOrigin", "pinchOrigin", "current", "dx", "dy", "start", "last", "zoom", "resolution", "location", "zoomPixel", "size", "options", "clickCallbacks", "clickOptions", "evt", "evt", "lonLat", "newHtml", "digits", "options", "layer", "img", "px", "deltaX", "deltaY", "rectTop", "rectLeft", "rectHeight", "rectWidth", "newTop", "newLeft", "evt", "pxCenter", "top", "left", "height", "width", "minimize", "mapExtent", "maxExtent", "testExtent", "resRatio", "mapRes", "targetRes", "center", "e", "sourceUnits", "targetUnits", "bounds", "pxBounds", "lonLatBounds", "bottom", "right", "rLeft", "rTop", "leftBottomPx", "rightTopPx", "leftBottomLonLat", "rightTopLonLat", "overviewMapPx", "size", "res", "lonlat", "extent", "observeElement", "evt", "size", "handled", "target", "options", "map", "target", "px", "sz", "centered", "id", "img", "xy", "imgLocation", "btn", "i", "evt", "dim", "map", "px", "sz", "centered", "wposition", "imgLocation", "id", "minZoom", "zoomsToEnd", "slider", "div", "evt", "levels", "zoom", "target", "deltaY", "offsets", "newTop", "zoomLevel", "url", "parameters", "index", "map", "i", "len", "control", "args", "layer", "c", "element", "base", "options", "map", "i", "len", "control", "separator", "href", "anchor", "splits", "center", "zoom", "layers", "params", "lat", "lon", "mapPosition", "layer", "element", "options", "scale", "units", "inches", "scaleStr", "theLen", "maxLen", "digits", "pow10", "firstChar", "barLen", "res", "curMapUnits", "inches", "maxSizeData", "geodesicRatio", "maxSizeGeodesic", "maxSizeKilometers", "topUnits", "bottomUnits", "topMax", "bottomMax", "topRounded", "bottomRounded", "topPx", "bottomPx", "options", "defaults", "layer", "targets", "target", "len", "activated", "deactivated", "event", "loc", "point", "best", "snapped", "result", "i", "proceed", "resolution", "tolerance", "maxTolerance", "eligible", "features", "feature", "type", "vertices", "vertex", "closest", "dist", "found", "numTypes", "ll", "j", "stop", "k", "klen", "geoTolerance", "options", "layer", "activated", "geometry", "deactivated", "event", "feature", "features", "len", "target", "sourceSplit", "targetSplit", "results", "proceed", "additions", "removals", "mutual", "sourceParts", "targetFeature", "targetParts", "source", "parts", "i", "j", "k", "feat", "destroys", "geoms", "clone", "newFeature", "options", "map", "evt", "button", "layersType", "i", "len", "layerState", "layer", "containsOverlays", "containsBaseLayers", "layers", "baseLayer", "checked", "inputElem", "inputId", "labelSpan", "br", "groupArray", "groupDiv", "layerEntry", "minimize", "img", "layer", "handler", "options", "vertex", "feature", "sketchStyle", "geometry", "proceed", "x", "y", "dx", "dy", "direction", "length", "deflection", "feature", "pixel", "layer", "options", "activated", "res", "map", "layer", "options", "dragCallbacks", "pixel", "feature", "_self", "dragOptions", "evt", "keyboardOptions", "point1", "point2", "x", "y", "point", "deactivated", "indexOf", "modified", "isPoint", "vertex", "pos", "geom", "code", "control", "collectComponentVertices", "geometry", "i", "component", "len", "numVert", "prevVertex", "nextVertex", "center", "originGeometry", "origin", "bounds", "radiusGeometry", "radius", "resize", "reshape", "rotate", "dx1", "dy1", "dx0", "dy0", "a0", "a1", "angle", "scale", "ratio", "l0", "l1", "map", "index", "map", "feature", "vertex", "evt", "pixel", "llPx", "urPx", "ll", "ur", "hits", "center", "centerPt", "d", "closestHit", "i", "ii", "hit", "distance", "createVertex", "geom", "point", "data", "collectComponentVertices", "geometry", "component", "nextComponent", "len", "numVert", "bbox", "point1", "point2", "options", "ctl", "i", "control", "len", "l", "c", "controls", "element", "d", "re", "evt", "button", "property", "match", "test", "found", "item", "layers", "options", "callbacks", "layer", "feature", "l", "numExcept", "selected", "control", "cont", "style", "position", "minXY", "maxXY", "bounds", "prevMultiple", "i", "len", "map", "isActive", "options", "previousOptions", "nextOptions", "state", "length", "prop", "map", "current", "center", "zoom", "sourceUnits", "targetUnits", "resolutionFactor", "type", "activated", "deactivated", "handler", "options", "callbacks", "immediate", "active", "geometry", "point", "feature", "drawing", "eventType", "stat", "order", "units", "unit", "area", "i", "len", "geomUnits", "inPerDisplayUnit", "inPerMapUnit", "length", "options", "callbacks", "evt", "candidates", "layers", "layer", "url", "i", "matches", "len", "clickPosition", "format", "layerNames", "styleNames", "firstLayer", "projection", "layerProj", "params", "request", "wmsOptions", "services", "service", "found", "xy", "features", "doc", "responseHeaders", "options", "callbacks", "evt", "candidates", "layers", "layer", "i", "xy", "loc", "getTileUrl", "params", "tileInfo", "request", "issue", "len", "requestOptions", "doc", "features", "except", "error", "options", "gratStyle", "map", "extent", "center", "projection", "resolution", "squaredTolerance", "updateProjectionInfo", "left", "top", "labels", "i", "ii", "line", "labelPoint", "split", "labelAlign", "centerLonLat", "extentGeom", "extent4326", "minLon", "minLat", "maxLon", "maxLat", "pixelSize", "size", "idx", "prevIdx", "lon", "lat", "visibleIntervals", "interval", "intervalIndex", "centerLon", "centerLat", "defaults", "worldExtent", "index", "lineString", "layer", "options", "activated", "deactivated", "map", "feature", "initialParams", "oldRotation", "oldCenter", "cont", "featureBounds", "ll", "geom", "box", "llGeom", "control", "x", "y", "vertexMoveFn", "vertexResizeFn", "scale", "center", "ratio", "vertexRotateFn", "angle", "handleMoveFn", "oldX", "oldY", "evt", "preserveAspectRatio", "reshape", "oldGeom", "centerGeometry", "dx1", "dy1", "dx0", "dy0", "l0", "l1", "newCenter", "rotationHandleMoveFn", "constrain", "a0", "a1", "diff", "handles", "rotationHandles", "handle", "rotationHandle", "positions", "i", "pixel", "eligible", "mods", "hm", "options", "evt", "lonLat", "layers", "infoLookup", "layer", "idx", "i", "len", "candidates", "handler", "options", "key", "evt", "source", "selectionLayer", "layer", "filters", "geometryAttributes", "sld", "layerNames", "i", "len", "name", "symbolizer", "geometryAttribute", "filter", "request", "format", "doc", "describeLayer", "typeNames", "url", "describeFeatureType", "result", "cache", "typeName", "properties", "j", "lenj", "property", "type", "activated", "deactivated", "layerCache", "layers", "geometry", "point", "canApply", "div", "links", "zoomIn", "zoomOut", "eventsInstance", "el", "evt", "button", "bounds", "newBounds", "geometry", "options", "nodes", "lonlat", "toleranceLon", "toleranceLat", "atPoint", "dX", "dY", "toleranceBounds", "string", "wkt", "geom", "format", "result", "len", "components", "i", "seg1", "seg2", "point", "tolerance", "intersection", "x11_21", "y11_21", "x12_11", "y12_11", "y22_21", "x22_21", "d", "n1", "n2", "along1", "along2", "x", "y", "dist", "segs", "seg", "outer", "j", "source", "target", "p", "segment", "x0", "y0", "x1", "y1", "x2", "y2", "dx", "dy", "along", "components", "Constructor", "geometry", "len", "strings", "i", "bounds", "component", "index", "added", "components1", "components2", "removed", "length", "area", "projection", "weighted", "areas", "centroids", "areaSum", "minArea", "centroid", "xSum", "ySum", "x", "y", "angle", "origin", "scale", "ratio", "options", "edge", "details", "result", "best", "distance", "min", "equivalent", "source", "dest", "intersect", "nodes", "vertices", "x", "y", "obj", "geometry", "options", "edge", "details", "distance", "x0", "y0", "x1", "y1", "result", "geom", "equals", "angle", "origin", "radius", "theta", "scale", "ratio", "intersect", "source", "dest", "nodes", "point", "index", "length", "i", "len", "projection", "geom", "gg", "p1", "p2", "point", "removed", "geometry", "intersect", "type", "segs1", "segs2", "seg1", "seg1x1", "seg1x2", "seg1y1", "seg1y2", "seg2", "seg2y1", "seg2y2", "outer", "i", "len", "j", "jlen", "numSeg", "segments", "point1", "point2", "byX1", "seg", "options", "edge", "tolerance", "lines", "verts", "points", "intersections", "split", "vert1", "vert2", "node", "vertex", "target", "interOptions", "result", "stop", "xDir", "yDir", "p1", "p2", "results", "mutual", "sourceSplit", "targetSplit", "sourceParts", "targetParts", "splits", "k", "nodes", "vertices", "details", "best", "min", "segs", "x", "y", "segs0", "seg0", "intersection", "x0", "y0", "len1", "dist", "compareNumbers", "a", "b", "douglasPeuckerReduction", "firstPoint", "lastPoint", "maxDistance", "indexFarthest", "index", "distance", "perpendicularDistance", "pointIndexsToKeep", "area", "bottom", "height", "returnPoints", "interpolate", "transform", "squaredTolerance", "components", "geoA", "geoB", "geoStack", "stack", "fractionStack", "fractions", "maxIterations", "geoM", "m", "fracA", "fracB", "fracM", "key", "lon", "lat1", "lat2", "projection", "epsg4326Projection", "frac", "lat", "lon1", "lon2", "point", "index", "added", "lastPoint", "firstPoint", "removed", "x", "y", "len", "angle", "origin", "scale", "ratio", "i", "source", "dest", "component", "sumX", "sumY", "x0", "y0", "area", "b", "c", "sum", "projection", "ring", "gg", "p1", "p2", "approx", "digs", "px", "py", "getX", "x1", "y1", "x2", "y2", "numSeg", "start", "end", "cx", "cy", "crosses", "contained", "geometry", "intersect", "nodes", "area", "i", "len", "projection", "point", "numRings", "contained", "hole", "geometry", "intersect", "ring", "options", "edge", "result", "origin", "radius", "sides", "rotation", "angle", "rotatedAngle", "x", "y", "points", "geometry", "options", "results", "mutual", "splits", "sourceLine", "sourceLines", "sourceSplit", "targetSplit", "sourceParts", "targetParts", "i", "len", "j", "k", "klen", "targetLine", "containerID", "options", "extent", "resolutionChanged", "ratio", "size", "feature", "style", "bounds", "worldBounds", "rendered", "location", "xOffset", "yOffset", "res", "worldWidth", "rendererCenterX", "featureCenterX", "worldsAway", "geometry", "featureId", "evt", "features", "i", "len", "renderer", "symbolizer", "result", "yOrdering", "newNode", "nodeId", "leftIndex", "rightIndex", "middle", "placement", "node", "arrayIndex", "lastId", "zIndex", "index", "nextIndex", "nextElement", "indexer", "nextNode", "newZIndex", "returnVal", "nextZIndex", "result", "containerID", "options", "child", "root", "extent", "resolutionChanged", "coordSysUnchanged", "resolution", "rightOfDateLine", "ratio", "world", "geometry", "style", "featureId", "className", "rendered", "i", "len", "removeBackground", "id", "drawResult", "insert", "backgroundStyle", "drawn", "label", "outline", "evt", "target", "useElement", "element", "backgroundId", "bElem", "type", "renderer", "graphicName", "containerID", "svgFeature", "x", "y", "xyOnly", "left", "top", "extent", "resolutionChanged", "coordSysUnchanged", "resolution", "extentString", "inRange", "transformString", "size", "geometry", "style", "nodeType", "node", "options", "title", "titleNode", "label", "r", "widthFactor", "pos", "width", "height", "xOffset", "yOffset", "opacity", "offset", "src", "parent", "nextSibling", "rotation", "metrics", "w", "str", "type", "id", "svg", "suffix", "defs", "radius", "componentsResult", "d", "draw", "complete", "linearRingResult", "path", "j", "len", "featureId", "location", "drawOutline", "outlineStyle", "align", "labelRows", "numRows", "i", "tspan", "vfactor", "components", "separator", "renderCmp", "strings", "component", "badComponent", "goodComponent", "maxX", "maxY", "x1", "y1", "x2", "y2", "k", "point", "graphicName", "existing", "symbol", "symbolNode", "symbolExtent", "points", "viewBox", "evt", "target", "containerID", "options", "geometry", "featureId", "size", "root", "hitCanvas", "feature", "style", "rendered", "bounds", "worldBounds", "intersects", "className", "i", "img", "title", "width", "height", "xOffset", "yOffset", "_clearRectId", "opacity", "onLoad", "pt", "p0", "p1", "x", "y", "canvas", "factor", "cx", "cy", "symbolBounds", "scaling", "angle", "unscaledStrokeWidth", "deg2rad", "symbol", "type", "id", "hex", "len", "symbolizer", "strokeScaling", "twoPi", "radius", "context", "components", "start", "location", "fontStyle", "labelRows", "numRows", "vfactor", "lineHeight", "hfactor", "point", "resolution", "extent", "evt", "xy", "data", "features", "labelMap", "item", "containerID", "style", "shapes", "i", "len", "extent", "resolutionChanged", "coordSysUnchanged", "resolution", "left", "top", "org", "roots", "root", "size", "w", "h", "geometry", "nodeType", "node", "options", "fillColor", "title", "width", "height", "xOffset", "yOffset", "cache", "fills", "fill", "rotation", "strokes", "stroke", "aspectRatio", "img", "image", "rot", "sintheta", "costheta", "filter", "opacity", "centerPoint", "imgBox", "imgBounds", "strokeColor", "bbox", "scaledBox", "dash", "parts", "type", "id", "subType", "splitIndex", "nodeName", "suffix", "radius", "diameter", "closeLine", "numComponents", "comp", "x", "y", "end", "path", "j", "jj", "points", "area", "first", "second", "ii", "pathComp", "featureId", "location", "label", "textbox", "align", "xshift", "yshift", "renderer", "layer", "graphicName", "symbol", "symbolExtent", "pathitems", "diff", "name", "options", "len", "strategy", "i", "obj", "features", "clonedFeatures", "rendererClass", "renderer", "map", "newSize", "bounds", "zoomChanged", "dragging", "coordSysUnchanged", "viewSize", "viewWidth", "viewHeight", "offsetLeft", "offsetTop", "extent", "feature", "display", "currentDisplay", "notify", "event", "ret", "featuresAdded", "all", "style", "renderIntent", "drawn", "evt", "featureId", "property", "value", "featureFid", "attrName", "attrValue", "foundFeatures", "maxExtent", "geometry", "config", "map", "ratio", "maxFeatures", "dx", "dy", "origin", "rotation", "bounds", "rotationOrigin", "rect", "force", "viewBounds", "viewBoundsWidth", "viewBoundsHeight", "aspectRatio", "maxHeight", "maxWidth", "gridWidth", "gridHeight", "center", "rows", "cols", "gridLeft", "gridBottom", "features", "x", "y", "point", "i", "j", "evt", "layers", "feature", "i", "map", "layer", "options", "layer", "activated", "event", "features", "feature", "i", "ii", "filter", "previousCache", "activated", "deactivated", "options", "layer", "resp", "features", "remote", "local", "geom", "i", "len", "activated", "deactivated", "event", "propagate", "resolution", "clusters", "feature", "clustered", "cluster", "i", "j", "clone", "candidate", "len", "exist", "cc", "fc", "distance", "center", "activated", "deactivated", "event", "i", "numFeatures", "newLength", "changed", "start", "num", "features", "activated", "deactivated", "options", "mapBounds", "bounds", "invalid", "ratio", "center", "dataWidth", "dataHeight", "evt", "filter", "resp", "features", "remote", "local", "geom", "i", "len", "options", "activated", "deactivated", "event", "feature", "features", "remote", "local", "len", "clones", "orig", "clone", "i", "response", "evt", "state", "destroys", "insertIds", "j", "activated", "deactivated", "options", "context", "string", "options", "feature", "i", "len", "fid", "filter", "options", "context", "i", "len", "filters", "options", "context", "result", "got", "exp", "regexp", "wildCard", "singleChar", "escapeChar", "value", "$0", "$1", "feature", "intersect", "geom", "options", "options", "filter", "merged", "response", "method", "options", "format", "filter", "params", "readWithPOST", "resp", "headers", "features", "feature", "url", "method", "requestOptions", "request", "doc", "nResponses", "types", "list", "requestFeatures", "i", "len", "nRequests", "success", "finalResponse", "insertCallback", "response", "fids", "callback", "queue", "opt", "options", "cls", "layer", "typeName", "featurePrefix", "param", "parts", "protocolOptions", "options", "response", "data", "featureType", "geometryName", "request", "result", "doc", "format", "features", "obj", "filter", "root", "deleteNode", "filterNode", "options", "options", "options", "cls", "options", "response", "data", "request", "doc", "options", "format", "filter", "params", "response", "request", "data", "url", "callback", "id", "name", "script", "head", "key", "o", "counter", "options", "cls", "options", "response", "format", "data", "request", "doc", "pointFeatures", "options", "lines", "pointFeature", "startPoint", "endPoint", "i", "len", "lonlat", "attributes", "style", "line", "style", "options", "i", "len", "feature", "rules", "rule", "context", "elseRules", "appliedRules", "applies", "symbolizerPrefix", "symbolizer", "defaults", "propertyStyles", "value", "key", "property", "geometry", "prefixes", "defaultStyle", "config", "i", "len", "style", "options", "key", "feature", "intent", "defaultSymbolizer", "renderIntent", "property", "symbolizers", "context", "rules", "value", "options", "i", "feature", "context", "applies", "scale", "len", "value", "type", "key", "options", "data", "object", "cmpToStr", "regex2value", "value", "$0", "$1", "$2", "filter", "params", "className", "filterType", "op", "i", "len", "options", "alias", "uri", "text", "index", "node", "xmldom", "req", "data", "serializer", "doc", "name", "element", "elements", "allNodes", "potentialNode", "fullName", "i", "len", "attributeNode", "attributes", "attributeValue", "def", "value", "child", "simple", "complex", "type", "found", "attribute", "loc", "obj", "group", "local", "reader", "children", "parent", "prefix", "split", "outer", "sibling", "attr", "options", "className", "root", "version", "profile", "format", "obj", "data", "errorProperty", "data", "options", "context", "map", "mapOptions", "layerContext", "i", "len", "params", "format", "style", "layer", "service", "layersContext", "layers", "metadata", "obj", "options", "qry", "props", "env", "arr", "ll", "lyrs", "lind", "len", "imsize", "olsize", "featOrFilt", "fsys", "data", "ret", "errorNodes", "arcNode", "error", "source", "response", "request", "root", "reqElem", "getElem", "propElem", "feat", "filt", "imagesz", "backgrnd", "layerlst", "ld", "ldef", "query", "queryElem", "lyrElem", "fquery", "qElem", "fcsElem1", "fcsElem2", "bufElem", "spfElem", "envElem", "toprenderer", "topRelem", "rind", "renderer", "renderElem", "ext", "extlen", "exact", "eelem", "selem", "keys", "i", "key", "rng", "rnglen", "range", "relem", "symbol", "polygon", "polyElem", "ln", "lnlen", "ring", "ringElem", "rn", "rnlen", "point", "pointElem", "newData", "errorNode", "responseNode", "rtype", "envelopeNode", "outputNode", "envAttr", "outputAttr", "features", "featureCount", "envelope", "featureList", "fn", "feature", "fields", "fdn", "fieldName", "fieldValue", "geom", "polys", "linearRings", "holes", "hn", "node", "type", "attributes", "attr", "ringPoints", "coords", "coordArr", "cn", "coordItems", "pn", "params", "defaults", "data", "axl", "parsed", "options", "data", "featureNodes", "features", "i", "feature", "node", "order", "type", "nodeList", "geometry", "parser", "bounds", "boxNodes", "boxNode", "box", "parentNode", "parentName", "attributes", "firstChild", "childNode", "fid", "coordString", "coords", "xList", "yList", "components", "point", "ring", "points", "dim", "j", "x", "y", "z", "pointList", "line", "polygon", "envelope", "lpoint", "lowerPoint", "upoint", "upperPoint", "beginPoint", "endPoint", "children", "child", "grandchildren", "grandchild", "name", "value", "gml", "geometryNode", "geomContainer", "featureNode", "featureContainer", "attr", "attrText", "nodename", "attrContainer", "className", "builder", "pointMember", "pointGeom", "lines", "lineMember", "lineGeom", "rings", "ringMember", "ringGeom", "polys", "polyMember", "polyGeom", "coordinatesNode", "parts", "txtNode", "options", "data", "features", "elements", "i", "len", "node", "obj", "first", "container", "str", "pointList", "coords", "numPoints", "points", "coord", "name", "local", "feature", "fid", "value", "root", "geometry", "components", "ii", "child", "type", "options", "node", "container", "obj", "min", "max", "features", "name", "root", "geometry", "points", "numPoints", "parts", "point", "i", "ring", "bounds", "options", "node", "obj", "container", "dim", "str", "coords", "point", "j", "x", "y", "z", "numPoints", "points", "i", "len", "min", "max", "features", "name", "root", "geometry", "pos", "parts", "ring", "components", "polygon", "bounds", "doc", "features", "ii", "content", "node", "feature", "attrib", "atomAttrib", "entryNode", "authors", "i", "categories", "category", "contributors", "links", "link", "whereNode", "geometry", "name", "value", "oNames", "personNode", "nsuri", "def", "nodes", "attval", "atomns", "oAtts", "j", "jj", "featureAttrib", "entries", "georssns", "locations", "where", "components", "point", "xy", "line", "coords", "p", "points", "polygon", "data", "persons", "options", "encoded", "geomType", "flatPoints", "flatPointsLength", "pointGeometries", "i", "y", "x", "dims", "opt_factor", "factor", "points", "point", "dim", "features", "feature", "geometry", "type", "pointGeometriesLength", "pointGeometry", "pointsLength", "numbers", "dimension", "d", "lastNumbers", "numbersLength", "num", "delta", "signedNum", "current", "shift", "encodedLength", "b", "result", "value", "options", "data", "types", "i", "len", "type", "nodes", "newOptions", "href", "request", "style", "styleName", "kmlColor", "color", "matches", "node", "styleTypeNode", "nodeList", "geometry", "parser", "width", "fill", "outline", "scale", "height", "iconNode", "w", "h", "google", "palette", "file_extension", "x", "y", "posX", "posY", "pos", "hotSpotNode", "xUnits", "yUnits", "balloonStyle", "id", "pairs", "j", "jlen", "pair", "key", "styleUrl", "features", "featureNode", "feature", "inlineStyleNode", "inlineStyle", "tracks", "track", "container", "name", "obj", "ii", "hasAngles", "point", "angles", "jj", "str", "coords", "parts", "order", "attributes", "fid", "styleBaseUrl", "coordString", "ring", "line", "pointList", "numPoints", "points", "numCoords", "numRings", "components", "child", "children", "edNodes", "grandchildren", "grandchild", "c1", "c2", "value", "dataNodes", "ed", "valueNode", "nameNode", "simpleDataNodes", "xmlNode", "namespace", "tagName", "kml", "folder", "folderName", "folderNameText", "folderDesc", "folderDescText", "placemarkName", "label", "placemarkDesc", "desc", "placemarkNode", "edNode", "geometryNode", "className", "builder", "rings", "ringMember", "ringGeom", "coordinatesNode", "path", "txtNode", "extendedData", "attributeName", "displayName", "item", "point", "lat", "lon", "line", "polygon", "where", "box", "location", "geometry", "coords", "components", "i", "len", "feature", "title", "description", "link", "id", "data", "node", "nsuri", "name", "def", "value", "eles", "doc", "itemlist", "numItems", "features", "georss", "geometryNode", "featureNode", "titleNode", "descNode", "linkNode", "attr", "attrText", "nodename", "attrContainer", "points", "path", "numPoints", "parts", "options", "layer", "features", "transaction", "feature", "geometryNode", "geomContainer", "featureContainer", "attr", "attrText", "nodename", "attrContainer", "insertNode", "updateNode", "propertyNode", "nameNode", "txtNode", "valueNode", "propName", "filterNode", "filterIdNode", "deleteNode", "root", "options", "version", "uri", "data", "options", "ows", "node", "exceptionReport", "exception", "text", "obj", "serviceIdentification", "keywords", "serviceProvider", "serviceContact", "contactInfo", "phone", "address", "operationsMetadata", "name", "operation", "dcp", "http", "allowedValues", "boundingBox", "str", "pointList", "nodeName", "identifier", "title", "abstractValue", "format", "node", "obj", "node", "obj", "parameter", "allowedValues", "range", "minValue", "maxValue", "value", "data", "raw", "capabilities", "node", "obj", "children", "providerName", "serviceIdentification", "keywords", "serviceContact", "contactInfo", "phone", "address", "contentMetadata", "coverageOfferingBrief", "serviceOrCoverageOfferingBrief", "nodeList", "min", "max", "node", "obj", "request", "contentMetadata", "coverageSummary", "crs", "format", "serviceIdentification", "keywords", "data", "schema", "parser", "node", "obj", "key", "descriptions", "description", "domain", "crs", "supportedCRSs", "supportedFormats", "spatialDomain", "srsName", "min", "max", "bounds", "node", "obj", "key", "descriptions", "description", "domain", "bb", "i", "len", "spatialDomain", "gridCRS", "xy", "crs", "format", "data", "raw", "capabilities", "node", "obj", "request", "featureTypeList", "featureType", "name", "parts", "title", "abst", "node", "capabilities", "service", "fees", "constraints", "onlineResource", "keywords", "obj", "request", "children", "childNode", "i", "srs", "node", "obj", "defaultSRS", "data", "raw", "capabilities", "node", "obj", "request", "featureTypeList", "featureType", "name", "parts", "title", "abst", "defaultCRS", "node", "obj", "complexTypes", "customTypes", "schema", "i", "len", "attributes", "attr", "name", "complexType", "customType", "sequence", "type", "element", "fullType", "localType", "value", "children", "child", "nodeName", "data", "parser", "options", "data", "root", "children", "describelayer", "childNode", "nodeName", "i", "layerName", "owsType", "owsURL", "typeName", "query", "layerDescription", "parser", "options", "wkt", "features", "type", "str", "matches", "i", "len", "component", "collection", "geometry", "isCollection", "pieces", "wktType", "data", "point", "multipoint", "array", "linestring", "multilinestring", "polygon", "multipolygon", "coords", "points", "components", "line", "lines", "ring", "linearring", "rings", "polygons", "wktArray", "tokens", "patterns", "text", "type", "len", "idx", "depth", "follows", "operators", "operatorReverse", "logicals", "logicalReverse", "precedence", "i", "tryToken", "pattern", "nextToken", "token", "pat", "matches", "match", "remainder", "msg", "tokenize", "results", "expect", "buildAst", "operatorStack", "postfix", "tok", "p", "buildTree", "rhs", "lhs", "operand", "min", "max", "property", "value", "maxy", "maxx", "miny", "minx", "prop", "distance", "result", "filter", "res", "first", "options", "layer_defaults", "interesting", "i", "area", "doc", "nodes", "ways", "relations", "feat_list", "relation_id", "relation", "features", "len", "way_id", "way", "poly", "point_list", "geometry", "feat", "node_id", "node", "j", "point", "lastPointList", "pointList", "result", "node_list", "id", "geom", "relation_list", "return_relations", "relation_object", "member_list", "member", "type", "way_list", "return_ways", "way_object", "dom_node", "interesting_tags", "tag_list", "tags", "key", "poly_shaped", "poly_tags", "root_node", "feature", "className", "builder", "already_exists", "node_ref", "nd_dom", "attrs", "tag", "state", "parser", "lastRole", "innerLignes", "outerLignes", "ref", "role", "newPath", "polygons", "currentInners", "k", "inner", "geometries", "options", "doc", "features", "tracks", "i", "len", "attrs", "segs", "j", "seglen", "track", "routes", "k", "klen", "route", "waypoints", "l", "wpt", "g", "featLength", "segment", "segmentType", "points", "point_features", "node", "attributes", "attrNode", "value", "name", "metadata", "gpx", "types", "type", "n", "feature", "geometry", "trkNode", "trkSegNodes", "point", "nodes", "desc", "options", "data", "obj", "node", "value", "child", "parent", "fid", "filter", "type", "ii", "childFilter", "i", "encode", "params", "len", "filterType", "options", "data", "obj", "node", "value", "child", "parent", "fid", "filter", "type", "ii", "childFilter", "i", "encode", "params", "len", "filterType", "options", "node", "obj", "filter", "wildCard", "singleChar", "esc", "box", "name", "child", "options", "node", "obj", "matchCase", "filter", "wildCard", "singleChar", "esc", "box", "sortProperties", "l", "sortProperty", "value", "name", "child", "options", "node", "obj", "matchCase", "filter", "wildCard", "singleChar", "esc", "box", "sortProperties", "l", "sortProperty", "value", "name", "child", "data", "options", "sld", "node", "obj", "layer", "i", "len", "style", "config", "rule", "symbolizer", "labelAlign", "x", "y", "labelAnchorPointX", "labelAnchorPointY", "labelXOffset", "labelYOffset", "labelPerpendicularOffset", "value", "radius", "colorMap", "q", "o", "cssProperty", "symProperty", "graphic", "properties", "prop", "pointRadius", "opacity", "size", "rotation", "sym", "css", "href", "format", "regex", "key", "nodeName", "tokens", "item", "last", "root", "name", "title", "description", "rulesByZ", "zValues", "ruleMap", "zIndex", "clone", "ii", "j", "jj", "rules", "bool", "type", "types", "scale", "xAlign", "yAlign", "label", "geometry", "colorMapEntry", "a", "node", "obj", "value", "rule", "symbolizer", "priority", "option", "writers", "options", "key", "options", "cls", "data", "obj", "node", "attrs", "domainValue", "i", "len", "value", "options", "options", "cls", "options", "data", "obj", "node", "version", "timestamp", "attrs", "SearchResults", "i", "len", "record", "name", "gninfo", "dc_element", "ResponseHandler", "ElementName", "format", "child", "options", "cls", "options", "feature", "srsName", "data", "obj", "node", "features", "value", "len", "i", "name", "nativeElement", "modified", "key", "geom", "schemaLocations", "parts", "uri", "filter", "options", "node", "obj", "first", "container", "prefix", "i", "len", "options", "node", "obj", "first", "container", "prefix", "i", "len", "options", "node", "obj", "first", "container", "prefix", "i", "len", "feature", "modified", "key", "name", "options", "text", "lines", "columns", "features", "lcv", "currLine", "vals", "geometry", "attributes", "style", "icon", "iconSize", "iconOffset", "overflow", "set", "valIndex", "coords", "size", "offset", "feature", "import_JSON", "json", "type", "filter", "results", "obj", "err", "i", "len", "geom", "valid", "feature", "geometry", "attributes", "bbox", "collection", "numGeom", "components", "array", "points", "p", "lines", "l", "rings", "r", "polys", "pretty", "geojson", "numFeatures", "element", "msg", "object", "proj", "crs", "code", "geometryType", "data", "point", "multipoint", "linestring", "multilinestring", "polygon", "multipolygon", "layer", "parser", "layerContext", "i", "len", "format", "style", "obj", "context", "layers", "metadata", "uri", "prefix", "options", "data", "root", "context", "obj", "node", "children", "childNode", "processor", "local", "i", "len", "layerContext", "bounds", "format", "style", "sld", "xml", "name", "title", "keywords", "abst", "contact", "personPrimary", "primaryPerson", "person", "organization", "position", "contactAddress", "type", "address", "city", "stateOrProvince", "postcode", "country", "phone", "fax", "email", "legend", "dimensions", "dim", "values", "childValue", "attributes", "value", "maxExtent", "list", "attribution", "size", "properties", "child", "prop", "server", "elName", "url", "attr", "optionalAttributes", "required_attributes", "dimension", "layer", "styles", "s", "link", "doc", "imported", "href", "object", "links", "options", "layerContext", "node", "srs", "values", "i", "len", "context", "projections", "name", "options", "layerContext", "node", "minScaleDenominator", "context", "minSD", "maxSD", "name", "options", "node", "domainSubset", "temporalSubset", "len", "timePeriod", "begin", "end", "resolution", "output", "gridCRS", "baseCRS", "origin", "type", "offsets", "CS", "data", "raw", "capabilities", "parser", "node", "obj", "bbox", "res", "fees", "constraints", "parentLayer", "capability", "attrNode", "queryable", "cascaded", "opaque", "noSubsets", "fixedWidth", "fixedHeight", "parent", "extend", "layer", "parts", "request", "gfi", "style", "legend", "metadataURL", "name", "authority", "node", "obj", "userSymbols", "bbox", "min", "max", "rad2", "ipm", "name", "dim", "extent", "values", "node", "obj", "srs", "values", "i", "len", "node", "obj", "node", "obj", "bbox", "maxScale", "minScale", "name", "dim", "keyword", "node", "obj", "vendorSpecific", "tileset", "res", "i", "len", "data", "result", "root", "scope", "read", "response", "layerNodes", "i", "len", "node", "layerName", "featureNodes", "j", "featureNode", "geomInfo", "attributes", "feature", "geom", "jlen", "attribute", "nodes", "criteria", "children", "tagName", "n", "matchNodes", "child", "k", "grandchildren", "name", "grandchild", "geometry", "bounds", "options", "data", "capabilities", "node", "obj", "timePeriod", "contents", "offeringList", "id", "offering", "data", "info", "features", "i", "len", "container", "feature", "node", "obj", "options", "data", "info", "options", "node", "obj", "observationCollection", "measurement", "observation", "samplingTime", "foi", "features", "i", "len", "feature", "result", "timeInstant", "procedure", "observedProperty", "root", "options", "version", "obj", "context", "options", "l", "i", "len", "layerContext", "nPath", "nTitle", "a", "path", "data", "context", "layers", "layerArray", "layer", "name", "root", "node", "obj", "elements", "el", "featurenode", "style", "legend", "decomposedPath", "dataExtent", "styles", "subPaths", "title", "index", "bounds", "capabilities", "config", "layer", "contents", "layers", "layerDef", "i", "ii", "format", "matrixSet", "l", "style", "requestEncoding", "http", "constraints", "allowedValues", "dimensions", "params", "id", "ld", "dimension", "projection", "units", "resolutions", "minScaleDenominator", "maxScaleDenominator", "reducedMatrixIds", "tileMatrixSetLink", "tileMatrixSetLinks", "buildResolutionsArray", "scaleDenominator", "j", "tmpMatrixIds", "mid", "k", "ll", "url", "resourceUrls", "resourceUrl", "t", "tt", "httpGet", "constraint", "a", "b", "options", "options", "yx", "data", "capabilities", "node", "obj", "layer", "style", "tileMatrixSetLink", "tileMatrixSet", "tileMatrixLimits", "tileMatrix", "topLeftCorner", "coords", "crs", "resourceType", "resourceUrl", "legend", "width", "height", "minScaleDenominator", "maxScaleDenominator", "dimension", "options", "data", "capabilities", "node", "obj", "processOfferings", "processVersion", "process", "languages", "language", "data", "info", "node", "obj", "processDescriptions", "processVersion", "processDescription", "processOutputs", "output", "dataInputs", "input", "complexData", "format", "options", "doc", "node", "data", "info", "responseForm", "responseDocument", "len", "output", "rawDataOutput", "dataInputs", "ii", "input", "literalData", "complexData", "reference", "obj", "body", "processDescription", "processOutputs", "child", "data", "options", "xls", "node", "responseList", "feature", "address", "request", "root", "header", "addresses", "len", "freeFormAddress", "street", "i", "building", "municipality", "countrySubdivision", "postalCode", "data", "result", "root", "exceptionInfo", "node", "obj", "exceptionReport", "exception", "node", "obj", "data", "raw", "capabilities", "options", "i", "evt", "bounds", "position", "minXY", "maxXY", "filter", "response", "result", "features", "clickPosition", "point", "feature", "resultFeature", "dist", "minDist", "cont", "selectedFeatures", "len", "fid", "hfid", "map", "pixel", "llPx", "urPx", "ll", "ur", "options", "div", "options", "direction", "options", "getSlideFactor", "dim", "options", "layer", "options", "controls", "div", "position", "center", "error", "config", "Type", "config", "config", "config", "config", "config", "code", "lang", "parts", "testLang", "key", "context", "dictionary", "message", "from", "to", "radius", "R", "sinHalfDeltaLon", "sinHalfDeltaLat", "a", "y", "x", "options", "map", "i", "ii", "evt", "layer", "j", "tile", "delay", "nice", "tileQueue", "queued", "url", "img", "limit", "animating", "options", "s", "process", "serverID", "processID", "callback", "scope", "server", "describe", "evt", "response", "options", "description", "inputs", "input", "i", "ii", "me", "outputIndex", "callback", "response", "output", "result", "mimeType", "outputs", "identifier", "server", "data", "complexData", "format", "chainLink", "formats", "source", "isArray", "target", "current", "sourceFormats", "targetFormats", "f"]
}
